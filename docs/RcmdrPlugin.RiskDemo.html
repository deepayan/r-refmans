<!DOCTYPE html><html><head><title>Help for package RcmdrPlugin.RiskDemo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RcmdrPlugin.RiskDemo}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RcmdrPlugin.RiskDemo-package'>
<p>R Commander Plug-in for Risk Demonstration</p></a></li>
<li><a href='#bondCurve'>
<p>Drawing forward and yield curves</p></a></li>
<li><a href='#bondFigure'>
<p>Bond price as a function of interest rate.</p></a></li>
<li><a href='#bondPrice'>
<p>Computing bond prices</p></a></li>
<li><a href='#computeRuin'>
<p>Ruin probability computation with infinite time horizon</p></a></li>
<li><a href='#computeRuinFinite'>
<p>Ruin probability computation with finite time horizon</p></a></li>
<li><a href='#countries.mort'>
<p>Mortality data</p></a></li>
<li><a href='#covidSmooth'>
<p>Kalman smoothing of the covid model</p></a></li>
<li><a href='#dataCovid'>
<p>COVID-19 statistics</p></a></li>
<li><a href='#dataCovidFin'>
<p>Confirmed COVID-19 cases in Finland</p></a></li>
<li><a href='#drawBars'>
<p>Plotting epidemic statistics</p></a></li>
<li><a href='#drawBarsFin'>
<p>Plotting epidemic statistics with Finnish data</p></a></li>
<li><a href='#drawFigure'>
<p>Efficient frontier and return distribution figures</p></a></li>
<li><a href='#drawIncidence'>
<p>Plotting incidence curves of an epidemic</p></a></li>
<li><a href='#drawIncidenceFin'>
<p>Plotting incidence curves of an epidemic with Finnish data</p></a></li>
<li><a href='#drawPositiveRate'>
<p>Plotting the positive rate of COVID-19 tests or the tests per case</p></a></li>
<li><a href='#drawRuin'><p>Plotting simulations of a surplus process</p></a></li>
<li><a href='#drawTests'>
<p>Plotting time series related to COVID-19 testing</p></a></li>
<li><a href='#fin'>
<p>Mortality data for Finland</p></a></li>
<li><a href='#fin.fcast'>
<p>Finnish mortality forecast</p></a></li>
<li><a href='#fin.lca'>
<p>Lee-Carter model fit for Finnish data</p></a></li>
<li><a href='#loglikCovid'>
<p>Computing the log-likelihood of the covid model</p></a></li>
<li><a href='#params'>
<p>Yield curve parameter data</p></a></li>
<li><a href='#plotForecast'>
<p>Forecasting new covid cases</p></a></li>
<li><a href='#plotR'>
<p>Plotting the effective reproduction number (R)</p></a></li>
<li><a href='#pop.pred'>
<p>Population forecasting</p></a></li>
<li><a href='#popRegionsFin'>
<p>Population data on Finnish hospital districts</p></a></li>
<li><a href='#portfOptim'>
<p>Portfolio optimization for an index model</p></a></li>
<li><a href='#RcmdrPlugin.RiskDemo-internal'><p>Internal RiskDemo objects</p></a></li>
<li><a href='#returns'>
<p>Computing expected returns and their covariance matrix</p></a></li>
<li><a href='#solveLund'>
<p>Solving Lund's exponent</p></a></li>
<li><a href='#solveYield'>
<p>Computing bond yields</p></a></li>
<li><a href='#stock.price'>
<p>Computing stock prices</p></a></li>
<li><a href='#stockData'>
<p>Stock data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Commander Plug-in for Risk Demonstration</td>
</tr>
<tr>
<td>Version:</td>
<td>3.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Arto Luoma</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arto Luoma &lt;arto.luoma@wippies.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>R Commander plug-in to demonstrate various actuarial and financial risks. It includes valuation of bonds and stocks, portfolio optimization, classical ruin theory, demography and epidemic. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcmdr, demography, forecast, ftsa, ggplot2, dplyr, scales,
zoo, data.table</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tkrplot, rgl</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>no</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-05 19:19:21 UTC; arto</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-06 09:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='RcmdrPlugin.RiskDemo-package'>
R Commander Plug-in for Risk Demonstration
</h2><span id='topic+RcmdrPlugin.RiskDemo-package'></span><span id='topic+RcmdrPlugin.RiskDemo'></span>

<h3>Description</h3>

<p>R Commander plug-in to demonstrate various actuarial and financial risks. It includes valuation of bonds and stocks, portfolio optimization, classical ruin theory, demography and epidemic. 
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> RcmdrPlugin.RiskDemo</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 3.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2021-04-03</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Arto Luoma
</p>
<p>Maintainer: Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>

<hr>
<h2 id='bondCurve'>
Drawing forward and yield curves
</h2><span id='topic+bondCurve'></span>

<h3>Description</h3>

<p>This function draws forward and yields curves, for AAA-rated central governement bonds and/or all central governement bonds.   
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bondCurve(date1, date2 = NULL, yield = TRUE, forward = TRUE, 
  AAA = TRUE, all = TRUE, params)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bondCurve_+3A_date1">date1</code></td>
<td>

<p>The date for which the curves are drawn
</p>
</td></tr>
<tr><td><code id="bondCurve_+3A_date2">date2</code></td>
<td>

<p>Optional second date for which the curves are drawn
</p>
</td></tr>
<tr><td><code id="bondCurve_+3A_yield">yield</code></td>
<td>

<p>Is the yield curve shown (TRUE/FALSE)?
</p>
</td></tr>
<tr><td><code id="bondCurve_+3A_forward">forward</code></td>
<td>

<p>Is the forward curve shown (TRUE/FALSE)? 
</p>
</td></tr>
<tr><td><code id="bondCurve_+3A_aaa">AAA</code></td>
<td>

<p>Are the curves drawn for the AAA-rated bonds (TRUE/FALSE)?
</p>
</td></tr>
<tr><td><code id="bondCurve_+3A_all">all</code></td>
<td>

<p>Are the curves drawn for the bonds with all ratings (TRUE/FALSE)?
</p>
</td></tr>
<tr><td><code id="bondCurve_+3A_params">params</code></td>
<td>

<p>The data frame of curve parameters
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value. Only a figure is produced.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma
</p>


<h3>References</h3>

<p>https://bit.ly/2zfs0G8</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(params)
bondCurve(as.Date("2004-09-06"),params=params)
</code></pre>

<hr>
<h2 id='bondFigure'>
Bond price as a function of interest rate.
</h2><span id='topic+bondFigure'></span>

<h3>Description</h3>

<p>This function plots the bond price as a function of interest rate. It also shows, using dotted lines, the yield to maturity rate corresponding to the face value, and the flat price corresponding to the yield to maturity. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bondFigure(buyDate, matDate, rateCoupon, yieldToMat = NULL, 
           bondPr = NULL, nPay)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bondFigure_+3A_buydate">buyDate</code></td>
<td>

<p>the date when the coupon is bought (settlement date)
</p>
</td></tr>
<tr><td><code id="bondFigure_+3A_matdate">matDate</code></td>
<td>

<p>maturity date
</p>
</td></tr>
<tr><td><code id="bondFigure_+3A_ratecoupon">rateCoupon</code></td>
<td>

<p>coupon rate (in decimals)
</p>
</td></tr>
<tr><td><code id="bondFigure_+3A_yieldtomat">yieldToMat</code></td>
<td>

<p>yield to maturity (in decimals)
</p>
</td></tr>
<tr><td><code id="bondFigure_+3A_bondpr">bondPr</code></td>
<td>

<p>the flat price of the bond
</p>
</td></tr>
<tr><td><code id="bondFigure_+3A_npay">nPay</code></td>
<td>

<p>number of coupon payments per year
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>either yieldToMat or bondPr should be given as input.
</p>


<h3>Value</h3>

<p>This function only plots a figure.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Bodie, Kane, and Marcus (2014) <em>Investments, 10th Global Edition</em>, McGraw-Hill Education, (see Section 14.2 Bond Pricing).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bondPrice">bondPrice</a></code>, <code><a href="#topic+solveYield">solveYield</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bondFigure("2012-7-31","2018-7-31",rateCoupon=0.0225,yieldToMat=0.0079,
           nPay=2)
bondFigure("2012-7-31","2018-7-31",rateCoupon=0.0225,bondPr=90,nPay=2)
</code></pre>

<hr>
<h2 id='bondPrice'>
Computing bond prices
</h2><span id='topic+bondPrice'></span>

<h3>Description</h3>

<p>This function computes the bond price, given the yield to maturity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bondPrice(buyDate, matDate, rateCoupon, yieldToMat, nPay)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bondPrice_+3A_buydate">buyDate</code></td>
<td>

<p>the date at which the bond is bought (settlement date). 
</p>
</td></tr>
<tr><td><code id="bondPrice_+3A_matdate">matDate</code></td>
<td>

<p>maturity date
</p>
</td></tr>
<tr><td><code id="bondPrice_+3A_ratecoupon">rateCoupon</code></td>
<td>

<p>annual coupon date
</p>
</td></tr>
<tr><td><code id="bondPrice_+3A_yieldtomat">yieldToMat</code></td>
<td>

<p>yield to maturity 
</p>
</td></tr>
<tr><td><code id="bondPrice_+3A_npay">nPay</code></td>
<td>

<p>number of coupon payments per day
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All the rates are given in decimals.
</p>


<h3>Value</h3>

<p>A list with the following components:
</p>
<table>
<tr><td><code>yieldToMaturity</code></td>
<td>
<p>yield to maturity</p>
</td></tr>
<tr><td><code>flatPrice</code></td>
<td>
<p>flat price</p>
</td></tr>
<tr><td><code>daysSinceLastCoupon</code></td>
<td>
<p>days since previous coupon payment</p>
</td></tr>
<tr><td><code>daysInCouponPeriod</code></td>
<td>
<p>days in a coupon period</p>
</td></tr>
<tr><td><code>accruedInterest</code></td>
<td>
<p>accrued interest since last coupon payment</p>
</td></tr>
<tr><td><code>invoicePrice</code></td>
<td>
<p>invoice price (= flat price + accrued interest)</p>
</td></tr>
</table>


<h3>Note</h3>

<p>With Excel functions PRICE, DATE, COUPDAYBS and COUPDAYS you can do the same. 
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Bodie, Kane, and Marcus (2014) <em>Investments, 10th Global Edition</em>, McGraw-Hill Education, (see Bond Pricing between Coupon Dates in Section 14.2).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+solveYield">solveYield</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bondPrice("2012-7-31","2018-7-31",0.0225,0.0079,2)
bondPrice("2012-7-31","2018-7-31",0.0225,0.0079,4)
bondPrice("2012-7-31","2030-5-15",0.0625,0.02117,2)
</code></pre>

<hr>
<h2 id='computeRuin'>
Ruin probability computation with infinite time horizon
</h2><span id='topic+computeRuin'></span>

<h3>Description</h3>

<p>This function uses classical ruin theory to compute either ruin probability, safety loading or initial capital, given two of them. The time horizon is infinite. Gamma distribution is used to model claim sizes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeRuin(U0 = NULL, theta = NULL, eps = NULL, alpha, beta)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeRuin_+3A_u0">U0</code></td>
<td>

<p>initial capital
</p>
</td></tr>
<tr><td><code id="computeRuin_+3A_theta">theta</code></td>
<td>
<p>safety loading
</p>
</td></tr>
<tr><td><code id="computeRuin_+3A_eps">eps</code></td>
<td>

<p>ruin probability
</p>
</td></tr>
<tr><td><code id="computeRuin_+3A_alpha">alpha</code></td>
<td>

<p>shape parameter of gamma distribution
</p>
</td></tr>
<tr><td><code id="computeRuin_+3A_beta">beta</code></td>
<td>

<p>rate parameter of gamma distribution
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value is a list with the following components:
</p>
<table>
<tr><td><code>LundbergExp</code></td>
<td>
<p>Lundberg's exponent R</p>
</td></tr>
<tr><td><code>initialCapital</code></td>
<td>
<p>initial capital</p>
</td></tr>
<tr><td><code>safetyLoading</code></td>
<td>
<p>safety loading</p>
</td></tr>
<tr><td><code>ruinProb</code></td>
<td>
<p>ruin probability</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Gray and Pitts (2012) <em>Risk Modelling in General Insurance: From Principles to Practice</em>, Cambridge University Press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+computeRuinFinite">computeRuinFinite</a></code>, <code><a href="#topic+solveLund">solveLund</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeRuin(U0=1000,theta=0.01,alpha=1,beta=0.1)
computeRuin(eps=0.005,theta=0.01,alpha=1,beta=0.1)
computeRuin(U0=5399.24,eps=0.005,alpha=1,beta=0.1)
</code></pre>

<hr>
<h2 id='computeRuinFinite'>
Ruin probability computation with finite time horizon
</h2><span id='topic+computeRuinFinite'></span>

<h3>Description</h3>

<p>This function uses classical ruin theory to compute either ruin probability, safety loading or initial capital, given two of them. The time horizon is finite. Gamma distribution is used to model claim sizes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeRuinFinite(T0, U0 = NULL, theta = NULL, eps = NULL, lambda, 
                  alpha, beta)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="computeRuinFinite_+3A_t0">T0</code></td>
<td>

<p>time horizon (in years)
</p>
</td></tr>
<tr><td><code id="computeRuinFinite_+3A_u0">U0</code></td>
<td>

<p>initial capital
</p>
</td></tr>
<tr><td><code id="computeRuinFinite_+3A_theta">theta</code></td>
<td>

<p>safety loading
</p>
</td></tr>
<tr><td><code id="computeRuinFinite_+3A_eps">eps</code></td>
<td>

<p>ruin probability
</p>
</td></tr>
<tr><td><code id="computeRuinFinite_+3A_lambda">lambda</code></td>
<td>

<p>claim intensity (mean number of claims per year)
</p>
</td></tr>
<tr><td><code id="computeRuinFinite_+3A_alpha">alpha</code></td>
<td>

<p>shape parameter of gamma distribution
</p>
</td></tr>
<tr><td><code id="computeRuinFinite_+3A_beta">beta</code></td>
<td>

<p>rate parameter of gamma distribution
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The value is a list with the following components:
</p>
<table>
<tr><td><code>LundbergExp</code></td>
<td>
<p>Lundberg's exponent R</p>
</td></tr>
<tr><td><code>initialCapital</code></td>
<td>
<p>initial capital</p>
</td></tr>
<tr><td><code>safetyLoading</code></td>
<td>
<p>safety loading</p>
</td></tr>
<tr><td><code>ruinProb</code></td>
<td>
<p>ruin probability</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+computeRuin">computeRuin</a></code>, <code><a href="#topic+solveLund">solveLund</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeRuinFinite(T0=100,U0=1000,theta=0.01,lambda=100,alpha=1,beta=0.1)
computeRuinFinite(T0=1,eps=0.005,theta=0.001,lambda=100,alpha=1,beta=0.1)
computeRuinFinite(T0=500,U0=5347,eps=0.005,lambda=100,alpha=1,beta=0.1)
</code></pre>

<hr>
<h2 id='countries.mort'>
Mortality data
</h2><span id='topic+countries.mort'></span>

<h3>Description</h3>

<p>Mortality data for 10 countries (period death rates and exposures) retrieved from
Human Mortality Database. The data are rounded to three significant digits and include the Nordic countries, China, U.S., Russia, Japan  and Germany.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("countries.mort")</code></pre>


<h3>Format</h3>

<p>List of objects of class demogdata.
</p>


<h3>Source</h3>

<p>HMD. Human Mortality Database. Max Planck Institute for Demographic Research (Germany), University of California, Berkeley (USA), and French Institute for Demographic Studies (France). Available at www.mortality.org. (Data downloaded Nov 13, 2023.)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(countries.mort)
plot(countries.mort[[1]])
</code></pre>

<hr>
<h2 id='covidSmooth'>
Kalman smoothing of the covid model
</h2><span id='topic+covidSmooth'></span>

<h3>Description</h3>

<p>This function does Kalman smoothing for the simple model  that is used to predict new COVID-19 cases. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>covidSmooth(par, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="covidSmooth_+3A_par">par</code></td>
<td>

<p>Logarithms of the variance parameters of drift, seasonal component, and error term
</p>
</td></tr>
<tr><td><code id="covidSmooth_+3A_y">y</code></td>
<td>

<p>Univariate numeric time series of new COVID-19 cases
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See loglikCovid.
</p>


<h3>Value</h3>

<table>
<tr><td><code>Xif</code></td>
<td>
<p>Matrix of filtered values, where the state vectors are given as rows</p>
</td></tr>
<tr><td><code>Xis</code></td>
<td>
<p>Matrix of smoothed values, where the state vectors are given as rows</p>
</td></tr>
<tr><td><code>Pmat</code></td>
<td>
<p>Array of state uncertainty matrices, evaluated at time <em>t-1</em>. The first  array index is for time.</p>
</td></tr>
<tr><td><code>Pfmat</code></td>
<td>
<p>Array of state uncertainty matrices, evaluated at time <em>t</em>. The first  array index is for time.</p>
</td></tr>
<tr><td><code>Psmat</code></td>
<td>
<p>Array of state uncertainty matrices, evaluated at time <em>n</em>, where <em>n</em> is the number of observations. The first array index is for time.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arto Luoma
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loglikCovid">loglikCovid</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Preparing a time series
library(zoo)
data(dataCovidFin)
timeindex &lt;- dataCovidFin[dataCovidFin$Alue=="Kaikki Alueet","Aika"]
series &lt;- dataCovidFin[dataCovidFin$Alue=="Kaikki Alueet","val"]
series &lt;- window(zoo(series,order.by=timeindex),start="2020-03-01",
                 end="2021-03-01") 
#Fitting a state space model and smoothing the components
p0 &lt;- c(-9,-7,-3.3)
fit &lt;- nlm(loglikCovid,p=p0,y=series)
out &lt;- covidSmooth(fit$estimate,y=series)

#Plotting the filtered and smoothed components
smoothed &lt;- zoo(out$Xis[,1:3],order.by=time(series))
filtered &lt;- zoo(out$Xif[,1:3],order.by=time(series))
colnames(smoothed) &lt;- colnames(filtered) &lt;- c("Level","Drift","Seasonal")
plot(filtered,xlab="Time",main="Filtered components of the time series")
plot(smoothed,xlab="Time",main="Smoothed components of the time series")

#Plotting the original time series, and the filtered and smoothed local level 
#series after transforming them to original scale
plot(series,xlab="Time",ylab="Time series")
lines(exp(filtered[,1])-2,col=3)
lines(exp(smoothed[,1])-2,col=2)
legend("topleft",c("original","filtered","smoothed"),col=c(1,3,2),lty=1)
</code></pre>

<hr>
<h2 id='dataCovid'>
COVID-19 statistics
</h2><span id='topic+dataCovid'></span>

<h3>Description</h3>

<p>This data set consists of several statistics about the COVID-19 pandemic in 45 countries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("dataCovid")</code></pre>


<h3>Format</h3>

<p>A data frame with 18400 observations on the following 27 variables.
</p>

<dl>
<dt><code>location</code></dt><dd><p>a character vector</p>
</dd>
<dt><code>date</code></dt><dd><p>a Date</p>
</dd>
<dt><code>new_cases</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_cases_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_cases_smoothed_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_cases_smoothed</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_deaths_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_deaths</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_deaths_smoothed_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_deaths_smoothed</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>total_deaths_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>total_deaths</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>total_cases</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>total_cases_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>hosp_patients</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>hosp_patients_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>icu_patients_per_million</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>icu_patients</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>reproduction_rate</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_tests</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_tests_per_thousand</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>tests_per_case</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>positive_rate</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_tests_smoothed</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>new_tests_smoothed_per_thousand</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>total_tests</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>total_tests_per_thousand</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Details</h3>

<p>This is a subset of the complete data set available online, downloaded on March 31, 2021.
</p>


<h3>Source</h3>

<p>https://covid.ourworldindata.org/data/owid-covid-data.csv
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(zoo)
data(dataCovid)
casesFin &lt;- subset(dataCovid,subset=location=="Finland", select=c(date,new_cases))
plot(zoo(casesFin$new_cases,order.by=casesFin$date),ylab="New COVID-19 cases in Finland",
xlab="")
</code></pre>

<hr>
<h2 id='dataCovidFin'>
Confirmed COVID-19 cases in Finland
</h2><span id='topic+dataCovidFin'></span>

<h3>Description</h3>

<p>This data set provides the confirmed COVID-19 cases in 21 Finnish hospital districts, in addition to the total number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("dataCovidFin")</code></pre>


<h3>Format</h3>

<p>A data frame with 16082 observations on the following 3 variables.
</p>

<dl>
<dt><code>Aika</code></dt><dd><p>Date</p>
</dd>
<dt><code>Alue</code></dt><dd><p>character vector: hospital district</p>
</dd>
<dt><code>val</code></dt><dd><p>numeric vector: number of new confirmed cases</p>
</dd>
</dl>



<h3>Details</h3>

<p>The data were downloaded on March 31, 2021, via THL's open data API.
</p>


<h3>Source</h3>

<p>https://bit.ly/2PO1DnS
</p>


<h3>References</h3>

<p>https://bit.ly/3ryfwE4
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(zoo)
data(dataCovidFin)
casesFin &lt;- subset(dataCovidFin, subset = Alue=="Kaikki Alueet")
plot(zoo(casesFin$val,order.by=casesFin$Aika),ylab="New COVID-19 cases in Finland",xlab="")
</code></pre>

<hr>
<h2 id='drawBars'>
Plotting epidemic statistics
</h2><span id='topic+drawBars'></span>

<h3>Description</h3>

<p>This function plots several epidemic statistics for selected countries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawBars(data, countries, start = "2020-06-01", end = "last", measure = "new_cases", 
    atop = TRUE, perMillion = FALSE, drawMean = TRUE, bars = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawBars_+3A_data">data</code></td>
<td>

<p>data frame similar to (or including the same columns as) <code>dataCovid</code>
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_countries">countries</code></td>
<td>

<p>vector of characters srings indicating the countries for which the selected statistic is plotted
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_start">start</code></td>
<td>

<p>beginning date of the time window for which the statistic is plotted
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_end">end</code></td>
<td>

<p>ending date of the time window for which the statistic is plotted
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_measure">measure</code></td>
<td>

<p>statistic to be plotted
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_atop">atop</code></td>
<td>

<p>logical indicating if the bars of different countries are plotted on top of one another
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_permillion">perMillion</code></td>
<td>

<p>logical indicating if the statistic is proportioned to a population of million
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_drawmean">drawMean</code></td>
<td>

<p>logical indicating if a smoothed curve is drawn 
</p>
</td></tr>
<tr><td><code id="drawBars_+3A_bars">bars</code></td>
<td>

<p>logical indicating if bars are plotted
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drawBarsFin">drawBarsFin</a></code>, <code><a href="#topic+dataCovid">dataCovid</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovid)
drawBars(data=dataCovid, countries=c('Finland','France'),start='2020-6-1',
         measure='new_cases',perMillion=TRUE)
</code></pre>

<hr>
<h2 id='drawBarsFin'>
Plotting epidemic statistics with Finnish data
</h2><span id='topic+drawBarsFin'></span>

<h3>Description</h3>

<p>This function plots the new cases or total cases of an epidemic for selected regions in Finland.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawBarsFin(data, pop, regions, start = "2020-06-01", end = "last", 
    measure = "new_cases", atop = TRUE, perMillion = FALSE, drawMean = TRUE, 
    bars = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawBarsFin_+3A_data">data</code></td>
<td>

<p>data frame including columns <code>Aika</code> (character string indicating the date), <code>Alue</code> (character string indicating the region) and  <code>val</code> (numeric indicating the number of new cases)
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_pop">pop</code></td>
<td>

<p>data frame including columns <code>Alue</code> (character string indicating the region) and <code>val</code> (integer indicating the population)
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_regions">regions</code></td>
<td>

<p>vector of characters strings indicating the regions for which the selected statistic is plotted
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_start">start</code></td>
<td>

<p>beginning date of the time window for which the curve is plotted
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_end">end</code></td>
<td>

<p>ending date of the time window for which the curve is plotted
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_measure">measure</code></td>
<td>

<p>statistic to be plotted
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_atop">atop</code></td>
<td>

<p>logical indicating if the bars of different regions are plotted on top of one another
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_permillion">perMillion</code></td>
<td>

<p>logical indicating if the statistic is proportioned to a population of million
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_drawmean">drawMean</code></td>
<td>

<p>logical indicating if a smoothed curve (rolling mean of 7 observations) is plotted
</p>
</td></tr>
<tr><td><code id="drawBarsFin_+3A_bars">bars</code></td>
<td>

<p>logical indicating if bars are plotted
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drawBars">drawBars</a></code>, <code><a href="#topic+dataCovidFin">dataCovidFin</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovidFin)
data(popRegionsFin)
drawBarsFin(dataCovidFin,popRegionsFin,regions=popRegionsFin$Alue[1:7])
</code></pre>

<hr>
<h2 id='drawFigure'>
Efficient frontier and return distribution figures
</h2><span id='topic+drawFigure'></span>

<h3>Description</h3>

<p>Plots the efficient frontiers of risky investments and all investments. The optimum points corresponding to the risk aversion coefficient are indicated by dots. Further, the function plots a predictive return distribution figure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawFigure(symbol, yield, vol, beta, r = 1, 
  total = 1, indexVol = 20, nStocks = 7, balanceInt = 12, A = 10, 
  riskfree = FALSE, bor = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawFigure_+3A_symbol">symbol</code></td>
<td>

<p>character vector of the symbols of the risky investments
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_yield">yield</code></td>
<td>

<p>vector of yields (%)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_vol">vol</code></td>
<td>

<p>vector of volatilities (%)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_beta">beta</code></td>
<td>

<p>vector of betas (%)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_r">r</code></td>
<td>

<p>risk-free interest rate (%)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_total">total</code></td>
<td>

<p>total investment (for example in euros)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_indexvol">indexVol</code></td>
<td>

<p>volatility of market portfolio (%)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_nstocks">nStocks</code></td>
<td>

<p>number of risky investments in the portfolio
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_balanceint">balanceInt</code></td>
<td>

<p>balancing interval of the portfolio in months
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_a">A</code></td>
<td>

<p>risk aversion coefficient (see details)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_riskfree">riskfree</code></td>
<td>

<p>is risk-free investment included in the portfolio (logical)
</p>
</td></tr>
<tr><td><code id="drawFigure_+3A_bor">bor</code></td>
<td>

<p>is borrowing (negative risk-free investment) allowed (logical) 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses the single-index model and Markovitz portfolio optimization model to find the optimum risky portfolio. The returns are assumed to be log-normally distributed. The maximized function is mu - 0.5*A*var where mu is expected return, A is risk aversion coefficient, and var is return variance. 
</p>


<h3>Value</h3>

<table>
<tr><td><code>portfolio</code></td>
<td>
<p>allocation of the total investment (in euros)</p>
</td></tr>
<tr><td><code>returnExpectation</code></td>
<td>
<p>expected portfolio return</p>
</td></tr>
<tr><td><code>returnDeviation</code></td>
<td>
<p>standard deviation of the portfolio</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Bodie, Kane, and Marcus (2014) <em>Investments, 10th Global Edition</em>, McGraw-Hill Education, (see Section 7.4 The Markowitz Portfolio Optimization Model and Section 8.2 The Single-Index Model).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+portfOptim">portfOptim</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(stockData, package="RcmdrPlugin.RiskDemo")
with(stockData,drawFigure(symbol=rownames(stockData),yield=divYield,
  vol=vol,beta=beta,r=1,total=100,indexVol=10, 
  nStocks=5,balanceInt=12,A=10,riskfree=TRUE,bor=FALSE))
</code></pre>

<hr>
<h2 id='drawIncidence'>
Plotting incidence curves of an epidemic
</h2><span id='topic+drawIncidence'></span>

<h3>Description</h3>

<p>This function plots incidence curves of an epidemic for selected countries. The incidences are new cases per 100 000 inhabitants within one or two weeks.   
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawIncidence(data, countries, start = "2020-06-01", end = "last", weeks = 2, 
    log = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawIncidence_+3A_data">data</code></td>
<td>

<p>data frame including columns <code>location</code> (character string indicating the country), <code>date</code> (character string) and  <code>new_cases_per_million</code> (numeric)
</p>
</td></tr>
<tr><td><code id="drawIncidence_+3A_countries">countries</code></td>
<td>

<p>vector of characters srings indicating the countries for which the curves are plotted
</p>
</td></tr>
<tr><td><code id="drawIncidence_+3A_start">start</code></td>
<td>

<p>beginning date of the time window for which the curve is plotted
</p>
</td></tr>
<tr><td><code id="drawIncidence_+3A_end">end</code></td>
<td>

<p>ending date of the time window for which the curve is plotted
</p>
</td></tr>
<tr><td><code id="drawIncidence_+3A_weeks">weeks</code></td>
<td>

<p>Integer telling  how many weeks' observations are used to calculate the incidence. Usually 1 or 2.  
</p>
</td></tr>
<tr><td><code id="drawIncidence_+3A_log">log</code></td>
<td>

<p>logical indicating if a log scale is used in the plot
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drawIncidenceFin">drawIncidenceFin</a></code>, <code><a href="#topic+dataCovid">dataCovid</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovid)
Europe &lt;- c("Germany","France","United Kingdom","Italy","Spain","Poland","Romania",
    "Netherlands","Belgium","Greece")
drawIncidence(dataCovid,countries=Europe)
</code></pre>

<hr>
<h2 id='drawIncidenceFin'>
Plotting incidence curves of an epidemic with Finnish data
</h2><span id='topic+drawIncidenceFin'></span>

<h3>Description</h3>

<p>This function plots incidence curves of an epidemic for selected regions of Finland. The incidences are new cases per 100 000 inhabitants within one or two weeks. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawIncidenceFin(data, pop, regions, start = "2020-06-01", end = "last", weeks = 2, 
    includeAllRegions = TRUE, log = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawIncidenceFin_+3A_data">data</code></td>
<td>

<p>data frame including columns <code>Aika</code> (character string indicating the date), <code>Alue</code> (character string indicating the region) and  <code>val</code> (numeric indicating the number of new cases)
</p>
</td></tr>
<tr><td><code id="drawIncidenceFin_+3A_pop">pop</code></td>
<td>

<p>data frame including columns <code>Alue</code> (character string indicating the region) and <code>val</code> (integer indicating the population)
</p>
</td></tr>
<tr><td><code id="drawIncidenceFin_+3A_regions">regions</code></td>
<td>

<p>vector of characters srings indicating the regions for which the curves are plotted
</p>
</td></tr>
<tr><td><code id="drawIncidenceFin_+3A_start">start</code></td>
<td>

<p>beginning date of the time window for which the curve is plotted
</p>
</td></tr>
<tr><td><code id="drawIncidenceFin_+3A_end">end</code></td>
<td>

<p>ending date of the time window for which the curve is plotted
</p>
</td></tr>
<tr><td><code id="drawIncidenceFin_+3A_weeks">weeks</code></td>
<td>

<p>Integer telling  how many weeks' observations are used to calculate the incidence. Usually 1 or 2.
</p>
</td></tr>
<tr><td><code id="drawIncidenceFin_+3A_includeallregions">includeAllRegions</code></td>
<td>

<p>logical indicating if a curve for total incidence is included
</p>
</td></tr>
<tr><td><code id="drawIncidenceFin_+3A_log">log</code></td>
<td>

<p>logical indicating if a log scale is used in the plot
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drawIncidence">drawIncidence</a></code>, <code><a href="#topic+dataCovidFin">dataCovidFin</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovidFin)
data(popRegionsFin)
drawIncidenceFin(data = dataCovidFin, pop = popRegionsFin, 
    regions = popRegionsFin$Alue[1:5], start = "2020-06-01", end="last", weeks=2, 
    includeAllRegions = TRUE)
</code></pre>

<hr>
<h2 id='drawPositiveRate'>
Plotting the positive rate of COVID-19 tests or the tests per case
</h2><span id='topic+drawPositiveRate'></span>

<h3>Description</h3>

<p>This function plots a time series of either the positive rate of COVID-19 tests or the number of tests per case.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawPositiveRate(data, countries, start = "2020-06-01", end = "last", 
    measure = "positive_rate", curve = TRUE, bars = FALSE, log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawPositiveRate_+3A_data">data</code></td>
<td>

<p>data frame including columns <code>location</code> (character string indicating the country), <code>date</code> (character string) and  <code>tests_per_case, positive_rate</code> (numeric)
</p>
</td></tr>
<tr><td><code id="drawPositiveRate_+3A_countries">countries</code></td>
<td>

<p>vector of characters srings indicating the countries for which the selected statistic is plotted
</p>
</td></tr>
<tr><td><code id="drawPositiveRate_+3A_start">start</code></td>
<td>

<p>beginning date of the time window for which the time series are plotted
</p>
</td></tr>
<tr><td><code id="drawPositiveRate_+3A_end">end</code></td>
<td>

<p>ending date of the time window for which the time series are plotted
</p>
</td></tr>
<tr><td><code id="drawPositiveRate_+3A_measure">measure</code></td>
<td>

<p>statistic for which the time series are plotted
</p>
</td></tr>
<tr><td><code id="drawPositiveRate_+3A_curve">curve</code></td>
<td>

<p>logical indicating if smoothed curves are drawn
</p>
</td></tr>
<tr><td><code id="drawPositiveRate_+3A_bars">bars</code></td>
<td>

<p>logical indicating if bars are plotted
</p>
</td></tr>
<tr><td><code id="drawPositiveRate_+3A_log">log</code></td>
<td>

<p>logical indicating if a log scale is used in the plot
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataCovid">dataCovid</a>, <a href="#topic+drawTests">drawTests</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovid)
drawPositiveRate(dataCovid,countries=c("Finland","France"))
</code></pre>

<hr>
<h2 id='drawRuin'>Plotting simulations of a surplus process
</h2><span id='topic+drawRuin'></span>

<h3>Description</h3>

<p>This function plots simulation paths of a surpluss process. The claims are assumed to arrive according to a Poisson process and the claim sizes are assumed to be gamma distributed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawRuin(nsim = 10, Tup = 10, U0 = 1000, theta = 0.01, 
         lambda = 100, alpha = 1, beta = 0.1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawRuin_+3A_nsim">nsim</code></td>
<td>

<p>number of simulations
</p>
</td></tr>
<tr><td><code id="drawRuin_+3A_tup">Tup</code></td>
<td>

<p>maximum value in the time axis
</p>
</td></tr>
<tr><td><code id="drawRuin_+3A_u0">U0</code></td>
<td>

<p>initial capital
</p>
</td></tr>
<tr><td><code id="drawRuin_+3A_theta">theta</code></td>
<td>

<p>risk loading
</p>
</td></tr>
<tr><td><code id="drawRuin_+3A_lambda">lambda</code></td>
<td>

<p>intensity of claim process (mean number of claims per year)
</p>
</td></tr>
<tr><td><code id="drawRuin_+3A_alpha">alpha</code></td>
<td>

<p>shape parameter of gamma distribution
</p>
</td></tr>
<tr><td><code id="drawRuin_+3A_beta">beta</code></td>
<td>

<p>rate parameter of gamma distribution
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value; only a figure is plotted.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Kaas, Goovaerts, Dhaene, Denuit (2008) <em>Modern actuarial risk theory using R, 2nd ed.</em>, Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+computeRuinFinite">computeRuinFinite</a></code>,
</p>


<h3>Examples</h3>

<pre><code class='language-R'>computeRuinFinite(T0=10,U0=1000,eps=0.05,lambda=100,alpha=1,beta=0.1)
drawRuin(nsim=10,Tup=10,U0=1000,theta=0.0125,lambda=100,alpha=1,beta=0.1)
</code></pre>

<hr>
<h2 id='drawTests'>
Plotting time series related to COVID-19 testing
</h2><span id='topic+drawTests'></span>

<h3>Description</h3>

<p>This function plots time series of new and total COVID-19 tests, possibly in proportion to population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawTests(data, countries, start = "2020-06-01", end = "last", measure = "new_tests", 
    atop = TRUE, perThousand = FALSE, drawMean = TRUE, bars = TRUE, log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawTests_+3A_data">data</code></td>
<td>

<p>data frame similar to (or including the same columns as) <code>dataCovid</code>
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_countries">countries</code></td>
<td>

<p>vector of characters strings indicating the countries for which the time series are plotted
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_start">start</code></td>
<td>

<p>beginning date of the time window for which the time series are plotted
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_end">end</code></td>
<td>

<p>ending date of the time window for which the time series are plotted
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_measure">measure</code></td>
<td>

<p>statistic for which the time series are plotted
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_atop">atop</code></td>
<td>

<p>logical indicating if the bars of different countries are plotted on top of one another
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_perthousand">perThousand</code></td>
<td>

<p>logical indicating if the statistic is proportioned to a population of thousand
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_drawmean">drawMean</code></td>
<td>

<p>logical indicating if a smoothed curve is drawn 
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_bars">bars</code></td>
<td>

<p>logical indicating if bars are plotted
</p>
</td></tr>
<tr><td><code id="drawTests_+3A_log">log</code></td>
<td>

<p>logical indicating if a log scale is used in the plot
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataCovid">dataCovid</a>, <a href="#topic+drawPositiveRate">drawPositiveRate</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovid)
drawTests(dataCovid,countries=c("Finland","France"),perThousand=TRUE)
</code></pre>

<hr>
<h2 id='fin'>
Mortality data for Finland
</h2><span id='topic+fin'></span>

<h3>Description</h3>

<p>Mortality data for Finland
Series: female male total
Years: 1878 - 2015
Ages:  0 - 110 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("fin")</code></pre>


<h3>Format</h3>

<p>object of class demogdata
</p>


<h3>Details</h3>

<p>This is part of the  countries.mort data (countries.mort[[11]]).
</p>


<h3>Source</h3>

<p>HMD. Human Mortality Database. Max Planck Institute for Demographic Research (Germany), University of California, Berkeley (USA), and French Institute for Demographic Studies (France). Available at www.mortality.org. (Data downloaded Nov 13, 2023.)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fin)
print(fin)
plot(fin)
</code></pre>

<hr>
<h2 id='fin.fcast'>
Finnish mortality forecast
</h2><span id='topic+fin.fcast'></span>

<h3>Description</h3>

<p>Finnish mortality forecast 50 years ahead (2023-2072) for 0 - 100 years old. The forecast is 
based on an estimated Lee-Carter model. The kt coefficients were forecast using a random walk with drift. Fitted rates were used as the starting value. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("fin.fcast")</code></pre>


<h3>Format</h3>

<p>An object of class &quot;fmforecast&quot;; for details, see documentation of package &quot;demography&quot;.
</p>


<h3>Details</h3>

<p>The forecast was produced using function &quot;forecast.lca&quot; of package &quot;demography&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fin.fcast)
print(fin.fcast)
plot(fin.fcast)
</code></pre>

<hr>
<h2 id='fin.lca'>
Lee-Carter model fit for Finnish data
</h2><span id='topic+fin.lca'></span>

<h3>Description</h3>

<p>Lee-Carter model fit obtained by function &quot;lca&quot; of package &quot;demography&quot;. The fit
is based on Finnish mortality data for ages from 0 to 100 and years from 1950 to 2022. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("fin.lca")</code></pre>


<h3>Format</h3>

<p>object of class &quot;lca&quot;  
</p>


<h3>Details</h3>

<p>Both sexes were included in the input mortality data. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fin.lca)
plot(fin.lca) 
</code></pre>

<hr>
<h2 id='loglikCovid'>
Computing the log-likelihood of the covid model 
</h2><span id='topic+loglikCovid'></span>

<h3>Description</h3>

<p>This function computes -2 times the log-likelihood of the simple model that is used to predict new COVID-19 cases and to estimate the effective reproduction number. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loglikCovid(y, par, it = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loglikCovid_+3A_y">y</code></td>
<td>

<p>Univariate numeric time series of new COVID-19 cases
</p>
</td></tr>
<tr><td><code id="loglikCovid_+3A_par">par</code></td>
<td>

<p>Logarithms of the variance parameters of drift, seasonal component, and error term
</p>
</td></tr>
<tr><td><code id="loglikCovid_+3A_it">it</code></td>
<td>

<p>A logical value indicating if only the log-likelihood is returned. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Some multiplicative and additive constants are omitted when the negative log-likelihood is computed. Before computing the log-likelihood, the transformation <em>y=log(x+a)</em>, where <em>a=2</em>, is applied to the time series. The model is a simple local linear model with local level, drift and seasonal component. The variance parameters of the level and seasonal component are estimated while the variance of the level component is computed as  <em>max(exp(xi[1]) - a, 0.1)/exp(xi[1])^2</em>, where <em>xi[1]</em> is the current estimate of the level. This is based on the assumption that the number of new cases is approximately Poisson distributed, so that the variance equals the level. The <em>max</em> operation is taken in order to prevent the exression from being negative. In order to facilitate estimation, a penalty term is added which corresponds to a prior of  <em>N(-9,1)</em> for the logarithm of the drift variance.       
</p>


<h3>Value</h3>

<table>
<tr><td><code>loglik</code></td>
<td>
<p>-2 times the penalized log likelihood apart from some additive constants</p>
</td></tr>
<tr><td><code>ll</code></td>
<td>
<p>Vector of the increments of the log-likelihood corresponding to individual observations</p>
</td></tr> 
<tr><td><code>Xi</code></td>
<td>
<p>Matrix of one-step predictions of the state vector. The vectors at different time points are given as rows.</p>
</td></tr>
<tr><td><code>Xif</code></td>
<td>
<p>Matrix of filtered values, where the state vectors are given as rows</p>
</td></tr>
<tr><td><code>Pfmat</code></td>
<td>
<p>Array of state uncertainty matrices, evaluated at time <em>t</em>. The first  array index is for time.</p>
</td></tr>
<tr><td><code>Q</code></td>
<td>
<p>Covariance matrix of the error vector of the state equation</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Hamilton (1994) <em>Time Series Analysis</em>, Princeton University Press, (see Chapter 13 The Kalman Filter).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+covidSmooth">covidSmooth</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#See examples for covidSmooth.
</code></pre>

<hr>
<h2 id='params'>
Yield curve parameter data
</h2><span id='topic+params'></span>

<h3>Description</h3>

<p>Yield curve parameters from the European Central Bank (ECB), downloaded on Nov 4, 2023
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("params")</code></pre>


<h3>Format</h3>

<p>A data frame with 4902 observations on the following 13 variables.
</p>

<dl>
<dt><code>date</code></dt><dd><p>a Date</p>
</dd>
<dt><code>b0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>b1</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>b2</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>b3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>t1</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>t2</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>c0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>c1</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>c2</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>c3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>d1</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>d2</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Details</h3>

<p>The parameters b0 to b3 are the beta-parameters, and t1 and t2 the tau-parameters for AAA-rated government bonds. The parameters c0 to c3 are the beta-parameters, and d1 and d2 the tau-parameters for all government bonds.
</p>


<h3>Source</h3>

<p>https://bit.ly/2zfs0G8
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(params)
bondCurve(as.Date("2004-09-06"),params=params)
</code></pre>

<hr>
<h2 id='plotForecast'>
Forecasting new covid cases
</h2><span id='topic+plotForecast'></span>

<h3>Description</h3>

<p>This function forecasts the numbers of new covid cases using a simple linear state space model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotForecast(data, region, start = NULL, end = NULL, np = 30, predInt = 0.95, 
    log = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotForecast_+3A_data">data</code></td>
<td>

<p>data frame including columns <code>Aika</code> (character string indicating the date), <code>Alue</code> (character string indicating the region) and  <code>val</code> (numeric indicating the number of new cases)
</p>
</td></tr>
<tr><td><code id="plotForecast_+3A_region">region</code></td>
<td>

<p>characters string indicating the region for which the forecast is made
</p>
</td></tr>
<tr><td><code id="plotForecast_+3A_start">start</code></td>
<td>

<p>beginning date of the observations used in the estimation of the forecasting model
</p>
</td></tr>
<tr><td><code id="plotForecast_+3A_end">end</code></td>
<td>

<p>ending date of the observations used in the estimation of the forecasting model
</p>
</td></tr>
<tr><td><code id="plotForecast_+3A_np">np</code></td>
<td>

<p>integer indicating the forecasting horizon in days
</p>
</td></tr>
<tr><td><code id="plotForecast_+3A_predint">predInt</code></td>
<td>

<p>decimal indicating the probability of the forecasting interval
</p>
</td></tr>
<tr><td><code id="plotForecast_+3A_log">log</code></td>
<td>

<p>logical indicating if a log scale is used in the plot
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plotR">plotR</a></code>, <code><a href="#topic+dataCovidFin">dataCovidFin</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovidFin)
plotForecast(data=dataCovidFin, region='All regions', start="2020-09-01")
</code></pre>

<hr>
<h2 id='plotR'>
Plotting the effective reproduction number (R)
</h2><span id='topic+plotR'></span>

<h3>Description</h3>

<p>This function plots a time series of the effective reproduction number R and its confidence interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotR(data, region, start = NULL, end = NULL, confInt = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotR_+3A_data">data</code></td>
<td>

<p>data frame including columns <code>Aika</code> (character string indicating the date), <code>Alue</code> (character string indicating the region) and  <code>val</code> (numeric indicating the number of new cases)
</p>
</td></tr>
<tr><td><code id="plotR_+3A_region">region</code></td>
<td>

<p>characters string indicating the region for which the R series is computed
</p>
</td></tr>
<tr><td><code id="plotR_+3A_start">start</code></td>
<td>

<p>beginning date of the time window for which the R is computed
</p>
</td></tr>
<tr><td><code id="plotR_+3A_end">end</code></td>
<td>

<p>ending date of the time window for which the R is computed
</p>
</td></tr>
<tr><td><code id="plotR_+3A_confint">confInt</code></td>
<td>

<p>decimal between 0 and 1, indicating the level of the confidence interval of R
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plotForecast">plotForecast</a></code>, <code><a href="#topic+dataCovidFin">dataCovidFin</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dataCovidFin)
plotR(data=dataCovidFin, region='All regions')
</code></pre>

<hr>
<h2 id='pop.pred'>
Population forecasting
</h2><span id='topic+pop.pred'></span>

<h3>Description</h3>

<p>Population forecasting using mortality forecast and simple time series forecast for
age 0 population
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pop.pred(mort, mort.fcast)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pop.pred_+3A_mort">mort</code></td>
<td>

<p>mortality data of class 'demogdata'
</p>
</td></tr>
<tr><td><code id="pop.pred_+3A_mort.fcast">mort.fcast</code></td>
<td>

<p>mortality forecast of class 'fmforecast'
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ARIMA(0,2,2)-model is used to forecast age 0 populaton. 
</p>


<h3>Value</h3>

<p>population forecast of class 'demogdata'
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fin)
data(fin.fcast)
fin.pcast &lt;- pop.pred(fin,fin.fcast)
plot(fin,plot.type="functions",series="total",transform=FALSE,
     datatype="pop",ages=c(0:100), years=c(1990+0:5*10), xlab="Age")
lines(fin.pcast,plot.type="functions",series="total",transform=FALSE, 
      datatype="pop",ages=c(0:100), years=c(1990+0:5*10), lty=2)
</code></pre>

<hr>
<h2 id='popRegionsFin'>
Population data on Finnish hospital districts
</h2><span id='topic+popRegionsFin'></span>

<h3>Description</h3>

<p>This data set provides the populations of the 21 hospital districts, in addition to the total Finnish population. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("popRegionsFin")</code></pre>


<h3>Format</h3>

<p>A data frame with 22 observations on the following 2 variables.
</p>

<dl>
<dt><code>Alue</code></dt><dd><p>character vector: hospital district</p>
</dd>
<dt><code>val</code></dt><dd><p>numeric vector: population</p>
</dd>
</dl>



<h3>Details</h3>

<p>The data were downloaded on March 31, 2021, via THL's open data API.
</p>


<h3>Source</h3>

<p>https://bit.ly/39uZy7C
</p>


<h3>References</h3>

<p>https://bit.ly/3ryfwE4
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(popRegionsFin)
print(popRegionsFin)
</code></pre>

<hr>
<h2 id='portfOptim'>
Portfolio optimization for an index model
</h2><span id='topic+portfOptim'></span>

<h3>Description</h3>

<p>Finds an optimal portfolio for long-term investments and plots a return distribution. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>portfOptim(i, symbol, yield, vol, beta, 
  indexVol = 0.2, nStocks = 7, total = 1, balanceInt = 1, 
  C = 0.05, riskProportion = 1, riskfreeRate = 0, sim = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="portfOptim_+3A_i">i</code></td>
<td>

<p>vector of the indices of the included risky investments
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_symbol">symbol</code></td>
<td>

<p>character vector of the symbols of the risky investments
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_yield">yield</code></td>
<td>

<p>vector of expected yields (in euros)
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_vol">vol</code></td>
<td>

<p>vector of volatilities 
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_beta">beta</code></td>
<td>

<p>vector of betas
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_indexvol">indexVol</code></td>
<td>

<p>portfolio index volatility
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_nstocks">nStocks</code></td>
<td>

<p>number of stocks in the portfolio
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_total">total</code></td>
<td>

<p>total sum invested (in euros)
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_balanceint">balanceInt</code></td>
<td>

<p>balancing interval of the portfolio (in years)
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_c">C</code></td>
<td>

<p>expected portfolio return (in euros)
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_riskproportion">riskProportion</code></td>
<td>

<p>proportion of risky investments 
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_riskfreerate">riskfreeRate</code></td>
<td>

<p>risk-free interest rate
</p>
</td></tr>
<tr><td><code id="portfOptim_+3A_sim">sim</code></td>
<td>

<p>is the return distribution simulated and plotted (logical value)?
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The arguments vol, beta, indexVol, riskProportion and riskfreeRate are given in decimals. The portfolio is optimized by minimizing the variance of the portfolio yield for a given expected yield. The returns are assumed to be log-normally distributed. The covariance matrix is computed using the single index model and the properties of the log-normal distribution. 
</p>


<h3>Value</h3>

<table>
<tr><td><code>portfolio</code></td>
<td>
<p>numeric vector of allocations to each stock (in euros)</p>
</td></tr>
<tr><td><code>returnExpectation</code></td>
<td>
<p>expected value of the return distribution (in euros)</p>
</td></tr>
<tr><td><code>returnDeviation</code></td>
<td>
<p>standard deviation of the return distribution (in euros)</p>
</td></tr>
<tr><td><code>VaR</code></td>
<td>
<p>0.5%,1%,5%,10% and 50% percentiles of the return distribution (in euros)</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is usually called by drawFigure. 
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Bodie, Kane, and Marcus (2014) <em>Investments, 10th Global Edition</em>, McGraw-Hill Education, (see Section 7.4 The Markowitz Portfolio Optimization Model and Section 8.2 The Single-Index Model).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drawFigure">drawFigure</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(stockData, package="RcmdrPlugin.RiskDemo")
with(stockData,portfOptim(i=1:5,symbol=rownames(stockData),
  yield=divYield/100,vol=vol/100,beta=beta/100,total=100, sim=TRUE))
</code></pre>

<hr>
<h2 id='RcmdrPlugin.RiskDemo-internal'>Internal RiskDemo objects</h2><span id='topic+bondCalc'></span><span id='topic+bondDialog'></span><span id='topic+countries.abbr'></span><span id='topic+computeLifetable'></span><span id='topic+estimateDemogmodel'></span><span id='topic+forecastDemogdata'></span><span id='topic+forecastPopulation'></span><span id='topic+globals'></span><span id='topic+invertSpecial'></span><span id='topic+plotDemogdata'></span><span id='topic+pOpt'></span><span id='topic+pOptGen'></span><span id='topic+portfolioOpt'></span><span id='topic+portOpt'></span><span id='topic+returns.sim'></span><span id='topic+ruinDialog'></span><span id='topic+stockPrice'></span><span id='topic+viewDemogdata'></span><span id='topic+plot.lca'></span><span id='topic+updateCovidData'></span><span id='topic+incidenceDialog'></span><span id='topic+incidenceDialogFin'></span><span id='topic+casesDialog'></span><span id='topic+casesDialogFin'></span><span id='topic+testsDialog'></span><span id='topic+forecastDialogFin'></span><span id='topic+repel'></span>

<h3>Description</h3>

<p>Internal RiskDemo objects.</p>


<h3>Details</h3>

<p>These are not to be called by the user.</p>

<hr>
<h2 id='returns'>
Computing expected returns and their covariance matrix
</h2><span id='topic+returns'></span>

<h3>Description</h3>

<p>Computing expected returns and their covariance matrix when the returns are lognormal.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>returns(volvec, indexvol, beta)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="returns_+3A_volvec">volvec</code></td>
<td>

<p>vector of volatilities
</p>
</td></tr>
<tr><td><code id="returns_+3A_indexvol">indexvol</code></td>
<td>

<p>volatility of the portfolio index
</p>
</td></tr>
<tr><td><code id="returns_+3A_beta">beta</code></td>
<td>

<p>vector of betas
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The arguments are given in decimals. The single index model is used to compute the covariance matrix of a multivariate normal distribution. The mean vector is assumed to be zero. The properties of the log-normal distribution are then  used to compute the mean vector and covariance matrix of the corresponding multivariate log-normal distribution. 
</p>


<h3>Value</h3>

<table>
<tr><td><code>mean</code></td>
<td>
<p>vector of expected returns</p>
</td></tr>
<tr><td><code>cov</code></td>
<td>
<p>covariance matrix of returns</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Bodie, Kane, and Marcus (2014) <em>Investments, 10th Global Edition</em>, McGraw-Hill Education, (see  Section 8.2 The Single-Index Model).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>returns(volvec=c(0.1,0.2,0.3),indexvol=0.2, beta=c(0.5,-0.1,1.1)) 
</code></pre>

<hr>
<h2 id='solveLund'>
Solving Lund's exponent
</h2><span id='topic+solveLund'></span>

<h3>Description</h3>

<p>This function solves Lund's exponent or adjustment coefficient. The claim sizes are assumed to be gamma distributed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solveLund(alpha, beta, theta)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="solveLund_+3A_alpha">alpha</code></td>
<td>

<p>shape parameter of gamma distribution
</p>
</td></tr>
<tr><td><code id="solveLund_+3A_beta">beta</code></td>
<td>

<p>rate parameter of gamma distribution
</p>
</td></tr>
<tr><td><code id="solveLund_+3A_theta">theta</code></td>
<td>

<p>safety loading
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Lundberg's exponent (or adjustment coefficient)
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Gray and Pitts (2012) <em>Risk Modelling in General Insurance: From Principles to Practice</em>, Cambridge University Press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+computeRuin">computeRuin</a></code>,  <code><a href="#topic+computeRuinFinite">computeRuinFinite</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>solveLund(1,1,0.1)
</code></pre>

<hr>
<h2 id='solveYield'>
Computing bond yields
</h2><span id='topic+solveYield'></span>

<h3>Description</h3>

<p>This function computes the yield to maturity, given the (flat) bond price.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solveYield(buyDate, matDate, rateCoupon, bondPr, nPay)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="solveYield_+3A_buydate">buyDate</code></td>
<td>

<p>settlement date (the date when the bond is bought)
</p>
</td></tr>
<tr><td><code id="solveYield_+3A_matdate">matDate</code></td>
<td>

<p>maturity date
</p>
</td></tr>
<tr><td><code id="solveYield_+3A_ratecoupon">rateCoupon</code></td>
<td>

<p>annual coupon rate 
</p>
</td></tr>
<tr><td><code id="solveYield_+3A_bondpr">bondPr</code></td>
<td>

<p>bond price. The flat price without accrued interest.
</p>
</td></tr>
<tr><td><code id="solveYield_+3A_npay">nPay</code></td>
<td>

<p>number of payments per year
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>all the rates are given in decimals
</p>


<h3>Value</h3>

<p>A list with the following components:
</p>
<table>
<tr><td><code>yieldToMaturity</code></td>
<td>
<p>yield to maturity</p>
</td></tr>
<tr><td><code>flatPrice</code></td>
<td>
<p>flat price</p>
</td></tr>
<tr><td><code>daysSinceLastCoupon</code></td>
<td>
<p>days since previous coupon payment</p>
</td></tr>
<tr><td><code>daysInCouponPeriod</code></td>
<td>
<p>days in a coupon period</p>
</td></tr>
<tr><td><code>accruedInterest</code></td>
<td>
<p>accrued interest since last coupon payment</p>
</td></tr>
<tr><td><code>invoicePrice</code></td>
<td>
<p>invoice price (= flat price + accrued interest)</p>
</td></tr>
</table>


<h3>Note</h3>

<p>With Excel function YIELD you can do the same.
</p>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Bodie, Kane, and Marcus (2014) <em>Investments, 10th Global Edition</em>, McGraw-Hill Education, (see Bond Pricing between Coupon Dates in Section 14.2).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bondPrice">bondPrice</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>solveYield("2012-7-31","2018-7-31",0.0225,100,2)
</code></pre>

<hr>
<h2 id='stock.price'>
Computing stock prices
</h2><span id='topic+stock.price'></span>

<h3>Description</h3>

<p>This function computes the intrinsic stock price using the constant growth dividend discount model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stock.price(dividend, k = NULL, g = NULL, ROE = NULL, b = NULL, 
  riskFree = NULL, marketPremium = NULL, beta = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stock.price_+3A_dividend">dividend</code></td>
<td>

<p>expected dividend(s) for the next year(s) (in euros), separated by commas
</p>
</td></tr>
<tr><td><code id="stock.price_+3A_k">k</code></td>
<td>
<p>required rate of return
</p>
</td></tr>
<tr><td><code id="stock.price_+3A_g">g</code></td>
<td>

<p>growth rate of dividends
</p>
</td></tr>
<tr><td><code id="stock.price_+3A_roe">ROE</code></td>
<td>

<p>return on investment
</p>
</td></tr>
<tr><td><code id="stock.price_+3A_b">b</code></td>
<td>

<p>plowback ratio
</p>
</td></tr>
<tr><td><code id="stock.price_+3A_riskfree">riskFree</code></td>
<td>

<p>riskfree rate
</p>
</td></tr>
<tr><td><code id="stock.price_+3A_marketpremium">marketPremium</code></td>
<td>

<p>market risk premium
</p>
</td></tr>
<tr><td><code id="stock.price_+3A_beta">beta</code></td>
<td>

<p>beta
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All the above rates are given in percentages (except the dividends). One should provide either k or the following three: riskFree, marketPremium, beta. Further, one should provide either g or the following two: ROE and b. In the output, k and g are given in decimals.
</p>


<h3>Value</h3>

<table>
<tr><td><code>dividend</code></td>
<td>
<p>expected dividend(s) for the next year(s) (in euros)</p>
</td></tr>
<tr><td><code>k</code></td>
<td>
<p>required rate of return</p>
</td></tr>
<tr><td><code>g</code></td>
<td>
<p>growth rate of dividends</p>
</td></tr>
<tr><td><code>PVGO</code></td>
<td>
<p>present value of growths opportunities</p>
</td></tr>
<tr><td><code>stockPrice</code></td>
<td>
<p>intrinsic stock price</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Arto Luoma &lt;arto.luoma@wippies.com&gt;
</p>


<h3>References</h3>

<p>Bodie, Kane, and Marcus (2014) <em>Investments, 10th Global Edition</em>, McGraw-Hill Education, (see Dividend Discount Models in Section 18.3).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  stock.price(dividend=c(1),k=12,g=10)
  stock.price(dividend=c(1),ROE=50,b=20,riskFree=5,marketPremium=8,
              beta=90)
</code></pre>

<hr>
<h2 id='stockData'>
Stock data
</h2><span id='topic+stockData'></span>

<h3>Description</h3>

<p>Stock data on large companies in Helsinki Stock Exchange, downloaded from Kauppalehti web page (www.kauppalehti.fi), on May 13, 2017
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("stockData")</code></pre>


<h3>Format</h3>

<p>A data frame with 35 observations on the following 7 variables.
</p>

<dl>
<dt><code>names</code></dt><dd><p>name of the firm</p>
</dd> 
<dt><code>abbrs</code></dt><dd><p>abbreviation of the firm</p>
</dd>
<dt><code>quote</code></dt><dd><p>closing quote</p>
</dd>
<dt><code>vol</code></dt><dd><p>volatility (%)</p>
</dd>
<dt><code>beta</code></dt><dd><p>beta (%)</p>
</dd>
<dt><code>div</code></dt><dd><p>dividend (eur/stock)</p>
</dd>
<dt><code>divYield</code></dt><dd><p>dividend yield (%)</p>
</dd>
</dl>



<h3>Source</h3>

<p>www.kauppalehti.fi
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(stockData)
plot(stockData[,-(1:2)])
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
