<!DOCTYPE html><html lang="en"><head><title>Help for package rr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rr-package'><p>R Package for the Randomized Response Technique</p></a></li>
<li><a href='#nigeria'><p>Nigeria Randomized Response Survey Experiment on Social Connections to Armed Groups</p></a></li>
<li><a href='#nigeria-data'><p>Nigeria Randomized Response Survey Experiment on Social Connections to Armed</p>
Groups</a></li>
<li><a href='#power.rr.plot'><p>Power Analysis Plot for Randomized Response</p></a></li>
<li><a href='#power.rr.test'><p>Power Analysis for Randomized Response</p></a></li>
<li><a href='#predict.rrreg'><p>Predicted Probabilities for Randomized Response Regression</p></a></li>
<li><a href='#predict.rrreg.predictor'><p>Predicted Probabilities for Randomized Response as a Regression Predictor</p></a></li>
<li><a href='#rrreg'><p>Randomized Response Regression</p></a></li>
<li><a href='#rrreg.bayes'><p>Bayesian Randomized Response Regression</p></a></li>
<li><a href='#rrreg.predictor'><p>Randomized Response as a Regression Predictor</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.4.2</td>
</tr>
<tr>
<td>Title:</td>
<td>Statistical Methods for the Randomized Response Technique</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0), utils</td>
</tr>
<tr>
<td>Imports:</td>
<td>MASS, arm, coda, magic</td>
</tr>
<tr>
<td>Description:</td>
<td>Enables researchers to conduct multivariate statistical analyses
    of survey data with randomized response technique items from several designs,
    including mirrored question, forced question, and unrelated question. This
    includes regression with the randomized response as the outcome and logistic
    regression with the randomized response item as a predictor. In addition,
    tools for conducting power analysis for designing randomized response items
    are included. The package implements methods described in Blair, Imai, and Zhou
    (2015) &rdquo;Design and Analysis of the Randomized Response Technique,&rdquo; Journal
    of the American Statistical Association 
    <a href="https://graemeblair.com/papers/randresp.pdf">https://graemeblair.com/papers/randresp.pdf</a>.</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-16 06:17:35 UTC; gblair</td>
</tr>
<tr>
<td>Author:</td>
<td>Graeme Blair [aut, cre],
  Yang-Yang Zhou [aut],
  Kosuke Imai [aut],
  Winston Chou [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Graeme Blair &lt;graeme.blair@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-16 11:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='rr-package'>R Package for the Randomized Response Technique</h2><span id='topic+rr-package'></span><span id='topic+rr'></span>

<h3>Description</h3>

<p><code>rr</code> implements methods developed by Blair, Imai, and Zhou (2015) such
as multivariate regression and power analysis for the randomized response
technique. Randomized response is a survey technique that introduces random
noise to reduce potential bias from non-response and social desirability
when asking questions about sensitive behaviors and beliefs. The current
version of this package conducts multivariate regression analyses for the
sensitive item under four standard randomized response designs: mirrored
question, forced response, disguised response, and unrelated question.
Second, it generates predicted probabilities of answering affirmatively to
the sensitive item for each respondent. Third, it also allows users to use
the sensitive item as a predictor in an outcome regression under the forced
response design. Additionally, it implements power analyses to help improve
research design. In future versions, this package will extend to new
modified designs that are based on less stringent assumptions than those of
the standard designs, specifically to allow for non-compliance and unknown
distribution to the unrelated question under the unrelated question design.
</p>


<h3>Author(s)</h3>

<p>Graeme Blair, Experiments in Governance and Politics, Columbia
University <a href="mailto:graeme.blair@gmail.com">graeme.blair@gmail.com</a>, <a href="https://graemeblair.com">https://graemeblair.com</a>
</p>
<p>Kosuke Imai, Departments of Government and Statistics, Harvard University
<a href="mailto:kimai@harvard.edu">kimai@harvard.edu</a>, <a href="https://imai.fas.harvard.edu">https://imai.fas.harvard.edu</a>
</p>
<p>Yang-Yang Zhou, Department of Political Science, University of British Columbia
<a href="mailto:yangyang.zhou@ubc.ca">yangyang.zhou@ubc.ca</a>, <a href="https://www.yangyangzhou.com">https://www.yangyangzhou.com</a>
</p>
<p>Maintainer: Graeme Blair &lt;graeme.blair@gmail.com&gt;
</p>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2015) &quot;Design
and Analysis of the Randomized Response Technique.&quot;  
<em>Journal of the American Statistical Association.</em>
Available at <a href="https://graemeblair.com/papers/randresp.pdf">https://graemeblair.com/papers/randresp.pdf</a>.
</p>

<hr>
<h2 id='nigeria'>Nigeria Randomized Response Survey Experiment on Social Connections to Armed Groups</h2><span id='topic+nigeria'></span>

<h3>Description</h3>

 
<p>This data set is a subset of the data from the randomized response technique survey experiment
conducted in Nigeria to study civilian contact with armed groups. The survey was implemented   
by Blair (2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nigeria)</code></pre>


<h3>Format</h3>

<p>A data frame containing 2457 observations.
The variables are:
</p>

<ul>
<li> <p><code>Quesid</code>: Survey ID of civilian respondent.
</p>
</li>
<li> <p><code>rr.q1</code>: Randomized response survey item using the Forced Response Design asking the respondent whether they 
hold direct social connections with members of armed groups. 0 if no connection; 1 if connection.
</p>
</li>
<li> <p><code>cov.age</code>: Age of the respondent.
</p>
</li>
<li> <p><code>cov.asset.index</code>: The number of assets owned by the respondent from an index of nine assets including radio, 
T.V., motorbike, car, mobile phone, refrigerator, goat, chicken, and cow.
</p>
</li>
<li> <p><code>cov.married</code>: Marital status. 0 if single; 1 if married.
</p>
</li>
<li> <p><code>cov.education</code>: Education level of the respondent. 1 if no school; 2 if started primary school; 3 if finished   
primary school; 4 if started secondary school; 5 if finished secondary school; 6 if started polytechnic or college; 7 if 
finished polytechnic or college; 8 if started university; 9 if finished university; 10 if received graduate (masters or 
Ph.D) education.    
</p>
</li>
<li> <p><code>cov.female</code>: Gender. 0 if male; 1 if female.
</p>
</li>
<li> <p><code>civic</code>: Whether or not the respondent is a member of a civic group in their communities, such as youth groups
, women's groups, or community development committees. 
</p>
</li></ul>



<h3>Source</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) Replication data
for: Design and Analysis of the Randomized Response Technique.
</p>


<h3>References</h3>

<p>Blair, G. (2014). &quot;Why do civilians hold bargaining power in state revenue conflicts? Evidence from Nigeria.&quot;
</p>
<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design and Analysis of the Randomized Response Technique.&quot;   
<em>Working Paper.</em> Available at <a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>

<hr>
<h2 id='nigeria-data'>Nigeria Randomized Response Survey Experiment on Social Connections to Armed
Groups</h2><span id='topic+nigeria-data'></span>

<h3>Description</h3>

<p>This data set is a subset of the data from the randomized response technique
survey experiment conducted in Nigeria to study civilian contact with armed
groups. The survey was implemented by Blair (2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nigeria)
</code></pre>


<h3>Format</h3>

<p>A data frame containing 2457 observations.  The variables are:
</p>
 <ul>
<li> <p><code>Quesid</code>: Survey ID of civilian respondent.  </p>
</li>
<li>
<p><code>rr.q1</code>: Randomized response survey item using the Forced Response
Design asking the respondent whether they hold direct social connections
with members of armed groups. 0 if no connection; 1 if connection.  </p>
</li>
<li>
<p><code>cov.age</code>: Age of the respondent.  </p>
</li>
<li> <p><code>cov.asset.index</code>: The
number of assets owned by the respondent from an index of nine assets
including radio, T.V., motorbike, car, mobile phone, refrigerator, goat,
chicken, and cow.  </p>
</li>
<li> <p><code>cov.married</code>: Marital status. 0 if single; 1
if married.  </p>
</li>
<li> <p><code>cov.education</code>: Education level of the respondent.
1 if no school; 2 if started primary school; 3 if finished primary school; 4
if started secondary school; 5 if finished secondary school; 6 if started
polytechnic or college; 7 if finished polytechnic or college; 8 if started
university; 9 if finished university; 10 if received graduate (masters or
Ph.D) education.  </p>
</li>
<li> <p><code>cov.female</code>: Gender. 0 if male; 1 if female.
</p>
</li>
<li> <p><code>civic</code>: Whether or not the respondent is a member of a civic
group in their communities, such as youth groups , women's groups, or
community development committees.  </p>
</li></ul>



<h3>Source</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) Replication
data for: Design and Analysis of the Randomized Response Technique.
</p>


<h3>References</h3>

<p>Blair, G. (2014). &quot;Why do civilians hold bargaining power in
state revenue conflicts? Evidence from Nigeria.&quot;
</p>
<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design and Analysis
of the Randomized Response Technique.&quot;  <em>Working Paper.</em> Available at
<a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>

<hr>
<h2 id='power.rr.plot'>Power Analysis Plot for Randomized Response</h2><span id='topic+power.rr.plot'></span>

<h3>Description</h3>

<p><code>power.rr.plot</code> generates a power analysis plot for randomized response
survey designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>power.rr.plot(p, p0, p1, q, design, n.seq, r, presp.seq, presp.null =
NULL, sig.level, prespT.seq, prespC.seq, prespT.null = NULL, prespC.null,
type = c("one.sample", "two.sample"), alternative = c("one.sided",
"two.sided"), solve.tolerance = .Machine$double.eps, legend = TRUE, legend.x
= "bottomright", legend.y, par = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="power.rr.plot_+3A_p">p</code></td>
<td>
<p>The probability of receiving the sensitive question (Mirrored
Question Design, Unrelated Question Design); the probability of answering
truthfully (Forced Response Design); the probability of selecting a red card
from the 'yes' stack (Disguised Response Design).</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_p0">p0</code></td>
<td>
<p>The probability of forced 'no' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_p1">p1</code></td>
<td>
<p>The probability of forced 'yes' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_q">q</code></td>
<td>
<p>The probability of answering 'yes' to the unrelated question, which
is assumed to be independent of covariates (Unrelated Question Design).</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_design">design</code></td>
<td>
<p>Call of design (including modified designs) used:
&quot;forced-known&quot;, &quot;mirrored&quot;, &quot;disguised&quot;, &quot;unrelated-known&quot;,
&quot;forced-unknown&quot;, and &quot;unrelated-unknown&quot;.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_n.seq">n.seq</code></td>
<td>
<p>A sequence of number of observations or sample sizes.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_r">r</code></td>
<td>
<p>For the modified designs only (i.e. &quot;forced-unknown&quot; for Forced
Response with Unknown Probability and &quot;unrelated-unknown&quot; for Unrelated
Question with Unknown Probability), <code>r</code> is the proportion of
respondents allocated to the first group, which is the group that is
directed to answer the sensitive question truthfully with probability
<code>p</code> as opposed to the second group which is directed to answer the
sensitive question truthfully with probability <code>1-p</code>.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_presp.seq">presp.seq</code></td>
<td>
<p>For a one sample test, a sequence of probabilities of
possessing the sensitive trait under the alternative hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_presp.null">presp.null</code></td>
<td>
<p>For a one sample test, the probability of possessing the
sensitive trait under the null hypothesis. The default is <code>NULL</code>
meaning zero probability of possessing the sensitive trait.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_sig.level">sig.level</code></td>
<td>
<p>Significance level (Type I error probability).</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_prespt.seq">prespT.seq</code></td>
<td>
<p>For a two sample test, a sequence of probabilities of the
treated group possessing the sensitive trait under the alternative
hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_prespc.seq">prespC.seq</code></td>
<td>
<p>For a two sample test, a sequence of probabitilies of the
control group possessing the sensitive trait under the alternative
hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_prespt.null">prespT.null</code></td>
<td>
<p>For a two sample test, the probability of the treated
group possessing the sensitive trait under the null hypothesis. The default
is <code>NULL</code> meaning there is no difference between the treated and
control groups, specifically that <code>prespT.null</code> is the same as
<code>prespC.null</code>, the probability of the control group possessing the
sensitive trait under the null hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_prespc.null">prespC.null</code></td>
<td>
<p>For a two sample test, the probability of the control
group possessing the sensitive trait under the null hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_type">type</code></td>
<td>
<p>One or two sample test. For a two sample test, the alternative
and null hypotheses refer to the difference between the two samples of the
probabilities of possessing the sensitive trait.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_alternative">alternative</code></td>
<td>
<p>One or two sided test.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_solve.tolerance">solve.tolerance</code></td>
<td>
<p>When standard errors are calculated, this option
specifies the tolerance of the matrix inversion operation solve.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_legend">legend</code></td>
<td>
<p>Indicator of whether to include a legend of sample sizes. The
default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_legend.x">legend.x</code></td>
<td>
<p>Placement on the x-axis of the legend. The default is
<code>"bottomright"</code>.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_legend.y">legend.y</code></td>
<td>
<p>Placement on the y-axis of the legend.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_par">par</code></td>
<td>
<p>Option to set or query graphical parameters within the function.
The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="power.rr.plot_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code>par()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function generates a power analysis plot for randomized response survey
designs, both for the standard designs (&quot;forced-known&quot;, &quot;mirrored&quot;,
&quot;disguised&quot;, &quot;unrelated-known&quot;) and modified designs (&quot;forced-unknown&quot;, and
&quot;unrelated -unknown&quot;). The x-axis shows the population proportions with the
sensitive trait; the y-axis shows the statistical power; and different
sample sizes are shown as different lines in grayscale.
</p>


<h3>Value</h3>

<p>Power curve plot
</p>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design
and Analysis of the Randomized Response Technique.&quot;  <em>Working Paper.</em>
Available at <a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Generate a power plot for the forced design with known 
## probabilities of 2/3 in truth-telling group, 1/6 forced to say "yes" 
## and 1/6 forced to say "no", varying the number of respondents from 
## 250 to 2500 and the population proportion of respondents 
## possessing the sensitive trait from 0 to .15.

presp.seq &lt;- seq(from = 0, to = .15, by = .0025)
n.seq &lt;- c(250, 500, 1000, 2000, 2500)
power.rr.plot(p = 2/3, p1 = 1/6, p0 = 1/6, n.seq = n.seq, 
              presp.seq = presp.seq, presp.null = 0,
              design = "forced-known", sig.level = .01, 
              type = "one.sample",
              alternative = "one.sided", legend = TRUE)
				       
    
## Replicates the results for Figure 2 in Blair, Imai, and Zhou (2014)

</code></pre>

<hr>
<h2 id='power.rr.test'>Power Analysis for Randomized Response</h2><span id='topic+power.rr.test'></span>

<h3>Description</h3>

<p><code>power.rr.test</code> is used to conduct power analysis for randomized
response survey designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>power.rr.test(p, p0, p1, q, design, n = NULL, r, presp, presp.null =
NULL, sig.level, prespT, prespC, prespT.null = NULL, prespC.null, power =
NULL, type = c("one.sample", "two.sample"), alternative = c("one.sided",
"two.sided"), solve.tolerance = .Machine$double.eps)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="power.rr.test_+3A_p">p</code></td>
<td>
<p>The probability of receiving the sensitive question (Mirrored
Question Design, Unrelated Question Design); the probability of answering
truthfully (Forced Response Design); the probability of selecting a red card
from the 'yes' stack (Disguised Response Design).</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_p0">p0</code></td>
<td>
<p>The probability of forced 'no' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_p1">p1</code></td>
<td>
<p>The probability of forced 'yes' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_q">q</code></td>
<td>
<p>The probability of answering 'yes' to the unrelated question, which
is assumed to be independent of covariates (Unrelated Question Design).</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_design">design</code></td>
<td>
<p>Call of design (including modified designs) used:
&quot;forced-known&quot;, &quot;mirrored&quot;, &quot;disguised&quot;, &quot;unrelated-known&quot;,
&quot;forced-unknown&quot;, and &quot;unrelated-unknown&quot;.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_n">n</code></td>
<td>
<p>Number of observations. Exactly one of 'n' or 'power' must be NULL.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_r">r</code></td>
<td>
<p>For the modified designs only (i.e. &quot;forced-unknown&quot; for Forced
Response with Unknown Probability and &quot;unrelated-unknown&quot; for Unrelated
Question with Unknown Probability), <code>r</code> is the proportion of
respondents allocated to the first group, which is the group that is
directed to answer the sensitive question truthfully with probability
<code>p</code> as opposed to the second group which is directed to answer the
sensitive question truthfully with probability <code>1-p</code>.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_presp">presp</code></td>
<td>
<p>For a one sample test, the probability of possessing the
sensitive trait under the alternative hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_presp.null">presp.null</code></td>
<td>
<p>For a one sample test, the probability of possessing the
sensitive trait under the null hypothesis. The default is <code>NULL</code>
meaning zero probability of possessing the sensitive trait.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_sig.level">sig.level</code></td>
<td>
<p>Significance level (Type I error probability).</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_prespt">prespT</code></td>
<td>
<p>For a two sample test, the probability of the treated group
possessing the sensitive trait under the alternative hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_prespc">prespC</code></td>
<td>
<p>For a two sample test, the probability of the control group
possessing the sensitive trait under the alternative hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_prespt.null">prespT.null</code></td>
<td>
<p>For a two sample test, the probability of the treated
group possessing the sensitive trait under the null hypothesis. The default
is <code>NULL</code> meaning there is no difference between the treated and
control groups, specifically that <code>prespT.null</code> is the same as
<code>prespC.null</code>, the probability of the control group possessing the
sensitive trait under the null hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_prespc.null">prespC.null</code></td>
<td>
<p>For a two sample test, the probability of the control
group possessing the sensitive trait under the null hypothesis.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_power">power</code></td>
<td>
<p>Power of test (Type II error probability). Exactly one of 'n'
or 'power' must be NULL.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_type">type</code></td>
<td>
<p>One or two sample test. For a two sample test, the alternative
and null hypotheses refer to the difference between the two samples of the
probabilities of possessing the sensitive trait.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_alternative">alternative</code></td>
<td>
<p>One or two sided test.</p>
</td></tr>
<tr><td><code id="power.rr.test_+3A_solve.tolerance">solve.tolerance</code></td>
<td>
<p>When standard errors are calculated, this option
specifies the tolerance of the matrix inversion operation solve.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows users to conduct power analysis for randomized response
survey designs, both for the standard designs (&quot;forced-known&quot;, &quot;mirrored&quot;,
&quot;disguised&quot;, &quot;unrelated-known&quot;) and modified designs (&quot;forced-unknown&quot;, and
&quot;unrelated -unknown&quot;).
</p>


<h3>Value</h3>

<p><code>power.rr.test</code> contains the following components (the
inclusion of some components such as the design parameters are dependent
upon the design used):
</p>
<table role = "presentation">
<tr><td><code>n</code></td>
<td>
<p>Point estimates for the effects of covariates on the randomized
response item.</p>
</td></tr> <tr><td><code>r</code></td>
<td>
<p>Standard errors for estimates of the effects of
covariates on the randomized response item.</p>
</td></tr> <tr><td><code>presp</code></td>
<td>
<p>For a one sample
test, the probability of possessing the sensitive trait under the
alternative hypothesis.  For a two sample test, the difference between the
probabilities of possessing the sensitive trait for the treated and control
groups under the alternative hypothesis.</p>
</td></tr> <tr><td><code>presp.null</code></td>
<td>
<p>For a one sample
test, the probability of possessing the sensitive trait under the null
hypothesis. For a two sample test, the difference between the probabilities
of possessing the sensitive trait for the treated and control groups under
the null hypothesis.</p>
</td></tr> <tr><td><code>sig.level</code></td>
<td>
<p>Significance level (Type I error
probability).</p>
</td></tr> <tr><td><code>power</code></td>
<td>
<p>Power of test (Type II error probability).</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>One or two sample test.</p>
</td></tr> <tr><td><code>alternative</code></td>
<td>
<p>One or two sided
test.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2015) &quot;Design
and Analysis of the Randomized Response Technique.&quot;  <em>Journal of the 
American Statistical Association.</em>
Available at <a href="https://graemeblair.com/papers/randresp.pdf">https://graemeblair.com/papers/randresp.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Calculate the power to detect a sensitive item proportion of .2
## with the forced design with known probabilities of 2/3 in truth-telling group,
## 1/6 forced to say "yes" and 1/6 forced to say "no" and sample size of 200.

power.rr.test(p = 2/3, p1 = 1/6, p0 = 1/6, n = 200, 
             presp = .2, presp.null = 0,
             design = "forced-known", sig.level = .01,
             type = "one.sample", alternative = "one.sided")
				       
</code></pre>

<hr>
<h2 id='predict.rrreg'>Predicted Probabilities for Randomized Response Regression</h2><span id='topic+predict.rrreg'></span>

<h3>Description</h3>

<p><code>predict.rrreg</code> is used to generate predicted probabilities from a
multivariate regression object of survey data using randomized response
methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rrreg'
predict(object, given.y = FALSE, alpha = .05, n.sims =
1000, avg = FALSE, newdata = NULL, quasi.bayes = FALSE, keep.draws = FALSE,
...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.rrreg_+3A_object">object</code></td>
<td>
<p>An object of class &quot;rrreg&quot; generated by the <code>rrreg()</code>
function.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_given.y">given.y</code></td>
<td>
<p>Indicator of whether to use &quot;y&quot; the response vector to
calculate the posterior prediction of latent responses. Default is
<code>FALSE</code>, which simply generates fitted values using the logistic
regression.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_alpha">alpha</code></td>
<td>
<p>Confidence level for the hypothesis test to generate upper and
lower confidence intervals. Default is <code> .05</code>.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_n.sims">n.sims</code></td>
<td>
<p>Number of sampled draws for quasi-bayesian predicted
probability estimation. Default is <code>1000</code>.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_avg">avg</code></td>
<td>
<p>Whether to output the mean of the predicted probabilities and
uncertainty estimates. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_newdata">newdata</code></td>
<td>
<p>Optional new data frame of covariates provided by the user.
Otherwise, the original data frame from the &quot;rreg&quot; object is used.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_quasi.bayes">quasi.bayes</code></td>
<td>
<p>Option to use Monte Carlo simulations to generate
uncertainty estimates for predicted probabilities. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_keep.draws">keep.draws</code></td>
<td>
<p>Option to return the Monte Carlos draws of the quantity of
interest, for use in calculating differences for example.</p>
</td></tr>
<tr><td><code id="predict.rrreg_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to <code>predict.rrreg()</code> command.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows users to generate predicted probabilities for the
randomized response item given an object of class &quot;rrreg&quot; from the
<code>rrreg()</code> function. Four standard designs are accepted by this
function: mirrored question, forced response, disguised response, and
unrelated question. The design, already specified in the &quot;rrreg&quot; object, is
then directly inputted into this function.
</p>


<h3>Value</h3>

<p><code>predict.rrreg</code> returns predicted probabilities either for each
observation in the data frame or the average over all observations. The
output is a list that contains the following components:
</p>
<table role = "presentation">
<tr><td><code>est</code></td>
<td>
<p>Predicted probabilities for the randomized response item
generated either using fitted values, posterior predictions, or
quasi-Bayesian simulations. If <code>avg</code> is set to <code>TRUE</code>, the output
will only include the mean estimate.</p>
</td></tr> <tr><td><code>se</code></td>
<td>
<p>Standard errors for the
predicted probabilities of the randomized response item generated using
Monte Carlo simulations. If <code>quasi.bayes</code> is set to <code>FALSE</code>, no
standard errors will be outputted.</p>
</td></tr> <tr><td><code>ci.lower</code></td>
<td>
<p>Estimates for the lower
confidence interval. If <code>quasi.bayes</code> is set to <code>FALSE</code>, no
confidence interval estimate will be outputted.</p>
</td></tr> <tr><td><code>ci.upper</code></td>
<td>
<p>Estimates
for the upper confidence interval. If <code>quasi.bayes</code> is set to
<code>FALSE</code>, no confidence interval estimate will be outputted.</p>
</td></tr>
<tr><td><code>qoi.draws</code></td>
<td>
<p>Monte Carlos draws of the quantity of interest, returned
only if <code>keep.draws</code> is set to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design
and Analysis of the Randomized Response Technique.&quot;  <em>Working Paper.</em>
Available at <a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rrreg">rrreg</a></code> to conduct multivariate regression analyses in
order to generate predicted probabilities for the randomized response item.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(nigeria)

set.seed(1)

## Define design parameters
p &lt;- 2/3  # probability of answering honestly in Forced Response Design
p1 &lt;- 1/6 # probability of forced 'yes'
p0 &lt;- 1/6 # probability of forced 'no'

## Fit linear regression on the randomized response item of 
## whether citizen respondents had direct social contacts to armed groups

rr.q1.reg.obj &lt;- rrreg(rr.q1 ~ cov.asset.index + cov.married + I(cov.age/10) + 
                      I((cov.age/10)^2) + cov.education + cov.female,   
                      data = nigeria, p = p, p1 = p1, p0 = p0, 
                      design = "forced-known")

## Generate the mean predicted probability of having social contacts to 
## armed groups across respondents using quasi-Bayesian simulations. 

rr.q1.reg.pred &lt;- predict(rr.q1.reg.obj, given.y = FALSE, 
                                avg = TRUE, quasi.bayes = TRUE, 
                                n.sims = 10000)

## Replicates Table 3 in Blair, Imai, and Zhou (2014)

</code></pre>

<hr>
<h2 id='predict.rrreg.predictor'>Predicted Probabilities for Randomized Response as a Regression Predictor</h2><span id='topic+predict.rrreg.predictor'></span>

<h3>Description</h3>

<p><code>predict.rrreg.predictor</code> is used to generate predicted probabilities
from a multivariate regression object of survey data using the randomized
response item as a predictor for an additional outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'rrreg.predictor'
predict(object, fix.z = NULL, alpha = .05,
n.sims = 1000, avg = FALSE, newdata = NULL, quasi.bayes = FALSE, keep.draws
= FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.rrreg.predictor_+3A_object">object</code></td>
<td>
<p>An object of class &quot;rrreg.predictor&quot; generated by the
<code>rrreg.predictor()</code> function.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_fix.z">fix.z</code></td>
<td>
<p>An optional value or vector of values between 0 and 1 that the
user inputs as the proportion of respondents with the sensitive trait or
probability that each respondent has the sensitive trait, respectively. If
the user inputs a vector of values, the vector must be the length of the
data from the &quot;rrreg.predictor&quot; object. Default is <code>NULL</code> in which case
predicted probabilities are generated for the randomized response item.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_alpha">alpha</code></td>
<td>
<p>Confidence level for the hypothesis test to generate upper and
lower confidence intervals. Default is <code>.05</code>.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_n.sims">n.sims</code></td>
<td>
<p>Number of sampled draws for quasi-bayesian predicted
probability estimation. Default is <code>1000</code>.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_avg">avg</code></td>
<td>
<p>Whether to output the mean of the predicted probabilities and
uncertainty estimates. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_newdata">newdata</code></td>
<td>
<p>Optional new data frame of covariates provided by the user.
Otherwise, the original data frame from the &quot;rreg&quot; object is used.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_quasi.bayes">quasi.bayes</code></td>
<td>
<p>Option to use Monte Carlo simulations to generate
uncertainty estimates for predicted probabilities. Default is <code>FALSE</code>
meaning no uncertainty estimates are outputted.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_keep.draws">keep.draws</code></td>
<td>
<p>Option to return the Monte Carlos draws of the quantity of
interest, for use in calculating differences for example.</p>
</td></tr>
<tr><td><code id="predict.rrreg.predictor_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to
<code>predict.rrreg.predictor()</code> command.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows users to generate predicted probabilities for the
additional outcome variables with the randomized response item as a
covariate given an object of class &quot;rrreg.predictor&quot; from the
<code>rrreg.predictor()</code> function. Four standard designs are accepted by
this function: mirrored question, forced response, disguised response, and
unrelated question. The design, already specified in the &quot;rrreg.predictor&quot;
object, is then directly inputted into this function.
</p>


<h3>Value</h3>

<p><code>predict.rrreg.predictor</code> returns predicted probabilities
either for each observation in the data frame or the average over all
observations. The output is a list that contains the following components:
</p>
<table role = "presentation">
<tr><td><code>est</code></td>
<td>
<p>Predicted probabilities of the additional outcome variable given
the randomized response item as a predictor generated either using fitted
values or quasi-Bayesian simulations. If <code>avg</code> is set to <code>TRUE</code>,
the output will only include the mean estimate.</p>
</td></tr> <tr><td><code>se</code></td>
<td>
<p>Standard errors
for the predicted probabilities of the additional outcome variable given the
randomized response item as a predictor generated using Monte Carlo
simulations. If <code>quasi.bayes</code> is set to <code>FALSE</code>, no standard
errors will be outputted.</p>
</td></tr> <tr><td><code>ci.lower</code></td>
<td>
<p>Estimates for the lower
confidence interval. If <code>quasi.bayes</code> is set to <code>FALSE</code>, no
confidence interval estimate will be outputted.</p>
</td></tr> <tr><td><code>ci.upper</code></td>
<td>
<p>Estimates
for the upper confidence interval. If <code>quasi.bayes</code> is set to
<code>FALSE</code>, no confidence interval estimate will be outputted.</p>
</td></tr>
<tr><td><code>qoi.draws</code></td>
<td>
<p>Monte Carlos draws of the quantity of interest, returned
only if <code>keep.draws</code> is set to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design
and Analysis of the Randomized Response Technique.&quot;  <em>Working Paper.</em>
Available at <a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rrreg.predictor">rrreg.predictor</a></code> to conduct multivariate regression
analyses with the randomized response as predictor in order to generate
predicted probabilities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(nigeria)

## Define design parameters


set.seed(44)

p &lt;- 2/3  # probability of answering honestly in Forced Response Design
p1 &lt;- 1/6 # probability of forced 'yes'
p0 &lt;- 1/6 # probability of forced 'no'

## Fit joint model of responses to an outcome regression of joining a civic 
## group and the randomized response item of having a militant social connection

rr.q1.pred.obj &lt;- 
    rrreg.predictor(civic ~ cov.asset.index + cov.married + I(cov.age/10) + 
              I((cov.age/10)^2) + cov.education + cov.female 
              + rr.q1, rr.item = "rr.q1", parstart = FALSE, estconv = TRUE,
              data = nigeria, verbose = FALSE, optim = TRUE,
              p = p, p1 = p1, p0 = p0, design = "forced-known")

## Generate predicted probabilities for the likelihood of joining 
## a civic group across respondents using quasi-Bayesian simulations. 

rr.q1.rrreg.predictor.pred &lt;- predict(rr.q1.pred.obj, 
                                 avg = TRUE, quasi.bayes = TRUE, 
                                 n.sims = 1000)

</code></pre>

<hr>
<h2 id='rrreg'>Randomized Response Regression</h2><span id='topic+rrreg'></span>

<h3>Description</h3>

<p><code>rrreg</code> is used to conduct multivariate regression analyses of survey
data using randomized response methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rrreg(formula, p, p0, p1, q, design, data, start = NULL, 
h = NULL, group = NULL, matrixMethod = "efficient",
maxIter = 10000, verbose = FALSE, optim = FALSE, em.converge = 10^(-8), 
glmMaxIter = 10000, solve.tolerance = .Machine$double.eps)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rrreg_+3A_formula">formula</code></td>
<td>
<p>An object of class &quot;formula&quot;: a symbolic description of the
model to be fitted.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_p">p</code></td>
<td>
<p>The probability of receiving the sensitive question (Mirrored
Question Design, Unrelated Question Design); the probability of answering
truthfully (Forced Response Design); the probability of selecting a red card
from the 'yes' stack (Disguised Response Design). For &quot;mirrored&quot; and
&quot;disguised&quot; designs, p cannot equal .5.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_p0">p0</code></td>
<td>
<p>The probability of forced 'no' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="rrreg_+3A_p1">p1</code></td>
<td>
<p>The probability of forced 'yes' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="rrreg_+3A_q">q</code></td>
<td>
<p>The probability of answering 'yes' to the unrelated question, which
is assumed to be independent of covariates (Unrelated Question Design).</p>
</td></tr>
<tr><td><code id="rrreg_+3A_design">design</code></td>
<td>
<p>One of the four standard designs: &quot;forced-known&quot;, &quot;mirrored&quot;,
&quot;disguised&quot;, or &quot;unrelated-known&quot;.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_start">start</code></td>
<td>
<p>Optional starting values of coefficient estimates for the
Expectation-Maximization (EM) algorithm.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_h">h</code></td>
<td>
<p>Auxiliary data functionality. Optional named numeric vector with 
length equal to number of groups. Names correspond to group labels and 
values correspond to auxiliary moments.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_group">group</code></td>
<td>
<p>Auxiliary data functionality. Optional character vector of 
group labels with length equal to number of observations.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_matrixmethod">matrixMethod</code></td>
<td>
<p>Auxiliary data functionality. Procedure for estimating 
optimal weighting matrix for generalized method of moments. One of 
&quot;efficient&quot; for two-step feasible and &quot;cue&quot; for continuously updating. 
Default is &quot;efficient&quot;. Only relevant if <code>h</code> and <code>group</code> are 
specified.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_maxiter">maxIter</code></td>
<td>
<p>Maximum number of iterations for the Expectation-Maximization
algorithm. The default is <code>10000</code>.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_verbose">verbose</code></td>
<td>
<p>A logical value indicating whether model diagnostics counting
the number of EM iterations are printed out.  The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_optim">optim</code></td>
<td>
<p>A logical value indicating whether to use the quasi-Newton
&quot;BFGS&quot; method to calculate the variance-covariance matrix and standard
errors. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_em.converge">em.converge</code></td>
<td>
<p>A value specifying the satisfactory degree of convergence
under the EM algorithm. The default is <code>10^(-8)</code>.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_glmmaxiter">glmMaxIter</code></td>
<td>
<p>A value specifying the maximum number of iterations to run
the EM algorithm. The default is <code>10000</code>.</p>
</td></tr>
<tr><td><code id="rrreg_+3A_solve.tolerance">solve.tolerance</code></td>
<td>
<p>When standard errors are calculated, this option
specifies the tolerance of the matrix inversion operation solve.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows users to perform multivariate regression analysis on
data from the randomized response technique.  Four standard designs are
accepted by this function: mirrored question, forced response, disguised
response, and unrelated question. The method implemented by this function is
the Maximum Likelihood (ML) estimation for the Expectation-Maximization (EM)
algorithm.
</p>


<h3>Value</h3>

<p><code>rrreg</code> returns an object of class &quot;rrreg&quot;.  The function
<code>summary</code> is used to obtain a table of the results.  The object
<code>rrreg</code> is a list that contains the following components (the inclusion
of some components such as the design parameters are dependent upon the
design used):
</p>
<table role = "presentation">
<tr><td><code>est</code></td>
<td>
<p>Point estimates for the effects of covariates on the randomized
response item.</p>
</td></tr> <tr><td><code>vcov</code></td>
<td>
<p>Variance-covariance matrix for the effects of
covariates on the randomized response item.</p>
</td></tr> <tr><td><code>se</code></td>
<td>
<p>Standard errors for
estimates of the effects of covariates on the randomized response item.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>The <code>data</code> argument.</p>
</td></tr> <tr><td><code>coef.names</code></td>
<td>
<p>Variable names as
defined in the data frame.</p>
</td></tr> <tr><td><code>x</code></td>
<td>
<p>The model matrix of covariates.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>The randomized response vector.</p>
</td></tr> <tr><td><code>design</code></td>
<td>
<p>Call of standard
design used: &quot;forced-known&quot;, &quot;mirrored&quot;, &quot;disguised&quot;, or &quot;unrelated-known&quot;.</p>
</td></tr>
<tr><td><code>p</code></td>
<td>
<p>The <code>p</code> argument.</p>
</td></tr> <tr><td><code>p0</code></td>
<td>
<p>The <code>p0</code> argument.</p>
</td></tr>
<tr><td><code>p1</code></td>
<td>
<p>The <code>p1</code> argument.</p>
</td></tr> <tr><td><code>q</code></td>
<td>
<p>The <code>q</code> argument.</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>The matched call.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design
and Analysis of the Randomized Response Technique.&quot; Working Paper. Available
at <a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+predict.rrreg">predict.rrreg</a></code> for predicted probabilities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(nigeria)

set.seed(1)

## Define design parameters
p &lt;- 2/3  # probability of answering honestly in Forced Response Design
p1 &lt;- 1/6 # probability of forced 'yes'
p0 &lt;- 1/6 # probability of forced 'no'

## Fit linear regression on the randomized response item of whether 
## citizen respondents had direct social contacts to armed groups

rr.q1.reg.obj &lt;- rrreg(rr.q1 ~ cov.asset.index + cov.married + 
                    I(cov.age/10) + I((cov.age/10)^2) + cov.education + cov.female,   
                    data = nigeria, p = p, p1 = p1, p0 = p0, 
                    design = "forced-known")
  
summary(rr.q1.reg.obj)

## Replicates Table 3 in Blair, Imai, and Zhou (2014)

</code></pre>

<hr>
<h2 id='rrreg.bayes'>Bayesian Randomized Response Regression</h2><span id='topic+rrreg.bayes'></span>

<h3>Description</h3>

<p>Function to conduct multivariate regression analyses of survey data with the
randomized response technique using Bayesian MCMC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rrreg.bayes(formula, p, p0, p1, design, data, group.mixed,
formula.mixed = ~1, verbose = FALSE, n.draws = 10000, burnin = 5000, thin =
1, beta.start, beta.mu0, beta.A0, beta.tune, Psi.start, Psi.df, Psi.scale,
Psi.tune)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rrreg.bayes_+3A_formula">formula</code></td>
<td>
<p>An object of class &quot;formula&quot;: a symbolic description of the
model to be fitted.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_p">p</code></td>
<td>
<p>The probability of receiving the sensitive question (Mirrored
Question Design, Unrelated Question Design); the probability of answering
truthfully (Forced Response Design); the probability of selecting a red card
from the 'yes' stack (Disguised Response Design).</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_p0">p0</code></td>
<td>
<p>The probability of forced 'no' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_p1">p1</code></td>
<td>
<p>The probability of forced 'yes' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_design">design</code></td>
<td>
<p>Character indicating the design. Currently only &quot;forced-known&quot;
is supported.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_group.mixed">group.mixed</code></td>
<td>
<p>A string indicating the variable name of a numerical
group indicator specifying which group each individual belongs to for a
mixed effects model.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_formula.mixed">formula.mixed</code></td>
<td>
<p>To specify a mixed effects model, include this formula
object for the group-level fit. ~1 allows intercepts to vary, and including
covariates in the formula allows the slopes to vary also.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_verbose">verbose</code></td>
<td>
<p>A logical value indicating whether model diagnostics are
printed out during fitting.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_n.draws">n.draws</code></td>
<td>
<p>Number of MCMC iterations.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_burnin">burnin</code></td>
<td>
<p>The number of initial MCMC iterations that are discarded.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_thin">thin</code></td>
<td>
<p>The interval of thinning between consecutive retained iterations
(1 for no thinning).</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_beta.start">beta.start</code></td>
<td>
<p>Optional starting values for the sensitive item fit. This
should be a vector of length the number of covariates.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_beta.mu0">beta.mu0</code></td>
<td>
<p>Optional vector of prior means for the sensitive item fit
parameters, a vector of length the number of covariates.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_beta.a0">beta.A0</code></td>
<td>
<p>Optional matrix of prior precisions for the sensitive item
fit parameters, a matrix of dimension the number of covariates.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_beta.tune">beta.tune</code></td>
<td>
<p>A required vector of tuning parameters for the Metropolis
algorithm for the sensitive item fit. This must be set and refined by the
user until the acceptance ratios are approximately .4 (reported in the
output).</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_psi.start">Psi.start</code></td>
<td>
<p>Optional starting values for the variance of the random
effects in the mixed effects models. This should be a scalar.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_psi.df">Psi.df</code></td>
<td>
<p>Optional prior degrees of freedom parameter for the variance
of the random effects in the mixed effects models.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_psi.scale">Psi.scale</code></td>
<td>
<p>Optional prior scale parameter for the variance of the
random effects in the mixed effects models.</p>
</td></tr>
<tr><td><code id="rrreg.bayes_+3A_psi.tune">Psi.tune</code></td>
<td>
<p>A required vector of tuning parameters for the Metropolis
algorithm for variance of the random effects in the mixed effects models.
This must be set and refined by the user until the acceptance ratios are
approximately .4 (reported in the output).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows the user to perform regression analysis on data from
the randomized response technique using a Bayesian MCMC algorithm.
</p>
<p>The Metropolis algorithm for the Bayesian MCMC estimators in this function
must be tuned to work correctly. The <code>beta.tune</code> and, for the mixed
effects model <code>Psi.tune</code>, are required, and the values, one for each
estimated parameter, will need to be manipulated. The output of the
<code>rrreg.bayes</code> function displays the acceptance ratios from the
Metropolis algorithm. If these values are far from 0.4, the tuning
parameters should be changed until the ratios approach 0.4.
</p>
<p>Convergence is at times difficult to achieve, so we recommend running
multiple chains from overdispersed starting values by, for example, running
an MLE using the rrreg() function, and then generating a set of
overdispersed starting values using those estimates and their estimated
variance-covariance matrix. An example is provided below for each of the
possible designs. Running <code>summary()</code> after such a procedure will
output the Gelman-Rubin convergence statistics in addition to the estimates.
If the G-R statistics are all below 1.1, the model is said to have
converged.
</p>


<h3>Value</h3>

<p><code>rrreg.bayes</code> returns an object of class &quot;rrreg.bayes&quot;.  The
function <code>summary</code> is used to obtain a table of the results.
</p>
<table role = "presentation">
<tr><td><code>beta</code></td>
<td>
<p>The coefficients for the sensitive item fit. An object of class
&quot;mcmc&quot; that can be analyzed using the <code>coda</code> package.</p>
</td></tr> <tr><td><code>data</code></td>
<td>
<p>The
<code>data</code> argument.</p>
</td></tr> <tr><td><code>coef.names</code></td>
<td>
<p>Variable names as defined in the
data frame.</p>
</td></tr> <tr><td><code>x</code></td>
<td>
<p>The model matrix of covariates.</p>
</td></tr> <tr><td><code>y</code></td>
<td>
<p>The
randomized response vector.</p>
</td></tr> <tr><td><code>design</code></td>
<td>
<p>Call of standard design used:
&quot;forced-known&quot;, &quot;mirrored&quot;, &quot;disguised&quot;, or &quot;unrelated-known&quot;.</p>
</td></tr> <tr><td><code>p</code></td>
<td>
<p>The
<code>p</code> argument.</p>
</td></tr> <tr><td><code>p0</code></td>
<td>
<p>The <code>p0</code> argument.</p>
</td></tr> <tr><td><code>p1</code></td>
<td>
<p>The
<code>p1</code> argument.</p>
</td></tr> <tr><td><code>beta.tune</code></td>
<td>
<p>The <code>beta.tune</code> argument.</p>
</td></tr> 
<tr><td><code>mixed</code></td>
<td>
<p>Indicator for whether a mixed effects
model was run.</p>
</td></tr> <tr><td><code>call</code></td>
<td>
<p>the matched call.</p>
</td></tr>
</table>
<p>If a mixed-effects model is used, then several additional objects are
included: </p>
<table role = "presentation">
<tr><td><code>Psi</code></td>
<td>
<p>The coefficients for the group-level fit. An object of
class &quot;mcmc&quot; that can be analyzed using the <code>coda</code> package.</p>
</td></tr>
<tr><td><code>gamma</code></td>
<td>
<p>The random effects estimates. An object of class &quot;mcmc&quot; that
can be analyzed using the <code>coda</code> package.</p>
</td></tr>
<tr><td><code>coef.names.mixed</code></td>
<td>
<p>Variable names for the predictors for the
second-level model</p>
</td></tr> <tr><td><code>z</code></td>
<td>
<p>The predictors for the second-level model.</p>
</td></tr>
<tr><td><code>groups</code></td>
<td>
<p>A vector of group indicators.</p>
</td></tr> <tr><td><code>Psi.tune</code></td>
<td>
<p>The <code>Psi.tune</code> argument.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design
and Analysis of the Randomized Response Technique.&quot;  <em>Working Paper.</em>
Available at <a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
data(nigeria)
 
## Define design parameters
p &lt;- 2/3  # probability of answering honestly in Forced Response Design
p1 &lt;- 1/6 # probability of forced 'yes'
p0 &lt;- 1/6 # probability of forced 'no'

## run three chains with overdispersed starting values

set.seed(1)

## starting values constructed from MLE model
mle.estimates &lt;- rrreg(rr.q1 ~ cov.asset.index + cov.married + 
                         I(cov.age/10) + I((cov.age/10)^2) + cov.education + cov.female, 
                         data = nigeria, 
                      p = p, p1 = p1, p0 = p0,
                      design = "forced-known")
                      


library(MASS)
draws &lt;- mvrnorm(n = 3, mu = coef(mle.estimates), 
  Sigma = vcov(mle.estimates) * 9)

## run three chains
bayes.1 &lt;- rrreg.bayes(rr.q1 ~ cov.asset.index + cov.married + 
                         I(cov.age/10) + I((cov.age/10)^2) + cov.education + cov.female,   
                      data = nigeria, p = p, p1 = p1, p0 = p0,
                      beta.tune = .0001, beta.start = draws[1,],
                      design = "forced-known")
bayes.2 &lt;- rrreg.bayes(rr.q1 ~ cov.asset.index + cov.married + 
                         I(cov.age/10) + I((cov.age/10)^2) + cov.education + cov.female,   
                      data = nigeria, p = p, p1 = p1, p0 = p0,
                      beta.tune = .0001, beta.start = draws[2,],
                      design = "forced-known")

bayes.3 &lt;- rrreg.bayes(rr.q1 ~ cov.asset.index + cov.married + 
                         I(cov.age/10) + I((cov.age/10)^2) + cov.education + cov.female,   
                      data = nigeria, p = p, p1 = p1, p0 = p0,
                      beta.tune = .0001, beta.start = draws[3,],
                      design = "forced-known")
                      
bayes &lt;- as.list(bayes.1, bayes.2, bayes.3)

summary(bayes)



</code></pre>

<hr>
<h2 id='rrreg.predictor'>Randomized Response as a Regression Predictor</h2><span id='topic+rrreg.predictor'></span>

<h3>Description</h3>

<p><code>rrreg.predictor</code> is used to jointly model the randomized response item
as both outcome and predictor for an additional outcome given a set of
covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rrreg.predictor(formula, p, p0, p1, q, design, data, rr.item,
model.outcome = "logistic", fit.sens = "bayesglm", fit.outcome = "bayesglm",
bstart = NULL, tstart = NULL, parstart = TRUE, maxIter = 10000, verbose =
FALSE, optim = FALSE, em.converge = 10^(-4), glmMaxIter = 20000, estconv =
TRUE, solve.tolerance = .Machine$double.eps)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rrreg.predictor_+3A_formula">formula</code></td>
<td>
<p>An object of class &quot;formula&quot;: a symbolic description of the
model to be fitted with the randomized response item as one of the
covariates.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_p">p</code></td>
<td>
<p>The probability of receiving the sensitive question (Mirrored
Question Design, Unrelated Question Design); the probability of answering
truthfully (Forced Response Design); the probability of selecting a red card
from the 'yes' stack (Disguised Response Design).</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_p0">p0</code></td>
<td>
<p>The probability of forced 'no' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_p1">p1</code></td>
<td>
<p>The probability of forced 'yes' (Forced Response Design).</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_q">q</code></td>
<td>
<p>The probability of answering 'yes' to the unrelated question, which
is assumed to be independent of covariates (Unrelated Question Design).</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_design">design</code></td>
<td>
<p>One of the four standard designs: &quot;forced-known&quot;, &quot;mirrored&quot;,
&quot;disguised&quot;, or &quot;unrelated-known&quot;.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model. Observations
with missingness are list-wise deleted.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_rr.item">rr.item</code></td>
<td>
<p>A string containing the name of the randomized response item
variable in the data frame.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_model.outcome">model.outcome</code></td>
<td>
<p>Currently the function only allows for logistic
regression, meaning the outcome variable must be binary.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_fit.sens">fit.sens</code></td>
<td>
<p>Indicator for whether to use Bayesian generalized linear
modeling (bayesglm) in the Maximization step for the
Expectation-Maximization (EM) algorithm to generate coefficients for the
randomized response item as the outcome.  Default is <code>"bayesglm"</code>;
otherwise input <code>"glm"</code>.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_fit.outcome">fit.outcome</code></td>
<td>
<p>Indicator for whether to use Bayesian generalized linear
modeling (bayesglm) in the Maximization step for the EM algorithm to
generate coefficients for the outcome variable given in the formula with the
randomized response item as a covariate. Default is <code>"bayesglm"</code>;
otherwise input <code>"glm"</code>.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_bstart">bstart</code></td>
<td>
<p>Optional starting values of coefficient estimates for the
randomized response item as outcome for the EM algorithm.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_tstart">tstart</code></td>
<td>
<p>Optional starting values of coefficient estimates for the
outcome variable given in the formula for the EM algorithm.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_parstart">parstart</code></td>
<td>
<p>Option to use the function <code>rrreg</code> to generate starting
values of coefficient estimates for the randomized response item as outcome
for the EM algorithm. The default is <code>TRUE</code>, but if starting estimates
are inputted by the user in <code>bstart</code>, this option is overidden.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_maxiter">maxIter</code></td>
<td>
<p>Maximum number of iterations for the Expectation-Maximization
algorithm. The default is <code>10000</code>.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_verbose">verbose</code></td>
<td>
<p>A logical value indicating whether model diagnostics counting
the number of EM iterations are printed out.  The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_optim">optim</code></td>
<td>
<p>A logical value indicating whether to use the quasi-Newton
&quot;BFGS&quot; method to calculate the variance-covariance matrix and standard
errors. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_em.converge">em.converge</code></td>
<td>
<p>A value specifying the satisfactory degree of convergence
under the EM algorithm. The default is <code>10^(-4)</code>.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_glmmaxiter">glmMaxIter</code></td>
<td>
<p>A value specifying the maximum number of iterations to run
the EM algorithm. The default is <code>20000</code> .</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_estconv">estconv</code></td>
<td>
<p>Option to base convergence on the absolute value of the
difference between subsequent coefficients generated through the EM
algorithm rather than the subsequent log-likelihoods. The default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="rrreg.predictor_+3A_solve.tolerance">solve.tolerance</code></td>
<td>
<p>When standard errors are calculated, this option
specifies the tolerance of the matrix inversion operation solve.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows users to perform multivariate regression analysis with
the randomized response item as a predictor for a separate outcome of
interest. It does so by jointly modeling the randomized response item as
both outcome and predictor for an additional outcome given the same set of
covariates. Four standard designs are accepted by this function: mirrored
question, forced response, disguised response, and unrelated question.
</p>


<h3>Value</h3>

<p><code>rrreg.predictor</code> returns an object of class &quot;rrpredreg&quot;
associated with the randomized response item as predictor.  The object
<code>rrpredreg</code> is a list that contains the following components (the
inclusion of some components such as the design parameters are dependent
upon the design used):
</p>
<table role = "presentation">
<tr><td><code>est.t</code></td>
<td>
<p>Point estimates for the effects of the randomized response item
as predictor and other covariates on the separate outcome variable specified
in the formula.</p>
</td></tr> <tr><td><code>se.t</code></td>
<td>
<p>Standard errors for estimates of the effects of
the randomized response item as predictor and other covariates on the
separate outcome variable specified in formula.</p>
</td></tr> <tr><td><code>est.b</code></td>
<td>
<p>Point
estimates for the effects of covariates on the randomized response item.</p>
</td></tr>
<tr><td><code>vcov</code></td>
<td>
<p>Variance-covariance matrix for estimates of the effects of the
randomized response item as predictor and other covariates on the separate
outcome variable specified in formula as well as for estimates of the
effects of covariates on the randomized response item.</p>
</td></tr> <tr><td><code>se.b</code></td>
<td>
<p>Standard
errors for estimates of the effects of covariates on the randomized response
item.</p>
</td></tr> <tr><td><code>data</code></td>
<td>
<p>The <code>data</code> argument.</p>
</td></tr> <tr><td><code>coef.names</code></td>
<td>
<p>Variable
names as defined in the data frame.</p>
</td></tr> <tr><td><code>x</code></td>
<td>
<p>The model matrix of
covariates.</p>
</td></tr> <tr><td><code>y</code></td>
<td>
<p>The randomized response vector.</p>
</td></tr> <tr><td><code>o</code></td>
<td>
<p>The separate
outcome of interest vector.</p>
</td></tr> <tr><td><code>design</code></td>
<td>
<p>Call of standard design used:
&quot;forced-known&quot;, &quot;mirrored&quot;, &quot;disguised&quot;, or &quot;unrelated-known&quot;.</p>
</td></tr> <tr><td><code>p</code></td>
<td>
<p>The
<code>p</code> argument.</p>
</td></tr> <tr><td><code>p0</code></td>
<td>
<p>The <code>p0</code> argument.</p>
</td></tr> <tr><td><code>p1</code></td>
<td>
<p>The
<code>p1</code> argument.</p>
</td></tr> <tr><td><code>q</code></td>
<td>
<p>The <code>q</code> argument.</p>
</td></tr> <tr><td><code>call</code></td>
<td>
<p>The
matched call.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Blair, Graeme, Kosuke Imai and Yang-Yang Zhou. (2014) &quot;Design
and Analysis of the Randomized Response Technique.&quot;  <em>Working Paper.</em>
Available at <a href="http://imai.princeton.edu/research/randresp.html">http://imai.princeton.edu/research/randresp.html</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rrreg">rrreg</a></code> for multivariate regression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(nigeria)

## Define design parameters

set.seed(44)

p &lt;- 2/3  # probability of answering honestly in Forced Response Design
p1 &lt;- 1/6 # probability of forced 'yes'
p0 &lt;- 1/6 # probability of forced 'no'

## Fit joint model of responses to an outcome regression of joining a civic 
## group and the randomized response item of having a militant social connection
rr.q1.pred.obj &lt;- 
    rrreg.predictor(civic ~ cov.asset.index + cov.married + I(cov.age/10) + 
              I((cov.age/10)^2) + cov.education + cov.female 
              + rr.q1, rr.item = "rr.q1", parstart = FALSE, estconv = TRUE,
              data = nigeria, verbose = FALSE, optim = TRUE,
              p = p, p1 = p1, p0 = p0, design = "forced-known")

summary(rr.q1.pred.obj)

## Replicates Table 4 in Blair, Imai, and Zhou (2014)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
