<!DOCTYPE html><html><head><title>Help for package injurytools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {injurytools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_injfollowup'><p>Check the dates in injury data and exposure data</p></a></li>
<li><a href='#cut_injd'><p>Cut the range of the follow-up</p></a></li>
<li><a href='#data_followup'><p>Build follow-up data frame</p></a></li>
<li><a href='#data_injurieslong'><p>Transform injury data into a long format</p></a></li>
<li><a href='#date_format'><p>Proper Conversion of Date objects</p></a></li>
<li><a href='#date2season'><p>Get the season</p></a></li>
<li><a href='#exp_unit_suffix'><p>Obtain suffix for time exposure unit</p></a></li>
<li><a href='#gg_injbarplot'><p>Plot player's injury incidence/burden ranking</p></a></li>
<li><a href='#gg_injphoto'><p>Plot injuries over the follow-up period</p></a></li>
<li><a href='#gg_injprev_polar'><p>Plot polar area diagrams representing players' prevalence</p></a></li>
<li><a href='#gg_injriskmatrix'><p>Plot risk matrices</p></a></li>
<li><a href='#injd'><p>Example of an <code>injd</code> object</p></a></li>
<li><a href='#injprev'><p>Calculate injury prevalence</p></a></li>
<li><a href='#injsummary'><p>Estimate injury summary statistics</p></a></li>
<li><a href='#injsummary_unit'><p>Transform injsummary() output according to the unit of exposure</p></a></li>
<li><a href='#injurytools'><p><span class="pkg">injurytools</span> package</p></a></li>
<li><a href='#is_injd'><p>Check if an object is of class <code>injd</code></p></a></li>
<li><a href='#is_injds'><p>Check if an object is of class <code>injds</code></p></a></li>
<li><a href='#new_injd'><p>constructor of injd class</p></a></li>
<li><a href='#prepare_data'><p>Prepare data in a standardized format</p></a></li>
<li><a href='#raw_df_exposures'><p>Minimal example of exposure data</p></a></li>
<li><a href='#raw_df_injuries'><p>Minimal example of injury data</p></a></li>
<li><a href='#season2year'><p>Get the year</p></a></li>
<li><a href='#validate_injd'><p>validator or injd class</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>A Toolkit for Sports Injury Data Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Sports Injury Data analysis aims to identify and describe the
  magnitude of the injury problem, and to gain more insights (e.g. determine
  potential risk factors) by statistical modelling approaches. The 'injurytools'
  package provides standardized routines and utilities that simplify such
  analyses. It offers functions for data preparation, informative visualizations 
  and descriptive and model-based analyses.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, gridExtra, kableExtra, knitr, RColorBrewer, rmarkdown,
spelling, survival, survminer, coxme, pscl, lme4, MASS,
testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, dplyr, forcats, ggplot2, lubridate, metR, purrr,
rlang, stats, stringr, tidyr, tidyselect, withr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/lzumeta/injurytools">https://github.com/lzumeta/injurytools</a>,
<a href="https://lzumeta.github.io/injurytools/">https://lzumeta.github.io/injurytools/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/lzumeta/injurytools/issues">https://github.com/lzumeta/injurytools/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-14 16:16:49 UTC; lzumeta</td>
</tr>
<tr>
<td>Author:</td>
<td>Lore Zumeta Olaskoaga
    <a href="https://orcid.org/0000-0001-6141-1469"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Dae-Jin Lee <a href="https://orcid.org/0000-0002-8995-8535"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lore Zumeta Olaskoaga &lt;lzumeta@bcamath.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-14 17:20:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_injfollowup'>Check the dates in injury data and exposure data</h2><span id='topic+check_injfollowup'></span>

<h3>Description</h3>

<p>Check that dates of injury data are within the dates of exposure data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_injfollowup(followup_df, data_injuries)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_injfollowup_+3A_followup_df">followup_df</code></td>
<td>
<p>Data frame created inside prepare_all() function.</p>
</td></tr>
<tr><td><code id="check_injfollowup_+3A_data_injuries">data_injuries</code></td>
<td>
<p>Data frame given in prepare_all() function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same injury data or cut injury data in which the dates of injury
occurrences are within the dates of each player's follow-up period.
</p>

<hr>
<h2 id='cut_injd'>Cut the range of the follow-up</h2><span id='topic+cut_injd'></span>

<h3>Description</h3>

<p>Given an <code>injd</code> object, cut the range of the time period such that the
limits of the observed dates, first and last observed dates, are <code>date0</code>
and <code>datef</code>, respectively. It is possible to specify just one date, i.e.
the two dates of the range do not necessarily have to be entered. See Note
section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cut_injd(injd, date0, datef)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cut_injd_+3A_injd">injd</code></td>
<td>
<p>Prepared data, an <code>injd</code> object.</p>
</td></tr>
<tr><td><code id="cut_injd_+3A_date0">date0</code></td>
<td>
<p>Starting date of class <a href="base.html#topic+Dates">Date</a> or
<a href="base.html#topic+numeric">numeric</a>. If <code>numeric</code>, it should refer to a
year (e.g. <code>date</code> = 2018). Optional.</p>
</td></tr>
<tr><td><code id="cut_injd_+3A_datef">datef</code></td>
<td>
<p>Ending date. Same class as <code>date0</code>. Optional.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>injd</code> object with a shorter follow-up period.
</p>


<h3>Note</h3>

<p>Be aware that by modifying the follow-up period of the cohort, the
study design is being altered. This function should not be used, unless
there is no strong argument supporting it. And in that case, it should be
used with caution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Prepare data

df_injuries &lt;- prepare_inj(
  df_injuries0   = raw_df_injuries,
  player         = "player_name",
  date_injured   = "from",
  date_recovered = "until"
)

df_exposures &lt;- prepare_exp(
  df_exposures0 = raw_df_exposures,
  player        = "player_name",
  date          = "year",
  time_expo     = "minutes_played"
)

injd &lt;- prepare_all(
  data_exposures = df_exposures,
  data_injuries  = df_injuries,
  exp_unit       = "matches_minutes"
)



cut_injd(injd, date0 = 2018)

</code></pre>

<hr>
<h2 id='data_followup'>Build follow-up data frame</h2><span id='topic+data_followup'></span>

<h3>Description</h3>

<p>Build follow-up data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_followup(data_exposures)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data_followup_+3A_data_exposures">data_exposures</code></td>
<td>
<p>Exposure data frame with standardized column names, in
the same fashion that <code>prepare_exp()</code> returns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame in which each row corresponds to a player and his/her
first date (<code>t0</code>) and last date (<code>tf</code>) observed.
</p>

<hr>
<h2 id='data_injurieslong'>Transform injury data into a long format</h2><span id='topic+data_injurieslong'></span>

<h3>Description</h3>

<p>Transform injury data into a long format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_injurieslong(data_injuries)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data_injurieslong_+3A_data_injuries">data_injuries</code></td>
<td>
<p>Injury data frame with standardized column names, in the
same fashion that <code>prepare_inj()</code> returns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>data_injuries</code> data frame in long format in which each row
corresponds to player-event.
</p>

<hr>
<h2 id='date_format'>Proper Conversion of Date objects</h2><span id='topic+date_format'></span>

<h3>Description</h3>

<p>Converts <a href="base.html#topic+Dates">Date</a> objects into a common format used for every
Date object throughout the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_format(date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="date_format_+3A_date">date</code></td>
<td>
<p>a <a href="base.html#topic+Dates">Date</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To limit the scope of the changes to LC_TIME and the timezone, a temporary
locale modification is made using the <code>withr</code> package.
</p>


<h3>Value</h3>

<p>A &quot;%Y-%m-%d&quot; formatted <a href="base.html#topic+Dates">Date</a> object with respect to
a fixed locale and time zone, i.e. setting the LC_TIME component to C and
timezone to UTC (the safest choice, non-geographic and Coordinated
Universal Time).
</p>

<hr>
<h2 id='date2season'>Get the season</h2><span id='topic+date2season'></span>

<h3>Description</h3>

<p>Get the season given the date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date2season(date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="date2season_+3A_date">date</code></td>
<td>
<p>A vector of class <a href="base.html#topic+Dates">Date</a> or
<a href="base.html#topic+integer">integer</a>/<a href="base.html#topic+numeric">numeric</a>. If it is
<code>integer</code>/<code>numeric</code>, it should refer to the year in which the
season started (e.g. <code>date</code> = 2015 to refer to the 2015/2016 season)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character specifying the respective competition season given the
date. The season (output) follows this pattern: &quot;2005/2006&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>date &lt;- Sys.Date()
date2season(date)
</code></pre>

<hr>
<h2 id='exp_unit_suffix'>Obtain suffix for time exposure unit</h2><span id='topic+exp_unit_suffix'></span>

<h3>Description</h3>

<p>Obtain suffix for time exposure unit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exp_unit_suffix(exp_unit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exp_unit_suffix_+3A_exp_unit">exp_unit</code></td>
<td>
<p>Character defining the unit of time exposure (&quot;minutes&quot; the
default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character indicating the respective suffix for the <code>exp_unit</code>
entered.
</p>

<hr>
<h2 id='gg_injbarplot'>Plot player's injury incidence/burden ranking</h2><span id='topic+gg_injbarplot'></span>

<h3>Description</h3>

<p>A bar chart that shows player-wise injury summary statistics, either injury
incidence or injury burden, ranked in descending order.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_injbarplot(injds, type = c("incidence", "burden"), title = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_injbarplot_+3A_injds">injds</code></td>
<td>
<p><code>injds</code> <strong>S3</strong> object (see
<code><a href="#topic+injsummary">injsummary()</a></code>).</p>
</td></tr>
<tr><td><code id="gg_injbarplot_+3A_type">type</code></td>
<td>
<p>A character value indicating whether to plot injury incidence's
or injury burden's ranking. One of &quot;incidence&quot; or &quot;burden&quot;,
respectively.</p>
</td></tr>
<tr><td><code id="gg_injbarplot_+3A_title">title</code></td>
<td>
<p>Text for the main title.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object (to which optionally more layers can be added).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df_exposures &lt;- prepare_exp(raw_df_exposures, player = "player_name",
                            date = "year", time_expo = "minutes_played")
df_injuries  &lt;- prepare_inj(raw_df_injuries, player = "player_name",
                            date_injured = "from", date_recovered = "until")
injd         &lt;- prepare_all(data_exposures = df_exposures,
                            data_injuries  = df_injuries,
                            exp_unit = "matches_minutes")


injds &lt;- injsummary(injd)

p1 &lt;- gg_injbarplot(injds, type = "incidence",
                    title = "Overall injury incidence per player")
p2 &lt;- gg_injbarplot(injds, type = "burden",
                    title = "Overall injury burden per player")

# install.packages("gridExtra")
# library(gridExtra)
if (require("gridExtra")) {
  gridExtra::grid.arrange(p1, p2, nrow = 1)
}
</code></pre>

<hr>
<h2 id='gg_injphoto'>Plot injuries over the follow-up period</h2><span id='topic+gg_injphoto'></span>

<h3>Description</h3>

<p>Given an <code>injd</code> <strong>S3</strong> object it plots an overview of the injuries
sustained by each player/athlete in the cohort during the follow-up. Each
subject timeline is depicted horizontally where the red cross indicates the
exact injury date, the blue circle the recovery date and the bold black line
indicates the duration of the injury (time-loss).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_injphoto(injd, title = NULL, fix = FALSE, by_date = "1 months")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_injphoto_+3A_injd">injd</code></td>
<td>
<p>Prepared data. An <code>injd</code> object.</p>
</td></tr>
<tr><td><code id="gg_injphoto_+3A_title">title</code></td>
<td>
<p>Text for the main title.</p>
</td></tr>
<tr><td><code id="gg_injphoto_+3A_fix">fix</code></td>
<td>
<p>A logical value indicating whether to limit the range of date (x
scale) to the maximum observed exposure date or not to limit the x
scale, regardless some recovery dates might be longer than the
maximum observed exposure date.</p>
</td></tr>
<tr><td><code id="gg_injphoto_+3A_by_date">by_date</code></td>
<td>
<p>increment of the date sequence at which x-axis tick-marks are
to drawn. An argument to be passed to
<code><a href="base.html#topic+seq.Date">base::seq.Date()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object (to which optionally more layers can be added).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df_exposures &lt;- prepare_exp(raw_df_exposures, player = "player_name",
                            date = "year", time_expo = "minutes_played")
df_injuries  &lt;- prepare_inj(raw_df_injuries, player = "player_name",
                            date_injured = "from", date_recovered = "until")
injd         &lt;- prepare_all(data_exposures = df_exposures,
                            data_injuries  = df_injuries,
                            exp_unit = "minutes")


gg_injphoto(injd, title = "Injury Overview", by_date = "1 years")
</code></pre>

<hr>
<h2 id='gg_injprev_polar'>Plot polar area diagrams representing players' prevalence</h2><span id='topic+gg_injprev_polar'></span>

<h3>Description</h3>

<p>Plot the proportions of available and injured players in the cohort, on a
monthly or season basis, by a polar area diagram. Further information on the
type of injury may be specified so that the injured players proportions are
disaggregated and reported according to this variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_injprev_polar(
  injd,
  by = c("monthly", "season"),
  var_type_injury = NULL,
  title = "Polar area diagram\ninjured and available (healthy) players"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_injprev_polar_+3A_injd">injd</code></td>
<td>
<p>Prepared data, an <code>injd</code> object.</p>
</td></tr>
<tr><td><code id="gg_injprev_polar_+3A_by">by</code></td>
<td>
<p>Character, one of &quot;monthly&quot; or &quot;season&quot;, specifying the periodicity
according to which to calculate the proportions of available and injured
players/athletes.</p>
</td></tr>
<tr><td><code id="gg_injprev_polar_+3A_var_type_injury">var_type_injury</code></td>
<td>
<p>Character specifying the name of the column on the
basis of which to classify the injuries and calculate proportions of the
injured players. It should refer to a (categorical) variable that describes
the &quot;type of injury&quot;. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="gg_injprev_polar_+3A_title">title</code></td>
<td>
<p>Text for the main title.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object (to which optionally more layers can be added).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df_exposures &lt;- prepare_exp(raw_df_exposures, player = "player_name",
                            date = "year", time_expo = "minutes_played")
df_injuries  &lt;- prepare_inj(raw_df_injuries, player = "player_name",
                            date_injured = "from", date_recovered = "until")
injd         &lt;- prepare_all(data_exposures = df_exposures,
                            data_injuries  = df_injuries,
                            exp_unit = "matches_minutes")



library(ggplot2)
our_palette &lt;- c("seagreen3", "red3", rev(RColorBrewer::brewer.pal(5, "Reds")))
gg_injprev_polar(injd, by = "monthly", var_type_injury = "injury_type",
            title = "Polar area diagram\ninjured and available (healthy) players per month") +
  scale_fill_manual(values = our_palette)
gg_injprev_polar(injd, by = "monthly",
            title = "Polar area diagram\ninjured and available (healthy) players per month") +
  scale_fill_manual(values = our_palette)

</code></pre>

<hr>
<h2 id='gg_injriskmatrix'>Plot risk matrices</h2><span id='topic+gg_injriskmatrix'></span>

<h3>Description</h3>

<p>Given an <code>injds</code> <strong>S3</strong> object, it depicts risk matrix plots , a
graph in which the injury incidence (frequency) is plotted against the
average days lost per injury (consequence). The point estimate of injury
incidence together with its confidence interval is plotted, according to the
method used when running <code><a href="#topic+injsummary">injsummary()</a></code> function. On
the y-axis, the mean time-loss per injury together with <code class="reqn">\pm</code> IQR (days)
is plotted. The number shown inside the point and the point size itself,
report the injury burden (days lost per player-exposure time), the bigger the
size the greater the burden. See References section.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gg_injriskmatrix(
  injds,
  var_type_injury = NULL,
  add_contour = TRUE,
  title = NULL,
  xlab = "Incidence (injuries per _)",
  ylab = "Mean time-loss (days) per injury",
  errh_height = 1,
  errv_width = 0.05,
  cont_max_x = NULL,
  cont_max_y = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gg_injriskmatrix_+3A_injds">injds</code></td>
<td>
<p><code>injds</code> <strong>S3</strong> object (see
<code><a href="#topic+injsummary">injsummary()</a></code>)</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_var_type_injury">var_type_injury</code></td>
<td>
<p>Character specifying the name of the column. A
(categorical) variable referring to the &quot;type of injury&quot; (e.g.
muscular/articular/others or overuse/not-overuse etc.) according to which
visualize injury summary statistics (optional, defaults to <code>NULL</code>).</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_add_contour">add_contour</code></td>
<td>
<p>Logical, whether or not to add contour lines of the
product between injury incidence and mean severity (i.e. 'incidence x
average time-loss'), which leads to injury burden (defaults to
<code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_title">title</code></td>
<td>
<p>Text for the main title passed to
<code><a href="ggplot2.html#topic+ggtitle">ggplot2::ggtitle()</a></code>.</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_xlab">xlab</code></td>
<td>
<p>x-axis label to be passed to
<code><a href="ggplot2.html#topic+xlab">ggplot2::xlab()</a></code>.</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_ylab">ylab</code></td>
<td>
<p>y-axis label to be passed to
<code><a href="ggplot2.html#topic+ylab">ggplot2::ylab()</a></code>.</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_errh_height">errh_height</code></td>
<td>
<p>Set the height of the horizontal interval whiskers; the
<code>height</code> argument for
<code><a href="ggplot2.html#topic+geom_errorbarh">ggplot2::geom_errorbarh()</a></code>.</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_errv_width">errv_width</code></td>
<td>
<p>Set the width of the vertical interval whiskers; the
<code>width</code> argument for <br />
<code><a href="ggplot2.html#topic+geom_errorbar">ggplot2::geom_errorbar()</a></code>.</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_cont_max_x">cont_max_x</code>, <code id="gg_injriskmatrix_+3A_cont_max_y">cont_max_y</code></td>
<td>
<p>Numerical (optional) values indicating the
maximum on the x-axis and y-axis, respectively, to be reached by the
contour.</p>
</td></tr>
<tr><td><code id="gg_injriskmatrix_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to
<code><a href="ggplot2.html#topic+geom_contour">ggplot2::geom_contour()</a></code> and
<code><a href="metR.html#topic+geom_text_contour">metR::geom_text_contour()</a></code>.
These are often aesthetics like <code>bins = 15</code> or <code>breaks = 10</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object (to which optionally more layers can be added).
</p>


<h3>References</h3>

<p>Bahr R, Clarsen B, Derman W, et al. International Olympic Committee
consensus statement: methods for recording and reporting of epidemiological
data on injury and illness in sport 2020 (including STROBE Extension for
Sport Injury and Illness Surveillance (STROBE-SIIS)) <em>British Journal of
Sports Medicine</em> 2020; 54:372-389.
</p>
<p>Fuller C. W. (2018). Injury Risk (Burden), Risk Matrices and Risk Contours
in Team Sports: A Review of Principles, Practices and Problems.<em>Sports
Medicine</em>, 48(7), 1597–1606. <br /> https://doi.org/10.1007/s40279-018-0913-5
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df_exposures &lt;- prepare_exp(raw_df_exposures, player = "player_name",
                            date = "year", time_expo = "minutes_played")
df_injuries  &lt;- prepare_inj(raw_df_injuries, player = "player_name",
                            date_injured = "from", date_recovered = "until")
injd         &lt;- prepare_all(data_exposures = df_exposures,
                            data_injuries  = df_injuries,
                            exp_unit = "matches_minutes")



injds &lt;- injsummary(injd)
injds2 &lt;- injsummary(injd, var_type_injury = "injury_type")

gg_injriskmatrix(injds)
gg_injriskmatrix(injds2, var_type_injury = "injury_type", title = "Risk matrix")

</code></pre>

<hr>
<h2 id='injd'>Example of an <code>injd</code> object</h2><span id='topic+injd'></span>

<h3>Description</h3>

<p>An <code>injd</code> object (<strong>S3</strong>), called <code>injd</code>, to showcase what
this object is like and also to save computation time in some help files
provided by the package. The result of applying <code>prepare_all()</code> to
<em>raw_df_exposures</em> (<code>prepare_exp(raw_df_exposures, ...)</code>) and <br />
<em>raw_df_injuries</em> (<code>prepare_inj(raw_df_injuries, ...)</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>injd
</code></pre>


<h3>Format</h3>

<p>The main data frame in <code>injd</code> gathers information of 28 players
and has 108 rows and 19 columns:
</p>

<dl>
<dt>player</dt><dd><p>Player identifier (factor)</p>
</dd>
<dt>t0</dt><dd><p>Follow-up period of the corresponding player, i.e. player’s first observed date, same value for each player (Date)</p>
</dd>
<dt>tf</dt><dd><p>Follow-up period of the corresponding player, i.e. player’s last observed date, same value for each player (Date)</p>
</dd>
<dt>date_injured</dt><dd><p>Date of injury of the corresponding observation (if any). Otherwise NA (Date)</p>
</dd>
<dt>date_recovered</dt><dd><p>Date of recovery of the corresponding observation (if any). Otherwise NA (Date)</p>
</dd>
<dt>tstart</dt><dd><p>Beginning date of the corresponding interval in which the observation has been at risk of injury (Date)</p>
</dd>
<dt>tstop</dt><dd><p>Ending date of the corresponding interval in which the observation has been at risk of injury (Date)</p>
</dd>
<dt>tstart_minPlay</dt><dd><p>Beginning time. Minutes played in matches until the start of this interval in which the observation has been at risk of injury (numeric)</p>
</dd>
<dt>tstop_minPlay</dt><dd><p>Ending time. Minutes played in matches until the finish of this interval in which the observation has been at risk of injury (numeric)</p>
</dd>
<dt>status</dt><dd><p>injury (event) indicator (numeric)</p>
</dd>
<dt>enum</dt><dd><p>an integer indicating the recurrence number, i.e. the <code class="reqn">k</code>-th injury (event), at which the observation is at risk</p>
</dd>
<dt>days_lost</dt><dd><p>Number of days lost due to injury (numeric)</p>
</dd>
<dt>player_id</dt><dd><p>Identification number of the football player (factor)</p>
</dd>
<dt>season</dt><dd><p>Season to which this player's entry corresponds (factor)</p>
</dd>
<dt>games_lost</dt><dd><p>Number of matches lost due to injury (numeric)</p>
</dd>
<dt>injury</dt><dd><p>Injury specification as it appears in <a href="https://www.transfermarkt.com">https://www.transfermarkt.com</a>, if any; otherwise NA (character)</p>
</dd>
<dt>injury_acl</dt><dd><p>Whether it is Anterior Cruciate Ligament (ACL) injury or not (NO_ACL); if the interval corresponds to an injury, NA otherwise (factor)</p>
</dd>
<dt>injury_type</dt><dd><p>A five level categorical variable indicating the type
of injury, whether Bone, Concussion, Ligament, Muscle or Unknown; if any,
NA otherwise (factor)</p>
</dd>
<dt>injury_severity</dt><dd><p>A four level categorical variable indicating the
severity of the injury (if any), whether Minor (&lt;7 days lost), Moderate ([7, 28)
days lost), Severe ([28, 84) days lost) or Very_severe (&gt;=84 days lost);
NA otherwise (factor)</p>
</dd>
</dl>



<h3>Details</h3>

<p>It consists of a data frame plus 4 other attributes:
a character specifying the unit of exposure (<code>unit_exposure</code>); and 3
(auxiliary) data frames: <code>follow_up</code>, <code>data_exposures</code> and
<code>data_injuries</code>.
</p>

<hr>
<h2 id='injprev'>Calculate injury prevalence</h2><span id='topic+injprev'></span>

<h3>Description</h3>

<p>Calculate the prevalence of injured players and the proportion of non-injured
(available) players in the cohort, on a monthly or season basis. Further
information on the type of injury may be specified so that the
injury-specific prevalences are reported according to this variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>injprev(injd, by = c("monthly", "season"), var_type_injury = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="injprev_+3A_injd">injd</code></td>
<td>
<p>Prepared data. An <code>injd</code> object.</p>
</td></tr>
<tr><td><code id="injprev_+3A_by">by</code></td>
<td>
<p>Character. One of &quot;monthly&quot; or &quot;season&quot;, specifying the periodicity
according to which to calculate the proportions of available and injured
players/athletes.</p>
</td></tr>
<tr><td><code id="injprev_+3A_var_type_injury">var_type_injury</code></td>
<td>
<p>Character specifying the name of the column on the
basis of which to classify the injuries and calculate proportions of the
injured players. Defaults to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing one row for each combination of season, month
(optionally) and injury type (if <code>var_type_injury</code> not specified, then this
variable has two categories: <em>Available</em> and <em>Injured</em>). Plus, three more
columns, specifying the proportion of players (<code>prop</code>) satisfying the
corresponding row's combination of values, i.e. prevalence, how many
players were injured at that moment with the type of injury of the
corresponding row (<code>n</code>), over how many players were at that time in the
cohort (<code>n_player</code>). See Note section.
</p>


<h3>Note</h3>

<p>If <code>var_type_injury</code> is specified (and not <code>NULL</code>), it may happen that a
player in one month suffers two different types of injuries. For example, a
muscle and a ligament injury. In this case, this two injuries contribute to
the proportions of muscle and ligament injuries for that month, resulting in
an overall proportion that exceeds 100%. Besides, the players in Available
category are those that did not suffer any injury in that moment
(season-month), that is, they were healthy all the time that the period
lasted
</p>


<h3>References</h3>

<p>Bahr R, Clarsen B, Derman W, et al. International Olympic Committee
consensus statement: methods for recording and reporting of epidemiological
data on injury and illness in sport 2020 (including STROBE Extension for
Sport Injury and Illness Surveillance (STROBE-SIIS)) <em>British Journal of
Sports Medicine</em> 2020; 54:372-389.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df_exposures &lt;- prepare_exp(raw_df_exposures, player = "player_name",
                            date = "year", time_expo = "minutes_played")
df_injuries  &lt;- prepare_inj(raw_df_injuries, player = "player_name",
                            date_injured = "from", date_recovered = "until")
injd         &lt;- prepare_all(data_exposures = df_exposures,
                            data_injuries  = df_injuries,
                            exp_unit = "matches_minutes")


injprev(injd, by = "monthly", var_type_injury = "injury_type")
injprev(injd, by = "monthly")
injprev(injd, by = "season", var_type_injury = "injury_type")
injprev(injd, by = "season")
</code></pre>

<hr>
<h2 id='injsummary'>Estimate injury summary statistics</h2><span id='topic+injsummary'></span>

<h3>Description</h3>

<p>Calculate injury summary statistics such as injury incidence and injury
burden (see Bahr et al. 20), including total number of injuries, number of
days lost due to injury, total time of exposure etc., by means of a (widely
used) Poisson method, negative binomial, zero-inflated poisson or
zero-inflated negative binomial, on a player and overall basis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>injsummary(
  injd,
  var_type_injury = NULL,
  method = c("poisson", "negbin", "zinfpois", "zinfnb"),
  conf_level = 0.95,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="injsummary_+3A_injd">injd</code></td>
<td>
<p><code>injd</code> <strong>S3</strong> object (see
<code><a href="#topic+prepare_all">prepare_all()</a></code>).</p>
</td></tr>
<tr><td><code id="injsummary_+3A_var_type_injury">var_type_injury</code></td>
<td>
<p>Character specifying the name of the column according
to which compute injury summary statistics. It should refer to a
(categorical) variable that describes the &quot;type of injury&quot;. Optional,
defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="injsummary_+3A_method">method</code></td>
<td>
<p>Method to estimate injury incidence and injury burden. One of
&quot;poisson&quot;, &quot;negbin&quot;, &quot;zinfpois&quot; or &quot;zinfnb&quot;; characters that stand for
Poisson method, negative binomial method, zero-inflated Poisson and
zero-inflated negative binomial.</p>
</td></tr>
<tr><td><code id="injsummary_+3A_conf_level">conf_level</code></td>
<td>
<p>Confidence level (defaults to 0.95).</p>
</td></tr>
<tr><td><code id="injsummary_+3A_quiet">quiet</code></td>
<td>
<p>Logical, whether or not to silence the warning messages
(defaults to <code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of two data frames comprising player-wise and overall injury
summary statistics, respectively, that constitute an <code>injds</code>
<strong>S3</strong> object. Both of them made up of the following columns:
</p>

<ul>
<li> <p><code>ninjuries</code>: number of injuries sustained by the player or
overall in the team over the given period specified by the <code>injd</code>
data frame.
</p>
</li>
<li> <p><code>ndayslost</code>: number of days lost by the player or overall
in the team due to injury over the given period specified by the
<code>injd</code> data frame.
</p>
</li>
<li> <p><code>mean_dayslost</code>: average of number of days lost (i.e.
<code>ndayslost</code>) playerwise or overall in the team.
</p>
</li>
<li> <p><code>median_dayslost</code>: median of number of days lost (i.e.
<code>ndayslost</code>) playerwise or overall in the team.
</p>
</li>
<li> <p><code>iqr_dayslost</code>: interquartile range of number of days lost
(i.e. <code>ndayslost</code>) playerwise or overall in the team.
</p>
</li>
<li> <p><code>totalexpo</code>: total exposure that the player has been under risk
of sustaining an injury.
</p>
</li>
<li> <p><code>injincidence</code>: injury incidence, number of injuries per unit of
exposure.
</p>
</li>
<li> <p><code>injburden</code>: injury burden, number of days lost per unit of
exposure.
</p>
</li>
<li> <p><code>var_type_injury</code>: only if it is specified as an argument to
function.
</p>
</li></ul>

<p>Apart from this column names, they may further include these other columns
depending on the user's specifications to the function:
</p>

<ul>
<li> <p><code>percent_ninjuries</code>: percentage (%) of number of injuries of
that type relative to all types of injuries (if <code>var_type_injury</code>
specified).
</p>
</li>
<li> <p><code>percent_dayslost</code>: percentage (%) of number of days lost
because of injuries of that type relative to the total number of days
lost because of all types of injuries (if <code>var_type_injury</code>
specified).
</p>
</li>
<li> <p><code>injincidence_sd</code> and <code>injburden_sd</code>: estimated standard
deviation, by the specified <code>method</code> argument, of injury incidence
(<code>injincidence</code>) and injury burden (<code>injburden</code>), for the
overall injury summary statistics (the 2nd element of the function
output).
</p>
</li>
<li> <p><code>injincidence_lower</code> and <code>injburden_lower</code>: lower bound
of, for example, 95% confidence interval (if <code>conf_level = 0.95</code>)
of injury incidence (<code>injincidence</code>) and injury burden
(<code>injburden</code>), for the overall injury summary statistics (the 2nd
element of the function output).
</p>
</li>
<li> <p><code>injincidence_upper</code> and <code>injburden_upper</code>: the same (as
above item) applies but for the upper bound.
</p>
</li></ul>



<h3>References</h3>

<p>Bahr R., Clarsen B., &amp; Ekstrand J. (2018). Why we should focus on the burden
of injuries and illnesses, not just their incidence. <em>British Journal of
Sports Medicine</em>, 52(16), 1018–1021.
https://doi.org/10.1136/bjsports-2017-098160
</p>
<p>Waldén M., Mountjoy M., McCall A., Serner A., Massey A., Tol J. L.,
... &amp; Andersen T. E. (2023). Football-specific extension of the IOC
consensus statement: methods for recording and reporting of epidemiological
data on injury and illness in sport 2020. <em>British journal of sports
medicine</em>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
df_exposures &lt;- prepare_exp(raw_df_exposures, player = "player_name",
                            date = "year", time_expo = "minutes_played")
df_injuries  &lt;- prepare_inj(raw_df_injuries, player = "player_name",
                            date_injured = "from", date_recovered = "until")
injd         &lt;- prepare_all(data_exposures = df_exposures,
                            data_injuries  = df_injuries,
                            exp_unit = "matches_minutes")


injsummary(injd)
injsummary(injd, var_type_injury = "injury_type")
</code></pre>

<hr>
<h2 id='injsummary_unit'>Transform injsummary() output according to the unit of exposure</h2><span id='topic+injsummary_unit'></span>

<h3>Description</h3>

<p>Transform injsummary() output according to the unit of exposure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>injsummary_unit(unit, injds, quiet)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="injsummary_unit_+3A_unit">unit</code></td>
<td>
<p>Character that indicates the unit of exposure of the sports
injury data.</p>
</td></tr>
<tr><td><code id="injsummary_unit_+3A_injds">injds</code></td>
<td>
<p><code>injds</code> data frame to be transformed.</p>
</td></tr>
<tr><td><code id="injsummary_unit_+3A_quiet">quiet</code></td>
<td>
<p>Logical, whether or not to silence the warning messages
(defaults to <code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of two elements:
(i) same injds data frame with 'injincidence'
and 'injburden' values transformed according to <code>unit</code>, named
<code>injds</code> and
(ii) a character vector that expresses the unit used for the rates, i.e.
for the player's time at risk, named <code>unit_timerisk</code>.
</p>

<hr>
<h2 id='injurytools'><span class="pkg">injurytools</span> package</h2><span id='topic+injurytools'></span><span id='topic+injurytools-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Sports Injury Data analysis aims to identify and describe the magnitude of the injury problem, and to gain more insights (e.g. determine potential risk factors) by statistical modelling approaches. The 'injurytools' package provides standardized routines and utilities that simplify such analyses. It offers functions for data preparation, informative visualizations and descriptive and model-based analyses.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Lore Zumeta Olaskoaga <a href="mailto:lzumeta@bcamath.org">lzumeta@bcamath.org</a> (<a href="https://orcid.org/0000-0001-6141-1469">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Dae-Jin Lee <a href="mailto:dlee@bcamath.org">dlee@bcamath.org</a> (<a href="https://orcid.org/0000-0002-8995-8535">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/lzumeta/injurytools">https://github.com/lzumeta/injurytools</a>
</p>
</li>
<li> <p><a href="https://lzumeta.github.io/injurytools/">https://lzumeta.github.io/injurytools/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/lzumeta/injurytools/issues">https://github.com/lzumeta/injurytools/issues</a>
</p>
</li></ul>


<hr>
<h2 id='is_injd'>Check if an object is of class <code>injd</code></h2><span id='topic+is_injd'></span>

<h3>Description</h3>

<p>Check if an object <code>x</code> is of class <code>injd</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_injd(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_injd_+3A_x">x</code></td>
<td>
<p>any R object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value: <code>TRUE</code> if <code>x</code> inherits from <code>injd</code>
class, <code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='is_injds'>Check if an object is of class <code>injds</code></h2><span id='topic+is_injds'></span>

<h3>Description</h3>

<p>Check if an object x is of class <code>injds</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_injds(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_injds_+3A_x">x</code></td>
<td>
<p>any R object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value: <code>TRUE</code> if <code>x</code> inherits from <code>injds</code>
class, <code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='new_injd'>constructor of injd class</h2><span id='topic+new_injd'></span>

<h3>Description</h3>

<p>constructor of injd class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_injd(
  x = data.frame(),
  unit_exposure = "match_minutes",
  follow_up = data.frame(),
  data_exposures = data.frame(),
  data_injuries = data.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_injd_+3A_x">x</code></td>
<td>
<p>a data frame object to construct it to injd class object</p>
</td></tr>
<tr><td><code id="new_injd_+3A_unit_exposure">unit_exposure</code></td>
<td>
<p>first attribute</p>
</td></tr>
<tr><td><code id="new_injd_+3A_follow_up">follow_up</code></td>
<td>
<p>second attribute</p>
</td></tr>
<tr><td><code id="new_injd_+3A_data_exposures">data_exposures</code></td>
<td>
<p>third attribute</p>
</td></tr>
<tr><td><code id="new_injd_+3A_data_injuries">data_injuries</code></td>
<td>
<p>fourth attribute</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new injd object
</p>

<hr>
<h2 id='prepare_data'>Prepare data in a standardized format</h2><span id='topic+prepare_data'></span><span id='topic+prepare_inj'></span><span id='topic+prepare_exp'></span><span id='topic+prepare_all'></span>

<h3>Description</h3>

<p>These are the data preprocessing functions provided by the <code>injurytools</code>
package, which involve:
</p>

<ol>
<li><p> setting <strong>exposure</strong> and <strong>injury data</strong> in a standardized
format and
</p>
</li>
<li><p> integrating both sources of data into an adequate data structure.
</p>
</li></ol>

<p><code>prepare_inj()</code> and <code>prepare_exp()</code> set standardized names and
proper classes to the (key) columns in injury and exposure data,
respectively. <code>prepare_all()</code> integrates both, standardized injury and
exposure data sets, and convert them into an <code>injd</code> <strong>S3</strong> object
that has an adequate structure for further statistical analyses.
See the <a href="https://lzumeta.github.io/injurytools/articles/prepare-injury-data.html">Prepare Sports Injury Data</a>
vignette for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepare_inj(
  df_injuries0,
  player = "player",
  date_injured = "date_injured",
  date_recovered = "date_recovered"
)

prepare_exp(
  df_exposures0,
  player = "player",
  date = "date",
  time_expo = "time_expo"
)

prepare_all(
  data_exposures,
  data_injuries,
  exp_unit = c("minutes", "hours", "days", "matches_num", "matches_minutes",
    "activity_days", "seasons")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepare_data_+3A_df_injuries0">df_injuries0</code></td>
<td>
<p>A data frame containing injury information, with columns
referring to the player name/id, date of injury and date of recovery (as
minimal data).</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_player">player</code></td>
<td>
<p>Character referring to the column name where player information
is stored.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_date_injured">date_injured</code></td>
<td>
<p>Character referring to the column name where the
information about the date of injury is stored.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_date_recovered">date_recovered</code></td>
<td>
<p>Character referring to the column name where the
information about the date of recovery is stored.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_df_exposures0">df_exposures0</code></td>
<td>
<p>A data frame containing exposure information, with
columns referring to the player name/id, date of exposure and the total
time of exposure of the corresponding data entry (as minimal data).</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_date">date</code></td>
<td>
<p>Character referring to the column name where the exposure date
information is stored. Besides, the column must be of class
<a href="base.html#topic+Dates">Date</a> or
<a href="base.html#topic+integer">integer</a>/<a href="base.html#topic+numeric">numeric</a>. If it is
<code>integer</code>/<code>numeric</code>, it should refer to the year in which the
season started (e.g. <code>date</code> = 2015 to refer to the 2015/2016 season).</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_time_expo">time_expo</code></td>
<td>
<p>Character referring to the column name where the information
about the time of exposure in that corresponding date is stored.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_data_exposures">data_exposures</code></td>
<td>
<p>Exposure data frame with standardized column names, in
the same fashion that <code>prepare_exp()</code> returns.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_data_injuries">data_injuries</code></td>
<td>
<p>Injury data frame with standardized column names, in the
same fashion that <code>prepare_inj()</code> returns.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_exp_unit">exp_unit</code></td>
<td>
<p>Character defining the unit of exposure time (&quot;minutes&quot; the
default).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>prepare_inj()</code> returns a data frame in which the <strong>key
columns</strong> in injury data are standardized and have a proper format.
</p>
<p><code>prepare_exp()</code> returns a data frame in which the <strong>key
columns</strong> in exposure data are standardized and have a proper format.
</p>
<p><code>prepare_all()</code> returns the <code>injd</code> <strong>S3</strong> object that
contains all the necessary information and a proper data structure to
perform further statistical analyses (e.g. calculate injury summary
statistics, visualize injury data).
</p>

<ul>
<li><p> If <code>exp_unit</code> is &quot;minutes&quot; (the default), the columns
<code>tstart_min</code> and <code>tstop_min</code> are created which specify the time
to event (injury) values, the starting and stopping time of the interval,
respectively. That is the training time in minutes, that the player has
been at risk, until an injury (or censorship) has occurred. For other
choices, <code>tstart_x</code> and <code>tstop_x</code> are also created according to
the <code>exp_unit</code> indicated (<code>x</code>, one of: <code>min</code>, <code>h</code>,
<code>match</code>, <code>minPlay</code>, <code>d</code>, <code>acd</code> or <code>s</code>). These
columns will be useful for survival analysis routines. See Note section.
</p>
</li>
<li><p> It also creates <code>days_lost</code> column based on the difference between
<code>date_recovered</code> and <code>date_injured</code> in days. And if it does exist (in
the raw data) it overrides.
</p>
</li></ul>



<h3>Note</h3>

<p>Depending on the unit of exposure, <code>tstart_x</code> and <code>tstop_x</code>
columns might have same values (e.g. if <code>exp_unit</code> = &quot;matches_num&quot; and the
player has not played any match between the corresponding period of time).
Please be aware of this before performing any survival analysis related
task.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df_injuries &lt;- prepare_inj(df_injuries0   = raw_df_injuries,
                           player         = "player_name",
                           date_injured   = "from",
                           date_recovered = "until")

df_exposures &lt;- prepare_exp(df_exposures0 = raw_df_exposures,
                            player        = "player_name",
                            date          = "year",
                            time_expo     = "minutes_played")


injd &lt;- prepare_all(data_exposures = df_exposures,
                    data_injuries  = df_injuries,
                    exp_unit = "matches_minutes")
head(injd)
class(injd)
str(injd, 1)

</code></pre>

<hr>
<h2 id='raw_df_exposures'>Minimal example of exposure data</h2><span id='topic+raw_df_exposures'></span>

<h3>Description</h3>

<p>An example of a player exposure data set that contains minimum required
exposure information as well as other player- and match-related variables. It
includes Liverpool Football Club male's first team players' exposure data,
exposure measured as (number or minutes of) matches played, over two
consecutive seasons, 2017-2018 and 2018-2019. Each row refers to
player-season. These data have been scrapped from
<a href="https://www.transfermarkt.com/">https://www.transfermarkt.com/</a> website using self-defined <strong>R</strong> code
with <code>rvest</code> and <code>xml2</code> packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raw_df_exposures
</code></pre>


<h3>Format</h3>

<p>A data frame with 42 rows corresponding to 28 football players and 16
variables: </p>

<dl>
<dt>player_name</dt><dd><p>Name of the football player (factor)</p>
</dd>
<dt>player_id</dt><dd><p>Identification number of the football player (factor)</p>
</dd>
<dt>season</dt><dd><p>Season to which this player's entry corresponds (factor)</p>
</dd>
<dt>year</dt><dd><p>Year in which each season started (numeric)</p>
</dd>
<dt>matches_played</dt><dd><p>Matches played by the player in each season (numeric)</p>
</dd>
<dt>minutes_played</dt><dd><p>Minutes played by the player in each season (numeric)</p>
</dd>
<dt>liga</dt><dd><p>Name of the ligue where the player played in each season (factor)</p>
</dd>
<dt>club_name</dt><dd><p>Name of the club to which the player belongs in each season (factor)</p>
</dd>
<dt>club_id</dt><dd><p>Identification number of the club to which the player belongs in each season (factor)</p>
</dd>
<dt>age</dt><dd><p>Age of the player in each season (numeric)</p>
</dd>
<dt>height</dt><dd><p>Height of the player in m (numeric)</p>
</dd>
<dt>place</dt><dd><p>Place of birth of each player (character)</p>
</dd>
<dt>citizenship</dt><dd><p>Citizenship of the player (factor)</p>
</dd>
<dt>position</dt><dd><p>Position of the player on the pitch (factor)</p>
</dd>
<dt>foot</dt><dd><p>Dominant leg of the player. One of both, left or right (factor)</p>
</dd>
<dt>goals</dt><dd><p>Number of goals scored by the player in that season (numeric)</p>
</dd>
<dt>assists</dt><dd><p>Number of assists provided by the player in that season (numerical)</p>
</dd>
<dt>yellows</dt><dd><p>Number of the yellow cards received by the player in that season (numeric)</p>
</dd>
<dt>reds</dt><dd><p>Number of the red cards received by the player in that season (numeric)</p>
</dd></dl>



<h3>Note</h3>

<p>This data frame is provided for illustrative purposes. We warn that
they might not be accurate, there might be a mismatch and non-completeness
with what actually occurred. As such, its use cannot be recommended for
epidemiological research (see also Hoenig et al., 2022).
</p>


<h3>Source</h3>

<p><a href="https://www.transfermarkt.com/">https://www.transfermarkt.com/</a>
</p>


<h3>References</h3>

<p>Hoenig, T., Edouard, P., Krause, M., Malhan, D., Relógio, A.,
Junge, A., &amp; Hollander, K. (2022). Analysis of more than 20,000 injuries in
European professional football by using a citizen science-based approach:
An opportunity for epidemiological research?. <em>Journal of science and
medicine in sport</em>, 25(4), 300-305.
</p>

<hr>
<h2 id='raw_df_injuries'>Minimal example of injury data</h2><span id='topic+raw_df_injuries'></span>

<h3>Description</h3>

<p>An example of an injury data set containing minimum required injury
information as well as other further injury-related variables. It includes
Liverpool Football Club male's first team players' injury data. Each row
refers to player-injury. These data have been scrapped from
<a href="https://www.transfermarkt.com/">https://www.transfermarkt.com/</a> website using self-defined <strong>R</strong> code
with <code>rvest</code> and <code>xml2</code> packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raw_df_injuries
</code></pre>


<h3>Format</h3>

<p>A data frame with 82 rows corresponding to 23 players and 11
variables: </p>

<dl>
<dt>player_name</dt><dd><p>Name of the football player (factor)</p>
</dd>
<dt>player_id</dt><dd><p>Identification number of the football player (factor)</p>
</dd>
<dt>season</dt><dd><p>Season to which this player's entry corresponds (factor)</p>
</dd>
<dt>from</dt><dd><p>Date of the injury of each data entry (Date)</p>
</dd>
<dt>until</dt><dd><p>Date of the recovery of each data entry (Date)</p>
</dd>
<dt>days_lost</dt><dd><p>Number of days lost due to injury (numeric)</p>
</dd>
<dt>games_lost</dt><dd><p>Number of matches lost due to injury (numeric)</p>
</dd>
<dt>injury</dt><dd><p>Injury specification as it appears in <a href="https://www.transfermarkt.com">https://www.transfermarkt.com</a> (character)</p>
</dd>
<dt>injury_acl</dt><dd><p>Whether it is Anterior Cruciate Ligament (ACL) injury or not (NO_ACL)</p>
</dd>
<dt>injury_type</dt><dd><p>A five level categorical variable indicating the type of
injury, whether Bone, Concussion, Ligament, Muscle or Unknown; if any, NA
otherwise (factor)</p>
</dd>
<dt>injury_severity</dt><dd><p>A four level categorical variable indicating the
severity of the injury (if any), whether Minor (&lt;7 days lost), Moderate
([7, 28) days lost), Severe ([28, 84) days lost) or
Very_severe (&gt;=84 days lost); NA otherwise (factor)</p>
</dd> </dl>



<h3>Note</h3>

<p>This data frame is provided for illustrative purposes. We warn that
they might not be accurate, there might be a mismatch and non-completeness
with what actually occurred. As such, its use cannot be recommended for
epidemiological research (see also Hoenig et al., 2022).
</p>


<h3>Source</h3>

<p><a href="https://www.transfermarkt.com/">https://www.transfermarkt.com/</a>
</p>


<h3>References</h3>

<p>Hoenig, T., Edouard, P., Krause, M., Malhan, D., Relógio, A.,
Junge, A., &amp; Hollander, K. (2022). Analysis of more than 20,000 injuries in
European professional football by using a citizen science-based approach:
An opportunity for epidemiological research?. <em>Journal of science and
medicine in sport</em>, 25(4), 300-305.
</p>

<hr>
<h2 id='season2year'>Get the year</h2><span id='topic+season2year'></span>

<h3>Description</h3>

<p>Get the year given the season.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>season2year(season)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="season2year_+3A_season">season</code></td>
<td>
<p>Character/factor specifying the season. It should follow the
pattern &quot;xxxx/yyyy&quot;, e.g. &quot;2005/2006&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Given the season, it returns the year (in <code>numeric</code>) in which the
season started.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>season &lt;- "2022/2023"
season2year(season)
</code></pre>

<hr>
<h2 id='validate_injd'>validator or injd class</h2><span id='topic+validate_injd'></span>

<h3>Description</h3>

<p>validator or injd class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_injd(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_injd_+3A_x">x</code></td>
<td>
<p>an injd class object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an error if x is not of injd class; otherwise x (invisibly)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
