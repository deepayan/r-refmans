<!DOCTYPE html><html><head><title>Help for package DataPackageR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DataPackageR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DataPackageR-package'><p>DataPackageR</p></a></li>
<li><a href='#assert_data_version'><p>Assert that a data version in a data package matches an expectation.</p></a></li>
<li><a href='#construct_yml_config'><p>Construct a datapackager.yml configuration</p></a></li>
<li><a href='#data_version'><p>Get the DataVersion for a package</p></a></li>
<li><a href='#datapackage_skeleton'><p>Create a Data Package skeleton for use with DataPackageR.</p></a></li>
<li><a href='#datapackager_object_read'><p>Read an object created in a previously run processing script.</p></a></li>
<li><a href='#DataPackageR_options'><p>Options consulted by DataPackageR</p></a></li>
<li><a href='#DataPackageR-defunct'><p>Defunct functions in package <span class="pkg">DataPackageR</span>.</p></a></li>
<li><a href='#document'><p>Build documentation for a data package using DataPackageR.</p></a></li>
<li><a href='#package_build'><p>Pre-process, document and build a data package</p></a></li>
<li><a href='#project_data_path'><p>Get DataPackageR data path</p></a></li>
<li><a href='#project_extdata_path'><p>Get DataPackageR extdata path</p></a></li>
<li><a href='#project_path'><p>Get DataPackageR Project Root Path</p></a></li>
<li><a href='#use_data_object'><p>Add a data object to a data package.</p></a></li>
<li><a href='#use_ignore'><p>Ignore specific files by git and R build.</p></a></li>
<li><a href='#use_processing_script'><p>Add a processing script to a data package.</p></a></li>
<li><a href='#use_raw_dataset'><p>Add a raw data set to inst/extdata</p></a></li>
<li><a href='#yml_find'><p>Edit DataPackageR yaml configuration</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Construct Reproducible Analytic Data Sets as R Packages</td>
</tr>
<tr>
<td>Version:</td>
<td>0.16.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A framework to help construct R data packages in a
    reproducible manner. Potentially time consuming processing of raw data
    sets into analysis ready data sets is done in a reproducible manner
    and decoupled from the usual 'R CMD build' process so that data sets
    can be processed into R objects in the data package and the data
    package can then be shared, built, and installed by others without the
    need to repeat computationally costly data processing.  The package
    maintains data provenance by turning the data processing scripts into
    package vignettes, as well as enforcing documentation and version
    checking of included data objects. Data packages can be version
    controlled on 'GitHub', and used to share data for manuscripts,
    collaboration and reproducible research.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ropensci/DataPackageR">https://github.com/ropensci/DataPackageR</a>,
<a href="https://docs.ropensci.org/DataPackageR/">https://docs.ropensci.org/DataPackageR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/DataPackageR/issues">https://github.com/ropensci/DataPackageR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>crayon, desc, digest, futile.logger, knitr, pkgbuild, pkgload,
rmarkdown, roxygen2, rprojroot, usethis, utils, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, data.tree, spelling, testthat, withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>pandoc - https://pandoc.org</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-03 03:18:59 UTC; dslager</td>
</tr>
<tr>
<td>Author:</td>
<td>Greg Finak [aut, cph] (Original author and creator of DataPackageR),
  Paul Obrecht [ctb],
  Ellis Hughes <a href="https://orcid.org/0000-0003-0637-4436"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Jimmy Fulp [ctb],
  Marie Vendettuoli <a href="https://orcid.org/0000-0001-9321-1410"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Dave Slager <a href="https://orcid.org/0000-0003-2525-2039"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb,
    cre],
  Jason Taylor [ctb],
  Kara Woo [rev] (Kara reviewed the package for rOpenSci, see
    &lt;https://github.com/ropensci/onboarding/issues/230&gt;),
  William Landau [rev] (William reviewed the package for rOpenSci, see
    &lt;https://github.com/ropensci/onboarding/issues/230&gt;)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dave Slager &lt;dslager@fredhutch.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-03 07:59:29 UTC</td>
</tr>
</table>
<hr>
<h2 id='DataPackageR-package'>DataPackageR</h2><span id='topic+DataPackageR'></span><span id='topic+DataPackageR-package'></span>

<h3>Description</h3>

<p>A framework to automate the processing, tidying and packaging of raw data into analysis-ready
data sets as R packages.
</p>


<h3>Details</h3>

<p>DataPackageR will automate running of data processing code,
storing tidied data sets in an R package, producing
data documentation stubs, tracking data object finger prints (md5 hash)
and tracking and incrementing a &quot;DataVersion&quot; string
in the DESCRIPTION file of the package when raw data or data
objects change.
Code to perform the data processing is passed to DataPackageR by the user.
The user also specifies the names of the tidy data objects to be stored,
documented and tracked in the final package. Raw data should be read from
&quot;inst/extdata&quot; but large raw data files can be read from sources external
to the package source tree.
</p>
<p>Configuration is controlled via the datapackager.yml file created at the package root.
Its properties include a list of R and Rmd files that are to be rendered / sourced and
which read data and do the actual processing.
It also includes a list of r object names created by those files. These objects
are stored in the final package and accessible via the <code>data()</code> API.
The documentation for these objects is accessible via &quot;?object-name&quot;, and md5
fingerprints of these objects are created and tracked.
</p>
<p>The Rmd and R files used to process the objects are transformed into vignettes
accessible in the final package so that the processing is fully documented.
</p>
<p>A DATADIGEST file in the package source keeps track of the data object fingerprints.
A DataVersion string is added to the package DESCRIPTION file and updated when these
objects are updated or changed on subsequent builds.
</p>
<p>Once the package is built and installed, the data objects created in the package are accessible via
the <code>data()</code> API, and
Calling <code>datapackage_skeleton()</code> and passing in R / Rmd file names, and r object names
constructs a skeleton data package source tree and an associated <code>datapackager.yml</code> file.
</p>
<p>Calling <code>package_build()</code> sets the build process in motion.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dave Slager <a href="mailto:dslager@fredhutch.org">dslager@fredhutch.org</a> (<a href="https://orcid.org/0000-0003-2525-2039">ORCID</a>) [contributor]
</p>
<p>Authors:
</p>

<ul>
<li><p> Greg Finak <a href="mailto:greg.finak@gmail.com">greg.finak@gmail.com</a> (Original author and creator of DataPackageR) [copyright holder]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Paul Obrecht [contributor]
</p>
</li>
<li><p> Ellis Hughes <a href="mailto:ellishughes@live.com">ellishughes@live.com</a> (<a href="https://orcid.org/0000-0003-0637-4436">ORCID</a>) [contributor]
</p>
</li>
<li><p> Jimmy Fulp <a href="mailto:williamjfulp@gmail.com">williamjfulp@gmail.com</a> [contributor]
</p>
</li>
<li><p> Marie Vendettuoli (<a href="https://orcid.org/0000-0001-9321-1410">ORCID</a>) [contributor]
</p>
</li>
<li><p> Jason Taylor <a href="mailto:jmtaylor@fredhutch.org">jmtaylor@fredhutch.org</a> [contributor]
</p>
</li>
<li><p> Kara Woo (Kara reviewed the package for rOpenSci, see &lt;https://github.com/ropensci/onboarding/issues/230&gt;) [reviewer]
</p>
</li>
<li><p> William Landau (William reviewed the package for rOpenSci, see &lt;https://github.com/ropensci/onboarding/issues/230&gt;) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ropensci/DataPackageR">https://github.com/ropensci/DataPackageR</a>
</p>
</li>
<li> <p><a href="https://docs.ropensci.org/DataPackageR/">https://docs.ropensci.org/DataPackageR/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/DataPackageR/issues">https://github.com/ropensci/DataPackageR/issues</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># A simple Rmd file that creates one data object
# named "tbl".
if(rmarkdown::pandoc_available()){
f &lt;- tempdir()
f &lt;- file.path(f,"foo.Rmd")
con &lt;- file(f)
writeLines("```{r}\n tbl = data.frame(1:10) \n```\n",con=con)
close(con)

# construct a data package skeleton named "MyDataPackage" and pass
# in the Rmd file name with full path, and the name of the object(s) it
# creates.

pname &lt;- basename(tempfile())
datapackage_skeleton(name=pname,
   path=tempdir(),
   force = TRUE,
   r_object_names = "tbl",
   code_files = f)

# call package_build to run the "foo.Rmd" processing and
# build a data package.
package_build(file.path(tempdir(), pname), install = FALSE)

# "install" the data package
pkgload::load_all(file.path(tempdir(), pname))

# read the data version
data_version(pname)

# list the data sets in the package.
data(package = pname)

# The data objects are in the package source under "/data"
list.files(pattern="rda", path = file.path(tempdir(),pname,"data"), full = TRUE)

# The documentation that needs to be edited is in "/R"
list.files(pattern="R", path = file.path(tempdir(), pname,"R"), full = TRUE)
readLines(list.files(pattern="R", path = file.path(tempdir(),pname,"R"), full = TRUE))
# view the documentation with
?tbl
}
</code></pre>

<hr>
<h2 id='assert_data_version'>Assert that a data version in a data package matches an expectation.</h2><span id='topic+assert_data_version'></span>

<h3>Description</h3>

<p>Assert that a data version in a data package matches an expectation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_data_version(
  data_package_name = NULL,
  version_string = NULL,
  acceptable = "equal",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assert_data_version_+3A_data_package_name">data_package_name</code></td>
<td>
<p><code>character</code> Name of the package.</p>
</td></tr>
<tr><td><code id="assert_data_version_+3A_version_string">version_string</code></td>
<td>
<p><code>character</code> Version string in &quot;x.y.z&quot; format.</p>
</td></tr>
<tr><td><code id="assert_data_version_+3A_acceptable">acceptable</code></td>
<td>
<p><code>character</code> one of &quot;equal&quot;, &quot;equal_or_greater&quot;, describing what version match is acceptable.</p>
</td></tr>
<tr><td><code id="assert_data_version_+3A_...">...</code></td>
<td>
<p>additional arguments passed to data_version (such as lib.loc)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Tests the DataVersion string in <code>data_package_name</code> against <code>version_string</code> testing the major, minor and revision portion.
</p>
<p>Tests &quot;data_package_name version equal version_string&quot; or &quot;data_package_name version equal_or_greater version_string&quot;.
</p>


<h3>Value</h3>

<p>invisible <code>logical</code> TRUE if success, otherwise stop on mismatch.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
f &lt;- tempdir()
f &lt;- file.path(f, "foo.Rmd")
con &lt;- file(f)
writeLines("```{r}\n vec = 1:10 \n```\n",con = con)
close(con)
pname &lt;- basename(tempfile())
datapackage_skeleton(name = pname,
   path=tempdir(),
   force = TRUE,
   r_object_names = "vec",
   code_files = f)
package_build(file.path(tempdir(),pname), install = FALSE)

pkgload::load_all(file.path(tempdir(),pname))

assert_data_version(data_package_name = pname,version_string = "0.1.0",acceptable = "equal")
}
</code></pre>

<hr>
<h2 id='construct_yml_config'>Construct a datapackager.yml configuration</h2><span id='topic+construct_yml_config'></span>

<h3>Description</h3>

<p>Constructs a datapackager.yml configuration object from a vector of file names and a vector of object names (all quoted).
Can be written to disk via <code>yml_write</code>.
<code>render_root</code> is set to a randomly generated named subdirectory of <code>tempdir()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>construct_yml_config(code = NULL, data = NULL, render_root = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="construct_yml_config_+3A_code">code</code></td>
<td>
<p>A vector of filenames</p>
</td></tr>
<tr><td><code id="construct_yml_config_+3A_data">data</code></td>
<td>
<p>A vector of quoted object names</p>
</td></tr>
<tr><td><code id="construct_yml_config_+3A_render_root">render_root</code></td>
<td>
<p>The root directory where the package data processing code will be rendered.
Defaults to is set to a randomly generated named subdirectory of <code>tempdir()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a datapackager.yml configuration represented as an R object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>conf &lt;- construct_yml_config(code = c('file1.rmd','file2.rmd'), data=c('object1','object2'))
tmp &lt;- normalizePath(tempdir(), winslash = "/")
yml_write(conf,path=tmp)
</code></pre>

<hr>
<h2 id='data_version'>Get the DataVersion for a package</h2><span id='topic+data_version'></span>

<h3>Description</h3>

<p>Retrieves the DataVersion of a package if available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_version(pkg, lib.loc = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data_version_+3A_pkg">pkg</code></td>
<td>
<p><code>character</code> the package name</p>
</td></tr>
<tr><td><code id="data_version_+3A_lib.loc">lib.loc</code></td>
<td>
<p><code>character</code> path to library location.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class 'package_version' and 'numeric_version' specifying the DataVersion of the package
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+packageVersion">packageVersion</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
f &lt;- tempdir()
f &lt;- file.path(f,"foo.Rmd")
con &lt;- file(f)
writeLines("```{r}\n vec = 1:10 \n```\n",con=con)
close(con)
pname &lt;- basename(tempfile())
datapackage_skeleton(name = pname,
   path=tempdir(),
   force = TRUE,
   r_object_names = "vec",
   code_files = f)

   package_build(file.path(tempdir(),pname), install = FALSE)

   pkgload::load_all(file.path(tempdir(),pname))
   data_version(pname)
}
</code></pre>

<hr>
<h2 id='datapackage_skeleton'>Create a Data Package skeleton for use with DataPackageR.</h2><span id='topic+datapackage_skeleton'></span>

<h3>Description</h3>

<p>Creates a package skeleton directory structure for use with DataPackageR.
Adds the DataVersion string to DESCRIPTION, creates the DATADIGEST file, and the data-raw directory.
Updates the Read-and-delete-me file to reflect the additional necessary steps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datapackage_skeleton(
  name = NULL,
  path = ".",
  force = FALSE,
  code_files = character(),
  r_object_names = character(),
  raw_data_dir = character(),
  dependencies = character()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datapackage_skeleton_+3A_name">name</code></td>
<td>
<p><code>character</code> name of the package to create.</p>
</td></tr>
<tr><td><code id="datapackage_skeleton_+3A_path">path</code></td>
<td>
<p>A <code>character</code> path where the package is located. See <code><a href="utils.html#topic+package.skeleton">package.skeleton</a></code></p>
</td></tr>
<tr><td><code id="datapackage_skeleton_+3A_force">force</code></td>
<td>
<p><code>logical</code> Force the package skeleton to be recreated even if it exists. see <code><a href="utils.html#topic+package.skeleton">package.skeleton</a></code></p>
</td></tr>
<tr><td><code id="datapackage_skeleton_+3A_code_files">code_files</code></td>
<td>
<p>Optional <code>character</code> vector of paths to Rmd files that process raw data
into R objects.</p>
</td></tr>
<tr><td><code id="datapackage_skeleton_+3A_r_object_names">r_object_names</code></td>
<td>
<p><code>vector</code> of quoted r object names , tables, etc. created when the files in <code>code_files</code> are run.</p>
</td></tr>
<tr><td><code id="datapackage_skeleton_+3A_raw_data_dir">raw_data_dir</code></td>
<td>
<p><code>character</code> pointing to a raw data directory. Will be moved with all its subdirectories to &quot;inst/extdata&quot;</p>
</td></tr>
<tr><td><code id="datapackage_skeleton_+3A_dependencies">dependencies</code></td>
<td>
<p><code>vector</code> of <code>character</code>, paths to R files that will be moved to &quot;data-raw&quot; but not included in the yaml config file. e.g., dependency scripts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
f &lt;- tempdir()
f &lt;- file.path(f,"foo.Rmd")
con &lt;- file(f)
writeLines("```{r}\n tbl = data.frame(1:10) \n```\n",con=con)
close(con)
pname &lt;- basename(tempfile())
datapackage_skeleton(name = pname,
   path = tempdir(),
   force = TRUE,
   r_object_names = "tbl",
   code_files = f)
   }
</code></pre>

<hr>
<h2 id='datapackager_object_read'>Read an object created in a previously run processing script.</h2><span id='topic+datapackager_object_read'></span>

<h3>Description</h3>

<p>Read an object created in a previously run processing script.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datapackager_object_read(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datapackager_object_read_+3A_name">name</code></td>
<td>
<p><code>character</code> the name of the object. Must be a
name available in the configuration objects. Other objects are not saved.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is only accessible within an R or Rmd file processed by DataPackageR.
It searches for an environment named <code>ENVS</code> within the current environment,
that holds the object with the given <code>name</code>. Such an environment is constructed and populated
with objects specified in the yaml <code>objects</code> property and passed along
to subsequent R and Rmd files as DataPackageR processes them in order.
</p>


<h3>Value</h3>

<p>An R object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if(rmarkdown::pandoc_available()){
ENVS &lt;- new.env() # ENVS would be in the environment
                  # where the data processing is run. It is
                  # handled automatically by the package.
assign("find_me", 100, ENVS) #This is done automatically by DataPackageR

find_me &lt;- datapackager_object_read("find_me") # This would appear in an Rmd processed by
                                    # DataPackageR to access the object named "find_me" created
                                    # by a previous script. "find_me" would also need to
                                    # appear in the objects property of datapackager.yml
}

</code></pre>

<hr>
<h2 id='DataPackageR_options'>Options consulted by DataPackageR</h2><span id='topic+DataPackageR_options'></span>

<h3>Description</h3>

<p>User-configurable options consulted by DataPackageR, which
provide a mechanism for setting default behaviors for various functions.
</p>
<p>If the built-in defaults don't suit you, set one or more of these options.
Typically, this is done in the <code>.Rprofile</code> startup file, which you can open
for editing with <code>usethis::edit_r_profile()</code> - this will set the specified
options for all future R sessions. The following setting is recommended to
not be prompted upon each package build for a NEWS update:
</p>
<p><code>options(DataPackageR_interact = FALSE)</code>
</p>


<h3>Options for the DataPackageR package</h3>

<p>- <code>DataPackageR_interact</code>: Upon package load, this defaults to the value of
<code>interactive()</code>, unless the option has been previously set (e.g., in
<code>.Rprofile</code>). TRUE prompts user interactively for a NEWS update on
<code>package_build()</code>. See the example above and the
<a href="https://ropensci.org/blog/2018/09/18/datapackager/">rOpenSci blog
post</a> for more details on how to set this to FALSE, which will never prompt
user for a NEWS update. FALSE is also the setting used for DataPackageR
internal package tests.
</p>
<p>- <code>DataPackageR_verbose</code>: Default upon package load is TRUE. FALSE suppresses
all console output and is currently only used for automated
unit tests of the DataPackageR package.
</p>
<p>- <code>DataPackageR_packagebuilding</code>: Default upon package load is FALSE. This
option is used internally for package operations and changing it is not
recommended.
</p>

<hr>
<h2 id='DataPackageR-defunct'>Defunct functions in package <span class="pkg">DataPackageR</span>.</h2><span id='topic+DataPackageR-defunct'></span><span id='topic+datapackage.skeleton'></span><span id='topic+dataVersion'></span><span id='topic+keepDataObjects'></span>

<h3>Description</h3>

<p>These functions are defunct and no longer supported.
Calling them will result in an error.
</p>
<p>When possible, alternatives are suggested.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datapackage.skeleton(...)

dataVersion(...)

keepDataObjects(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="DataPackageR-defunct_+3A_...">...</code></td>
<td>
<p>All arguments are now ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Defunct function. No return value.
</p>

<hr>
<h2 id='document'>Build documentation for a data package using DataPackageR.</h2><span id='topic+document'></span>

<h3>Description</h3>

<p>Build documentation for a data package using DataPackageR.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>document(path = ".", install = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="document_+3A_path">path</code></td>
<td>
<p><code>character</code> the path to the data package source root.</p>
</td></tr>
<tr><td><code id="document_+3A_install">install</code></td>
<td>
<p><code>logical</code> install the package. (default FALSE)</p>
</td></tr>
<tr><td><code id="document_+3A_...">...</code></td>
<td>
<p>additional arguments to <code>install</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Called for side effects. Returns TRUE on successful exit.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A simple Rmd file that creates one data object
# named "tbl".
if(rmarkdown::pandoc_available()){
f &lt;- tempdir()
f &lt;- file.path(f,"foo.Rmd")
con &lt;- file(f)
writeLines("```{r}\n tbl = data.frame(1:10) \n```\n",con=con)
close(con)

# construct a data package skeleton named "MyDataPackage" and pass
# in the Rmd file name with full path, and the name of the object(s) it
# creates.

pname &lt;- basename(tempfile())
datapackage_skeleton(name=pname,
   path=tempdir(),
   force = TRUE,
   r_object_names = "tbl",
   code_files = f)

# call package_build to run the "foo.Rmd" processing and
# build a data package.
package_build(file.path(tempdir(), pname), install = FALSE)
document(path = file.path(tempdir(), pname), install = FALSE)

}
</code></pre>

<hr>
<h2 id='package_build'>Pre-process, document and build a data package</h2><span id='topic+package_build'></span>

<h3>Description</h3>

<p>Combines the preprocessing, documentation, and build steps into one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_build(
  packageName = NULL,
  vignettes = FALSE,
  log = INFO,
  deps = TRUE,
  install = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="package_build_+3A_packagename">packageName</code></td>
<td>
<p><code>character</code> path to package source directory. Defaults to the current path when NULL.</p>
</td></tr>
<tr><td><code id="package_build_+3A_vignettes">vignettes</code></td>
<td>
<p><code>logical</code> specify whether to build vignettes. Default FALSE.</p>
</td></tr>
<tr><td><code id="package_build_+3A_log">log</code></td>
<td>
<p>log level <code>INFO,WARN,DEBUG,FATAL</code></p>
</td></tr>
<tr><td><code id="package_build_+3A_deps">deps</code></td>
<td>
<p><code>logical</code> should we pass data objects into subsequent scripts? Default TRUE</p>
</td></tr>
<tr><td><code id="package_build_+3A_install">install</code></td>
<td>
<p><code>logical</code> automatically install and load the package after building. Default FALSE</p>
</td></tr>
<tr><td><code id="package_build_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>install.packages</code> when <code>install=TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that if <code>package_build</code> returns an error when rendering an <code>.Rmd</code>
internally, but that same <code>.Rmd</code> can be run successfully manually using <code>rmarkdown::render</code>,
then the following code facilitates debugging. Set <code>options(error = function(){ sink(); recover()})</code>
before running <code>package_build</code> . This will enable examination of the active function calls at the time of the error,
with output printed to the console rather than <code>knitr</code>'s default sink.
After debugging, evaluate <code>options(error = NULL)</code> to revert to default error handling.
See section &quot;22.5.3 RMarkdown&quot; at <a href="https://adv-r.hadley.nz/debugging.html">https://adv-r.hadley.nz/debugging.html</a> for more details.
</p>


<h3>Value</h3>

<p>Character vector. File path of the built package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
f &lt;- tempdir()
f &lt;- file.path(f,"foo.Rmd")
con &lt;- file(f)
writeLines("```{r}\n tbl = data.frame(1:10) \n```\n",con=con)
close(con)
pname &lt;- basename(tempfile())
datapackage_skeleton(name=pname,
   path=tempdir(),
   force = TRUE,
   r_object_names = "tbl",
   code_files = f)

package_build(file.path(tempdir(),pname), install = FALSE)
}
</code></pre>

<hr>
<h2 id='project_data_path'>Get DataPackageR data path</h2><span id='topic+project_data_path'></span>

<h3>Description</h3>

<p>Get DataPackageR data path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project_data_path(file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="project_data_path_+3A_file">file</code></td>
<td>
<p><code>character</code> or <code>NULL</code> (default).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns the path to the data package data subdirectory, or
constructs a path to a file in the data subdirectory from the
file argument.
</p>


<h3>Value</h3>

<p><code>character</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
project_data_path( file = "data.rda" )
}
</code></pre>

<hr>
<h2 id='project_extdata_path'>Get DataPackageR extdata path</h2><span id='topic+project_extdata_path'></span>

<h3>Description</h3>

<p>Get DataPackageR extdata path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project_extdata_path(file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="project_extdata_path_+3A_file">file</code></td>
<td>
<p><code>character</code> or <code>NULL</code> (default).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns the path to the data package extdata subdirectory, or
constructs a path to a file in the extdata subdirectory from the
file argument.
</p>


<h3>Value</h3>

<p><code>character</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
project_extdata_path(file = "mydata.csv")
}
</code></pre>

<hr>
<h2 id='project_path'>Get DataPackageR Project Root Path</h2><span id='topic+project_path'></span>

<h3>Description</h3>

<p>Get DataPackageR Project Root Path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project_path(file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="project_path_+3A_file">file</code></td>
<td>
<p><code>character</code> or <code>NULL</code> (default).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns the path to the data package project root, or
constructs a path to a file in the project root from the
file argument.
</p>


<h3>Value</h3>

<p><code>character</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
project_path( file = "DESCRIPTION" )
}
</code></pre>

<hr>
<h2 id='use_data_object'>Add a data object to a data package.</h2><span id='topic+use_data_object'></span>

<h3>Description</h3>

<p>The data object will be added to the yml configuration file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_data_object(object_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_data_object_+3A_object_name">object_name</code></td>
<td>
<p>Name of the data object. Should be created by a processing script in data-raw. <code>character</code> vector of length 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns TRUE for success.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
myfile &lt;- tempfile()
file &lt;- system.file("extdata", "tests", "extra.Rmd",
                     package = "DataPackageR")
datapackage_skeleton(
  name = "datatest",
  path = tempdir(),
  code_files = file,
  force = TRUE,
  r_object_names = "data")
use_data_object(object_name = "newobject")
}

</code></pre>

<hr>
<h2 id='use_ignore'>Ignore specific files by git and R build.</h2><span id='topic+use_ignore'></span>

<h3>Description</h3>

<p>Ignore specific files by git and R build.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_ignore(file = NULL, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_ignore_+3A_file">file</code></td>
<td>
<p><code>character</code> File to ignore.</p>
</td></tr>
<tr><td><code id="use_ignore_+3A_path">path</code></td>
<td>
<p><code>character</code> Path to the file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns 0.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datapackage_skeleton(name="test",path = tempdir())
use_ignore("foo", ".")
</code></pre>

<hr>
<h2 id='use_processing_script'>Add a processing script to a data package.</h2><span id='topic+use_processing_script'></span>

<h3>Description</h3>

<p>The Rmd or R file or directory specified by <code>file</code> will be moved into
the data-raw directory. It will also be added to the yml configuration file.
Any existing file by that name will be overwritten when overwrite is set to TRUE
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_processing_script(
  file = NULL,
  title = NULL,
  author = NULL,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_processing_script_+3A_file">file</code></td>
<td>
<p><code>character</code> path to an existing file or name of a new R or Rmd file to create.</p>
</td></tr>
<tr><td><code id="use_processing_script_+3A_title">title</code></td>
<td>
<p><code>character</code> title of the processing script for the yaml header. Used only if file is being created.</p>
</td></tr>
<tr><td><code id="use_processing_script_+3A_author">author</code></td>
<td>
<p><code>character</code> author name for the yaml header. Used only if the file is being created.</p>
</td></tr>
<tr><td><code id="use_processing_script_+3A_overwrite">overwrite</code></td>
<td>
<p><code>logical</code> default FALSE. Overwrite existing file of the same name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns TRUE for success. Stops on failure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
myfile &lt;- tempfile()
file &lt;- system.file("extdata", "tests", "extra.Rmd",
                     package = "DataPackageR")
datapackage_skeleton(
  name = "datatest",
  path = tempdir(),
  code_files = file,
  force = TRUE,
  r_object_names = "data")
use_processing_script(file = "newScript.Rmd",
    title = "Processing a new dataset",
    author = "Y.N. Here.")
}
</code></pre>

<hr>
<h2 id='use_raw_dataset'>Add a raw data set to inst/extdata</h2><span id='topic+use_raw_dataset'></span>

<h3>Description</h3>

<p>The file or directory specified by <code>path</code> will be moved into
the inst/extdata directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_raw_dataset(path = NULL, ignore = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_raw_dataset_+3A_path">path</code></td>
<td>
<p><code>character</code> path to file or directory.</p>
</td></tr>
<tr><td><code id="use_raw_dataset_+3A_ignore">ignore</code></td>
<td>
<p><code>logical</code> whether to ignore the path or file in git and R build.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly returns TRUE for success. Stops on failure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
myfile &lt;- tempfile()
file &lt;- system.file("extdata", "tests", "extra.Rmd",
                     package = "DataPackageR")
raw_data &lt;- system.file("extdata", "tests", "raw_data",
                        package = "DataPackageR")
datapackage_skeleton(
  name = "datatest",
  path = tempdir(),
  code_files = file,
  force = TRUE,
  r_object_names = "data")
use_raw_dataset(raw_data)
}
</code></pre>

<hr>
<h2 id='yml_find'>Edit DataPackageR yaml configuration</h2><span id='topic+yml_find'></span><span id='topic+yml_add_files'></span><span id='topic+yml_disable_compile'></span><span id='topic+yml_enable_compile'></span><span id='topic+yml_add_objects'></span><span id='topic+yml_list_objects'></span><span id='topic+yml_list_files'></span><span id='topic+yml_remove_objects'></span><span id='topic+yml_remove_files'></span><span id='topic+yml_write'></span>

<h3>Description</h3>

<p>Edit a yaml configuration file via an API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>yml_find(path)

yml_add_files(config, filenames)

yml_disable_compile(config, filenames)

yml_enable_compile(config, filenames)

yml_add_objects(config, objects)

yml_list_objects(config)

yml_list_files(config)

yml_remove_objects(config, objects)

yml_remove_files(config, filenames)

yml_write(config, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="yml_find_+3A_path">path</code></td>
<td>
<p>Path to the data package source or path to write config file (for <code>yml_write</code>)</p>
</td></tr>
<tr><td><code id="yml_find_+3A_config">config</code></td>
<td>
<p>an R representation of the datapackager.yml config, returned by yml_find, or a path to the package root.</p>
</td></tr>
<tr><td><code id="yml_find_+3A_filenames">filenames</code></td>
<td>
<p>A vector of filenames.</p>
</td></tr>
<tr><td><code id="yml_find_+3A_objects">objects</code></td>
<td>
<p>A vector of R object names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Add, remove files and objects, enable or disable parsing of specific files,  list objects or files in a yaml config, or write a config back to a package.
</p>


<h3>Value</h3>

<p>A yaml configuration structured as an R nested list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(rmarkdown::pandoc_available()){
f &lt;- tempdir()
f &lt;- file.path(f,"foo.Rmd")
con &lt;- file(f)
writeLines("```{r}\n vec = 1:10\n```\n",con=con)
close(con)
pname &lt;- basename(tempfile())
datapackage_skeleton(name=pname,
   path = tempdir(),
   force = TRUE,
   r_object_names = "vec",
   code_files = f)
yml &lt;- yml_find(file.path(tempdir(),pname))
yml &lt;- yml_add_files(yml,"foo.Rmd")
yml_list_files(yml)
yml &lt;- yml_disable_compile(yml,"foo.Rmd")
yml &lt;- yml_enable_compile(yml,"foo.Rmd")
yml &lt;- yml_add_objects(yml,"data1")
yml_list_objects(yml)
yml &lt;- yml_remove_objects(yml,"data1")
yml &lt;- yml_remove_files(yml,"foo.Rmd")
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
