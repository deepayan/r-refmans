<!DOCTYPE html><html lang="en"><head><title>Help for package RLT</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RLT}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#MuteRate'><p>Muting rate</p></a></li>
<li><a href='#predict.RLT'><p>Prediction function for reinforcement learning trees</p></a></li>
<li><a href='#print.RLT'><p>Print a RLT object</p></a></li>
<li><a href='#RLT'><p>Reinforcement Learning Trees</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>3.2.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-04-28</td>
</tr>
<tr>
<td>Title:</td>
<td>Reinforcement Learning Trees</td>
</tr>
<tr>
<td>Suggests:</td>
<td>randomForest, survival</td>
</tr>
<tr>
<td>Description:</td>
<td>Random forest with a variety of additional features for regression, classification and survival analysis. 
             The features include: parallel computing with OpenMP, embedded model for selecting the splitting variable,
             based on Zhu, Zeng &amp; Kosorok (2015) &lt;<a href="https://doi.org/10.1080%2F01621459.2015.1036994">doi:10.1080/01621459.2015.1036994</a>&gt;, subject weight, variable weight, 
             tracking subjects used in each tree, etc.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/package=RLT">https://cran.r-project.org/package=RLT</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-28 09:24:48 UTC; zrq</td>
</tr>
<tr>
<td>Author:</td>
<td>Ruoqing Zhu <a href="https://orcid.org/0000-0002-0753-5716"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ruoqing Zhu &lt;teazrq@gmail.com&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-28 10:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='MuteRate'>Muting rate</h2><span id='topic+MuteRate'></span>

<h3>Description</h3>

<p>Get the muting rate based on sample size <code>N</code> and dimension <code>P</code>. This is an experimental feature. When P is too small, this is not recommended.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MuteRate(N, P, speed = NULL, info = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="MuteRate_+3A_n">N</code></td>
<td>
<p>sample size</p>
</td></tr>
<tr><td><code id="MuteRate_+3A_p">P</code></td>
<td>
<p>dimension</p>
</td></tr>
<tr><td><code id="MuteRate_+3A_speed">speed</code></td>
<td>
<p>Muting speed: moderate or aggressive</p>
</td></tr>
<tr><td><code id="MuteRate_+3A_info">info</code></td>
<td>
<p>Whether to output detailed information</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A suggested muting rate
</p>


<h3>Examples</h3>

<pre><code class='language-R'>MuteRate(500, 100, speed = "aggressive")
</code></pre>

<hr>
<h2 id='predict.RLT'>Prediction function for reinforcement learning trees</h2><span id='topic+predict.RLT'></span>

<h3>Description</h3>

<p>Predict future subjects with a fitted RLT model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'RLT'
predict(object, testx, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.RLT_+3A_object">object</code></td>
<td>
<p>A fitted RLT object</p>
</td></tr>
<tr><td><code id="predict.RLT_+3A_testx">testx</code></td>
<td>
<p>Testing data</p>
</td></tr>
<tr><td><code id="predict.RLT_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The predicted values. For survival model, it returns the fitted survival functions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x = matrix(rnorm(100), ncol = 10)
y = rowMeans(x)
fit = RLT(x, y, ntrees = 5)
predict(fit, x)
</code></pre>

<hr>
<h2 id='print.RLT'>Print a RLT object</h2><span id='topic+print.RLT'></span>

<h3>Description</h3>

<p>Print a RLT object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'RLT'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.RLT_+3A_x">x</code></td>
<td>
<p>A fitted RLT object</p>
</td></tr>
<tr><td><code id="print.RLT_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x = matrix(rnorm(100), ncol = 10)
y = rowMeans(x)
fit = RLT(x, y, ntrees = 5)
fit
</code></pre>

<hr>
<h2 id='RLT'>Reinforcement Learning Trees</h2><span id='topic+RLT'></span>

<h3>Description</h3>

<p>Fit models for regression, classification and survival analysis using reinforced splitting rules
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RLT(
  x,
  y,
  censor = NULL,
  model = "regression",
  print.summary = 0,
  use.cores = 1,
  ntrees = if (reinforcement) 100 else 500,
  mtry = max(1, as.integer(ncol(x)/3)),
  nmin = max(1, as.integer(log(nrow(x)))),
  alpha = 0.4,
  split.gen = "random",
  nsplit = 1,
  resample.prob = 0.9,
  replacement = TRUE,
  npermute = 1,
  select.method = "var",
  subject.weight = NULL,
  variable.weight = NULL,
  track.obs = FALSE,
  importance = TRUE,
  reinforcement = FALSE,
  muting = -1,
  muting.percent = if (reinforcement) MuteRate(nrow(x), ncol(x), speed = "aggressive",
    info = FALSE) else 0,
  protect = as.integer(log(ncol(x))),
  combsplit = 1,
  combsplit.th = 0.25,
  random.select = 0,
  embed.n.th = 4 * nmin,
  embed.ntrees = max(1, -atan(0.01 * (ncol(x) - 500))/pi * 100 + 50),
  embed.resample.prob = 0.8,
  embed.mtry = 1/2,
  embed.nmin = as.integer(nrow(x)^(1/3)),
  embed.split.gen = "random",
  embed.nsplit = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RLT_+3A_x">x</code></td>
<td>
<p>A matrix or data.frame for features</p>
</td></tr>
<tr><td><code id="RLT_+3A_y">y</code></td>
<td>
<p>Response variable, a numeric/factor vector or a Surv object</p>
</td></tr>
<tr><td><code id="RLT_+3A_censor">censor</code></td>
<td>
<p>The censoring indicator if survival model is used</p>
</td></tr>
<tr><td><code id="RLT_+3A_model">model</code></td>
<td>
<p>The model type: <code>regression</code>, <code>classification</code> or <code>survival</code></p>
</td></tr>
<tr><td><code id="RLT_+3A_print.summary">print.summary</code></td>
<td>
<p>Whether summary should be printed</p>
</td></tr>
<tr><td><code id="RLT_+3A_use.cores">use.cores</code></td>
<td>
<p>Number of cores</p>
</td></tr>
<tr><td><code id="RLT_+3A_ntrees">ntrees</code></td>
<td>
<p>Number of trees, <code>ntrees = 100</code> if use reinforcement, <code>ntrees = 1000</code> otherwise</p>
</td></tr>
<tr><td><code id="RLT_+3A_mtry">mtry</code></td>
<td>
<p>Number of variables used at each internal node, only for <code>reinforcement = FALSE</code></p>
</td></tr>
<tr><td><code id="RLT_+3A_nmin">nmin</code></td>
<td>
<p>Minimum number of observations required in an internal node to perform a split. Set this to twice of the desired terminal node size.</p>
</td></tr>
<tr><td><code id="RLT_+3A_alpha">alpha</code></td>
<td>
<p>Minimum number of observations required for each child node as a portion of the parent node. Must be within <code>(0, 0.5]</code>.</p>
</td></tr>
<tr><td><code id="RLT_+3A_split.gen">split.gen</code></td>
<td>
<p>How the cutting points are generated</p>
</td></tr>
<tr><td><code id="RLT_+3A_nsplit">nsplit</code></td>
<td>
<p>Number of random cutting points to compare for each variable at an internal node</p>
</td></tr>
<tr><td><code id="RLT_+3A_resample.prob">resample.prob</code></td>
<td>
<p>Proportion of in-bag samples</p>
</td></tr>
<tr><td><code id="RLT_+3A_replacement">replacement</code></td>
<td>
<p>Whether the in-bag samples are sampled with replacement</p>
</td></tr>
<tr><td><code id="RLT_+3A_npermute">npermute</code></td>
<td>
<p>Number of imputations (currently not implemented, saved for future use)</p>
</td></tr>
<tr><td><code id="RLT_+3A_select.method">select.method</code></td>
<td>
<p>Method to compare different splits</p>
</td></tr>
<tr><td><code id="RLT_+3A_subject.weight">subject.weight</code></td>
<td>
<p>Subject weights</p>
</td></tr>
<tr><td><code id="RLT_+3A_variable.weight">variable.weight</code></td>
<td>
<p>Variable weights when randomly sample <code>mtry</code> to select the splitting rule</p>
</td></tr>
<tr><td><code id="RLT_+3A_track.obs">track.obs</code></td>
<td>
<p>Track which terminal node the observation belongs to</p>
</td></tr>
<tr><td><code id="RLT_+3A_importance">importance</code></td>
<td>
<p>Should importance measures be calculated</p>
</td></tr>
<tr><td><code id="RLT_+3A_reinforcement">reinforcement</code></td>
<td>
<p>If reinforcement splitting rules should be used. There are default values for all tuning parameters under this feature.</p>
</td></tr>
<tr><td><code id="RLT_+3A_muting">muting</code></td>
<td>
<p>Muting method, <code>-1</code> for muting by proportion, positive for muting by count</p>
</td></tr>
<tr><td><code id="RLT_+3A_muting.percent">muting.percent</code></td>
<td>
<p>Only for <code>muting = -1</code> the proportion of muting</p>
</td></tr>
<tr><td><code id="RLT_+3A_protect">protect</code></td>
<td>
<p>Number of protected variables that will not be muted. These variables are adaptively selected for each tree.</p>
</td></tr>
<tr><td><code id="RLT_+3A_combsplit">combsplit</code></td>
<td>
<p>Number of variables used in a combination split. <code>combsplit = 1</code> gives regular binary split; <code>combsplit &gt; 1</code> produces linear combination splits.</p>
</td></tr>
<tr><td><code id="RLT_+3A_combsplit.th">combsplit.th</code></td>
<td>
<p>The minimum threshold (as a relative measurement compared to the best variable) for a variable to be used in the combination split.</p>
</td></tr>
<tr><td><code id="RLT_+3A_random.select">random.select</code></td>
<td>
<p>Randomly select a variable from the top variable in the linear combination as the splitting rule.</p>
</td></tr>
<tr><td><code id="RLT_+3A_embed.n.th">embed.n.th</code></td>
<td>
<p>Number of observations to stop the embedded model and choose randomly from the current protected variables.</p>
</td></tr>
<tr><td><code id="RLT_+3A_embed.ntrees">embed.ntrees</code></td>
<td>
<p>Number of embedded trees</p>
</td></tr>
<tr><td><code id="RLT_+3A_embed.resample.prob">embed.resample.prob</code></td>
<td>
<p>Proportion of in-bag samples for embedded trees</p>
</td></tr>
<tr><td><code id="RLT_+3A_embed.mtry">embed.mtry</code></td>
<td>
<p>Number of variables used for embedded trees, as proportion</p>
</td></tr>
<tr><td><code id="RLT_+3A_embed.nmin">embed.nmin</code></td>
<td>
<p>Terminal node size for embedded trees</p>
</td></tr>
<tr><td><code id="RLT_+3A_embed.split.gen">embed.split.gen</code></td>
<td>
<p>How the cutting points are generated in the embedded trees</p>
</td></tr>
<tr><td><code id="RLT_+3A_embed.nsplit">embed.nsplit</code></td>
<td>
<p>Number of random cutting points for embedded trees</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>RLT</code> object; a list consisting of
</p>
<table role = "presentation">
<tr><td><code>FittedTrees</code></td>
<td>
<p>Fitted tree structure</p>
</td></tr>
<tr><td><code>FittedSurv</code>, <code>timepoints</code></td>
<td>
<p>Terminal node survival estimation and all time points, if survival model is used</p>
</td></tr>
<tr><td><code>AllError</code></td>
<td>
<p>All out-of-bag errors, if <code>importance = TRUE</code></p>
</td></tr>
<tr><td><code>VarImp</code></td>
<td>
<p>Variable importance measures, if <code>importance = TRUE</code></p>
</td></tr>
<tr><td><code>ObsTrack</code></td>
<td>
<p>Registration of each observation in each fitted tree</p>
</td></tr>
<tr><td><code>...</code></td>
<td>
<p>All the tuning parameters are saved in the fitted <code>RLT</code> object</p>
</td></tr>
</table>


<h3>References</h3>

<p>Zhu, R., Zeng, D., &amp; Kosorok, M. R. (2015) &quot;Reinforcement Learning Trees.&quot; Journal of the American Statistical Association. 110(512), 1770-1784.
</p>
<p>Zhu, R., &amp; Kosorok, M. R. (2012). Recursively imputed survival trees. Journal of the American Statistical Association, 107(497), 331-340.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
N = 600
P = 100

X = matrix(runif(N*P), N, P)
Y = rowSums(X[,1:5]) + rnorm(N)

trainx = X[1:200,]
trainy = Y[1:200]
testx = X[-c(1:200),]
testy = Y[-c(1:200)]

# Regular ensemble trees (Extremely Randomized Trees, Geurts, et. al., 2006)

RLT.fit = RLT(trainx, trainy, model = "regression", use.cores = 6)

barplot(RLT.fit$VarImp)
RLT.pred = predict(RLT.fit, testx)
mean((RLT.pred$Prediction - testy)^2)

# Reinforcement Learning Trees, using an embedded model to find the splitting rule

Mark0 = proc.time()
RLT.fit = RLT(trainx, trainy, model = "regression", use.cores = 6, ntrees = 100,
              importance = TRUE, reinforcement = TRUE, combsplit = 3, embed.ntrees = 25)
proc.time() - Mark0

barplot(RLT.fit$VarImp)
RLT.pred = predict(RLT.fit, testx)
mean((RLT.pred$Prediction - testy)^2)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
