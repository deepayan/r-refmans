<!DOCTYPE html><html><head><title>Help for package precisely</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {precisely}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#launch_precisely_app'><p>Launch precisely Shiny app</p></a></li>
<li><a href='#map_precisely'><p>Calculate with precisely functions across values</p></a></li>
<li><a href='#n_risk_difference'><p>Estimate sample size based on precision of a measure</p></a></li>
<li><a href='#plot_sample_size'><p>Plot precisely</p></a></li>
<li><a href='#precision_risk_difference'><p>Estimate precision of a measure based on sample size</p></a></li>
<li><a href='#theme_precisely'><p>Minimalist themes for precision plots</p></a></li>
<li><a href='#upper_risk_difference'><p>Estimate sample size based on probability that upper limit is below level of</p>
concern.</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimate Sample Size Based on Precision Rather than Power</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Malcolm Barrett &lt;malcolmbarrett@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimate sample size based on precision rather than power.
    'precisely' is a study planning tool to calculate sample size based on
    precision. Power calculations are focused on whether or not an
    estimate will be statistically significant; calculations of precision
    are based on the same principles as power calculation but turn the
    focus to the width of the confidence interval. 'precisely' is based on
    the work of 'Rothman and Greenland' (2018).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/malcolmbarrett/precisely">https://github.com/malcolmbarrett/precisely</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/malcolmbarrett/precisely/issues">https://github.com/malcolmbarrett/precisely/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, magrittr, purrr, rlang, shiny,
shinycssloaders, shinythemes, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, ggrepel, knitr, rmarkdown, spelling, testthat, vdiffr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-10 01:18:50 UTC; malcolmbarrett</td>
</tr>
<tr>
<td>Author:</td>
<td>Malcolm Barrett <a href="https://orcid.org/0000-0003-0299-5825"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-10 04:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='launch_precisely_app'>Launch precisely Shiny app</h2><span id='topic+launch_precisely_app'></span>

<h3>Description</h3>

<p><code>launch_precisely_app()</code> launches a Shiny app to calculate and plot
precision, sample size, and upper limit calculations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>launch_precisely_app()
</code></pre>

<hr>
<h2 id='map_precisely'>Calculate with precisely functions across values</h2><span id='topic+map_precisely'></span>

<h3>Description</h3>

<p><code>map_precisely()</code> is a wrapper around <code><a href="tidyr.html#topic+expand">tidyr::crossing()</a></code> and
<code><a href="purrr.html#topic+map2">purrr::pmap_dfr()</a></code> to give a set of values to any of the calculation
functions in precisely. All possible combinations of the values are passed to
the function, returning a tibble where each row is the result for each
combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_precisely(.f, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_precisely_+3A_.f">.f</code></td>
<td>
<p>a function in precisely</p>
</td></tr>
<tr><td><code id="map_precisely_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>.f</code>. All possible combinations of argument
values are given to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>map_precisely(
  n_risk_difference,
  precision = seq(from = .02, to = .20, by = .005),
  exposed = c(.2, .4),
  unexposed = c(.1, .3),
  group_ratio = 1
)

</code></pre>

<hr>
<h2 id='n_risk_difference'>Estimate sample size based on precision of a measure</h2><span id='topic+n_risk_difference'></span><span id='topic+n_risk_ratio'></span><span id='topic+n_rate_difference'></span><span id='topic+n_rate_ratio'></span><span id='topic+n_odds_ratio'></span>

<h3>Description</h3>

<p>These functions calculate the sample size needed to estimate a measure with a
certain precision. For ratio measures, like the risk ratio, rate ratio, and
odds ratio, this is the ratio of the upper to lower limit of the confidence
interval. For difference measures, like the risk difference or rate
difference, this is the absolute width of the confidence interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>n_risk_difference(precision, exposed, unexposed, group_ratio, ci = 0.95)

n_risk_ratio(precision, exposed, unexposed, group_ratio, ci = 0.95)

n_rate_difference(precision, exposed, unexposed, group_ratio, ci = 0.95)

n_rate_ratio(precision, exposed, unexposed, group_ratio, ci = 0.95)

n_odds_ratio(
  precision,
  exposed_cases,
  exposed_controls,
  group_ratio,
  ci = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="n_risk_difference_+3A_precision">precision</code></td>
<td>
<p>For differences, the width of the CI. For ratios, the ratio
of the upper to lower CI.</p>
</td></tr>
<tr><td><code id="n_risk_difference_+3A_exposed">exposed</code></td>
<td>
<p>The risk or rate among the exposed cohort.</p>
</td></tr>
<tr><td><code id="n_risk_difference_+3A_unexposed">unexposed</code></td>
<td>
<p>The risk or rate among the unexposed cohort.</p>
</td></tr>
<tr><td><code id="n_risk_difference_+3A_group_ratio">group_ratio</code></td>
<td>
<p>In cohort studies, the ratio of the unexposed to the
exposed. In case-control studies, the ratio of the controls to the cases.</p>
</td></tr>
<tr><td><code id="n_risk_difference_+3A_ci">ci</code></td>
<td>
<p>The confidence interval as a probability or percent. Default is
.95.</p>
</td></tr>
<tr><td><code id="n_risk_difference_+3A_exposed_cases">exposed_cases</code></td>
<td>
<p>The proportion of exposed cases.</p>
</td></tr>
<tr><td><code id="n_risk_difference_+3A_exposed_controls">exposed_controls</code></td>
<td>
<p>The proportion of exposed controls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with sample size, effect measure, and precision
</p>


<h3>References</h3>

<p>Rothman, K.J. and Greenland, S. 2018.
<a href="https://pubmed.ncbi.nlm.nih.gov/29912015/">Planning Study Size Based on Precision Rather Than Power</a>. 29(5):599-603.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# From Rothman and Greenland 2018

n_risk_difference(
  precision = .08,
  exposed = .4,
  unexposed = .3,
  group_ratio = 3,
  ci = .90
)

n_risk_ratio(
  precision = 2,
  exposed = .4,
  unexposed = .3,
  group_ratio = 3
)

</code></pre>

<hr>
<h2 id='plot_sample_size'>Plot precisely</h2><span id='topic+plot_sample_size'></span><span id='topic+plot_precision'></span><span id='topic+plot_upper_limit'></span>

<h3>Description</h3>

<p>Simple line plots for the output of <code><a href="#topic+map_precisely">map_precisely()</a></code>. Use
<code><a href="dplyr.html#topic+group_by">dplyr::group_by()</a></code> to create multiple lines on the plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_sample_size(.df, xlab = "Sample Size", ylab = "Precision", line_size = 1)

plot_precision(.df, xlab = "Precision", ylab = "Sample Size", line_size = 1)

plot_upper_limit(
  .df,
  xlab = "Sample Size",
  ylab = "Upper Limit",
  line_size = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_sample_size_+3A_.df">.df</code></td>
<td>
<p>a data frame with values to plot, possibly from <code><a href="#topic+map_precisely">map_precisely()</a></code>.</p>
</td></tr>
<tr><td><code id="plot_sample_size_+3A_xlab">xlab</code></td>
<td>
<p>Label for the x-axis.</p>
</td></tr>
<tr><td><code id="plot_sample_size_+3A_ylab">ylab</code></td>
<td>
<p>Label for the y-axis.</p>
</td></tr>
<tr><td><code id="plot_sample_size_+3A_line_size">line_size</code></td>
<td>
<p>The width of the line. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(ggplot2)

map_precisely(
  n_risk_difference,
  precision = seq(from = .02, to = .20, by = .005),
  exposed = .4,
  unexposed = .3,
  group_ratio = 1
 ) %&gt;%
  plot_sample_size()

map_precisely(
  precision_odds_ratio,
  n_cases = seq(from = 500, to = 1000, by = 10),
  exposed_cases = .6,
  exposed_controls = .4,
  group_ratio = 1:4
) %&gt;%
  group_by("Control/Case Ratio" = factor(group_ratio)) %&gt;%
  plot_precision()

map_precisely(
  upper_rate_ratio,
  upper_limit = seq(1.5, 2.5, by = .1),
  prob = seq(.50, .95, by = .05),
  exposed = .01,
  unexposed = .01,
  group_ratio = 1:4
 ) %&gt;%
  group_by("Probability" = factor(prob)) %&gt;%
  plot_upper_limit(line_size = 1) +
    scale_color_viridis_d() +
    theme_precisely() +
    theme(legend.position = "right",
          strip.text = element_text(margin = margin(b = 5), hjust = 0)) +
    facet_wrap(~ group_ratio,
               labeller = as_labeller(function(x) paste("Unexposed/Exposed:", x)))


</code></pre>

<hr>
<h2 id='precision_risk_difference'>Estimate precision of a measure based on sample size</h2><span id='topic+precision_risk_difference'></span><span id='topic+precision_risk_ratio'></span><span id='topic+precision_rate_difference'></span><span id='topic+precision_rate_ratio'></span><span id='topic+precision_odds_ratio'></span>

<h3>Description</h3>

<p>These functions calculate the precision of an estimate given a certain sample
size. For ratio measures, like the risk ratio, rate ratio, and odds ratio,
this is the ratio of the upper to lower limit of the confidence interval. For
difference measures, like the risk difference or rate difference, this is the
absolute width of the confidence interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>precision_risk_difference(
  n_exposed,
  exposed,
  unexposed,
  group_ratio,
  ci = 0.95
)

precision_risk_ratio(n_exposed, exposed, unexposed, group_ratio, ci = 0.95)

precision_rate_difference(
  n_exposed,
  exposed,
  unexposed,
  group_ratio,
  ci = 0.95
)

precision_rate_ratio(n_exposed, exposed, unexposed, group_ratio, ci = 0.95)

precision_odds_ratio(
  n_cases,
  exposed_cases,
  exposed_controls,
  group_ratio,
  ci = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="precision_risk_difference_+3A_n_exposed">n_exposed</code>, <code id="precision_risk_difference_+3A_n_cases">n_cases</code></td>
<td>
<p>In cohort studies, the number of exposed
participants. In case-control studies, the number of cases.</p>
</td></tr>
<tr><td><code id="precision_risk_difference_+3A_exposed">exposed</code></td>
<td>
<p>The risk or rate among the exposed cohort.</p>
</td></tr>
<tr><td><code id="precision_risk_difference_+3A_unexposed">unexposed</code></td>
<td>
<p>The risk or rate among the unexposed cohort.</p>
</td></tr>
<tr><td><code id="precision_risk_difference_+3A_group_ratio">group_ratio</code></td>
<td>
<p>In cohort studies, the ratio of the unexposed to the
exposed. In case-control studies, the ratio of the controls to the cases.</p>
</td></tr>
<tr><td><code id="precision_risk_difference_+3A_ci">ci</code></td>
<td>
<p>The confidence interval as a probability or percent. Default is
.95.</p>
</td></tr>
<tr><td><code id="precision_risk_difference_+3A_exposed_cases">exposed_cases</code></td>
<td>
<p>The proportion of exposed cases.</p>
</td></tr>
<tr><td><code id="precision_risk_difference_+3A_exposed_controls">exposed_controls</code></td>
<td>
<p>The proportion of exposed controls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with precision, effect measure, and sample size
</p>


<h3>References</h3>

<p>Rothman, K.J. and Greenland, S. 2018.
<a href="https://pubmed.ncbi.nlm.nih.gov/29912015/">Planning Study Size Based on Precision Rather Than Power</a>. 29(5):599-603.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# From Rothman and Greenland 2018

precision_odds_ratio(
  n_cases = 500,
  exposed_cases = .6,
  exposed_controls = .4,
  group_ratio = 2
)

</code></pre>

<hr>
<h2 id='theme_precisely'>Minimalist themes for precision plots</h2><span id='topic+theme_precisely'></span>

<h3>Description</h3>

<p>Minimalist themes for precision plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_precisely(base_size = 14, base_family = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="theme_precisely_+3A_base_size">base_size</code></td>
<td>
<p>base font size, given in pts.</p>
</td></tr>
<tr><td><code id="theme_precisely_+3A_base_family">base_family</code></td>
<td>
<p>base font family</p>
</td></tr>
<tr><td><code id="theme_precisely_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code><a href="ggplot2.html#topic+theme">ggplot2::theme()</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='upper_risk_difference'>Estimate sample size based on probability that upper limit is below level of
concern.</h2><span id='topic+upper_risk_difference'></span><span id='topic+upper_risk_ratio'></span><span id='topic+upper_rate_difference'></span><span id='topic+upper_rate_ratio'></span><span id='topic+upper_odds_ratio'></span>

<h3>Description</h3>

<p>These functions calculate sample size based on probability that upper limit
is below level of concern. The idea behind this approach is to use precision
to provide support for the absence of effect. These functions calculate
sample size where, when the true effect is null, the upper limit of the
confidence interval of the estimate of interest has a probability of being at
or under a specified level of concern.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>upper_risk_difference(
  upper_limit,
  prob,
  exposed,
  unexposed,
  group_ratio,
  ci = 0.95
)

upper_risk_ratio(upper_limit, prob, exposed, unexposed, group_ratio, ci = 0.95)

upper_rate_difference(
  upper_limit,
  prob,
  exposed,
  unexposed,
  group_ratio,
  ci = 0.95
)

upper_rate_ratio(upper_limit, prob, exposed, unexposed, group_ratio, ci = 0.95)

upper_odds_ratio(
  upper_limit,
  prob,
  exposed_cases,
  exposed_controls,
  group_ratio,
  ci = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="upper_risk_difference_+3A_upper_limit">upper_limit</code></td>
<td>
<p>The upper limit of the confidence interval, a level of
concern.</p>
</td></tr>
<tr><td><code id="upper_risk_difference_+3A_prob">prob</code></td>
<td>
<p>The probability of the estimated upper limit of the confidence
interval being at or below the level of concern.</p>
</td></tr>
<tr><td><code id="upper_risk_difference_+3A_exposed">exposed</code></td>
<td>
<p>The risk or rate among the exposed cohort.</p>
</td></tr>
<tr><td><code id="upper_risk_difference_+3A_unexposed">unexposed</code></td>
<td>
<p>The risk or rate among the unexposed cohort.</p>
</td></tr>
<tr><td><code id="upper_risk_difference_+3A_group_ratio">group_ratio</code></td>
<td>
<p>In cohort studies, the ratio of the unexposed to the
exposed. In case-control studies, the ratio of the controls to the cases.</p>
</td></tr>
<tr><td><code id="upper_risk_difference_+3A_ci">ci</code></td>
<td>
<p>The confidence interval as a probability or percent. Default is
.95.</p>
</td></tr>
<tr><td><code id="upper_risk_difference_+3A_exposed_cases">exposed_cases</code></td>
<td>
<p>The proportion of exposed cases.</p>
</td></tr>
<tr><td><code id="upper_risk_difference_+3A_exposed_controls">exposed_controls</code></td>
<td>
<p>The proportion of exposed controls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble with sample size, effect measure, upper limit, and
probability
</p>


<h3>References</h3>

<p>Rothman, K.J. and Greenland, S. 2018.
<a href="https://pubmed.ncbi.nlm.nih.gov/29912015/">Planning Study Size Based on Precision Rather Than Power</a>. 29(5):599-603.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# From Rothman and Greenland 2018

upper_rate_ratio(
  upper_limit = 2,
  prob = .90,
  exposed = .01,
  unexposed = .01,
  group_ratio = 1
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
