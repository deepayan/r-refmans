<!DOCTYPE html><html><head><title>Help for package options</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {options}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as_params'><p>Produce <code style="white-space: pre;">&#8288;@param&#8288;</code> roxygen sections for options</p></a></li>
<li><a href='#as_roxygen_docs'><p>Generate Standalone <code>?options</code> Documentation</p></a></li>
<li><a href='#assert_naming_fn_signature'><p>Assert signature for naming functions</p></a></li>
<li><a href='#defining_options'><p>Defining Options</p></a></li>
<li><a href='#envvar_fns'><p>Generator functions for environment variable processors</p></a></li>
<li><a href='#err'><p>Raise a package error</p></a></li>
<li><a href='#format_field'><p>Format a possible option source</p></a></li>
<li><a href='#format_value'><p>Format value shorthands for command line display</p></a></li>
<li><a href='#format.option_spec'><p>Format an option specification</p></a></li>
<li><a href='#format.options_env'><p>Format an options environment</p></a></li>
<li><a href='#format.options_list'><p>Format an options list</p></a></li>
<li><a href='#naming'><p>Define Naming Conventions</p></a></li>
<li><a href='#naming_formats'><p>Naming Convention Formatters</p></a></li>
<li><a href='#opt'><p>Inspecting Option Values</p></a></li>
<li><a href='#option_spec'><p>Specify Option</p></a></li>
<li><a href='#options_env'><p>Options Environment Class</p></a></li>
<li><a href='#options_fmts'><p>Optional Crayon Handling</p></a></li>
<li><a href='#pkgname'><p>Grab package name, at runtime</p></a></li>
<li><a href='#reflow_option_desc'><p>Reflow multiline strings</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Simple, Consistent Package Options</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Simple mechanisms for defining and interpreting package options. Provides
    helpers for interpreting environment variables, global options, defining
    default values and more.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://dgkf.github.io/options/">https://dgkf.github.io/options/</a>, <a href="https://github.com/dgkf/options">https://github.com/dgkf/options</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dgkf/options/issues">https://github.com/dgkf/options/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>crayon, knitr, rmarkdown, roxygen2, rcmdcheck, pkgload,
withr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>pkgdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-29 02:45:08 UTC; root</td>
</tr>
<tr>
<td>Author:</td>
<td>Doug Kelkhoff [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Doug Kelkhoff &lt;doug.kelkhoff@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-29 11:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='as_params'>Produce <code style="white-space: pre;">&#8288;@param&#8288;</code> roxygen sections for options</h2><span id='topic+as_params'></span>

<h3>Description</h3>

<p>Generate parameter documentation based on option behaviors. Especially useful
for ubiquitous function parameters that default to option values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_params(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_params_+3A_...">...</code></td>
<td>
<p>Character values of options to use. If named arguments are
provided, the option description provided as the value is mapped to a
parameter of the argument's name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of <code>roxygen2</code> <code style="white-space: pre;">&#8288;@param&#8288;</code> tags
</p>


<h3>See Also</h3>

<p>Other options_roxygen2: 
<code><a href="#topic+as_roxygen_docs">as_roxygen_docs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>options::define_options(
  "whether messages should be written softly, or in all-caps",
  quiet = TRUE
)

#' Hello, World
#'
#' @eval options::as_params("softly" = "quiet")
#'
hello &lt;- function(who, softly = opt("quiet")) {
  say_what &lt;- paste0("Hello, ", who, "!")
  if (quiet) say_what else toupper(say_what)
}

</code></pre>

<hr>
<h2 id='as_roxygen_docs'>Generate Standalone <code>?options</code> Documentation</h2><span id='topic+as_roxygen_docs'></span>

<h3>Description</h3>

<p>Produce a comprehensive documentation page outlining all your defined
options' behaviors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_roxygen_docs(
  title = paste(pkgname(env), "Options"),
  desc = default_options_rd_desc(),
  env = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_roxygen_docs_+3A_title">title</code></td>
<td>
<p>An optional, customized title (defaults to &quot;Options&quot;)</p>
</td></tr>
<tr><td><code id="as_roxygen_docs_+3A_desc">desc</code></td>
<td>
<p>An optional, customized description of behaviors</p>
</td></tr>
<tr><td><code id="as_roxygen_docs_+3A_env">env</code></td>
<td>
<p>An environemnt in which to find the associated options object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of <code>roxygen2</code> tag segments
</p>


<h3>See Also</h3>

<p>Other options_roxygen2: 
<code><a href="#topic+as_params">as_params</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' @eval options::as_roxygen_docs()
NULL

</code></pre>

<hr>
<h2 id='assert_naming_fn_signature'>Assert signature for naming functions</h2><span id='topic+assert_naming_fn_signature'></span>

<h3>Description</h3>

<p>Assert signature for naming functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_naming_fn_signature(fn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assert_naming_fn_signature_+3A_fn">fn</code></td>
<td>
<p>A function to inspect</p>
</td></tr>
</table>

<hr>
<h2 id='defining_options'>Defining Options</h2><span id='topic+defining_options'></span><span id='topic+define_option'></span><span id='topic+define_options'></span>

<h3>Description</h3>

<p>Define options which can be used throughout your package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_option(option, ...)

define_options(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defining_options_+3A_option">option</code></td>
<td>
<p>An option name to use</p>
</td></tr>
<tr><td><code id="defining_options_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="#topic+option_spec">option_spec()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>At their simplest, defining options lets you refer to a global option using a
shorthand option name throughout your package, with the added benefit of
looking for configurations in global options and environment variables.
</p>


<h3>Value</h3>

<p>the package options environment
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>define_option()</code>: Define an option. Unlike <code><a href="#topic+define_options">define_options()</a></code>, this function allows detailed
customization of all option behaviors. Accepts either an <code><a href="#topic+option_spec">option_spec()</a></code>
object, or an option named followed by arguments to provide to
<code><a href="#topic+option_spec">option_spec()</a></code>.
</p>
</li>
<li> <p><code>define_options()</code>: Define multiple options. This function provides a shorthand syntax for
succinctly defining many options. Arguments are defined in groups, each
starting with an unnamed description argument. For more details see Section
<em>Non-Standard Evaluation</em>.
</p>
</li></ul>


<h3>Non-Standard Evaluation</h3>

<p><code>define_options()</code> accepts arguments in a <em>non-standard</em>
way, as groups of arguments which each are used to specify an option (See
<code>options_spec()</code>). Groups of arguments must start with an unnamed argument,
which provides the description for the argument, followed immediately by a
named argument providing the name of option and default value, followed by
any additional arguments to provie to <code>options_spec()</code>.
</p>
<p>The environment in which options are defined is always assumed to be the
parent environment. If you'd prefer to specify options in a different
environment, this is best done using <code>define_option()</code> or
<code style="white-space: pre;">&#8288;with(&lt;env&gt;, define_options(...))&#8288;</code>.
</p>
<p>Although <code>define_options()</code> provides all the functionality of
<code>define_option()</code> in a succinct shorthand, it is only recommended in cases
where the overwhelming majority of your options leverage default behaviors.
It is encouraged to use <code>define_option()</code> if you repeatedly need more
involved definitions to minimize non-standard evaluation bugs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>define_options(
  "Whether execution should emit console output",
  quiet = FALSE,

  "Whether to use detailed console output (showcasing additional
  configuration parameters)",
  verbose = TRUE,
  envvar_fn = envvar_is_true()
)

define_option(
  "deprecations",
  desc = "Whether deprecation warnings should be suppressed automatically",
  default = FALSE,
  option_name = "MypackageDeprecations",
  envvar_name = "MYPACKAGE_ENVVARS_DEPRECATIONS"
)

</code></pre>

<hr>
<h2 id='envvar_fns'>Generator functions for environment variable processors</h2><span id='topic+envvar_fns'></span><span id='topic+envvar_is'></span><span id='topic+envvar_is.NULL'></span><span id='topic+envvar_is.character'></span><span id='topic+envvar_is.numeric'></span><span id='topic+envvar_is.logical'></span><span id='topic+envvar_eval'></span><span id='topic+envvar_eval_or_raw'></span><span id='topic+envvar_is_one_of'></span><span id='topic+envvar_choice_of'></span><span id='topic+envvar_is_true'></span><span id='topic+envvar_is_false'></span><span id='topic+envvar_is_set'></span><span id='topic+envvar_str_split'></span>

<h3>Description</h3>

<p>These functions return environment variable processor functions. Arguments to
them are used to specify behaviors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>envvar_is(value, ...)

## S3 method for class ''NULL''
envvar_is(value, case_sensitive = FALSE, ...)

## S3 method for class 'character'
envvar_is(value, case_sensitive = FALSE, ...)

## S3 method for class 'numeric'
envvar_is(value, ...)

## S3 method for class 'logical'
envvar_is(value, case_sensitive = FALSE, ...)

envvar_eval(...)

envvar_eval_or_raw(...)

envvar_is_one_of(values, ...)

envvar_choice_of(values, default = NULL, ...)

envvar_is_true(...)

envvar_is_false(...)

envvar_is_set(...)

envvar_str_split(delim = ";", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="envvar_fns_+3A_value">value</code></td>
<td>
<p>A value to test against</p>
</td></tr>
<tr><td><code id="envvar_fns_+3A_...">...</code></td>
<td>
<p>Other arguments unused</p>
</td></tr>
<tr><td><code id="envvar_fns_+3A_case_sensitive">case_sensitive</code></td>
<td>
<p>A logical value indicating whether string comparisons
should be case-sensitive.</p>
</td></tr>
<tr><td><code id="envvar_fns_+3A_values">values</code></td>
<td>
<p>A list or vector of values to match</p>
</td></tr>
<tr><td><code id="envvar_fns_+3A_default">default</code></td>
<td>
<p>A default value used when a value cannot be coerced from the
environment variable value</p>
</td></tr>
<tr><td><code id="envvar_fns_+3A_delim">delim</code></td>
<td>
<p>A character value to use as a delimiter to use when splitting
the environment variable value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A function to be used for processing an environment variable value
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>envvar_is()</code>: Test for equality with handlers for most atomic R types, performing sensible
interpretation of environment variable values.
</p>
</li>
<li> <p><code>envvar_is(`NULL`)</code>: environment variable has value <code>"null"</code>
</p>
</li>
<li> <p><code>envvar_is(character)</code>: environment variable is equal to string <code>value</code>
</p>
</li>
<li> <p><code>envvar_is(numeric)</code>: environment variable is equal to string representation of numeric <code>value</code>
</p>
</li>
<li> <p><code>envvar_is(logical)</code>: environment variable is equal to string representation of logical <code>value</code>
</p>
</li>
<li> <p><code>envvar_eval()</code>: Parse the environment variable value as R code and and evaluate it to
produce a return value, emitting an error if the expression fails to parse
or evaluate. This option is a sensible default for most R-specific
environment variables, but may fail for string literals, and meaningful
values that don't conform to R's syntax like <code style="white-space: pre;">&#8288;"true&#8288;</code>&quot; (see
<code><a href="#topic+envvar_is_true">envvar_is_true()</a></code>), <code>"false"</code> (see <code><a href="#topic+envvar_is_false">envvar_is_false()</a></code>) or <code>"null"</code>.
</p>
</li>
<li> <p><code>envvar_eval_or_raw()</code>: Parse the environment variable value as R code and and evaluate it to
produce a return value, or falling back to the raw value as a string if an
error occurs.
</p>
</li>
<li> <p><code>envvar_is_one_of()</code>: For meaningful string comparisons, check whether the environment variable is
equal to some meaningful string. Optionally with case-sensitivity.
</p>
</li>
<li> <p><code>envvar_choice_of()</code>: Check whether environment variable can be coerced to match one of <code>values</code>,
returning the value if it matches or <code>default</code> otherwise.
</p>
</li>
<li> <p><code>envvar_is_true()</code>: Test whether the environment variable is &quot;truthy&quot;, that is whether it is
case-insensitive <code>"true"</code> or <code>1</code>
</p>
</li>
<li> <p><code>envvar_is_false()</code>: Test whether the environment variable is &quot;falsy&quot;, that is whether it is
case-insensitive <code>"false"</code> or <code>0</code>
</p>
</li>
<li> <p><code>envvar_is_set()</code>: Test whether the environment variable is set. This is somewhat
operating-system dependent, as not all operating systems can distinguish
between an empty string as a value and an unset environment variable. For
details see <code><a href="base.html#topic+Sys.getenv">Sys.getenv()</a></code>'s Details about its <code>unset</code> parameter.
</p>
</li>
<li> <p><code>envvar_str_split()</code>: Interpret the environment variable as a delimited list of strings, such as
<code>PATH</code> variables.
</p>
</li></ul>

<hr>
<h2 id='err'>Raise a package error</h2><span id='topic+err'></span>

<h3>Description</h3>

<p>Raise a package error
</p>


<h3>Usage</h3>

<pre><code class='language-R'>err(title, issues = list(), which = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="err_+3A_title">title</code></td>
<td>
<p>A title for the error</p>
</td></tr>
<tr><td><code id="err_+3A_issues">issues</code></td>
<td>
<p>An optionally named list of issues to associate with the error.
When named, the issues are first sorted by issue name.</p>
</td></tr>
<tr><td><code id="err_+3A_which">which</code></td>
<td>
<p>A relative frame to use to build the associated call</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An options_error class
</p>

<hr>
<h2 id='format_field'>Format a possible option source</h2><span id='topic+format_field'></span>

<h3>Description</h3>

<p>Format a possible option source
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_field(field, active, value, fmt = options_fmts())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_field_+3A_field">field</code></td>
<td>
<p>The field for the option source</p>
</td></tr>
<tr><td><code id="format_field_+3A_active">active</code></td>
<td>
<p>Whether this source is the source of the option's value</p>
</td></tr>
<tr><td><code id="format_field_+3A_value">value</code></td>
<td>
<p>The value from this source that was used</p>
</td></tr>
<tr><td><code id="format_field_+3A_fmt">fmt</code></td>
<td>
<p>A list of formats to use for formatting individual text elements</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted character value
</p>

<hr>
<h2 id='format_value'>Format value shorthands for command line display</h2><span id='topic+format_value'></span><span id='topic+format_value.S3'></span><span id='topic+format_value.S4'></span><span id='topic+format_value.function'></span><span id='topic+format_value.environment'></span><span id='topic+format_value.expression'></span><span id='topic+format_value.quote'></span><span id='topic+format_value.call'></span><span id='topic+format_value.name'></span><span id='topic+format_value.symbol'></span>

<h3>Description</h3>

<p>Format value shorthands for command line display
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_value(x, ..., fmt = NULL)

## S3 method for class 'S3'
format_value(x, ..., fmt = options_fmts())

## S3 method for class 'S4'
format_value(x, ..., fmt = options_fmts())

## S3 method for class ''function''
format_value(x, ..., fmt = options_fmts())

## S3 method for class 'environment'
format_value(x, ..., fmt = options_fmts())

## S3 method for class 'expression'
format_value(x, ..., fmt = options_fmts())

## S3 method for class 'quote'
format_value(x, ..., fmt = options_fmts())

## S3 method for class 'call'
format_value(x, ..., fmt = options_fmts())

## S3 method for class 'name'
format_value(x, ..., fmt = options_fmts())

## S3 method for class 'symbol'
format_value(x, ..., fmt = options_fmts())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_value_+3A_x">x</code></td>
<td>
<p>An R object to display, attempting to show the actual value, but
falling back to shorthands for more complex data types.</p>
</td></tr>
<tr><td><code id="format_value_+3A_...">...</code></td>
<td>
<p>Additional arguments unused</p>
</td></tr>
<tr><td><code id="format_value_+3A_fmt">fmt</code></td>
<td>
<p>A list of formats to use for formatting individual text elements</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted character value
</p>

<hr>
<h2 id='format.option_spec'>Format an option specification</h2><span id='topic+format.option_spec'></span>

<h3>Description</h3>

<p>Format an option specification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'option_spec'
format(x, value, ..., fmt = options_fmts())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format.option_spec_+3A_x">x</code></td>
<td>
<p>An option specification (&quot;option_spec&quot;) class object</p>
</td></tr>
<tr><td><code id="format.option_spec_+3A_value">value</code></td>
<td>
<p>Optionally, the current value to display for the option being
specified</p>
</td></tr>
<tr><td><code id="format.option_spec_+3A_...">...</code></td>
<td>
<p>Additional arguments unused</p>
</td></tr>
<tr><td><code id="format.option_spec_+3A_fmt">fmt</code></td>
<td>
<p>A list of formats to use for formatting individual text elements</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted character value
</p>

<hr>
<h2 id='format.options_env'>Format an options environment</h2><span id='topic+format.options_env'></span>

<h3>Description</h3>

<p>Format an options environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'options_env'
format(x, ..., fmt = options_fmts())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format.options_env_+3A_x">x</code></td>
<td>
<p>An option environment (&quot;option_env&quot;) class object</p>
</td></tr>
<tr><td><code id="format.options_env_+3A_...">...</code></td>
<td>
<p>Additional arguments unused</p>
</td></tr>
<tr><td><code id="format.options_env_+3A_fmt">fmt</code></td>
<td>
<p>A list of formats to use for formatting individual text elements</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted character value
</p>

<hr>
<h2 id='format.options_list'>Format an options list</h2><span id='topic+format.options_list'></span>

<h3>Description</h3>

<p>Format an options list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'options_list'
format(x, ..., fmt = options_fmts())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format.options_list_+3A_x">x</code></td>
<td>
<p>An option list (&quot;option_list&quot;) class object</p>
</td></tr>
<tr><td><code id="format.options_list_+3A_...">...</code></td>
<td>
<p>Additional arguments unused</p>
</td></tr>
<tr><td><code id="format.options_list_+3A_fmt">fmt</code></td>
<td>
<p>A list of formats to use for formatting individual text elements</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A formatted character value
</p>

<hr>
<h2 id='naming'>Define Naming Conventions</h2><span id='topic+naming'></span><span id='topic+set_envvar_name_fn'></span><span id='topic+set_option_name_fn'></span>

<h3>Description</h3>

<p>Option naming conventions use sensible defaults so that you can get started
quickly with minimal configuration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_envvar_name_fn(fn, env = parent.frame())

set_option_name_fn(fn, env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naming_+3A_fn">fn</code></td>
<td>
<p>A callback function which expects two arguments, the package name
and option name, and returns a single character value to use as an
environment variable name.</p>
</td></tr>
<tr><td><code id="naming_+3A_env">env</code></td>
<td>
<p>An environment in which to search for options settings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The callback function <code>fn</code>
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>set_envvar_name_fn()</code>: Set a callback function to use to format environment variable names.
</p>
</li>
<li> <p><code>set_option_name_fn()</code>: Set a callback function to use to format option names.
</p>
</li></ul>


<h3>Defaults</h3>

<p>Given a package <code>mypackage</code> and option <code>myoption</code>, the default settings
will generate options and environment variables using the convention:
</p>
<p>option:
</p>
<div class="sourceCode"><pre>mypackage.myoption
</pre></div>
<p>environment variable:
</p>
<div class="sourceCode"><pre>R_MYPACKAGE_MYOPTION
</pre></div>
<p>This convention is intended to track closely with how options and environment
variables are handled frequently in the wild. Perhaps in contrast to the
community conventions, an <code>R_</code> prefix is tacked on to the default environment
variables. This prefix helps to differentiate environment variables when
similarly named tools exist outside of the R ecosystem.
</p>


<h3>Setting Alternative Conventions</h3>

<p>If you choose to use alternative naming conventions, you must set the
callback function <em>before</em> defining options. This is best achieved by
altering these settings in the file where you define your options.
</p>
<p>If you choose to break up your options across multiple files, then it is best
to define the collate order for your R scripts to ensure that the options are
consistently configured across operating systems.
</p>


<h3>See Also</h3>

<p>naming_formats
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_envvar_name_fn(envvar_name_generic)

set_envvar_name_fn(function(package, name) {
  toupper(paste("ENV", package, name, sep = "_"))
})

</code></pre>

<hr>
<h2 id='naming_formats'>Naming Convention Formatters</h2><span id='topic+naming_formats'></span><span id='topic+option_name_default'></span><span id='topic+envvar_name_default'></span><span id='topic+envvar_name_generic'></span>

<h3>Description</h3>

<p>This family of functions is used internally to generate global option and
environment variable names from the package name and internal option name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>option_name_default(package, option)  # "package.option"

envvar_name_default(package, option)  # "R_PACKAGE_OPTION"

envvar_name_generic(package, option)  # "PACKAGE_OPTION"
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="naming_formats_+3A_package">package</code>, <code id="naming_formats_+3A_option">option</code></td>
<td>
<p>The package name and internal option name used for
generating a global R option and environment variable name. As these
functions are often provided as values, their arguments rarely need to be
provided by package authors directly.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character value to use as the global option name or environment
variable name
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>option_name_default()</code>: A default naming convention, producing a global R option name from the
package name and internal option name (<code>mypackage.myoption</code>)
</p>
</li>
<li> <p><code>envvar_name_default()</code>: A default naming convention, producing an environment variable name from the
package name and internal option name (<code>R_MYPACKAGE_MYOPTION</code>)
</p>
</li>
<li> <p><code>envvar_name_generic()</code>: A generic naming convention, producing an environment variable name from the
package name and internal option name. Useful when a generic convention might
be used to share environment variables with other tools of the same name, or
when you're confident that your R package will not conflict with other tools.
(<code>MYPACKAGE_MYOPTION</code>)
</p>
</li></ul>


<h3>See Also</h3>

<p>naming
</p>

<hr>
<h2 id='opt'>Inspecting Option Values</h2><span id='topic+opt'></span><span id='topic+opt_set'></span><span id='topic+opt+3C-'></span><span id='topic+opt_source'></span><span id='topic+opts'></span><span id='topic+opt_set_local'></span>

<h3>Description</h3>

<p>Inspecting Option Values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>opt(x, default, env = parent.frame(), ...)

opt_set(x, value, env = parent.frame(), ...)

opt(x, ...) &lt;- value

opt_source(x, env = parent.frame())

opts(xs = NULL, env = parent.frame())

opt_set_local(
  x,
  value,
  env = parent.frame(),
  ...,
  add = TRUE,
  after = FALSE,
  scope = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="opt_+3A_x">x</code>, <code id="opt_+3A_xs">xs</code></td>
<td>
<p>An option name, vector of option names, or a named list of new
option values</p>
</td></tr>
<tr><td><code id="opt_+3A_default">default</code></td>
<td>
<p>A default value if the option is not set</p>
</td></tr>
<tr><td><code id="opt_+3A_env">env</code></td>
<td>
<p>An environment, namespace or package name to pull options from</p>
</td></tr>
<tr><td><code id="opt_+3A_...">...</code></td>
<td>
<p>Additional arguments unused</p>
</td></tr>
<tr><td><code id="opt_+3A_value">value</code></td>
<td>
<p>A new value to update the associated global option</p>
</td></tr>
<tr><td><code id="opt_+3A_add">add</code>, <code id="opt_+3A_after">after</code>, <code id="opt_+3A_scope">scope</code></td>
<td>
<p>Passed to <a href="base.html#topic+on.exit">on.exit</a>, with alternative defaults.
<code>scope</code> is passed to the <a href="base.html#topic+on.exit">on.exit</a> <code>envir</code> parameter to disambiguate it
from <code>env</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>opt()</code> and <code>opts()</code>; the result of the option (or a list of
results), either the value from a global option, the result of processing
the environment variable or the default value, depending on which of the
alternative sources are defined.
</p>
<p>For modifying functions (<a href="#topic+opt_set">opt_set</a> and <a href="#topic+opt+3C-">opt&lt;-</a>: the value of the
option prior to modification
</p>
<p>For <a href="#topic+opt_source">opt_source</a>; the source that is used for a specific option,
one of <code>"option"</code>, <code>"envir"</code> or <code>"default"</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>opt()</code>: Retrieve an option
</p>
</li>
<li> <p><code>opt_set()</code>: Set an option's value
</p>
</li>
<li> <p><code>opt(x, ...) &lt;- value</code>: An alias for <a href="#topic+opt_set">opt_set</a>
</p>
</li>
<li> <p><code>opt_source()</code>: Determine source of option value. Primarily used for diagnosing options
behaviors.
</p>
</li>
<li> <p><code>opts()</code>: Retrieve multiple options. When no names are provided, return a list
containing all options from a given environment. Accepts a character
vector of option names or a named list of new values to modify global
option values.
</p>
</li>
<li> <p><code>opt_set_local()</code>: Set an option only in the local frame
</p>
</li></ul>


<h3>Note</h3>

<p>Local options are set with <a href="base.html#topic+on.exit">on.exit</a>, which can be prone to error if
subsequent calls are not called with <code>add = TRUE</code> (masking existing
<a href="base.html#topic+on.exit">on.exit</a> callbacks). A more rigorous alternative might make use of
<a href="withr.html#topic+defer">withr::defer</a>.
</p>
<div class="sourceCode"><pre>old &lt;- opt_set("option", value)
withr::defer(opt_set("option", old))
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>define_options("Whether execution should emit console output", quiet = FALSE)
opt("quiet")

define_options("Whether execution should emit console output", quiet = FALSE)
opt_source("quiet")

Sys.setenv(R_GLOBALENV_QUIET = TRUE)
opt_source("quiet")

options(globalenv.quiet = FALSE)
opt_source("quiet")

define_options("Quietly", quiet = TRUE, "Verbosity", verbose = FALSE)

# retrieve multiple options
opts(c("quiet", "verbose"))

# update multiple options, returns unmodified values
opts(list(quiet = 42, verbose = TRUE))

# next time we check their values we'll see the modified values
opts(c("quiet", "verbose"))

</code></pre>

<hr>
<h2 id='option_spec'>Specify Option</h2><span id='topic+option_spec'></span>

<h3>Description</h3>

<p>An option specification outlines the various behaviors of an option. It's
default value, related global R option, and related environment variable
name, as well as a description. This information defines the operating
behavior of the option.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>option_spec(
  name,
  default = bquote(),
  desc = NULL,
  option_name = get_option_name_fn(envir),
  envvar_name = get_envvar_name_fn(envir),
  envvar_fn = envvar_eval_or_raw(),
  quoted = FALSE,
  eager = FALSE,
  envir = parent.frame()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="option_spec_+3A_name">name</code></td>
<td>
<p>A string representing the internal name for the option. This is
the short form <code style="white-space: pre;">&#8288;&lt;option&gt;&#8288;</code> used within a namespace and relates to, for
example, <code style="white-space: pre;">&#8288;&lt;package&gt;.&lt;option&gt;&#8288;</code> global R option.</p>
</td></tr>
<tr><td><code id="option_spec_+3A_default">default</code></td>
<td>
<p>Either a quoted expression (if parameter <code>quote == TRUE</code>) or
default value for the option.  Defaults to an empty expression, indicating
that it is unset. The default value is lazily evaluated, evaluated only
when the option is first requested unless parameter <code>eager == TRUE</code>.</p>
</td></tr>
<tr><td><code id="option_spec_+3A_desc">desc</code></td>
<td>
<p>A written description of the option's effects</p>
</td></tr>
<tr><td><code id="option_spec_+3A_option_name">option_name</code>, <code id="option_spec_+3A_envvar_name">envvar_name</code></td>
<td>
<p>A character value or function. If a character
value is provided it is used as the corresponding global option name or
environment variable name. If a function is provided it is provided with
the package name and internal option name to derive the global option name.
For example, provided with package <code>"mypkg"</code> and option <code>"myoption"</code>, the
function might return global option name <code>"mypkg.myoption"</code> or environment
variable name <code>"R_MYPKG_MYOPTION"</code>. Defaults to configured default
functions which fall back to <code>option_name_default</code> and
<code>envvar_name_default</code>, and can be configured using <code>set_option_name_fn</code>
and <code>set_envvar_name_fn</code>.</p>
</td></tr>
<tr><td><code id="option_spec_+3A_envvar_fn">envvar_fn</code></td>
<td>
<p>A function to use for parsing environment variable values.
Defaults to <code>envvar_eval_or_raw()</code>.</p>
</td></tr>
<tr><td><code id="option_spec_+3A_quoted">quoted</code></td>
<td>
<p>A logical value indicating whether the <code>default</code> argument
should be treated as a quoted expression or as a value.</p>
</td></tr>
<tr><td><code id="option_spec_+3A_eager">eager</code></td>
<td>
<p>A logical value indicating whether the <code>default</code> argument should
be eagerly evaluated (upon call), or lazily evaluated (upon first use).
This distinction will only affect default values that rely on evaluation of
an expression, which may produce a different result depending on the
context in which it is evaluated.</p>
</td></tr>
<tr><td><code id="option_spec_+3A_envir">envir</code></td>
<td>
<p>An environment in which to search for an options envir object.
It is rarely necessary to use anything but the default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>option_spec</code> object, which is a simple S3 class wrapping a list
containing these arguments.
</p>

<hr>
<h2 id='options_env'>Options Environment Class</h2><span id='topic+options_env'></span><span id='topic+get_options_env'></span><span id='topic+options_initialized'></span><span id='topic+init_options_env'></span><span id='topic+as_options_list'></span><span id='topic+get_option_default_value'></span><span id='topic+get_options_spec'></span><span id='topic+get_option_spec'></span><span id='topic+set_option_spec'></span>

<h3>Description</h3>

<p>The options environment stores primarily, the default values for options. In
addition, it stores metadata pertaining to each option in the form of
attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_options_env(env, ...)

options_initialized(env, inherits = FALSE)

init_options_env(env = parent.frame())

as_options_list(x, ...)

get_option_default_value(x, env = parent.frame())

get_options_spec(env = parent.frame())

get_option_spec(
  name,
  env = parent.frame(),
  inherits = FALSE,
  on_missing = warning
)

set_option_spec(name, details, env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="options_env_+3A_env">env</code></td>
<td>
<p>An environment in which to search for an options environment</p>
</td></tr>
<tr><td><code id="options_env_+3A_...">...</code></td>
<td>
<p>Additional arguments unused</p>
</td></tr>
<tr><td><code id="options_env_+3A_inherits">inherits</code></td>
<td>
<p>Whether to search upward through parent environments</p>
</td></tr>
</table>


<h3>Functions</h3>


<ul>
<li> <p><code>get_options_env()</code>: Initialize (if needed) and retrieve an environment containing options
</p>
</li>
<li> <p><code>options_initialized()</code>: Test whether options is initialized in environment
</p>
</li>
<li> <p><code>init_options_env()</code>: Initialize an options object
</p>
</li>
<li> <p><code>as_options_list()</code>: Convert into an options list
</p>
</li>
<li> <p><code>get_option_default_value()</code>: Get the option's default value
</p>
</li>
<li> <p><code>get_options_spec()</code>: Get all options specifications as named list
</p>
</li>
<li> <p><code>get_option_spec()</code>: Get single option specification
</p>
</li>
<li> <p><code>set_option_spec()</code>: Set single option specification
</p>
</li></ul>


<h3>Attributes</h3>


<ul>
<li> <p><code>spec</code>: A named list of option specifications
</p>
</li>
<li> <p><code>option_name_fn</code>: A function used to derive default option names for
newly defined options. See <code><a href="#topic+set_option_name_fn">set_option_name_fn()</a></code>.
</p>
</li>
<li> <p><code>envvar_name_fn</code>: A function used to derive default environment variable
names for newly defined options. See <code><a href="#topic+set_envvar_name_fn">set_envvar_name_fn()</a></code>.
</p>
</li></ul>


<hr>
<h2 id='options_fmts'>Optional Crayon Handling</h2><span id='topic+options_fmts'></span>

<h3>Description</h3>

<p>Generate a list of styling functions using <code>crayon</code>, while safely falling
back to non-<code>crayon</code> output when <code>crayon</code> is unavailable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>options_fmts()
</code></pre>


<h3>Value</h3>

<p>formatted text
</p>

<hr>
<h2 id='pkgname'>Grab package name, at runtime</h2><span id='topic+pkgname'></span>

<h3>Description</h3>

<p>Lazily grab <code>packageName()</code> within calling environment, not within function
environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pkgname(env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pkgname_+3A_env">env</code></td>
<td>
<p>An environment in which to search for a package name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A package name or &quot;globalenv&quot; if not found
</p>

<hr>
<h2 id='reflow_option_desc'>Reflow multiline strings</h2><span id='topic+reflow_option_desc'></span>

<h3>Description</h3>

<p>A small helper function for allowing multiline strings to be collapsed into
continuous lines, similar to markdown's paragraph handling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reflow_option_desc(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reflow_option_desc_+3A_x">x</code></td>
<td>
<p>A vector of multiline strings to reflow</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The reflowed strings
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
