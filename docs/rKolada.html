<!DOCTYPE html><html><head><title>Help for package rKolada</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rKolada}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>re-export magrittr pipe operator</p></a></li>
<li><a href='#allowed_entities'><p>Allowed entities: Kolada metadata classes</p></a></li>
<li><a href='#compose_data_query'><p>Compose a query to fetch metadata from the Kolada API. Its use is mainly</p></a></li>
<li><a href='#compose_metadata_query'><p>Compose a query to fetch metadata from the Kolada API.</p></a></li>
<li><a href='#generate_kpi_metadata'><p>Generate KPI metadata from a Kolada KPI object</p></a></li>
<li><a href='#get_kpi'><p>Download metadata for a specific entity from the Kolada API</p></a></li>
<li><a href='#get_metadata'><p>Download metadata from the Kolada API</p></a></li>
<li><a href='#get_values'><p>Get data from Kolada</p></a></li>
<li><a href='#kolada_available'><p>Check if the Kolada API is available</p></a></li>
<li><a href='#kpi_bind_keywords'><p>Add keyword columns to a Kolada KPI table</p></a></li>
<li><a href='#kpi_describe'><p>Describe the KPIs in a Kolada KPI metadata table</p></a></li>
<li><a href='#kpi_extract_ids'><p>Extract a vector of KPI ID strings from a Kolada KPI metadata table</p></a></li>
<li><a href='#kpi_grp_describe'><p>Describe the KPIs in a Kolada KPI Group metadata table</p></a></li>
<li><a href='#kpi_grp_extract_ids'><p>Extract KPI ID strings from a Kolada KPI Group metadata table</p></a></li>
<li><a href='#kpi_grp_search'><p>Search a Kolada KPI Group metadata table for group names</p></a></li>
<li><a href='#kpi_grp_unnest'><p>Create a KPI table from a Kolada KPI Group metadata table</p></a></li>
<li><a href='#kpi_minimize'><p>Simplify a KPI table</p></a></li>
<li><a href='#kpi_search'><p>Search for Kolada KPIs using a Kolada KPI table</p></a></li>
<li><a href='#municipality_extract_ids'><p>Extract a vector of municipality ID strings from a Kolada municipality table</p></a></li>
<li><a href='#municipality_grp_describe'><p>Describe the municipalitie in a Kolada Municipality Group metadata table</p></a></li>
<li><a href='#municipality_grp_extract_ids'><p>Extract municipality ID strings from a Kolada municipality group table</p></a></li>
<li><a href='#municipality_grp_search'><p>Search a Kolada Municipality Group metadata table for group names</p></a></li>
<li><a href='#municipality_grp_unnest'><p>Create a municipality table from a Kolada Municipality Group metadata table</p></a></li>
<li><a href='#municipality_id_to_name'><p>Convert a vector of municipality ids to municipality names</p></a></li>
<li><a href='#municipality_name_to_id'><p>Convert a vector of municipality names to municipality ids</p></a></li>
<li><a href='#municipality_search'><p>Search a Kolada municipality metadata table</p></a></li>
<li><a href='#ou_search'><p>Search a Kolada Organizational Unit metadata table</p></a></li>
<li><a href='#values_legend'><p>Create KPI long-form descriptions to add to a plot</p></a></li>
<li><a href='#values_minimize'><p>Simplify a Kolada values table</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Access Data from the 'Kolada' Database</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Love Hansson &lt;love.hansson@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Methods for downloading and processing data and metadata from 'Kolada', the official Swedish regions and municipalities database <a href="https://www.kolada.se/">https://www.kolada.se/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://lchansson.github.io/rKolada/">https://lchansson.github.io/rKolada/</a>,
<a href="https://github.com/lchansson/rKolada">https://github.com/lchansson/rKolada</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/lchansson/rKolada/issues">https://github.com/lchansson/rKolada/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, stringi, ggplot2, scales,
progress</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>tibble, dplyr, glue, stringr, httr, jsonlite, magrittr, tidyr,
purrr, rlang, urltools</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-12 13:07:36 UTC; lchansson</td>
</tr>
<tr>
<td>Author:</td>
<td>Love Hansson [aut, cre, cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-14 07:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>re-export magrittr pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>re-export magrittr pipe operator
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>

<hr>
<h2 id='allowed_entities'>Allowed entities: Kolada metadata classes</h2><span id='topic+allowed_entities'></span>

<h3>Description</h3>

<p>Allowed entities: Kolada metadata classes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>allowed_entities()
</code></pre>


<h3>Value</h3>

<p>A vector of names of allowed metadata entities, i.e. the correct
spelling of all allowed values of the <code>entity</code> parameter in <code><a href="#topic+get_metadata">get_metadata</a></code>.
</p>

<hr>
<h2 id='compose_data_query'>Compose a query to fetch metadata from the Kolada API. Its use is mainly</h2><span id='topic+compose_data_query'></span>

<h3>Description</h3>

<p>Mainly used as a supporting function for <code><a href="#topic+get_values">get_values</a></code> but can also
be used to create a working URL to paste in your web browser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compose_data_query(
  kpi = NULL,
  municipality = NULL,
  period = NULL,
  ou = NULL,
  unit_type = "municipality",
  page = NA,
  per_page = NA,
  version = "v2"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compose_data_query_+3A_kpi">kpi</code></td>
<td>
<p>What kpis should be fetched? Can be a single name or a vector of
names.</p>
</td></tr>
<tr><td><code id="compose_data_query_+3A_municipality">municipality</code></td>
<td>
<p>For which municipalities should data be fetched? Can be a
single name or a vector of names.</p>
</td></tr>
<tr><td><code id="compose_data_query_+3A_period">period</code></td>
<td>
<p>For what years should data be fetched? Can be one or more
four-digit integers or character strings.</p>
</td></tr>
<tr><td><code id="compose_data_query_+3A_ou">ou</code></td>
<td>
<p>(Optional) for what Operating Units should data be fetched? Only
available for certain KPIs. Only used if <code>unit_type</code> is set to <code>"ou"</code>.</p>
</td></tr>
<tr><td><code id="compose_data_query_+3A_unit_type">unit_type</code></td>
<td>
<p>One of <code>"municipality"</code> or <code>"ou"</code>. Whether to
fetch data for Municipalities or Organizational Units.
Units. Defaults to <code>"municipality"</code>.</p>
</td></tr>
<tr><td><code id="compose_data_query_+3A_page">page</code></td>
<td>
<p>What page to fetch. Used mainly in large queries. Fetches a page using the value of <code>"per_page"</code> as pagination delimiter.</p>
</td></tr>
<tr><td><code id="compose_data_query_+3A_per_page">per_page</code></td>
<td>
<p>Number of results per page.</p>
</td></tr>
<tr><td><code id="compose_data_query_+3A_version">version</code></td>
<td>
<p>Version of the API. Currently only <code>"v2"</code> is supported.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string containing a URL to the Kolada REST API.
</p>

<hr>
<h2 id='compose_metadata_query'>Compose a query to fetch metadata from the Kolada API.</h2><span id='topic+compose_metadata_query'></span>

<h3>Description</h3>

<p>Mainly used as a supporting function for <code><a href="#topic+get_metadata">get_metadata</a></code> but can
also be used to create a working URL to paste in your web browser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compose_metadata_query(
  entity = "kpi",
  title = NULL,
  id = NULL,
  municipality = NULL,
  page = NA,
  per_page = NA,
  version = "v2"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compose_metadata_query_+3A_entity">entity</code></td>
<td>
<p>Any allowed metadata entity. Check
<code><a href="#topic+allowed_entities">allowed_entities</a></code> to see an updated list.</p>
</td></tr>
<tr><td><code id="compose_metadata_query_+3A_title">title</code></td>
<td>
<p>A free-form search term or the exact title of any entry in the
current entity. Case insensitive.</p>
</td></tr>
<tr><td><code id="compose_metadata_query_+3A_id">id</code></td>
<td>
<p>The ID of any entry in the current entity.</p>
</td></tr>
<tr><td><code id="compose_metadata_query_+3A_municipality">municipality</code></td>
<td>
<p>If entity is <code>"ou"</code>, the municipality parameter can
be added to narrow the search.</p>
</td></tr>
<tr><td><code id="compose_metadata_query_+3A_page">page</code></td>
<td>
<p>What page to fetch. Used mainly in large queries. Fetches a page using the value of <code>"per_page"</code> as pagination delimiter.</p>
</td></tr>
<tr><td><code id="compose_metadata_query_+3A_per_page">per_page</code></td>
<td>
<p>Number of results per page.</p>
</td></tr>
<tr><td><code id="compose_metadata_query_+3A_version">version</code></td>
<td>
<p>Version of the API. Currently only <code>"v2"</code> is supported.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string containing a URL to the Kolada REST API.
</p>

<hr>
<h2 id='generate_kpi_metadata'>Generate KPI metadata from a Kolada KPI object</h2><span id='topic+generate_kpi_metadata'></span>

<h3>Description</h3>

<p>Generate KPI metadata from a Kolada KPI object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_kpi_metadata(kpi_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generate_kpi_metadata_+3A_kpi_df">kpi_df</code></td>
<td>
<p>A Kolada KPI tibble</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Kolada KPI metadata table
</p>

<hr>
<h2 id='get_kpi'>Download metadata for a specific entity from the Kolada API</h2><span id='topic+get_kpi'></span><span id='topic+get_kpi_groups'></span><span id='topic+get_ou'></span><span id='topic+get_municipality'></span><span id='topic+get_municipality_groups'></span>

<h3>Description</h3>

<p>There are five different types of metadata entities in the Kolada database:
&quot;kpi&quot;, &quot;kpi_groups&quot;, &quot;municipality&quot;, &quot;municipality_groups&quot;, and &quot;ou&quot;. For
every entity there is a corresponding function <code>get_ENTITY</code> which
retrieves a table with the metadata for that entity. The <code>get_ENTITY</code>
functions are thin wrappers around <code><a href="#topic+get_metadata">get_metadata</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_kpi(
  id = NULL,
  max_results = NULL,
  cache = FALSE,
  cache_location = tempdir,
  verbose = FALSE
)

get_kpi_groups(
  id = NULL,
  cache = FALSE,
  max_results = NULL,
  cache_location = tempdir,
  verbose = FALSE
)

get_ou(
  id = NULL,
  municipality = NULL,
  max_results = NULL,
  cache = FALSE,
  cache_location = tempdir,
  verbose = FALSE
)

get_municipality(
  id = NULL,
  cache = FALSE,
  max_results = NULL,
  cache_location = tempdir,
  verbose = FALSE
)

get_municipality_groups(
  id = NULL,
  cache = FALSE,
  max_results = NULL,
  cache_location = tempdir,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_kpi_+3A_id">id</code></td>
<td>
<p>(Optional) One or several KPI IDs</p>
</td></tr>
<tr><td><code id="get_kpi_+3A_max_results">max_results</code></td>
<td>
<p>(Optional) Specify the maximum number of results
returned by the query.</p>
</td></tr>
<tr><td><code id="get_kpi_+3A_cache">cache</code></td>
<td>
<p>Logical. If TRUE, downloaded data are stored to the local disk
in the place specified by <code>cache_location</code>. If data is already present
on the local disk, this data is returned instead of downloading data from
the API.</p>
</td></tr>
<tr><td><code id="get_kpi_+3A_cache_location">cache_location</code></td>
<td>
<p>Where to store and search for cached data. Can be a
path to a directory or the name of any function that returns the path to a
directory when called, like <code><a href="base.html#topic+getwd">getwd</a></code>. Defaults to
<code><a href="base.html#topic+tempdir">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="get_kpi_+3A_verbose">verbose</code></td>
<td>
<p>Whether to print the call to the Kolada API as a message to
the R console.</p>
</td></tr>
<tr><td><code id="get_kpi_+3A_municipality">municipality</code></td>
<td>
<p>(Optional) A string or vector of strings containing
municipality codes. If getting OU data, you can use this parameter to narrow
the search.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble with metadata for the specified entity. In rKolada
terminology, a table returned by e.g. <code><a href="#topic+get_kpi">get_kpi</a></code> is referred to
as a <code>kpi_df</code> and can be passed to functions starting with &quot;kpi&quot; such
as <code><a href="#topic+kpi_bind_keywords">kpi_bind_keywords</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Download KPI table and store a cache copy of the results in a temporary folder
# (to actually download all available data, don't specify max_results)
if (kolada_available()) {
kpi_df &lt;- get_kpi(cache = TRUE, max_results = 100)
}

</code></pre>

<hr>
<h2 id='get_metadata'>Download metadata from the Kolada API</h2><span id='topic+get_metadata'></span>

<h3>Description</h3>

<p>This is a generalized function for downloading metadata from the Kolada API.
The function parameters closely mask the names specified in the original API.
For further information about the Kolada API specification, please see the
<a href="https://github.com/Hypergene/kolada">official documentation on GitHub</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_metadata(
  entity = "kpi",
  title = NULL,
  id = NULL,
  municipality = NULL,
  max_results = NULL,
  cache = FALSE,
  cache_location = tempdir,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_metadata_+3A_entity">entity</code></td>
<td>
<p>Any allowed metadata entity. Check <code>allowed_entities()</code> to
see an updated list.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_title">title</code></td>
<td>
<p>A free-form search term or the exact title of any entry in the
current entity. Case insensitive.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_id">id</code></td>
<td>
<p>The ID of any entry in the current entity.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_municipality">municipality</code></td>
<td>
<p>If entity is <code>"ou"</code>, the municipality parameter can
be added to narrow the search.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_max_results">max_results</code></td>
<td>
<p>(Optional) Specify the maximum number of results
returned by the query.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_cache">cache</code></td>
<td>
<p>Logical. If TRUE, downloaded data are stored to the local disk
in the place specified by <code>cache_location</code>. If data is already present
on the local disk, this data is returned instead of downloading data from the
API.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_cache_location">cache_location</code></td>
<td>
<p>Where to store and search for cached data. Can be a
path to a directory or the name of any function that returns the path to a
directory when called, like <code><a href="base.html#topic+getwd">getwd</a></code>. Defaults to
<code><a href="base.html#topic+tempdir">tempdir</a></code>.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_verbose">verbose</code></td>
<td>
<p>Whether to print the call to the Kolada API as a message to
the R console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble with metadata for the specified entity. In rKolada
terminology, a table returned by e.g. <code>entity = "kpi"</code> is referred to
as a <code>kpi_df</code> and can be passed to functions starting with &quot;kpi&quot; such
as <code><a href="#topic+kpi_bind_keywords">kpi_bind_keywords</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_kpi">get_kpi</a></code>, <code><a href="#topic+get_kpi_groups">get_kpi_groups</a></code>,
<code><a href="#topic+get_municipality">get_municipality</a></code>,
<code><a href="#topic+get_municipality_groups">get_municipality_groups</a></code>,
<code><a href="#topic+get_ou">get_ou</a></code>
</p>

<hr>
<h2 id='get_values'>Get data from Kolada</h2><span id='topic+get_values'></span>

<h3>Description</h3>

<p>Download a table of data from Kolada. Data is selected based on three
metadata dimensions: KPI (ID), municipality (ID) and period (years). You must
supply arguments for at least two of these three dimensions. If a dimension
is omitted, all available data for that dimension will be downloaded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_values(
  kpi = NULL,
  municipality = NULL,
  period = NULL,
  ou = NULL,
  unit_type = "municipality",
  max_results = NULL,
  simplify = TRUE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_values_+3A_kpi">kpi</code></td>
<td>
<p>What kpis should be fetched? Can be a single name or a vector of
names.</p>
</td></tr>
<tr><td><code id="get_values_+3A_municipality">municipality</code></td>
<td>
<p>For which municipalities should data be fetched? Can be a
single name or a vector of names.</p>
</td></tr>
<tr><td><code id="get_values_+3A_period">period</code></td>
<td>
<p>For what years should data be fetched? Can be one or more
four-digit integers or character strings.</p>
</td></tr>
<tr><td><code id="get_values_+3A_ou">ou</code></td>
<td>
<p>(Optional) for what Operating Units should data be fetched? Only
available for certain KPIs.</p>
</td></tr>
<tr><td><code id="get_values_+3A_unit_type">unit_type</code></td>
<td>
<p>One of <code>"municipality"</code> or <code>"ou"</code>. Whether to
fetch data for Municipalities or Organizational Units.</p>
</td></tr>
<tr><td><code id="get_values_+3A_max_results">max_results</code></td>
<td>
<p>(Optional) Specify the maximum number of results
returned by the query.</p>
</td></tr>
<tr><td><code id="get_values_+3A_simplify">simplify</code></td>
<td>
<p>Whether to make results more human readable.</p>
</td></tr>
<tr><td><code id="get_values_+3A_verbose">verbose</code></td>
<td>
<p>Whether to print the call to the Kolada API as a message to
the R console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing Kolada values and metadata.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Download data for KPIs for Gross Regional Product ("BRP" in Swedish)
# for three municipalities
if (kolada_available()) {

# If you already know the ID numbers you are looking for,
# you can use these directly as argments.
# Otherwise, use the get_\*() functions in combination with \*_search()
# functions to find good parameter values.
grp_data &lt;- get_values(
  kpi = c("N03700", "N03701"),
  municipality = c("0180", "1480", "1280")
)

# To download OU data instead of Municipality data, set the parameter
# "unit_type" to "ou".
ou_data &lt;- get_values(
 kpi = "N15033",
 ou = "V15E144001101",
 unit_type = "ou"
)
}

</code></pre>

<hr>
<h2 id='kolada_available'>Check if the Kolada API is available</h2><span id='topic+kolada_available'></span>

<h3>Description</h3>

<p>Check if the Kolada API is available and if data from the API makes sense.
This is primarily useful for programming with rKolada and/or examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kolada_available()
</code></pre>

<hr>
<h2 id='kpi_bind_keywords'>Add keyword columns to a Kolada KPI table</h2><span id='topic+kpi_bind_keywords'></span>

<h3>Description</h3>

<p>Identify <code>n</code> keywords describing the KPI and add them as new columns.
Keywords are inferred from the <code>title</code> field of the table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_bind_keywords(kpi_df, n = 2, form = c("wide", "long"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_bind_keywords_+3A_kpi_df">kpi_df</code></td>
<td>
<p>A Kolada KPI metadata table, e.g. as created by
<code><a href="#topic+get_kpi">get_kpi</a></code>.</p>
</td></tr>
<tr><td><code id="kpi_bind_keywords_+3A_n">n</code></td>
<td>
<p>How many keyword columns should be added?</p>
</td></tr>
<tr><td><code id="kpi_bind_keywords_+3A_form">form</code></td>
<td>
<p>Can be either &quot;wide&quot; (default) or &quot;long&quot;. Whether to return
keywords as separate columns (&quot;wide&quot;) or as separate rows, duplicating all
other data (&quot;long&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada KPI metadata table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
kpi_df &lt;- get_kpi(id = c("N45933", "U28563")) %&gt;%
  kpi_bind_keywords(n = 3)
}

</code></pre>

<hr>
<h2 id='kpi_describe'>Describe the KPIs in a Kolada KPI metadata table</h2><span id='topic+kpi_describe'></span>

<h3>Description</h3>

<p>Print a human-readable description of each entity of a KPI metadata table (up
to a maximum number of rows). Can be printed either directly to the R console
or used to populate a R markdown document, which can be useful for
documentation purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_describe(
  kpi_df,
  max_n = 5,
  format = "inline",
  heading_level = 2,
  sub_heading_level = heading_level + 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_describe_+3A_kpi_df">kpi_df</code></td>
<td>
<p>A Kolada KPI metadata table</p>
</td></tr>
<tr><td><code id="kpi_describe_+3A_max_n">max_n</code></td>
<td>
<p>The maximum number of KPIs to describe.</p>
</td></tr>
<tr><td><code id="kpi_describe_+3A_format">format</code></td>
<td>
<p>Output format. Can be one of &quot;inline&quot; (default) or &quot;md&quot;, i.e.
markdown.</p>
</td></tr>
<tr><td><code id="kpi_describe_+3A_heading_level">heading_level</code></td>
<td>
<p>The top heading level output format is &quot;md&quot;.</p>
</td></tr>
<tr><td><code id="kpi_describe_+3A_sub_heading_level">sub_heading_level</code></td>
<td>
<p>The sub heading level output format is &quot;md&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the object passed to the function, invisibly, to be re-used
in a pipe.
</p>

<hr>
<h2 id='kpi_extract_ids'>Extract a vector of KPI ID strings from a Kolada KPI metadata table</h2><span id='topic+kpi_extract_ids'></span>

<h3>Description</h3>

<p>This function is primarily intended as a convenient way to pass a (filtered)
Kolada KPI metadata table to <code><a href="#topic+get_values">get_values</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_extract_ids(kpi_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_extract_ids_+3A_kpi_df">kpi_df</code></td>
<td>
<p>A Kolada KPI metadata table, e.g. as created by
<code><a href="#topic+get_kpi">get_kpi</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of KPI IDs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
# Download Kolada data for the first KPI in the list matching the term "Grundskola" (primary school)
# for the years 2010-2019
# (omit the parameter "max_results" to actually download all data)
kpi_filter &lt;- get_kpi(max_results = 500) %&gt;%
  kpi_search("Grundskola")

# Only keep the top row
kpi_filter &lt;- kpi_filter[1, ]

# Only download 100 observations
# (omit the parameter "max_results" to actually download all data)
kld_data &lt;- get_values(
  kpi = kpi_extract_ids(kpi_filter),
  period = 2010:2019,
  max_results = 100
)
}

</code></pre>

<hr>
<h2 id='kpi_grp_describe'>Describe the KPIs in a Kolada KPI Group metadata table</h2><span id='topic+kpi_grp_describe'></span>

<h3>Description</h3>

<p>Print a human-readable description of each row of a KPI Group metadata table,
including member KPIs (up to a maximum number of rows). Can be printed either
directly to the R console or used to populate a R markdown document, which
can be useful for documentation purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_grp_describe(
  kpi_grp_df,
  max_n = 5,
  format = "inline",
  heading_level = 2,
  sub_heading_level = heading_level + 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_grp_describe_+3A_kpi_grp_df">kpi_grp_df</code></td>
<td>
<p>A Kolada KPI Group metadata table, as created by e.g.
<code>get_kpi_groups</code>.</p>
</td></tr>
<tr><td><code id="kpi_grp_describe_+3A_max_n">max_n</code></td>
<td>
<p>The maximum number of KPI groups to describe.</p>
</td></tr>
<tr><td><code id="kpi_grp_describe_+3A_format">format</code></td>
<td>
<p>Output format. Can be one of &quot;inline&quot; or &quot;md&quot; (markdown).</p>
</td></tr>
<tr><td><code id="kpi_grp_describe_+3A_heading_level">heading_level</code></td>
<td>
<p>The top heading level output format is &quot;md&quot;.</p>
</td></tr>
<tr><td><code id="kpi_grp_describe_+3A_sub_heading_level">sub_heading_level</code></td>
<td>
<p>The sub heading level output format is &quot;md&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the object passed to the function, invisibly, to be re-used
in a pipe.
</p>

<hr>
<h2 id='kpi_grp_extract_ids'>Extract KPI ID strings from a Kolada KPI Group metadata table</h2><span id='topic+kpi_grp_extract_ids'></span>

<h3>Description</h3>

<p>This function is primarily intended as a convenient way to pass a (filtered)
Kolada KPI Group metadata table to <code><a href="#topic+get_values">get_values</a></code>. All IDs of the
KPIs contained in each group in the table are extracted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_grp_extract_ids(kpi_grp_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_grp_extract_ids_+3A_kpi_grp_df">kpi_grp_df</code></td>
<td>
<p>A Kolada KPI Group metadata table, as created by e.g.
<code>get_kpi_groups</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of KPI IDs.
</p>

<hr>
<h2 id='kpi_grp_search'>Search a Kolada KPI Group metadata table for group names</h2><span id='topic+kpi_grp_search'></span>

<h3>Description</h3>

<p>Search a Kolada KPI Group metadata table. Only keep rows that
contain the search query. Searches group titles and group IDs. Note that this
function does not search for individual KPIs contained within KPI groups!
To search for KPIs within a KPI group, see examples below for an example
using <code>kpi_grp_unnest</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_grp_search(kpi_grp_df, query)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_grp_search_+3A_kpi_grp_df">kpi_grp_df</code></td>
<td>
<p>A Kolada KPI Group metadata table, as created by e.g.
<code>get_kpi_groups</code>.</p>
</td></tr>
<tr><td><code id="kpi_grp_search_+3A_query">query</code></td>
<td>
<p>A search term or a vector of search terms to filter by. Case
insensitive.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada KPI Group metadata table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
kpi_grp_df &lt;- get_kpi_groups()

# Which KPI groups match the keyword "ekonomi" (economy)?
kpi_grp_df %&gt;% kpi_grp_search("ekonomi")

# Which KPI groups contain KPIs matching the keyword "arbete" (work/labour)?
kpi_grp_df %&gt;%
  kpi_grp_unnest() %&gt;%
  kpi_search("arbete") %&gt;%
  dplyr::count(group_title, sort = TRUE)
}

</code></pre>

<hr>
<h2 id='kpi_grp_unnest'>Create a KPI table from a Kolada KPI Group metadata table</h2><span id='topic+kpi_grp_unnest'></span>

<h3>Description</h3>

<p>KPI groups are a convenient way to discover sets of KPIs that can be used to
highlight different aspects of a policy area. A practical workflow for
discovering such sets can be to search through KPI Group metadata using
<code><a href="#topic+kpi_grp_search">kpi_grp_search</a></code> to search for keywords and
<code><a href="#topic+kpi_grp_describe">kpi_grp_describe</a></code> to inspect contents of KPI groups. Once you
have created a KPI group table that has been narrowed down to the group/s you
are looking for, <code><a href="#topic+kpi_grp_unnest">kpi_grp_unnest</a></code> is used to create a KPI
metadata table for further processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_grp_unnest(kpi_grp_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_grp_unnest_+3A_kpi_grp_df">kpi_grp_df</code></td>
<td>
<p>A Kolada KPI Group metadata table, as created by e.g.
<code>get_kpi_groups</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada KPI metadata table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
# Download KPI Group metadata
kpi_grp_df &lt;- get_kpi_groups()

# Create a KPI metadata table from KPI groups matching the term
# "utbidning" (education)
kpi_grp_df %&gt;%
  kpi_grp_search("utbildning") %&gt;%
  kpi_grp_unnest()
}

</code></pre>

<hr>
<h2 id='kpi_minimize'>Simplify a KPI table</h2><span id='topic+kpi_minimize'></span>

<h3>Description</h3>

<p>Remove all columns from a Kolada KPI metadata table that are monotonous
across the table, i.e. columns that contain only one single value. Also
remove undocumented columns, i.e. columns that contain unintelligible and
undocumented information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_minimize(
  kpi_df,
  remove_undocumented_columns = TRUE,
  remove_monotonous_data = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_minimize_+3A_kpi_df">kpi_df</code></td>
<td>
<p>A Kolada KPI metadata table, e.g. as created by
<code><a href="#topic+get_kpi">get_kpi</a></code>.</p>
</td></tr>
<tr><td><code id="kpi_minimize_+3A_remove_undocumented_columns">remove_undocumented_columns</code></td>
<td>
<p>Remove columns from the KPI table which
are undocumented in the API?</p>
</td></tr>
<tr><td><code id="kpi_minimize_+3A_remove_monotonous_data">remove_monotonous_data</code></td>
<td>
<p>Remove columns from the KPI table which contain
exactly the same information for all entries in the table?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada KPI metadata table
</p>

<hr>
<h2 id='kpi_search'>Search for Kolada KPIs using a Kolada KPI table</h2><span id='topic+kpi_search'></span>

<h3>Description</h3>

<p>Search a Kolada KPI metadata table. Only keep rows that
contain the search query. Matches against all columns or columns named with
the <code>column</code> parameter. For more precise matching, please use
<code><a href="dplyr.html#topic+filter">dplyr::filter</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kpi_search(kpi_df, query, column = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kpi_search_+3A_kpi_df">kpi_df</code></td>
<td>
<p>A Kolada KPI metadata table, e.g. as created by
<code><a href="#topic+get_kpi">get_kpi</a></code>.</p>
</td></tr>
<tr><td><code id="kpi_search_+3A_query">query</code></td>
<td>
<p>A search term or a vector of search terms to filter by. Case
insensitive.</p>
</td></tr>
<tr><td><code id="kpi_search_+3A_column">column</code></td>
<td>
<p>(Optional) A string or character vector with the names of
columns in which to search for <code>query</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada KPI metadata table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
# Search for a single search term in a KPI table
kpis &lt;- get_kpi(id = c("N11002", "N11003", "N11004", "N11005"))
kpi_filter &lt;- kpi_search(kpis, "kostnad")

# Add keywords to a KPI table and search for multiple terms among
# the keywords
kpi_filter &lt;- get_kpi(id = c("N11002", "N11003", "N11004", "N11005")) %&gt;%
  kpi_bind_keywords(n = 3) %&gt;%
  kpi_search(
    query = c("nettokostnad", "öppen"),
    column = c("keyword_1", "keyword_2", "keyword_3")
  )
}

</code></pre>

<hr>
<h2 id='municipality_extract_ids'>Extract a vector of municipality ID strings from a Kolada municipality table</h2><span id='topic+municipality_extract_ids'></span>

<h3>Description</h3>

<p>This function is primarily intended as a convenient way to pass a (filtered)
Kolada municipality metadata table to <code><a href="#topic+get_values">get_values</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_extract_ids(munic_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_extract_ids_+3A_munic_df">munic_df</code></td>
<td>
<p>A Kolada Municipality metadata table, as created by e.g.
<code>get_municipality</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
# Download Kolada data for all municipalities of type "L"
# (regions and national total) for KPI "N45933"
munic_filter &lt;- get_municipality() %&gt;%
  municipality_search("L", column = "type")

kld_data &lt;- get_values(
  kpi = "N45933",
  municipality = municipality_extract_ids(munic_filter),
  period = 2022
)
}

</code></pre>

<hr>
<h2 id='municipality_grp_describe'>Describe the municipalitie in a Kolada Municipality Group metadata table</h2><span id='topic+municipality_grp_describe'></span>

<h3>Description</h3>

<p>Print a human-readable description of each row of a Municipality Group
metadata table, including member municipalities (up to a maximum number of
rows). Can be printed either directly to the R console
or used to populate a R markdown document, which can be useful for
documentation purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_grp_describe(
  munic_grp_df,
  max_n = 5,
  format = "inline",
  heading_level = 2,
  sub_heading_level = heading_level + 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_grp_describe_+3A_munic_grp_df">munic_grp_df</code></td>
<td>
<p>A Kolada Municipality Group metadata table, as created
by e.g. <code>get_municipality_groups</code>.</p>
</td></tr>
<tr><td><code id="municipality_grp_describe_+3A_max_n">max_n</code></td>
<td>
<p>The maximum number of KPI groups to describe.</p>
</td></tr>
<tr><td><code id="municipality_grp_describe_+3A_format">format</code></td>
<td>
<p>Output format. Can be one of &quot;inline&quot; or &quot;md&quot; (markdown).</p>
</td></tr>
<tr><td><code id="municipality_grp_describe_+3A_heading_level">heading_level</code></td>
<td>
<p>The top heading level output format is &quot;md&quot;.</p>
</td></tr>
<tr><td><code id="municipality_grp_describe_+3A_sub_heading_level">sub_heading_level</code></td>
<td>
<p>The sub heading level output format is &quot;md&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the object passed to the function, invisibly, to be re-used
in a pipe.
</p>

<hr>
<h2 id='municipality_grp_extract_ids'>Extract municipality ID strings from a Kolada municipality group table</h2><span id='topic+municipality_grp_extract_ids'></span>

<h3>Description</h3>

<p>This function is primarily intended as a convenient way to pass a (filtered)
Kolada municipality group metadata table to <code><a href="#topic+get_values">get_values</a></code>. All IDs
of the municipalities contained in each group in the table are extracted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_grp_extract_ids(munic_grp_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_grp_extract_ids_+3A_munic_grp_df">munic_grp_df</code></td>
<td>
<p>A Kolada municipality group table, as created by e.g.
<code>get_municipality_groups</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of Municipality IDs.
</p>

<hr>
<h2 id='municipality_grp_search'>Search a Kolada Municipality Group metadata table for group names</h2><span id='topic+municipality_grp_search'></span>

<h3>Description</h3>

<p>Search a Kolada Municipality Group metadata table. Only keep rows that
contain the search query. Searches group titles and group IDs. Note that this
function does not search for individual municipalities contained within
municipality groups! To search for KPIs within a KPI group, see examples
below for an example using <code>municipality_grp_unnest</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_grp_search(munic_grp_df, query)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_grp_search_+3A_munic_grp_df">munic_grp_df</code></td>
<td>
<p>A Kolada Municipality Group metadata table, as created by
e.g. <code>get_municipality_groups</code>.</p>
</td></tr>
<tr><td><code id="municipality_grp_search_+3A_query">query</code></td>
<td>
<p>A search term or a vector of search terms to filter by. Case
insensitive.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada Municipality Group metadata table
</p>

<hr>
<h2 id='municipality_grp_unnest'>Create a municipality table from a Kolada Municipality Group metadata table</h2><span id='topic+municipality_grp_unnest'></span>

<h3>Description</h3>

<p>Municipality groups are a convenient way to discover pre-rendered sets of
municipalities. A practical workflow for discovering
such sets can be to search through Municipality Group metadata using
<code><a href="#topic+municipality_grp_search">municipality_grp_search</a></code> to search for keywords and
<code><a href="#topic+municipality_grp_describe">municipality_grp_describe</a></code> to inspect contents of KPI groups.
Once you have created a Municipality Group metadata table that has been
narrowed down to the group/s you are looking for,
<code><a href="#topic+municipality_grp_unnest">municipality_grp_unnest</a></code> is used to create a municipality
metadata table for further processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_grp_unnest(munic_grp_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_grp_unnest_+3A_munic_grp_df">munic_grp_df</code></td>
<td>
<p>A Kolada Municipality Group metadata table, as created by
e.g. <code>get_municipality_groups</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada Municipality metadata table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
# Download Municipality Group metadata
# (skip the parameter "max_results" to actually download all available data)
munic_grp_df &lt;- get_municipality_groups(max_results = 100)

# Create a Municipality metadata table from municipality groups matching the
# term "Arboga"
munic_grp_df %&gt;%
  municipality_grp_search("arboga") %&gt;%
  municipality_grp_unnest()
}

</code></pre>

<hr>
<h2 id='municipality_id_to_name'>Convert a vector of municipality ids to municipality names</h2><span id='topic+municipality_id_to_name'></span>

<h3>Description</h3>

<p>Given a vector of municipality IDs/codes, return a named vector
of names of municipalities or regions. Codes of municipalities and regions
follow
the Swedish standard for municipality codes. The codes extracted can be used
e.g. to pass as a parameter to <code><a href="#topic+get_values">get_values</a></code>. This function is the
inverse to <code><a href="#topic+municipality_name_to_id">municipality_name_to_id</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_id_to_name(munic_df, id, remove_na = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_id_to_name_+3A_munic_df">munic_df</code></td>
<td>
<p>A Kolada Municipality metadata table, as created by e.g.
<code>get_municipality</code>.</p>
</td></tr>
<tr><td><code id="municipality_id_to_name_+3A_id">id</code></td>
<td>
<p>ID ids of one or several municipalities. Allows repeats.</p>
</td></tr>
<tr><td><code id="municipality_id_to_name_+3A_remove_na">remove_na</code></td>
<td>
<p>Should NA return values be removed?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of Municipality names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+municipality_extract_ids">municipality_extract_ids</a></code>,
<code><a href="#topic+municipality_name_to_id">municipality_name_to_id</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
munic_df &lt;- get_municipality()
municipality_id_to_name(munic_df, c("1280", "1281", "0180", "1280"))
}

</code></pre>

<hr>
<h2 id='municipality_name_to_id'>Convert a vector of municipality names to municipality ids</h2><span id='topic+municipality_name_to_id'></span>

<h3>Description</h3>

<p>Given a vector of names of municipalities or regions, return a named vector
of municipality IDs/codes. Codes of municipalities and regions follow
the Swedish standard for municipality codes. The codes extracted can be used
e.g. to pass as a parameter to <code><a href="#topic+get_values">get_values</a></code>. This function is the
inverse to <code><a href="#topic+municipality_id_to_name">municipality_id_to_name</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_name_to_id(munic_df, municipality, remove_na = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_name_to_id_+3A_munic_df">munic_df</code></td>
<td>
<p>A Kolada Municipality metadata table, as created by e.g.
<code>get_municipality</code>.</p>
</td></tr>
<tr><td><code id="municipality_name_to_id_+3A_municipality">municipality</code></td>
<td>
<p>Name of one or several municipalities. Case insensitive.
Allows repeats.</p>
</td></tr>
<tr><td><code id="municipality_name_to_id_+3A_remove_na">remove_na</code></td>
<td>
<p>Should NA return values be removed?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of Municipality IDs.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+municipality_extract_ids">municipality_extract_ids</a></code>,
<code><a href="#topic+municipality_id_to_name">municipality_id_to_name</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
munic_df &lt;- get_municipality()
munic_df %&gt;%
  municipality_name_to_id(c("Arboga", "Lund", "Stockholm", "Arboga"))
}

</code></pre>

<hr>
<h2 id='municipality_search'>Search a Kolada municipality metadata table</h2><span id='topic+municipality_search'></span>

<h3>Description</h3>

<p>Search a Kolada municipality metadata table. Only keep rows that contain the
search query. Note that some a quer might be both the name, or part of a
name, of a municipality and part of the name of a region. Thus, a search
might return rows for both municipalities and regions. To avoid this you can
use <code><a href="dplyr.html#topic+filter">dplyr::filter</a></code> to filter the <code>type</code>
column to keep only &quot;K&quot; (municipalities) or &quot;L&quot; (regions) rows. See also
examples below for an alternative approach avoiding any direct calls to
<code>filter</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>municipality_search(munic_df, query, column = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="municipality_search_+3A_munic_df">munic_df</code></td>
<td>
<p>A Kolada Municipality metadata table, as created by e.g.
<code>get_municipality</code>.</p>
</td></tr>
<tr><td><code id="municipality_search_+3A_query">query</code></td>
<td>
<p>A search term or a vector of search terms to filter by. Case
insensitive.</p>
</td></tr>
<tr><td><code id="municipality_search_+3A_column">column</code></td>
<td>
<p>(Optional) A string or character vector with the names of
columns in which to search for <code>query</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada Municipality metadata table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
# Search for a single search term in a municipality table
munic_df &lt;- get_municipality()
municipality_search(munic_df, "Arboga")

# Only keep columns with type == "K" (keep municipalities, drop regions)
munic_filter &lt;- get_municipality(cache = TRUE) %&gt;%
  municipality_search("K", column = "type")
}

</code></pre>

<hr>
<h2 id='ou_search'>Search a Kolada Organizational Unit metadata table</h2><span id='topic+ou_search'></span>

<h3>Description</h3>

<p>Search a Kolada Organizational Unit metadata table. Only keep rows that
contain the search query. Matches against all columns or columns named
with the <code>column</code> parameter. For more precise matching, please use
<code><a href="dplyr.html#topic+filter">dplyr::filter</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ou_search(ou_df, query, column = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ou_search_+3A_ou_df">ou_df</code></td>
<td>
<p>A Kolada Organizational Unit metadata table, as created by e.g.
<code>get_municipality</code>.</p>
</td></tr>
<tr><td><code id="ou_search_+3A_query">query</code></td>
<td>
<p>A search term or a vector of search terms to filter by. Case
insensitive.</p>
</td></tr>
<tr><td><code id="ou_search_+3A_column">column</code></td>
<td>
<p>(Optional) A string or character vector with the names of
columns in which to search for <code>query</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada Organizational Unit metadata table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (kolada_available()) {
# Search for all OUs matching the search term "skola" (school)
# (skip the parameter "max_results" to actually download all data)
ou_df &lt;- get_ou(max_results = 100)
ou_search(ou_df, "skola")

# Only keep OU entities matching "skola" but not "förskola" (preschool)
# located in Gothenburg municipality and starting with an "A" using
# regex matching
ou_filter &lt;- get_ou(municipality = "1480") %&gt;%
  ou_search("^A", column = "title") %&gt;%
  ou_search("[^(för)]skola")
}

</code></pre>

<hr>
<h2 id='values_legend'>Create KPI long-form descriptions to add to a plot</h2><span id='topic+values_legend'></span>

<h3>Description</h3>

<p>In a Kolada values table, only KPI ID names are preserved. But in plots you
often want to add a legend to explain what each KPI ID represents. But since
KPI explanations are mostly relatively wordy, ggplot2 legends are
under-dimensioned for this task. <code>values_legend</code> returns a string which
can conveniently be used as caption to a plot instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>values_legend(values_df, kpi_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="values_legend_+3A_values_df">values_df</code></td>
<td>
<p>A Kolada value table, as created by
<code><a href="#topic+get_values">get_values</a></code>.</p>
</td></tr>
<tr><td><code id="values_legend_+3A_kpi_df">kpi_df</code></td>
<td>
<p>A KPI table, e.g. as created by <code><a href="#topic+get_kpi">get_kpi</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string which should be used as caption in a plot.
</p>

<hr>
<h2 id='values_minimize'>Simplify a Kolada values table</h2><span id='topic+values_minimize'></span>

<h3>Description</h3>

<p>Simplify a Kolada values table, i.e as created by <code><a href="#topic+get_values">get_values</a></code>,
by removing columns that contain monotonous data, i.e. that contain only one
value for all observations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>values_minimize(values_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="values_minimize_+3A_values_df">values_df</code></td>
<td>
<p>A Kolada value table, as created by
<code><a href="#topic+get_values">get_values</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Kolada values table
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Download values for all available years of a given KPI for
# Malmö municipality (code 1280)
if (kolada_available()) {
vals &lt;- get_values(kpi = "N45933", municipality = "1280", simplify = TRUE)
# (Returns a table with 5 rows and 8 columns)

# Remove columns with no information to differentiate between rows
values_minimize(vals)
# (Returns a table with 5 rows and 4 columns)
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
