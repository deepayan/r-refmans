<!DOCTYPE html><html lang="en-US"><head><title>Help for package knfi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {knfi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#biomass_nfi'><p>Calculate Tree Biomass for National Forest Inventory Data</p></a></li>
<li><a href='#cwd_biomass_nfi'><p>Calculate biomass of Coarse Woody Debris</p></a></li>
<li><a href='#diversity_nfi'><p>Calculate species diversity indices for National Forest Inventory Data</p></a></li>
<li><a href='#filter_nfi'><p>Filter National Forest Inventory Data</p></a></li>
<li><a href='#iv_nfi'><p>Calculates the importance values for National Forest Inventory Data</p></a></li>
<li><a href='#nfi_col'><p>The Korean and English names of the column names</p></a></li>
<li><a href='#nfi_donghae'><p>National Forest Inventory data for Donghae-si, Gangwon-do, Republic of Korea for testing the function</p></a></li>
<li><a href='#read_nfi'><p>Read Korean National Forest Inventory</p></a></li>
<li><a href='#summary_nfi'><p>Calculate descriptive statistics for National Forest Inventory Data</p></a></li>
<li><a href='#switchcol_nfi'><p>Switch column names</p></a></li>
<li><a href='#tsvis_nfi'><p>Visualize time series data for National Forest Inventory Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Analysis of Korean National Forest Inventory Database</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1.9</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sinyoung Park &lt;youngsin0306@kookmin.ac.kr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Understanding the current status of forest resources is essential for monitoring changes 
    in forest ecosystems and generating related statistics. In South Korea, the National Forest
    Inventory (NFI) surveys over 4,500 sample plots nationwide every five years and records 70 items,
    including forest stand, forest resource, and forest vegetation surveys. Many researchers use NFI 
    as the primary data for research, such as biomass estimation or analyzing the importance value of
    each species over time and space, depending on the research purpose. However, the large volume
    of accumulated forest survey data from across the country can make it challenging to manage and
    utilize such a vast dataset. To address this issue, we developed an R package that efficiently
    handles large-scale NFI data across time and space. The package offers a comprehensive 
    workflow for NFI data analysis. It starts with data processing, where read_nfi() function 
    reconstructs NFI data according to the researcher's needs while performing basic integrity checks
    for data quality.Following this, the package provides analytical tools that operate on the verified
    data. These include functions like summary_nfi() for summary statistics, diversity_nfi() for
    biodiversity analysis, iv_nfi() for calculating species importance value, and biomass_nfi() and
    cwd_biomass_nfi() for biomass estimation. Finally, for visualization, the tsvis_nfi() function
    generates graphs and maps, allowing users to visualize forest ecosystem changes across various
    spatial and temporal scales. This integrated approach and its specialized functions can enhance
    the efficiency of processing and analyzing NFI data, providing researchers with insights into
    forest ecosystems. The NFI Excel files (.xlsx) are not included in the R package and must be 
    downloaded  separately. Users can access these NFI Excel files by visiting 
    the Korea Forest Service Forestry Statistics Platform <a href="https://kfss.forest.go.kr/stat/ptl/article/articleList.do?curMenu=11694&amp;amp;bbsId=microdataboard">https://kfss.forest.go.kr/stat/ptl/article/articleList.do?curMenu=11694&amp;bbsId=microdataboard</a>
    to download the annual NFI Excel files, which are bundled in .zip archives. Please note that this 
    website is only available in Korean, and direct download links can be found in the notes section 
    of the read_nfi() function.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Additional_repositories:</td>
<td><a href="https://SYOUNG9836.github.io/drat">https://SYOUNG9836.github.io/drat</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/SYOUNG9836/knfi">https://github.com/SYOUNG9836/knfi</a>,
<a href="https://syoung9836.github.io/knfi/">https://syoung9836.github.io/knfi/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/SYOUNG9836/knfi/issues">https://github.com/SYOUNG9836/knfi/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, magrittr, readxl, stringr, vegan, tidyr, BiodiversityR,
data.table, sf, plotrix, rlang, cellranger, stats, broom,
ggplot2, sp, cowplot, ggpubr, drat, purrr, scales</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>kadmin, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-03 06:55:33 UTC; PSY</td>
</tr>
<tr>
<td>Author:</td>
<td>Sinyoung Park <a href="https://orcid.org/0000-0003-3658-0935"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Wonhee Cho <a href="https://orcid.org/0000-0002-9598-6188"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    ctb],
  Inyoo Kim <a href="https://orcid.org/0000-0002-7709-8224"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    ctb],
  Wontaek Lim <a href="https://orcid.org/0000-0002-5872-1121"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    ctb],
  Dongwook W. Ko <a href="https://orcid.org/0000-0002-6944-0261"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, ths]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-03 07:20:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='biomass_nfi'>Calculate Tree Biomass for National Forest Inventory Data</h2><span id='topic+biomass_nfi'></span>

<h3>Description</h3>

<p>biomass_nfi() function estimates volume, aboveground biomass, biomass, carbon storage and carbon dioxide storage.
It can provide summaries for individual plots, the entire study area, or specific groups within the study area using parameters <code>byplot</code>, <code>plotgrp</code> and <code>treegrp</code>.
When calculating biomass at the individual trees and plots level, users have flexibility in specifying data inclusion criteria and analysis levels using parameters <code>clusterplot</code>, <code>largetreearea</code>, <code>stockedland</code>, and <code>talltree</code>.
These parameters determine whether to treat cluster plots as single plots, to include large tree survey plots, or to focus only on Stocked land and tall trees.
Users can also choose the criteria for post-stratification using the <code>strat</code> parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>biomass_nfi(
  data,
  byplot = FALSE,
  plotgrp = NULL,
  treegrp = NULL,
  continuousplot = FALSE,
  strat = "FORTYP_SUB",
  clusterplot = FALSE,
  largetreearea = TRUE,
  stockedland = TRUE,
  talltree = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="biomass_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> generated by <code><a href="#topic+read_nfi">read_nfi</a></code> that contains 'plot' and 'tree' data frames.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_byplot">byplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, calculates statistics for each plot separately. If FALSE, calculates for the entire dataset or groups specified by <code>plotgrp</code> and <code>treegrp</code>.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_plotgrp">plotgrp</code></td>
<td>
<p>: A character vector; variables from 'plot' tables for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_treegrp">treegrp</code></td>
<td>
<p>: A character vector; variables from 'tree' tables for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_continuousplot">continuousplot</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only plots that have been continuously measured in all NFI cycles (5th, 6th, etc.). If FALSE, includes plots regardless of missing cycle measurements.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_strat">strat</code></td>
<td>
<p>: A character vector; the variable used for post-stratification. In the National Forest Inventory of Korea, it is typically used by forest type.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_clusterplot">clusterplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, treats each cluster plot as a single unit. If FALSE, calculates for each subplot separately.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_largetreearea">largetreearea</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes large tree survey plots in the analysis. If FALSE, only uses standard tree plots.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_stockedland">stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td></tr>
<tr><td><code id="biomass_nfi_+3A_talltree">talltree</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only tall trees. If FALSE, includes both trees and shrubs.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates biomass using methodologies employed for national statistics (mean, variance, standard error, relative standard error):
</p>

<ul>
<li><p> Applies national carbon emission factors to calculate biomass at the individual tree level.
</p>
</li>
<li><p> Estimates biomass per hectare at the cluster or subplot level, with options to include only basic survey trees or both basic and large tree survey trees.
</p>
</li>
<li><p> Uses the Double Sampling for Post-stratification (DSS) method to derive annual statistics.
</p>
</li>
<li><p> Applies the Weighted Moving Average (WMA) method to integrate annual statistics from the 20% of plots surveyed each year into a single time point.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>data.frame</code> that includes biomass estimates.
The structure depends on the input parameters:
</p>

<ul>
<li><p> If <code>byplot = TRUE</code>, each row represents a plot.
</p>
</li>
<li><p> If <code>byplot = FALSE</code>, each row represents the entire dataset or a group specified by <code>plotgrp</code> and <code>treegrp</code>
</p>
</li></ul>



<h3>Note</h3>

<p>Biomass calculation involves dividing the data into groups based on <code>plotgrp</code> and then applying post-stratification to each group.
As a result, if the data for each group is not sufficiently large, the relative standard error (RSE) may be high.
It is important to check the RSE and other statistical measures in the biomass results.
</p>


<h3>References</h3>

<p>Son, Y., Kim, R., Lee, K., Pyo, J., Kim, S., Hwang, J., Lee, S., &amp; Park, H. (2014). Carbon emission factors and biomass allometric equations by species in Korea. Korea Forest Research Institute.
Yim, J., Moon, G., Lee, M., Kang, J., Won, M., Ahn, E., &amp; Jeon, J. (2021). 2020 Forest inventory of Korea. Korea Forest Research Institute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")

# Basic usage
biomass &lt;- biomass_nfi(nfi_donghae, continuousplot = TRUE)

# Calculate biomass by administrative district
district_biomass &lt;- biomass_nfi(nfi_donghae, plotgrp = "SGG", continuousplot=TRUE)

# Calculate biomass for each plot
plot_biomass &lt;- biomass_nfi(nfi_donghae, byplot = TRUE)

</code></pre>

<hr>
<h2 id='cwd_biomass_nfi'>Calculate biomass of Coarse Woody Debris</h2><span id='topic+cwd_biomass_nfi'></span>

<h3>Description</h3>

<p>cwd_biomass_nfi() function estimates volume, carbon storage and carbon dioxide storage of Coarse Woody Debris (CWD).
It can estimate individual plots, the entire study area, or specific groups within the study area using parameters <code>byplot</code>, <code>plotgrp</code> and <code>treegrp</code>.
Users can choose the criteria for post-stratification using the <code>strat</code> parameter.
Users can specify whether to focus only on Stocked land using the <code>stockedland</code> parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cwd_biomass_nfi(
  data,
  byplot = FALSE,
  plotgrp = NULL,
  treegrp = NULL,
  continuousplot = FALSE,
  strat = "FORTYP_SUB",
  stockedland = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cwd_biomass_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> generated by <code><a href="#topic+read_nfi">read_nfi</a></code> that contains 'plot' and 'cwd' data frames.</p>
</td></tr>
<tr><td><code id="cwd_biomass_nfi_+3A_byplot">byplot</code></td>
<td>
<p>:  A logical flag (default FALSE); if TRUE, calculates statistics for each plot separately. If FALSE, calculates for the entire dataset.</p>
</td></tr>
<tr><td><code id="cwd_biomass_nfi_+3A_plotgrp">plotgrp</code></td>
<td>
<p>: A character vector; variables from 'plot' tables for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="cwd_biomass_nfi_+3A_treegrp">treegrp</code></td>
<td>
<p>: A character vector; variables from 'tree' tables for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="cwd_biomass_nfi_+3A_continuousplot">continuousplot</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only plots that have been continuously measured in all NFI cycles (5th, 6th, etc.). If FALSE, includes plots regardless of missing cycle measurements.</p>
</td></tr>
<tr><td><code id="cwd_biomass_nfi_+3A_strat">strat</code></td>
<td>
<p>: A character vector; the variable used for post-stratification. In the National Forest Inventory of Korea, it is typically used by forest type.</p>
</td></tr>
<tr><td><code id="cwd_biomass_nfi_+3A_stockedland">stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates CWD biomass using methodologies employed for national statistics (mean, variance, standard error, relative standard error):
</p>

<ul>
<li><p> Applies national carbon emission factors to calculate CWD biomass at the individual tree level.
</p>
</li>
<li><p> Estimates biomass per hectare at the plot level.
</p>
</li>
<li><p> Uses the Double Sampling for Post-stratification (DSS) method to derive annual statistics.
</p>
</li>
<li><p> Applies the Weighted Moving Average (WMA) method to integrate annual statistics from the 20% of plots surveyed each year into a single time point.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>data.frame</code> that includes CWD biomass for plot or study areas.
The structure depends on the input parameters:
</p>

<ul>
<li><p> If <code>byplot = TRUE</code>, each row represents a plot.
</p>
</li>
<li><p> If <code>byplot = FALSE</code>, each row represents the entire dataset or a group specified by <code>plotgrp</code> and <code>treegrp</code>
</p>
</li></ul>



<h3>Note</h3>

<p>Biomass calculation involves dividing the data into groups based on <code>plotgrp</code> and then applying post-stratification to each group.
As a result, if the data for each group is not sufficiently large, the relative standard error (RSE) may be high.
It is important to check the RSE and other statistical measures in the biomass results.
</p>


<h3>References</h3>

<p>Son, Y., Kim, R., Lee, K., Pyo, J., Kim, S., Hwang, J., Lee, S., &amp; Park, H. (2014). Carbon emission factors and biomass allometric equations by species in Korea. Korea Forest Research Institute.
Yim, J., Moon, G., Lee, M., Kang, J., Won, M., Ahn, E., &amp; Jeon, J. (2021). 2020 Forest inventory of Korea. Korea Forest Research Institute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")

# Basic usage
cwd &lt;- cwd_biomass_nfi(nfi_donghae, continuousplot = TRUE)

# Calculate CWD biomass grouped by administrative district and decay class
cwd_grp &lt;- cwd_biomass_nfi(nfi_donghae, plotgrp = "SGG", treegrp = "DECAY", continuousplot = TRUE)

# Calculate CWD biomass for each plot
plot_biomass &lt;- cwd_biomass_nfi(nfi_donghae, byplot = TRUE)

</code></pre>

<hr>
<h2 id='diversity_nfi'>Calculate species diversity indices for National Forest Inventory Data</h2><span id='topic+diversity_nfi'></span>

<h3>Description</h3>

<p>diversity_nfi() function calculates species richness, evenness and the Shannon and Simpson diversity indices for National Forest Inventory (NFI) data.
It can provide diversity measures for individual plots, the entire study area, or specific groups within the study area using parameters <code>byplot</code> or <code>plotgrp</code>.
The function can calculate diversity at the species or genus level for different vegetation components (trees, herbs, vegetation, saplings).
It uses the <code><a href="vegan.html#topic+diversity">diversity</a></code> function from the <span class="pkg">vegan</span> package for core calculations.
Users have flexibility in specifying data inclusion criteria and analysis levels using parameters <code>clusterplot</code>, <code>largetreearea</code>, <code>stockedland</code>, and <code>talltree</code>.
These parameters determine whether to treat cluster plots as single plots, to include large tree survey plots, and to focus only on Stocked land and tall trees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diversity_nfi(
  data,
  sp = "SP",
  table = "tree",
  basal = FALSE,
  byplot = FALSE,
  plotgrp = NULL,
  continuousplot = FALSE,
  clusterplot = FALSE,
  largetreearea = FALSE,
  stockedland = TRUE,
  talltree = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="diversity_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> generated by <code><a href="#topic+read_nfi">read_nfi</a></code> that contains 'plot' and one of ('tree', 'herb', 'veg', 'sapling') data frames.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_sp">sp</code></td>
<td>
<p>: A character vector; the column name of species information (e.g., &quot;SP&quot; for species, &quot;GENUS&quot; for genus-level analysis).</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_table">table</code></td>
<td>
<p>: A character vector; Specifies which vegetation table to use for diversity analysis. Must be one of 'tree', 'herb', 'veg', 'sapling'.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_basal">basal</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, calculates tree diversity using basal area. If FALSE, uses number of individuals. Only applicable when <code>table = "tree"</code>.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_byplot">byplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, calculates statistics for each plot separately. If FALSE, calculates for the entire dataset.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_plotgrp">plotgrp</code></td>
<td>
<p>: A character vector; specifies variables from 'plot' table to use for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_continuousplot">continuousplot</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only plots that have been continuously measured in all NFI cycles (5th, 6th, etc.). If FALSE, includes plots regardless of missing cycle measurements.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_clusterplot">clusterplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, treats each cluster plot as a single unit. If FALSE, calculates for each subplot separately.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_largetreearea">largetreearea</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, includes large tree survey plots in the analysis. If FALSE, only uses standard tree plots.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_stockedland">stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td></tr>
<tr><td><code id="diversity_nfi_+3A_talltree">talltree</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only tall trees. If FALSE, includes both trees and shrubs.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function calculates the following diversity indices (mean and standard error):
</p>

<ul>
<li><p> Species richness: The total number of species surveyed.
</p>
</li>
<li><p> Shannon-Wiener index: Calculated as the sum of the proportions of individuals or basal area of each species relative to the total.
</p>
</li>
<li><p> Gini-Simpson index: Calculated as 1 minus Simpson's index. Ranges from 0 to 1, with higher values indicating greater diversity.
</p>
</li>
<li><p> Species evenness: Calculated by dividing Shannon diversity by the natural logarithm of species richness.
Ranges from 0 to 1, with 1 indicating that all species are evenly distributed.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>data.frame</code> that includes diversity indices.
The structure depends on the input parameters:
</p>

<ul>
<li><p> If <code>byplot = TRUE</code>, each row represents a plot.
</p>
</li>
<li><p> If <code>byplot = FALSE</code>, each row represents the entire dataset or a group specified by <code>plotgrp</code>
</p>
</li></ul>



<h3>Note</h3>

<p>The 'herb', 'veg', and 'sapling' tables may contain a lot of errors, so use caution when interpreting results from these tables.
</p>


<h3>References</h3>

<p>Shannon, C. E. (1948). A mathematical theory of communication. The Bell System Technical Journal, 27(3), 379–423.
Simpson, E. H. (1949). Measurement of diversity. Nature, 163(4148), 688–688.
Pielou, E. C. (1966). The measurement of diversity in different types of biological collections. Journal of Theoretical Biology, 13, 131–144.
</p>


<h3>See Also</h3>

<p><code><a href="vegan.html#topic+diversity">diversity</a></code> for calculating the Shannon and Simpson diversity indices.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")

# Calculate tree diversity indices using basal area
tree_ba_diversity &lt;- diversity_nfi(nfi_donghae, sp = "SP", table = "tree", 
                                    basal = TRUE, continuousplot = TRUE)

# Calculate tree diversity indices using number of individuals
tree_indi_diversity &lt;- diversity_nfi(nfi_donghae, sp = "SP", table = "tree", 
                                      basal = FALSE, continuousplot = TRUE)

</code></pre>

<hr>
<h2 id='filter_nfi'>Filter National Forest Inventory Data</h2><span id='topic+filter_nfi'></span>

<h3>Description</h3>

<p>The <code>filter_nfi()</code> function provides hierarchical and non-hierarchical filtering approaches for the complex structure of National Forest Inventory data based on user-provided condition expressions (<code>expr_texts</code>).
This function enables effective filtering while maintaining the relationship between plot data (parent data) and other data (child data).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_nfi(data, expr_texts, hier = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> generated by <code><a href="#topic+read_nfi">read_nfi</a></code>. Each dataframe should have a 'SUB_PLOT' column.</p>
</td></tr>
<tr><td><code id="filter_nfi_+3A_expr_texts">expr_texts</code></td>
<td>
<p>: @param expr_texts : A character vector; expressions specifying filtering conditions. Each expression should combine the dataframe name, dollar sign, and condition, with separate expressions for each data frame. (e.g., c(&quot;plot$OWN_CD == '5'&quot;, &quot;tree$FAMILY == 'Pinaceae'&quot;). Conditions must be valid R expressions.</p>
</td></tr>
<tr><td><code id="filter_nfi_+3A_hier">hier</code></td>
<td>
<p>: A logical flag (default TRUE); indicates whether to apply hierarchical filtering (<code>TRUE</code>) or non-hierarchical filtering (<code>FALSE</code>). Hierarchical filtering ensures that connected dataframes are filtered based on the results of filters applied to the parent frame.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function parses expressions targeting specific columns in the dataframes within the provided list.
</p>
<p>Expression requirements:
</p>

<ul>
<li><p> Each expression in <code>expr_texts</code> must start with a valid dataframe name in the list (e.g., &quot;plot&quot;, &quot;tree&quot;, &quot;cwd&quot;) and combine the dataframe name, dollar sign, and condition (e.g. c(&quot;plot$OWN_CD == '5'&quot;).
</p>
</li>
<li><p> Separate expressions must be provided for each dataframe being filtered (e.g. c(&quot;plot$OWN_CD == '5'&quot;, &quot;tree$FAMILY == 'Pinaceae' | tree$WDY_PLNTS_TYP_CD == '1'&quot;).
</p>
</li></ul>

<p>Hierarchical filtering (<code>hier = TRUE</code>):
</p>

<ul>
<li><p> Filters applied to plot table affect all connected child data (tree, CWD, stump, etc.).
</p>
</li>
<li><p> Filters applied to child data only operate within that dataframe and do not affect other dataframes.
</p>
</li>
<li><p> Example: If only coniferous forest subplots are selected in the plot table, the child data will retain only the tree, CWD, stump, etc., associated with those subplots.
</p>
</li></ul>

<p>Non-hierarchical filtering (<code>hier = FALSE</code>):
</p>

<ul>
<li><p> Filters applied to the parent dataframe (plot table) do not affect the child data.
</p>
</li>
<li><p> Filtering results from child data affect all other parent and child data.
</p>
</li>
<li><p> Example: If only certain species are selected in the tree table, the plot table, CWD table, stump table, etc., will be filtered based on the remaining subplots from this selection.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>list</code> of dataframes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")

# Applying hierarchical filtering to select only privately owned forest subplots.
# Ensures all child tables' subplots match the filtered plot table's subplots.
# Expected results after filtering:
# all(nfi_donghae$tree$SUB_PLOT %in% nfi_donghae$plot$SUB_PLOT)  result: TRUE
nfi_donghae &lt;- filter_nfi(nfi_donghae, c("plot$OWN_CD == '5'"), hier = TRUE)

 
# Non-hierarchical filtering to select only privately owned forest subplots.
# Child tables remain unfiltered and may not correspond to the plot table subplots.
# Expected results after filtering:
# all(nfi_donghae$tree$SUB_PLOT %in% nfi_donghae$plot$SUB_PLOT)  result: FALSE
nfi_donghae &lt;- filter_nfi(nfi_donghae, c("plot$OWN_CD == '5'"), hier = FALSE)

# Non-Hierarchical Filtering with only woody plants.
# Other tables remain filtered and correspond to the tree table.
# Expected results after filtering:
# all(nfi_donghae$plot$SUB_PLOT %in% nfi_donghae$tree$SUB_PLOT)  result: TRUE
nfi_donghae &lt;- filter_nfi(nfi_donghae, c("tree$WDY_PLNTS_TYP_CD == '1'"), hier = FALSE)

# Combining multiple filters across different dataframes
nfi_donghae &lt;- filter_nfi(nfi_donghae, 
                    c("plot$OWN_CD == '5'", 
                    "tree$FAMILY == 'Pinaceae' | tree$WDY_PLNTS_TYP_CD == '1'"))


</code></pre>

<hr>
<h2 id='iv_nfi'>Calculates the importance values for National Forest Inventory Data</h2><span id='topic+iv_nfi'></span>

<h3>Description</h3>

<p>iv_nfi() function calculates the importance values of tree species based on frequency, density and coverage.
It can estimate the entire study area or specific groups within it using the <code>plotgrp</code> parameter.
It uses the <code><a href="BiodiversityR.html#topic+importancevalue">importancevalue</a></code> function from the <span class="pkg">BiodiversityR</span> package for core calculations.
Users have flexibility in specifying data inclusion criteria and analysis levels using parameters <code>frequency</code>, <code>clusterplot</code>, <code>largetreearea</code>, <code>stockedland</code>, and <code>talltree</code>.
These parameters determine whether to include frequency in importance calculations, to treat cluster plots as single plots, to include large tree survey plots, and to focus only on Stocked land and tall trees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iv_nfi(
  data,
  sp = "SP",
  frequency = TRUE,
  plotgrp = NULL,
  continuousplot = FALSE,
  clusterplot = FALSE,
  largetreearea = FALSE,
  stockedland = TRUE,
  talltree = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iv_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> generated by <code><a href="#topic+read_nfi">read_nfi</a></code> that contains 'plot' and 'tree' data frames.</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_sp">sp</code></td>
<td>
<p>:A character vector; the column name of species information (e.g., &quot;SP&quot; for species, &quot;GENUS&quot; for genus-level analysis).</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_frequency">frequency</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes frequency in importance value calculations.</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_plotgrp">plotgrp</code></td>
<td>
<p>: A character vector; specifies variables from 'plot' table to use for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_continuousplot">continuousplot</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only plots that have been continuously measured in all NFI cycles (5th, 6th, etc.). If FALSE, includes plots regardless of missing cycle measurements.</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_clusterplot">clusterplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, treats each cluster plot as a single unit. If FALSE, calculates for each subplot separately.</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_largetreearea">largetreearea</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, includes large tree survey plots in the analysis. If FALSE, only uses standard tree plots.</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_stockedland">stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td></tr>
<tr><td><code id="iv_nfi_+3A_talltree">talltree</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only tall trees. If FALSE, includes both trees and shrubs.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The importance value (ranging from 0 to 100) is calculated as the mean of:
</p>

<ol>
<li><p> Relative frequency: (number of plots where a species is observed / total survey plots) * 100
</p>
</li>
<li><p> Relative density: (total number of individuals of a species / sum of all species' densities) * 100
</p>
</li>
<li><p> Relative coverage: (total basal area of a species / sum of all species' basal area) * 100
</p>
</li></ol>



<h3>Value</h3>

<p>A <code>data.frame</code> that includes importance value for tree species. Each row represents a combination of a tree species and groups specified by plotgrp and treegrp.
</p>


<h3>Note</h3>


<ul>
<li><p> Consider calculating importance by genus rather than species due to potential incompleteness in species classification.
</p>
</li>
<li><p> Since the frequencies of each species may be identical across the nation, it may be desirable to exclude frequency from the importance calculation.
</p>
</li></ul>



<h3>References</h3>

<p>Curtis, J. T. &amp; McIntosh, R. P. (1951). An upland forest continuum in the prairie-forest border region of Wisconsin. Ecology, 32(3), 476–496.
</p>


<h3>See Also</h3>

<p><code><a href="BiodiversityR.html#topic+importancevalue">importancevalue</a></code> for calculating the importance values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")
# Calculate importance values without frequency
importance &lt;- iv_nfi(nfi_donghae, sp = "SP", frequency = FALSE, continuousplot = TRUE)

# Calculate importance values using genus
genus_importance &lt;- iv_nfi(nfi_donghae, sp = "GENUS", continuousplot = TRUE)

</code></pre>

<hr>
<h2 id='nfi_col'>The Korean and English names of the column names</h2><span id='topic+nfi_col'></span>

<h3>Description</h3>

<p>The Korean and English names of the column names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nfi_col
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 174 rows and 3 columns.
</p>

<hr>
<h2 id='nfi_donghae'>National Forest Inventory data for Donghae-si, Gangwon-do, Republic of Korea for testing the function</h2><span id='topic+nfi_donghae'></span>

<h3>Description</h3>

<p>National Forest Inventory data for Donghae-si, Gangwon-do, Republic of Korea for testing the function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nfi_donghae
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 3.
</p>

<hr>
<h2 id='read_nfi'>Read Korean National Forest Inventory</h2><span id='topic+read_nfi'></span>

<h3>Description</h3>

<p>read_nfi() function reads and processes the Korean National Forest Inventory (NFI).
It loads annual NFI files from a local computer, transforms the data into an analysis-friendly format, and performs data integrity verification.
Users can specify districts and tables to load.
When loading data from the original NFI Excel files, the function will automatically handle the translation of Korean column names to English - no manual translation is required.
NFI data can be downloaded from <a href="https://kfss.forest.go.kr/stat/">https://kfss.forest.go.kr/stat/</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_nfi(
  dir,
  district = NULL,
  tables = c("tree", "cwd"),
  pattern = "xlsx",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_nfi_+3A_dir">dir</code></td>
<td>
<p>: A character vector; The directory containing NFI files.</p>
</td></tr>
<tr><td><code id="read_nfi_+3A_district">district</code></td>
<td>
<p>: A character vector; The district names in Korean (sido, sigungu, or eupmyondong levels). If <code>NULL</code>, the entire dataset is loaded. Combine multiple districts using <code>c()</code>.</p>
</td></tr>
<tr><td><code id="read_nfi_+3A_tables">tables</code></td>
<td>
<p>: A character vector; tables to import. Options: 'tree', 'cwd', 'stump', 'sapling', 'veg', 'herb', 'soil'. Combine multiple tables using <code>c()</code>. e.g., <code>c('tree', 'cwd', 'stump', 'sapling', 'veg', 'herb', 'soil')</code>.</p>
</td></tr>
<tr><td><code id="read_nfi_+3A_pattern">pattern</code></td>
<td>
<p>: A character vector; (default &quot;xlsx&quot;); file pattern to match when loading NFI files. Use regular expressions to filter specific files (e.g., &quot;NFI5.*xlsx&quot; for 5th NFI files only)</p>
</td></tr>
<tr><td><code id="read_nfi_+3A_...">...</code></td>
<td>
<p>: Additional arguments to be passed to <code>list.files()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function can load the following tables:
</p>
<p><code>plot</code> Base table containing subplot data including site, stand and non-forest area, among other details (automatically included).
</p>
<p><code>tree</code> Tree survey table including species, DBH, and height, among others. Data is collected from trees and large trees survey plot of subplot.
</p>
<p><code>cwd</code> Coarse woody debris table including species, tree decay level, and cause of death, among other details. Data is collected only at the center subplot of the cluster plot.
</p>
<p><code>stump</code> Stumps table including species and diameter at 20 cm above the ground, among other details. Data is collected only at the center subplot of the cluster.
</p>
<p><code>sapling</code> Saplings table including species, diameter at 20 cm above the ground, and the number of individuals, among other details. Data is collected only at the sapling survey plot of the subplot.
</p>
<p><code>veg</code> Vegetation table (both woody and herbaceous plants). It records species, number of individuals, and dominance, among others. Data is collected from three vegetation survey plots located within each selected center subplot. The selection includes 25% of the total number of center subplots.
</p>
<p><code>herb</code> Herbaceous table focused on the herbaceous list. Data is collected only at the sapling survey plot of the subplot.
</p>
<p><code>soil</code> Soil table including the thickness of the organic layer and soil depth, among others. Data is collected from three soil survey plots located within each selected center subplot. The selection includes 25% of the total number of center subplots.
</p>
<p>For more details, refer to the National Forest Inventory guidelines.
</p>
<p>This function performs several data integrity validation.
</p>

<ol>
<li><p> Corrects administrative region information for subplots. (col: SIDO, SIDO_CD, SGG, SGG_CD, EMD, EMD_CD)
</p>
</li>
<li><p> Adds ecoregion and catchment for subplots. (col: ECOREGION, CATCHMENT)
</p>
</li>
<li><p> Verifies and corrects coniferous/deciduous classification of tree species. (col: CONDEC_CLASS, CONDEC_CLASS_CD, WDY_PLNTS_TYP, WDY_PLNTS_TYP_CD)
</p>
</li>
<li><p> Adds scientific names for species. (col: SCIENTIFIC_NAME)
</p>
</li>
<li><p> Adds Korean and English names for plant families and genera. (col: FAMILY, FAMILY_KOREAN, GENUS, GENUS_KOREAN)
</p>
</li>
<li><p> Adds whether a plant is native or cultivated, and identifies if it is a food, medicinal, fiber, or ornamental resource. (col: NATIVE_CULTIVATED, FOOD, MEDICINAL, FIBER, ORNAMENTAL)
</p>
</li>
<li><p> Calculates basal area for individual tree (col: BASAL_AREA)
</p>
</li>
<li><p> Calculates forest type, dominant species, and dominant species percentage for each subplot and cluster plot. (col: FORTYP_SUB, DOMIN_PERCNT_SUB, DOMIN_SP_SUB, FORTYP_CLST, DOMIN_PERCNT_CLST, DOMIN_SP_CLST)
Species classification and taxonomy follow the standards set by the Korean Plant Names Index Committee of the Korea National Arboretum <a href="http://www.nature.go.kr/kpni/index.do">http://www.nature.go.kr/kpni/index.do</a>.
</p>
</li></ol>



<h3>Value</h3>

<p>A <code>data.frame</code>; the processed NFI data, structured for easy analysis.
</p>


<h3>Note</h3>

<p>To manually download subsets of the annual NFI file, visit the Korea Forest Service Forestry Statistics Platform (<a href="https://kfss.forest.go.kr/stat/">https://kfss.forest.go.kr/stat/</a>), download .zip files, and extract them.
</p>
<p>-The 5th National Forest Inventory file: <a href="https://kfss.forest.go.kr/stat/ptl/article/articleFileDown.do?fileSeq=2995&amp;workSeq=2203">https://kfss.forest.go.kr/stat/ptl/article/articleFileDown.do?fileSeq=2995&amp;workSeq=2203</a>
-The 6th National Forest Inventory file: <a href="https://kfss.forest.go.kr/stat/ptl/article/articleFileDown.do?fileSeq=2996&amp;workSeq=2204">https://kfss.forest.go.kr/stat/ptl/article/articleFileDown.do?fileSeq=2996&amp;workSeq=2204</a>
-The 7th National Forest Inventory file: <a href="https://kfss.forest.go.kr/stat/ptl/article/articleFileDown.do?fileSeq=2997&amp;workSeq=2205">https://kfss.forest.go.kr/stat/ptl/article/articleFileDown.do?fileSeq=2997&amp;workSeq=2205</a>
</p>
<p>Use <code>data("nfi_col")</code> to view the Korean and English names of the column names.
</p>
<p>While the National Forest Inventory undergoes rigorous quality control, including internal reviews  and field inspections, errors may still exist due to the extensive nature of the survey (approximately 4,000 plots and over 70 items in the 7th phase).
Please use the data cautiously and report any anomalies to help improve our algorithms.
</p>
<p>If you want to save the results to your computer, you can save them in Excel format.
For example, you can use the following code:<code>writexl::write_xlsx(data, "data.xlsx")</code>
</p>
<p>If you want to read the saved data back, use the code below:
<code>path &lt;-"../nfi_donghae.xlsx"</code>
<code>sheet_names &lt;- readxl::excel_sheets(path)</code>
<code>for (sheet_name in sheet_names) {nfi[[sheet_name]] &lt;- readxl::read_excel(path, sheet = sheet_name) }</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 # Load tree and CWD data for all districts
 nfi5_data &lt;- read_nfi("D:/NFI/", district = NULL, tables = c("tree", "cwd"), recursive = TRUE)


</code></pre>

<hr>
<h2 id='summary_nfi'>Calculate descriptive statistics for National Forest Inventory Data</h2><span id='topic+summary_nfi'></span>

<h3>Description</h3>

<p>summary_nfi() is a function that calculates comprehensive descriptive statistics for National Forest Inventory (NFI) data.
It can provide summaries for individual plots, the entire study area, or specific groups within the study area using parameters <code>byplot</code> or <code>plotgrp</code>.
Users have flexibility in specifying data inclusion criteria and analysis levels using parameters <code>clusterplot</code>, <code>largetreearea</code>, <code>stockedland</code>, and <code>talltree</code>.
These parameters determine whether to treat cluster plots as single plots, to include large tree survey plots, and to focus only on Stocked land and tall trees.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary_nfi(
  data,
  byplot = FALSE,
  plotgrp = NULL,
  continuousplot = FALSE,
  clusterplot = FALSE,
  largetreearea = TRUE,
  stockedland = TRUE,
  talltree = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> containing 'plot' and 'tree' data frames, typically generated by <code><a href="#topic+read_nfi">read_nfi</a></code>.</p>
</td></tr>
<tr><td><code id="summary_nfi_+3A_byplot">byplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, calculates statistics for each plot separately. If FALSE, calculates for the entire dataset.</p>
</td></tr>
<tr><td><code id="summary_nfi_+3A_plotgrp">plotgrp</code></td>
<td>
<p>: A character vector; specifies variables from 'plot' table to use for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="summary_nfi_+3A_continuousplot">continuousplot</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only plots that have been continuously measured in all NFI cycles (5th, 6th, etc.). If FALSE, includes plots regardless of missing cycle measurements.</p>
</td></tr>
<tr><td><code id="summary_nfi_+3A_clusterplot">clusterplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, treats each cluster plot as a single unit. If FALSE, calculates for each subplot separately.</p>
</td></tr>
<tr><td><code id="summary_nfi_+3A_largetreearea">largetreearea</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes large tree survey plots in the analysis. If FALSE, only uses standard tree plots.</p>
</td></tr>
<tr><td><code id="summary_nfi_+3A_stockedland">stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td></tr>
<tr><td><code id="summary_nfi_+3A_talltree">talltree</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only tall trees. If FALSE, includes both trees and shrubs.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function calculates the following statistics:
Plot-related statistics:
</p>

<ul>
<li><p> Number of cluster plots
</p>
</li>
<li><p> Number of subplots
</p>
</li>
<li><p> Number of subplots with large trees (<code class="reqn">\geq</code> 30cm) observed
</p>
</li></ul>

<p>Tree-related statistics:
</p>

<ul>
<li><p> Number of individual trees
</p>
</li>
<li><p> Number of large trees
</p>
</li>
<li><p> Number of dominant trees
</p>
</li>
<li><p> Number of tree species
</p>
</li></ul>

<p>Tree measurements and stand statistics (mean and standard deviation):
</p>

<ul>
<li><p> DBH (Diameter at Breast Height)
</p>
</li>
<li><p> Tree height
</p>
</li>
<li><p> Height of dominant trees
</p>
</li>
<li><p> Number of trees per hectare
</p>
</li>
<li><p> Basal area per hectare
</p>
</li>
<li><p> Volume per hectare
</p>
</li></ul>

<p>The <code>largetreearea</code> parameter affects calculations differently:
</p>

<ul>
<li><p> For per-hectare statistics (trees per hectare, basal area per hectare, volume per hectare), setting <code>largetreearea = TRUE</code> includes data from large tree survey plots.
</p>
</li>
<li><p> For all other statistics, trees from large tree survey plots are always excluded, regardless of the <code>largetreearea</code> setting.
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>data.frame</code> that includes summary statistics.
The structure depends on the input parameters:
</p>

<ul>
<li><p> If <code>byplot = TRUE</code>, each row represents a plot.
</p>
</li>
<li><p> If <code>byplot = FALSE</code>, each row represents the entire dataset or a group specified by <code>plotgrp</code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")

# Basic usage
summary_stats &lt;- summary_nfi(nfi_donghae, continuousplot = TRUE)

# Summarize by the group, including all land types
grouped_stats &lt;- summary_nfi(nfi_donghae, plotgrp = "OWN_CD", 
                              stockedland = FALSE, continuousplot = TRUE)

# Summarize by individual plots, including both trees and shrubs 
plot_summaries &lt;- summary_nfi(nfi_donghae, byplot = TRUE, talltree = FALSE)

</code></pre>

<hr>
<h2 id='switchcol_nfi'>Switch column names</h2><span id='topic+switchcol_nfi'></span>

<h3>Description</h3>

<p>The <code>switchcol_nfi()</code> function allows switching between the original Korean column names and English column names.
If the input data has English column names, it changes them to the original Korean names, and vice versa.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>switchcol_nfi(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="switchcol_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> generated by <code><a href="#topic+read_nfi">read_nfi</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Important: Data with original Korean column names cannot be used with any <code><a href="#topic+read_nfi">read_nfi</a></code> functions except <code>switchcol_nfi()</code> itself.
The option to revert to original Korean names is provided solely for users who wish to store or process the NFI data with original column names.
</p>


<h3>Value</h3>

<p>A <code>list</code> of dataframes with switched column names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")

#Switch column names from English to original Korean names
nfi_donghae_kor &lt;- switchcol_nfi(nfi_donghae)

# Switch column names from original Korean to English names
nfi_donghae_eng &lt;- switchcol_nfi(nfi_donghae_kor)

</code></pre>

<hr>
<h2 id='tsvis_nfi'>Visualize time series data for National Forest Inventory Data</h2><span id='topic+tsvis_nfi'></span>

<h3>Description</h3>

<p>tsvis_nfi() function analyzes and visualizes data in a time series format. It can visualize 'biomass', 'cwd', and 'iv' data as 'table', 'line', 'bar', or 'map'.
Users need to select the specific biomass variable, such as volume or carbon to visualize biomass.
For map visualization of biomass, users must choose the administrative unit level.
It uses the <code><a href="#topic+iv_nfi">iv_nfi</a></code> and <code><a href="#topic+biomass_nfi">biomass_nfi</a></code> and <code><a href="#topic+cwd_biomass_nfi">cwd_biomass_nfi</a></code> function for core calculations.
The function accepts various parameters depending on the analysis type:
Common parameters: data, y, output, plotgrp, isannual, ncol, nrow
Additional parameters by type:
biomass: bm_type(except for 'table'), admin(only 'map'), treegrp, strat, stockedland, talltree, clusterplot, largetreearea
cwd: bm_type(except for 'table'), admin(only 'map'), treegrp, strat, stockedland
iv: sp, frequency, top
When y is set to either 'biomass' or 'cwd':
For map output, the function displays two side-by-side spatial visualizations: one showing the results and another showing the relative standard error (RSE).
For line or bar outputs, results are displayed with error bars based on the standard error (SE) of the estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsvis_nfi(
  data,
  y = "biomass",
  bm_type = NULL,
  output = "line",
  plotgrp = NULL,
  treegrp = NULL,
  isannual = TRUE,
  continuousplot = FALSE,
  admin = NULL,
  strat = "FORTYP_SUB",
  clusterplot = FALSE,
  largetreearea = TRUE,
  stockedland = TRUE,
  talltree = TRUE,
  sp = "SP",
  frequency = TRUE,
  ncol = NULL,
  nrow = NULL,
  top = 20
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tsvis_nfi_+3A_data">data</code></td>
<td>
<p>: A <code>list</code> generated by <code><a href="#topic+read_nfi">read_nfi</a></code> that contains 'plot' and 'tree' data frames.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_y">y</code></td>
<td>
<p>: A character vector; the variable to visualize. Must be one of 'biomass', 'cwd', 'iv'.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_bm_type">bm_type</code></td>
<td>
<p>: A character vector; the specific variable to visualize for 'biomass' or 'cwd'. Must be one of 'volume', 'biomass', 'AG_biomass', 'carbon', 'co2'.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_output">output</code></td>
<td>
<p>: A character vector; the desired type of visualization. Must be one of 'table', 'line', 'bar', 'map'.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_plotgrp">plotgrp</code></td>
<td>
<p>: A character vector; specifies variables from the 'plot' table to use for grouping. Use <code>c()</code> to combine multiple variables, but if the output is a map, line or bar plot, only one variable can be used.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_treegrp">treegrp</code></td>
<td>
<p>: A character vector; variables from 'tree' tables for grouping. Use <code>c()</code> to combine multiple variables.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_isannual">isannual</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, the result is provided annually, if FALSE, it is provided in 5-year intervals.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_continuousplot">continuousplot</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only plots that have been continuously measured in all NFI cycles (5th, 6th, etc.). If FALSE, includes plots regardless of missing cycle measurements.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_admin">admin</code></td>
<td>
<p>: A character vector; the administrative unit for visualizing 'biomass' or 'cwd' as a map. Must be one of 'sido', 'sgg', 'emg'.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_strat">strat</code></td>
<td>
<p>: A character vector; the variable used for post-stratification. In the National Forest Inventory of Korea, it is typically used by forest type.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_clusterplot">clusterplot</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, treats each cluster plot as a single unit. If FALSE, calculates for each subplot separately.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_largetreearea">largetreearea</code></td>
<td>
<p>: A logical flag (default FALSE); if TRUE, includes large tree survey plots in the analysis. If FALSE, only uses standard tree plots.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_stockedland">stockedland</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only stocked land. If FALSE, includes all land types.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_talltree">talltree</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes only tall trees. If FALSE, includes both trees and shrubs.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_sp">sp</code></td>
<td>
<p>: A character vector; the column name of species information (e.g., &quot;SP&quot; for species, &quot;GENUS&quot; for genus-level analysis).</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_frequency">frequency</code></td>
<td>
<p>: A logical flag (default TRUE); if TRUE, includes frequency in importance value calculations.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_ncol">ncol</code></td>
<td>
<p>: A numeric vector (default NULL); Number of columns in the grid layout when faceting by <var>plotgrp</var>.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_nrow">nrow</code></td>
<td>
<p>: A numeric vector (default NULL); Number of columns in the grid layout when faceting by <var>plotgrp</var>.</p>
</td></tr>
<tr><td><code id="tsvis_nfi_+3A_top">top</code></td>
<td>
<p>: A numeric vector (default 20); Number of top species to display in 'iv' plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the output is a map, line, or bar plot: an object of class <span class="pkg">ggplot</span>.
If the output is a table: a <code>data.frame</code>.
</p>


<h3>Note</h3>

<p>To visualize data as a map, you need to agree to install the <code>kadmin</code> package during the function execution or install it in advance.
The <code>kadmin</code> package loads shapefiles for Korea's Si, Do or Si, Gun, Gu or Eup, Myeon, Dong.
Use <code style="white-space: pre;">&#8288;drat::addRepo("SYOUNG9836") install.packages("kadmin")&#8288;</code> or <code>remotes::install_github("SYOUNG9836/kadmin")</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+iv_nfi">iv_nfi</a></code> for calculating the importance values.
<code><a href="#topic+biomass_nfi">biomass_nfi</a></code> for calculating the biomass.
<code><a href="#topic+cwd_biomass_nfi">cwd_biomass_nfi</a></code> for calculating the biomass of Coarse Woody Debris.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("nfi_donghae")

# Visualize importance values as a table
tsvis_iv &lt;- tsvis_nfi(nfi_donghae, y = "iv", output = "table", continuousplot = TRUE)

# Create a bar plot of importance values at 5-year intervals
tsvis_iv_bar &lt;- tsvis_nfi(nfi_donghae, y = "iv", output = "bar", isannual = FALSE, 
                            continuousplot = TRUE)

# Generate a line plot of carbon biomass over time, grouped by age class
tsvis_bm_line &lt;- tsvis_nfi(nfi_donghae, y = "biomass", top = 10, bm_type = "carbon", 
                            output = "line", plotgrp = "AGE_CLS", continuousplot = TRUE)
                            

# Create a map of volume at the sido level
tsvis_bm_map &lt;- tsvis_nfi(nfi_donghae, admin = "sido", 
                           y = "biomass", bm_type = "volume", output = "map", continuousplot = TRUE)



</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
