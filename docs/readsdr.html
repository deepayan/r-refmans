<!DOCTYPE html><html><head><title>Help for package readsdr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {readsdr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#create_stan_function'><p>Create a Stan's ODE function from an XMILE file</p></a></li>
<li><a href='#extract_timeseries_stock'><p>Extract the values over time of a stock from a Stan fit</p></a></li>
<li><a href='#extract_timeseries_var'><p>Extract the values over time of a variable from a Stan fit</p></a></li>
<li><a href='#read_xmile'><p>Read an XMILE file into R</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#sd_constants'><p>Summarise the information of a model's constants in a data frame</p></a></li>
<li><a href='#sd_pulse_s'><p>Replicate the behaviour of the PULSE function from Stella</p></a></li>
<li><a href='#sd_pulse_train'><p>PULSE TRAIN</p></a></li>
<li><a href='#sd_pulse_v'><p>Replicate the behaviour of the PULSE function from Vensim</p></a></li>
<li><a href='#sd_sensitivity_run'><p>Perform a sensitivity run on a System Dynamics model</p></a></li>
<li><a href='#sd_simulate'><p>Simulate a System Dynamics model</p></a></li>
<li><a href='#sd_stocks'><p>Summarise the information of a model's stocks in a data frame</p></a></li>
<li><a href='#stan_data'><p>Stan's data block for ODE models</p></a></li>
<li><a href='#stan_ode_function'><p>Create Stan ODE function</p></a></li>
<li><a href='#stan_transformed_data'><p>Stan's transformed data block for ODE models</p></a></li>
<li><a href='#xmile_to_deSolve'><p>Parse XMILE to deSolve components</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Translate Models from System Dynamics Software into 'R'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>The goal of 'readsdr' is to bridge the design capabilities from
    specialised System Dynamics software with the powerful numerical tools 
    offered by 'R' libraries. The package accomplishes this goal by parsing 
    'XMILE' files ('Vensim' and 'Stella') models into 'R' objects to construct 
    networks (graph theory); 'ODE' functions for 'Stan'; and inputs to simulate
    via 'deSolve' as described in Duggan (2016) &lt;<a href="https://doi.org/10.1007%2F978-3-319-34043-2">doi:10.1007/978-3-319-34043-2</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.1.0), igraph, knitr, rmarkdown, ggplot2, tidyr</td>
</tr>
<tr>
<td>Imports:</td>
<td>stringr, xml2, purrr, dplyr, rlang, stringi, magrittr, stats,
deSolve, parallel</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jandraor/readsdr/issues">https://github.com/jandraor/readsdr/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-01-08 13:51:14 UTC; jandraor</td>
</tr>
<tr>
<td>Author:</td>
<td>Jair Andrade <a href="https://orcid.org/0000-0002-1412-7868"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jair Andrade &lt;jair.albert.andrade@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-08 16:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='create_stan_function'>Create a Stan's ODE function from an XMILE file</h2><span id='topic+create_stan_function'></span>

<h3>Description</h3>

<p><code>create_stan_function</code> returns a string with the code for a Stan's ODE function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_stan_function(
  filepath,
  func_name,
  pars = NULL,
  override.consts = NULL,
  additional_funs = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_stan_function_+3A_filepath">filepath</code></td>
<td>
<p>A string that indicates a path to a file with extension .stmx
or .xmile. Vensim files (.mdl) are not xmile files. They must be exported
from Vensim with extension .xmile</p>
</td></tr>
<tr><td><code id="create_stan_function_+3A_func_name">func_name</code></td>
<td>
<p>A string for naming the ODE function</p>
</td></tr>
<tr><td><code id="create_stan_function_+3A_pars">pars</code></td>
<td>
<p>A character vector that indicates which constants will be
considered as parameters in the ODE function</p>
</td></tr>
<tr><td><code id="create_stan_function_+3A_override.consts">override.consts</code></td>
<td>
<p>A list in which each element is a name-value pair that
replaces values of constants.</p>
</td></tr>
<tr><td><code id="create_stan_function_+3A_additional_funs">additional_funs</code></td>
<td>
<p>A vector of strings. Each string corresponds to a
user-defined function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function extracts the xml from the file specified via <code>filepath</code> to
generate the code for an equivalent model in Stan.
</p>


<h3>Value</h3>

<p>A string with the code containing the model's equations in the
format required by Stan.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("models", "SIR.stmx", package = "readsdr")
create_stan_function(path, "my_model")
</code></pre>

<hr>
<h2 id='extract_timeseries_stock'>Extract the values over time of a stock from a Stan fit</h2><span id='topic+extract_timeseries_stock'></span>

<h3>Description</h3>

<p>Extract the values over time of a stock from a Stan fit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_timeseries_stock(stock_name, posterior_df, all_stocks, ODE_output)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_timeseries_stock_+3A_stock_name">stock_name</code></td>
<td>
<p>A string that indicates the stock's name for which the
function will construct the timeseries.</p>
</td></tr>
<tr><td><code id="extract_timeseries_stock_+3A_posterior_df">posterior_df</code></td>
<td>
<p>A Stan fit object converted into a data frame</p>
</td></tr>
<tr><td><code id="extract_timeseries_stock_+3A_all_stocks">all_stocks</code></td>
<td>
<p>A vector of strings that contains the names of all the
stocks in the model. This vector must have the same order as the differential
equations in the Stan code.</p>
</td></tr>
<tr><td><code id="extract_timeseries_stock_+3A_ode_output">ODE_output</code></td>
<td>
<p>A string that indicates the name of the variable where
model's output in stored in Stan.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>posterior_df &lt;- data.frame(`yhat[1,2]` = rep(0, 2), `yhat[2,2]` = rep(1, 2),
                            check.names = FALSE)
stocks       &lt;- c("S1", "S2")
extract_timeseries_stock("S2", posterior_df, stocks, "yhat")
</code></pre>

<hr>
<h2 id='extract_timeseries_var'>Extract the values over time of a variable from a Stan fit</h2><span id='topic+extract_timeseries_var'></span>

<h3>Description</h3>

<p>Extract the values over time of a variable from a Stan fit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_timeseries_var(var_name, posterior_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_timeseries_var_+3A_var_name">var_name</code></td>
<td>
<p>A string that indicates the variable's name for which the
function will construct the timeseries.</p>
</td></tr>
<tr><td><code id="extract_timeseries_var_+3A_posterior_df">posterior_df</code></td>
<td>
<p>A Stan fit object converted into a data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>posterior_df &lt;- data.frame(`var[1]` = rep(0, 2), `var[2]` = rep(1, 2),
                            check.names = FALSE)
extract_timeseries_var("var", posterior_df)
</code></pre>

<hr>
<h2 id='read_xmile'>Read an XMILE file into R</h2><span id='topic+read_xmile'></span>

<h3>Description</h3>

<p><code>read_xmile</code> returns a list for constructing deSolve functions and graphs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_xmile(filepath, stock_list = NULL, const_list = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_xmile_+3A_filepath">filepath</code></td>
<td>
<p>A string that indicates a path to a file with extension .stmx
or .xmile. Vensim files (.mdl) are not xmile files. They must be exported
from Vensim with extension .xmile</p>
</td></tr>
<tr><td><code id="read_xmile_+3A_stock_list">stock_list</code></td>
<td>
<p>A list in which each element's name is the name of the
stock to override and the element's value correspond to the new init value.</p>
</td></tr>
<tr><td><code id="read_xmile_+3A_const_list">const_list</code></td>
<td>
<p>A list in which each element's name is the name of the
constant to override and the element's value correspond to the new value.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function extracts the xml from the file specified via <code>filepath</code>
to generate a list of objects. Such a list contains a summary of the model,
the inputs for simulating through <a href="deSolve.html#topic+deSolve">deSolve</a>, and the inputs for
creating a <a href="igraph.html#topic+igraph">igraph</a> object.
</p>


<h3>Value</h3>

<p>This function returns a list with three elements. The first element,
<em>description</em>, is a list that contains the simulation parameters, and
the names and equations (including graphical functions) for each stock or
level, variable and constant. The second element, <em>deSolve_components</em>,
is a list that contains initial values, constants and the function for
simulating via deSolve. The third element, <em>igraph</em> contains the
data.frames for creating a graph with igraph.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("models", "SIR.stmx", package = "readsdr")
read_xmile(path)
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='sd_constants'>Summarise the information of a model's constants in a data frame</h2><span id='topic+sd_constants'></span>

<h3>Description</h3>

<p>Summarise the information of a model's constants in a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sd_constants(mdl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sd_constants_+3A_mdl">mdl</code></td>
<td>
<p>A list which is the output from read_xmile.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("models", "SIR.stmx", package = "readsdr")
mdl  &lt;- read_xmile(path)
sd_constants(mdl)
</code></pre>

<hr>
<h2 id='sd_pulse_s'>Replicate the behaviour of the PULSE function from Stella</h2><span id='topic+sd_pulse_s'></span>

<h3>Description</h3>

<p>This function must be placed inside the object that will be passed as the
argument <code>func</code> to deSolve's <code>ode</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sd_pulse_s(time, volume, start_p, interval)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sd_pulse_s_+3A_time">time</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_pulse_s_+3A_volume">volume</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_pulse_s_+3A_start_p">start_p</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_pulse_s_+3A_interval">interval</code></td>
<td>
<p>A number</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>timestep &lt;- function() 0.25 # replicates timestep() from deSolve
sd_pulse_s(2, 1, 2, 0)

</code></pre>

<hr>
<h2 id='sd_pulse_train'>PULSE TRAIN</h2><span id='topic+sd_pulse_train'></span>

<h3>Description</h3>

<p>PULSE TRAIN
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sd_pulse_train(time, start_pulse, duration_pulse, repeat_pt, end_pulse)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sd_pulse_train_+3A_time">time</code></td>
<td>
<p>A numeric argument that indicates the current simulation time</p>
</td></tr>
<tr><td><code id="sd_pulse_train_+3A_start_pulse">start_pulse</code></td>
<td>
<p>A numeric argument that indicates the start of the pulse</p>
</td></tr>
<tr><td><code id="sd_pulse_train_+3A_duration_pulse">duration_pulse</code></td>
<td>
<p>A numeric argument that indicates the width of the pulse</p>
</td></tr>
<tr><td><code id="sd_pulse_train_+3A_repeat_pt">repeat_pt</code></td>
<td>
<p>A numeric argument that indicates the repetition pattern</p>
</td></tr>
<tr><td><code id="sd_pulse_train_+3A_end_pulse">end_pulse</code></td>
<td>
<p>A numeric argument that indicates the end of the sequence</p>
</td></tr>
</table>


<h3>Value</h3>

<p>1 during the pulse, 0 otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sd_pulse_train(5, 5, 3, 10, 20)
</code></pre>

<hr>
<h2 id='sd_pulse_v'>Replicate the behaviour of the PULSE function from Vensim</h2><span id='topic+sd_pulse_v'></span>

<h3>Description</h3>

<p>Replicate the behaviour of the PULSE function from Vensim
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sd_pulse_v(time, startPulse, duration)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sd_pulse_v_+3A_time">time</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_pulse_v_+3A_startpulse">startPulse</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_pulse_v_+3A_duration">duration</code></td>
<td>
<p>A number</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>timestep &lt;- function() 0.25 # replicates timestep() from deSolve
sd_pulse_v(1, 1, 2)
</code></pre>

<hr>
<h2 id='sd_sensitivity_run'>Perform a sensitivity run on a System Dynamics model</h2><span id='topic+sd_sensitivity_run'></span>

<h3>Description</h3>

<p><code>sd_sensitivity_run</code> returns a data frame with the simulation of a
model for several iterations of different inputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sd_sensitivity_run(
  ds_inputs,
  consts_df = NULL,
  stocks_df = NULL,
  start_time = NULL,
  stop_time = NULL,
  timestep = NULL,
  integ_method = "euler",
  multicore = FALSE,
  n_cores = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sd_sensitivity_run_+3A_ds_inputs">ds_inputs</code></td>
<td>
<p>A list of deSolve inputs generated by read_xmile</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_consts_df">consts_df</code></td>
<td>
<p>A data frame that contains the values of constants to
simulate. Each column corresponds to a constant and each row to an
iteration.</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_stocks_df">stocks_df</code></td>
<td>
<p>A data frame that containts the initial value of stocks to
be explored. Each column corresponds to a stock and each row to an iteration.</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_start_time">start_time</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_stop_time">stop_time</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_timestep">timestep</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_integ_method">integ_method</code></td>
<td>
<p>A string. Either &quot;euler&quot; or &quot;rk4&quot;</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_multicore">multicore</code></td>
<td>
<p>A boolean value that indicates whether the process
is parallelised. This option only works for Unix-based systems.</p>
</td></tr>
<tr><td><code id="sd_sensitivity_run_+3A_n_cores">n_cores</code></td>
<td>
<p>An integer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path      &lt;- system.file("models", "SIR.stmx", package = "readsdr")
ds_inputs &lt;- xmile_to_deSolve(path)
consts_df &lt;- data.frame(i = c(0.25, 0.30))
sd_sensitivity_run(ds_inputs, consts_df)
</code></pre>

<hr>
<h2 id='sd_simulate'>Simulate a System Dynamics model</h2><span id='topic+sd_simulate'></span>

<h3>Description</h3>

<p>Simulate a System Dynamics model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sd_simulate(
  ds_inputs,
  start_time = NULL,
  stop_time = NULL,
  timestep = NULL,
  integ_method = "euler"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sd_simulate_+3A_ds_inputs">ds_inputs</code></td>
<td>
<p>A list of deSolve inputs generated by read_xmile</p>
</td></tr>
<tr><td><code id="sd_simulate_+3A_start_time">start_time</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_simulate_+3A_stop_time">stop_time</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_simulate_+3A_timestep">timestep</code></td>
<td>
<p>A number</p>
</td></tr>
<tr><td><code id="sd_simulate_+3A_integ_method">integ_method</code></td>
<td>
<p>A string. Either &quot;euler&quot; or &quot;rk4&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path      &lt;- system.file("models", "SIR.stmx", package = "readsdr")
ds_inputs &lt;- xmile_to_deSolve(path)
sd_simulate(ds_inputs, 0, 1, 0.25, "rk4")
</code></pre>

<hr>
<h2 id='sd_stocks'>Summarise the information of a model's stocks in a data frame</h2><span id='topic+sd_stocks'></span>

<h3>Description</h3>

<p>Summarise the information of a model's stocks in a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sd_stocks(mdl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sd_stocks_+3A_mdl">mdl</code></td>
<td>
<p>A list which is the output from read_xmile.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("models", "SIR.stmx", package = "readsdr")
mdl  &lt;- read_xmile(path)
sd_stocks(mdl)
</code></pre>

<hr>
<h2 id='stan_data'>Stan's data block for ODE models</h2><span id='topic+stan_data'></span>

<h3>Description</h3>

<p>Stan's data block for ODE models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stan_data(vars_vector, type, inits = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stan_data_+3A_vars_vector">vars_vector</code></td>
<td>
<p>a string vector. Each element corresponds to a vector's
name for which users will supply data.</p>
</td></tr>
<tr><td><code id="stan_data_+3A_type">type</code></td>
<td>
<p>a string vector. It must have the same length as vars_vector .
This parameter indicates the type of the variables declared by
vars_vector.</p>
</td></tr>
<tr><td><code id="stan_data_+3A_inits">inits</code></td>
<td>
<p>a boolean. Indicates whether the block includes the declaration
for stocks' init values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a string that contains the Stan code for the data block.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stan_data("y", "int")
stan_data("y", "real", FALSE)
</code></pre>

<hr>
<h2 id='stan_ode_function'>Create Stan ODE function</h2><span id='topic+stan_ode_function'></span>

<h3>Description</h3>

<p>Create Stan ODE function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stan_ode_function(
  filepath,
  func_name,
  pars = NULL,
  const_list = NULL,
  extra_funs = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stan_ode_function_+3A_filepath">filepath</code></td>
<td>
<p>A string that indicates a path to a file with extension .stmx
or .xmile. Vensim files (.mdl) are not xmile files. They must be exported
from Vensim with extension .xmile</p>
</td></tr>
<tr><td><code id="stan_ode_function_+3A_func_name">func_name</code></td>
<td>
<p>A string for naming the ODE function</p>
</td></tr>
<tr><td><code id="stan_ode_function_+3A_pars">pars</code></td>
<td>
<p>A character vector that indicates which constants will be
considered as parameters in the ODE function</p>
</td></tr>
<tr><td><code id="stan_ode_function_+3A_const_list">const_list</code></td>
<td>
<p>A list in which each element's name is the name of the
constant to override and the element's value correspond to the new value.</p>
</td></tr>
<tr><td><code id="stan_ode_function_+3A_extra_funs">extra_funs</code></td>
<td>
<p>A vector of strings. Each string corresponds to a
user-defined function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string with the code containing a function with the model's
equations in the format required by cmdstan 2.24+.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("models", "SIR.stmx", package = "readsdr")
stan_ode_function(path, "my_model")
</code></pre>

<hr>
<h2 id='stan_transformed_data'>Stan's transformed data block for ODE models</h2><span id='topic+stan_transformed_data'></span>

<h3>Description</h3>

<p>Stan's transformed data block for ODE models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stan_transformed_data()
</code></pre>


<h3>Value</h3>

<p>a string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>td &lt;- stan_transformed_data()
</code></pre>

<hr>
<h2 id='xmile_to_deSolve'>Parse XMILE to deSolve components</h2><span id='topic+xmile_to_deSolve'></span>

<h3>Description</h3>

<p><code>xmile_to_deSolve</code> returns a list that serves as an input for
deSolve's ODE function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xmile_to_deSolve(filepath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xmile_to_deSolve_+3A_filepath">filepath</code></td>
<td>
<p>A string that indicates a path to a file with extension .stmx
or .xmile. Vensim files (.mdl) are not xmile files. They must be exported
from Vensim with extension .xmile</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function extracts the xml from the file specified via <code>filepath</code>
to generate a list with the necessary elements to simulate with
<a href="deSolve.html#topic+deSolve">deSolve</a>.
</p>


<h3>Value</h3>

<p>This function returns a list with at least four elements.
<em>stocks</em>, a numeric vector that contains initial values. <em>consts</em>,
a numeric vector with the model's constants. <em>func</em>, the function that
wraps the model's equations. <em>sim_params</em>, a list with control
parameters. If the model includes a table or graphical function, this
function returns the element <em>graph_funs</em>, a list with these functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("models", "SIR.stmx", package = "readsdr")
xmile_to_deSolve(path)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
