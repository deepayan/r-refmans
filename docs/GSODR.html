<!DOCTYPE html><html><head><title>Help for package GSODR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {GSODR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#GSODR-package'><p>GSODR: Global Surface Summary of the Day ('GSOD') Weather Data Client</p></a></li>
<li><a href='#get_GSOD'><p>Download and Return a data.table Object of GSOD Weather Data</p></a></li>
<li><a href='#get_inventory'><p>Download and Return a data.table Object of GSOD Weather Station Data Inventories</p></a></li>
<li><a href='#nearest_stations'><p>Find Nearest GSOD Stations to a Specified Latitude and Longitude</p></a></li>
<li><a href='#print.GSODR.Info'><p>Prints GSODR.info object.</p></a></li>
<li><a href='#reformat_GSOD'><p>Tidy and Return a data.table Object of GSOD Data From Local Storage</p></a></li>
<li><a href='#update_station_list'><p>Download Latest Station List Metadata and Update an Internal Database</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Global Surface Summary of the Day ('GSOD') Weather Data Client</td>
</tr>
<tr>
<td>Version:</td>
<td>4.0.0</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/GSODR/">https://docs.ropensci.org/GSODR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/GSODR/issues">https://github.com/ropensci/GSODR/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides automated downloading, parsing, cleaning, unit conversion
    and formatting of Global Surface Summary of the Day ('GSOD') weather data
    from the from the USA National Centers for Environmental Information
    ('NCEI').  Units are converted from from United States Customary System
    ('USCS') units to International System of Units ('SI').  Stations may be
    individually checked for number of missing days defined by the user, where
    stations with too many missing observations are omitted.  Only stations with
    valid reported latitude and longitude values are permitted in the final
    data.  Additional useful elements, saturation vapour pressure ('es'), actual
    vapour pressure ('ea') and relative humidity ('RH') are calculated from the
    original data using the improved August-Roche-Magnus approximation (Alduchov
    &amp; Eskridge 1996) and included in the final data set.  The resulting metadata
    include station identification information, country, state, latitude,
    longitude, elevation, weather observations and associated flags.  For
    information on the 'GSOD' data from 'NCEI', please see the 'GSOD'
    'readme.txt' file available from,
    <a href="https://www1.ncdc.noaa.gov/pub/data/gsod/readme.txt">https://www1.ncdc.noaa.gov/pub/data/gsod/readme.txt</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>countrycode, curl, data.table, R.utils, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, spelling, ggplot2, gridExtra, knitr, mapproj, maps,
rmarkdown, testthat, tidyr, roxyglobals</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>TRUE</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>X-schema.org-applicationCategory:</td>
<td>Tools</td>
</tr>
<tr>
<td>X-schema.org-keywords:</td>
<td>US-NCEI, meteorological-data, global-weather,
weather, weather-data, meteorology, station-data,
surface-weather, data-access, US-NCDC</td>
</tr>
<tr>
<td>X-schema.org-isPartOf:</td>
<td>https://ropensci.org</td>
</tr>
<tr>
<td>Config/roxyglobals/filename:</td>
<td>globals.R</td>
</tr>
<tr>
<td>Config/roxyglobals/unique:</td>
<td>FALSE</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-27 08:05:53 UTC; 283204f</td>
</tr>
<tr>
<td>Author:</td>
<td>Adam H. Sparks <a href="https://orcid.org/0000-0002-0061-8359"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Tomislav Hengl <a href="https://orcid.org/0000-0002-9921-5129"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Andrew Nelson <a href="https://orcid.org/0000-0002-7249-3778"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Hugh Parsonage <a href="https://orcid.org/0000-0003-4055-0835"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cph, ctb],
  Taras Kaduk [ctb] (Suggestion for handling bulk station downloads more
    efficiently),
  Gwenael Giboire [ctb] (Several bug reports in early versions and
    testing feedback),
  Łukasz Pawlik [ctb] (Reported bug in windspeed conversion calculation),
  Ross Darnell <a href="https://orcid.org/0000-0002-7973-6322"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb] (Reported bug in 'Windows OS' versions causing 'GSOD' data
    untarring to fail),
  Tyler Widdison [ctb] (Reported bug where `nearest_stations()` did not
    return stations in order of nearest to farthest),
  Curtin University [cph] (Supported the development of 'GSODR' through
    Adam H. Sparks's time.)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Adam H. Sparks &lt;adamhsparks@gmail.com&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-28 04:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='GSODR-package'>GSODR: Global Surface Summary of the Day ('GSOD') Weather Data Client</h2><span id='topic+GSODR'></span><span id='topic+GSODR-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides automated downloading, parsing, cleaning, unit conversion and formatting of Global Surface Summary of the Day ('GSOD') weather data from the from the USA National Centers for Environmental Information ('NCEI'). Units are converted from from United States Customary System ('USCS') units to International System of Units ('SI'). Stations may be individually checked for number of missing days defined by the user, where stations with too many missing observations are omitted. Only stations with valid reported latitude and longitude values are permitted in the final data. Additional useful elements, saturation vapour pressure ('es'), actual vapour pressure ('ea') and relative humidity ('RH') are calculated from the original data using the improved August-Roche-Magnus approximation (Alduchov &amp; Eskridge 1996) and included in the final data set. The resulting metadata include station identification information, country, state, latitude, longitude, elevation, weather observations and associated flags. For information on the 'GSOD' data from 'NCEI', please see the 'GSOD' 'readme.txt' file available from, <a href="https://www1.ncdc.noaa.gov/pub/data/gsod/readme.txt">https://www1.ncdc.noaa.gov/pub/data/gsod/readme.txt</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Adam H. Sparks <a href="mailto:adamhsparks@gmail.com">adamhsparks@gmail.com</a> (<a href="https://orcid.org/0000-0002-0061-8359">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Tomislav Hengl <a href="mailto:tom.hengl@isric.org">tom.hengl@isric.org</a> (<a href="https://orcid.org/0000-0002-9921-5129">ORCID</a>)
</p>
</li>
<li><p> Andrew Nelson <a href="mailto:dr.andy.nelson@gmail.com">dr.andy.nelson@gmail.com</a> (<a href="https://orcid.org/0000-0002-7249-3778">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Hugh Parsonage <a href="mailto:hugh.parsonage@gmail.com">hugh.parsonage@gmail.com</a> (<a href="https://orcid.org/0000-0003-4055-0835">ORCID</a>) [copyright holder, contributor]
</p>
</li>
<li><p> Taras Kaduk <a href="mailto:taras.kaduk@gmail.com">taras.kaduk@gmail.com</a> (Suggestion for handling bulk station downloads more efficiently) [contributor]
</p>
</li>
<li><p> Gwenael Giboire <a href="mailto:gwenael.giboire@oda-groupe.com">gwenael.giboire@oda-groupe.com</a> (Several bug reports in early versions and testing feedback) [contributor]
</p>
</li>
<li><p> Łukasz Pawlik <a href="mailto:lukpawlik@gmail.com">lukpawlik@gmail.com</a> (Reported bug in windspeed conversion calculation) [contributor]
</p>
</li>
<li><p> Ross Darnell <a href="mailto:Ross.Darnell@data61.csiro.au">Ross.Darnell@data61.csiro.au</a> (<a href="https://orcid.org/0000-0002-7973-6322">ORCID</a>) (Reported bug in 'Windows OS' versions causing 'GSOD' data untarring to fail) [contributor]
</p>
</li>
<li><p> Tyler Widdison <a href="mailto:Tyler.Widdison@usav.org">Tyler.Widdison@usav.org</a> (Reported bug where 'nearest_stations()' did not return stations in order of nearest to farthest) [contributor]
</p>
</li>
<li><p> Curtin University (Supported the development of 'GSODR' through Adam H. Sparks's time.) [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/GSODR/">https://docs.ropensci.org/GSODR/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/GSODR/issues">https://github.com/ropensci/GSODR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='get_GSOD'>Download and Return a data.table Object of GSOD Weather Data</h2><span id='topic+get_GSOD'></span>

<h3>Description</h3>

<p>This function automates downloading, cleaning, reformatting of data from
the Global Surface Summary of the Day (<abbr><span class="acronym">GSOD</span></abbr>) data provided by the
<a href="https://www.ncei.noaa.gov/access/metadata/landing-page/bin/iso?id=gov.noaa.ncdc:C00516">US National Centers for Environmental Information (NCEI)</a>,
Three additional useful elements: saturation vapour pressure (es), actual
vapour pressure (ea) and relative humidity (RH) are calculated and returned
in the final data frame using the improved August-Roche-Magnus approximation
(Alduchov and Eskridge 1996).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_GSOD(
  years,
  station = NULL,
  country = NULL,
  max_missing = NULL,
  agroclimatology = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_GSOD_+3A_years">years</code></td>
<td>
<p>Year(s) of weather data to download.</p>
</td></tr>
<tr><td><code id="get_GSOD_+3A_station">station</code></td>
<td>
<p>Optional.  Specify a station or multiple stations for which to
retrieve, check and clean weather data using <var>STATION</var>.  The
<abbr><span class="acronym">NCEI</span></abbr> reports years for which the data are available.  This function
checks against these years.  However, not all cases are properly documented
and in some cases files may not exist for download even though it is
indicated that data was recorded for the station for a particular year.  If a
station is specified that does not have an existing file on the server, this
function will silently fail and move on to existing files for download and
cleaning.</p>
</td></tr>
<tr><td><code id="get_GSOD_+3A_country">country</code></td>
<td>
<p>Optional.  Specify a country for which to retrieve weather
data; full name, 2 or 3 letter <abbr><span class="acronym">ISO</span></abbr> or 2 letter <abbr><span class="acronym">FIPS</span></abbr> codes
can be used.  All stations within the specified country will be returned.</p>
</td></tr>
<tr><td><code id="get_GSOD_+3A_max_missing">max_missing</code></td>
<td>
<p>Optional.  The maximum number of days allowed to be
missing from a station's data before it is excluded from final file output.</p>
</td></tr>
<tr><td><code id="get_GSOD_+3A_agroclimatology">agroclimatology</code></td>
<td>
<p>Optional.  Logical.  Only clean data for stations
between latitudes 60 and -60 for agroclimatology work, defaults to 'FALSE'.
Set to 'TRUE' to include only stations within the confines of these
latitudes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All units are converted to International System of Units (SI), <em>e.g.</em>,
Fahrenheit to Celsius and inches to millimetres.
</p>
<p>Data summarise each year by station, which include vapour pressure and
relative humidity elements calculated from existing data in <abbr><span class="acronym">GSOD</span></abbr>.
</p>
<p>All missing values in resulting files are represented as <code>NA</code>
regardless of which field they occur in.
</p>
<p>For a complete list of the fields and description of the contents and units,
please refer to Appendix 1 in the <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> vignette,
<code>vignette("GSODR", package = "GSODR")</code>.
</p>
<p>For more information see the description of the data provided by
<abbr><span class="acronym">NCEI</span></abbr>, <a href="https://www.ncei.noaa.gov/data/global-summary-of-the-day/doc/readme.txt">https://www.ncei.noaa.gov/data/global-summary-of-the-day/doc/readme.txt</a>.
</p>


<h3>Value</h3>

<p>A data frame as a <code><a href="data.table.html#topic+data.table">data.table</a></code> object of
<abbr><span class="acronym">GSOD</span></abbr> weather data.
</p>


<h3>References</h3>

<p>Alduchov, O.A. and Eskridge, R.E., 1996. Improved Magnus form approximation
of saturation vapor pressure. Journal of Applied Meteorology and Climatology,
35(4), pp.601-609. DOI:
&lt;10.1175
</p>


<h3>Note</h3>

<p><a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> attempts to validate year and station combination
requests, however, in certain cases the start and end date may encompass
years where no data is available.  In these cases no data will be returned.
It is suggested that the user check the latest data availability for the
station(s) desired using <a href="#topic+get_inventory">get_inventory</a> as this list is frequently
updated by the <abbr><span class="acronym">NCEI</span></abbr> and is not shipped with <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a>.
</p>
<p>While <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> does not distribute GSOD weather data, users of
the data should note the conditions that the U.S. <abbr><span class="acronym">NCEI</span></abbr> places upon
the <abbr><span class="acronym">GSOD</span></abbr> data.
&ldquo;The following data and products may have conditions placed on their
international commercial use.  They can be used within the U.S. or for non-
commercial international activities without restriction.  The non-U.S. data
cannot be redistributed for commercial purposes.  Re-distribution of these
data by others must provide this same notification.  A log of IP addresses
accessing these data and products will be maintained and may be made
available to data providers.&rdquo;
</p>


<h3>Author(s)</h3>

<p>Adam H. Sparks, <a href="mailto:adamhsparks@gmail.com">adamhsparks@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+reformat_GSOD">reformat_GSOD</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Download weather station data for Toowoomba, Queensland for 2010
tbar &lt;- get_GSOD(years = 2010, station = "955510-99999")

# Download weather data for the year 1929
w_1929 &lt;- get_GSOD(years = 1929)

# Download weather data for the year 1929 for Ireland
ie_1929 &lt;- get_GSOD(years = 1929, country = "Ireland")

</code></pre>

<hr>
<h2 id='get_inventory'>Download and Return a data.table Object of GSOD Weather Station Data Inventories</h2><span id='topic+get_inventory'></span>

<h3>Description</h3>

<p>The <abbr><span class="acronym">NCEI</span></abbr> maintains a document,
<a href="https://www1.ncdc.noaa.gov/pub/data/noaa/isd-inventory.txt">https://www1.ncdc.noaa.gov/pub/data/noaa/isd-inventory.txt</a>, which lists
the number of weather observations by station-year-month from the beginning
of the stations' records.  This function retrieves that document and prints
an information header displaying the last update time with a data frame of
the inventory information for each station-year-month.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_inventory()
</code></pre>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> object of station inventories
</p>


<h3>Note</h3>

<p>While <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> does not distribute GSOD weather data, users of
the data should note the conditions that the U.S. <abbr><span class="acronym">NCEI</span></abbr> places upon
the <abbr><span class="acronym">GSOD</span></abbr> data.
&ldquo;The following data and products may have conditions placed on their
international commercial use.  They can be used within the U.S. or for non-
commercial international activities without restriction.  The non-U.S. data
cannot be redistributed for commercial purposes.  Re-distribution of these
data by others must provide this same notification.  A log of IP addresses
accessing these data and products will be maintained and may be made
available to data providers.&rdquo;
</p>


<h3>Author(s)</h3>

<p>Adam H. Sparks, <a href="mailto:adamhsparks@gmail.com">adamhsparks@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
inventory &lt;- get_inventory()
inventory

</code></pre>

<hr>
<h2 id='nearest_stations'>Find Nearest GSOD Stations to a Specified Latitude and Longitude</h2><span id='topic+nearest_stations'></span>

<h3>Description</h3>

<p>Given latitude and longitude values entered as decimal degrees (DD), this
function returns a list (as an atomic vector) of station ID
values, which can be used in <code><a href="#topic+get_GSOD">get_GSOD</a></code> to query for specific
stations as an argument in the <code>station</code> parameter of that function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nearest_stations(LAT, LON, distance)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nearest_stations_+3A_lat">LAT</code></td>
<td>
<p>Latitude expressed as decimal degrees (DD) (WGS84)</p>
</td></tr>
<tr><td><code id="nearest_stations_+3A_lon">LON</code></td>
<td>
<p>Longitude expressed as decimal degrees (DD) (WGS84)</p>
</td></tr>
<tr><td><code id="nearest_stations_+3A_distance">distance</code></td>
<td>
<p>Distance in kilometres from point for which stations are to
be returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="data.table.html#topic+data.table">data.table</a></code> with full station metadata
including the distance from the user specified coordinates.
</p>


<h3>Note</h3>

<p>The <abbr><span class="acronym">GSOD</span></abbr> data, which are downloaded and manipulated by
<a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> stipulate that the following notice should be given.
&ldquo;The following data and products may have conditions placed on their
international commercial use.  They can be used within the U.S. or for non-
commercial international activities without restriction.  The non-U.S. data
cannot be redistributed for commercial purposes.  Re-distribution of these
data by others must provide this same notification.&rdquo;
</p>


<h3>Author(s)</h3>

<p>Adam H. Sparks, <a href="mailto:adamhsparks@gmail.com">adamhsparks@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Find stations within a 100km radius of Toowoomba, QLD, AUS

n &lt;- nearest_stations(LAT = -27.5598, LON = 151.9507, distance = 100)
n

</code></pre>

<hr>
<h2 id='print.GSODR.Info'>Prints GSODR.info object.</h2><span id='topic+print.GSODR.Info'></span>

<h3>Description</h3>

<p>Prints GSODR.info object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'GSODR.Info'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.GSODR.Info_+3A_x">x</code></td>
<td>
<p>GSODR.Info object</p>
</td></tr>
<tr><td><code id="print.GSODR.Info_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>

<hr>
<h2 id='reformat_GSOD'>Tidy and Return a data.table Object of GSOD Data From Local Storage</h2><span id='topic+reformat_GSOD'></span>

<h3>Description</h3>

<p>This function automates cleaning and reformatting of <abbr><span class="acronym">GSOD</span></abbr> station
files in<br /> &ldquo;YEAR.tar.gz&rdquo;, provided that they have been untarred or
&ldquo;STATION.csv&rdquo; format that have been downloaded from the United States
National Center for Environmental Information's (<abbr><span class="acronym">NCEI</span></abbr>)
download page.  Three additional useful elements: saturation vapour pressure
(es), actual vapour pressure (ea) and relative humidity (RH) are calculated
and returned in the final data frame using the improved August-Roche-Magnus
approximation (Alduchov and Eskridge 1996).  All units are converted to
International System of Units (SI), <em>e.g.</em>, Fahrenheit to Celsius and
inches to millimetres.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reformat_GSOD(dsn = NULL, file_list = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reformat_GSOD_+3A_dsn">dsn</code></td>
<td>
<p>User supplied full file path to location of data files on local
disk for tidying.</p>
</td></tr>
<tr><td><code id="reformat_GSOD_+3A_file_list">file_list</code></td>
<td>
<p>User supplied list of file paths to individual files of data
on local disk for tidying.  Ignored if <code>dsn</code> is set.  Use if there are
other files in the <code>dsn</code> that you do not wish to reformat.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If multiple stations are given, data are summarised for each year by station,
which include vapour pressure and relative humidity elements calculated from
existing data in <abbr><span class="acronym">GSOD</span></abbr>.  Else, a single station is tidied and a data
frame is returned.
</p>
<p>All missing values in resulting files are represented as <code>NA</code> regardless
of which field they occur in.
</p>
<p>Only station files in the original &ldquo;csv&rdquo; file format are supported by
this function.  If you have downloaded the full annual (&ldquo;YYYY.tar.gz&rdquo;)
file you will need to extract the individual station files from the tar file
first to use this function.
</p>
<p>Note that <code>reformat_GSOD()</code> will attempt to reformat any &ldquo;.csv&rdquo;
files found in the <code>dsn</code> that you provide.  If there are non-
<abbr><span class="acronym">GSOD</span></abbr> files present this will lead to errors.
</p>
<p>For a complete list of the fields and description of the contents and units,
please refer to Appendix 1 in the <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> vignette,
<code>vignette("GSODR", package = "GSODR")</code>.
</p>


<h3>Value</h3>

<p>A data frame as a <code><a href="data.table.html#topic+data.table">data.table</a></code> object of
<abbr><span class="acronym">GSOD</span></abbr> data.
</p>


<h3>References</h3>

<p>Alduchov, O.A. and Eskridge, R.E., 1996. Improved Magnus form approximation
of saturation vapor pressure. Journal of Applied Meteorology and Climatology,
35(4), pp.601-609. DOI:
&lt;10.1175
</p>


<h3>Note</h3>

<p>While <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> does not distribute <abbr><span class="acronym">GSOD</span></abbr> weather data,
users of the data should note the conditions that the U.S. <abbr><span class="acronym">NCEI</span></abbr>
places upon the <abbr><span class="acronym">GSOD</span></abbr> data.
&ldquo;The following data and products may have conditions placed on their
international commercial use.  They can be used within the U.S. or for non-
commercial international activities without restriction.  The non-U.S. data
cannot be redistributed for commercial purposes. Re-distribution of these
data by others must provide this same notification. A log of IP addresses
accessing these data and products will be maintained and may be made
available to data providers.&rdquo;
</p>


<h3>Author(s)</h3>

<p>Adam H. Sparks, <a href="mailto:adamhsparks@gmail.com">adamhsparks@gmail.com</a>
</p>


<h3>See Also</h3>

<p>For automated downloading and tidying see the <code><a href="#topic+get_GSOD">get_GSOD</a></code>
function which provides expanded functionality for automatically downloading
and expanding annual <abbr><span class="acronym">GSOD</span></abbr> files and cleaning station files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Download data to 'tempdir()'
download.file(
  url =
    "https://www.ncei.noaa.gov/data/global-summary-of-the-day/access/2010/95551099999.csv",
  destfile = file.path(tempdir(), "95551099999.csv"),
  mode = "wb"
)

# Reformat station data files in R's tempdir() directory
tbar &lt;- reformat_GSOD(dsn = tempdir())

tbar


</code></pre>

<hr>
<h2 id='update_station_list'>Download Latest Station List Metadata and Update an Internal Database</h2><span id='topic+update_station_list'></span>

<h3>Description</h3>

<p>This function downloads the latest station list (isd-history.csv) from the
<abbr><span class="acronym">NCEI</span></abbr> server and updates the data distributed with <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a>
to the latest stations available.  These data provide unique identifiers,
country, state (if in U.S.) and when weather observations begin and end.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_station_list()
</code></pre>


<h3>Details</h3>

<p>Care should be taken when using this function if reproducibility is necessary
as different machines with the same version of <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a> can end up
with different versions of the 'isd_history.csv' file internally.
</p>
<p>There is no need to use this unless you know that a station exists in the
isd_history.csv file that is not available in the self-contained
database distributed with <a href="https://CRAN.R-project.org/package=GSODR"><span class="pkg">GSODR</span></a>.
</p>
<p>To directly access these data, use: <br />
<code>load(system.file("extdata", "isd_history.rda", package = "GSODR"))</code>
</p>


<h3>Author(s)</h3>

<p>Adam H. Sparks, <a href="mailto:adamhsparks@gmail.com">adamhsparks@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
update_station_list()

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
