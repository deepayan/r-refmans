<!DOCTYPE html><html><head><title>Help for package screenshot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {screenshot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#compare_table'><p>Compare values within tow arrays or matrices.</p>
Helper function for <code>locate_ndl_in_hay()</code>.</a></li>
<li><a href='#count_val_freq'><p>Helper function for <code>compare_table()</code>.</p></a></li>
<li><a href='#get_os'><p>Get OS name</p></a></li>
<li><a href='#hay2needle'><p>Cut off a part of image from a whole image.</p></a></li>
<li><a href='#image2gray_matrix'><p>Convert cimg class into grayscale xy matrix.</p>
Helper function for <code>locate_image()</code>.
Use grayscale to Speed up and to simplify code.</a></li>
<li><a href='#index2xy'><p>Convert array index into xy location in matrix.</p>
Helper function for <code>locate_ndl_in_hay()</code>.</a></li>
<li><a href='#install_screenshot'><p>Install command line screenshot for Windows.</p></a></li>
<li><a href='#is_all_same'><p>Helper function for <code>locate_ndl_in_hay()</code>.</p></a></li>
<li><a href='#locate_image'><p>Locate needle image position on a screenshot image.</p></a></li>
<li><a href='#locate_ndl_in_hay'><p>Locate needle image  matrix position in a haystack_image matrix.</p>
Helper function for <code>locate_image()</code>.</a></li>
<li><a href='#screenshot'><p>Take a screenshot.</p></a></li>
<li><a href='#screenshot_exists'><p>Find screenshot exec file.</p></a></li>
<li><a href='#xy_pos'><p>Get xy position of a value in a matrix</p>
Helper function for <code>locate_ndl_in_hay()</code>.</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Take Screenshots (Screen Capture) from R Command</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Take screenshots from R command and locate an image position.</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/matutosi/screenshot">https://github.com/matutosi/screenshot</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, fs, imager, magrittr, purrr, rlang, tibble,</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-11 11:22:46 UTC; matutosi</td>
</tr>
<tr>
<td>Author:</td>
<td>Toshikazu Matsumura
    <a href="https://orcid.org/0000-0003-2306-6355"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Toshikazu Matsumura &lt;matutosi@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-14 08:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='compare_table'>Compare values within tow arrays or matrices.
Helper function for <code>locate_ndl_in_hay()</code>.</h2><span id='topic+compare_table'></span>

<h3>Description</h3>

<p>Compare values within tow arrays or matrices.
Helper function for <code>locate_ndl_in_hay()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_table(ndl_mt, hay_mt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_table_+3A_ndl_mt">ndl_mt</code>, <code id="compare_table_+3A_hay_mt">hay_mt</code></td>
<td>
<p>A matrix.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>val &lt;- seq(from = 0, to = 1, by = 0.1)
mt_1 &lt;- matrix(sample(val,  20, replace = TRUE))
mt_2 &lt;- matrix(sample(val, 100, replace = TRUE))
compare_table(mt_1, mt_2)

</code></pre>

<hr>
<h2 id='count_val_freq'>Helper function for <code>compare_table()</code>.</h2><span id='topic+count_val_freq'></span>

<h3>Description</h3>

<p>Helper function for <code>compare_table()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_val_freq(mt, colname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_val_freq_+3A_mt">mt</code></td>
<td>
<p>A numeric matrix or array.</p>
</td></tr>
<tr><td><code id="count_val_freq_+3A_colname">colname</code></td>
<td>
<p>A string of name for count.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>    A dataframe.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>mt &lt;- sample(1:10, 30, replace = TRUE)
count_val_freq(mt, "freq")

</code></pre>

<hr>
<h2 id='get_os'>Get OS name</h2><span id='topic+get_os'></span>

<h3>Description</h3>

<p>Get OS name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_os()
</code></pre>


<h3>Value</h3>

<p>A string of OS name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_os()

</code></pre>

<hr>
<h2 id='hay2needle'>Cut off a part of image from a whole image.</h2><span id='topic+hay2needle'></span>

<h3>Description</h3>

<p>Cut off a part of image from a whole image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hay2needle(haystack_image, pos_x, pos_y, w = 50, h = 20)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hay2needle_+3A_haystack_image">haystack_image</code></td>
<td>
<p>An image of cimg.</p>
</td></tr>
<tr><td><code id="hay2needle_+3A_pos_x">pos_x</code>, <code id="hay2needle_+3A_pos_y">pos_y</code></td>
<td>
<p>A numeric to indicate the top left corner of cutting image.
When NULL, position will be randomly sampled.</p>
</td></tr>
<tr><td><code id="hay2needle_+3A_w">w</code>, <code id="hay2needle_+3A_h">h</code></td>
<td>
<p>A numeric for width or height of the cutting image.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>          An image of cimg object.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>haystack_image &lt;- imager::load.example("parrots")
needle_image &lt;- hay2needle(haystack_image, 200, 250, 100, 50)
layout(c(1:2))
plot(haystack_image)
plot(needle_image)

</code></pre>

<hr>
<h2 id='image2gray_matrix'>Convert cimg class into grayscale xy matrix.
Helper function for <code>locate_image()</code>.
Use grayscale to Speed up and to simplify code.</h2><span id='topic+image2gray_matrix'></span>

<h3>Description</h3>

<p>Convert cimg class into grayscale xy matrix.
Helper function for <code>locate_image()</code>.
Use grayscale to Speed up and to simplify code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image2gray_matrix(img)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="image2gray_matrix_+3A_img">img</code></td>
<td>
<p>A cimg object.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre> An xy dimensional matrix.
</pre></div>

<hr>
<h2 id='index2xy'>Convert array index into xy location in matrix.
Helper function for <code>locate_ndl_in_hay()</code>.</h2><span id='topic+index2xy'></span>

<h3>Description</h3>

<p>Convert array index into xy location in matrix.
Helper function for <code>locate_ndl_in_hay()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>index2xy(index, nrow)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="index2xy_+3A_index">index</code>, <code id="index2xy_+3A_nrow">nrow</code></td>
<td>
<p>A numeric.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>       A numeric pair of xy location.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>nrow &lt;- 4
matrix(1:12, nrow = nrow)
purrr::map(1:12, index2xy, nrow = nrow)

</code></pre>

<hr>
<h2 id='install_screenshot'>Install command line screenshot for Windows.</h2><span id='topic+install_screenshot'></span>

<h3>Description</h3>

<p>Codes are from URL shown below.
https://superuser.com/questions/75614/take-a-screen-shot-from-command-line-in-windows#answer-1751844
On Mac <code>screencapture</code> is usually available.
On Linux GNOME desktop use <code>gnome-screenshot</code>.
If not installed, run <code style="white-space: pre;">&#8288;sudo apt install gnome-screenshot&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_screenshot(bin_dir = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="install_screenshot_+3A_bin_dir">bin_dir</code></td>
<td>
<p>A string of directory to be installed.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>   A string of installed directory.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){

# need only on Win
if(get_os() == "win"){
  bin_dir &lt;- fs::path_package("screenshot")
  # if you want to install another directory
  #   bin_dir &lt;- "SET_YOUR DIRECTORY"
  install_screenshot(bin_dir)
}

}

</code></pre>

<hr>
<h2 id='is_all_same'>Helper function for <code>locate_ndl_in_hay()</code>.</h2><span id='topic+is_all_same'></span>

<h3>Description</h3>

<p>Helper function for <code>locate_ndl_in_hay()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_all_same(ndl_mt, hay_mt, base_xy)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_all_same_+3A_ndl_mt">ndl_mt</code>, <code id="is_all_same_+3A_hay_mt">hay_mt</code></td>
<td>
<p>A matrix</p>
</td></tr>
<tr><td><code id="is_all_same_+3A_base_xy">base_xy</code></td>
<td>
<p>A numeric pair of xy location.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>    A logical.
</pre></div>

<hr>
<h2 id='locate_image'>Locate needle image position on a screenshot image.</h2><span id='topic+locate_image'></span>

<h3>Description</h3>

<p>Locate needle image position on a screenshot image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>locate_image(
  needle_image,
  center = TRUE,
  exact = TRUE,
  timeout = 5,
  bin_dir = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="locate_image_+3A_needle_image">needle_image</code></td>
<td>
<p>A string of image file path or
a cimg class object of imager library.</p>
</td></tr>
<tr><td><code id="locate_image_+3A_center">center</code></td>
<td>
<p>A logical. TRUE returns center position of needle_image.</p>
</td></tr>
<tr><td><code id="locate_image_+3A_exact">exact</code></td>
<td>
<p>A logical. Check matching exactly or not.</p>
</td></tr>
<tr><td><code id="locate_image_+3A_timeout">timeout</code></td>
<td>
<p>A numeric for timeout seconds.</p>
</td></tr>
<tr><td><code id="locate_image_+3A_bin_dir">bin_dir</code></td>
<td>
<p>A string for directory name of screenshot.exe on Win.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>   A numeric pair of xy location.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){

sc &lt;- screenshot()
if(sc != ""){
  sc_image &lt;- imager::load.image(sc)
  w &lt;- 100
  h &lt;- 80
  pos_x &lt;- 1
  pos_y &lt;- imager::height(sc_image) - h
  needle &lt;- hay2needle(sc_image, pos_x, pos_y, w, h)
  (locate_image(needle)) # center location
  pos &lt;- locate_image(needle, center = FALSE)
  found &lt;- hay2needle(sc_image, pos[1], pos[2], w, h)
  layout(c(1:3))
  plot(sc_image)
  plot(needle)
  plot(found)
}

}

</code></pre>

<hr>
<h2 id='locate_ndl_in_hay'>Locate needle image  matrix position in a haystack_image matrix.
Helper function for <code>locate_image()</code>.</h2><span id='topic+locate_ndl_in_hay'></span>

<h3>Description</h3>

<p>Locate needle image  matrix position in a haystack_image matrix.
Helper function for <code>locate_image()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>locate_ndl_in_hay(ndl_mt, hay_mt, exact = TRUE, timeout = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="locate_ndl_in_hay_+3A_ndl_mt">ndl_mt</code>, <code id="locate_ndl_in_hay_+3A_hay_mt">hay_mt</code></td>
<td>
<p>A matrix</p>
</td></tr>
<tr><td><code id="locate_ndl_in_hay_+3A_exact">exact</code></td>
<td>
<p>A logical. Check matching exactly or not.</p>
</td></tr>
<tr><td><code id="locate_ndl_in_hay_+3A_timeout">timeout</code></td>
<td>
<p>A numeric for timeout seconds.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>    A numeric pair of xy location for needle image.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>haystack_image &lt;- imager::load.example("parrots")
w &lt;- 100
h &lt;- 50
needle_image &lt;- hay2needle(haystack_image, 129, 257, w, h)
hay_mt &lt;- image2gray_matrix(haystack_image)
ndl_mt &lt;- image2gray_matrix(needle_image)
(pos &lt;- locate_ndl_in_hay(ndl_mt, hay_mt))

found &lt;- hay2needle(haystack_image, pos[1], pos[2], w, h)
layout(c(1:3))
plot(haystack_image)
plot(needle_image)
plot(found)

</code></pre>

<hr>
<h2 id='screenshot'>Take a screenshot.</h2><span id='topic+screenshot'></span>

<h3>Description</h3>

<p>Need to install screenshot.exe on Win by install_screenshot().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>screenshot(bin_dir = "", file = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="screenshot_+3A_bin_dir">bin_dir</code></td>
<td>
<p>A string for directory name of screenshot.exe on Win.</p>
</td></tr>
<tr><td><code id="screenshot_+3A_file">file</code></td>
<td>
<p>A string for file name of screenshot.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>    A file name of screenshot. When "", screenshot will be saved in a tempral directory.
</pre></div>


<h3>See Also</h3>

<div class="sourceCode"><pre>   install_screenshot()
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){

sc &lt;- screenshot()
if(sc != ""){
  sc_image &lt;- imager::load.image(sc)
  plot(sc_image)
}

}

</code></pre>

<hr>
<h2 id='screenshot_exists'>Find screenshot exec file.</h2><span id='topic+screenshot_exists'></span>

<h3>Description</h3>

<p>Find screenshot exec file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>screenshot_exists(bin_dir = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="screenshot_exists_+3A_bin_dir">bin_dir</code></td>
<td>
<p>A string for directory name screenshot.exe exec file.
No need on Mac and Linux.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>A logical.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>screenshot_exists()

</code></pre>

<hr>
<h2 id='xy_pos'>Get xy position of a value in a matrix
Helper function for <code>locate_ndl_in_hay()</code>.</h2><span id='topic+xy_pos'></span>

<h3>Description</h3>

<p>Get xy position of a value in a matrix
Helper function for <code>locate_ndl_in_hay()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xy_pos(mt, val)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xy_pos_+3A_mt">mt</code></td>
<td>
<p>A matrix</p>
</td></tr>
<tr><td><code id="xy_pos_+3A_val">val</code></td>
<td>
<p>A matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>A numeric pairs of xy location.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>nrow &lt;- 4
mt &lt;- matrix(1:12, nrow = nrow)
xy_pos(mt, 5)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
