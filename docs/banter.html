<!DOCTYPE html><html lang="en"><head><title>Help for package banter</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {banter}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#banter-package'><p>BioAcoustic EveNT ClassifiER</p></a></li>
<li><a href='#.rfFuncDetector'><p>Detector randomForest function</p></a></li>
<li><a href='#addBanterDetector'><p>Add a BANTER Detector Model</p></a></li>
<li><a href='#banter_detector-class'><p>Detector classification model</p></a></li>
<li><a href='#banter_model-class'><p>Events classification model</p></a></li>
<li><a href='#banterGuide'><p>BANTER Guide</p></a></li>
<li><a href='#getBanterModel'><p>Extract Random Forest Model</p></a></li>
<li><a href='#getBanterModelData'><p>Extract Random Forest Model Data</p></a></li>
<li><a href='#getDetectorNames'><p>Detector Names</p></a></li>
<li><a href='#getSampSize'><p>Sample Size</p></a></li>
<li><a href='#initBanterModel'><p>Initialize BANTER model</p></a></li>
<li><a href='#modelPctCorrect'><p>Model Percent Correct</p></a></li>
<li><a href='#numCalls'><p>Number and Proportion of Calls</p></a></li>
<li><a href='#numEvents'><p>Number of Events</p></a></li>
<li><a href='#plotDetectorTrace'><p>Plot BANTER Detector Traces</p></a></li>
<li><a href='#predict'><p>Predict BANTER events</p></a></li>
<li><a href='#runBanterModel'><p>Run BANTER Model</p></a></li>
<li><a href='#subsampleDetections'><p>Subsample Detections</p></a></li>
<li><a href='#summary'><p>BANTER Classifier Model Summary</p></a></li>
<li><a href='#test.data'><p>Testing events and detectors</p></a></li>
<li><a href='#train.data'><p>Training events and detectors</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>BioAcoustic eveNT classifiER</td>
</tr>
<tr>
<td>Description:</td>
<td>Create a hierarchical acoustic event species classifier out of  
  multiple call type detectors as described in 
  Rankin et al (2017) &lt;<a href="https://doi.org/10.1111%2Fmms.12381">doi:10.1111/mms.12381</a>&gt;.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.6</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0), magrittr</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 1.0.6), ggplot2 (&ge; 3.3.3), gridExtra (&ge; 2.3),
methods, parallel, randomForest (&ge; 4.6), rfPermute (&ge; 2.5.1),
rlang, stats, swfscMisc (&ge; 1.5), tibble (&ge; 3.1.2), tidyr (&ge;
1.1.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GNU General Public License]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-12 17:04:57 UTC; ericarcher</td>
</tr>
<tr>
<td>Author:</td>
<td>Eric Archer [aut, cre],
  Taiki Sakai [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Eric Archer &lt;eric.archer@noaa.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-12 21:32:29 UTC</td>
</tr>
</table>
<hr>
<h2 id='banter-package'>BioAcoustic EveNT ClassifiER</h2><span id='topic+banter-package'></span><span id='topic+banter'></span>

<h3>Description</h3>

<p>banter
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks,
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>

<hr>
<h2 id='.rfFuncDetector'>Detector randomForest function</h2><span id='topic+.rfFuncDetector'></span><span id='topic+.checkValidStrings'></span><span id='topic+.checkModelName'></span><span id='topic+.stopIfNoDetectors'></span><span id='topic+internals'></span><span id='topic+.getSampsize'></span><span id='topic+.meanVotes'></span>

<h3>Description</h3>

<p>Detector randomForest function
</p>
<p>Checks to make sure 'x' contains syntactically valid and unique characters
</p>
<p>Checks to make sure 'model' is a valid model name
x is a banter_model object
</p>
<p>Check that detectors are present
x is a banter_model object
</p>
<p>Produces a vector of equal sample sizes for balanced Random Forest model.
x is a vector of species or table of species frequencies
n is desired sample size
</p>
<p>Returns matrix of mean species vote percentage by event
x is a list of data.frames with species probability assignments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.rfFuncDetector(params)

.checkValidStrings(x, label)

.checkModelName(x, model)

.stopIfNoDetectors(x)

.getSampsize(x, n, warn.label)

.meanVotes(x)
</code></pre>

<hr>
<h2 id='addBanterDetector'>Add a BANTER Detector Model</h2><span id='topic+addBanterDetector'></span><span id='topic+removeBanterDetector'></span>

<h3>Description</h3>

<p>Add a detector model to a BANTER classifier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addBanterDetector(
  x,
  data,
  name,
  ntree,
  sampsize = 1,
  importance = FALSE,
  num.cores = 1
)

removeBanterDetector(x, name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addBanterDetector_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="addBanterDetector_+3A_data">data</code></td>
<td>
<p>detector data.frame or named list of detector data.frames. If 
a data.frame, then <code>name</code> must be provided.</p>
</td></tr>
<tr><td><code id="addBanterDetector_+3A_name">name</code></td>
<td>
<p>detector name.</p>
</td></tr>
<tr><td><code id="addBanterDetector_+3A_ntree">ntree</code></td>
<td>
<p>number of trees.</p>
</td></tr>
<tr><td><code id="addBanterDetector_+3A_sampsize">sampsize</code></td>
<td>
<p>number or fraction of samples to use in each tree. If &lt; 1, 
then it will be used to select this fraction of the smallest sample size.</p>
</td></tr>
<tr><td><code id="addBanterDetector_+3A_importance">importance</code></td>
<td>
<p>retain importance scores in model? Defaults to 
<code>FALSE</code> and will be ignored if <code>num.cores &gt; 1</code>.</p>
</td></tr>
<tr><td><code id="addBanterDetector_+3A_num.cores">num.cores</code></td>
<td>
<p>number of cores to use for Random Forest model. Set to 
<code>NULL</code> to use the maximum number detected on your system - 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+banter_model">banter_model</a></code> object with the detector model added or 
removed.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S., Archer, F., Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add the 'bp' (burst pulse) detector model
bant.mdl &lt;- addBanterDetector(
  x = bant.mdl, 
  data = train.data$detectors$bp, 
  name = "bp",
  ntree = 50, sampsize = 1, num.cores = 1
)
bant.mdl

# remove the 'bp' detector model
bant.mdl &lt;- removeBanterDetector(bant.mdl, "bp")
bant.mdl

</code></pre>

<hr>
<h2 id='banter_detector-class'>Detector classification model</h2><span id='topic+banter_detector-class'></span><span id='topic+banter_detector'></span>

<h3>Description</h3>

<p>Create classification model for a detector
</p>


<h3>Slots</h3>


<dl>
<dt><code>name</code></dt><dd><p>detector name</p>
</dd>
<dt><code>ids</code></dt><dd><p>data.frame of event.ids and call.ids for calls in detector</p>
</dd>
<dt><code>model</code></dt><dd><p>classification model</p>
</dd>
<dt><code>sampsize</code></dt><dd><p>sample size vector used in model</p>
</dd>
<dt><code>timestamp</code></dt><dd><p>start and stop times of model run</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>

<hr>
<h2 id='banter_model-class'>Events classification model</h2><span id='topic+banter_model-class'></span><span id='topic+banter_model'></span>

<h3>Description</h3>

<p>Create classification model for events
</p>


<h3>Slots</h3>


<dl>
<dt><code>data</code></dt><dd><p>data.frame of event.ids and call.ids for calls in detector</p>
</dd>
<dt><code>detectors</code></dt><dd><p>list of <code>detector_model</code> objects</p>
</dd>
<dt><code>model.data</code></dt><dd><p>data used to create classification model</p>
</dd>
<dt><code>model</code></dt><dd><p>classification model</p>
</dd>
<dt><code>sampsize</code></dt><dd><p>sample size vector used in model</p>
</dd>
<dt><code>timestamp</code></dt><dd><p>start and stop times of model run</p>
</dd>
</dl>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>

<hr>
<h2 id='banterGuide'>BANTER Guide</h2><span id='topic+banterGuide'></span>

<h3>Description</h3>

<p>Open a browser window displaying 
&quot;BANTER: A User’s Guide to Acoustic Classification&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>banterGuide()
</code></pre>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks,
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>

<hr>
<h2 id='getBanterModel'>Extract Random Forest Model</h2><span id='topic+getBanterModel'></span>

<h3>Description</h3>

<p>Extract BANTER event or detector Random Forest model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBanterModel(x, model = "event")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBanterModel_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="getBanterModel_+3A_model">model</code></td>
<td>
<p>name of model to extract. Default is <code>"event"</code> 
to extract the event-level model. Can also be the name of a detector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>randomForest</code> model object.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)

# extract the event randomForest model
event.rf &lt;- getBanterModel(bant.mdl)
event.rf

# extract the burst pulse (bp) detector model
bp.rf &lt;- getBanterModel(bant.mdl, "bp")
bp.rf

</code></pre>

<hr>
<h2 id='getBanterModelData'>Extract Random Forest Model Data</h2><span id='topic+getBanterModelData'></span>

<h3>Description</h3>

<p>Extract BANTER event data used for the Random Forest model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBanterModelData(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBanterModelData_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the event data frame used to build the input model <code>x</code>.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)

event.df &lt;- getBanterModelData(bant.mdl)
head(event.df)

</code></pre>

<hr>
<h2 id='getDetectorNames'>Detector Names</h2><span id='topic+getDetectorNames'></span>

<h3>Description</h3>

<p>Return names of detectors loaded in BANTER model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDetectorNames(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getDetectorNames_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of names.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
getDetectorNames(bant.mdl)

</code></pre>

<hr>
<h2 id='getSampSize'>Sample Size</h2><span id='topic+getSampSize'></span>

<h3>Description</h3>

<p>Return sample sizes used for a BANTER model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSampSize(x, model = "event")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSampSize_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="getSampSize_+3A_model">model</code></td>
<td>
<p>name of model to extract. Default is <code>"event"</code> 
to return values for the event-level model. Can also be name of a detector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of sample sizes.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks,
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 2, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)

# sample size for the event model
getSampSize(bant.mdl)

# sample size for the burst pulse (bp) detector model
getSampSize(bant.mdl, "bp")

</code></pre>

<hr>
<h2 id='initBanterModel'>Initialize BANTER model</h2><span id='topic+initBanterModel'></span>

<h3>Description</h3>

<p>Initialize a BANTER model with event data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initBanterModel(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="initBanterModel_+3A_x">x</code></td>
<td>
<p>a data.frame of events. Every row is a unique event. Must have 
columns named <code>event.id</code> and <code>species</code>. All other 
columns will be used as predictor variables for the BANTER event classifier 
model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+banter_model">banter_model</a></code> object without any detector models.
</p>


<h3>Note</h3>

<p>Values in the column <code>species</code> are passed through the
<code><a href="base.html#topic+make.names">make.names</a></code> function on creation to ensure they 
don't include invalid characters.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks,
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
bant.mdl

</code></pre>

<hr>
<h2 id='modelPctCorrect'>Model Percent Correct</h2><span id='topic+modelPctCorrect'></span>

<h3>Description</h3>

<p>Extract percent correctly classified by species for detector 
and event models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modelPctCorrect(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="modelPctCorrect_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame with the percent correctly classified for each model 
in <code>x</code>.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks,
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)
modelPctCorrect(bant.mdl)

</code></pre>

<hr>
<h2 id='numCalls'>Number and Proportion of Calls</h2><span id='topic+numCalls'></span><span id='topic+propCalls'></span>

<h3>Description</h3>

<p>Return the number and proportion of calls in BANTER detector 
models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>numCalls(x, by = c("species", "event"))

propCalls(x, by = c("species", "event"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="numCalls_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="numCalls_+3A_by">by</code></td>
<td>
<p>return summary by <code>"species"</code> or <code>"event"</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)

# number of calls by species and event
numCalls(bant.mdl, "species")
numCalls(bant.mdl, "event")

# proportion of calls by species and event
propCalls(bant.mdl, "species")
propCalls(bant.mdl, "event")

</code></pre>

<hr>
<h2 id='numEvents'>Number of Events</h2><span id='topic+numEvents'></span>

<h3>Description</h3>

<p>Return the number of events in a BANTER model by species.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>numEvents(x, model = "event")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="numEvents_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="numEvents_+3A_model">model</code></td>
<td>
<p>name of model to extract. Default is <code>"event"</code> 
to summarize the event-level model. Can also be name of a detector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame giving the number of events available for each species.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)

# number of events in event model
numEvents(bant.mdl)

# number of events in burst pulse (bp) detector model
numEvents(bant.mdl, "bp")

</code></pre>

<hr>
<h2 id='plotDetectorTrace'>Plot BANTER Detector Traces</h2><span id='topic+plotDetectorTrace'></span>

<h3>Description</h3>

<p>Plot traces of OOB error rates for detector Random Forest 
models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotDetectorTrace(x, detector = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotDetectorTrace_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="plotDetectorTrace_+3A_detector">detector</code></td>
<td>
<p>names of models to plot. If set to <code>NULL</code>, traces for 
all models will be shown.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>See Also</h3>

<p><code><a href="rfPermute.html#topic+plotTrace">plotTrace</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)

plotDetectorTrace(bant.mdl)

</code></pre>

<hr>
<h2 id='predict'>Predict BANTER events</h2><span id='topic+predict'></span><span id='topic+predict.banter_model'></span><span id='topic+predict+2Cbanter_model-method'></span>

<h3>Description</h3>

<p>Predict species of events for novel data from a BANTER model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predict(object, ...)

## S3 method for class 'banter_model'
predict(object, new.data, ...)

## S4 method for signature 'banter_model'
predict(object, new.data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict_+3A_object">object</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="predict_+3A_...">...</code></td>
<td>
<p>unused.</p>
</td></tr>
<tr><td><code id="predict_+3A_new.data">new.data</code></td>
<td>
<p>a list of event and detector data that has the same 
predictors as in the <code>banter_model</code>. It must contain elements called 
<code>events</code> and <code>detectors</code>. The <code>events</code> element must be a 
data.frame that has a column called <code>event.id</code> and the same
predictor columns as the event data used to initialize the banter model 
(see <code><a href="#topic+initBanterModel">initBanterModel</a></code>). The <code>detectors</code> element must be 
a named list with the same detectors used to build the model 
(see <code><a href="#topic+addBanterDetector">addBanterDetector</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following elements: </p>

<dl>
<dt>events</dt><dd><p>the data frame used in the event model for predictions.</p>
</dd>
<dt>predict.df</dt><dd><p>data.frame of predicted species and assignment 
probabilities for each event.</p>
</dd>
<dt>detector.freq</dt><dd><p>data.frame giving the number of events available 
for each detector.</p>
</dd>
<dt>validation.matrix</dt><dd><p>if <code>species</code> is a column in <code>new.data</code>,
a table giving the classification rate for each event</p>
</dd>
</dl>



<h3>Note</h3>

<p>At least one detector in the model must be present in <code>new.data</code>. 
Any detectors in the training model that are absent will have all species 
proportions and the the detector propoprtion set to 0. If a column called 
<code>species</code> is in <code>new.data</code>, columns for the original species 
designation and if that matches predicted (<code>correct</code>) will be added 
to the <code>predict.df</code> data.frame of the output.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 2, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)

# predict test data
data(test.data)
test.pred &lt;- predict(bant.mdl, test.data)
test.pred

</code></pre>

<hr>
<h2 id='runBanterModel'>Run BANTER Model</h2><span id='topic+runBanterModel'></span>

<h3>Description</h3>

<p>Build full event classifier model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runBanterModel(x, ntree, sampsize = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="runBanterModel_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="runBanterModel_+3A_ntree">ntree</code></td>
<td>
<p>number of trees.</p>
</td></tr>
<tr><td><code id="runBanterModel_+3A_sampsize">sampsize</code></td>
<td>
<p>number or fraction of samples to use in each tree.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+banter_model">banter_model</a></code> object with the complete BANTER model.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S., Archer, F., Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks,
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)
summary(bant.mdl)

</code></pre>

<hr>
<h2 id='subsampleDetections'>Subsample Detections</h2><span id='topic+subsampleDetections'></span>

<h3>Description</h3>

<p>Extract a random subsample of detections for each event and 
detector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subsampleDetections(data, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="subsampleDetections_+3A_data">data</code></td>
<td>
<p>a detector data.frame or list of detector data.frames.</p>
</td></tr>
<tr><td><code id="subsampleDetections_+3A_n">n</code></td>
<td>
<p>a value giving the number (<code>n</code> &gt;= 1) or 
fraction (<code>n</code> between 0 and 1) of detections per event per detector 
to select. Detections are randomly selected without replacement. 
If <code>n</code> is greater than the number of detections in an event, all 
detections for that event will be retained.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a detector data.frame or list of detector data.frames with 
no more than <code>n</code> detections per event per detector.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S., Archer, F., Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks, 
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)

# initial number of detections per event per detector
sapply(train.data$detectors, function(x) table(x$event.id))

# select half of all detectors
detect.half &lt;- subsampleDetections(train.data$detectors, 0.5)
sapply(detect.half, function(x) table(x$event.id))

# select 20 detections
detect.20 &lt;- subsampleDetections(train.data$detectors, 20)
sapply(detect.20, function(x) table(x$event.id))

# select 10 detections fro 'ec' detector
ec.10 &lt;- subsampleDetections(train.data$detectors$ec, 10)
table(ec.10$event.id)

</code></pre>

<hr>
<h2 id='summary'>BANTER Classifier Model Summary</h2><span id='topic+summary'></span><span id='topic+summary.banter_model'></span><span id='topic+summary+2Cbanter_model-method'></span>

<h3>Description</h3>

<p>Display summaries for event and detector models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary(object, ...)

## S3 method for class 'banter_model'
summary(object, model = "event", n = 0.5, bins = 20, ...)

## S4 method for signature 'banter_model'
summary(object, model = "event", n = 0.5, bins = 20, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary_+3A_object">object</code></td>
<td>
<p>a <code><a href="#topic+banter_model">banter_model</a></code> object.</p>
</td></tr>
<tr><td><code id="summary_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
<tr><td><code id="summary_+3A_model">model</code></td>
<td>
<p>name of model to summarize. Default is <code>"event"</code> 
to summarize the event-level model. Can also be name of a detector.</p>
</td></tr>
<tr><td><code id="summary_+3A_n">n</code></td>
<td>
<p>number of final iterations to summarize OOB error rate for. If 
between 0 and 1 is taken as a proportion of chain.</p>
</td></tr>
<tr><td><code id="summary_+3A_bins">bins</code></td>
<td>
<p>number of bins in inbag histogram.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>In the plot that is created, the upper panel shows the trace of the 
Random Forest model OOB rate across sequential trees in the forest. The
lower plot shows a frequency histogram of the number of times each sample 
was inbag (used as training data in a tree in the forest). The vertical 
red lines indicate the expected inbag rate for samples of each species.
</p>


<h3>Author(s)</h3>

<p>Eric Archer <a href="mailto:eric.archer@noaa.gov">eric.archer@noaa.gov</a>
</p>


<h3>References</h3>

<p>Rankin, S. , Archer, F. , Keating, J. L., Oswald, J. N., 
Oswald, M. , Curtis, A. and Barlow, J. (2017), Acoustic classification 
of dolphins in the California Current using whistles, echolocation clicks,
and burst pulses. Marine Mammal Science 33:520-540. doi:10.1111/mms.12381
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(train.data)
# initialize BANTER model with event data
bant.mdl &lt;- initBanterModel(train.data$events)
# add all detector models
bant.mdl &lt;- addBanterDetector(
  bant.mdl, train.data$detectors, 
  ntree = 50, sampsize = 1, num.cores = 1
)
# run BANTER event model
bant.mdl &lt;- runBanterModel(bant.mdl, ntree = 1000, sampsize = 1)
summary(bant.mdl)

</code></pre>

<hr>
<h2 id='test.data'>Testing events and detectors</h2><span id='topic+test.data'></span>

<h3>Description</h3>

<p>A list of events and call data from detectors for testing 
BANTER model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(test.data)
</code></pre>


<h3>Format</h3>

<p>list
</p>

<hr>
<h2 id='train.data'>Training events and detectors</h2><span id='topic+train.data'></span>

<h3>Description</h3>

<p>A list of events and call data from detectors for training 
BANTER model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(train.data)
</code></pre>


<h3>Format</h3>

<p>list
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
