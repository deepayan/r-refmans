<!DOCTYPE html><html lang="en"><head><title>Help for package dpasurv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dpasurv}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add.ci'><p>Calculate bootstrap confidence bands for effect of interest</p></a></li>
<li><a href='#Areg'><p>Internal Aalen's Additive Hazards Model storing a linear effect estimate for each event time</p></a></li>
<li><a href='#check.dag'><p>Internal check of whether the formulas passed to the function dpa follow a directed acyclic graph (DAG)</p></a></li>
<li><a href='#dpa'><p>Dynamic Path Analysis</p></a></li>
<li><a href='#effect'><p>Effect estimation in dynamic path analysis</p></a></li>
<li><a href='#find.variables'><p>Find variables of a given formula</p></a></li>
<li><a href='#get.meta'><p>Internal function that gathers meta data on the input to function dpa</p></a></li>
<li><a href='#ggplot.effect'><p>Plot effects from dynamic path analysis along with bootstrap confidence bands</p></a></li>
<li><a href='#Mreg'><p>Internal mediator regression function storing a linear regression estimate for each event time</p></a></li>
<li><a href='#plot.effect'><p>Plot effects from dynamic path analysis along with bootstrap confidence bands</p></a></li>
<li><a href='#simdata'><p>Simulated data</p></a></li>
<li><a href='#sum.effect'><p>Sum of direct and indirect effects from dynamic path analysis</p></a></li>
<li><a href='#Surv'><p>A wrapper function for survival::Surv</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Dynamic Path Analysis of Survival Data via Aalen's Additive
Hazards Model</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthias Kormaksson &lt;mk375@cornell.edu&gt;</td>
</tr>
<tr>
<td>Author:</td>
<td>Novartis Pharma AG [cph],
  Matthias Kormaksson [aut, cre],
  Susanne Strohmaier [aut],
  Markus Lange [aut],
  David Demanse [aut]</td>
</tr>
<tr>
<td>Description:</td>
<td>Dynamic path analysis with estimation of the corresponding direct, indirect, and total effects, based on Fosen et al., (2006) &lt;<a href="https://doi.org/10.1007%2Fs10985-006-9004-2">doi:10.1007/s10985-006-9004-2</a>&gt;. The main outcome of interest is a counting process from survival analysis (or recurrent events) data. At each time of event, ordinary linear regression is used to estimate the relation between the covariates, while Aalen's additive hazard model is used for the regression of the counting process on the covariates.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr (&ge; 0.8.3), tidyr (&ge; 0.8.3), rlang (&ge; 0.4.0), ggplot2
(&ge; 3.2.0), survival (&ge; 2.44.1.1), timereg (&ge; 1.9.4), methods</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://opensource.nibr.com/dpasurv/">http://opensource.nibr.com/dpasurv/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-08-27 14:26:19 UTC; kormama4</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-02 12:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='add.ci'>Calculate bootstrap confidence bands for effect of interest</h2><span id='topic+add.ci'></span>

<h3>Description</h3>

<p>Calculate bootstrap confidence bands for effect of interest
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add.ci(object, alpha)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add.ci_+3A_object">object</code></td>
<td>
<p>object of class &quot;effect&quot;</p>
</td></tr>
<tr><td><code id="add.ci_+3A_alpha">alpha</code></td>
<td>
<p>the confidence level</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class &quot;effect&quot; with updated confidence interval corresponding to alpha
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

# Perform dynamic path analysis:
# We set boot.n=30 for the example to run fast, should be set large enough
# so that results don't change meaningfully for different seeds.
s &lt;- dpa(Surv(start,stop,event)~M+x, list(M~x), id="subject", data=simdata, boot.n=30)

# Calculate cumulative direct effect (which calculates a CI with alpha = 0.05 by default):
direct &lt;- effect(x ~ outcome, s)

# update confidence interval for a new alpha (this overwrites the 0.05 CI already calculated above)
direct &lt;- add.ci(direct, alpha=0.10)
</code></pre>

<hr>
<h2 id='Areg'>Internal Aalen's Additive Hazards Model storing a linear effect estimate for each event time</h2><span id='topic+Areg'></span>

<h3>Description</h3>

<p>Do not call this function on its own
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Areg(out.formula, id, data, method, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Areg_+3A_out.formula">out.formula</code></td>
<td>
<p>Survival formula for Aalen's additive hazards model.</p>
</td></tr>
<tr><td><code id="Areg_+3A_id">id</code></td>
<td>
<p>character string indicating which column of 'data' corresponds to the subject ID.</p>
</td></tr>
<tr><td><code id="Areg_+3A_data">data</code></td>
<td>
<p>Data set in counting process format. In particular the data should contain a &quot;start&quot;, &quot;stop&quot; and &quot;event&quot; column along with
any mediators and baseline covariates.</p>
</td></tr>
<tr><td><code id="Areg_+3A_method">method</code></td>
<td>
<p>passed from dpa call, defaults to &quot;timereg&quot;, otherwise &quot;aareg&quot;</p>
</td></tr>
<tr><td><code id="Areg_+3A_...">...</code></td>
<td>
<p>other parameters passed to Aalen's additive hazards regression function &quot;timereg::aalen()&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with observation times and estimated coefficients for independent variables in &quot;regformula&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

obj &lt;- Areg(Surv(start,stop,event)~M+x, id="subject", data=simdata, method="timereg")

</code></pre>

<hr>
<h2 id='check.dag'>Internal check of whether the formulas passed to the function dpa follow a directed acyclic graph (DAG)</h2><span id='topic+check.dag'></span>

<h3>Description</h3>

<p>Do not call this function on its own
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.dag(meta, data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.dag_+3A_meta">meta</code></td>
<td>
<p>meta data obtained internally inside the dpasurv::dpa function</p>
</td></tr>
<tr><td><code id="check.dag_+3A_data">data</code></td>
<td>
<p>input data to the dpasurv::dpa function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>this function does not return anything, but throws an error with explanation if dag is not correctly specified
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

meta &lt;- get.meta(Surv(start, stop, event) ~ x + M, list(M ~ x), simdata)
check.dag(meta, simdata)
</code></pre>

<hr>
<h2 id='dpa'>Dynamic Path Analysis</h2><span id='topic+dpa'></span>

<h3>Description</h3>

<p>Dynamic Path Analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dpa(
  out.formula,
  mediator.formulas,
  id,
  data,
  boot.n = 200,
  method = "timereg",
  progress_bar = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dpa_+3A_out.formula">out.formula</code></td>
<td>
<p>Survival formula for Aalen's additive hazards model.</p>
</td></tr>
<tr><td><code id="dpa_+3A_mediator.formulas">mediator.formulas</code></td>
<td>
<p>Mediator regression formula (in case of a single mediator), or a list of regression formulas (in case of multiple mediators).
The formulas must be ordered according to Directed Acyclic Graph Structure (see Details).</p>
</td></tr>
<tr><td><code id="dpa_+3A_id">id</code></td>
<td>
<p>character string indicating which column of 'data' corresponds to the subject ID. Bootstrapping will be performed on this id.</p>
</td></tr>
<tr><td><code id="dpa_+3A_data">data</code></td>
<td>
<p>Data set in counting process format. In particular the data should contain a &quot;start&quot;, &quot;stop&quot; and &quot;event&quot; column along with
any mediators and baseline covariates.</p>
</td></tr>
<tr><td><code id="dpa_+3A_boot.n">boot.n</code></td>
<td>
<p>Number of bootstrap samples.</p>
</td></tr>
<tr><td><code id="dpa_+3A_method">method</code></td>
<td>
<p>The underlying implementation of Aalen's additive regression model. Defaults to &quot;timereg&quot;, which relies on the timereg::aalen() implementation,
while method = &quot;aareg&quot; uses the survival::aareg() implementation.</p>
</td></tr>
<tr><td><code id="dpa_+3A_progress_bar">progress_bar</code></td>
<td>
<p>Boolean. If TRUE, show progress bar. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="dpa_+3A_...">...</code></td>
<td>
<p>other parameters passed to the Aalen's additive hazards model implementation. If method = &quot;timereg&quot;, then ... will be passed to
timereg::aalen(), while if method = &quot;aareg&quot;, then ... will be passed to survival::aareg(). If ... contains parameters that don't belong to the formalArgs of
the corresponding implementation then those parameters will be ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dpa</code> performs Dynamic Path Analysis of a Directed Acyclic Graph (DAG). The out.formula
can have as covariates all mediators listed in mediator.formulas. The mediator.formulas must obey the
following DAG structure rule: The response of the k-th formula cannot appear as covariate in any of the formulas
k+1, ..., length(mediator.formulas).
</p>


<h3>Value</h3>

<p>Object of class 'dpa' with following fields:
</p>

<dl>
<dt>coefs</dt><dd><p>list of estimated coefficients from each of the regressions listed in out.formula and mediator.formulas.</p>
</dd>
<dt>boot.coefs</dt><dd><p>list of bootstrap estimates corresponding to coefs. This stores all the bootstrap estimates to facilitate
calculation of direct, indirect and total effects along with bootstrap confidence intervals.</p>
</dd>
<dt>meta</dt><dd><p>a list keeping track of responses and covariates of each of the out.formula and mediator.formulas. Also keeps
track of all variable types and level names in case of factors.</p>
</dd>
<dt>aalen</dt><dd><p>Object storing information pertaining to the Aalen's additive model fit. Object is of class &quot;aalen&quot;
if method=&quot;timereg&quot;, and of class &quot;aareg&quot; if method=&quot;aareg&quot;.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

set.seed(1)

# Perform dynamic path analysis:
# We set boot.n=30 for the example to run fast, should be set large enough
# so that results don't change meaningfully for different seeds.
s &lt;- dpa(Surv(start,stop,event)~M+x, list(M~x), id="subject", data=simdata, boot.n=30)

# Calculate cumulative direct, indirect, and total effects:
direct &lt;- effect(x ~ outcome, s)
indirect &lt;- effect(x ~ M ~ outcome, s)
total &lt;- sum(direct, indirect)

# Plot the effects using basic graphics:
layout1x3 &lt;- par(mfrow=c(1,3))
plot(direct); abline(h=0, lty=2, col=2)
plot(indirect); abline(h=0, lty=2, col=2)
plot(total); abline(h=0, lty=2, col=2)

# restore user's graphical parameters:
par(layout1x3)

# Plot the effects using ggplot2 graphics:
ggplot.effect(list(direct, indirect, total))

</code></pre>

<hr>
<h2 id='effect'>Effect estimation in dynamic path analysis</h2><span id='topic+effect'></span>

<h3>Description</h3>

<p>effect estimation method for class &quot;dpa&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>effect(formula, object, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="effect_+3A_formula">formula</code></td>
<td>
<p>the formula for the direct or indirect effect to be estimated. Should be of the form: covariate ~ outcome for direct effect of covariate on outcome, while it
should be of the form: covariate ~ mediator ~ outcome for indirect effect of covariate on outcome mediated through mediator.
Note that the word &quot;outcome&quot; is reserved for the survival outcome process, but the word &quot;covariate&quot; and &quot;mediator&quot; should match a corresponding variable name in the data input.
Alternatively the form can be: covariate ~ mediator for direct effects of covariate on mediator, or: covariate ~ mediator1 ~ mediator2
for indirect effects of covariate on mediator2 mediated through mediator1.</p>
</td></tr>
<tr><td><code id="effect_+3A_object">object</code></td>
<td>
<p>object of class &quot;dpa&quot; (as obtained by calling the function <code>dpa</code>) from which the effect is to be estimated.</p>
</td></tr>
<tr><td><code id="effect_+3A_alpha">alpha</code></td>
<td>
<p>The confidence level of the bootstrap intervals</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class &quot;effect&quot; with following fields:
</p>

<dl>
<dt>coefs</dt><dd><p>data.frame containing the unique event times along with the calculated effect coefficients. For effects corresponding to a continuous variable this results in a
single effect column. For factors with n.levels categories the data.frame contains n.levels-1 effect columns each representing the effect coefficient of a particular factor level (as compared to reference level).</p>
</dd>
<dt>lower</dt><dd><p>data.frame of same dimension as coefs containing the lower confidence bands of the effects stored in coefs</p>
</dd>
<dt>upper</dt><dd><p>data.frame of same dimension as coefs containing the upper confidence bands of the effects stored in coefs</p>
</dd>
<dt>boot.coefs</dt><dd><p>data.frame with three columns: one column of bootstrap sample ID, a second column of unique event times (per bootstrap sample), and
a third column of the estimated effect coefficients (per bootstrap sample). The storing of the effects per bootstrap sample
facilitates calculation of bootstrap confidence intervals for sums of indirect and direct effects.</p>
</dd>
<dt>label</dt><dd><p>effect label with path specification: &quot;direct&quot; for direct effect and &quot;indirect&quot; for indirect effect mediated through a path of mediator(s)</p>
</dd>
<dt>scale</dt><dd><p>scale of effect coefficients in coefs, lower, upper: &quot;cumulative&quot; (for effects on outcome) or &quot;identity&quot; (for effects on mediators)</p>
</dd>
<dt>alpha</dt><dd><p>confidence level of the bootstrap intervals</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

set.seed(1)

# Perform dynamic path analysis:
# We set boot.n=30 for the example to run fast, should be set large enough
# so that results don't change meaningfully for different seeds.
s &lt;- dpa(Surv(start,stop,event)~M+x, list(M~x), id="subject", data=simdata, boot.n=30)

direct &lt;- effect(x ~ outcome, s)
indirect &lt;- effect(x ~ M ~ outcome, s)
total &lt;- sum(direct, indirect)

</code></pre>

<hr>
<h2 id='find.variables'>Find variables of a given formula</h2><span id='topic+find.variables'></span>

<h3>Description</h3>

<p>Do not call this function on its own
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find.variables(formula)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find.variables_+3A_formula">formula</code></td>
<td>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of the formula's variable names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

vars &lt;- find.variables(x ~ outcome)
</code></pre>

<hr>
<h2 id='get.meta'>Internal function that gathers meta data on the input to function dpa</h2><span id='topic+get.meta'></span>

<h3>Description</h3>

<p>Do not call this function on its own
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.meta(out.formula, mediator.formulas, data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.meta_+3A_out.formula">out.formula</code></td>
<td>
<p>Survival formula for Aalen's additive hazards model.</p>
</td></tr>
<tr><td><code id="get.meta_+3A_mediator.formulas">mediator.formulas</code></td>
<td>
<p>list of mediator regression formulas.</p>
</td></tr>
<tr><td><code id="get.meta_+3A_data">data</code></td>
<td>
<p>Data set in counting process format. In particular the data should contain a &quot;start&quot;, &quot;stop&quot; and &quot;event&quot; column along with any mediators and baseline covariates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of meta data associated with out.formula and mediator.formulas. Consists of the following fields:
</p>

<dl>
<dt>outcome</dt><dd><p>list containing variable names for startt, stopt, event, and right hand side of out.formula</p>
</dd>
<dt>mediator</dt><dd><p>list containing response variable name and right hand side of mediator.formulas</p>
</dd>
<dt>variables</dt><dd><p>list containing the class of variables in out.formula and mediator.formulas</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

meta &lt;- get.meta(Surv(start, stop, event) ~ x + M, list(M ~ x), simdata)
</code></pre>

<hr>
<h2 id='ggplot.effect'>Plot effects from dynamic path analysis along with bootstrap confidence bands</h2><span id='topic+ggplot.effect'></span>

<h3>Description</h3>

<p>plotting method for class &quot;effect&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggplot.effect(
  object,
  relative = FALSE,
  titles = NULL,
  x_label = "Time",
  y_label = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggplot.effect_+3A_object">object</code></td>
<td>
<p>object of class &quot;effect&quot;, or list of objects of class &quot;effect&quot;</p>
</td></tr>
<tr><td><code id="ggplot.effect_+3A_relative">relative</code></td>
<td>
<p>should the effect be plotted on a relative survival scale (i.e. 'y=exp(-effect)')?. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="ggplot.effect_+3A_titles">titles</code></td>
<td>
<p>If NULL, function will automatically generate. Otherwise character vector of length equal to number of
elements in object list</p>
</td></tr>
<tr><td><code id="ggplot.effect_+3A_x_label">x_label</code></td>
<td>
<p>Label for x-axis. Defaults to &quot;Time&quot;</p>
</td></tr>
<tr><td><code id="ggplot.effect_+3A_y_label">y_label</code></td>
<td>
<p>Label for y-axis. Default when object scale is &quot;cumulative&quot; will be &quot;Cumulative Effect&quot; (relative=FALSE) and &quot;Relative survival&quot; (relative=TRUE).
If object scale is &quot;identity&quot; then the default y_label will be &quot;Effect&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

set.seed(1)

# Perform dynamic path analysis:
# We set boot.n=30 for the example to run fast, should be set large enough
# so that results don't change meaningfully for different seeds.
s &lt;- dpa(Surv(start,stop,event)~M+x, list(M~x), id="subject", data=simdata, boot.n=30)

direct &lt;- effect(x ~ outcome, s)
indirect &lt;- effect(x ~ M ~ outcome, s)
total &lt;- sum(direct, indirect)

ggplot.effect(direct)
ggplot.effect(list(direct, indirect, total))

</code></pre>

<hr>
<h2 id='Mreg'>Internal mediator regression function storing a linear regression estimate for each event time</h2><span id='topic+Mreg'></span>

<h3>Description</h3>

<p>Do not call this function on its own
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Mreg(regformula, obstimes, startt, stopt, event, mediator, dataset, w = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Mreg_+3A_regformula">regformula</code></td>
<td>
<p>independent variable input as for standard lm fuction in R</p>
</td></tr>
<tr><td><code id="Mreg_+3A_obstimes">obstimes</code></td>
<td>
<p>observed event times at which Aalen's additive model is estimated via the function Areg</p>
</td></tr>
<tr><td><code id="Mreg_+3A_startt">startt</code></td>
<td>
<p>start time of the observation intervals</p>
</td></tr>
<tr><td><code id="Mreg_+3A_stopt">stopt</code></td>
<td>
<p>end time of the observation intervals (actual event times)</p>
</td></tr>
<tr><td><code id="Mreg_+3A_event">event</code></td>
<td>
<p>event indicator</p>
</td></tr>
<tr><td><code id="Mreg_+3A_mediator">mediator</code></td>
<td>
<p>mediator of interest</p>
</td></tr>
<tr><td><code id="Mreg_+3A_dataset">dataset</code></td>
<td>
<p>dataset (in counting process format)</p>
</td></tr>
<tr><td><code id="Mreg_+3A_w">w</code></td>
<td>
<p>(optional) weights (not actually used in the default implementation of dynamic path analysis, set to 1)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame with observation times and estimated coefficients for independent variables in &quot;regformula&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

obj &lt;- Mreg(~x, sort(simdata$stop[simdata$event==1]), "start", "stop", "event", "M", simdata)

</code></pre>

<hr>
<h2 id='plot.effect'>Plot effects from dynamic path analysis along with bootstrap confidence bands</h2><span id='topic+plot.effect'></span>

<h3>Description</h3>

<p>plotting method for class &quot;effect&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'effect'
plot(x, relative = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.effect_+3A_x">x</code></td>
<td>
<p>object of class &quot;effect&quot;</p>
</td></tr>
<tr><td><code id="plot.effect_+3A_relative">relative</code></td>
<td>
<p>should the effect be plotted on a relative survival scale (i.e. 'y=exp(-effect)')?. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="plot.effect_+3A_...">...</code></td>
<td>
<p>other graphical parameters passed to the graphics::plot function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>this function does not return anything, but simply plots the associated effect encoded in the object x
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

set.seed(1)

# Perform dynamic path analysis:
# We set boot.n=30 for the example to run fast, should be set large enough
# so that results don't change meaningfully for different seeds.
s &lt;- dpa(Surv(start,stop,event)~M+x, list(M~x), id="subject", data=simdata, boot.n=30)

direct &lt;- effect(x ~ outcome, s)
indirect &lt;- effect(x ~ M ~ outcome, s)
total &lt;- sum(direct, indirect)

par(mfrow=c(1,3))
layout1x3 &lt;- par(mfrow=c(1,3))
plot(direct); abline(h=0, lty=2, col=2)
plot(indirect); abline(h=0, lty=2, col=2)
plot(total); abline(h=0, lty=2, col=2)

# restore user's graphical parameters:
par(layout1x3)

</code></pre>

<hr>
<h2 id='simdata'>Simulated data</h2><span id='topic+simdata'></span>

<h3>Description</h3>

<p>This is a simulated data set in the (start,stop] format. The subject column
refers to subject ID and note that there are multiple rows per subject.
The columns x and dose correspond to a treatment and dose variable respectively, while
M refers to the longitudinal mediator values. The triplet (start, stop, event)
corresponds to the time-to-event data in the required (start,stop] format.
</p>


<h3>Format</h3>

<p>A data frame with the following variables: <code>subject</code> (fct), <code>x</code> (dbl),
<code>dose</code> (fct), <code>M</code> (dbl), <code>start</code> (dbl), <code>stop</code> (dbl), <code>event</code> (dbl).
</p>

<hr>
<h2 id='sum.effect'>Sum of direct and indirect effects from dynamic path analysis</h2><span id='topic+sum.effect'></span>

<h3>Description</h3>

<p>a sum method for class &quot;effect&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'effect'
sum(effect1, effect2, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sum.effect_+3A_effect1">effect1</code></td>
<td>
<p>an object of class &quot;effect&quot; obtained from a call to the function effect()</p>
</td></tr>
<tr><td><code id="sum.effect_+3A_effect2">effect2</code></td>
<td>
<p>a second object of class &quot;effect&quot; obtained from a call to the function effect()</p>
</td></tr>
<tr><td><code id="sum.effect_+3A_...">...</code></td>
<td>
<p>additional objects of class &quot;effect&quot; (any number of effects allowed)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &quot;effect&quot; containing the sum of effect1, effect2, ...
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

set.seed(1)

# Perform dynamic path analysis:
# We set boot.n=30 for the example to run fast, should be set large enough
# so that results don't change meaningfully for different seeds.
s &lt;- dpa(Surv(start,stop,event)~M+x, list(M~x), id="subject", data=simdata, boot.n=30)

direct &lt;- effect(x ~ outcome, s)
indirect &lt;- effect(x ~ M ~ outcome, s)
total &lt;- sum(direct, indirect)

</code></pre>

<hr>
<h2 id='Surv'>A wrapper function for survival::Surv</h2><span id='topic+Surv'></span>

<h3>Description</h3>

<p>A wrapper function for survival::Surv
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Surv(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Surv_+3A_...">...</code></td>
<td>
<p>parameters passed to survival::Surv</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class survival::Surv
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dpasurv)

data(simdata)

survival.obj &lt;- Surv(simdata$start, simdata$stop, simdata$event)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
