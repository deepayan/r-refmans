<!DOCTYPE html><html lang="en-US"><head><title>Help for package GeomArchetypal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {GeomArchetypal}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#GeomArchetypal-package'>
<p>Finds the Geometrical Archetypal Analysis of a Data Frame</p></a></li>
<li><a href='#BLB_archetypal'>
<p>Archetypal Analysis using the Bag of Little Bootstraps</p></a></li>
<li><a href='#closer_grid_archetypal'>
<p>Performs the Archetypal Analysis of a Data Frame by using as Archetypes the Closer to The Archetypal Grid Data Points</p></a></li>
<li><a href='#fast_archetypal'>
<p>Performs the Archetypal Analysis of a Data Frame by using a Given Set of Archetypes</p></a></li>
<li><a href='#gallupGPS6'>
<p>Gallup Global Preferences Study processed data set of six variables</p></a></li>
<li><a href='#grid_archetypal'>
<p>Performs the Archetypal Analysis of a Data Frame by using as Archetypes the Archetypal Grid</p></a></li>
<li><a href='#plot.closer_grid_archetypal'>
<p>Plot an Object of the Class closer_grid_archetypal</p></a></li>
<li><a href='#plot.grid_archetypal'>
<p>Plot an Object of the class grid_archetypal</p></a></li>
<li><a href='#points_inside_convex_hull'>
<p>Computes the Percentage of Points that Lie Inside the Convex Hull which is Created by a Set of Vectors</p></a></li>
<li><a href='#print.BLB_archetypal'>
<p>Print an Object of the Class BLB_archetypal</p></a></li>
<li><a href='#print.closer_grid_archetypal'>
<p>Print an Object of the closer_grid_archetypal</p></a></li>
<li><a href='#print.grid_archetypal'>
<p>Print an Object of the Class grid_archetypal</p></a></li>
<li><a href='#summary.BLB_archetypal'>
<p>Summarize an Object of the Class BLB_archetypal</p></a></li>
<li><a href='#summary.closer_grid_archetypal'>
<p>Summary of an Object of the Class closer_grid_archetypal</p></a></li>
<li><a href='#summary.grid_archetypal'>
<p>Summary of an Object of the Class grid_archetypal</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Finds the Geometrical Archetypal Analysis of a Data Frame</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-10-20</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Demetris Christopoulos &lt;dchristop@econ.uoa.gr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs Geometrical Archetypal Analysis after creating Grid Archetypes 
    which are the Cartesian Product of all minimum, maximum variable values. Since the archetypes 
    are fixed now, we have the ability to compute the convex composition coefficients for all 
    our available data points much faster by using the half part of Principal Convex Hull Archetypal method. 
    Additionally we can decide to keep as archetypes the closer to the Grid Archetypes ones. Finally 
    the number of archetypes is always 2 to the power of the dimension of our data points 
    if we consider them as a vector space. 
    Cutler, A., Breiman, L. (1994)      &lt;<a href="https://doi.org/10.1080%2F00401706.1994.10485840">doi:10.1080/00401706.1994.10485840</a>&gt;.
    Morup, M., Hansen, LK. (2012) &lt;<a href="https://doi.org/10.1016%2Fj.neucom.2011.06.033">doi:10.1016/j.neucom.2011.06.033</a>&gt;.
    Christopoulos, DT. (2024) &lt;<a href="https://doi.org/10.13140%2FRG.2.2.14030.88642">doi:10.13140/RG.2.2.14030.88642</a>&gt;.   </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Matrix, geometry, archetypal, doParallel, methods, plot3D,
distances, rlang, magrittr, dplyr, mirai, abind, scales</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Author:</td>
<td>Demetris Christopoulos [aut, cre, cph],
  David Midgley [ctb, cph],
  Sunil Venaik [ctb],
  INSEAD Hoffmann Institute France [fnd],
  The University of Queensland Australia [fnd]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-20 09:51:51 UTC; demetris_ws</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-20 10:50:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='GeomArchetypal-package'>
Finds the Geometrical Archetypal Analysis of a Data Frame
</h2><span id='topic+GeomArchetypal-package'></span><span id='topic+GeomArchetypal'></span>

<h3>Description</h3>

<p>Performs Geometrical Archetypal Analysis after creating Grid Archetypes which are the Cartesian Product of all minimum, maximum
variable values. Since the archetypes are fixed now, we have the ability to compute the convex composition coefficients for all our
available data points much faster by using the half part of PCHA method. Additionally we can decide to keep as archetypes the closer to 
the Grid Archetypes ones. Finally the number of archetypes is always 2 to the power of the dimension of our data points 
if we consider them as a vector space.
</p>


<h3>Details</h3>

<p>Given a data frame <code>df</code> which is a matrix of n observations (rows) for the d variables (columns) we compute for 
all variables Xj the (Xj.min , Xj.max), j=1,2,..., n. <br /> <br />
By taking the Cartesian Product of all those sets we form the vector set of Grid Archetypes which are 2 to the power of d and 
all other points lie inside their Convex Hull. <br /> <br />
For example if we take the case of d=2 and our variables are named X,Y, then the Cartesian Product gives next points: <br /> <br />
(Xmin,Ymin),(Xmax,Ymin),(Xmin,Ymax),(Xmax,Ymax) <br /> <br />
Now the problem of seeking for the best number of archetypes is solved and kappas is 2 to the power of d. <br />
The main task is to express all inner data points as convex combination of the Grid Archetypes. <br />
For that reason we drop the half part of the PCHA algorithm of [1], [2] and keep only the desired one, that of the A-matrix computation. <br />
This is the task for the <code>grid_archetypal()</code> function.<br /> <br />
If we want to seek for the closer to the Grid Archetypes points and set them as archetypes and proceed by the same way, then we use 
the <code>closer_grid_archetypal()</code> function. <br /> <br />
All the two above functions use the generic function <code>fast_archetypal()</code> which computes the A-matrix for a given set rows of archetypes for 
our data frame of interest. <br /> <br />
Finally we introduce the function <code>points_inside_convex_hull()</code> which for a given data frame <code>df</code> and a given set of at least <code>d + 1</code> 
archetypes or points in general <code>dp</code>,  computes the percentage of data points that lie inside the <code>Convex Hull</code> which is created by <code>dp</code>. <br />
A pdf version of a detailed description can be found in [3].
</p>


<h3>Author(s)</h3>

<p>Demetris Christopoulos <br />
https://orcid.org/0009-0008-6436-095X
</p>


<h3>References</h3>

<p>[1] M Morup and LK Hansen, &quot;Archetypal analysis for machine learning and data mining&quot;, Neurocomputing (Elsevier, 2012).
https://doi.org/10.1016/j.neucom.2011.06.033. <br />
[2] Source: https://mortenmorup.dk/?page_id=2 , last accessed 2024-03-09 <br />
[3] Christopoulos, DT. (2024) https://doi.org/10.13140/RG.2.2.14030.88642
</p>


<h3>See Also</h3>

<p><code><a href="#topic+grid_archetypal">grid_archetypal</a></code>, <code><a href="#topic+closer_grid_archetypal">closer_grid_archetypal</a></code>, <code><a href="#topic+fast_archetypal">fast_archetypal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
# Load package
library(GeomArchetypal)  
# Create random data
vseed = 20140519
set.seed(vseed)
df=matrix(runif(90) , nrow = 30, ncol=3) 
# Grid Archetypal
gaa=grid_archetypal(df, diag_less = 1e-6, 
                    niter = 50, use_seed = vseed)
# Print
print(gaa)
# Summary
summary(gaa)
plot(gaa)
# Closer Grid Archetypal
cga=closer_grid_archetypal(df, diag_less = 1e-3, 
                           niter = 200, use_seed = vseed)
# Print
print(cga)
# Summary
summary(cga)
# Plot
plot(cga)
# Fast Archetypal: 
# we use as archetyupal rows the closer to the Grid Archetypes
# as they were foind by closer_grid_archetypal() function
fa=fast_archetypal(df, irows = cga$grid_rows, diag_less = 1e-3, 
                    niter = 200, use_seed = vseed)
# Print
print(fa)
# Summary
summary(fa)
# Plot
plot(fa)
</code></pre>

<hr>
<h2 id='BLB_archetypal'>
Archetypal Analysis using the Bag of Little Bootstraps
</h2><span id='topic+BLB_archetypal'></span>

<h3>Description</h3>

<p>Archetypal analysis using the bag of little bootstraps as the resampling approach, following [1]
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BLB_archetypal(df = NULL, ss_size = NULL, bs_size = NULL,
			arches = NULL, use_seed = NULL, n = 20,
			r = 100, n_core = 1, n_iter = 100, ci_sigma = 2.5757,
			n_tails = 10, diag_less = 0.01)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="BLB_archetypal_+3A_df">df</code></td>
<td>

<p>The data frame with the original sample to be processed.
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_ss_size">ss_size</code></td>
<td>

<p>The size of the subsample to be drawn from df without replacement.
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_bs_size">bs_size</code></td>
<td>

<p>The size of the bootstrap replications to be drawn with replacement from each subsample, typically nrow(df), but see Details.
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_arches">arches</code></td>
<td>

<p>A data frame of the archetype profiles, whose column names correspond to variables found in df. See Details.
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_use_seed">use_seed</code></td>
<td>

<p>Integer, if not NULL, used as set.seed() for reproducibility.
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_n">n</code></td>
<td>

<p>Integer, the number of subsamples to draw from df (default 20).
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_r">r</code></td>
<td>

<p>Integer, the number of bootstrap replications of each subsample (default 100). r must be an integer multiple of n_core. See Details.
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_n_core">n_core</code></td>
<td>

<p>Integer, the number of cores available for batch processing of bootstrap replications. 
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_n_iter">n_iter</code></td>
<td>

<p>Integer, number of iterations for fast_archetypal.
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_ci_sigma">ci_sigma</code></td>
<td>

<p>Numeric, for empirical confidence intervals (default 2.5757 for 99
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_n_tails">n_tails</code></td>
<td>

<p>Integer, minimum number of bootstrap estimates required in the tails for robust confidence intervals (default 10 each tail).
</p>
</td></tr>
<tr><td><code id="BLB_archetypal_+3A_diag_less">diag_less</code></td>
<td>

<p>Test of convergence for the archetypal row weights. The expected mean distance from 1 for the weights of the archetypes themselves (default 0.01). See Details.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Usage. BLB_archetypal is designed to be used with large samples (&gt; 1k cases) and to minimize runtimes by employing parallel processing with multiple cores. <br />
Archetypes. BLB_archetypal is also designed to be used with fixed archetypes which the user has determined a priori. Resampling variability then solely concerns the row weights based on these archetypes, considerably reducing runtimes and simplifying analysis because all bootstraps have the same frame of reference. There are several ways of determining these archetypes, one recommendation that facilitates interpretation is to base them on all combinations of the maximums and minimums of the variables on which the archetypes are to be based. See GeomArchetypal.<br />
Computational process. n subsamples of size ss_size are drawn without replacement from df, r replications of size bs_size are then generated from each subsample with replacement. The fast_archetypal function is then applied to each of the resulting n * r bootstraps to estimate the row weights for the user supplied arches.  The mean weights from the n * r bootstraps provide the population estimate for the row weights, and the ci_sigma confidence intervals for this estimate are determined directly from the distribution of bootstrap estimates. The confidence intervals are thus not bias adjusted, but this is less necessary with large samples and the direct method reduces runtimes.<br />
Convergence. In fast_archetypal, the set of archetypes are appended to the data frame to be analyzed. At convergence the row weights for these archetypes should be a target matrix with 1s on the diagonal and 0s off diagonal. diag_less provides the test of this convergence, with the default 0.01 implying the mean of the distances between the set of weights and the target matrix must be &lt;= 0.01. Users may wish to consider stricter tests, such as 0.001 or 1e-6 but these will considerably increase the number of iterations needed before the algorithm converges and hence runtimes. Note if one or more bootstraps do not converge, the function will generate an error as otherwise incorrect estimates would be included in the subsequent calculations. In this case, the user should increase n_iter before rerunning.<br />
Confidence intervals. The default settings of n = 20 subsamples each with r = 100 replications generate 2000 bootstraps and ci_sigma = 2.5757 or ~ 99
Parallel processing. To reduce run times parallel processing can be used, with n_core processing cores. In this case bootstraps are processed in n_core batches and r must be an integral multiple of n_core or an error will occur. From the first batch, the function generates a message with an approximate estimate of the total run time, allowing the user to assess when completion is likely.<br />
Bootstrap size. Typically, this is the size of the original sample. However, if the original sample is very large (&gt; 100k), the user may wish to consider taking a large subsample of the original externally to the function, to avoid excessive runtimes.<br />
</p>


<h3>Value</h3>

<p>An object of class &quot;BLB_archetypal&quot; which is a list with next members:
</p>

<ol>
<li> <p><code>arches</code>, the user supplied archetypes on which the results are based.
</p>
</li>
<li> <p><code>pop_compos</code>, the population estimates of the compositions (archetypal case weights) for each row of df. 
</p>
</li>
<li> <p><code>lower_ci</code>, the lower confidence interval for these estimates at the ci_sigma level.
</p>
</li>
<li> <p><code>upper_ci</code>, the upper confidence interval for these estimates at the ci_sigma level.
</p>
</li>
<li> <p><code>ci_sigma</code>, the ci_sigma level for confidence intervals.
</p>
</li>
<li> <p><code>N</code>, the original sample size, nrow(df).
</p>
</li></ol>



<h3>Author(s)</h3>

<p>David. F. Midgley
</p>


<h3>References</h3>

<p>[1] Ariel Kleiner, Ameet Talwalkar, Purnamrita Sarkar, Michael I. Jordan, <a href="https://doi.org/10.1111/rssb.12050">doi:10.1111/rssb.12050</a> 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+closer_grid_archetypal">closer_grid_archetypal</a></code>, <code><a href="#topic+grid_archetypal">grid_archetypal</a></code>,
<code><a href="#topic+fast_archetypal">fast_archetypal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
library(GeomArchetypal)
library(mirai)
library(parallel)
data("gallupGPS6")
aa_var &lt;- c("patience","risktaking","trust") # variables for archetypal analysis
# define the 2^3 archetypes from minimums and maximums of the data
min_var &lt;- apply(gallupGPS6[, aa_var], 2, min, na.rm = TRUE)
max_var &lt;- apply(gallupGPS6[, aa_var], 2, max, na.rm = TRUE)
temp &lt;- as.data.frame.matrix(rbind(min_var, max_var))
colnames(temp) &lt;- aa_var
list_minmax &lt;- apply(temp, 2, as.list)
rm(temp, min_var, max_var)
arches &lt;- data.matrix(do.call(expand.grid, list_minmax))
arches &lt;- as.data.frame(arches)
rm(list_minmax)
# apply BLB archetypal for a minimal example
test &lt;- BLB_archetypal(df = gallupGPS6, 
                       ss_size = 50, 
                       bs_size = nrow(gallupGPS6),
                       arches = arches, 
                       use_seed = 2024,
                       n = 1, r = 2, n_core = 1,
                       diag_less = 1e-2)
# will generate a warning because number of bootstraps is too small to
# estimate default confidence intervals 
# Print results of the "BLB_archetypal" class object:
print(test)
# Summarize the "BLB_archetypal" class object:
summary(test)

}
</code></pre>

<hr>
<h2 id='closer_grid_archetypal'>
Performs the Archetypal Analysis of a Data Frame by using as Archetypes the Closer to The Archetypal Grid Data Points
</h2><span id='topic+closer_grid_archetypal'></span>

<h3>Description</h3>

<p>the closer points to the archetypal grid are used as archetypes and then every data point is being expressed as a convex combination of 
those by using a modified PCHA method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>closer_grid_archetypal(dg, 
                       diag_less = 1e-2,
                       niter=30, 
                       use_seed = NULL,
                       verbose = TRUE)                       
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="closer_grid_archetypal_+3A_dg">dg</code></td>
<td>

<p>The data frame with dimensions n x d
</p>
</td></tr>
<tr><td><code id="closer_grid_archetypal_+3A_diag_less">diag_less</code></td>
<td>

<p>The expected mean distance from 1 for the diagonal elements of submatrix A[irows,:],
where <code>irows</code> are the closer to the <code>Grid Archetypal</code> data rows.
</p>
</td></tr>
<tr><td><code id="closer_grid_archetypal_+3A_niter">niter</code></td>
<td>

<p>The number of iterations that the A-update step should be done.
</p>
</td></tr>
<tr><td><code id="closer_grid_archetypal_+3A_use_seed">use_seed</code></td>
<td>

<p>If it is not NULL, then is used at the set.seed() for reproducibility reasons
</p>
</td></tr>
<tr><td><code id="closer_grid_archetypal_+3A_verbose">verbose</code></td>
<td>

<p>If it is set to TRUE, then both initialization and iteration details are printed out
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The archetypal grid is being computed by taking the expand grid of the [Ximin,Ximax], i=1,...,d of all available variables. 
Then distances of all data points from that grid are calculated and the closer set of vectors is chosen. 
</p>


<h3>Value</h3>

<p>An object of class closer_grid_archetypal which is a list with members:
</p>

<ol>
<li> <p><code>grid</code>, the archetypal grid
</p>
</li>
<li> <p><code>grid_rows</code>, the rows of the data frame that formed the archetypal grid
</p>
</li>
<li> <p><code>aa</code>, an object of class archetypal
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="#topic+grid_archetypal">grid_archetypal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    
# Load package
library(GeomArchetypal)  
# Create random data
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Closer Grid Archetypal
cga=closer_grid_archetypal(df, 
             diag_less = 1e-2, 
             niter = 150, 
             verbose = FALSE)
# Print the class "closer_grid_archetypal":
print(cga)
# Summary of the class "closer_grid_archetypal":
summary(cga)
# Plot the class "closer_grid_archetypal":
plot(cga)
# Observe the Closer Grid Archetypes near the 8 corners of the cube ...
</code></pre>

<hr>
<h2 id='fast_archetypal'>
Performs the Archetypal Analysis of a Data Frame by using a Given Set of Archetypes
</h2><span id='topic+fast_archetypal'></span>

<h3>Description</h3>

<p>Performs the archetypal analysis of a data frame by using a known set of archetypes as rows of the data matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fast_archetypal(df,                 
                irows, 
                diag_less = 1e-2,
                niter = 30, 
                verbose = TRUE, 
                data_tables = TRUE,
                use_seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fast_archetypal_+3A_df">df</code></td>
<td>

<p>The data frame with dimensions n x d
</p>
</td></tr> 
<tr><td><code id="fast_archetypal_+3A_irows">irows</code></td>
<td>

<p>The rows from data frame that represent the archetypes
</p>
</td></tr>
<tr><td><code id="fast_archetypal_+3A_diag_less">diag_less</code></td>
<td>

<p>The expected mean distance from 1 for the diagonal elements of submatrix A[irows,:]
</p>
</td></tr>
<tr><td><code id="fast_archetypal_+3A_niter">niter</code></td>
<td>

<p>The number of times that the A-update process should be done
</p>
</td></tr>
<tr><td><code id="fast_archetypal_+3A_verbose">verbose</code></td>
<td>

<p>If it is set to TRUE, then both initialization and iteration details are printed out
</p>
</td></tr>
<tr><td><code id="fast_archetypal_+3A_data_tables">data_tables</code></td>
<td>

<p>If it set to TRUE, then a data table for the initial data points will be computed
</p>
</td></tr>
<tr><td><code id="fast_archetypal_+3A_use_seed">use_seed</code></td>
<td>

<p>If it is not NULL, then is used at the set.seed() for reproducibility reasons
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If we know the archetypes, then we can bypass the half part of PCHA and perform only the A-update part, that of computing the convex combinations for each data point. 
Then archetypal analysis is a fast procedure, since we need only to compute one matrix.
</p>


<h3>Value</h3>

<p>An object of class 'archetypal' is returned.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+grid_archetypal">grid_archetypal</a></code>, <code><a href="#topic+closer_grid_archetypal">closer_grid_archetypal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(GeomArchetypal)  
# Create random data
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Closer Grid Archetypal
cga=closer_grid_archetypal(df, diag_less = 1e-3, 
                           niter = 250, verbose = FALSE)
# The closer to the Grid Archetypes points - rows are:
crows = cga$grid_rows
print(crows)
# Now we call the fast_archetypal() with those rows as argument:
fa=fast_archetypal(df, irows = crows, diag_less = 1e-3, 
                   niter = 250, verbose = FALSE)
# Print:
print(fa)
# Summary:
summary(fa)
# Plot:
plot(fa)
# Results are identical to the closer_grid_archetypal() ones:
all.equal(cga$aa$BY,fa$BY)
</code></pre>

<hr>
<h2 id='gallupGPS6'>
Gallup Global Preferences Study processed data set of six variables
</h2><span id='topic+gallupGPS6'></span>

<h3>Description</h3>

<p>A 76132 x 6 data frame derived from Gallup Global Preferences Study, see [1] and [2] for details.
It can be used as a big data set example. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("gallupGPS6")</code></pre>


<h3>Format</h3>

<p>A data frame with 76132 complete observations on the following 6 variables.
</p>

<dl>
<dt><code>patience</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>risktaking</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>posrecip</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>negrecip</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>altruism</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>trust</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Details</h3>

<p>Data processing:
</p>

<ol>
<li><p> The non complete rows have been removed
</p>
</li>
<li><p> The duplicated rows have also been removed
</p>
</li></ol>



<h3>Note</h3>


<ol>
<li><p> The data was provided under a Creative Commons NonCommerical ShareAlike 4.0 license:  <br />
<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">https://creativecommons.org/licenses/by-nc-sa/4.0/</a> 
</p>
</li>
<li><p> Other variables and identifiers from the original data have been dropped
</p>
</li></ol>



<h3>Source</h3>

<p>Individual data set was downloaded from <br />
<a href="https://www.gallup.com/analytics/318923/world-poll-public-datasets.aspx">https://www.gallup.com/analytics/318923/world-poll-public-datasets.aspx</a>, last accessed 2024-03-09.
</p>


<h3>References</h3>

<p>[1] Falk, A., Becker, A., Dohmen, T., Enke, B., Huffman, D., &amp; Sunde, U. (2018). Global evidence on economic preferences. Quarterly Journal of Economics, 133 (4), 1645-1692.<br />
</p>
<p>[2] Falk, A., Becker, A., Dohmen, T. J., Huffman, D., &amp; Sunde, U. (2016). The preference survey module: A validated instrument for measuring risk, time, and social preferences. IZA Discussion Paper No. 9674. <br />
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(GeomArchetypal)  
data(gallupGPS6)
summary(gallupGPS6)
</code></pre>

<hr>
<h2 id='grid_archetypal'>
Performs the Archetypal Analysis of a Data Frame by using as Archetypes the Archetypal Grid
</h2><span id='topic+grid_archetypal'></span>

<h3>Description</h3>

<p>The archetypal grid is the expand grid of all intervals (X.imin,X.imax), i=1,...,d for a d-dimensional data frame. <br />
That grid is used as archetypes and then only the A-update part of PCHA algorithm is used for computing the compositions of all data points. <br />
The number of archetypes is always kappas = 2^d.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grid_archetypal(dg,  
                diag_less = 1e-2,
                niter = 30, 
                use_seed = NULL, 
                verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="grid_archetypal_+3A_dg">dg</code></td>
<td>

<p>The data frame with dimensions n x d
</p>
</td></tr>
<tr><td><code id="grid_archetypal_+3A_diag_less">diag_less</code></td>
<td>

<p>The expected mean distance from 1 for the diagonal elements of submatrix A[1:kappas,:]
</p>
</td></tr>
<tr><td><code id="grid_archetypal_+3A_niter">niter</code></td>
<td>

<p>The number of times that the A-update process should be done
</p>
</td></tr>
<tr><td><code id="grid_archetypal_+3A_use_seed">use_seed</code></td>
<td>

<p>If it is not NULL, then is used at the set.seed() for reproducibility reasons
</p>
</td></tr>
<tr><td><code id="grid_archetypal_+3A_verbose">verbose</code></td>
<td>

<p>If it is set to TRUE, then both initialization and iteration details are printed out
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The archetypal grid defines a hyper-volume which contains the 100 % of all data points, if we take those grid points as the Convex Hull of all points. Although the archetypal grid points do not necessarily lie inside the data frame, here we do not care about that property: we only seek for the matrix of convex combinations (or composition matrix) A.
</p>


<h3>Value</h3>

<p>An object of class grid_archetypal which is a list with members:
</p>

<ol>
<li> <p><code>grid</code>, the archetypal grid
</p>
</li>
<li> <p><code>aa</code>, an object of class 'archetypal' which includes the archetypal grid as the first 2^d rows
</p>
</li>
<li> <p><code>A</code>, the A-matrix with dimensions n x d that defines the compositions of all data points
</p>
</li>
<li> <p><code>Y</code>, the matrix of initial data points
</p>
</li></ol>



<h3>See Also</h3>

<p><code><a href="#topic+closer_grid_archetypal">closer_grid_archetypal</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  
# Load package  
library(GeomArchetypal)
# Create random data:
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Grid Archetypal:
gaa=grid_archetypal(df, diag_less = 1e-6, 
                    niter = 70, verbose = FALSE)
# Print class "grid_archetypal":
gaa
# Summary class "grid_archetypal":
summary(gaa)
# Plot class "grid_archetypal":
plot(gaa)
# Observe the Grid Archetypes at the 8 corners of the cube ..
</code></pre>

<hr>
<h2 id='plot.closer_grid_archetypal'>
Plot an Object of the Class closer_grid_archetypal
</h2><span id='topic+plot.closer_grid_archetypal'></span>

<h3>Description</h3>

<p>It plots the output of <code><a href="#topic+closer_grid_archetypal">closer_grid_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'closer_grid_archetypal'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.closer_grid_archetypal_+3A_x">x</code></td>
<td>

<p>An object of the class closer_grid_archetypal
</p>
</td></tr>
<tr><td><code id="plot.closer_grid_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class closer_grid_archetypal the archetypal analysis result is plotted. 
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(GeomArchetypal)  
# Create random data
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Closer Grid Archetypal
cga=closer_grid_archetypal(df, niter = 70, verbose = FALSE)
# Plot the class "closer_grid_archetypal":
plot(cga)	
</code></pre>

<hr>
<h2 id='plot.grid_archetypal'>
Plot an Object of the class grid_archetypal
</h2><span id='topic+plot.grid_archetypal'></span>

<h3>Description</h3>

<p>It plots the output of <code><a href="#topic+grid_archetypal">grid_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'grid_archetypal'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.grid_archetypal_+3A_x">x</code></td>
<td>

<p>An object of the class grid_archetypal
</p>
</td></tr>
<tr><td><code id="plot.grid_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class grid_archetypal the archetypal analysis result is plotted. <br />
Remark: the first 2^d rows of the input data frame has Grid Archetypes (d is the dimension of the data points).
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(GeomArchetypal)  
# Create random data:
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Grid Archetypal:
gaa=grid_archetypal(df, niter = 70, verbose = FALSE)
# Plot the class "archetypal":
plot(gaa)    
</code></pre>

<hr>
<h2 id='points_inside_convex_hull'>
Computes the Percentage of Points that Lie Inside the Convex Hull which is Created by a Set of Vectors
</h2><span id='topic+points_inside_convex_hull'></span>

<h3>Description</h3>

<p>Given a set of k d-dimensional vectors which creates a Convex Hull (CH) we want to find the percentage of 
the n points of the n x d data frame df that lie inside that CH.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>points_inside_convex_hull(df, dp)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="points_inside_convex_hull_+3A_df">df</code></td>
<td>

<p>The n x d data frame of all available data points
</p>
</td></tr>
<tr><td><code id="points_inside_convex_hull_+3A_dp">dp</code></td>
<td>

<p>The k x d data frame of the given set of points that creates the Convex Hull
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order for a really Convex Hull creation it must hold that: k &gt;= d + 1, otherwise the problem is not well stated.
</p>


<h3>Value</h3>

<p>A numeric output with percentage in two decimal digits
</p>


<h3>Note</h3>

<p>Keep in mind that working with dimension greater than 6 will practical lead to extreme time executions.
It highly suggested to work only for spaces with d&lt;=6.
</p>


<h3>Author(s)</h3>

<p>Demetris T. Christopoulos
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(GeomArchetypal)  
# Create random data:
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Grid Archetypal:
gaa=grid_archetypal(df, niter = 70, verbose = FALSE)
pc1=points_inside_convex_hull(df,gaa$grid)
print(pc1)
# [1] 100
# Closer Grid Archetypal:
cga=closer_grid_archetypal(df, niter = 70, verbose = FALSE)
pc2=points_inside_convex_hull(df,cga$aa$BY)
print(pc2)
# [1] 59 
</code></pre>

<hr>
<h2 id='print.BLB_archetypal'>
Print an Object of the Class BLB_archetypal
</h2><span id='topic+print.BLB_archetypal'></span>

<h3>Description</h3>

<p>It prints the output of <code><a href="#topic+BLB_archetypal">BLB_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'BLB_archetypal'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.BLB_archetypal_+3A_x">x</code></td>
<td>

<p>An object of the class BLB_archetypal
</p>
</td></tr>
<tr><td><code id="print.BLB_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class BLB_archetypal all the results are printed in explanatory form.
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
library(GeomArchetypal)
library(mirai)
library(parallel)
data("gallupGPS6")
aa_var &lt;- c("patience","risktaking","trust") # variables for archetypal analysis
# define the 2^3 archetypes from minimums and maximums of the data
min_var &lt;- apply(gallupGPS6[, aa_var], 2, min, na.rm = TRUE)
max_var &lt;- apply(gallupGPS6[, aa_var], 2, max, na.rm = TRUE)
temp &lt;- as.data.frame.matrix(rbind(min_var, max_var))
colnames(temp) &lt;- aa_var
list_minmax &lt;- apply(temp, 2, as.list)
rm(temp, min_var, max_var)
arches &lt;- data.matrix(do.call(expand.grid, list_minmax))
arches &lt;- as.data.frame(arches)
rm(list_minmax)
# apply BLB archetypal for a minimal example
test &lt;- BLB_archetypal(df = gallupGPS6, 
                       ss_size = 50, 
                       bs_size = nrow(gallupGPS6),
                       arches = arches, 
                       use_seed = 2024,
                       n = 1, r = 2, n_core = 1,
                       diag_less = 1e-2)
# Print the results of the class "BLB_archetypal" object:
print(test)

}
</code></pre>

<hr>
<h2 id='print.closer_grid_archetypal'>
Print an Object of the closer_grid_archetypal
</h2><span id='topic+print.closer_grid_archetypal'></span>

<h3>Description</h3>

<p>It prints the output of <code><a href="#topic+closer_grid_archetypal">closer_grid_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'closer_grid_archetypal'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.closer_grid_archetypal_+3A_x">x</code></td>
<td>

<p>An object of the class closer_grid_archetypal
</p>
</td></tr>
<tr><td><code id="print.closer_grid_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class closer_grid_archetypal all the results are printed in explanatory form.
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(GeomArchetypal)  
# Create random data
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Closer Grid Archetypal
cga=closer_grid_archetypal(df, niter = 70, verbose = FALSE)
# Print the class "closer_grid_archetypal"
print(cga)	
</code></pre>

<hr>
<h2 id='print.grid_archetypal'>
Print an Object of the Class grid_archetypal
</h2><span id='topic+print.grid_archetypal'></span>

<h3>Description</h3>

<p>It prints the output of <code><a href="#topic+grid_archetypal">grid_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'grid_archetypal'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.grid_archetypal_+3A_x">x</code></td>
<td>

<p>An object of the class grid_archetypal
</p>
</td></tr>
<tr><td><code id="print.grid_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class grid_archetypal all the results are printed in explanatory form.
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Load package
  library(GeomArchetypal)  
	# Create random data:
	set.seed(20140519)
	df=matrix(runif(90) , nrow = 30, ncol=3) 
	colnames(df)=c("x","y","z")
	# Grid Archetypal:
	gaa=grid_archetypal(df, niter = 70, verbose = FALSE)
	# Print the class "grid_archetypal":
	print(gaa)	
</code></pre>

<hr>
<h2 id='summary.BLB_archetypal'>
Summarize an Object of the Class BLB_archetypal
</h2><span id='topic+summary.BLB_archetypal'></span>

<h3>Description</h3>

<p>It summarizes the output of <code><a href="#topic+BLB_archetypal">BLB_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'BLB_archetypal'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.BLB_archetypal_+3A_object">object</code></td>
<td>

<p>An object of the class BLB_archetypal
</p>
</td></tr>
<tr><td><code id="summary.BLB_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class BLB_archetypal all the results are being summarized in explanatory form.
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
library(GeomArchetypal)
library(mirai)
library(parallel)
data("gallupGPS6")
aa_var &lt;- c("patience","risktaking","trust") # variables for archetypal analysis
# define the 2^3 archetypes from minimums and maximums of the data
min_var &lt;- apply(gallupGPS6[, aa_var], 2, min, na.rm = TRUE)
max_var &lt;- apply(gallupGPS6[, aa_var], 2, max, na.rm = TRUE)
temp &lt;- as.data.frame.matrix(rbind(min_var, max_var))
colnames(temp) &lt;- aa_var
list_minmax &lt;- apply(temp, 2, as.list)
rm(temp, min_var, max_var)
arches &lt;- data.matrix(do.call(expand.grid, list_minmax))
arches &lt;- as.data.frame(arches)
rm(list_minmax)
# apply BLB archetypal for a minimal example
test &lt;- BLB_archetypal(df = gallupGPS6, 
                       ss_size = 50, 
                       bs_size = nrow(gallupGPS6),
                       arches = arches, 
                       use_seed = 2024,
                       n = 1, r = 2, n_core = 1,
                       diag_less = 1e-2)
# Summarize the results of the "BLB_archetypal" class object:
summary(test)

}
</code></pre>

<hr>
<h2 id='summary.closer_grid_archetypal'>
Summary of an Object of the Class closer_grid_archetypal
</h2><span id='topic+summary.closer_grid_archetypal'></span>

<h3>Description</h3>

<p>It gives a summary for the output of <code><a href="#topic+closer_grid_archetypal">closer_grid_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'closer_grid_archetypal'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.closer_grid_archetypal_+3A_object">object</code></td>
<td>

<p>An object of the class closer_grid_archetypal
</p>
</td></tr>
<tr><td><code id="summary.closer_grid_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class closer_grid_archetypal the summary of the archetypal analysis output is given. 
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'>	# Load package
  library(GeomArchetypal)  
	# Create random data
	set.seed(20140519)
	df=matrix(runif(90) , nrow = 30, ncol=3) 
	colnames(df)=c("x","y","z")
	# Closer Grid Archetypal
	cga=closer_grid_archetypal(df, niter = 70, verbose = FALSE)	
	# Summary of the class "closer_grid_archetypal":
	summary(cga)  
</code></pre>

<hr>
<h2 id='summary.grid_archetypal'>
Summary of an Object of the Class grid_archetypal
</h2><span id='topic+summary.grid_archetypal'></span>

<h3>Description</h3>

<p>It gives a summary for the output of <code><a href="#topic+grid_archetypal">grid_archetypal</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'grid_archetypal'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.grid_archetypal_+3A_object">object</code></td>
<td>

<p>An object of the class grid_archetypal
</p>
</td></tr>
<tr><td><code id="summary.grid_archetypal_+3A_...">...</code></td>
<td>

<p>Other arguments (ignored)
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given an object of class grid_archetypal the summary of the archetypal analysis output is given. <br />
Remark: the first 2^d rows of the input data frame are the Grid Archetypes (d is the dimension of the data points).
</p>


<h3>Value</h3>

<p>No return value, called for side effects</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(GeomArchetypal)  
# Create random data:
set.seed(20140519)
df=matrix(runif(90) , nrow = 30, ncol=3) 
colnames(df)=c("x","y","z")
# Grid Archetypal:
gaa=grid_archetypal(df, niter = 70, verbose = FALSE)
# Summary of the class "grid_archetypal":
summary(gaa)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
