<!DOCTYPE html><html><head><title>Help for package robmed</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {robmed}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#boot_samples'><p>Draw bootstrap samples</p></a></li>
<li><a href='#BSG2014'><p>Business simulation game data</p></a></li>
<li><a href='#ci_plot'><p>Dot plot with confidence intervals</p></a></li>
<li><a href='#coef.test_mediation'><p>Coefficients in (robust) mediation analysis</p></a></li>
<li><a href='#confint.test_mediation'><p>Confidence intervals from (robust) mediation analysis</p></a></li>
<li><a href='#cov_control'><p>Tuning parameters for Huber M-estimation of location and scatter</p></a></li>
<li><a href='#cov_Huber'><p>Huber M-estimator of location and scatter</p></a></li>
<li><a href='#cov_ML'><p>Maximum likelihood estimator of mean vector and covariance matrix</p></a></li>
<li><a href='#density_plot'><p>Density plot of the indirect effect(s)</p></a></li>
<li><a href='#ellipse_plot'><p>Diagnostic plot with a tolerance ellipse</p></a></li>
<li><a href='#fit_mediation'><p>(Robustly) fit a mediation model</p></a></li>
<li><a href='#m'><p>Create an object of hypothesized mediators or control variables</p></a></li>
<li><a href='#p_value'><p>p-Values from (robust) mediation analysis</p></a></li>
<li><a href='#plot-methods'><p>Plot (robust) mediation analysis results</p></a></li>
<li><a href='#reg_control'><p>Tuning parameters for MM-regression</p></a></li>
<li><a href='#retest'><p>Retest for mediation</p></a></li>
<li><a href='#robmed-package'><p>(Robust) Mediation Analysis</p></a></li>
<li><a href='#setup_ci_plot'><p>Set up information for a dot plot with confidence intervals</p></a></li>
<li><a href='#setup_density_plot'><p>Set up information for a density plot of the indirect effect(s)</p></a></li>
<li><a href='#setup_ellipse_plot'><p>Set up a diagnostic plot with a tolerance ellipse</p></a></li>
<li><a href='#setup_weight_plot'><p>Set up a diagnostic plot of robust regression weights</p></a></li>
<li><a href='#sim_mediation'><p>Generate data from a fitted mediation model</p></a></li>
<li><a href='#summary.test_mediation'><p>Summary of results from (robust) mediation analysis</p></a></li>
<li><a href='#test_mediation'><p>(Robust) mediation analysis</p></a></li>
<li><a href='#weight_plot'><p>Diagnostic plot of robust regression weights</p></a></li>
<li><a href='#weights.cov_Huber'><p>Robustness weights of Huber M-estimation of location and scatter</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>(Robust) Mediation Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-06-16</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), ggplot2 (&ge; 3.3.0), robustbase (&ge; 0.92-7)</td>
</tr>
<tr>
<td>Imports:</td>
<td>boot (&ge; 1.3-20), grid, methods, quantreg (&ge; 5.36), sn (&ge;
1.5-4), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, testthat</td>
</tr>
<tr>
<td>Description:</td>
<td>Perform mediation analysis via the fast-and-robust bootstrap test ROBMED (Alfons, Ates &amp; Groenen, 2022a; &lt;<a href="https://doi.org/10.1177%2F1094428121999096">doi:10.1177/1094428121999096</a>&gt;), as well as various other methods. Details on the implementation and code examples can be found in Alfons, Ates, and Groenen (2022b) &lt;<a href="https://doi.org/10.18637%2Fjss.v103.i13">doi:10.18637/jss.v103.i13</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/aalfons/robmed">https://github.com/aalfons/robmed</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/aalfons/robmed/issues">https://github.com/aalfons/robmed/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Author:</td>
<td>Andreas Alfons <a href="https://orcid.org/0000-0002-2513-3788"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Nufer Y. Ates <a href="https://orcid.org/0000-0003-4572-4101"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb] (provided the BSG2014 data)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andreas Alfons &lt;alfons@ese.eur.nl&gt;</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-16 17:41:16 UTC; andreas</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-16 23:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='boot_samples'>Draw bootstrap samples</h2><span id='topic+boot_samples'></span>

<h3>Description</h3>

<p>Draw bootstrap samples to be used for (fast-and-robust) bootstrap tests
for mediation analysis.  Note that this function is intended for use in
simulation studies by experienced users.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot_samples(n, R)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boot_samples_+3A_n">n</code></td>
<td>
<p>an integer giving the number of observations in the original data
set.</p>
</td></tr>
<tr><td><code id="boot_samples_+3A_r">R</code></td>
<td>
<p>an integer giving the number of bootstrap samples to be generated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>"boot_samples"</code> with the following
components:
</p>
<table>
<tr><td><code>indices</code></td>
<td>
<p>an integer matrix in which each column contains the indices
of the corresponding bootstrap sample.</p>
</td></tr>
<tr><td><code>seed</code></td>
<td>
<p>the state of the random number generator before the bootstrap
samples were drawn</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# control parameters
n &lt;- 100
a &lt;- b &lt;- c &lt;- 0.4

# generate data
set.seed(20200309)
x &lt;- rnorm(n)
m &lt;- a * x + rnorm(n)
y &lt;- b * m + c * x + rnorm(n)
simulated_data &lt;- data.frame(x, y, m)

# perform boostrap tests
indices &lt;- boot_samples(n, R = 5000)
robust_boot &lt;- test_mediation(simulated_data,
                              x = "x", y = "y", m = "m",
                              robust = TRUE,
                              indices = indices)
summary(robust_boot)
ols_boot &lt;- test_mediation(simulated_data,
                           x = "x", y = "y", m = "m",
                           robust = FALSE,
                           indices = indices)
summary(ols_boot)


</code></pre>

<hr>
<h2 id='BSG2014'>Business simulation game data</h2><span id='topic+BSG2014'></span>

<h3>Description</h3>

<p>The data were collected from 354 senior business administration students
during a business simulation game at a Western European University.
</p>
<p>The game was played for a total of 12 rounds (i.e., two separate games of 6
rounds) as part of the capstone strategy class.  Students were randomly
assigned to teams of four, and surveyed in three waves: prior to the first
game, in between the two games, and after the second game (with different
variables being surveyed in the different waves).
</p>
<p>The 354 students formed 92 teams, and the responses of individual students
were aggregated to the team level.  Leaving out teams with less than 50
percent response rate yields <code class="reqn">n = 89</code> teams.  Only a small subset of the
collected variables are included here.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("BSG2014")
</code></pre>


<h3>Format</h3>

<p>A data frame with 89 observations on the following 13 variables.
</p>

<dl>
<dt><code>ProcessConflict</code></dt><dd><p>Based on Shah &amp; Jehn (1993), the team
members rated three items on the presence of conflict related to the
process of working together, using a 5-point scale (1 = none, 5 = a lot).
The individual responses were aggregated by taking the average across
items and team members.  Process conflict was measured in the second
survey (between the two games).</p>
</dd>
<dt><code>SharedExperience</code></dt><dd><p>As teams were randomly formed, no prior
shared group experience is expected, and shared group experience and
training is developed during the first game for the second game.  Hence
the team performance score on the first game is used as a proxy for the
level of shared group experience and training.  Those scores were computed
through a mix of five objective performance measures: return on equity,
earnings-per-share, stock price, credit rating, and image rating.  The
computation of the scores is handled by the simulation game software, and
details can be found in Mathieu &amp; Rapp (2009).  The scores ranged from 57
to 111, and they were communicated to the teams only after the third
survey.</p>
</dd>
<dt><code>TaskConflict</code></dt><dd><p>Using the intra-group conflict scale of Jehn
(1995), the team members rated four items on the presence of conflict
regarding the work on a 5-point scale (1 = none, 5 = a lot).
The individual responses were aggregated by taking the average across
items and team members.  Task conflict was measured in the second survey
(between the two games).</p>
</dd>
<dt><code>TeamCommitment</code></dt><dd><p>The team members indicated the extent to
which they agree or disagree with four items on commitment to the team,
which are based on Mowday, Steers &amp; Porter (1979), using a 5-point scale
(1 = strongly disagree, 5 = strongly agree).  The individual responses
were aggregated by taking the average across items and team members.
Team commitment was measured in the third survey (after the second game).</p>
</dd>
<dt><code>TeamPerformance</code></dt><dd><p>Following Hackman (1986), the team members
indicated the extent to which they agree or disagree with four items on
the team's functioning, using a 5-point scale (1 = strongly disagree, 5 =
strongly agree).  The individual responses were aggregated by taking the
average across items and team members.  Subjective team performance was
measured in the third survey (after the second game).</p>
</dd>
<dt><code>TMS</code></dt><dd><p>Transactive memory systems (TMS) are defined as shared
systems that people in relationships develop for encoding, storing, and
retrieving information about different substantive domains.  TMS was
operationalized with Lewis’ (2003) 15-item scale that measures the three
sub-dimensions of TMS (specialization, credibility, and coordination).
For each item, the team members responded on a 5-point scale (1 = strongly
disagree, 5 = strongly agree).  Following Lewis (2003), the three sub
dimensions were aggregated to form the TMS construct.  That is, the
individual responses were aggregated by taking the average across all 15
items and team members.  TMS was measured in the second survey (between
the two games).</p>
</dd>
<dt><code>ValueDiversity</code></dt><dd><p>Using the short Schwartz’s value survey
(Lindeman &amp; Verkasalo, 2005), the team members rated ten items on the
importance of certain values (1 = not important, 10 = highly important).
For each value item, the coefficient of variation of the individual
responses across team members was computed, and the resulting coefficients
of variation were averaged across the value items.  Value diversity was
measured in the first survey (before the first game).</p>
</dd>
<dt><code>ProceduralJustice</code></dt><dd><p>Based on the intra-unit procedural justice
climate scale of Li &amp; Cropanzano (2009), the team members indicated the
extent to which they agree or disagree with four items on a 5-point scale
(1 = strongly disagree, 5 = strongly agree).  The individual responses
were aggregated by taking the average across items and team members.
Procedural justice was measured in the third survey (after the second
game).</p>
</dd>
<dt><code>InteractionalJustice</code></dt><dd><p>Using the intra-unit interactional
justice climate scale of Li &amp; Cropanzano (2009), the team members
indicated the extent to which they agree or disagree with four items on a
5-point scale (1 = strongly disagree, 5 = strongly agree).  The individual
responses were aggregated by taking the average across items and team
members.  Interactional justice was measured in the third survey (after
the second game).</p>
</dd>
<dt><code>SharedLeadership</code></dt><dd><p>Following Carson, Tesluk &amp; Marrone (2007),
every team member assessed each of their peers on the question of
&lsquo;To what degree does your team rely on this individual for
leadership?&rsquo; using a 5-point scale (1 = not at all, 5 = to a very large
extent).  The leadership ratings were aggregated by taking the sum and
dividing it by the number of pairwise relationships among team members.
Shared leadership was measured in the second survey (between the two
games).</p>
</dd>
<dt><code>AgeDiversity</code></dt><dd><p>Following Harrison &amp; Klein (2007), age
diversity was operationalized by the coefficient of variation of the
team members' ages.</p>
</dd>
<dt><code>GenderDiversity</code></dt><dd><p>Gender diversity was measured with Blau's
index, <code class="reqn">1 - \sum_{j} p_{j}^{2}</code>, where <code class="reqn">p_{j}</code> is the proportion of team members in the
<code class="reqn">j</code>-th category (Blau, 1977).</p>
</dd>
<dt><code>TeamScore</code></dt><dd><p>The team performance scores on the second game
were computed at the end of the simulation through a mix of five objective
performance measures: return on equity, earnings-per-share, stock price,
credit rating, and image rating. The computation of the scores is handled
by the simulation game software, and details can be found in Mathieu &amp;
Rapp (2009).  The scores ranged from 49 to 110, and they were communicated
to the teams only after the third survey.</p>
</dd>
</dl>



<h3>Source</h3>

<p>The data were collected and provided by Nufer Y. Ates
(<a href="https://orcid.org/0000-0003-4572-4101">https://orcid.org/0000-0003-4572-4101</a>).
</p>


<h3>References</h3>

<p>Blau, P.M. (1977) <em>Inequality and Heterogeneity: A Primitive Theory of
Social Structure</em>. New York, NY: Free Press.
</p>
<p>Carson, J.B., Tesluk, P.E. and Marrone, J.A. (2007) Shared Leadership in
Teams: An Investigation of Antecedent Conditions and Performance.
<em>Academy of Management Journal</em>, <b>50</b>(5), 1217&ndash;1234.
doi:10.5465/amj.2007.20159921.
</p>
<p>Hackman, J.R. (1986) The Psychology of Self-Management in Organizations.
In Pallack, M.S and Perloff, R.O. (Eds.), <em>Psychology and Work:
Productivity, Change, and Employment</em>, 89&ndash;136.  Washington, DC: American
Psychological Association.
</p>
<p>Harrison, D.A. and Klein, K.J. (2007) What's the Difference? Diversity
Constructs as Separation, Variety, or Disparity in Organizations.
<em>Academy of Management Review</em>, <b>32</b>(4): 1199&ndash;1228.
doi:10.5465/amr.2007.26586096.
</p>
<p>Jehn, K.A. (1995) A Multimethod Examination of the Benefits and Detriments
of Intragroup Conflict.  <em>Administrative Science Quarterly</em>,
<b>40</b>(2), 256&ndash;285.  doi:10.2307/2393638.
</p>
<p>Lewis, K. (2003) Measuring Transactive Memory Systems in the Field: Scale
Development and Validation.  <em>Journal of Applied Psychology</em>,
<b>88</b>(4), 587&ndash;604.  doi:10.1037/0021-9010.88.4.587.
</p>
<p>Li, A. and Cropanzano, R. (2009) Fairness at the Group Level: Justice
Climate and Intraunit Justice Climate.  <em>Journal of Management</em>,
<b>35</b>(3), 564&ndash;599.  doi:10.1177/0149206308330557.
</p>
<p>Lindeman, M. and Verkasalo, M. (2005) Measuring Values With the Short
Schwartz's Value Survey.  <em>Journal of Personality Assessment</em>,
<b>85</b>(2), 170&ndash;178.  doi:10.1207/s15327752jpa8502_09.
</p>
<p>Mathieu, J.E. and Rapp, T.L. (2009).  Laying the Foundation for Successful
Team Performance Trajectories: The Roles of Team Charters and Performance
Strategies.  <em>Journal of Applied Psychology</em>, <b>94</b>(1), 90&ndash;103.
doi:10.1037/a0013257.
</p>
<p>Mowday, R.T., Steers, R.M. and Porter, L.W. (1979) The Measurement of
Organizational Commitment.  <em>Journal of Vocational Behavior</em>,
<b>14</b>(2), 224&ndash;247.  doi:10.1016/0001-8791(79)90072-1.
</p>
<p>Shah, P.P. and Jehn, K.A. (1993) Do Friends Perform Better than
Acquaintances? The Interaction of Friendship, Conflict, and Task.
<em>Group Decision and Negotiation</em>, <b>2</b>(2), 149&ndash;165.
doi:10.1007/bf01884769.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")
summary(BSG2014)

# scatterplot matrix for the variables included in the
# illustrative mediation analysis
x &lt;- "ValueDiversity"
y &lt;- "TeamCommitment"
m &lt;- "TaskConflict"
plot(BSG2014[, c(x, y, m)], pch = 21, bg = "black")
</code></pre>

<hr>
<h2 id='ci_plot'>Dot plot with confidence intervals</h2><span id='topic+ci_plot'></span><span id='topic+ci_plot.default'></span><span id='topic+ci_plot.boot_test_mediation'></span><span id='topic+ci_plot.sobel_test_mediation'></span><span id='topic+ci_plot.list'></span><span id='topic+ci_plot.setup_ci_plot'></span>

<h3>Description</h3>

<p>Produce a dot plot with confidence intervals of selected effects from
(robust) mediation analysis.  In addition to confidence intervals, p-values
of the selected effects can be plotted as well.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ci_plot(object, ...)

## Default S3 method:
ci_plot(object, parm = c("direct", "indirect"), ...)

## S3 method for class 'boot_test_mediation'
ci_plot(
  object,
  parm = c("direct", "indirect"),
  type = c("boot", "data"),
  p_value = FALSE,
  digits = 4L,
  ...
)

## S3 method for class 'sobel_test_mediation'
ci_plot(
  object,
  parm = c("direct", "indirect"),
  level = 0.95,
  p_value = FALSE,
  ...
)

## S3 method for class 'list'
ci_plot(
  object,
  parm = c("direct", "indirect"),
  type = c("boot", "data"),
  level = 0.95,
  p_value = FALSE,
  digits = 4L,
  ...
)

## S3 method for class 'setup_ci_plot'
ci_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ci_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from
(robust) mediation analysis, or a list of such objects.</p>
</td></tr>
<tr><td><code id="ci_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="ci_plot_+3A_parm">parm</code></td>
<td>
<p>an integer, character or logical vector specifying which
effects to include in the plot.  In case of a character vector, possible
values are <code>"a"</code>, <code>"b"</code>, <code>"d"</code> (only serial multiple mediator
models), <code>"total"</code>, <code>"direct"</code>, and <code>"indirect"</code>.  The
default is to include the direct and the indirect effect(s).</p>
</td></tr>
<tr><td><code id="ci_plot_+3A_type">type</code></td>
<td>
<p>a character string specifying which point estimates and
confidence intervals to plot: those based on the bootstrap distribution
(<code>"boot"</code>; the default), or those based on the original data
(<code>"data"</code>).  If <code>"boot"</code>, the confidence intervals of effects
other than the indirect effect(s) are computed using a normal approximation
(i.e., assuming a normal distribution of the corresponding effect with the
standard deviation computed from the bootstrap replicates).  If
<code>"data"</code>, the confidence intervals of effects other than the indirect
effect(s) are computed via statistical theory based on the original data
(e.g., based on a t-distribution if the coefficients are estimated via
regression).  Note that this is only relevant for mediation analysis via a
bootstrap test, where the confidence interval of the indirect effect is
always computed via a percentile-based method due to the asymmetry of its
distribution.</p>
</td></tr>
<tr><td><code id="ci_plot_+3A_p_value">p_value</code></td>
<td>
<p>a logical indicating whether to include dot plots of the
p-values in addition to those with confidence intervals.  The default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ci_plot_+3A_digits">digits</code></td>
<td>
<p>an integer determining how many digits to compute for
bootstrap p-values of the indirect effects (see <code><a href="#topic+p_value">p_value</a>()</code>).
The default is to compute 4 digits after the comma.  This is only relevant
if <code>p_value = TRUE</code>.</p>
</td></tr>
<tr><td><code id="ci_plot_+3A_level">level</code></td>
<td>
<p>numeric;  the confidence level of the confidence intervals
from Sobel's test.  The default is to include 95% confidence intervals.
Note that this is not used for bootstrap tests, as those require to specify
the confidence level already in <code><a href="#topic+test_mediation">test_mediation</a>()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Methods first call <code><a href="#topic+setup_ci_plot">setup_ci_plot</a>()</code> to extract all necessary
information to produce the plot, then the <code>"setup_ci_plot"</code>
method is called to produce the plot.
</p>


<h3>Value</h3>

<p>An object of class <code>"<a href="ggplot2.html#topic+ggplot">ggplot</a>"</code>.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+setup_ci_plot">setup_ci_plot</a>()</code>
</p>
<p><code><a href="#topic+density_plot">density_plot</a>()</code>, <code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>,
<code><a href="#topic+weight_plot">weight_plot</a>()</code>, <code><a href="#topic+plot-methods">plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
robust_boot &lt;- test_mediation(BSG2014,
                              x = "ValueDiversity",
                              y = "TeamCommitment",
                              m = "TaskConflict",
                              robust = TRUE)

# create plot for robust bootstrap test
ci_plot(robust_boot)
ci_plot(robust_boot, color = "#00BFC4")

# run OLS bootstrap test
ols_boot &lt;- test_mediation(BSG2014,
                           x = "ValueDiversity",
                           y = "TeamCommitment",
                           m = "TaskConflict",
                           robust = FALSE)

# compare robust and OLS bootstrap tests
boot_list &lt;- list("OLS bootstrap" = ols_boot,
                  "ROBMED" = robust_boot)
ci_plot(boot_list)

# the plot can be customized in the usual way
ci_plot(boot_list) +
  geom_hline(yintercept = 0, color = "darkgrey") +
  coord_flip() + theme_bw() +
  labs(title = "OLS bootstrap vs ROBMED")

</code></pre>

<hr>
<h2 id='coef.test_mediation'>Coefficients in (robust) mediation analysis</h2><span id='topic+coef.test_mediation'></span><span id='topic+coef.boot_test_mediation'></span><span id='topic+coef.fit_mediation'></span>

<h3>Description</h3>

<p>Extract coefficients from models computed in (robust) mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'test_mediation'
coef(object, parm = NULL, ...)

## S3 method for class 'boot_test_mediation'
coef(object, parm = NULL, type = c("boot", "data"), ...)

## S3 method for class 'fit_mediation'
coef(object, parm = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coef.test_mediation_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+test_mediation">test_mediation</a>"</code>
containing results from (robust) mediation analysis, or an object inheriting
from class <code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code> containing a (robust) mediation
model fit.</p>
</td></tr>
<tr><td><code id="coef.test_mediation_+3A_parm">parm</code></td>
<td>
<p>an integer, character or logical vector specifying the
paths for which to extract coefficients, or <code>NULL</code> to extract all
coefficients.  In case of a character vector, possible values are
<code>"a"</code>, <code>"b"</code>, <code>"d"</code> (only serial multiple mediator
models), <code>"total"</code>, <code>"direct"</code>, and <code>"indirect"</code>.</p>
</td></tr>
<tr><td><code id="coef.test_mediation_+3A_...">...</code></td>
<td>
<p>additional arguments are currently ignored.</p>
</td></tr>
<tr><td><code id="coef.test_mediation_+3A_type">type</code></td>
<td>
<p>a character string specifying whether to extract the means
of the bootstrap distribution (<code>"boot"</code>; the default), or the
coefficient estimates based on the original data set (<code>"data"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector containing the requested coefficients.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+fit_mediation">fit_mediation</a>()</code>,
<code><a href="#topic+confint.test_mediation">confint</a>()</code>, <code><a href="#topic+p_value">p_value</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# fit robust mediation model and extract coefficients
fit &lt;- fit_mediation(BSG2014,
                     x = "ValueDiversity",
                     y = "TeamCommitment",
                     m = "TaskConflict")
coef(fit)

# run fast-and-robust bootstrap test and extract coefficients
boot &lt;- test_mediation(fit)
coef(boot, type = "data")  # from original sample
coef(boot, type = "boot")  # means of bootstrap replicates

</code></pre>

<hr>
<h2 id='confint.test_mediation'>Confidence intervals from (robust) mediation analysis</h2><span id='topic+confint.test_mediation'></span><span id='topic+confint.boot_test_mediation'></span><span id='topic+confint.sobel_test_mediation'></span>

<h3>Description</h3>

<p>Extract or compute confidence intervals for effects in (robust)
mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'boot_test_mediation'
confint(object, parm = NULL, level = NULL, type = c("boot", "data"), ...)

## S3 method for class 'sobel_test_mediation'
confint(object, parm = NULL, level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="confint.test_mediation_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+test_mediation">test_mediation</a>"</code>
containing results from (robust) mediation analysis.</p>
</td></tr>
<tr><td><code id="confint.test_mediation_+3A_parm">parm</code></td>
<td>
<p>an integer, character or logical vector specifying the paths
for which to extract or compute confidence intervals, or <code>NULL</code>
to extract or compute confidence intervals for all coefficients.  In
case of a character vector, possible values are <code>"a"</code>, <code>"b"</code>,
<code>"d"</code> (only serial multiple mediator models), <code>"total"</code>,
<code>"direct"</code>, and <code>"indirect"</code>.</p>
</td></tr>
<tr><td><code id="confint.test_mediation_+3A_level">level</code></td>
<td>
<p>for the <code>"boot_test_mediation"</code> method, this is ignored
and the confidence level of the bootstrap confidence interval for the
indirect effect is used.  For the other methods, the confidence level of
the confidence intervals to be computed.  The default is to compute 95%
confidence intervals.</p>
</td></tr>
<tr><td><code id="confint.test_mediation_+3A_type">type</code></td>
<td>
<p>a character string specifying how to compute the confidence
interval of the effects other than the indirect effect(s).  Possible values
are <code>"boot"</code> (the default) to compute bootstrap confidence intervals
using the normal approximation (i.e., to assume a normal distribution of the
corresponding effect with the standard deviation computed from the bootstrap
replicates), or <code>"data"</code> to compute confidence intervals via
statistical theory based on the original data (e.g., based on a
t-distribution if the coefficients are estimated via regression).  Note that
this is only relevant for mediation analysis via a bootstrap test, where
the confidence interval of the indirect effect is always computed via a
percentile-based method due to the asymmetry of its distribution.</p>
</td></tr>
<tr><td><code id="confint.test_mediation_+3A_...">...</code></td>
<td>
<p>additional arguments are currently ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric matrix containing the requested confidence intervals.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+coef.test_mediation">coef</a>()</code>,
<code><a href="#topic+p_value">p_value</a>()</code>, <code><a href="boot.html#topic+boot.ci">boot.ci</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
robust_boot &lt;- test_mediation(BSG2014,
                              x = "ValueDiversity",
                              y = "TeamCommitment",
                              m = "TaskConflict",
                              robust = TRUE)
confint(robust_boot, type = "boot")

# run OLS bootstrap test
ols_boot &lt;- test_mediation(BSG2014,
                           x = "ValueDiversity",
                           y = "TeamCommitment",
                           m = "TaskConflict",
                           robust = FALSE)
confint(ols_boot, type = "data")

</code></pre>

<hr>
<h2 id='cov_control'>Tuning parameters for Huber M-estimation of location and scatter</h2><span id='topic+cov_control'></span>

<h3>Description</h3>

<p>Obtain a list with tuning paramters for <code><a href="#topic+cov_Huber">cov_Huber</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cov_control(prob = 0.95, max_iterations = 200, tol = 1e-07)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cov_control_+3A_prob">prob</code></td>
<td>
<p>numeric; probability for the quantile of the
<code class="reqn">\chi^{2}</code> distribution to be used as cutoff point in the
Huber weight function (defaults to 0.95).</p>
</td></tr>
<tr><td><code id="cov_control_+3A_max_iterations">max_iterations</code></td>
<td>
<p>an integer giving the maximum number of iterations in
the iteratively reweighted algorithm.</p>
</td></tr>
<tr><td><code id="cov_control_+3A_tol">tol</code></td>
<td>
<p>a small positive numeric value to be used to determine
convergence of the iteratively reweighted algorithm.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with components corresponding to the arguments.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Huber, P.J. (1981) <em>Robust Statistics</em>. John Wiley &amp; Sons.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cov_Huber">cov_Huber</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run bootstrap test after winsorization
ctrl &lt;- cov_control(prob = 0.95)
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict",
                       method = "covariance",
                       control = ctrl)
summary(boot)

</code></pre>

<hr>
<h2 id='cov_Huber'>Huber M-estimator of location and scatter</h2><span id='topic+cov_Huber'></span><span id='topic+print.cov_Huber'></span>

<h3>Description</h3>

<p>Compute a Huber M-estimator of location and scatter, which is reasonably
robust for a small number of variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cov_Huber(x, control = cov_control(...), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cov_Huber_+3A_x">x</code></td>
<td>
<p>a numeric matrix or data frame.</p>
</td></tr>
<tr><td><code id="cov_Huber_+3A_control">control</code></td>
<td>
<p>a list of tuning parameters as generated by
<code><a href="#topic+cov_control">cov_control</a>()</code>.</p>
</td></tr>
<tr><td><code id="cov_Huber_+3A_...">...</code></td>
<td>
<p>additional arguments can be used to specify tuning parameters
directly instead of via <code>control</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>An iterative reweighting algorithm is used to compute the Huber
M-estimator.  The Huber weight function thereby corresponds to a
convex optimization problem, resulting in a unique solution.
</p>


<h3>Value</h3>

<p>An object of class <code>"cov_Huber"</code> with the following components:
</p>
<table>
<tr><td><code>center</code></td>
<td>
<p>a numeric vector containing the location vector estimate.</p>
</td></tr>
<tr><td><code>cov</code></td>
<td>
<p>a numeric matrix containing the scatter matrix estimate.</p>
</td></tr>
<tr><td><code>prob</code></td>
<td>
<p>numeric; probability for the quantile of the
<code class="reqn">\chi^{2}</code> distribution used as cutoff point in the Huber
weight function.</p>
</td></tr>
<tr><td><code>weights</code></td>
<td>
<p>a numeric vector containing the relative robustness
weights for the observations.</p>
</td></tr>
<tr><td><code>tau</code></td>
<td>
<p>numeric; correction for Fisher consistency under
multivariate normal distributions.</p>
</td></tr>
<tr><td><code>converged</code></td>
<td>
<p>a logical indicating whether the iterative
reweighting algorithm converged.</p>
</td></tr>
<tr><td><code>iterations</code></td>
<td>
<p>an integer giving the number of iterations required
to obtain the solution.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Huber, P.J. (1981) <em>Robust Statistics</em>. John Wiley &amp; Sons.
</p>
<p>Zu, J. and Yuan, K.-H. (2010) Local Influence and Robust Procedures for
Mediation Analysis.  <em>Multivariate Behavioral Research</em>, <b>45</b>(1),
1&ndash;44.  doi:10.1080/00273170903504695.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cov_control">cov_control</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>,
<code><a href="#topic+fit_mediation">fit_mediation</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# define variables
x &lt;- "ValueDiversity"
y &lt;- "TeamCommitment"
m &lt;- "TaskConflict"

# compute Huber M-estimator
cov_Huber(BSG2014[, c(x, y, m)])

</code></pre>

<hr>
<h2 id='cov_ML'>Maximum likelihood estimator of mean vector and covariance matrix</h2><span id='topic+cov_ML'></span><span id='topic+print.cov_ML'></span>

<h3>Description</h3>

<p>Compute the maximum likelihood estimator of the mean vector and the
covariance matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cov_ML(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cov_ML_+3A_x">x</code></td>
<td>
<p>a numeric matrix or data frame.</p>
</td></tr>
<tr><td><code id="cov_ML_+3A_...">...</code></td>
<td>
<p>additional arguments are currently ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>"cov_ML"</code> with the following components:
</p>
<table>
<tr><td><code>center</code></td>
<td>
<p>a numeric vector containing the mean vector estimate.</p>
</td></tr>
<tr><td><code>cov</code></td>
<td>
<p>a numeric matrix containing the covariance matrix estimate.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>an integer giving the number of observations.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Zu, J. and Yuan, K.-H. (2010) Local Influence and Robust Procedures for
Mediation Analysis.  <em>Multivariate Behavioral Research</em>, <b>45</b>(1),
1&ndash;44.  doi:10.1080/00273170903504695.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+fit_mediation">fit_mediation</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# define variables
x &lt;- "ValueDiversity"
y &lt;- "TeamCommitment"
m &lt;- "TaskConflict"

# compute Huber M-estimator
cov_ML(BSG2014[, c(x, y, m)])

</code></pre>

<hr>
<h2 id='density_plot'>Density plot of the indirect effect(s)</h2><span id='topic+density_plot'></span><span id='topic+density_plot.default'></span><span id='topic+density_plot.sobel_test_mediation'></span><span id='topic+density_plot.list'></span><span id='topic+density_plot.setup_density_plot'></span>

<h3>Description</h3>

<p>Produce a density plot of the indirect effect(s) from (robust) mediation
analysis.  In addition to the density, a vertical line representing the
point estimate and a shaded area representing the confidence interval are
drawn.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>density_plot(object, ...)

## Default S3 method:
density_plot(object, ...)

## S3 method for class 'sobel_test_mediation'
density_plot(object, grid = NULL, level = 0.95, ...)

## S3 method for class 'list'
density_plot(object, grid = NULL, level = 0.95, ...)

## S3 method for class 'setup_density_plot'
density_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="density_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from
(robust) mediation analysis, or a list of such objects.</p>
</td></tr>
<tr><td><code id="density_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="density_plot_+3A_grid">grid</code></td>
<td>
<p>an optional numeric vector containing the values at which to
evaluate the assumed normal density from Sobel's test.  The default is to
take 512 equally spaced points between the estimated indirect effect
<code class="reqn">\pm</code> three times the standard error according to Sobel's formula.</p>
</td></tr>
<tr><td><code id="density_plot_+3A_level">level</code></td>
<td>
<p>numeric;  the confidence level of the confidence intervals
from Sobel's test.  The default is to include 95% confidence intervals.
Note that this is not used for bootstrap tests, as those require to specify
the confidence level already in <code><a href="#topic+test_mediation">test_mediation</a>()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Methods first call <code><a href="#topic+setup_density_plot">setup_density_plot</a>()</code> to extract all
necessary information to produce the plot, then the
<code>"setup_density_plot"</code> method is called to produce the plot.
</p>


<h3>Value</h3>

<p>An object of class <code>"<a href="ggplot2.html#topic+ggplot">ggplot</a>"</code>.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+setup_density_plot">setup_density_plot</a>()</code>
</p>
<p><code><a href="#topic+ci_plot">ci_plot</a>()</code>, <code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>,
<code><a href="#topic+weight_plot">weight_plot</a>()</code>, <code><a href="#topic+plot-methods">plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
robust_boot &lt;- test_mediation(BSG2014,
                              x = "ValueDiversity",
                              y = "TeamCommitment",
                              m = "TaskConflict",
                              robust = TRUE)

# create plot for robust bootstrap test
density_plot(robust_boot)
density_plot(robust_boot, color = "#00BFC4", fill = "#00BFC4")

# run OLS bootstrap test
ols_boot &lt;- test_mediation(BSG2014,
                           x = "ValueDiversity",
                           y = "TeamCommitment",
                           m = "TaskConflict",
                           robust = FALSE)

# compare robust and OLS bootstrap tests
boot_list &lt;- list("OLS bootstrap" = ols_boot,
                  "ROBMED" = robust_boot)
density_plot(boot_list)

# the plot can be customized in the usual way
density_plot(boot_list) + theme_bw() +
  labs(title = "OLS bootstrap vs ROBMED")

</code></pre>

<hr>
<h2 id='ellipse_plot'>Diagnostic plot with a tolerance ellipse</h2><span id='topic+ellipse_plot'></span><span id='topic+ellipse_plot.default'></span><span id='topic+ellipse_plot.setup_ellipse_plot'></span>

<h3>Description</h3>

<p>Produce a scatter plot of two variables used in (robust) mediation analysis
together with a tolerance ellipse.  Exploiting the relationship between the
regression coefficients and the covariance matrix, that tolerance ellipse
illustrates how well the regression results represent the data. In addition,
a line that visualizes the estimated regression coefficient is added when
relevant.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ellipse_plot(object, ...)

## Default S3 method:
ellipse_plot(
  object,
  horizontal = NULL,
  vertical = NULL,
  partial = FALSE,
  level = 0.975,
  npoints = 100,
  ...
)

## S3 method for class 'setup_ellipse_plot'
ellipse_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ellipse_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code>
or <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from (robust) mediation
analysis, or a list of such objects.</p>
</td></tr>
<tr><td><code id="ellipse_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="ellipse_plot_+3A_horizontal">horizontal</code></td>
<td>
<p>a character string specifying the variable to be
plotted on the horizontal axis.  If the dependent variable is chosen for
the vertical axis, a hypothsized mediator or an independent variable must
be selected for the horizontal axis.  If a hypothesized mediator is chosen
for the vertical axis, an independent variable must be selected for the
horizontal axis (in case of a serial multiple mediator model, a hypothesized
mediator occurring earlier in the sequence is also allowed).  The default is
to plot the first independent variable on the horizontal axis.</p>
</td></tr>
<tr><td><code id="ellipse_plot_+3A_vertical">vertical</code></td>
<td>
<p>a character string specifying the variable to be
plotted on the vertical axis: the dependent variable or a hypothesized
mediator.  The default is to plot the first hypothesized mediator on the
vertical axis.</p>
</td></tr>
<tr><td><code id="ellipse_plot_+3A_partial">partial</code></td>
<td>
<p>a logical indicating whether the vertical axis should
display the observed values of the selected variable (<code>FALSE</code>), or
the partial residuals with respect to the variable on the horizontal axis
(<code>TRUE</code>).  The latter allows to display the corresponding regression
coefficient by a line.</p>
</td></tr>
<tr><td><code id="ellipse_plot_+3A_level">level</code></td>
<td>
<p>numeric; the confidence level of the tolerance ellipse.  It
gives the percentage of observations that are expected to lie within the
ellipse under the assumption of a normal distribution, and therefore it
controls the size of the ellipse.  The default is such that the ellipse is
expected to contain 97.5% of the observations.</p>
</td></tr>
<tr><td><code id="ellipse_plot_+3A_npoints">npoints</code></td>
<td>
<p>the number of grid points used to evaluate and draw the
ellipse.  The default is to use 100 grid points.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A line to visualize the corresponding regression coefficient is added if
<code>partial = TRUE</code>, or in case of a simple mediation model
(without control variables) when the hypothesized mediator is plotted on
the vertical axis and the independent variable is plotted on the horizontal
axis.
</p>
<p>For robust estimation methods that return outlyingness weights for each
data point, those weights are visualized by coloring the points on a grey
scale.  If a list of objects has been supplied and there are multiple
objects from such robust methods, each method is placed in a separate panel.
</p>
<p>Methods first call <code><a href="#topic+setup_ellipse_plot">setup_ellipse_plot</a>()</code> to extract all
necessary information to produce the plot, then the
<code>"setup_ellipse_plot"</code> method is called to produce the plot.
</p>


<h3>Value</h3>

<p>An object of class <code>"<a href="ggplot2.html#topic+ggplot">ggplot</a>"</code>.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>,
<code><a href="#topic+setup_ellipse_plot">setup_ellipse_plot</a>()</code>
</p>
<p><code><a href="#topic+ci_plot">ci_plot</a>()</code>, <code><a href="#topic+density_plot">density_plot</a>()</code>,
<code><a href="#topic+weight_plot">weight_plot</a>()</code>, <code><a href="#topic+plot-methods">plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
robust_boot &lt;- test_mediation(BSG2014,
                              x = "ValueDiversity",
                              y = "TeamCommitment",
                              m = "TaskConflict",
                              robust = TRUE)

# create plot for robust bootstrap test
ellipse_plot(robust_boot)

# original data and partial residuals
ellipse_plot(robust_boot, horizontal = "TaskConflict",
             vertical = "TeamCommitment")
ellipse_plot(robust_boot, horizontal = "TaskConflict",
             vertical = "TeamCommitment", partial = TRUE)

# run OLS bootstrap test
ols_boot &lt;- test_mediation(BSG2014,
                           x = "ValueDiversity",
                           y = "TeamCommitment",
                           m = "TaskConflict",
                           robust = FALSE)

# compare robust and OLS bootstrap tests
boot_list &lt;- list("OLS bootstrap" = ols_boot,
                  "ROBMED" = robust_boot)
ellipse_plot(boot_list)

# the plot can be customized in the usual way
ellipse_plot(boot_list) + theme_bw() +
  labs(title = "OLS vs robust estimation")

</code></pre>

<hr>
<h2 id='fit_mediation'>(Robustly) fit a mediation model</h2><span id='topic+fit_mediation'></span><span id='topic+print.fit_mediation'></span><span id='topic+summary.reg_fit_mediation'></span><span id='topic+summary.cov_fit_mediation'></span><span id='topic+fit_mediation.formula'></span><span id='topic+fit_mediation.default'></span>

<h3>Description</h3>

<p>(Robustly) estimate the effects in a mediation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit_mediation(object, ...)

## S3 method for class 'formula'
fit_mediation(formula, data, ...)

## Default S3 method:
fit_mediation(
  object,
  x,
  y,
  m,
  covariates = NULL,
  method = c("regression", "covariance"),
  robust = TRUE,
  family = "gaussian",
  model = c("parallel", "serial"),
  contrast = FALSE,
  fit_yx = TRUE,
  control = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fit_mediation_+3A_object">object</code></td>
<td>
<p>the first argument will determine the method of the generic
function to be dispatched.  For the default method, this should be a data
frame containing the variables.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.  For the default
method, this can be used to specify tuning parameters directly instead
of via <code>control</code>.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot; (or one that can be coerced to
that class): a symbolic description of the model to be fitted.  Hypothesized
mediator variables should be wrapped in a call to <code><a href="#topic+m">m</a>()</code> (see
examples), and any optional control variables should be wrapped in a call to
<code><a href="#topic+covariates">covariates</a>()</code>.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_data">data</code></td>
<td>
<p>for the <code>formula</code> method, a data frame containing the
variables.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_x">x</code></td>
<td>
<p>a character, integer or logical vector specifying the columns of
<code>object</code> containing the independent variables of interest.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_y">y</code></td>
<td>
<p>a character string, an integer or a logical vector specifying the
column of <code>object</code> containing the dependent variable.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_m">m</code></td>
<td>
<p>a character, integer or logical vector specifying the columns of
<code>object</code> containing the hypothesized mediator variables.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_covariates">covariates</code></td>
<td>
<p>optional; a character, integer or logical vector
specifying the columns of <code>object</code> containing additional covariates to
be used as control variables.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_method">method</code></td>
<td>
<p>a character string specifying the method of
estimation.  Possible values are <code>"regression"</code> (the default)
to estimate the effects via regressions, or <code>"covariance"</code> to
estimate the effects via the covariance matrix.  Note that the effects are
always estimated via regressions if more than one independent variable or
hypothesized mediator is specified, or if control variables are supplied.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_robust">robust</code></td>
<td>
<p>a logical indicating whether to robustly estimate the effects
(defaults to <code>TRUE</code>).  For estimation via regressions
(<code>method = "regression"</code>), this can also be a character string, with
<code>"MM"</code> specifying the MM-estimator of regression, and <code>"median"</code>
specifying median regression.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_family">family</code></td>
<td>
<p>a character string specifying the error distribution to be
used in maximum likelihood estimation of regression models.  Possible values
are <code>"gaussian"</code> for a normal distribution (the default),
<code>skewnormal</code> for a skew-normal distribution, <code>"student"</code> for
Student's t distribution, <code>"skewt"</code> for a skew-t distribution, or
<code>"select"</code> to select among these four distributions via BIC (see
&lsquo;Details&rsquo;).  This is only relevant if <code>method = "regression"</code>
and <code>robust = FALSE</code>.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_model">model</code></td>
<td>
<p>a character string specifying the type of model in case of
multiple mediators.  Possible values are <code>"parallel"</code> (the default) for
the parallel multiple mediator model, or <code>"serial"</code> for the serial
multiple mediator model.  This is only relevant for models with multiple
hypothesized mediators, which are currently only implemented for estimation
via regressions (<code>method = "regression"</code>).</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_contrast">contrast</code></td>
<td>
<p>a logical indicating whether to compute pairwise contrasts
of the indirect effects (defaults to <code>FALSE</code>).  This can also be a
character string, with <code>"estimates"</code> for computing the pairwise
differences of the indirect effects, and <code>"absolute"</code> for computing the
pairwise differences of the absolute values of the indirect effects.  This
is only relevant for models with multiple indirect effects, which are
currently only implemented for estimation via regressions
(<code>method = "regression"</code>).  For models with multiple independent
variables of interest and multiple hypothesized mediators, contrasts are
only computed between indirect effects corresponding to the same independent
variable.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_fit_yx">fit_yx</code></td>
<td>
<p>a logical indicating whether to fit the regression model
<code>y ~ x + covariates</code> to estimate the total effect (the default is
<code>TRUE</code>).  This is only relevant if <code>method = "regression"</code> and
<code>robust = FALSE</code>.</p>
</td></tr>
<tr><td><code id="fit_mediation_+3A_control">control</code></td>
<td>
<p>a list of tuning parameters for the corresponding robust
method.  For robust regression (<code>method = "regression"</code>, and
<code>robust = TRUE</code> or <code>robust = "MM"</code>), a list of tuning
parameters for <code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code> as generated by
<code><a href="#topic+reg_control">reg_control</a>()</code>.  For winsorized covariance matrix estimation
(<code>method = "covariance"</code> and <code>robust = TRUE</code>), a list of tuning
parameters for <code><a href="#topic+cov_Huber">cov_Huber</a>()</code> as generated by
<code><a href="#topic+cov_control">cov_control</a>()</code>.  No tuning parameters are necessary for median
regression (<code>method = "regression"</code> and <code>robust = "median"</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With <code>method = "regression"</code>, and <code>robust = TRUE</code> or
<code>robust = "MM"</code>, the effects are computed via the robust MM-estimator
of regression from <code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code>.  This is the default
behavior.
</p>
<p>With <code>method = "regression"</code> and <code>robust = "median"</code>, the effects
are estimated via median regressions with <code><a href="quantreg.html#topic+rq">rq</a>()</code>.
Unlike the robust MM-regressions above, median regressions are not robust
against outliers in the explanatory variables.
</p>
<p>With <code>method = "regression"</code>, <code>robust = FALSE</code> and
<code>family = "select"</code>, the error distribution to be used in maximum
likelihood estimation of the regression models is selected via BIC.  The
following error distributions are included in the selection procedure: a
normal distribution, a skew-normal distribution, Student's t distribution,
and a skew-t distribution.  Note that the parameters of those distributions
are estimated as well.  The skew-normal and skew-t distributions thereby
use a centered parametrization such that the residuals are (approximately)
centered around 0.  Moreover, the skew-t distribution is only evaluated in
the selection procedure if both the skew-normal and Student's t distribution
yield an improvement in BIC over the normal distribution.  Otherwise the
estimation with a skew-t error distribution can be unstable.  Furthermore,
this saves a considerable amount of computation time in a bootstrap test,
as estimation with those error distributions is orders of magnitude slower
than any other implemented estimation procedure.
</p>
<p>With <code>method = "covariance"</code> and <code>robust = TRUE</code>, the effects are
estimated based on a Huber M-estimator of location and scatter.  Note that
this covariance-based approach is less robust than the approach based on
robust MM-regressions described above.
</p>


<h3>Value</h3>

<p>An object inheriting from class <code>"fit_mediation"</code> (class
<code>"reg_fit_mediation"</code> if <code>method = "regression"</code> or
<code>"cov_fit_mediation"</code> if <code>method = "covariance"</code>) with
the following components:
</p>
<table>
<tr><td><code>a</code></td>
<td>
<p>a numeric vector containing the point estimates of the effects of
the independent variables on the proposed mediator variables.</p>
</td></tr>
<tr><td><code>b</code></td>
<td>
<p>a numeric vector containing the point estimates of the direct
effects of the proposed mediator variables on the dependent variable.</p>
</td></tr>
<tr><td><code>d</code></td>
<td>
<p>in case of a serial multiple mediator model, a numeric vector
containing the point estimates of the effects of proposed mediator variables
on other mediator variables occurring later in the sequence (only
<code>"reg_fit_mediation"</code> if applicable).</p>
</td></tr>
<tr><td><code>total</code></td>
<td>
<p>a numeric vector containing the point estimates of the total
effects of the independent variables on the dependent variable.</p>
</td></tr>
<tr><td><code>direct</code></td>
<td>
<p>a numeric vector containing the point estimates of the direct
effects of the independent variables on the dependent variable.</p>
</td></tr>
<tr><td><code>indirect</code></td>
<td>
<p>a numeric vector containing the point estimates of the
indirect effects.</p>
</td></tr>
<tr><td><code>ab</code></td>
<td>
<p>for back-compatibility with versions &lt;0.10.0, the point estimates
of the indirect effects are also included here.  <b>This component is
deprecated and may be removed as soon as the next version.</b></p>
</td></tr>
<tr><td><code>fit_mx</code></td>
<td>
<p>an object of class <code>"<a href="robustbase.html#topic+lmrob">lmrob</a>"</code>,
<code>"<a href="quantreg.html#topic+rq">rq</a>"</code>, <code>"<a href="stats.html#topic+lm">lm</a>"</code> or <code>"lmse"</code>
containing the estimation results from the regression of the proposed
mediator variable on the independent variables, or a list of such objects
in case of more than one hypothesized mediator (only
<code>"reg_fit_mediation"</code>).</p>
</td></tr>
<tr><td><code>fit_ymx</code></td>
<td>
<p>an object of class <code>"<a href="robustbase.html#topic+lmrob">lmrob</a>"</code>,
<code>"<a href="quantreg.html#topic+rq">rq</a>"</code>, <code>"<a href="stats.html#topic+lm">lm</a>"</code> or <code>"lmse"</code>
containing the estimation results from the regression of the dependent
variable on the proposed mediator and independent variables (only
<code>"reg_fit_mediation"</code>).</p>
</td></tr>
<tr><td><code>fit_yx</code></td>
<td>
<p>an object of class <code>"<a href="stats.html#topic+lm">lm</a>"</code> or <code>"lmse"</code>
containing the estimation results from the regression of the dependent
variable on the independent variables (only <code>"reg_fit_mediation"</code>
if arguments <code>robust = FALSE</code> and <code>fit_yx = TRUE</code> were used).</p>
</td></tr>
<tr><td><code>cov</code></td>
<td>
<p>an object of class <code>"<a href="#topic+cov_Huber">cov_Huber</a>"</code> or
<code>"<a href="#topic+cov_ML">cov_ML</a>"</code> containing the covariance matrix estimates
(only <code>"cov_fit_mediation"</code>).</p>
</td></tr>
<tr><td><code>x</code>, <code>y</code>, <code>m</code>, <code>covariates</code></td>
<td>
<p>character vectors specifying the respective
variables used.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>a data frame containing the independent, dependent and
proposed mediator variables, as well as covariates.</p>
</td></tr>
<tr><td><code>robust</code></td>
<td>
<p>either a logical indicating whether the effects were estimated
robustly, or one of the character strings <code>"MM"</code> and <code>"median"</code>
specifying the type of robust regressions.</p>
</td></tr>
<tr><td><code>model</code></td>
<td>
<p>a character string specifying the type of mediation model
fitted: <code>"simple"</code> in case of one independent variable and one
hypothesized mediator, <code>"multiple"</code> in case of multiple independent
variables and one hypothesized mediator, <code>"parallel"</code> in case of
parallel multiple mediators, or <code>"serial"</code> in case of serial multiple
mediators (only <code>"reg_fit_mediation"</code>).</p>
</td></tr>
<tr><td><code>contrast</code></td>
<td>
<p>either a logical indicating whether contrasts of the
indirect effects were computed, or one of the character strings
<code>"estimates"</code> and <code>"absolute"</code> specifying the type of contrasts
of the indirect effects (only <code>"reg_fit_mediation"</code>).</p>
</td></tr>
<tr><td><code>control</code></td>
<td>
<p>a list of tuning parameters used (if applicable).</p>
</td></tr>
</table>


<h3>Mediation models</h3>

<p>The following mediation models are implemented.  In the regression equations
below, the <code class="reqn">i_j</code> are intercepts and the <code class="reqn">e_j</code> are random error terms.
</p>

<ul>
<li><p><em>Simple mediation model</em>: The mediation model in its simplest
form is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + aX + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + bM + cX + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c'X + e_3,</code>
</p>

<p>where <code class="reqn">Y</code> denotes the dependent variable, <code class="reqn">X</code> the independent
variable, and <code class="reqn">M</code> the hypothesized mediator.  The main parameter of
interest is the product of coefficients <code class="reqn">ab</code>, called the indirect
effect.  The coefficients <code class="reqn">c</code> and <code class="reqn">c'</code> are called the direct and
total effect, respectively.
</p>
</li>
<li><p><em>Parallel multiple mediator model</em>: The simple mediation model
can be extended with multiple mediators <code class="reqn">M_1, \dots, M_k</code> in the
following way:
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The main parameters of interest are the individual indirect effects
<code class="reqn">a_1 b_1, \dots, a_k b_k</code>.
</p>
</li>
<li><p><em>Serial multiple mediator model</em>: It differs from the parallel
multiple mediator model in that it allows the hypothesized mediators
<code class="reqn">M_1, \dots, M_k</code> to influence each other in a sequential manner.
It is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">M_2 = i_1 + d_{21} M_1 + a_2 X + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + d_{k1} M_1 + \dots +  d_{k,k-1} M_{k-1} + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The serial multiple mediator model quickly grows in complexity with
increasing number of mediators due to the combinatorial increase in
indirect paths through the mediators.  It is therefore only implemented
for two and three mediators to maintain a focus on easily interpretable
models.  For two serial mediators, the three indirect effects
<code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, and <code class="reqn">a_1 d_{21} b_2</code> are the main
parameters of interest.  For three serial mediators, there are already
seven indirect effects: <code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, <code class="reqn">a_3 b_3</code>,
<code class="reqn">a_1 d_{21} b_2</code>, <code class="reqn">a_1 d_{31} b_3</code>, <code class="reqn">a_2 d_{32} b_3</code>, and
<code class="reqn">a_1 d_{21} d_{32} b_3</code>.
</p>
</li>
<li><p><em>Multiple independent variables to be mediated</em>: The simple
mediation model can also be extended by allowing multiple independent
variables <code class="reqn">X_1, \dots, X_l</code> instead of multiple mediators.  It is
defined by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + a_1 X_1 + \dots + a_l X_l + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + b M + c_1 X_1 + \dots + c_l X_l + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c_1' X_1 + \dots + c_l' X_l + e_3.</code>
</p>

<p>The indirect effects <code class="reqn">a_1 b, \dots, a_l b</code> are the main parameters of
interest.  Note that an important special case of this model occurs when a
categorical independent variable is represented by a group of dummy
variables.
</p>
</li>
<li><p><em>Control variables</em>: To isolate the effects of the independent
variables of interest from other factors, control variables can be added
to all regression equations of a mediation model.  Note that that there is
no intrinsic difference between independent variables of interest and
control variables in terms of the model or its estimation.  The difference
is purely conceptual in nature: for the control variables, the estimates
of the direct and indirect paths are not of particular interest to the
researcher.  Control variables can therefore be specified separately from
the independent variables of interest.  Only for the latter, results for
the indirect effects are included in the output.
</p>
</li>
<li><p><em>More complex models</em>: Some of the models described above can
be combined, for instance parallel and serial multiple mediator models
support multiple independent variables of interest and control variables.
</p>
</li></ul>



<h3>Note</h3>

<p>The default method takes a data frame its first argument so that it can
easily be used with the pipe operator (<span class="rlang"><b>R</b></span>'s built-in <code>|&gt;</code> or
<span class="pkg">magrittr</span>'s <code>%&gt;%</code>).
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022a) A Robust Bootstrap Test
for Mediation Analysis.  <em>Organizational Research Methods</em>,
<b>25</b>(3), 591&ndash;617.  doi:10.1177/1094428121999096.
</p>
<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022b) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>
<p>Azzalini, A. and Arellano-Valle, R. B. (2013) Maximum Penalized Likelihood
Estimation for Skew-Normal and Skew-t Distributions.  <em>Journal of
Statistical Planning and Inference</em>, <b>143</b>(2), 419&ndash;433.
doi:10.1016/j.jspi.2012.06.022.
</p>
<p>Yuan, Y. and MacKinnon, D.P. (2014) Robust Mediation Analysis Based on
Median Regression.  <em>Psychological Methods</em>, <b>19</b>(1), 1&ndash;20.
doi:10.1037/a0033820.
</p>
<p>Zu, J. and Yuan, K.-H. (2010) Local Influence and Robust Procedures for
Mediation Analysis.  <em>Multivariate Behavioral Research</em>, <b>45</b>(1),
1&ndash;44.  doi:10.1080/00273170903504695.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>
</p>
<p><code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code>, <code><a href="stats.html#topic+lm">lm</a>()</code>,
<code><a href="#topic+cov_Huber">cov_Huber</a>()</code>, <code><a href="#topic+cov_ML">cov_ML</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

## seed to be used for the random number generator
seed &lt;- 20211117

## simple mediation
# set seed of the random number generator
set.seed(seed)
# The results in Alfons et al. (2022a) were obtained with an
# older version of the random number generator.  To reproduce
# those results, uncomment the two lines below.
# RNGversion("3.5.3")
# set.seed(20150601)
# perform mediation analysis
fit_simple &lt;- fit_mediation(TeamCommitment ~
                              m(TaskConflict) +
                              ValueDiversity,
                            data = BSG2014)
boot_simple &lt;- test_mediation(fit_simple)
summary(boot_simple)


## serial multiple mediators
# set seed of the random number generator
set.seed(seed)
# perform mediation analysis
fit_serial &lt;- fit_mediation(TeamScore ~
                              serial_m(TaskConflict,
                                       TeamCommitment) +
                              ValueDiversity,
                            data = BSG2014)
boot_serial &lt;- test_mediation(fit_serial)
summary(boot_serial)

## parallel multiple mediators and control variables
# set seed of the random number generator
set.seed(seed)
# perform mediation analysis
fit_parallel &lt;- fit_mediation(TeamPerformance ~
                                parallel_m(ProceduralJustice,
                                           InteractionalJustice) +
                                SharedLeadership +
                                covariates(AgeDiversity,
                                           GenderDiversity),
                              data = BSG2014)
boot_parallel &lt;- test_mediation(fit_parallel)
summary(boot_parallel)


</code></pre>

<hr>
<h2 id='m'>Create an object of hypothesized mediators or control variables</h2><span id='topic+m'></span><span id='topic+parallel_m'></span><span id='topic+serial_m'></span><span id='topic+covariates'></span>

<h3>Description</h3>

<p><code>m()</code> and its wrappers <code>parallel_m()</code> and <code>serial_m()</code>
create an object of hypothesized mediators, while <code>covariates()</code>
creates an object of control variables.  Usually, these are used in a
formula specifying a mediation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m(..., .model = c("parallel", "serial"))

parallel_m(...)

serial_m(...)

covariates(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="m_+3A_...">...</code></td>
<td>
<p>variables are supplied as arguments, as usual separated by a
comma.</p>
</td></tr>
<tr><td><code id="m_+3A_.model">.model</code></td>
<td>
<p>a character string specifying the type of model in case of
multiple mediators.  Possible values are <code>"parallel"</code> (the default) for
the parallel multiple mediator model, or <code>"serial"</code> for the serial
multiple mediator model.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>m()</code> and <code>covariates()</code> are essentially wrappers for
<code><a href="base.html#topic+cbind">cbind</a>()</code> with a specific class prepended to the
class(es) of the resulting object.
</p>
<p><code>parallel_m()</code> and <code>serial_m()</code> are wrappers for <code>m()</code> with
the respective value for argument <code>.model</code>.
</p>


<h3>Value</h3>

<p><code>m()</code> returns an object inheriting from class
<code>"mediators"</code> (with subclass <code>"parallel_mediators"</code> or
<code>"serial_mediators"</code> as specified by argument <code>.model</code>),
and <code>covariates()</code> returns an object of class <code>"covariates"</code>.
Typically, these inherit from class <code>"matrix"</code>.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# inside formula
fit_mediation(TeamCommitment ~ m(TaskConflict) + ValueDiversity,
              data = BSG2014)

# outside formula
mediator &lt;- with(BSG2014, m(TaskConflict))
fit_mediation(TeamCommitment ~ mediator + ValueDiversity,
              data = BSG2014)

</code></pre>

<hr>
<h2 id='p_value'>p-Values from (robust) mediation analysis</h2><span id='topic+p_value'></span><span id='topic+p_value.boot_test_mediation'></span><span id='topic+p_value.sobel_test_mediation'></span>

<h3>Description</h3>

<p>Compute or extract the p-values for effects in (robust) mediation
analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>p_value(object, ...)

## S3 method for class 'boot_test_mediation'
p_value(object, parm = NULL, type = c("boot", "data"), digits = 4L, ...)

## S3 method for class 'sobel_test_mediation'
p_value(object, parm = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="p_value_+3A_object">object</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results
from (robust) mediation analysis.</p>
</td></tr>
<tr><td><code id="p_value_+3A_...">...</code></td>
<td>
<p>for the generic function, additional arguments to be passed
down to methods.  For the methods, additional arguments are currently
ignored.</p>
</td></tr>
<tr><td><code id="p_value_+3A_parm">parm</code></td>
<td>
<p>an integer, character or logical vector specifying the paths
for which to extract or compute p-values, or <code>NULL</code> to extract or
compute p-values for all coefficients.  In case of a character vector,
possible values are <code>"a"</code>, <code>"b"</code>, <code>"d"</code> (only serial
multiple mediator models), <code>"total"</code>, <code>"direct"</code>, and
<code>"indirect"</code>.</p>
</td></tr>
<tr><td><code id="p_value_+3A_type">type</code></td>
<td>
<p>a character string specifying how to compute the p-values of
the effects other than the indirect effect(s).  Possible values are
<code>"boot"</code> (the default) to compute bootstrap p-values using the normal
approximation (i.e., to assume a normal distribution of the corresponding
effect with the standard deviation computed from the bootstrap replicates),
or <code>"data"</code> to compute p-values via statistical theory based on the
original data (e.g., based on a t-distribution if the coefficients are
estimated via regression).  Note that this is only relevant for mediation
analysis via a bootstrap test, where the p-value of the indirect effect is
always computed as described in &lsquo;Details&rsquo;.</p>
</td></tr>
<tr><td><code id="p_value_+3A_digits">digits</code></td>
<td>
<p>an integer determining how many digits to compute for the
p-values of the indirect effects (see &lsquo;Details&rsquo;).  The default is to
compute 4 digits after the comma.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For bootstrap tests, the p-value of the indirect effect is computed as the
smallest significance level <code class="reqn">\alpha</code> for which the
<code class="reqn">(1 - \alpha) * 100\%</code> confidence interval obtained
from the bootstrapped distribution does not contain 0.
</p>
<p>This is a simple implementation, where each digit after the comma is
determined via a grid search.  Hence computation time can be long if
confidence intervals are computed via the bias-corrected and accelerated
method (<code>"bca"</code>).
</p>
<p>For Sobel tests, the p-value of the indirect effect is already stored in the
object returned by <code><a href="#topic+test_mediation">test_mediation</a>()</code> and is simply extracted.
</p>


<h3>Value</h3>

<p>A numeric vector containing the requested p-values.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+coef.test_mediation">coef</a>()</code>,
<code><a href="#topic+confint.test_mediation">confint</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")


# BCa intervals are recommended, but take a while to run
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict",
                       type = "bca")
p_value(boot)


</code></pre>

<hr>
<h2 id='plot-methods'>Plot (robust) mediation analysis results</h2><span id='topic+plot-methods'></span><span id='topic+autoplot.fit_mediation'></span><span id='topic+autoplot.test_mediation'></span><span id='topic+plot.fit_mediation'></span><span id='topic+plot.test_mediation'></span>

<h3>Description</h3>

<p>Visualize results from (robust) mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fit_mediation'
autoplot(object, which = c("ellipse", "weight"), ...)

## S3 method for class 'test_mediation'
autoplot(object, which = c("ci", "density", "ellipse", "weight"), ...)

## S3 method for class 'fit_mediation'
plot(x, which = c("ellipse", "weight"), ...)

## S3 method for class 'test_mediation'
plot(x, which = c("ci", "density", "ellipse", "weight"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot-methods_+3A_object">object</code>, <code id="plot-methods_+3A_x">x</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code> or <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing
results from (robust) mediation analysis.</p>
</td></tr>
<tr><td><code id="plot-methods_+3A_which">which</code></td>
<td>
<p>a character string specifying which plot to produce.
Possible values are <code>"ci"</code> for a dot plot of selected effects
together with confidence intervals (see <code><a href="#topic+ci_plot">ci_plot</a>()</code>),
<code>"density"</code> for a density plot of the indirect effect(s) (see
<code><a href="#topic+density_plot">density_plot</a>()</code>), <code>"ellipse"</code> for a diagnostic plot
of the data together with a tolerance ellipse (see
<code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>), and <code>"weight"</code> for a diagnostic plot
of robust regression weights (see <code><a href="#topic+weight_plot">weight_plot</a>()</code>).</p>
</td></tr>
<tr><td><code id="plot-methods_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code> method calls <code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>
or <code><a href="#topic+weight_plot">weight_plot</a>()</code>, depending on the argument <code>which</code>.
</p>
<p>The <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> method calls <code><a href="#topic+ci_plot">ci_plot</a>()</code>,
<code><a href="#topic+density_plot">density_plot</a>()</code>, <code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>, or
<code><a href="#topic+weight_plot">weight_plot</a>()</code>, depending on the argument <code>which</code>.
</p>


<h3>Value</h3>

<p>An object of class <code>"<a href="ggplot2.html#topic+ggplot">ggplot</a>"</code>.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>
</p>
<p><code><a href="#topic+ci_plot">ci_plot</a>()</code>, <code><a href="#topic+density_plot">density_plot</a>()</code>,
<code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>, <code><a href="#topic+weight_plot">weight_plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# create plots for robust bootstrap test
plot(boot, which = "ci")
plot(boot, which = "density")
plot(boot, which = "ellipse")
plot(boot, which = "weight")

</code></pre>

<hr>
<h2 id='reg_control'>Tuning parameters for MM-regression</h2><span id='topic+reg_control'></span>

<h3>Description</h3>

<p>Obtain a list with tuning paramters for <code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reg_control(efficiency = 0.85, max_iterations = 200, tol = 1e-07, seed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reg_control_+3A_efficiency">efficiency</code></td>
<td>
<p>a numeric value giving the desired efficiency (defaults
to 0.85 for 85% efficiency).</p>
</td></tr>
<tr><td><code id="reg_control_+3A_max_iterations">max_iterations</code></td>
<td>
<p>an integer giving the maximum number of iterations in
various parts of the algorithm.</p>
</td></tr>
<tr><td><code id="reg_control_+3A_tol">tol</code></td>
<td>
<p>a small positive numeric value to be used to determine
convergence in various parts of the algorithm.</p>
</td></tr>
<tr><td><code id="reg_control_+3A_seed">seed</code></td>
<td>
<p>optional initial seed for the random number generator (see
<code><a href="base.html#topic+.Random.seed">.Random.seed</a></code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of tuning parameters as returned by
<code><a href="robustbase.html#topic+lmrob.control">lmrob.control</a>()</code>.
</p>


<h3>Note</h3>

<p>This is a simplified wrapper function for
<code><a href="robustbase.html#topic+lmrob.control">lmrob.control</a>()</code>, as the latter requires detailed
knowledge of the MM-type regression algorithm.  Currently only 95%, 90%,
85% (the default) and 80% efficiency are supported.  For other values,
please specify the corresponding tuning parameters in
<code><a href="robustbase.html#topic+lmrob.control">lmrob.control</a>()</code> directly.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Salibian-Barrera, M. and Yohai, V.J. (2006) A Fast Algorithm for
S-regression Estimates. <em>Journal of Computational and Graphical
Statistics</em>, <b>15</b>(2), 414&ndash;427.  doi:10.1198/106186006x113629.
</p>
<p>Yohai, V.J. (1987) High Breakdown-Point and High Efficiency Estimates for
Regression. <em>The Annals of Statistics</em>, <b>15</b>(20), 642&ndash;656.
doi:10.1214/aos/1176350366.
</p>


<h3>See Also</h3>

<p><code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code>,
<code><a href="robustbase.html#topic+lmrob.control">lmrob.control</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
ctrl &lt;- reg_control(efficiency = 0.95)
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict",
                       control = ctrl)
summary(boot)

</code></pre>

<hr>
<h2 id='retest'>Retest for mediation</h2><span id='topic+retest'></span><span id='topic+retest.boot_test_mediation'></span><span id='topic+retest.sobel_test_mediation'></span>

<h3>Description</h3>

<p>Re-perform a test for the indirect effect(s) based on results from (robust)
mediation analysis.  This function is purely available for computational
convenience if the analysis was accidentally run with the wrong parameter
settings, as it avoids having to re-run the bootstrap procedure.  It must
not be abused for <code class="reqn">p</code>-hacking.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retest(object, ...)

## S3 method for class 'boot_test_mediation'
retest(object, alternative, level, type, contrast, ...)

## S3 method for class 'sobel_test_mediation'
retest(object, alternative, order, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="retest_+3A_object">object</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from (robust) mediation
analysis.</p>
</td></tr>
<tr><td><code id="retest_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down to methods.</p>
</td></tr>
<tr><td><code id="retest_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis
in the test for the indirect effect.  Possible values are <code>"twosided"</code>,
<code>"less"</code> or <code>"greater"</code>.</p>
</td></tr>
<tr><td><code id="retest_+3A_level">level</code></td>
<td>
<p>numeric; the confidence level of the confidence interval in
the bootstrap test.</p>
</td></tr>
<tr><td><code id="retest_+3A_type">type</code></td>
<td>
<p>a character string specifying the type of confidence interval
to be computed in the bootstrap test.  Possible values are <code>"bca"</code> for
the bias-corrected and accelerated (BCa) bootstrap, or <code>"perc"</code> for the
percentile bootstrap.</p>
</td></tr>
<tr><td><code id="retest_+3A_contrast">contrast</code></td>
<td>
<p>a logical indicating whether to compute pairwise contrasts
of the indirect effects.  This can also be a character string, with
<code>"estimates"</code> for computing the pairwise differences of the indirect
effects (such that it is tested whether two indirect effects are equal),
and <code>"absolute"</code> for computing the pairwise differences of the absolute
values of the indirect effects (such that it is tested whether two indirect
effects are equal in magnitude).  This is only relevant for models with
multiple indirect effects, which are currently only implemented for
bootstrap tests and estimation via regressions.</p>
</td></tr>
<tr><td><code id="retest_+3A_order">order</code></td>
<td>
<p>a character string specifying the order of approximation of
the standard error in Sobel's test.  Possible values are <code>"first"</code>
for a first-order approximation, and <code>"second"</code> for a second-order
approximation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of the same class as <code>object</code> with updated test
results (see <code><a href="#topic+test_mediation">test_mediation</a>()</code>).
</p>


<h3>Note</h3>

<p>From version 0.9.0 onwards, the behavior of this function changed.
For arguments that are not supplied, the corresponding values of
<code>object</code> are now used as defaults.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")
summary(boot)

# now compute 97.5% confidence interval
retest(boot, level = 0.975)

</code></pre>

<hr>
<h2 id='robmed-package'>(Robust) Mediation Analysis</h2><span id='topic+robmed-package'></span>

<h3>Description</h3>

<p>Perform mediation analysis via the fast-and-robust bootstrap test ROBMED (Alfons, Ates &amp; Groenen, 2022a; &lt;doi:10.1177/1094428121999096&gt;), as well as various other methods. Details on the implementation and code examples can be found in Alfons, Ates, and Groenen (2022b) &lt;doi:10.18637/jss.v103.i13&gt;.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> robmed</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> (Robust) Mediation Analysis</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0.2</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-06-16</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> R (&gt;= 3.5.0),
ggplot2 (&gt;= 3.3.0),
robustbase (&gt;= 0.92-7)</td>
</tr>
<tr>
 <td style="text-align: left;">
Imports: </td><td style="text-align: left;"> boot (&gt;= 1.3-20),
grid,
methods,
quantreg (&gt;= 5.36),
sn (&gt;= 1.5-4),
utils</td>
</tr>
<tr>
 <td style="text-align: left;">
Suggests: </td><td style="text-align: left;"> knitr,
testthat</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> Perform mediation analysis via the fast-and-robust bootstrap test ROBMED (Alfons, Ates &amp; Groenen, 2022a; &lt;doi:10.1177/1094428121999096&gt;), as well as various other methods. Details on the implementation and code examples can be found in Alfons, Ates, and Groenen (2022b) &lt;doi:10.18637/jss.v103.i13&gt;.</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
URL: </td><td style="text-align: left;"> https://github.com/aalfons/robmed</td>
</tr>
<tr>
 <td style="text-align: left;">
BugReports: </td><td style="text-align: left;"> https://github.com/aalfons/robmed/issues</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyData: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
VignetteBuilder: </td><td style="text-align: left;"> knitr</td>
</tr>
<tr>
 <td style="text-align: left;">
Authors@R: </td><td style="text-align: left;"> 
    c(person("Andreas", "Alfons", 
             email = "alfons@ese.eur.nl", 
             role = c("aut", "cre"),
             comment = c(ORCID = "0000-0002-2513-3788")), 
      person("Nufer Y.", "Ates", role = "ctb", 
             comment = c(ORCID = "0000-0003-4572-4101", 
                         "provided the BSG2014 data")))</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Andreas Alfons [aut, cre] (&lt;https://orcid.org/0000-0002-2513-3788&gt;), Nufer Y. Ates [ctb] (&lt;https://orcid.org/0000-0003-4572-4101&gt;, provided the BSG2014 data)</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Andreas Alfons &lt;alfons@ese.eur.nl&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Encoding: </td><td style="text-align: left;"> UTF-8</td>
</tr>
<tr>
 <td style="text-align: left;">
RoxygenNote: </td><td style="text-align: left;"> 7.2.3</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
BSG2014                 Business simulation game data
boot_samples            Draw bootstrap samples
ci_plot                 Dot plot with confidence intervals
coef.test_mediation     Coefficients in (robust) mediation analysis
confint.test_mediation
                        Confidence intervals from (robust) mediation
                        analysis
cov_Huber               Huber M-estimator of location and scatter
cov_ML                  Maximum likelihood estimator of mean vector and
                        covariance matrix
cov_control             Tuning parameters for Huber M-estimation of
                        location and scatter
density_plot            Density plot of the indirect effect(s)
ellipse_plot            Diagnostic plot with a tolerance ellipse
fit_mediation           (Robustly) fit a mediation model
m                       Create an object of hypothesized mediators or
                        control variables
p_value                 p-Values from (robust) mediation analysis
plot-methods            Plot (robust) mediation analysis results
reg_control             Tuning parameters for MM-regression
retest                  Retest for mediation
robmed-package          (Robust) Mediation Analysis
setup_ci_plot           Set up information for a dot plot with
                        confidence intervals
setup_density_plot      Set up information for a density plot of the
                        indirect effect(s)
setup_ellipse_plot      Set up a diagnostic plot with a tolerance
                        ellipse
setup_weight_plot       Set up a diagnostic plot of robust regression
                        weights
sim_mediation           Generate data from a fitted mediation model
summary.test_mediation
                        Summary of results from (robust) mediation
                        analysis
test_mediation          (Robust) mediation analysis
weight_plot             Diagnostic plot of robust regression weights
weights.cov_Huber       Robustness weights of Huber M-estimation of
                        location and scatter
</pre>


<h3>Author(s)</h3>

<p>Andreas Alfons [aut, cre] (&lt;https://orcid.org/0000-0002-2513-3788&gt;), Nufer Y. Ates [ctb] (&lt;https://orcid.org/0000-0003-4572-4101&gt;, provided the BSG2014 data)
</p>
<p>Maintainer: Andreas Alfons &lt;alfons@ese.eur.nl&gt;
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022a) A Robust Bootstrap Test
for Mediation Analysis.  <em>Organizational Research Methods</em>,
<b>25</b>(3), 591&ndash;617.  doi:10.1177/1094428121999096.
</p>
<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022b) Robust mediation analysis:
The <span class="rlang"><b>R</b></span> package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>

<hr>
<h2 id='setup_ci_plot'>Set up information for a dot plot with confidence intervals</h2><span id='topic+setup_ci_plot'></span><span id='topic+setup_ci_plot.boot_test_mediation'></span><span id='topic+setup_ci_plot.sobel_test_mediation'></span><span id='topic+setup_ci_plot.list'></span>

<h3>Description</h3>

<p>Extract the relevant information for a dot plot with confidence intervals of
selected effects from (robust) mediation analysis.  Information on p-values
of the selected effects can be included in addition to confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_ci_plot(object, ...)

## S3 method for class 'boot_test_mediation'
setup_ci_plot(
  object,
  parm = c("direct", "indirect"),
  type = c("boot", "data"),
  p_value = FALSE,
  digits = 4L,
  ...
)

## S3 method for class 'sobel_test_mediation'
setup_ci_plot(
  object,
  parm = c("direct", "indirect"),
  level = 0.95,
  p_value = FALSE,
  ...
)

## S3 method for class 'list'
setup_ci_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setup_ci_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from
(robust) mediation analysis, or a list of such objects.</p>
</td></tr>
<tr><td><code id="setup_ci_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="setup_ci_plot_+3A_parm">parm</code></td>
<td>
<p>an integer, character or logical vector specifying which
effects to include in the plot.  In case of a character vector, possible
values are <code>"a"</code>, <code>"b"</code>, <code>"d"</code> (only serial multiple mediator
models), <code>"total"</code>, <code>"direct"</code>, and <code>"indirect"</code>.  The
default is to include the direct and the indirect effect(s).</p>
</td></tr>
<tr><td><code id="setup_ci_plot_+3A_type">type</code></td>
<td>
<p>a character string specifying which point estiamates and
confidence intervals to plot: those based on the bootstrap distribution
(<code>"boot"</code>; the default), or those based on the original data
(<code>"data"</code>).  If <code>"boot"</code>, the confidence intervals of effects
other than the indirect effect(s) are computed using a normal approximation
(i.e., assuming a normal distribution of the corresponding effect with the
standard deviation computed from the bootstrap replicates).  If
<code>"data"</code>, the confidence intervals of effects other than the indirect
effect(s) are computed via statistical theory based on the original data
(e.g., based on a t-distribution if the coefficients are estimated via
regression).  Note that this is only relevant for mediation analysis via a
bootstrap test, where the confidence interval of the indirect effect is
always computed via a percentile-based method due to the asymmetry of its
distribution.</p>
</td></tr>
<tr><td><code id="setup_ci_plot_+3A_p_value">p_value</code></td>
<td>
<p>a logical indicating whether to include information on the
p-values in addition to the confidence intervals.  The default is
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="setup_ci_plot_+3A_digits">digits</code></td>
<td>
<p>an integer determining how many digits to compute for
bootstrap p-values of the indirect effects (see <code><a href="#topic+p_value">p_value</a>()</code>).
The default is to compute 4 digits after the comma.  This is only relevant
if <code>p_value = TRUE</code>.</p>
</td></tr>
<tr><td><code id="setup_ci_plot_+3A_level">level</code></td>
<td>
<p>numeric;  the confidence level of the confidence intervals
from Sobel's test.  The default is to include 95% confidence intervals.
Note that this is not used for bootstrap tests, as those require to specify
the confidence level already in <code><a href="#topic+test_mediation">test_mediation</a>()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally by <code><a href="#topic+ci_plot">ci_plot</a>()</code>.  It may also
be useful for users who want to produce a similar plot, but who want more
control over what information to display or how to display that information.
</p>


<h3>Value</h3>

<p>An object of class <code>"setup_ci_plot"</code> with the following
components:
</p>
<table>
<tr><td><code>ci</code></td>
<td>
<p>a data frame consisting of column <code>Effect</code> indicating the
different effects, column <code>Estimate</code> containing the point estimates,
column <code>Lower</code> for the lower confidence limit, and column <code>Upper</code>
for the upper confidence limit.  If argument <code>p_value = TRUE</code>, there is
an additional column <code>Label</code> which gives the default facet label for
the confidence intervals. If a list of <code>"<a href="#topic+test_mediation">test_mediation</a>"</code>
objects has been supplied, there is also a column <code>Method</code>, which takes
the names or indices of the list elements to indicate the different methods.</p>
</td></tr>
<tr><td><code>p_value</code></td>
<td>
<p>a data frame consisting of column <code>Label</code> which gives
the default facet label for the p-values, column <code>Effect</code> indicating
the different effects, and column <code>Value</code> containing the p-values.  If
a list of <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> objects has been supplied, there is
also a column <code>Method</code>, which takes the names or indices of the list
elements to indicate the different methods.  This is only returned if
argument <code>p_value = TRUE</code>.</p>
</td></tr>
<tr><td><code>level</code></td>
<td>
<p>numeric; the confidence level used for the confidence intervals
of the indirect effect(s).</p>
</td></tr>
<tr><td><code>have_methods</code></td>
<td>
<p>a logical indicating whether a list of
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> objects has been supplied.  If <code>TRUE</code>,
the data frame in the <code>ci</code> component contains a column <code>Method</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+ci_plot">ci_plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# set up information for plot
setup &lt;- setup_ci_plot(boot, parm = "Indirect")

# plot only density and confidence interval
ggplot() +
  geom_hline(yintercept = 0, color = "darkgrey") +
  geom_pointrange(aes(x = "Robust bootstrap", y = Estimate,
                      ymin = Lower, ymax = Upper),
                  data = setup$ci) +
  labs(x = NULL, y = "Indirect effect")

</code></pre>

<hr>
<h2 id='setup_density_plot'>Set up information for a density plot of the indirect effect(s)</h2><span id='topic+setup_density_plot'></span><span id='topic+setup_density_plot.boot_test_mediation'></span><span id='topic+setup_density_plot.sobel_test_mediation'></span><span id='topic+setup_density_plot.list'></span>

<h3>Description</h3>

<p>Extract the relevant information for a density plot of the indirect
effect(s) from results of (robust) mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_density_plot(object, ...)

## S3 method for class 'boot_test_mediation'
setup_density_plot(object, ...)

## S3 method for class 'sobel_test_mediation'
setup_density_plot(object, grid = NULL, level = 0.95, ...)

## S3 method for class 'list'
setup_density_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setup_density_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from
(robust) mediation analysis, or a list of such objects.</p>
</td></tr>
<tr><td><code id="setup_density_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="setup_density_plot_+3A_grid">grid</code></td>
<td>
<p>an optional numeric vector containing the values at which to
evaluate the assumed normal density from Sobel's test.  The default is to
take 512 equally spaced points between the estimated indirect effect
<code class="reqn">\pm</code> three times the standard error according to Sobel's formula.</p>
</td></tr>
<tr><td><code id="setup_density_plot_+3A_level">level</code></td>
<td>
<p>numeric;  the confidence level of the confidence intervals
from Sobel's test.  The default is to include 95% confidence intervals.
Note that this is not used for bootstrap tests, as those require to specify
the confidence level already in <code><a href="#topic+test_mediation">test_mediation</a>()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally by <code><a href="#topic+density_plot">density_plot</a>()</code>.  It may
also be useful for users who want to produce a similar plot, but who want
more control over what information to display or how to display that
information.
</p>


<h3>Value</h3>

<p>An object of class <code>"setup_density_plot"</code> with the following
components:
</p>
<table>
<tr><td><code>density</code></td>
<td>
<p>a data frame containing the values of the indirect effect
where the density is estimated (column <code>Indirect</code>), and the estimated
density values (column <code>Density</code>).  In case of a model with multiple
indirect effects, there is a column <code>Effect</code> that indicates the
different indirect effects.  If a list of <code>"<a href="#topic+test_mediation">test_mediation</a>"</code>
objects has been supplied, there is also a column <code>Method</code>, which takes
the names or indices of the list elements to indicate the different methods.</p>
</td></tr>
<tr><td><code>ci</code></td>
<td>
<p>a data frame consisting of column <code>Estimate</code> containing the
point estimates, column <code>Lower</code> for the lower confidence limit, and
column <code>Upper</code> for the upper confidence limit.  In case of a model with
multiple indirect effects, there is a column <code>Effect</code> that indicates
the different indirect effects.  If a list of <code>"<a href="#topic+test_mediation">test_mediation</a>"</code>
objects has been supplied, there is also a column <code>Method</code>, which takes
the names or indices of the list elements to indicate the different methods.</p>
</td></tr>
<tr><td><code>test</code></td>
<td>
<p>a character string indicating whether the object contains
results from a bootstrap test (<code>"boot"</code>) or a Sobel test
(<code>"sobel"</code>), or a vector of such character strings if a list of
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> objects has been supplied.</p>
</td></tr>
<tr><td><code>level</code></td>
<td>
<p>numeric; the confidence level used for the confidence intervals
of the indirect effect(s).</p>
</td></tr>
<tr><td><code>have_effects</code></td>
<td>
<p>a logical indicating whether the mediation model
contains multiple indirect effects  If <code>TRUE</code>, the data frames in the
<code>density</code> and <code>ci</code> components contain a column <code>Effect</code>.</p>
</td></tr>
<tr><td><code>have_methods</code></td>
<td>
<p>a logical indicating whether a list of
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> objects has been supplied.  If <code>TRUE</code>,
the data frames in the <code>density</code> and <code>ci</code> components contain a
column <code>Method</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+density_plot">density_plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# set up information for plot
setup &lt;- setup_density_plot(boot)

# plot only density and confidence interval
ggplot() +
  geom_density(aes(x = Indirect, y = Density), data = setup$density,
               stat = "identity") +
  geom_rect(aes(xmin = Lower, xmax = Upper,
                ymin = -Inf, ymax = Inf),
            data = setup$ci, color = NA, alpha = 0.2) +
  labs(x = "Indirect effect", y = "Bootstrap density")

</code></pre>

<hr>
<h2 id='setup_ellipse_plot'>Set up a diagnostic plot with a tolerance ellipse</h2><span id='topic+setup_ellipse_plot'></span><span id='topic+setup_ellipse_plot.test_mediation'></span><span id='topic+setup_ellipse_plot.reg_fit_mediation'></span><span id='topic+setup_ellipse_plot.cov_fit_mediation'></span><span id='topic+setup_ellipse_plot.list'></span>

<h3>Description</h3>

<p>Extract the relevant information for a diagnostic plot with a tolerance
ellipse from results of (robust) mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_ellipse_plot(object, ...)

## S3 method for class 'test_mediation'
setup_ellipse_plot(object, ...)

## S3 method for class 'reg_fit_mediation'
setup_ellipse_plot(
  object,
  horizontal = NULL,
  vertical = NULL,
  partial = FALSE,
  level = 0.975,
  npoints = 100,
  ...
)

## S3 method for class 'cov_fit_mediation'
setup_ellipse_plot(
  object,
  horizontal = NULL,
  vertical = NULL,
  partial = FALSE,
  level = 0.975,
  npoints = 100,
  ...
)

## S3 method for class 'list'
setup_ellipse_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setup_ellipse_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code>
or <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from (robust) mediation
analysis, or a list of such objects.</p>
</td></tr>
<tr><td><code id="setup_ellipse_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="setup_ellipse_plot_+3A_horizontal">horizontal</code></td>
<td>
<p>a character string specifying the variable to be
plotted on the horizontal axis.  If the dependent variable is chosen for
the vertical axis, a hypothsized mediator or an independent variable must
be selected for the horizontal axis.  If a hypothesized mediator is chosen
for the vertical axis, an independent variable must be selected for the
horizontal axis (in case of a serial multiple mediator model, a hypothesized
mediator occurring earlier in the sequence is also allowed).  The default is
to plot the first independent variable on the horizontal axis.</p>
</td></tr>
<tr><td><code id="setup_ellipse_plot_+3A_vertical">vertical</code></td>
<td>
<p>a character string specifying the variable to be
plotted on the vertical axis: the dependent variable or a hypothesized
mediator.  The default is to plot the first hypothesized mediator on the
vertical axis.</p>
</td></tr>
<tr><td><code id="setup_ellipse_plot_+3A_partial">partial</code></td>
<td>
<p>a logical indicating whether to extract the observed values
of the selected variable for the vertical axis (<code>FALSE</code>), or the
partial residuals with respect to the variable on the horizontal axis
(<code>TRUE</code>).  The latter allows to display the corresponding regression
coefficient by a line.</p>
</td></tr>
<tr><td><code id="setup_ellipse_plot_+3A_level">level</code></td>
<td>
<p>numeric; the confidence level of the tolerance ellipse.  It
gives the percentage of observations that are expected to lie within the
ellipse under the assumption of a normal distribution, and therefore it
controls the size of the ellipse.  The default is such that the ellipse is
expected to contain 97.5% of the observations.</p>
</td></tr>
<tr><td><code id="setup_ellipse_plot_+3A_npoints">npoints</code></td>
<td>
<p>the number of grid points used to evaluate the ellipse.  The
default is to use 100 grid points.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally by <code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>.  It may
also be useful for users who want to produce a similar plot, but who want
more control over what information to display or how to display that
information.
</p>


<h3>Value</h3>

<p>An object of class <code>"setup_ellipse_plot"</code> with the following
components:
</p>
<table>
<tr><td><code>data</code></td>
<td>
<p>a data frame containing the coordinates of the data points to
be plotted on the horizontal axis (column <code>x</code>) and the coordinates
on the vertical axis (column <code>y</code>).  For robust methods that assign
outlyingness weights to each data point, those weights are given in column
<code>Weight</code>.  If a list of objects has been supplied and there are
multiple objects from such robust methods, or if partial residuals are to be
plotted on the vertical axis, there is also a column <code>Method</code>, which
takes the names or indices of the list elements to indicate the different
methods.</p>
</td></tr>
<tr><td><code>ellipse</code></td>
<td>
<p>a data frame containing the coordinates of the tolerance
ellipse on the horizontal axis (column <code>x</code>) and on the vertical axis
(column <code>y</code>).  If a list of objects has been supplied, there is also a
column <code>Method</code>, which takes the names or indices of the list elements
to indicate the different methods.</p>
</td></tr>
<tr><td><code>line</code></td>
<td>
<p>a data frame with columns <code>intercept</code> and <code>slope</code>
containing the intercept and slope, respectively, of the regression line to
be plotted.  If  a list of objects has been supplied, there is also a column
<code>Method</code>, which takes the names or indices of the list elements to
indicate the different methods. This is only returned if
<code>partial = TRUE</code>, or in case of a simple mediation model (without
control variables) when the hypothesized mediator is plotted on the vertical
axis and the independent variable is plotted on the horizontal axis.</p>
</td></tr>
<tr><td><code>horizontal</code></td>
<td>
<p>a character string giving the variable to be plotted on
the horizontal axis.</p>
</td></tr>
<tr><td><code>vertical</code></td>
<td>
<p>a character string giving the variable to be plotted on the
vertical axis</p>
</td></tr>
<tr><td><code>partial</code></td>
<td>
<p>a logical indicating whether the values to be plotted on the
vertical axis correspond to the observed values of the selected variable
(<code>FALSE</code>), or the partial residuals with respect to the variable on the
horizontal axis (<code>TRUE</code>).</p>
</td></tr>
<tr><td><code>robust</code></td>
<td>
<p>a logical indicating whether the object contains results from
a robust method, or a vector of such logicals if a list of objects has been
supplied.</p>
</td></tr>
<tr><td><code>have_methods</code></td>
<td>
<p>a logical indicating whether a list of objects has been
supplied.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>,
<code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# set up information for plot
setup &lt;- setup_ellipse_plot(boot)

# plot only data and tolerance ellipse
ggplot() +
  geom_path(aes(x = x, y = y), data = setup$ellipse,
            color = "#00BFC4") +
  geom_point(aes(x = x, y = y, fill = Weight),
             data = setup$data, shape = 21) +
  scale_fill_gradient(limits = 0:1, low = "white",
                      high = "black") +
  labs(x = setup$horizontal, y = setup$vertical)

</code></pre>

<hr>
<h2 id='setup_weight_plot'>Set up a diagnostic plot of robust regression weights</h2><span id='topic+setup_weight_plot'></span><span id='topic+setup_weight_plot.test_mediation'></span><span id='topic+setup_weight_plot.reg_fit_mediation'></span>

<h3>Description</h3>

<p>Extract the relevant information for a diagnostic plot of the regression
weights from robust mediation analysis.  This plot allows to easily detect
deviations from normality assumptions such as skewness or heavy tails.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_weight_plot(object, ...)

## S3 method for class 'test_mediation'
setup_weight_plot(object, ...)

## S3 method for class 'reg_fit_mediation'
setup_weight_plot(object, outcome = NULL, npoints = 1000, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setup_weight_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code>
or <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from robust mediation
analysis.  Only mediation analysis objects fitted with the robust
MM-estimator are supported.</p>
</td></tr>
<tr><td><code id="setup_weight_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="setup_weight_plot_+3A_outcome">outcome</code></td>
<td>
<p>a character vector specifying the outcome variables of the
regressions to be included in the plot.  This must be a subset of the
hypothesized mediators and the dependent variable, or <code>NULL</code> (the
default) to include all regressions of the mediation model.</p>
</td></tr>
<tr><td><code id="setup_weight_plot_+3A_npoints">npoints</code></td>
<td>
<p>the number of grid points used to evaluate the expected
percentages.  The default is to use 1000 grid points.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used internally by <code><a href="#topic+weight_plot">weight_plot</a>()</code>.  It may
also be useful for users who want to produce a similar plot, but who want
more control over what information to display or how to display that
information.
</p>


<h3>Value</h3>

<p>An object of class <code>"setup_weight_plot"</code> with the following
components:
</p>
<table>
<tr><td><code>data</code></td>
<td>
<p>a data frame containing the following information: the outcome
variable of the regression (column <code>Outcome</code>; only if multiple
regressions are to be included in the plot), whether the row corresponds to
the negative or the positive tail of the residual distribution (column
<code>Tail</code>), whether the row corresponds to the expected (under the normal
distribution) or the empirical weights (column <code>Weights</code>), the weight
thresholds (column <code>Threshold</code>), and the corresponding percentage of
observations that have a weight below this threshold (column
<code>Percentage</code>).</p>
</td></tr>
<tr><td><code>outcome</code></td>
<td>
<p>a character vector containing the outcome variables of the
regressions to be included in the plot.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>,
<code><a href="#topic+weight_plot">weight_plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# set up information for plot
setup &lt;- setup_weight_plot(boot)
# create diagnostic plot of robust regression weights
weight_plot(setup) +
  scale_color_manual("", values = c("black", "#00BFC4")) +
  theme(legend.position = "top")

</code></pre>

<hr>
<h2 id='sim_mediation'>Generate data from a fitted mediation model</h2><span id='topic+sim_mediation'></span><span id='topic+sim_mediation.fit_mediation'></span><span id='topic+sim_mediation.test_mediation'></span><span id='topic+rmediation'></span>

<h3>Description</h3>

<p>Generate data from a fitted mediation model, using the obtained coefficient
estimates as the true model coefficients for data generation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_mediation(object, n, ...)

## S3 method for class 'fit_mediation'
sim_mediation(
  object,
  n = NULL,
  explanatory = c("sim", "boot"),
  errors = c("sim", "boot"),
  num_discrete = 10,
  ...
)

## S3 method for class 'test_mediation'
sim_mediation(object, n = NULL, ...)

rmediation(n, object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_mediation_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code>
or <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from (robust) mediation
analysis.</p>
</td></tr>
<tr><td><code id="sim_mediation_+3A_n">n</code></td>
<td>
<p>an integer giving the number of observations to be generated.  If
<code>NULL</code> (the default), the number of observations is taken from the data
set used in the fitted mediation model from <code>object</code>.</p>
</td></tr>
<tr><td><code id="sim_mediation_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="sim_mediation_+3A_explanatory">explanatory</code></td>
<td>
<p>a character string specifying how to generate the
explanatory variables (i.e., the independent variables and additional
covariates).  Possible values are <code>"sim"</code> to draw each explanatory
variable independently from a certain distribution (the default), or
<code>"boot"</code> to bootstrap the explanatory variables from the observed data
(i.e., random sampling with replacement).  See &lsquo;Details&rsquo; for more
information on how the data are generated.</p>
</td></tr>
<tr><td><code id="sim_mediation_+3A_errors">errors</code></td>
<td>
<p>a character string specifying how to generate the error terms
in the linear models for the mediators and the dependent variable.  Possible
values are <code>"sim"</code> to draw the error terms independently from the
respective fitted model distribution (the default), or <code>"boot"</code> to
bootstrap the error terms from the observed residuals in the respective
fitted model (i.e., random sampling with replacement).  See &lsquo;Details&rsquo;
for more information on how the data are generated.</p>
</td></tr>
<tr><td><code id="sim_mediation_+3A_num_discrete">num_discrete</code></td>
<td>
<p>integer; if the explanatory variables are drawn
from distributions (<code>explanatory</code> = &quot;sim&quot;), variables that take
<code>num_discrete</code> or fewer values are considered discrete (the default is
10).  In that case, the corresponding variables are drawn from multinomial
distributions with the relative frequencies from the observed data.  This is
only relevant if the mediation model was fitted via regressions and ignored
if the mediation model was fitted via the covariance matrix, as the latter
method assumes multivariate normality.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The data generating process consists of three basic steps:
</p>

<ol>
<li><p>Generate the explanatory variables (i.e., the independent variables
and additional covariates).
</p>
</li>
<li><p>Generate the error terms of the different regression models.
</p>
</li>
<li><p>Generate the mediators and the dependent variable from the
respective regression models, using the coefficient estimates from the
fitted mediation model as the true model coefficients.
</p>
</li></ol>

<p>If <code>explanatory = "sim"</code>, the explanatory variables are simulated as
follows.  For each variable, a regression on a constant term is performed,
using the same estimator and assumed error distribution as in the fitted
mediation model from <code>object</code>.  Typically, the assumed error
distribution is normal, but it can also be a skew-normal, <code class="reqn">t</code>, or
skew-<code class="reqn">t</code> distribution, or a selection of the best-fitting error
distribution.  Using the obtained location estimate and parameter estimates
of the assumed error distribution, values are drawn from this error
distribution and added to the location estimate.  It is important to note
that all explanatory variables are simulated independently from each other,
hence there are no correlations between the explanatory variables.
</p>
<p>In order to generate correlated explanatory variables, it is recommended
bootstrap the explanatory variables from the observed data by setting
<code>explanatory = "boot"</code>.
</p>
<p>If <code>errors = "sim"</code>, the error terms of the different regression models
are drawn from the assumed error distribution in the fitted mediation model
from <code>object</code>, using the respective parameter estimates.  Typically,
the assumed error distribution is normal, but it can also be a skew-normal,
<code class="reqn">t</code>, or skew-<code class="reqn">t</code> distribution, or a selection of the best-fitting
error distribution.
</p>
<p>If <code>errors = "boot"</code>, bootstrapping the error terms from the observed
residuals is done independently for the different regression models and,
if also <code>explanatory = "boot"</code>, independently from bootstrapping the
explanatory variables.
</p>
<p>The <code>"boot_test_mediation"</code> method for results of a bootstrap test
always uses the regression coefficient estimates obtained on the original
data for data generation, not the bootstrap estimates.  Keep in mind that
all bootstrap estimates are the means of the respective bootstrap
replicates.  If the bootstrap estimates of the regression coefficients were
used to generate the data, the true values of the indirect effects for the
generated data (i.e., the products of the corresponding bootstrap
coefficient estimates) would not be equal to the reported bootstrap
estimates of the indirect effects in <code>object</code>, which could lead to
confusion.  For the estimates on the original data, it of course holds that
the estimates of indirect effects are the products of the corresponding
coefficient estimates.
</p>


<h3>Value</h3>

<p>A data frame with <code>n</code> observations containing simulated data
for the variables of the fitted mediation model.
</p>


<h3>Mediation models</h3>

<p>The following mediation models are implemented.  In the regression equations
below, the <code class="reqn">i_j</code> are intercepts and the <code class="reqn">e_j</code> are random error terms.
</p>

<ul>
<li><p><em>Simple mediation model</em>: The mediation model in its simplest
form is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + aX + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + bM + cX + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c'X + e_3,</code>
</p>

<p>where <code class="reqn">Y</code> denotes the dependent variable, <code class="reqn">X</code> the independent
variable, and <code class="reqn">M</code> the hypothesized mediator.  The main parameter of
interest is the product of coefficients <code class="reqn">ab</code>, called the indirect
effect.  The coefficients <code class="reqn">c</code> and <code class="reqn">c'</code> are called the direct and
total effect, respectively.
</p>
</li>
<li><p><em>Parallel multiple mediator model</em>: The simple mediation model
can be extended with multiple mediators <code class="reqn">M_1, \dots, M_k</code> in the
following way:
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The main parameters of interest are the individual indirect effects
<code class="reqn">a_1 b_1, \dots, a_k b_k</code>.
</p>
</li>
<li><p><em>Serial multiple mediator model</em>: It differs from the parallel
multiple mediator model in that it allows the hypothesized mediators
<code class="reqn">M_1, \dots, M_k</code> to influence each other in a sequential manner.
It is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">M_2 = i_1 + d_{21} M_1 + a_2 X + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + d_{k1} M_1 + \dots +  d_{k,k-1} M_{k-1} + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The serial multiple mediator model quickly grows in complexity with
increasing number of mediators due to the combinatorial increase in
indirect paths through the mediators.  It is therefore only implemented
for two and three mediators to maintain a focus on easily interpretable
models.  For two serial mediators, the three indirect effects
<code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, and <code class="reqn">a_1 d_{21} b_2</code> are the main
parameters of interest.  For three serial mediators, there are already
seven indirect effects: <code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, <code class="reqn">a_3 b_3</code>,
<code class="reqn">a_1 d_{21} b_2</code>, <code class="reqn">a_1 d_{31} b_3</code>, <code class="reqn">a_2 d_{32} b_3</code>, and
<code class="reqn">a_1 d_{21} d_{32} b_3</code>.
</p>
</li>
<li><p><em>Multiple independent variables to be mediated</em>: The simple
mediation model can also be extended by allowing multiple independent
variables <code class="reqn">X_1, \dots, X_l</code> instead of multiple mediators.  It is
defined by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + a_1 X_1 + \dots + a_l X_l + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + b M + c_1 X_1 + \dots + c_l X_l + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c_1' X_1 + \dots + c_l' X_l + e_3.</code>
</p>

<p>The indirect effects <code class="reqn">a_1 b, \dots, a_l b</code> are the main parameters of
interest.  Note that an important special case of this model occurs when a
categorical independent variable is represented by a group of dummy
variables.
</p>
</li>
<li><p><em>Control variables</em>: To isolate the effects of the independent
variables of interest from other factors, control variables can be added
to all regression equations of a mediation model.  Note that that there is
no intrinsic difference between independent variables of interest and
control variables in terms of the model or its estimation.  The difference
is purely conceptual in nature: for the control variables, the estimates
of the direct and indirect paths are not of particular interest to the
researcher.  Control variables can therefore be specified separately from
the independent variables of interest.  Only for the latter, results for
the indirect effects are included in the output.
</p>
</li>
<li><p><em>More complex models</em>: Some of the models described above can
be combined, for instance parallel and serial multiple mediator models
support multiple independent variables of interest and control variables.
</p>
</li></ul>



<h3>Note</h3>

<p>Function <code>sim_mediation()</code> takes the object containing results from
mediation analysis as its first argument so that it can easily be used with
the pipe operator (<span class="rlang"><b>R</b></span>'s built-in <code>|&gt;</code> or <span class="pkg">magrittr</span>'s <code>%&gt;%</code>).
</p>
<p>Function <code>rmediation()</code> is a wrapper conforming with the naming
convention for functions that generate data, as well as the convention of
those function to take the number of observations as the first argument.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

## simple mediation
# fit the mediation model
fit_simple &lt;- fit_mediation(BSG2014,
                            x = "ValueDiversity",
                            y = "TeamCommitment",
                            m = "TaskConflict")
# simulate data from the fitted mediation model
sim_simple &lt;- sim_mediation(fit_simple, n = 100)
head(sim_simple)

## serial multiple mediators
# fit the mediation model
fit_serial &lt;- fit_mediation(BSG2014,
                            x = "ValueDiversity",
                            y = "TeamScore",
                            m = c("TaskConflict",
                                  "TeamCommitment"),
                            model = "serial")
# simulate data from the fitted mediation model
sim_serial &lt;- sim_mediation(fit_serial, n = 100)
head(sim_serial)

## parallel multiple mediators and control variables
# fit the mediation model
fit_parallel &lt;- fit_mediation(BSG2014,
                              x = "SharedLeadership",
                              y = "TeamPerformance",
                              m = c("ProceduralJustice",
                                    "InteractionalJustice"),
                              covariates = c("AgeDiversity",
                                             "GenderDiversity"),
                              model = "parallel")
# simulate data from the fitted mediation model
# (here the explanatory variables are bootstrapped
# to maintain the correlations between them)
sim_parallel &lt;- sim_mediation(fit_parallel, n = 100,
                              explanatory = "boot")
head(sim_parallel)

</code></pre>

<hr>
<h2 id='summary.test_mediation'>Summary of results from (robust) mediation analysis</h2><span id='topic+summary.test_mediation'></span><span id='topic+summary.boot_test_mediation'></span><span id='topic+summary.sobel_test_mediation'></span>

<h3>Description</h3>

<p>Summarize results from (robust) mediation analysis for proper interpretation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'boot_test_mediation'
summary(object, type = c("boot", "data"), plot = TRUE, ...)

## S3 method for class 'sobel_test_mediation'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.test_mediation_+3A_object">object</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from (robust) mediation
analysis.</p>
</td></tr>
<tr><td><code id="summary.test_mediation_+3A_type">type</code></td>
<td>
<p>a character string specifying how to summarize the effects
other than the indirect effect(s).  Possible values are <code>"boot"</code> (the
default) to compute significance tests using the normal approximation of the
bootstrap distribution (i.e., to assume a normal distribution of the
corresponding effect with the standard deviation computed from the bootstrap
replicates), or <code>"data"</code> to compute significance tests via
statistical theory based on the original data (e.g., t-tests if the
coefficients are estimated via regression).  Note that this is only relevant
for mediation analysis via a bootstrap test, where significance of the
indirect effect is always assessed via a percentile-based confidence
interval due to the asymmetry of its distribution.</p>
</td></tr>
<tr><td><code id="summary.test_mediation_+3A_plot">plot</code></td>
<td>
<p>a logical indicating whether to include a diagnostic plot of
robust regression weights (see <code><a href="#topic+weight_plot">weight_plot</a>()</code>).  This is only
used for mediation analysis objects fitted with the robust MM-estimator (see
<code><a href="#topic+test_mediation">test_mediation</a>()</code>).  Note that the diagnostic plot is only
shown when the returned object is printed in order to maintain a clear
separation between computing results and printing/plotting them.</p>
</td></tr>
<tr><td><code id="summary.test_mediation_+3A_...">...</code></td>
<td>
<p>additional arguments are currently ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>"summary_test_mediation"</code> with the
following components:
</p>
<table>
<tr><td><code>object</code></td>
<td>
<p>the <code>object</code> passed to the <code>summary</code> method, which
contains the results from testing the indirect effect(s).</p>
</td></tr>
<tr><td><code>summary</code></td>
<td>
<p>an object containing all necessary information to summarize
the effects other than the indirect effect(s).</p>
</td></tr>
<tr><td><code>plot</code></td>
<td>
<p>if applicable, an object inheriting from class
<code>"<a href="ggplot2.html#topic+ggplot">ggplot</a>"</code> containing the diagnostic plot.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022a) A Robust Bootstrap Test
for Mediation Analysis.  <em>Organizational Research Methods</em>,
<b>25</b>(3), 591&ndash;617.  doi:10.1177/1094428121999096.
</p>
<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022b) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+test_mediation">test_mediation</a>()</code>, <code><a href="#topic+weight_plot">weight_plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

## seed to be used for the random number generator
seed &lt;- 20211117

## simple mediation
# set seed of the random number generator
set.seed(seed)
# The results in Alfons et al. (2022a) were obtained with an
# older version of the random number generator.  To reproduce
# those results, uncomment the two lines below.
# RNGversion("3.5.3")
# set.seed(20150601)
# perform mediation analysis
boot_simple &lt;- test_mediation(TeamCommitment ~
                                m(TaskConflict) +
                                  ValueDiversity,
                              data = BSG2014)
summary(boot_simple)
# the diagnostic plot is not shown when the summary is
# computed, only when the resulting object is printed
summary_simple &lt;- summary(boot_simple)  # does not show plot
summary_simple                          # shows output and plot


## serial multiple mediators
# set seed of the random number generator
set.seed(seed)
# perform mediation analysis
boot_serial &lt;- test_mediation(TeamScore ~
                                serial_m(TaskConflict,
                                         TeamCommitment) +
                                ValueDiversity,
                              data = BSG2014)
summary(boot_serial)

## parallel multiple mediators and control variables
# set seed of the random number generator
set.seed(seed)
# perform mediation analysis
boot_parallel &lt;- test_mediation(TeamPerformance ~
                                  parallel_m(ProceduralJustice,
                                             InteractionalJustice) +
                                  SharedLeadership +
                                  covariates(AgeDiversity,
                                             GenderDiversity),
                                data = BSG2014)
summary(boot_parallel)


</code></pre>

<hr>
<h2 id='test_mediation'>(Robust) mediation analysis</h2><span id='topic+test_mediation'></span><span id='topic+print.boot_test_mediation'></span><span id='topic+print.sobel_test_mediation'></span><span id='topic+test_mediation.formula'></span><span id='topic+test_mediation.default'></span><span id='topic+test_mediation.fit_mediation'></span><span id='topic+robmed'></span>

<h3>Description</h3>

<p>Perform (robust) mediation analysis via a (fast-and-robust) bootstrap test
or Sobel's test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_mediation(object, ...)

## S3 method for class 'formula'
test_mediation(
  formula,
  data,
  test = c("boot", "sobel"),
  alternative = c("twosided", "less", "greater"),
  R = 5000,
  level = 0.95,
  type = NULL,
  order = c("first", "second"),
  method = c("regression", "covariance"),
  robust = TRUE,
  family = "gaussian",
  contrast = FALSE,
  fit_yx = TRUE,
  control = NULL,
  ...
)

## Default S3 method:
test_mediation(
  object,
  x,
  y,
  m,
  covariates = NULL,
  test = c("boot", "sobel"),
  alternative = c("twosided", "less", "greater"),
  R = 5000,
  level = 0.95,
  type = NULL,
  order = c("first", "second"),
  method = c("regression", "covariance"),
  robust = TRUE,
  family = "gaussian",
  model = c("parallel", "serial"),
  contrast = FALSE,
  fit_yx = TRUE,
  control = NULL,
  ...
)

## S3 method for class 'fit_mediation'
test_mediation(
  object,
  test = c("boot", "sobel"),
  alternative = c("twosided", "less", "greater"),
  R = 5000,
  level = 0.95,
  type = NULL,
  order = c("first", "second"),
  ...
)

robmed(..., test = "boot", method = "regression", robust = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_mediation_+3A_object">object</code></td>
<td>
<p>the first argument will determine the method of the generic
function to be dispatched.  For the default method, this should be a data
frame containing the variables.  There is also a method for a mediation
model fit as returned by <code><a href="#topic+fit_mediation">fit_mediation</a>()</code>.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.  For the bootstrap
tests, those can be used to specify arguments of <code><a href="boot.html#topic+boot">boot</a>()</code>,
for example for parallel computing.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot; (or one that can be coerced to
that class): a symbolic description of the model to be fitted.  Hypothesized
mediator variables should be wrapped in a call to <code><a href="#topic+m">m</a>()</code> (see
examples), and any optional control variables should be wrapped in a call to
<code><a href="#topic+covariates">covariates</a>()</code>.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_data">data</code></td>
<td>
<p>for the <code>formula</code> method, a data frame containing the
variables.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_test">test</code></td>
<td>
<p>a character string specifying the test to be performed for
the indirect effects.  Possible values are <code>"boot"</code> (the default) for
the bootstrap, or <code>"sobel"</code> for Sobel's test.  Currently, Sobel's test
is not implemented for models with multiple indirect effects.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_alternative">alternative</code></td>
<td>
<p>a character string specifying the alternative hypothesis
in the test for the indirect effects.  Possible values are <code>"twosided"</code>
(the default), <code>"less"</code> or <code>"greater"</code>.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_r">R</code></td>
<td>
<p>an integer giving the number of bootstrap replicates.  The default
is to use 5000 bootstrap replicates.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_level">level</code></td>
<td>
<p>numeric; the confidence level of the confidence interval in
the bootstrap test.  The default is to compute a 95% confidence interval.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_type">type</code></td>
<td>
<p>a character string specifying the type of confidence interval
to be computed in the bootstrap test.  Possible values are <code>"bca"</code> for
the bias-corrected and accelerated (BCa) bootstrap, or <code>"perc"</code> for the
percentile bootstrap.  The default is to compute BCa bootstrap intervals if
the number of bootstrap replicates <code>R</code> is at least as large as the
number of observations in the data, and percentile bootstrap intervals
otherwise.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_order">order</code></td>
<td>
<p>a character string specifying the order of approximation of
the standard error in Sobel's test.  Possible values are <code>"first"</code>
(the default) for a first-order approximation, and <code>"second"</code> for a
second-order approximation.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_method">method</code></td>
<td>
<p>a character string specifying the method of estimation for
the mediation model.  Possible values are <code>"regression"</code> (the default)
to estimate the effects via regressions, or <code>"covariance"</code> to estimate
the effects via the covariance matrix.  Note that the effects are
always estimated via regressions if more than one independent variable or
hypothesized mediator is specified, or if control variables are supplied.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_robust">robust</code></td>
<td>
<p>a logical indicating whether to perform a robust test
(defaults to <code>TRUE</code>).  For estimation via regressions
(<code>method = "regression"</code>), this can also be a character string, with
<code>"MM"</code> specifying the MM-estimator of regression, and <code>"median"</code>
specifying median regression.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_family">family</code></td>
<td>
<p>a character string specifying the error distribution to be
used in maximum likelihood estimation of regression models.  Possible values
are <code>"gaussian"</code> for a normal distribution (the default),
<code>skewnormal</code> for a skew-normal distribution, <code>"student"</code> for
Student's t distribution, <code>"skewt"</code> for a skew-t distribution, or
<code>"select"</code> to select among these four distributions via BIC (see
<code><a href="#topic+fit_mediation">fit_mediation</a>()</code> for details).  This is only relevant if
<code>method = "regression"</code> and <code>robust = FALSE</code>.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_contrast">contrast</code></td>
<td>
<p>a logical indicating whether to compute pairwise contrasts
of the indirect effects (defaults to <code>FALSE</code>).  This can also be a
character string, with <code>"estimates"</code> for computing the pairwise
differences of the indirect effects (such that it is tested whether two
indirect effects are equal), and <code>"absolute"</code> for computing the
pairwise differences of the absolute values of the indirect effects
(such that it is tested whether two indirect effects are equal in
magnitude).  This is only relevant for models with multiple indirect
effects, which are currently only implemented for estimation via
regressions (<code>method = "regression"</code>).  For models with multiple
independent variables of interest and multiple hypothesized mediators,
contrasts are only computed between indirect effects corresponding to
the same independent variable.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_fit_yx">fit_yx</code></td>
<td>
<p>a logical indicating whether to fit the regression model
<code>y ~ x + covariates</code> to estimate the total effect (the default is
<code>TRUE</code>).  This is only relevant if <code>method = "regression"</code> and
<code>robust = FALSE</code>.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_control">control</code></td>
<td>
<p>a list of tuning parameters for the corresponding robust
method.  For robust regression (<code>method = "regression"</code>, and
<code>robust = TRUE</code> or <code>robust = "MM"</code>), a list of tuning
parameters for <code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code> as generated by
<code><a href="#topic+reg_control">reg_control</a>()</code>.  For winsorized covariance matrix estimation
(<code>method = "covariance"</code> and <code>robust = TRUE</code>), a list of tuning
parameters for <code><a href="#topic+cov_Huber">cov_Huber</a>()</code> as generated by
<code><a href="#topic+cov_control">cov_control</a>()</code>.  No tuning parameters are necessary for median
regression (<code>method = "regression"</code> and <code>robust = "median"</code>).</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_x">x</code></td>
<td>
<p>a character, integer or logical vector specifying the columns of
<code>object</code> containing the independent variables of interest.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_y">y</code></td>
<td>
<p>a character string, an integer or a logical vector specifying the
column of <code>object</code> containing the dependent variable.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_m">m</code></td>
<td>
<p>a character, integer or logical vector specifying the columns of
<code>object</code> containing the hypothesized mediator variables.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_covariates">covariates</code></td>
<td>
<p>optional; a character, integer or logical vector
specifying the columns of <code>object</code> containing additional covariates to
be used as control variables.</p>
</td></tr>
<tr><td><code id="test_mediation_+3A_model">model</code></td>
<td>
<p>a character string specifying the type of model in case of
multiple mediators.  Possible values are <code>"parallel"</code> (the default) for
the parallel multiple mediator model, or <code>"serial"</code> for the serial
multiple mediator model.  This is only relevant for models with multiple
hypothesized mediators, which are currently only implemented for estimation
via regressions (<code>method = "regression"</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With <code>method = "regression"</code>, and <code>robust = TRUE</code> or
<code>robust = "MM"</code>, the tests are based on robust regressions with the
MM-estimator from <code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code>.  The bootstrap test is
thereby performed via the fast-and-robust bootstrap.  This is the default
behavior.
</p>
<p>Note that the MM-estimator of regression implemented in
<code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code> can be seen as weighted least squares
estimator, where the weights are dependent on how much an observation is
deviating from the rest.  The trick for the fast-and-robust bootstrap is
that on each bootstrap sample, first a weighted least squares estimator
is computed (using those robustness weights from the original sample)
followed by a linear correction of the coefficients.  The purpose of this
correction is to account for the additional uncertainty of obtaining the
robustness weights.
</p>
<p>With <code>method = "regression"</code> and <code>robust = "median"</code>, the tests
are based on median regressions with <code><a href="quantreg.html#topic+rq">rq</a>()</code>.  Note
that the bootstrap test is performed via the standard bootstrap, as the
fast-and-robust bootstrap is not applicable.  Unlike the robust regressions
described above, median regressions are not robust against outliers in
the explanatory variables, and the standard bootstrap can suffer from
oversampling of outliers in the bootstrap samples.
</p>
<p>With <code>method = "covariance"</code> and <code>robust = TRUE</code>, the
tests are based on a Huber M-estimator of location and scatter.  For the
bootstrap test, the M-estimates are used to first clean the data via a
transformation.  Then the standard bootstrap is performed with the cleaned
data.  Note that this covariance-based approach is less robust than the
approach based on robust regressions described above.  Furthermore, the
bootstrap does not account for the variability from cleaning the data.
</p>
<p><code>robmed()</code> is a wrapper function for performing robust mediation
analysis via regressions and the fast-and-robust bootstrap.
</p>


<h3>Value</h3>

<p>An object inheriting from class <code>"test_mediation"</code> (class
<code>"boot_test_mediation"</code> if <code>test = "boot"</code> or
<code>"sobel_test_mediation"</code> if <code>test = "sobel"</code>) with the
following components:
</p>
<table>
<tr><td><code>a</code></td>
<td>
<p>a numeric vector containing the bootstrap point estimates of the
effects of the independent variables on the proposed mediator variables
(only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>b</code></td>
<td>
<p>a numeric vector containing the bootstrap point estimates of the
direct effects of the proposed mediator variables on the dependent variable
(only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>d</code></td>
<td>
<p>in case of a serial multiple mediator model, a numeric vector
containing the bootstrap point estimates of the effects of proposed mediator
variables on other mediator variables occurring later in the sequence (only
<code>"boot_test_mediation"</code> if applicable.</p>
</td></tr>
<tr><td><code>total</code></td>
<td>
<p>a numeric vector containing the bootstrap point estimates of
the total effects of the independent variables on the dependent variable
(only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>direct</code></td>
<td>
<p>a numeric vector containing the bootstrap point estimates of
the direct effects of the independent variables on the dependent variable
(only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>indirect</code></td>
<td>
<p>a numeric vector containing the bootstrap point estimates of
the indirect effects (only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>ab</code></td>
<td>
<p>for back-compatibility with versions &lt;0.10.0, the bootstrap
point estimates of the indirect effects are also included here (only
<code>"boot_test_mediation"</code>).  <b>This component is deprecated and
may be removed as soon as the next version.</b></p>
</td></tr>
<tr><td><code>ci</code></td>
<td>
<p>a numeric vector of length two or a matrix of two columns
containing the bootstrap confidence intervals for the indirect effects
(only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>reps</code></td>
<td>
<p>an object of class <code>"<a href="boot.html#topic+boot">boot</a>"</code> containing
the bootstrap replicates (only <code>"boot_test_mediation"</code>).  For
regression model fits, bootstrap replicates of the coefficients in the
individual regression models are stored.</p>
</td></tr>
<tr><td><code>se</code></td>
<td>
<p>numeric; the standard error of the indirect effect according
to Sobel's formula (only <code>"sobel_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>statistic</code></td>
<td>
<p>numeric; the test statistic for Sobel's test (only
<code>"sobel_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>p_value</code></td>
<td>
<p>numeric; the p-value from Sobel's test (only
<code>"sobel_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>alternative</code></td>
<td>
<p>a character string specifying the alternative
hypothesis in the test for the indirect effects.</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>an integer giving the number of bootstrap replicates (only
<code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>level</code></td>
<td>
<p>numeric; the confidence level of the bootstrap confidence
interval (only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>a character string specifying the type of bootstrap
confidence interval (only <code>"boot_test_mediation"</code>).</p>
</td></tr>
<tr><td><code>fit</code></td>
<td>
<p>an object inheriting from class
<code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code> containing the estimation results of the
mediation model on the original data.</p>
</td></tr>
</table>


<h3>Mediation models</h3>

<p>The following mediation models are implemented.  In the regression equations
below, the <code class="reqn">i_j</code> are intercepts and the <code class="reqn">e_j</code> are random error terms.
</p>

<ul>
<li><p><em>Simple mediation model</em>: The mediation model in its simplest
form is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + aX + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + bM + cX + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c'X + e_3,</code>
</p>

<p>where <code class="reqn">Y</code> denotes the dependent variable, <code class="reqn">X</code> the independent
variable, and <code class="reqn">M</code> the hypothesized mediator.  The main parameter of
interest is the product of coefficients <code class="reqn">ab</code>, called the indirect
effect.  The coefficients <code class="reqn">c</code> and <code class="reqn">c'</code> are called the direct and
total effect, respectively.
</p>
</li>
<li><p><em>Parallel multiple mediator model</em>: The simple mediation model
can be extended with multiple mediators <code class="reqn">M_1, \dots, M_k</code> in the
following way:
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The main parameters of interest are the individual indirect effects
<code class="reqn">a_1 b_1, \dots, a_k b_k</code>.
</p>
</li>
<li><p><em>Serial multiple mediator model</em>: It differs from the parallel
multiple mediator model in that it allows the hypothesized mediators
<code class="reqn">M_1, \dots, M_k</code> to influence each other in a sequential manner.
It is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">M_2 = i_1 + d_{21} M_1 + a_2 X + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + d_{k1} M_1 + \dots +  d_{k,k-1} M_{k-1} + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The serial multiple mediator model quickly grows in complexity with
increasing number of mediators due to the combinatorial increase in
indirect paths through the mediators.  It is therefore only implemented
for two and three mediators to maintain a focus on easily interpretable
models.  For two serial mediators, the three indirect effects
<code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, and <code class="reqn">a_1 d_{21} b_2</code> are the main
parameters of interest.  For three serial mediators, there are already
seven indirect effects: <code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, <code class="reqn">a_3 b_3</code>,
<code class="reqn">a_1 d_{21} b_2</code>, <code class="reqn">a_1 d_{31} b_3</code>, <code class="reqn">a_2 d_{32} b_3</code>, and
<code class="reqn">a_1 d_{21} d_{32} b_3</code>.
</p>
</li>
<li><p><em>Multiple independent variables to be mediated</em>: The simple
mediation model can also be extended by allowing multiple independent
variables <code class="reqn">X_1, \dots, X_l</code> instead of multiple mediators.  It is
defined by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + a_1 X_1 + \dots + a_l X_l + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + b M + c_1 X_1 + \dots + c_l X_l + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c_1' X_1 + \dots + c_l' X_l + e_3.</code>
</p>

<p>The indirect effects <code class="reqn">a_1 b, \dots, a_l b</code> are the main parameters of
interest.  Note that an important special case of this model occurs when a
categorical independent variable is represented by a group of dummy
variables.
</p>
</li>
<li><p><em>Control variables</em>: To isolate the effects of the independent
variables of interest from other factors, control variables can be added
to all regression equations of a mediation model.  Note that that there is
no intrinsic difference between independent variables of interest and
control variables in terms of the model or its estimation.  The difference
is purely conceptual in nature: for the control variables, the estimates
of the direct and indirect paths are not of particular interest to the
researcher.  Control variables can therefore be specified separately from
the independent variables of interest.  Only for the latter, results for
the indirect effects are included in the output.
</p>
</li>
<li><p><em>More complex models</em>: Some of the models described above can
be combined, for instance parallel and serial multiple mediator models
support multiple independent variables of interest and control variables.
</p>
</li></ul>



<h3>Note</h3>

<p>For the fast-and-robust bootstrap, the simpler correction of
Salibian-Barrera &amp; Van Aelst (2008) is used rather than the originally
proposed correction of Salibian-Barrera &amp; Zamar (2002).
</p>
<p>The default method takes a data frame its first argument so that it can
easily be used with the pipe operator (<span class="rlang"><b>R</b></span>'s built-in <code>|&gt;</code> or
<span class="pkg">magrittr</span>'s <code>%&gt;%</code>).
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022a) A Robust Bootstrap Test
for Mediation Analysis.  <em>Organizational Research Methods</em>,
<b>25</b>(3), 591&ndash;617.  doi:10.1177/1094428121999096.
</p>
<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022b) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>
<p>Azzalini, A. and Arellano-Valle, R. B. (2013) Maximum Penalized Likelihood
Estimation for Skew-Normal and Skew-t Distributions.  <em>Journal of
Statistical Planning and Inference</em>, <b>143</b>(2), 419&ndash;433.
doi:10.1016/j.jspi.2012.06.022.
</p>
<p>Preacher, K.J. and Hayes, A.F. (2004) SPSS and SAS Procedures for Estimating
Indirect Effects in Simple Mediation Models.  <em>Behavior Research
Methods, Instruments, &amp; Computers</em>, <b>36</b>(4), 717&ndash;731.
doi:10.3758/bf03206553.
</p>
<p>Preacher, K.J. and Hayes, A.F. (2008) Asymptotic and Resampling Strategies
for Assessing and Comparing Indirect Effects in Multiple Mediator Models.
<em>Behavior Research Methods</em>, <b>40</b>(3), 879&ndash;891.
doi:10.3758/brm.40.3.879.
</p>
<p>Salibian-Barrera, M. and Van Aelst, S. (2008) Robust Model Selection Using
Fast and Robust Bootstrap.  <em>Computational Statistics &amp; Data Analysis</em>,
<b>52</b>(12), 5121&ndash;5135.  doi:10.1016/j.csda.2008.05.007.
</p>
<p>Salibian-Barrera, M. and Zamar, R. (2002) Bootstrapping Robust Estimates of
Regression.  <em>The Annals of Statistics</em>, <b>30</b>(2), 556&ndash;582.
doi:10.1214/aos/1021379865.
</p>
<p>Sobel, M.E. (1982) Asymptotic Confidence Intervals for Indirect Effects in
Structural Equation Models.  <em>Sociological Methodology</em>, <b>13</b>,
290&ndash;312.  doi:10.2307/270723.
</p>
<p>Yuan, Y. and MacKinnon, D.P. (2014) Robust Mediation Analysis Based on
Median Regression.  <em>Psychological Methods</em>, <b>19</b>(1), 1&ndash;20.
doi:10.1037/a0033820.
</p>
<p>Zu, J. and Yuan, K.-H. (2010) Local Influence and Robust Procedures for
Mediation Analysis.  <em>Multivariate Behavioral Research</em>, <b>45</b>(1),
1&ndash;44.  doi:10.1080/00273170903504695.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>
</p>
<p><code><a href="#topic+coef.test_mediation">coef</a>()</code>,
<code><a href="#topic+confint.test_mediation">confint</a>()</code> and
<code><a href="#topic+plot-methods">plot</a>()</code> methods, <code><a href="#topic+p_value">p_value</a>()</code>
</p>
<p><code><a href="boot.html#topic+boot">boot</a>()</code>, <code><a href="robustbase.html#topic+lmrob">lmrob</a>()</code>,
<code><a href="stats.html#topic+lm">lm</a>()</code>, <code><a href="#topic+cov_Huber">cov_Huber</a>()</code>, <code><a href="#topic+cov_ML">cov_ML</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

## seed to be used for the random number generator
seed &lt;- 20211117

## simple mediation
# set seed of the random number generator
set.seed(seed)
# The results in Alfons et al. (2022a) were obtained with an
# older version of the random number generator.  To reproduce
# those results, uncomment the two lines below.
# RNGversion("3.5.3")
# set.seed(20150601)
# perform mediation analysis
boot_simple &lt;- test_mediation(TeamCommitment ~
                                m(TaskConflict) +
                                  ValueDiversity,
                              data = BSG2014)
summary(boot_simple)


## serial multiple mediators
# set seed of the random number generator
set.seed(seed)
# perform mediation analysis
boot_serial &lt;- test_mediation(TeamScore ~
                                serial_m(TaskConflict,
                                         TeamCommitment) +
                                ValueDiversity,
                              data = BSG2014)
summary(boot_serial)

## parallel multiple mediators and control variables
# set seed of the random number generator
set.seed(seed)
# perform mediation analysis
boot_parallel &lt;- test_mediation(TeamPerformance ~
                                  parallel_m(ProceduralJustice,
                                             InteractionalJustice) +
                                  SharedLeadership +
                                  covariates(AgeDiversity,
                                             GenderDiversity),
                                data = BSG2014)
summary(boot_parallel)


</code></pre>

<hr>
<h2 id='weight_plot'>Diagnostic plot of robust regression weights</h2><span id='topic+weight_plot'></span><span id='topic+weight_plot.default'></span><span id='topic+weight_plot.setup_weight_plot'></span>

<h3>Description</h3>

<p>Produce a diagnostic plot of the regression weights from robust mediation
analysis.  This plot allows to easily detect deviations from normality
assumptions such as skewness or heavy tails.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weight_plot(object, ...)

## Default S3 method:
weight_plot(object, outcome = NULL, npoints = 1000, ...)

## S3 method for class 'setup_weight_plot'
weight_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weight_plot_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+fit_mediation">fit_mediation</a>"</code>
or <code>"<a href="#topic+test_mediation">test_mediation</a>"</code> containing results from robust mediation
analysis.  Only mediation analysis objects fitted with the robust
MM-estimator are supported.</p>
</td></tr>
<tr><td><code id="weight_plot_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td></tr>
<tr><td><code id="weight_plot_+3A_outcome">outcome</code></td>
<td>
<p>a character vector specifying the outcome variables of the
regressions to be included in the plot.  This must be a subset of the
hypothesized mediators and the dependent variable, or <code>NULL</code> (the
default) to include all regressions of the mediation model.</p>
</td></tr>
<tr><td><code id="weight_plot_+3A_npoints">npoints</code></td>
<td>
<p>the number of grid points used to evaluate and draw the
expected percentages.  The default is to use 1000 grid points.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The horizontal axis contains different weight thresholds, and the vertical
axis displays the percentage of observations that have a weight below this
threshold.  For comparison, a reference line is drawn for the expected
percentages under normally distributed errors.  Observations with negative
and positive residuals are shown separately to make it possible to
distinguish between symmetric and asymmetric deviations from normality.
</p>
<p>If the plot reveals more downweighted observations than expected, but
roughly the same amounts in both tails, the residual distribution is
symmetric but with heavy tails.  If the plot shows that observations in one
tail are downweighted more heavily than those in the other tail, the
residual distribution is skewed.
</p>


<h3>Value</h3>

<p>An object inheriting from class <code>"<a href="ggplot2.html#topic+ggplot">ggplot</a>"</code>.
</p>


<h3>Note</h3>

<p>The current implementation is a slight hack of <span class="pkg">ggplot2</span> and the
<span class="pkg">grid</span> graphics system in order to revert the horizontal axis only in
the panels for observations with postive residuals.  It is therefore not
possible to change the horizontal axis with
<code><a href="ggplot2.html#topic+scale_x_continuous">scale_x_continuous</a>()</code>.
</p>
<p>The implementation may change in the future if the required functionality
becomes available in <span class="pkg">ggplot2</span>.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span class="rlang"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1&ndash;45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fit_mediation">fit_mediation</a>()</code>, <code><a href="#topic+test_mediation">test_mediation</a>()</code>,
<code><a href="#topic+setup_weight_plot">setup_weight_plot</a>()</code>
</p>
<p><code><a href="#topic+ci_plot">ci_plot</a>()</code>, <code><a href="#topic+density_plot">density_plot</a>()</code>,
<code><a href="#topic+ellipse_plot">ellipse_plot</a>()</code>, <code><a href="#topic+plot-methods">plot</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# create diagnostic plot of robust regression weights
weight_plot(boot) +
  scale_color_manual("", values = c("black", "#00BFC4")) +
  theme(legend.position = "top")

# plot only the regression model for the hypothesized mediator
weight_plot(boot, outcome = "TaskConflict") +
  scale_color_manual("", values = c("black", "#00BFC4")) +
  theme(legend.position = "top")

</code></pre>

<hr>
<h2 id='weights.cov_Huber'>Robustness weights of Huber M-estimation of location and scatter</h2><span id='topic+weights.cov_Huber'></span>

<h3>Description</h3>

<p>Extract (relative) robustness weights of a Huber M-estimate of location and
scatter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cov_Huber'
weights(object, type = c("consistent", "relative"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weights.cov_Huber_+3A_object">object</code></td>
<td>
<p>an object inheriting from class <code>"<a href="#topic+cov_Huber">cov_Huber</a>"</code>
containing Huber M-estimates of location and scatter.</p>
</td></tr>
<tr><td><code id="weights.cov_Huber_+3A_type">type</code></td>
<td>
<p>a character string specifying the type of robustness weights to
be extracted.  Possible values are <code>"consistent"</code> and
<code>"relative"</code>.  The former can be used for a robust transformation of
the data such that the covariance matrix of the transformed data is Fisher
consistent.  Observations that are not downweighted in general receive a
weight larger than 1.  The latter are useful for interpretation, as
observations that are not downweighted receive a relative weight of 1.</p>
</td></tr>
<tr><td><code id="weights.cov_Huber_+3A_...">...</code></td>
<td>
<p>additional arguments are currently ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vetor containing the requested robustness weights.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Zu, J. and Yuan, K.-H. (2010) Local Influence and Robust Procedures for
Mediation Analysis.  <em>Multivariate Behavioral Research</em>, <b>45</b>(1),
1&ndash;44.  doi:10.1080/00273170903504695.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cov_Huber">cov_Huber</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("BSG2014")

# define variables
x &lt;- "ValueDiversity"
y &lt;- "TeamCommitment"
m &lt;- "TaskConflict"

# compute Huber M-estimator
S &lt;- cov_Huber(BSG2014[, c(x, y, m)])
weights(S, type = "relative")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
