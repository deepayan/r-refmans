<!DOCTYPE html><html><head><title>Help for package DBItest</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DBItest}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DBItest-package'><p>DBItest: Testing DBI Backends</p></a></li>
<li><a href='#make_context'><p>Test contexts</p></a></li>
<li><a href='#make_placeholder_fun'><p>Create a function that creates n placeholders</p></a></li>
<li><a href='#spec_arrow_append_table_arrow'><p>spec_arrow_append_table_arrow</p></a></li>
<li><a href='#spec_arrow_create_table_arrow'><p>spec_arrow_create_table_arrow</p></a></li>
<li><a href='#spec_arrow_fetch_arrow'><p>spec_arrow_fetch_arrow</p></a></li>
<li><a href='#spec_arrow_fetch_arrow_chunk'><p>spec_arrow_fetch_arrow_chunk</p></a></li>
<li><a href='#spec_arrow_get_query_arrow'><p>spec_arrow_get_query_arrow</p></a></li>
<li><a href='#spec_arrow_read_table_arrow'><p>spec_arrow_read_table_arrow</p></a></li>
<li><a href='#spec_arrow_send_query_arrow'><p>spec_result_send_query</p></a></li>
<li><a href='#spec_arrow_write_table_arrow'><p>spec_arrow_write_table_arrow</p></a></li>
<li><a href='#spec_compliance_methods'><p>spec_compliance_methods</p></a></li>
<li><a href='#spec_connection_disconnect'><p>spec_connection_disconnect</p></a></li>
<li><a href='#spec_driver_connect'><p>spec_driver_connect</p></a></li>
<li><a href='#spec_driver_constructor'><p>spec_driver_constructor</p></a></li>
<li><a href='#spec_driver_data_type'><p>spec_driver_data_type</p></a></li>
<li><a href='#spec_get_info'><p>spec_driver_get_info</p></a></li>
<li><a href='#spec_getting_started'><p>spec_getting_started</p></a></li>
<li><a href='#spec_meta_bind'><p>spec_meta_bind</p></a></li>
<li><a href='#spec_meta_column_info'><p>spec_meta_column_info</p></a></li>
<li><a href='#spec_meta_get_row_count'><p>spec_meta_get_row_count</p></a></li>
<li><a href='#spec_meta_get_rows_affected'><p>spec_meta_get_rows_affected</p></a></li>
<li><a href='#spec_meta_get_statement'><p>spec_meta_get_statement</p></a></li>
<li><a href='#spec_meta_has_completed'><p>spec_meta_has_completed</p></a></li>
<li><a href='#spec_meta_is_valid'><p>spec_meta_is_valid</p></a></li>
<li><a href='#spec_result_clear_result'><p>spec_result_clear_result</p></a></li>
<li><a href='#spec_result_create_table_with_data_type'><p>spec_result_create_table_with_data_type</p></a></li>
<li><a href='#spec_result_execute'><p>spec_result_execute</p></a></li>
<li><a href='#spec_result_fetch'><p>spec_result_fetch</p></a></li>
<li><a href='#spec_result_get_query'><p>spec_result_get_query</p></a></li>
<li><a href='#spec_result_roundtrip'><p>spec_result_roundtrip</p></a></li>
<li><a href='#spec_result_send_query'><p>spec_result_send_query</p></a></li>
<li><a href='#spec_result_send_statement'><p>spec_result_send_statement</p></a></li>
<li><a href='#spec_sql_append_table'><p>spec_sql_append_table</p></a></li>
<li><a href='#spec_sql_create_table'><p>spec_sql_create_table</p></a></li>
<li><a href='#spec_sql_exists_table'><p>spec_sql_exists_table</p></a></li>
<li><a href='#spec_sql_list_fields'><p>spec_sql_list_fields</p></a></li>
<li><a href='#spec_sql_list_objects'><p>spec_sql_list_objects</p></a></li>
<li><a href='#spec_sql_list_tables'><p>spec_sql_list_tables</p></a></li>
<li><a href='#spec_sql_quote_identifier'><p>spec_sql_quote_identifier</p></a></li>
<li><a href='#spec_sql_quote_literal'><p>spec_sql_quote_literal</p></a></li>
<li><a href='#spec_sql_quote_string'><p>spec_sql_quote_string</p></a></li>
<li><a href='#spec_sql_read_table'><p>spec_sql_read_table</p></a></li>
<li><a href='#spec_sql_remove_table'><p>spec_sql_remove_table</p></a></li>
<li><a href='#spec_sql_unquote_identifier'><p>spec_sql_unquote_identifier</p></a></li>
<li><a href='#spec_sql_write_table'><p>spec_sql_write_table</p></a></li>
<li><a href='#spec_transaction_begin_commit_rollback'><p>spec_transaction_begin_commit_rollback</p></a></li>
<li><a href='#spec_transaction_with_transaction'><p>spec_transaction_with_transaction</p></a></li>
<li><a href='#test_all'><p>Run all tests</p></a></li>
<li><a href='#test_arrow'><p>Test Arrow methods</p></a></li>
<li><a href='#test_compliance'><p>Test full compliance to DBI</p></a></li>
<li><a href='#test_connection'><p>Test the &quot;Connection&quot; class</p></a></li>
<li><a href='#test_data_type'><p>test_data_type</p></a></li>
<li><a href='#test_driver'><p>Test the &quot;Driver&quot; class</p></a></li>
<li><a href='#test_getting_started'><p>Getting started with testing</p></a></li>
<li><a href='#test_meta'><p>Test metadata functions</p></a></li>
<li><a href='#test_result'><p>Test the &quot;Result&quot; class</p></a></li>
<li><a href='#test_sql'><p>Test SQL methods</p></a></li>
<li><a href='#test_stress'><p>Stress tests</p></a></li>
<li><a href='#test_transaction'><p>Test transaction functions</p></a></li>
<li><a href='#tweaks'><p>Tweaks for DBI tests</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Testing DBI Backends</td>
</tr>
<tr>
<td>Version:</td>
<td>1.8.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-31</td>
</tr>
<tr>
<td>Description:</td>
<td>A helper that tests DBI back ends for conformity to the
    interface.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-2.1">LGPL-2.1</a> | <a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a> [expanded from: LGPL (&ge; 2.1)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://dbitest.r-dbi.org">https://dbitest.r-dbi.org</a>, <a href="https://github.com/r-dbi/DBItest">https://github.com/r-dbi/DBItest</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-dbi/DBItest/issues">https://github.com/r-dbi/DBItest/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>blob (&ge; 1.2.0), callr, DBI (&ge; 1.2.1), desc, hms (&ge; 0.5.0),
lubridate, magrittr, methods, nanoarrow, palmerpenguins, rlang
(&ge; 0.2.0), testthat (&ge; 2.0.0), utils, withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>clipr, constructive, debugme, devtools, knitr, lintr,
pkgload, rmarkdown, RSQLite</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>r-dbi/dbitemplate</td>
</tr>
<tr>
<td>Config/autostyle/scope:</td>
<td>line_breaks</td>
</tr>
<tr>
<td>Config/autostyle/strict:</td>
<td>false</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/Needs/check:</td>
<td>decor</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>KeepSource:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Collate:</td>
<td>'DBItest.R' 'compat-purrr.R' 'context.R' 'dbi.R' 'dummy.R'
'expectations.R' 'generics.R' 'import-dbi.R'
'import-testthat.R' 'run.R' 's4.R' 'spec-getting-started.R'
'spec-compliance-methods.R' 'spec-driver-constructor.R'
'spec-driver-data-type.R' 'spec-connection-data-type.R'
'spec-result-create-table-with-data-type.R'
'spec-driver-connect.R' 'spec-connection-disconnect.R'
'spec-result-send-query.R' 'spec-result-fetch.R'
'spec-result-roundtrip.R' 'spec-result-clear-result.R'
'spec-result-get-query.R' 'spec-result-send-statement.R'
'spec-result-execute.R' 'spec-sql-quote-string.R'
'spec-sql-quote-literal.R' 'spec-sql-quote-identifier.R'
'spec-sql-unquote-identifier.R' 'spec-sql-read-table.R'
'spec-sql-create-table.R' 'spec-sql-append-table.R'
'spec-sql-write-table.R' 'spec-sql-list-tables.R'
'spec-sql-exists-table.R' 'spec-sql-remove-table.R'
'spec-sql-list-objects.R' 'spec-meta-bind-runner.R'
'spec-meta-bind-formals.R' 'spec-meta-bind-expr.R'
'spec-meta-bind.R' 'spec-meta-bind-arrow.R'
'spec-meta-bind-stream.R' 'spec-meta-bind-arrow-stream.R'
'spec-meta-bind-.R' 'spec-meta-is-valid.R'
'spec-meta-has-completed.R' 'spec-meta-get-statement.R'
'spec-meta-get-row-count.R' 'spec-meta-get-rows-affected.R'
'spec-transaction-begin-commit-rollback.R'
'spec-transaction-with-transaction.R'
'spec-arrow-send-query-arrow.R' 'spec-arrow-fetch-arrow.R'
'spec-arrow-fetch-arrow-chunk.R' 'spec-arrow-get-query-arrow.R'
'spec-arrow-read-table-arrow.R'
'spec-arrow-write-table-arrow.R'
'spec-arrow-create-table-arrow.R'
'spec-arrow-append-table-arrow.R' 'spec-arrow-bind.R'
'spec-arrow-roundtrip.R' 'spec-driver-get-info.R'
'spec-connection-get-info.R' 'spec-sql-list-fields.R'
'spec-meta-column-info.R' 'spec-meta-get-info-result.R'
'spec-driver.R' 'spec-connection.R' 'spec-result.R'
'spec-sql.R' 'spec-meta.R' 'spec-arrow.R' 'spec-transaction.R'
'spec-compliance.R' 'spec-stress-connection.R' 'spec-stress.R'
'spec-all.R' 'spec-.R' 'test-all.R' 'test-getting-started.R'
'test-driver.R' 'test-connection.R' 'test-result.R'
'test-sql.R' 'test-meta.R' 'test-transaction.R' 'test-arrow.R'
'test-compliance.R' 'test-stress.R' 'test_backend.R' 'tweaks.R'
'utf8.R' 'utils.R' 'zzz.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-31 09:56:36 UTC; kirill</td>
</tr>
<tr>
<td>Author:</td>
<td>Kirill Müller <a href="https://orcid.org/0000-0002-1416-3412"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  RStudio [cph],
  R Consortium [fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kirill Müller &lt;kirill@cynkra.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-31 11:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='DBItest-package'>DBItest: Testing DBI Backends</h2><span id='topic+DBItest'></span><span id='topic+DBItest-package'></span>

<h3>Description</h3>

<p>A helper that tests DBI back ends for conformity to the interface.
</p>


<h3>Details</h3>

<p>The two most important functions are <code><a href="#topic+make_context">make_context()</a></code> and
<code><a href="#topic+test_all">test_all()</a></code>.  The former tells the package how to connect to your
DBI backend, the latter executes all tests of the test suite. More
fine-grained test functions (all with prefix <code>test_</code>) are available.
</p>
<p>See the package's vignette for more details.
</p>


<h3>Author(s)</h3>

<p>Kirill Müller
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://dbitest.r-dbi.org">https://dbitest.r-dbi.org</a>
</p>
</li>
<li> <p><a href="https://github.com/r-dbi/DBItest">https://github.com/r-dbi/DBItest</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-dbi/DBItest/issues">https://github.com/r-dbi/DBItest/issues</a>
</p>
</li></ul>


<hr>
<h2 id='make_context'>Test contexts</h2><span id='topic+make_context'></span><span id='topic+set_default_context'></span><span id='topic+get_default_context'></span>

<h3>Description</h3>

<p>Create a test context, set and query the default context.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_context(
  drv,
  connect_args = NULL,
  set_as_default = TRUE,
  tweaks = NULL,
  name = NULL,
  default_skip = NULL
)

set_default_context(ctx)

get_default_context()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_context_+3A_drv">drv</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBIConnector]&#8288;</code><br />
An object of class <a href="DBI.html#topic+DBIConnector-class">DBIConnector</a> that describes how to connect
to the database.</p>
</td></tr>
<tr><td><code id="make_context_+3A_connect_args">connect_args</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[named list]&#8288;</code><br /> Deprecated.</p>
</td></tr>
<tr><td><code id="make_context_+3A_set_as_default">set_as_default</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code><br /> Should the created context be
set as default context?</p>
</td></tr>
<tr><td><code id="make_context_+3A_tweaks">tweaks</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_tweaks]&#8288;</code><br /> Tweaks as constructed by the
<code><a href="#topic+tweaks">tweaks()</a></code> function.</p>
</td></tr>
<tr><td><code id="make_context_+3A_name">name</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code><br /> An optional name of the context which will
be used in test messages.</p>
</td></tr>
<tr><td><code id="make_context_+3A_default_skip">default_skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code><br /> Default value of <code>skip</code> argument
to <code><a href="#topic+test_all">test_all()</a></code>  and other testing functions.</p>
</td></tr>
<tr><td><code id="make_context_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context, for
<code>set_default_context</code> the previous default context (invisibly) or
<code>NULL</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
make_context(
  new(
    "DBIConnector",
    .drv = RSQLite::SQLite(),
    .conn_args = list(dbname = tempfile("DBItest", fileext = ".sqlite"))
  ),
  tweaks = tweaks(
    constructor_relax_args = TRUE,
    placeholder_pattern = c("?", "$1", "$name", ":name"),
    date_cast = function(x) paste0("'", x, "'"),
    time_cast = function(x) paste0("'", x, "'"),
    timestamp_cast = function(x) paste0("'", x, "'"),
    logical_return = function(x) as.integer(x),
    date_typed = FALSE,
    time_typed = FALSE,
    timestamp_typed = FALSE
  ),
  default_skip = c("roundtrip_date", "roundtrip_timestamp")
)

</code></pre>

<hr>
<h2 id='make_placeholder_fun'>Create a function that creates n placeholders</h2><span id='topic+make_placeholder_fun'></span>

<h3>Description</h3>

<p>For internal use by the <code>placeholder_format</code> tweak.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_placeholder_fun(pattern)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_placeholder_fun_+3A_pattern">pattern</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br /> Any character, optionally followed by <code>1</code> or <code>name</code>. Examples: <code>"?"</code>, <code>"$1"</code>, <code>":name"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code style="white-space: pre;">&#8288;[function(n)]&#8288;</code><br /> A function with one argument <code>n</code> that
returns a vector of length <code>n</code> with placeholders of the specified format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>body(DBItest:::make_placeholder_fun("?"))
DBItest:::make_placeholder_fun("?")(2)
DBItest:::make_placeholder_fun("$1")(3)
DBItest:::make_placeholder_fun(":name")(5)
</code></pre>

<hr>
<h2 id='spec_arrow_append_table_arrow'>spec_arrow_append_table_arrow</h2><span id='topic+spec_arrow_append_table_arrow'></span>

<h3>Description</h3>

<p>spec_arrow_append_table_arrow
</p>


<h3>Value</h3>

<p><code>dbAppendTableArrow()</code> returns a
scalar
numeric.
</p>


<h3>Failure modes</h3>

<p>If the table does not exist,
or the new data in <code>values</code> is not a data frame or has different column names,
an error is raised; the remote table remains unchanged.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
</p>


<h3>Specification</h3>

<p>SQL keywords can be used freely in table names, column names, and data.
Quotes, commas, spaces, and other special characters such as newlines and tabs,
can also be used in the data,
and, if the database supports non-syntactic identifiers,
also for table names
and column names.
</p>
<p>The following data types must be supported at least,
and be read identically with <code><a href="DBI.html#topic+dbReadTable">dbReadTable()</a></code>:
</p>

<ul>
<li><p> integer
</p>
</li>
<li><p> numeric
(the behavior for <code>Inf</code> and <code>NaN</code> is not specified)
</p>
</li>
<li><p> logical
</p>
</li>
<li> <p><code>NA</code> as NULL
</p>
</li>
<li><p> 64-bit values (using <code>"bigint"</code> as field type); the result can be
</p>

<ul>
<li><p> converted to a numeric, which may lose precision,
</p>
</li>
<li><p> converted a character vector, which gives the full decimal
representation
</p>
</li>
<li><p> written to another table and read again unchanged
</p>
</li></ul>

</li>
<li><p> character (in both UTF-8
and native encodings),
supporting empty strings
(before and after non-empty strings)
</p>
</li>
<li><p> factor (possibly returned as character)
</p>
</li>
<li><p> objects of type <a href="blob.html#topic+blob">blob::blob</a>
(if supported by the database)
</p>
</li>
<li><p> date
(if supported by the database;
returned as <code>Date</code>)
also for dates prior to 1970 or 1900 or after 2038
</p>
</li>
<li><p> time
(if supported by the database;
returned as objects that inherit from <code>difftime</code>)
</p>
</li>
<li><p> timestamp
(if supported by the database;
returned as <code>POSIXct</code>
respecting the time zone but not necessarily preserving the
input time zone),
also for timestamps prior to 1970 or 1900 or after 2038
respecting the time zone but not necessarily preserving the
input time zone)
</p>
</li></ul>

<p>Mixing column types in the same table is supported.
</p>
<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbAppendTableArrow()</code> will do the quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
to support databases that allow non-syntactic names for their objects:
</p>
</li></ul>

<p>The <code>value</code> argument must be a data frame
with a subset of the columns of the existing table.
The order of the columns does not matter.
</p>


<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_arrow_create_table_arrow'>spec_arrow_create_table_arrow</h2><span id='topic+spec_arrow_create_table_arrow'></span>

<h3>Description</h3>

<p>spec_arrow_create_table_arrow
</p>


<h3>Value</h3>

<p><code>dbCreateTableArrow()</code> returns <code>TRUE</code>, invisibly.
</p>


<h3>Failure modes</h3>

<p>If the table exists, an error is raised; the remote table remains unchanged.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
Invalid values for the <code>temporary</code> argument
(non-scalars,
unsupported data types,
<code>NA</code>,
incompatible values,
duplicate names)
also raise an error.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbCreateTableArrow()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>temporary</code> (default: <code>FALSE</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; and &quot;Value&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbCreateTableArrow()</code> will do the quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>

<p>The <code>value</code> argument can be:
</p>

<ul>
<li><p> a data frame,
</p>
</li>
<li><p> a nanoarrow array
</p>
</li>
<li><p> a nanoarrow array stream
(which will still contain the data after the call)
</p>
</li>
<li><p> a nanoarrow schema
</p>
</li></ul>

<p>If the <code>temporary</code> argument is <code>TRUE</code>, the table is not available in a
second connection and is gone after reconnecting.
Not all backends support this argument.
A regular, non-temporary table is visible in a second connection,
in a pre-existing connection,
and after reconnecting to the database.
</p>
<p>SQL keywords can be used freely in table names, column names, and data.
Quotes, commas, and spaces can also be used  for table names and column names,
if the database supports non-syntactic identifiers.
</p>


<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_arrow_fetch_arrow'>spec_arrow_fetch_arrow</h2><span id='topic+spec_arrow_fetch_arrow'></span>

<h3>Description</h3>

<p>spec_arrow_fetch_arrow
</p>


<h3>Value</h3>

<p><code>dbFetchArrow()</code> always returns an object coercible to a <a href="base.html#topic+data.frame">data.frame</a> with
as many rows as records were fetched and as many
columns as fields in the result set,
even if the result is a single value
or has one
or zero rows.
</p>


<h3>Failure modes</h3>

<p>An attempt to fetch from a closed result set raises an error.
</p>


<h3>Specification</h3>

<p>Fetching multi-row queries with one
or more columns by default returns the entire result.
The object returned by <code>dbFetchArrow()</code> can also be passed to
<code><a href="nanoarrow.html#topic+as_nanoarrow_array_stream">nanoarrow::as_nanoarrow_array_stream()</a></code> to create a nanoarrow
array stream object that can be used to read the result set
in batches.
The chunk size is implementation-specific.
</p>


<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_arrow_fetch_arrow_chunk'>spec_arrow_fetch_arrow_chunk</h2><span id='topic+spec_arrow_fetch_arrow_chunk'></span>

<h3>Description</h3>

<p>spec_arrow_fetch_arrow_chunk
</p>


<h3>Value</h3>

<p><code>dbFetchArrowChunk()</code> always returns an object coercible to a <a href="base.html#topic+data.frame">data.frame</a> with
as many rows as records were fetched and as many
columns as fields in the result set,
even if the result is a single value
or has one
or zero rows.
</p>


<h3>Failure modes</h3>

<p>An attempt to fetch from a closed result set raises an error.
</p>


<h3>Specification</h3>

<p>Fetching multi-row queries with one
or more columns returns the next chunk.
The size of the chunk is implementation-specific.
The object returned by <code>dbFetchArrowChunk()</code> can also be passed to
<code><a href="nanoarrow.html#topic+as_nanoarrow_array">nanoarrow::as_nanoarrow_array()</a></code> to create a nanoarrow array object.
The chunk size is implementation-specific.
</p>


<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_arrow_get_query_arrow'>spec_arrow_get_query_arrow</h2><span id='topic+spec_arrow_get_query_arrow'></span>

<h3>Description</h3>

<p>spec_arrow_get_query_arrow
</p>


<h3>Value</h3>

<p><code>dbGetQueryArrow()</code> always returns an object coercible to a <a href="base.html#topic+data.frame">data.frame</a>, with
as many rows as records were fetched and as many
columns as fields in the result set,
even if the result is a single value
or has one
or zero rows.
</p>


<h3>Failure modes</h3>

<p>An error is raised when issuing a query over a closed
or invalid connection,
if the syntax of the query is invalid,
or if the query is not a non-<code>NA</code> string.
The object returned by <code>dbGetQueryArrow()</code> can also be passed to
<code><a href="nanoarrow.html#topic+as_nanoarrow_array_stream">nanoarrow::as_nanoarrow_array_stream()</a></code> to create a nanoarrow
array stream object that can be used to read the result set
in batches.
The chunk size is implementation-specific.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbGetQueryArrow()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>params</code> (default: <code>NULL</code>)
</p>
</li>
<li> <p><code>immediate</code> (default: <code>NULL</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; and &quot;Value&quot; sections for details on their usage.
</p>
<p>The <code>param</code> argument allows passing query parameters, see <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> for details.
</p>


<h3>Specification for the <code>immediate</code> argument</h3>

<p>The <code>immediate</code> argument supports distinguishing between &quot;direct&quot;
and &quot;prepared&quot; APIs offered by many database drivers.
Passing <code>immediate = TRUE</code> leads to immediate execution of the
query or statement, via the &quot;direct&quot; API (if supported by the driver).
The default <code>NULL</code> means that the backend should choose whatever API
makes the most sense for the database, and (if relevant) tries the
other API if the first attempt fails. A successful second attempt
should result in a message that suggests passing the correct
<code>immediate</code> argument.
Examples for possible behaviors:
</p>

<ol>
<li><p> DBI backend defaults to <code>immediate = TRUE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed: query is executed
</p>
</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: rejected immediately by the database
because of a syntax error in the query, the backend tries
<code>immediate = FALSE</code> (and gives a message)
</p>
</li>
<li> <p><code>params</code> given: query is executed using <code>immediate = FALSE</code>
</p>
</li></ol>

</li></ol>

</li>
<li><p> DBI backend defaults to <code>immediate = FALSE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed:
</p>

<ol>
<li><p> simple query: query is executed
</p>
</li>
<li><p> &quot;special&quot; query (such as setting a config options): fails,
the backend tries <code>immediate = TRUE</code> (and gives a message)
</p>
</li></ol>

</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: waiting for parameters via <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>
</p>
</li>
<li> <p><code>params</code> given: query is executed
</p>
</li></ol>

</li></ol>

</li></ol>



<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_arrow_read_table_arrow'>spec_arrow_read_table_arrow</h2><span id='topic+spec_arrow_read_table_arrow'></span>

<h3>Description</h3>

<p>spec_arrow_read_table_arrow
</p>


<h3>Value</h3>

<p><code>dbReadTableArrow()</code> returns an Arrow object that contains the complete data
from the remote table, effectively the result of calling <code><a href="DBI.html#topic+dbGetQueryArrow">dbGetQueryArrow()</a></code> with
<code style="white-space: pre;">&#8288;SELECT * FROM &lt;name&gt;&#8288;</code>.
</p>
<p>An empty table is returned as an Arrow object with zero rows.
</p>


<h3>Failure modes</h3>

<p>An error is raised if the table does not exist.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbReadTableArrow()</code> will do the
quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>



<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_arrow_send_query_arrow'>spec_result_send_query</h2><span id='topic+spec_arrow_send_query_arrow'></span>

<h3>Description</h3>

<p>spec_result_send_query
</p>


<h3>Value</h3>

<p><code>dbSendQueryArrow()</code> returns
an S4 object that inherits from <a href="DBI.html#topic+DBIResultArrow-class">DBIResultArrow</a>.
The result set can be used with <code><a href="DBI.html#topic+dbFetchArrow">dbFetchArrow()</a></code> to extract records.
Once you have finished using a result, make sure to clear it
with <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>.
</p>


<h3>Failure modes</h3>

<p>An error is raised when issuing a query over a closed
or invalid connection,
or if the query is not a non-<code>NA</code> string.
An error is also raised if the syntax of the query is invalid
and all query parameters are given (by passing the <code>params</code> argument)
or the <code>immediate</code> argument is set to <code>TRUE</code>.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbSendQueryArrow()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>params</code> (default: <code>NULL</code>)
</p>
</li>
<li> <p><code>immediate</code> (default: <code>NULL</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>No warnings occur under normal conditions.
When done, the DBIResult object must be cleared with a call to
<code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>.
Failure to clear the result set leads to a warning
when the connection is closed.
</p>
<p>If the backend supports only one open result set per connection,
issuing a second query invalidates an already open result set
and raises a warning.
The newly opened result set is valid
and must be cleared with <code>dbClearResult()</code>.
</p>
<p>The <code>param</code> argument allows passing query parameters, see <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> for details.
</p>


<h3>Specification for the <code>immediate</code> argument</h3>

<p>The <code>immediate</code> argument supports distinguishing between &quot;direct&quot;
and &quot;prepared&quot; APIs offered by many database drivers.
Passing <code>immediate = TRUE</code> leads to immediate execution of the
query or statement, via the &quot;direct&quot; API (if supported by the driver).
The default <code>NULL</code> means that the backend should choose whatever API
makes the most sense for the database, and (if relevant) tries the
other API if the first attempt fails. A successful second attempt
should result in a message that suggests passing the correct
<code>immediate</code> argument.
Examples for possible behaviors:
</p>

<ol>
<li><p> DBI backend defaults to <code>immediate = TRUE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed: query is executed
</p>
</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: rejected immediately by the database
because of a syntax error in the query, the backend tries
<code>immediate = FALSE</code> (and gives a message)
</p>
</li>
<li> <p><code>params</code> given: query is executed using <code>immediate = FALSE</code>
</p>
</li></ol>

</li></ol>

</li>
<li><p> DBI backend defaults to <code>immediate = FALSE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed:
</p>

<ol>
<li><p> simple query: query is executed
</p>
</li>
<li><p> &quot;special&quot; query (such as setting a config options): fails,
the backend tries <code>immediate = TRUE</code> (and gives a message)
</p>
</li></ol>

</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: waiting for parameters via <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>
</p>
</li>
<li> <p><code>params</code> given: query is executed
</p>
</li></ol>

</li></ol>

</li></ol>



<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_arrow_write_table_arrow'>spec_arrow_write_table_arrow</h2><span id='topic+spec_arrow_write_table_arrow'></span>

<h3>Description</h3>

<p>spec_arrow_write_table_arrow
</p>


<h3>Value</h3>

<p><code>dbWriteTableArrow()</code> returns <code>TRUE</code>, invisibly.
</p>


<h3>Failure modes</h3>

<p>If the table exists, and both <code>append</code> and <code>overwrite</code> arguments are unset,
or <code>append = TRUE</code> and the data frame with the new data has different
column names,
an error is raised; the remote table remains unchanged.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
Invalid values for the additional arguments
<code>overwrite</code>, <code>append</code>, and <code>temporary</code>
(non-scalars,
unsupported data types,
<code>NA</code>,
incompatible values,
incompatible columns)
also raise an error.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbWriteTableArrow()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>overwrite</code> (default: <code>FALSE</code>)
</p>
</li>
<li> <p><code>append</code> (default: <code>FALSE</code>)
</p>
</li>
<li> <p><code>temporary</code> (default: <code>FALSE</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; and &quot;Value&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbWriteTableArrow()</code> will do the quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>

<p>The <code>value</code> argument must be a data frame
with a subset of the columns of the existing table if <code>append = TRUE</code>.
The order of the columns does not matter with <code>append = TRUE</code>.
</p>
<p>If the <code>overwrite</code> argument is <code>TRUE</code>, an existing table of the same name
will be overwritten.
This argument doesn't change behavior if the table does not exist yet.
</p>
<p>If the <code>append</code> argument is <code>TRUE</code>, the rows in an existing table are
preserved, and the new data are appended.
If the table doesn't exist yet, it is created.
</p>
<p>If the <code>temporary</code> argument is <code>TRUE</code>, the table is not available in a
second connection and is gone after reconnecting.
Not all backends support this argument.
A regular, non-temporary table is visible in a second connection,
in a pre-existing connection,
and after reconnecting to the database.
</p>
<p>SQL keywords can be used freely in table names, column names, and data.
Quotes, commas, spaces, and other special characters such as newlines and tabs,
can also be used in the data,
and, if the database supports non-syntactic identifiers,
also for table names
and column names.
</p>
<p>The following data types must be supported at least,
and be read identically with <code><a href="DBI.html#topic+dbReadTable">dbReadTable()</a></code>:
</p>

<ul>
<li><p> integer
</p>
</li>
<li><p> numeric
(the behavior for <code>Inf</code> and <code>NaN</code> is not specified)
</p>
</li>
<li><p> logical
</p>
</li>
<li> <p><code>NA</code> as NULL
</p>
</li>
<li><p> 64-bit values (using <code>"bigint"</code> as field type); the result can be
</p>

<ul>
<li><p> converted to a numeric, which may lose precision,
</p>
</li>
<li><p> converted a character vector, which gives the full decimal
representation
</p>
</li>
<li><p> written to another table and read again unchanged
</p>
</li></ul>

</li>
<li><p> character (in both UTF-8
and native encodings),
supporting empty strings
before and after a non-empty string
</p>
</li>
<li><p> factor (possibly returned as character)
</p>
</li>
<li><p> objects of type <a href="blob.html#topic+blob">blob::blob</a>
(if supported by the database)
</p>
</li>
<li><p> date
(if supported by the database;
returned as <code>Date</code>),
also for dates prior to 1970 or 1900 or after 2038
</p>
</li>
<li><p> time
(if supported by the database;
returned as objects that inherit from <code>difftime</code>)
</p>
</li>
<li><p> timestamp
(if supported by the database;
returned as <code>POSIXct</code>
respecting the time zone but not necessarily preserving the
input time zone),
also for timestamps prior to 1970 or 1900 or after 2038
respecting the time zone but not necessarily preserving the
input time zone)
</p>
</li></ul>

<p>Mixing column types in the same table is supported.
</p>


<h3>See Also</h3>

<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>
</p>

<hr>
<h2 id='spec_compliance_methods'>spec_compliance_methods</h2><span id='topic+spec_compliance_methods'></span>

<h3>Description</h3>

<p>spec_compliance_methods
</p>


<h3>DBI classes and methods</h3>

<p>A backend defines three classes,
which are subclasses of
<a href="DBI.html#topic+DBIDriver-class">DBIDriver</a>,
<a href="DBI.html#topic+DBIConnection-class">DBIConnection</a>,
and <a href="DBI.html#topic+DBIResult-class">DBIResult</a>.
The backend provides implementation for all methods
of these base classes
that are defined but not implemented by DBI.
All methods defined in <span class="pkg">DBI</span> are reexported (so that the package can
be used without having to attach <span class="pkg">DBI</span>),
and have an ellipsis <code>...</code> in their formals for extensibility.
</p>

<hr>
<h2 id='spec_connection_disconnect'>spec_connection_disconnect</h2><span id='topic+spec_connection_disconnect'></span>

<h3>Description</h3>

<p>spec_connection_disconnect
</p>


<h3>Value</h3>

<p><code>dbDisconnect()</code> returns <code>TRUE</code>, invisibly.
</p>


<h3>Failure modes</h3>

<p>A warning is issued on garbage collection when a connection has been
released without calling <code>dbDisconnect()</code>,
but this cannot be tested automatically.
At least one warning is issued immediately when calling <code>dbDisconnect()</code> on an
already disconnected
or invalid connection.
</p>


<h3>See Also</h3>

<p>Other connection specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>
</p>

<hr>
<h2 id='spec_driver_connect'>spec_driver_connect</h2><span id='topic+spec_driver_connect'></span>

<h3>Description</h3>

<p>spec_driver_connect
</p>


<h3>Value</h3>

<p><code>dbConnect()</code> returns an S4 object that inherits from <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a>.
This object is used to communicate with the database engine.
</p>
<p>A <code><a href="base.html#topic+format">format()</a></code> method is defined for the connection object.
It returns a string that consists of a single line of text.
</p>


<h3>Specification</h3>

<p>DBI recommends using the following argument names for authentication
parameters, with <code>NULL</code> default:
</p>

<ul>
<li> <p><code>user</code> for the user name (default: current user)
</p>
</li>
<li> <p><code>password</code> for the password
</p>
</li>
<li> <p><code>host</code> for the host name (default: local connection)
</p>
</li>
<li> <p><code>port</code> for the port number (default: local connection)
</p>
</li>
<li> <p><code>dbname</code> for the name of the database on the host, or the database file
name
</p>
</li></ul>

<p>The defaults should provide reasonable behavior, in particular a
local connection for <code>host = NULL</code>.  For some DBMS (e.g., PostgreSQL),
this is different to a TCP/IP connection to <code>localhost</code>.
</p>
<p>In addition, DBI supports the <code>bigint</code> argument that governs how
64-bit integer data is returned.  The following values are supported:
</p>

<ul>
<li> <p><code>"integer"</code>: always return as <code>integer</code>, silently overflow
</p>
</li>
<li> <p><code>"numeric"</code>: always return as <code>numeric</code>, silently round
</p>
</li>
<li> <p><code>"character"</code>: always return the decimal representation as <code>character</code>
</p>
</li>
<li> <p><code>"integer64"</code>: return as a data type that can be coerced using
<code><a href="base.html#topic+as.integer">as.integer()</a></code> (with warning on overflow), <code><a href="base.html#topic+as.numeric">as.numeric()</a></code>
and <code><a href="base.html#topic+as.character">as.character()</a></code>
</p>
</li></ul>



<h3>See Also</h3>

<p>Other driver specifications: 
<code><a href="#topic+spec_driver_constructor">spec_driver_constructor</a></code>,
<code><a href="#topic+spec_driver_data_type">spec_driver_data_type</a></code>,
<code><a href="#topic+spec_get_info">spec_get_info</a></code>
</p>

<hr>
<h2 id='spec_driver_constructor'>spec_driver_constructor</h2><span id='topic+spec_driver_constructor'></span>

<h3>Description</h3>

<p>spec_driver_constructor
</p>


<h3>Construction of the DBIDriver object</h3>

<p>The backend must support creation of an instance of its <a href="DBI.html#topic+DBIDriver-class">DBIDriver</a> subclass
with a <dfn>constructor function</dfn>.
By default, its name is the package name without the leading &lsquo;R&rsquo;
(if it exists), e.g., <code>SQLite</code> for the <span class="pkg">RSQLite</span> package.
However, backend authors may choose a different name.
The constructor must be exported, and
it must be a function
that is callable without arguments.
DBI recommends to define a constructor with an empty argument list.
</p>


<h3>See Also</h3>

<p>Other driver specifications: 
<code><a href="#topic+spec_driver_connect">spec_driver_connect</a></code>,
<code><a href="#topic+spec_driver_data_type">spec_driver_data_type</a></code>,
<code><a href="#topic+spec_get_info">spec_get_info</a></code>
</p>

<hr>
<h2 id='spec_driver_data_type'>spec_driver_data_type</h2><span id='topic+spec_driver_data_type'></span>

<h3>Description</h3>

<p>spec_driver_data_type
</p>


<h3>Value</h3>

<p><code>dbDataType()</code> returns the SQL type that corresponds to the <code>obj</code> argument
as a non-empty
character string.
For data frames, a character vector with one element per column
is returned.
</p>


<h3>Failure modes</h3>

<p>An error is raised for invalid values for the <code>obj</code> argument such as a
<code>NULL</code> value.
</p>


<h3>Specification</h3>

<p>The backend can override the <code><a href="DBI.html#topic+dbDataType">dbDataType()</a></code> generic
for its driver class.
</p>
<p>This generic expects an arbitrary object as second argument.
To query the values returned by the default implementation,
run <code>example(dbDataType, package = "DBI")</code>.
If the backend needs to override this generic,
it must accept all basic R data types as its second argument, namely
<a href="base.html#topic+logical">logical</a>,
<a href="base.html#topic+integer">integer</a>,
<a href="base.html#topic+numeric">numeric</a>,
<a href="base.html#topic+character">character</a>,
dates (see <a href="base.html#topic+Dates">Dates</a>),
date-time (see <a href="base.html#topic+DateTimeClasses">DateTimeClasses</a>),
and <a href="base.html#topic+difftime">difftime</a>.
If the database supports blobs,
this method also must accept lists of <a href="base.html#topic+raw">raw</a> vectors,
and <a href="blob.html#topic+blob">blob::blob</a> objects.
As-is objects (i.e., wrapped by <code><a href="base.html#topic+I">I()</a></code>) must be
supported and return the same results as their unwrapped counterparts.
The SQL data type for <a href="base.html#topic+factor">factor</a> and
<a href="base.html#topic+ordered">ordered</a> is the same as for character.
The behavior for other object types is not specified.
</p>


<h3>See Also</h3>

<p>Other driver specifications: 
<code><a href="#topic+spec_driver_connect">spec_driver_connect</a></code>,
<code><a href="#topic+spec_driver_constructor">spec_driver_constructor</a></code>,
<code><a href="#topic+spec_get_info">spec_get_info</a></code>
</p>

<hr>
<h2 id='spec_get_info'>spec_driver_get_info</h2><span id='topic+spec_get_info'></span><span id='topic+spec_driver_get_info'></span><span id='topic+spec_connection_get_info'></span><span id='topic+spec_meta_get_info_result'></span>

<h3>Description</h3>

<p>spec_driver_get_info
</p>
<p>spec_connection_get_info
</p>
<p>spec_meta_get_info_result
</p>


<h3>Value</h3>

<p>For objects of class <a href="DBI.html#topic+DBIDriver-class">DBIDriver</a>, <code>dbGetInfo()</code>
returns a named list
that contains at least the following components:
</p>

<ul>
<li> <p><code>driver.version</code>: the package version of the DBI backend,
</p>
</li>
<li> <p><code>client.version</code>: the version of the DBMS client library.
</p>
</li></ul>

<p>For objects of class <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a>, <code>dbGetInfo()</code>
returns a named list
that contains at least the following components:
</p>

<ul>
<li> <p><code>db.version</code>: version of the database server,
</p>
</li>
<li> <p><code>dbname</code>: database name,
</p>
</li>
<li> <p><code>username</code>: username to connect to the database,
</p>
</li>
<li> <p><code>host</code>: hostname of the database server,
</p>
</li>
<li> <p><code>port</code>: port on the database server.
It must not contain a <code>password</code> component.
Components that are not applicable should be set to <code>NA</code>.
</p>
</li></ul>

<p>For objects of class <a href="DBI.html#topic+DBIResult-class">DBIResult</a>, <code>dbGetInfo()</code>
returns a named list
that contains at least the following components:
</p>

<ul>
<li> <p><code>statatment</code>: the statement used with <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code> or <code><a href="DBI.html#topic+dbExecute">dbExecute()</a></code>,
as returned by <code><a href="DBI.html#topic+dbGetStatement">dbGetStatement()</a></code>,
</p>
</li>
<li> <p><code>row.count</code>: the number of rows fetched so far (for queries),
as returned by <code><a href="DBI.html#topic+dbGetRowCount">dbGetRowCount()</a></code>,
</p>
</li>
<li> <p><code>rows.affected</code>: the number of rows affected (for statements),
as returned by <code><a href="DBI.html#topic+dbGetRowsAffected">dbGetRowsAffected()</a></code>
</p>
</li>
<li> <p><code>has.completed</code>: a logical that indicates
if the query or statement has completed,
as returned by <code><a href="DBI.html#topic+dbHasCompleted">dbHasCompleted()</a></code>.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other driver specifications: 
<code><a href="#topic+spec_driver_connect">spec_driver_connect</a></code>,
<code><a href="#topic+spec_driver_constructor">spec_driver_constructor</a></code>,
<code><a href="#topic+spec_driver_data_type">spec_driver_data_type</a></code>
</p>
<p>Other connection specifications: 
<code><a href="#topic+spec_connection_disconnect">spec_connection_disconnect</a></code>
</p>
<p>Other meta specifications: 
<code><a href="#topic+spec_meta_bind">spec_meta_bind</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>

<hr>
<h2 id='spec_getting_started'>spec_getting_started</h2><span id='topic+spec_getting_started'></span>

<h3>Description</h3>

<p>spec_getting_started
</p>


<h3>Definition</h3>

<p>A DBI backend is an R package
which imports the <span class="pkg">DBI</span>
and <span class="pkg">methods</span>
packages.
For better or worse, the names of many existing backends start with
&lsquo;R&rsquo;, e.g., <span class="pkg">RSQLite</span>, <span class="pkg">RMySQL</span>, <span class="pkg">RSQLServer</span>; it is up
to the backend author to adopt this convention or not.
</p>

<hr>
<h2 id='spec_meta_bind'>spec_meta_bind</h2><span id='topic+spec_meta_bind'></span>

<h3>Description</h3>

<p>spec_meta_bind
</p>
<p>spec_meta_bind
</p>
<p>spec_meta_bind
</p>


<h3>Value</h3>

<p><code>dbBind()</code> returns the result set,
invisibly,
for queries issued by <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code> or <code><a href="DBI.html#topic+dbSendQueryArrow">dbSendQueryArrow()</a></code> and
also for data manipulation statements issued by
<code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code>.
</p>


<h3>Specification</h3>

<p><span class="pkg">DBI</span> clients execute parametrized statements as follows:
</p>

<ol>
<li><p> Call <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code>, <code><a href="DBI.html#topic+dbSendQueryArrow">dbSendQueryArrow()</a></code> or <code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code>
with a query or statement that contains placeholders,
store the returned <a href="DBI.html#topic+DBIResult-class">DBIResult</a> object in a variable.
Mixing placeholders (in particular, named and unnamed ones) is not
recommended.
It is good practice to register a call to <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code> via
<code><a href="base.html#topic+on.exit">on.exit()</a></code> right after calling <code>dbSendQuery()</code> or <code>dbSendStatement()</code>
(see the last enumeration item).
Until <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> or <code><a href="DBI.html#topic+dbBindArrow">dbBindArrow()</a></code> have been called,
the returned result set object has the following behavior:
</p>

<ul>
<li> <p><code><a href="DBI.html#topic+dbFetch">dbFetch()</a></code> raises an error (for <code>dbSendQuery()</code> and <code>dbSendQueryArrow()</code>)
</p>
</li>
<li> <p><code><a href="DBI.html#topic+dbGetRowCount">dbGetRowCount()</a></code> returns zero (for <code>dbSendQuery()</code> and <code>dbSendQueryArrow()</code>)
</p>
</li>
<li> <p><code><a href="DBI.html#topic+dbGetRowsAffected">dbGetRowsAffected()</a></code> returns an integer <code>NA</code> (for <code>dbSendStatement()</code>)
</p>
</li>
<li> <p><code><a href="DBI.html#topic+dbIsValid">dbIsValid()</a></code> returns <code>TRUE</code>
</p>
</li>
<li> <p><code><a href="DBI.html#topic+dbHasCompleted">dbHasCompleted()</a></code> returns <code>FALSE</code>
</p>
</li></ul>

</li>
<li><p> Call <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> or <code><a href="DBI.html#topic+dbBindArrow">dbBindArrow()</a></code>:
</p>

<ul>
<li><p> For <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>, the <code>params</code> argument must be a list where all elements
have the same lengths and contain values supported by the backend.
A <a href="base.html#topic+data.frame">data.frame</a> is internally stored as such a list.
</p>
</li>
<li><p> For <code><a href="DBI.html#topic+dbBindArrow">dbBindArrow()</a></code>, the <code>params</code> argument must be a
nanoarrow array stream, with one column per query parameter.
</p>
</li></ul>

</li>
<li><p> Retrieve the data or the number of affected rows from the <code>DBIResult</code> object.
</p>

<ul>
<li><p> For queries issued by <code>dbSendQuery()</code> or <code>dbSendQueryArrow()</code>, call <code><a href="DBI.html#topic+dbFetch">dbFetch()</a></code>.
</p>
</li>
<li><p> For statements issued by <code>dbSendStatements()</code>,
call <code><a href="DBI.html#topic+dbGetRowsAffected">dbGetRowsAffected()</a></code>.
(Execution begins immediately after the <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> call,
the statement is processed entirely before the function returns.)
</p>
</li></ul>

</li>
<li><p> Repeat 2. and 3. as necessary.
</p>
</li>
<li><p> Close the result set via <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>.
</p>
</li></ol>

<p>The elements of the <code>params</code> argument do not need to be scalars,
vectors of arbitrary length
(including length 0)
are supported.
For queries, calling <code>dbFetch()</code> binding such parameters returns
concatenated results, equivalent to binding and fetching for each set
of values and connecting via <code><a href="base.html#topic+rbind">rbind()</a></code>.
For data manipulation statements, <code>dbGetRowsAffected()</code> returns the
total number of rows affected if binding non-scalar parameters.
<code>dbBind()</code> also accepts repeated calls on the same result set
for both queries
and data manipulation statements,
even if no results are fetched between calls to <code>dbBind()</code>,
for both queries
and data manipulation statements.
</p>
<p>If the placeholders in the query are named,
their order in the <code>params</code> argument is not important.
</p>
<p>At least the following data types are accepted on input (including <a href="base.html#topic+NA">NA</a>):
</p>

<ul>
<li> <p><a href="base.html#topic+integer">integer</a>
</p>
</li>
<li> <p><a href="base.html#topic+numeric">numeric</a>
</p>
</li>
<li> <p><a href="base.html#topic+logical">logical</a> for Boolean values
</p>
</li>
<li> <p><a href="base.html#topic+character">character</a>
(also with special characters such as spaces, newlines, quotes, and backslashes)
</p>
</li>
<li> <p><a href="base.html#topic+factor">factor</a> (bound as character,
with warning)
</p>
</li>
<li> <p><a href="base.html#topic+Date">Date</a>
(also when stored internally as integer)
</p>
</li>
<li> <p><a href="base.html#topic+POSIXct">POSIXct</a> timestamps
</p>
</li>
<li> <p><a href="base.html#topic+POSIXlt">POSIXlt</a> timestamps
</p>
</li>
<li> <p><a href="base.html#topic+difftime">difftime</a> values
(also with units other than seconds
and with the value stored as integer)
</p>
</li>
<li><p> lists of <a href="base.html#topic+raw">raw</a> for blobs (with <code>NULL</code> entries for SQL NULL values)
</p>
</li>
<li><p> objects of type <a href="blob.html#topic+blob">blob::blob</a>
</p>
</li></ul>



<h3>Failure modes</h3>

<p>Calling <code>dbBind()</code> for a query without parameters
raises an error.
</p>
<p>Binding too many
or not enough values,
or parameters with wrong names
or unequal length,
also raises an error.
If the placeholders in the query are named,
all parameter values must have names
(which must not be empty
or <code>NA</code>),
and vice versa,
otherwise an error is raised.
The behavior for mixing placeholders of different types
(in particular mixing positional and named placeholders)
is not specified.
</p>
<p>Calling <code>dbBind()</code> on a result set already cleared by <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>
also raises an error.
</p>


<h3>See Also</h3>

<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>
<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>
<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>

<hr>
<h2 id='spec_meta_column_info'>spec_meta_column_info</h2><span id='topic+spec_meta_column_info'></span>

<h3>Description</h3>

<p>spec_meta_column_info
</p>


<h3>Value</h3>

<p><code>dbColumnInfo()</code>
returns a data frame
with at least two columns <code>"name"</code> and <code>"type"</code> (in that order)
(and optional columns that start with a dot).
The <code>"name"</code> and <code>"type"</code> columns contain the names and types
of the R columns of the data frame that is returned from <code><a href="DBI.html#topic+dbFetch">dbFetch()</a></code>.
The <code>"type"</code> column is of type <code>character</code> and only for information.
Do not compute on the <code>"type"</code> column, instead use <code>dbFetch(res, n = 0)</code>
to create a zero-row data frame initialized with the correct data types.
</p>


<h3>Failure modes</h3>

<p>An attempt to query columns for a closed result set raises an error.
</p>


<h3>Specification</h3>

<p>A column named <code>row_names</code> is treated like any other column.
</p>
<p>The column names are always consistent
with the data returned by <code>dbFetch()</code>.
</p>
<p>If the query returns unnamed columns,
non-empty and non-<code>NA</code> names are assigned.
</p>
<p>Column names that correspond to SQL or R keywords are left unchanged.
</p>


<h3>See Also</h3>

<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_bind">spec_meta_bind</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>

<hr>
<h2 id='spec_meta_get_row_count'>spec_meta_get_row_count</h2><span id='topic+spec_meta_get_row_count'></span>

<h3>Description</h3>

<p>spec_meta_get_row_count
</p>


<h3>Value</h3>

<p><code>dbGetRowCount()</code> returns a scalar number (integer or numeric),
the number of rows fetched so far.
After calling <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code>,
the row count is initially zero.
After a call to <code><a href="DBI.html#topic+dbFetch">dbFetch()</a></code> without limit,
the row count matches the total number of rows returned.
Fetching a limited number of rows
increases the number of rows by the number of rows returned,
even if fetching past the end of the result set.
For queries with an empty result set,
zero is returned
even after fetching.
For data manipulation statements issued with
<code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code>,
zero is returned before
and after calling <code>dbFetch()</code>.
</p>


<h3>Failure modes</h3>

<p>Attempting to get the row count for a result set cleared with
<code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code> gives an error.
</p>


<h3>See Also</h3>

<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_bind">spec_meta_bind</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>

<hr>
<h2 id='spec_meta_get_rows_affected'>spec_meta_get_rows_affected</h2><span id='topic+spec_meta_get_rows_affected'></span>

<h3>Description</h3>

<p>spec_meta_get_rows_affected
</p>


<h3>Value</h3>

<p><code>dbGetRowsAffected()</code> returns a scalar number (integer or numeric),
the number of rows affected by a data manipulation statement
issued with <code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code>.
The value is available directly after the call
and does not change after calling <code><a href="DBI.html#topic+dbFetch">dbFetch()</a></code>.
<code>NA_integer_</code> or <code>NA_numeric_</code> are allowed if the number of rows affected is not known.
</p>
<p>For queries issued with <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code>,
zero is returned before
and after the call to <code>dbFetch()</code>.
<code>NA</code> values are not allowed.
</p>


<h3>Failure modes</h3>

<p>Attempting to get the rows affected for a result set cleared with
<code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code> gives an error.
</p>


<h3>See Also</h3>

<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_bind">spec_meta_bind</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>

<hr>
<h2 id='spec_meta_get_statement'>spec_meta_get_statement</h2><span id='topic+spec_meta_get_statement'></span>

<h3>Description</h3>

<p>spec_meta_get_statement
</p>


<h3>Value</h3>

<p><code>dbGetStatement()</code> returns a string, the query used in
either <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code> or
<code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code>.
</p>


<h3>Failure modes</h3>

<p>Attempting to query the statement for a result set cleared with
<code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code> gives an error.
</p>


<h3>See Also</h3>

<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_bind">spec_meta_bind</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>

<hr>
<h2 id='spec_meta_has_completed'>spec_meta_has_completed</h2><span id='topic+spec_meta_has_completed'></span>

<h3>Description</h3>

<p>spec_meta_has_completed
</p>


<h3>Value</h3>

<p><code>dbHasCompleted()</code> returns a logical scalar.
For a query initiated by <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code> with non-empty result set,
<code>dbHasCompleted()</code> returns <code>FALSE</code> initially
and <code>TRUE</code> after calling <code><a href="DBI.html#topic+dbFetch">dbFetch()</a></code> without limit.
For a query initiated by <code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code>,
<code>dbHasCompleted()</code> always returns <code>TRUE</code>.
</p>


<h3>Failure modes</h3>

<p>Attempting to query completion status for a result set cleared with
<code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code> gives an error.
</p>


<h3>Specification</h3>

<p>The completion status for a query is only guaranteed to be set to
<code>FALSE</code> after attempting to fetch past the end of the entire result.
Therefore, for a query with an empty result set,
the initial return value is unspecified,
but the result value is <code>TRUE</code> after trying to fetch only one row.
</p>
<p>Similarly, for a query with a result set of length n,
the return value is unspecified after fetching n rows,
but the result value is <code>TRUE</code> after trying to fetch only one more
row.
</p>


<h3>See Also</h3>

<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_bind">spec_meta_bind</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_is_valid">spec_meta_is_valid</a></code>
</p>

<hr>
<h2 id='spec_meta_is_valid'>spec_meta_is_valid</h2><span id='topic+spec_meta_is_valid'></span>

<h3>Description</h3>

<p>spec_meta_is_valid
</p>


<h3>Value</h3>

<p><code>dbIsValid()</code> returns a logical scalar,
<code>TRUE</code> if the object specified by <code>dbObj</code> is valid,
<code>FALSE</code> otherwise.
A <a href="DBI.html#topic+DBIConnection-class">DBIConnection</a> object is initially valid,
and becomes invalid after disconnecting with <code><a href="DBI.html#topic+dbDisconnect">dbDisconnect()</a></code>.
For an invalid connection object (e.g., for some drivers if the object
is saved to a file and then restored), the method also returns <code>FALSE</code>.
A <a href="DBI.html#topic+DBIResult-class">DBIResult</a> object is valid after a call to <code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code>,
and stays valid even after all rows have been fetched;
only clearing it with <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code> invalidates it.
A <a href="DBI.html#topic+DBIResult-class">DBIResult</a> object is also valid after a call to <code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code>,
and stays valid after querying the number of rows affected;
only clearing it with <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code> invalidates it.
If the connection to the database system is dropped (e.g., due to
connectivity problems, server failure, etc.), <code>dbIsValid()</code> should return
<code>FALSE</code>. This is not tested automatically.
</p>


<h3>See Also</h3>

<p>Other meta specifications: 
<code><a href="#topic+spec_get_info">spec_get_info</a></code>,
<code><a href="#topic+spec_meta_bind">spec_meta_bind</a></code>,
<code><a href="#topic+spec_meta_column_info">spec_meta_column_info</a></code>,
<code><a href="#topic+spec_meta_get_row_count">spec_meta_get_row_count</a></code>,
<code><a href="#topic+spec_meta_get_rows_affected">spec_meta_get_rows_affected</a></code>,
<code><a href="#topic+spec_meta_get_statement">spec_meta_get_statement</a></code>,
<code><a href="#topic+spec_meta_has_completed">spec_meta_has_completed</a></code>
</p>

<hr>
<h2 id='spec_result_clear_result'>spec_result_clear_result</h2><span id='topic+spec_result_clear_result'></span>

<h3>Description</h3>

<p>spec_result_clear_result
</p>


<h3>Value</h3>

<p><code>dbClearResult()</code> returns <code>TRUE</code>, invisibly, for result sets obtained from
<code>dbSendQuery()</code>,
<code>dbSendStatement()</code>,
or <code>dbSendQueryArrow()</code>,
</p>


<h3>Failure modes</h3>

<p>An attempt to close an already closed result set issues a warning
for <code>dbSendQuery()</code>,
<code>dbSendStatement()</code>,
and <code>dbSendQueryArrow()</code>,
</p>


<h3>Specification</h3>

<p><code>dbClearResult()</code> frees all resources associated with retrieving
the result of a query or update operation.
The DBI backend can expect a call to <code>dbClearResult()</code> for each
<code><a href="DBI.html#topic+dbSendQuery">dbSendQuery()</a></code> or <code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code> call.
</p>


<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_create_table_with_data_type">spec_result_create_table_with_data_type</a></code>,
<code><a href="#topic+spec_result_execute">spec_result_execute</a></code>,
<code><a href="#topic+spec_result_fetch">spec_result_fetch</a></code>,
<code><a href="#topic+spec_result_get_query">spec_result_get_query</a></code>,
<code><a href="#topic+spec_result_roundtrip">spec_result_roundtrip</a></code>,
<code><a href="#topic+spec_result_send_query">spec_result_send_query</a></code>,
<code><a href="#topic+spec_result_send_statement">spec_result_send_statement</a></code>
</p>
<p>Other Arrow specifications: 
<code><a href="#topic+spec_arrow_append_table_arrow">spec_arrow_append_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_create_table_arrow">spec_arrow_create_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow">spec_arrow_fetch_arrow</a></code>,
<code><a href="#topic+spec_arrow_fetch_arrow_chunk">spec_arrow_fetch_arrow_chunk</a></code>,
<code><a href="#topic+spec_arrow_get_query_arrow">spec_arrow_get_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_read_table_arrow">spec_arrow_read_table_arrow</a></code>,
<code><a href="#topic+spec_arrow_send_query_arrow">spec_arrow_send_query_arrow</a></code>,
<code><a href="#topic+spec_arrow_write_table_arrow">spec_arrow_write_table_arrow</a></code>
</p>

<hr>
<h2 id='spec_result_create_table_with_data_type'>spec_result_create_table_with_data_type</h2><span id='topic+spec_result_create_table_with_data_type'></span>

<h3>Description</h3>

<p>spec_result_create_table_with_data_type
</p>


<h3>Specification</h3>

<p>All data types returned by <code>dbDataType()</code> are usable in an SQL statement
of the form
<code>"CREATE TABLE test (a ...)"</code>.
</p>


<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>,
<code><a href="#topic+spec_result_execute">spec_result_execute</a></code>,
<code><a href="#topic+spec_result_fetch">spec_result_fetch</a></code>,
<code><a href="#topic+spec_result_get_query">spec_result_get_query</a></code>,
<code><a href="#topic+spec_result_roundtrip">spec_result_roundtrip</a></code>,
<code><a href="#topic+spec_result_send_query">spec_result_send_query</a></code>,
<code><a href="#topic+spec_result_send_statement">spec_result_send_statement</a></code>
</p>

<hr>
<h2 id='spec_result_execute'>spec_result_execute</h2><span id='topic+spec_result_execute'></span>

<h3>Description</h3>

<p>spec_result_execute
</p>


<h3>Value</h3>

<p><code>dbExecute()</code> always returns a
scalar
numeric
that specifies the number of rows affected
by the statement.
</p>


<h3>Failure modes</h3>

<p>An error is raised when issuing a statement over a closed
or invalid connection,
if the syntax of the statement is invalid,
or if the statement is not a non-<code>NA</code> string.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbExecute()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>params</code> (default: <code>NULL</code>)
</p>
</li>
<li> <p><code>immediate</code> (default: <code>NULL</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>The <code>param</code> argument allows passing query parameters, see <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> for details.
</p>


<h3>Specification for the <code>immediate</code> argument</h3>

<p>The <code>immediate</code> argument supports distinguishing between &quot;direct&quot;
and &quot;prepared&quot; APIs offered by many database drivers.
Passing <code>immediate = TRUE</code> leads to immediate execution of the
query or statement, via the &quot;direct&quot; API (if supported by the driver).
The default <code>NULL</code> means that the backend should choose whatever API
makes the most sense for the database, and (if relevant) tries the
other API if the first attempt fails. A successful second attempt
should result in a message that suggests passing the correct
<code>immediate</code> argument.
Examples for possible behaviors:
</p>

<ol>
<li><p> DBI backend defaults to <code>immediate = TRUE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed: query is executed
</p>
</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: rejected immediately by the database
because of a syntax error in the query, the backend tries
<code>immediate = FALSE</code> (and gives a message)
</p>
</li>
<li> <p><code>params</code> given: query is executed using <code>immediate = FALSE</code>
</p>
</li></ol>

</li></ol>

</li>
<li><p> DBI backend defaults to <code>immediate = FALSE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed:
</p>

<ol>
<li><p> simple query: query is executed
</p>
</li>
<li><p> &quot;special&quot; query (such as setting a config options): fails,
the backend tries <code>immediate = TRUE</code> (and gives a message)
</p>
</li></ol>

</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: waiting for parameters via <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>
</p>
</li>
<li> <p><code>params</code> given: query is executed
</p>
</li></ol>

</li></ol>

</li></ol>



<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>,
<code><a href="#topic+spec_result_create_table_with_data_type">spec_result_create_table_with_data_type</a></code>,
<code><a href="#topic+spec_result_fetch">spec_result_fetch</a></code>,
<code><a href="#topic+spec_result_get_query">spec_result_get_query</a></code>,
<code><a href="#topic+spec_result_roundtrip">spec_result_roundtrip</a></code>,
<code><a href="#topic+spec_result_send_query">spec_result_send_query</a></code>,
<code><a href="#topic+spec_result_send_statement">spec_result_send_statement</a></code>
</p>

<hr>
<h2 id='spec_result_fetch'>spec_result_fetch</h2><span id='topic+spec_result_fetch'></span>

<h3>Description</h3>

<p>spec_result_fetch
</p>


<h3>Value</h3>

<p><code>dbFetch()</code> always returns a <a href="base.html#topic+data.frame">data.frame</a> with
as many rows as records were fetched and as many
columns as fields in the result set,
even if the result is a single value
or has one
or zero rows.
Passing <code>n = NA</code> is supported and returns an arbitrary number of rows (at least one)
as specified by the driver, but at most the remaining rows in the result set.
</p>


<h3>Failure modes</h3>

<p>An attempt to fetch from a closed result set raises an error.
If the <code>n</code> argument is not an atomic whole number
greater or equal to -1 or Inf, an error is raised,
but a subsequent call to <code>dbFetch()</code> with proper <code>n</code> argument succeeds.
</p>
<p>Calling <code>dbFetch()</code> on a result set from a data manipulation query
created by <code><a href="DBI.html#topic+dbSendStatement">dbSendStatement()</a></code> can
be fetched and return an empty data frame, with a warning.
</p>


<h3>Specification</h3>

<p>Fetching multi-row queries with one
or more columns by default returns the entire result.
Multi-row queries can also be fetched progressively
by passing a whole number (<a href="base.html#topic+integer">integer</a> or
<a href="base.html#topic+numeric">numeric</a>)
as the <code>n</code> argument.
A value of <a href="base.html#topic+Inf">Inf</a> for the <code>n</code> argument is supported
and also returns the full result.
If more rows than available are fetched, the result is returned in full
without warning.
If fewer rows than requested are returned, further fetches will
return a data frame with zero rows.
If zero rows are fetched, the columns of the data frame are still fully
typed.
Fetching fewer rows than available is permitted,
no warning is issued when clearing the result set.
</p>
<p>A column named <code>row_names</code> is treated like any other column.
</p>


<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>,
<code><a href="#topic+spec_result_create_table_with_data_type">spec_result_create_table_with_data_type</a></code>,
<code><a href="#topic+spec_result_execute">spec_result_execute</a></code>,
<code><a href="#topic+spec_result_get_query">spec_result_get_query</a></code>,
<code><a href="#topic+spec_result_roundtrip">spec_result_roundtrip</a></code>,
<code><a href="#topic+spec_result_send_query">spec_result_send_query</a></code>,
<code><a href="#topic+spec_result_send_statement">spec_result_send_statement</a></code>
</p>

<hr>
<h2 id='spec_result_get_query'>spec_result_get_query</h2><span id='topic+spec_result_get_query'></span>

<h3>Description</h3>

<p>spec_result_get_query
</p>


<h3>Value</h3>

<p><code>dbGetQuery()</code> always returns a <a href="base.html#topic+data.frame">data.frame</a>, with
as many rows as records were fetched and as many
columns as fields in the result set,
even if the result is a single value
or has one
or zero rows.
</p>


<h3>Failure modes</h3>

<p>An error is raised when issuing a query over a closed
or invalid connection,
if the syntax of the query is invalid,
or if the query is not a non-<code>NA</code> string.
If the <code>n</code> argument is not an atomic whole number
greater or equal to -1 or Inf, an error is raised,
but a subsequent call to <code>dbGetQuery()</code> with proper <code>n</code> argument succeeds.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbGetQuery()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>n</code> (default: -1)
</p>
</li>
<li> <p><code>params</code> (default: <code>NULL</code>)
</p>
</li>
<li> <p><code>immediate</code> (default: <code>NULL</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; and &quot;Value&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>A column named <code>row_names</code> is treated like any other column.
</p>
<p>The <code>n</code> argument specifies the number of rows to be fetched.
If omitted, fetching multi-row queries with one
or more columns returns the entire result.
A value of <a href="base.html#topic+Inf">Inf</a> for the <code>n</code> argument is supported
and also returns the full result.
If more rows than available are fetched (by passing a too large value for
<code>n</code>), the result is returned in full without warning.
If zero rows are requested, the columns of the data frame are still fully
typed.
Fetching fewer rows than available is permitted,
no warning is issued.
</p>
<p>The <code>param</code> argument allows passing query parameters, see <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> for details.
</p>


<h3>Specification for the <code>immediate</code> argument</h3>

<p>The <code>immediate</code> argument supports distinguishing between &quot;direct&quot;
and &quot;prepared&quot; APIs offered by many database drivers.
Passing <code>immediate = TRUE</code> leads to immediate execution of the
query or statement, via the &quot;direct&quot; API (if supported by the driver).
The default <code>NULL</code> means that the backend should choose whatever API
makes the most sense for the database, and (if relevant) tries the
other API if the first attempt fails. A successful second attempt
should result in a message that suggests passing the correct
<code>immediate</code> argument.
Examples for possible behaviors:
</p>

<ol>
<li><p> DBI backend defaults to <code>immediate = TRUE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed: query is executed
</p>
</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: rejected immediately by the database
because of a syntax error in the query, the backend tries
<code>immediate = FALSE</code> (and gives a message)
</p>
</li>
<li> <p><code>params</code> given: query is executed using <code>immediate = FALSE</code>
</p>
</li></ol>

</li></ol>

</li>
<li><p> DBI backend defaults to <code>immediate = FALSE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed:
</p>

<ol>
<li><p> simple query: query is executed
</p>
</li>
<li><p> &quot;special&quot; query (such as setting a config options): fails,
the backend tries <code>immediate = TRUE</code> (and gives a message)
</p>
</li></ol>

</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: waiting for parameters via <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>
</p>
</li>
<li> <p><code>params</code> given: query is executed
</p>
</li></ol>

</li></ol>

</li></ol>



<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>,
<code><a href="#topic+spec_result_create_table_with_data_type">spec_result_create_table_with_data_type</a></code>,
<code><a href="#topic+spec_result_execute">spec_result_execute</a></code>,
<code><a href="#topic+spec_result_fetch">spec_result_fetch</a></code>,
<code><a href="#topic+spec_result_roundtrip">spec_result_roundtrip</a></code>,
<code><a href="#topic+spec_result_send_query">spec_result_send_query</a></code>,
<code><a href="#topic+spec_result_send_statement">spec_result_send_statement</a></code>
</p>

<hr>
<h2 id='spec_result_roundtrip'>spec_result_roundtrip</h2><span id='topic+spec_result_roundtrip'></span>

<h3>Description</h3>

<p>spec_result_roundtrip
</p>


<h3>Specification</h3>

<p>The column types of the returned data frame depend on the data returned:
</p>

<ul>
<li> <p><a href="base.html#topic+integer">integer</a> (or coercible to an integer) for integer values between -2^31 and 2^31 - 1,
with <a href="base.html#topic+NA">NA</a> for SQL <code>NULL</code> values
</p>
</li>
<li> <p><a href="base.html#topic+numeric">numeric</a> for numbers with a fractional component,
with NA for SQL <code>NULL</code> values
</p>
</li>
<li> <p><a href="base.html#topic+logical">logical</a> for Boolean values (some backends may return an integer);
with NA for SQL <code>NULL</code> values
</p>
</li>
<li> <p><a href="base.html#topic+character">character</a> for text,
with NA for SQL <code>NULL</code> values
</p>
</li>
<li><p> lists of <a href="base.html#topic+raw">raw</a> for blobs
with <a href="base.html#topic+NULL">NULL</a> entries for SQL NULL values
</p>
</li>
<li><p> coercible using <code><a href="base.html#topic+as.Date">as.Date()</a></code> for dates,
with NA for SQL <code>NULL</code> values
(also applies to the return value of the SQL function <code>current_date</code>)
</p>
</li>
<li><p> coercible using <code><a href="hms.html#topic+hms">hms::as_hms()</a></code> for times,
with NA for SQL <code>NULL</code> values
(also applies to the return value of the SQL function <code>current_time</code>)
</p>
</li>
<li><p> coercible using <code><a href="base.html#topic+as.POSIXct">as.POSIXct()</a></code> for timestamps,
with NA for SQL <code>NULL</code> values
(also applies to the return value of the SQL function <code>current_timestamp</code>)
</p>
</li></ul>

<p>If dates and timestamps are supported by the backend, the following R types are
used:
</p>

<ul>
<li> <p><a href="base.html#topic+Date">Date</a> for dates
(also applies to the return value of the SQL function <code>current_date</code>)
</p>
</li>
<li> <p><a href="base.html#topic+POSIXct">POSIXct</a> for timestamps
(also applies to the return value of the SQL function <code>current_timestamp</code>)
</p>
</li></ul>

<p>R has no built-in type with lossless support for the full range of 64-bit
or larger integers. If 64-bit integers are returned from a query,
the following rules apply:
</p>

<ul>
<li><p> Values are returned in a container with support for the full range of
valid 64-bit values (such as the <code>integer64</code> class of the <span class="pkg">bit64</span>
package)
</p>
</li>
<li><p> Coercion to numeric always returns a number that is as close as possible
to the true value
</p>
</li>
<li><p> Loss of precision when converting to numeric gives a warning
</p>
</li>
<li><p> Conversion to character always returns a lossless decimal representation
of the data
</p>
</li></ul>



<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>,
<code><a href="#topic+spec_result_create_table_with_data_type">spec_result_create_table_with_data_type</a></code>,
<code><a href="#topic+spec_result_execute">spec_result_execute</a></code>,
<code><a href="#topic+spec_result_fetch">spec_result_fetch</a></code>,
<code><a href="#topic+spec_result_get_query">spec_result_get_query</a></code>,
<code><a href="#topic+spec_result_send_query">spec_result_send_query</a></code>,
<code><a href="#topic+spec_result_send_statement">spec_result_send_statement</a></code>
</p>

<hr>
<h2 id='spec_result_send_query'>spec_result_send_query</h2><span id='topic+spec_result_send_query'></span>

<h3>Description</h3>

<p>spec_result_send_query
</p>


<h3>Value</h3>

<p><code>dbSendQuery()</code> returns
an S4 object that inherits from <a href="DBI.html#topic+DBIResult-class">DBIResult</a>.
The result set can be used with <code><a href="DBI.html#topic+dbFetch">dbFetch()</a></code> to extract records.
Once you have finished using a result, make sure to clear it
with <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>.
</p>


<h3>Failure modes</h3>

<p>An error is raised when issuing a query over a closed
or invalid connection,
or if the query is not a non-<code>NA</code> string.
An error is also raised if the syntax of the query is invalid
and all query parameters are given (by passing the <code>params</code> argument)
or the <code>immediate</code> argument is set to <code>TRUE</code>.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbSendQuery()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>params</code> (default: <code>NULL</code>)
</p>
</li>
<li> <p><code>immediate</code> (default: <code>NULL</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>No warnings occur under normal conditions.
When done, the DBIResult object must be cleared with a call to
<code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>.
Failure to clear the result set leads to a warning
when the connection is closed.
</p>
<p>If the backend supports only one open result set per connection,
issuing a second query invalidates an already open result set
and raises a warning.
The newly opened result set is valid
and must be cleared with <code>dbClearResult()</code>.
</p>
<p>The <code>param</code> argument allows passing query parameters, see <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> for details.
</p>


<h3>Specification for the <code>immediate</code> argument</h3>

<p>The <code>immediate</code> argument supports distinguishing between &quot;direct&quot;
and &quot;prepared&quot; APIs offered by many database drivers.
Passing <code>immediate = TRUE</code> leads to immediate execution of the
query or statement, via the &quot;direct&quot; API (if supported by the driver).
The default <code>NULL</code> means that the backend should choose whatever API
makes the most sense for the database, and (if relevant) tries the
other API if the first attempt fails. A successful second attempt
should result in a message that suggests passing the correct
<code>immediate</code> argument.
Examples for possible behaviors:
</p>

<ol>
<li><p> DBI backend defaults to <code>immediate = TRUE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed: query is executed
</p>
</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: rejected immediately by the database
because of a syntax error in the query, the backend tries
<code>immediate = FALSE</code> (and gives a message)
</p>
</li>
<li> <p><code>params</code> given: query is executed using <code>immediate = FALSE</code>
</p>
</li></ol>

</li></ol>

</li>
<li><p> DBI backend defaults to <code>immediate = FALSE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed:
</p>

<ol>
<li><p> simple query: query is executed
</p>
</li>
<li><p> &quot;special&quot; query (such as setting a config options): fails,
the backend tries <code>immediate = TRUE</code> (and gives a message)
</p>
</li></ol>

</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: waiting for parameters via <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>
</p>
</li>
<li> <p><code>params</code> given: query is executed
</p>
</li></ol>

</li></ol>

</li></ol>



<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>,
<code><a href="#topic+spec_result_create_table_with_data_type">spec_result_create_table_with_data_type</a></code>,
<code><a href="#topic+spec_result_execute">spec_result_execute</a></code>,
<code><a href="#topic+spec_result_fetch">spec_result_fetch</a></code>,
<code><a href="#topic+spec_result_get_query">spec_result_get_query</a></code>,
<code><a href="#topic+spec_result_roundtrip">spec_result_roundtrip</a></code>,
<code><a href="#topic+spec_result_send_statement">spec_result_send_statement</a></code>
</p>

<hr>
<h2 id='spec_result_send_statement'>spec_result_send_statement</h2><span id='topic+spec_result_send_statement'></span>

<h3>Description</h3>

<p>spec_result_send_statement
</p>


<h3>Value</h3>

<p><code>dbSendStatement()</code> returns
an S4 object that inherits from <a href="DBI.html#topic+DBIResult-class">DBIResult</a>.
The result set can be used with <code><a href="DBI.html#topic+dbGetRowsAffected">dbGetRowsAffected()</a></code> to
determine the number of rows affected by the query.
Once you have finished using a result, make sure to clear it
with <code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>.
</p>


<h3>Failure modes</h3>

<p>An error is raised when issuing a statement over a closed
or invalid connection,
or if the statement is not a non-<code>NA</code> string.
An error is also raised if the syntax of the query is invalid
and all query parameters are given (by passing the <code>params</code> argument)
or the <code>immediate</code> argument is set to <code>TRUE</code>.
</p>


<h3>Specification</h3>

<p>No warnings occur under normal conditions.
When done, the DBIResult object must be cleared with a call to
<code><a href="DBI.html#topic+dbClearResult">dbClearResult()</a></code>.
Failure to clear the result set leads to a warning
when the connection is closed.
If the backend supports only one open result set per connection,
issuing a second query invalidates an already open result set
and raises a warning.
The newly opened result set is valid
and must be cleared with <code>dbClearResult()</code>.
</p>
<p>The <code>param</code> argument allows passing query parameters, see <code><a href="DBI.html#topic+dbBind">dbBind()</a></code> for details.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbSendStatement()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>params</code> (default: <code>NULL</code>)
</p>
</li>
<li> <p><code>immediate</code> (default: <code>NULL</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; sections for details on their usage.
</p>


<h3>Specification for the <code>immediate</code> argument</h3>

<p>The <code>immediate</code> argument supports distinguishing between &quot;direct&quot;
and &quot;prepared&quot; APIs offered by many database drivers.
Passing <code>immediate = TRUE</code> leads to immediate execution of the
query or statement, via the &quot;direct&quot; API (if supported by the driver).
The default <code>NULL</code> means that the backend should choose whatever API
makes the most sense for the database, and (if relevant) tries the
other API if the first attempt fails. A successful second attempt
should result in a message that suggests passing the correct
<code>immediate</code> argument.
Examples for possible behaviors:
</p>

<ol>
<li><p> DBI backend defaults to <code>immediate = TRUE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed: query is executed
</p>
</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: rejected immediately by the database
because of a syntax error in the query, the backend tries
<code>immediate = FALSE</code> (and gives a message)
</p>
</li>
<li> <p><code>params</code> given: query is executed using <code>immediate = FALSE</code>
</p>
</li></ol>

</li></ol>

</li>
<li><p> DBI backend defaults to <code>immediate = FALSE</code> internally
</p>

<ol>
<li><p> A query without parameters is passed:
</p>

<ol>
<li><p> simple query: query is executed
</p>
</li>
<li><p> &quot;special&quot; query (such as setting a config options): fails,
the backend tries <code>immediate = TRUE</code> (and gives a message)
</p>
</li></ol>

</li>
<li><p> A query with parameters is passed:
</p>

<ol>
<li> <p><code>params</code> not given: waiting for parameters via <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>
</p>
</li>
<li> <p><code>params</code> given: query is executed
</p>
</li></ol>

</li></ol>

</li></ol>



<h3>See Also</h3>

<p>Other result specifications: 
<code><a href="#topic+spec_result_clear_result">spec_result_clear_result</a></code>,
<code><a href="#topic+spec_result_create_table_with_data_type">spec_result_create_table_with_data_type</a></code>,
<code><a href="#topic+spec_result_execute">spec_result_execute</a></code>,
<code><a href="#topic+spec_result_fetch">spec_result_fetch</a></code>,
<code><a href="#topic+spec_result_get_query">spec_result_get_query</a></code>,
<code><a href="#topic+spec_result_roundtrip">spec_result_roundtrip</a></code>,
<code><a href="#topic+spec_result_send_query">spec_result_send_query</a></code>
</p>

<hr>
<h2 id='spec_sql_append_table'>spec_sql_append_table</h2><span id='topic+spec_sql_append_table'></span>

<h3>Description</h3>

<p>spec_sql_append_table
</p>


<h3>Value</h3>

<p><code>dbAppendTable()</code> returns a
scalar
numeric.
</p>


<h3>Failure modes</h3>

<p>If the table does not exist,
or the new data in <code>values</code> is not a data frame or has different column names,
an error is raised; the remote table remains unchanged.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
Invalid values for the <code>row.names</code> argument
(non-scalars,
unsupported data types,
<code>NA</code>)
also raise an error.
</p>
<p>Passing a <code>value</code> argument different to <code>NULL</code> to the <code>row.names</code> argument
(in particular <code>TRUE</code>,
<code>NA</code>,
and a string)
raises an error.
</p>


<h3>Specification</h3>

<p>SQL keywords can be used freely in table names, column names, and data.
Quotes, commas, spaces, and other special characters such as newlines and tabs,
can also be used in the data,
and, if the database supports non-syntactic identifiers,
also for table names
and column names.
</p>
<p>The following data types must be supported at least,
and be read identically with <code><a href="DBI.html#topic+dbReadTable">dbReadTable()</a></code>:
</p>

<ul>
<li><p> integer
</p>
</li>
<li><p> numeric
(the behavior for <code>Inf</code> and <code>NaN</code> is not specified)
</p>
</li>
<li><p> logical
</p>
</li>
<li> <p><code>NA</code> as NULL
</p>
</li>
<li><p> 64-bit values (using <code>"bigint"</code> as field type); the result can be
</p>

<ul>
<li><p> converted to a numeric, which may lose precision,
</p>
</li>
<li><p> converted a character vector, which gives the full decimal
representation
</p>
</li>
<li><p> written to another table and read again unchanged
</p>
</li></ul>

</li>
<li><p> character (in both UTF-8
and native encodings),
supporting empty strings
(before and after non-empty strings)
</p>
</li>
<li><p> factor (returned as character,
with a warning)
</p>
</li>
<li><p> list of raw
(if supported by the database)
</p>
</li>
<li><p> objects of type <a href="blob.html#topic+blob">blob::blob</a>
(if supported by the database)
</p>
</li>
<li><p> date
(if supported by the database;
returned as <code>Date</code>)
also for dates prior to 1970 or 1900 or after 2038
</p>
</li>
<li><p> time
(if supported by the database;
returned as objects that inherit from <code>difftime</code>)
</p>
</li>
<li><p> timestamp
(if supported by the database;
returned as <code>POSIXct</code>
respecting the time zone but not necessarily preserving the
input time zone),
also for timestamps prior to 1970 or 1900 or after 2038
respecting the time zone but not necessarily preserving the
input time zone)
</p>
</li></ul>

<p>Mixing column types in the same table is supported.
</p>
<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbAppendTable()</code> will do the quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
to support databases that allow non-syntactic names for their objects:
</p>
</li></ul>

<p>The <code>row.names</code> argument must be <code>NULL</code>, the default value.
Row names are ignored.
</p>
<p>The <code>value</code> argument must be a data frame
with a subset of the columns of the existing table.
The order of the columns does not matter.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_create_table'>spec_sql_create_table</h2><span id='topic+spec_sql_create_table'></span>

<h3>Description</h3>

<p>spec_sql_create_table
</p>


<h3>Value</h3>

<p><code>dbCreateTable()</code> returns <code>TRUE</code>, invisibly.
</p>


<h3>Failure modes</h3>

<p>If the table exists, an error is raised; the remote table remains unchanged.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
Invalid values for the <code>row.names</code> and <code>temporary</code> arguments
(non-scalars,
unsupported data types,
<code>NA</code>,
incompatible values,
duplicate names)
also raise an error.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbCreateTable()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>temporary</code> (default: <code>FALSE</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; and &quot;Value&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbCreateTable()</code> will do the quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>

<p>The <code>value</code> argument can be:
</p>

<ul>
<li><p> a data frame,
</p>
</li>
<li><p> a named list of SQL types
</p>
</li></ul>

<p>If the <code>temporary</code> argument is <code>TRUE</code>, the table is not available in a
second connection and is gone after reconnecting.
Not all backends support this argument.
A regular, non-temporary table is visible in a second connection,
in a pre-existing connection,
and after reconnecting to the database.
</p>
<p>SQL keywords can be used freely in table names, column names, and data.
Quotes, commas, and spaces can also be used  for table names and column names,
if the database supports non-syntactic identifiers.
</p>
<p>The <code>row.names</code> argument must be missing
or <code>NULL</code>, the default value.
All other values for the <code>row.names</code> argument
(in particular <code>TRUE</code>,
<code>NA</code>,
and a string)
raise an error.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_exists_table'>spec_sql_exists_table</h2><span id='topic+spec_sql_exists_table'></span>

<h3>Description</h3>

<p>spec_sql_exists_table
</p>


<h3>Value</h3>

<p><code>dbExistsTable()</code> returns a logical scalar, <code>TRUE</code> if the table or view
specified by the <code>name</code> argument exists, <code>FALSE</code> otherwise.
</p>
<p>This includes temporary tables if supported by the database.
</p>


<h3>Failure modes</h3>

<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbExistsTable()</code> will do the
quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>

<p>For all tables listed by <code><a href="DBI.html#topic+dbListTables">dbListTables()</a></code>, <code>dbExistsTable()</code> returns <code>TRUE</code>.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_list_fields'>spec_sql_list_fields</h2><span id='topic+spec_sql_list_fields'></span>

<h3>Description</h3>

<p>spec_sql_list_fields
</p>


<h3>Value</h3>

<p><code>dbListFields()</code>
returns a character vector
that enumerates all fields
in the table in the correct order.
This also works for temporary tables if supported by the database.
The returned names are suitable for quoting with <code>dbQuoteIdentifier()</code>.
</p>


<h3>Failure modes</h3>

<p>If the table does not exist, an error is raised.
Invalid types for the <code>name</code> argument
(e.g., <code>character</code> of length not equal to one,
or numeric)
lead to an error.
An error is also raised when calling this method for a closed
or invalid connection.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument can be
</p>

<ul>
<li><p> a string
</p>
</li>
<li><p> the return value of <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>
</p>
</li>
<li><p> a value from the <code>table</code> column from the return value of
<code><a href="DBI.html#topic+dbListObjects">dbListObjects()</a></code> where <code>is_prefix</code> is <code>FALSE</code>
</p>
</li></ul>

<p>A column named <code>row_names</code> is treated like any other column.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_list_objects'>spec_sql_list_objects</h2><span id='topic+spec_sql_list_objects'></span>

<h3>Description</h3>

<p>spec_sql_list_objects
</p>


<h3>Value</h3>

<p><code>dbListObjects()</code>
returns a data frame
with columns
<code>table</code> and <code>is_prefix</code> (in that order),
optionally with other columns with a dot (<code>.</code>) prefix.
The <code>table</code> column is of type list.
Each object in this list is suitable for use as argument in <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>.
The <code>is_prefix</code> column is a logical.
This data frame contains one row for each object (schema, table
and view)
accessible from the prefix (if passed) or from the global namespace
(if prefix is omitted).
Tables added with <code><a href="DBI.html#topic+dbWriteTable">dbWriteTable()</a></code> are
part of the data frame.
As soon a table is removed from the database,
it is also removed from the data frame of database objects.
</p>
<p>The same applies to temporary objects if supported by the database.
</p>
<p>The returned names are suitable for quoting with <code>dbQuoteIdentifier()</code>.
</p>


<h3>Failure modes</h3>

<p>An error is raised when calling this method for a closed
or invalid connection.
</p>


<h3>Specification</h3>

<p>The <code>prefix</code> column indicates if the <code>table</code> value refers to a table
or a prefix.
For a call with the default <code>prefix = NULL</code>, the <code>table</code>
values that have <code>is_prefix == FALSE</code> correspond to the tables
returned from <code><a href="DBI.html#topic+dbListTables">dbListTables()</a></code>,
</p>
<p>The <code>table</code> object can be quoted with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>.
The result of quoting can be passed to <code><a href="DBI.html#topic+dbUnquoteIdentifier">dbUnquoteIdentifier()</a></code>.
(For backends it may be convenient to use the <a href="DBI.html#topic+Id">Id</a> class, but this is
not required.)
</p>
<p>Values in <code>table</code> column that have <code>is_prefix == TRUE</code> can be
passed as the <code>prefix</code> argument to another call to <code>dbListObjects()</code>.
For the data frame returned from a <code>dbListObject()</code> call with the
<code>prefix</code> argument set, all <code>table</code> values where <code>is_prefix</code> is
<code>FALSE</code> can be used in a call to <code><a href="DBI.html#topic+dbExistsTable">dbExistsTable()</a></code> which returns
<code>TRUE</code>.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_list_tables'>spec_sql_list_tables</h2><span id='topic+spec_sql_list_tables'></span>

<h3>Description</h3>

<p>spec_sql_list_tables
</p>


<h3>Value</h3>

<p><code>dbListTables()</code>
returns a character vector
that enumerates all tables
and views
in the database.
Tables added with <code><a href="DBI.html#topic+dbWriteTable">dbWriteTable()</a></code> are
part of the list.
As soon a table is removed from the database,
it is also removed from the list of database tables.
</p>
<p>The same applies to temporary tables if supported by the database.
</p>
<p>The returned names are suitable for quoting with <code>dbQuoteIdentifier()</code>.
</p>


<h3>Failure modes</h3>

<p>An error is raised when calling this method for a closed
or invalid connection.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_quote_identifier'>spec_sql_quote_identifier</h2><span id='topic+spec_sql_quote_identifier'></span>

<h3>Description</h3>

<p>spec_sql_quote_identifier
</p>


<h3>Value</h3>

<p><code>dbQuoteIdentifier()</code> returns an object that can be coerced to <a href="base.html#topic+character">character</a>,
of the same length as the input.
For an empty character vector this function returns a length-0 object.
The names of the input argument are preserved in the output.
When passing the returned object again to <code>dbQuoteIdentifier()</code>
as <code>x</code>
argument, it is returned unchanged.
Passing objects of class <a href="DBI.html#topic+SQL">SQL</a> should also return them unchanged.
(For backends it may be most convenient to return <a href="DBI.html#topic+SQL">SQL</a> objects
to achieve this behavior, but this is not required.)
</p>


<h3>Failure modes</h3>

<p>An error is raised if the input contains <code>NA</code>,
but not for an empty string.
</p>


<h3>Specification</h3>

<p>Calling <code><a href="DBI.html#topic+dbGetQuery">dbGetQuery()</a></code> for a query of the format <code style="white-space: pre;">&#8288;SELECT 1 AS ...&#8288;</code>
returns a data frame with the identifier, unquoted, as column name.
Quoted identifiers can be used as table and column names in SQL queries,
in particular in queries like <code style="white-space: pre;">&#8288;SELECT 1 AS ...&#8288;</code>
and <code style="white-space: pre;">&#8288;SELECT * FROM (SELECT 1) ...&#8288;</code>.
The method must use a quoting mechanism that is unambiguously different
from the quoting mechanism used for strings, so that a query like
<code style="white-space: pre;">&#8288;SELECT ... FROM (SELECT 1 AS ...)&#8288;</code>
throws an error if the column names do not match.
</p>
<p>The method can quote column names that
contain special characters such as a space,
a dot,
a comma,
or quotes used to mark strings
or identifiers,
if the database supports this.
In any case, checking the validity of the identifier
should be performed only when executing a query,
and not by <code>dbQuoteIdentifier()</code>.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_quote_literal'>spec_sql_quote_literal</h2><span id='topic+spec_sql_quote_literal'></span>

<h3>Description</h3>

<p>spec_sql_quote_literal
</p>


<h3>Value</h3>

<p><code>dbQuoteLiteral()</code> returns an object that can be coerced to <a href="base.html#topic+character">character</a>,
of the same length as the input.
For an empty
integer,
numeric,
character,
logical,
date,
time,
or blob vector,
this function returns a length-0 object.
</p>
<p>When passing the returned object again to <code>dbQuoteLiteral()</code>
as <code>x</code>
argument, it is returned unchanged.
Passing objects of class <a href="DBI.html#topic+SQL">SQL</a> should also return them unchanged.
(For backends it may be most convenient to return <a href="DBI.html#topic+SQL">SQL</a> objects
to achieve this behavior, but this is not required.)
</p>


<h3>Specification</h3>

<p>The returned expression can be used in a <code style="white-space: pre;">&#8288;SELECT ...&#8288;</code> query,
and the value of
<code>dbGetQuery(paste0("SELECT ", dbQuoteLiteral(x)))[[1]]</code>
must be equal to <code>x</code>
for any scalar
integer,
numeric,
string,
and logical.
If <code>x</code> is <code>NA</code>, the result must merely satisfy <code><a href="Matrix.html#topic+is.na">is.na()</a></code>.
The literals <code>"NA"</code> or <code>"NULL"</code> are not treated specially.
</p>
<p><code>NA</code> should be translated to an unquoted SQL <code>NULL</code>,
so that the query <code style="white-space: pre;">&#8288;SELECT * FROM (SELECT 1) a WHERE ... IS NULL&#8288;</code>
returns one row.
</p>


<h3>Failure modes</h3>

<p>Passing a list
for the <code>x</code> argument raises an error.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_quote_string'>spec_sql_quote_string</h2><span id='topic+spec_sql_quote_string'></span>

<h3>Description</h3>

<p>spec_sql_quote_string
</p>


<h3>Value</h3>

<p><code>dbQuoteString()</code> returns an object that can be coerced to <a href="base.html#topic+character">character</a>,
of the same length as the input.
For an empty character vector this function returns a length-0 object.
</p>
<p>When passing the returned object again to <code>dbQuoteString()</code>
as <code>x</code>
argument, it is returned unchanged.
Passing objects of class <a href="DBI.html#topic+SQL">SQL</a> should also return them unchanged.
(For backends it may be most convenient to return <a href="DBI.html#topic+SQL">SQL</a> objects
to achieve this behavior, but this is not required.)
</p>


<h3>Specification</h3>

<p>The returned expression can be used in a <code style="white-space: pre;">&#8288;SELECT ...&#8288;</code> query,
and for any scalar character <code>x</code> the value of
<code>dbGetQuery(paste0("SELECT ", dbQuoteString(x)))[[1]]</code>
must be identical to <code>x</code>,
even if <code>x</code> contains
spaces,
tabs,
quotes (single
or double),
backticks,
or newlines
(in any combination)
or is itself the result of a <code>dbQuoteString()</code> call coerced back to
character (even repeatedly).
If <code>x</code> is <code>NA</code>, the result must merely satisfy <code><a href="Matrix.html#topic+is.na">is.na()</a></code>.
The strings <code>"NA"</code> or <code>"NULL"</code> are not treated specially.
</p>
<p><code>NA</code> should be translated to an unquoted SQL <code>NULL</code>,
so that the query <code style="white-space: pre;">&#8288;SELECT * FROM (SELECT 1) a WHERE ... IS NULL&#8288;</code>
returns one row.
</p>


<h3>Failure modes</h3>

<p>Passing a numeric,
integer,
logical,
or raw vector,
or a list
for the <code>x</code> argument raises an error.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_read_table'>spec_sql_read_table</h2><span id='topic+spec_sql_read_table'></span>

<h3>Description</h3>

<p>spec_sql_read_table
</p>


<h3>Value</h3>

<p><code>dbReadTable()</code> returns a data frame that contains the complete data
from the remote table, effectively the result of calling <code><a href="DBI.html#topic+dbGetQuery">dbGetQuery()</a></code> with
<code style="white-space: pre;">&#8288;SELECT * FROM &lt;name&gt;&#8288;</code>.
</p>
<p>An empty table is returned as a data frame with zero rows.
</p>
<p>The presence of <a href="base.html#topic+rownames">rownames</a> depends on the <code>row.names</code> argument,
see <code><a href="DBI.html#topic+sqlColumnToRownames">sqlColumnToRownames()</a></code> for details:
</p>

<ul>
<li><p> If <code>FALSE</code> or <code>NULL</code>, the returned data frame doesn't have row names.
</p>
</li>
<li><p> If <code>TRUE</code>, a column named &quot;row_names&quot; is converted to row names.
</p>
</li></ul>


<ul>
<li><p> If <code>NA</code>, a column named &quot;row_names&quot; is converted to row names if it exists,
otherwise no translation occurs.
</p>
</li>
<li><p> If a string, this specifies the name of the column in the remote table
that contains the row names.
</p>
</li></ul>

<p>The default is <code>row.names = FALSE</code>.
</p>
<p>If the database supports identifiers with special characters,
the columns in the returned data frame are converted to valid R
identifiers
if the <code>check.names</code> argument is <code>TRUE</code>,
If <code>check.names = FALSE</code>, the returned table has non-syntactic column names without quotes.
</p>


<h3>Failure modes</h3>

<p>An error is raised if the table does not exist.
</p>
<p>An error is raised if <code>row.names</code> is <code>TRUE</code> and no &quot;row_names&quot; column exists,
</p>
<p>An error is raised if <code>row.names</code> is set to a string and no corresponding column exists.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>
or if this results in a non-scalar.
Unsupported values for <code>row.names</code> and <code>check.names</code>
(non-scalars,
unsupported data types,
<code>NA</code> for <code>check.names</code>)
also raise an error.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbReadTable()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>row.names</code> (default: <code>FALSE</code>)
</p>
</li>
<li> <p><code>check.names</code>
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Value&quot; section for details on their usage.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbReadTable()</code> will do the
quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>



<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_remove_table'>spec_sql_remove_table</h2><span id='topic+spec_sql_remove_table'></span>

<h3>Description</h3>

<p>spec_sql_remove_table
</p>


<h3>Value</h3>

<p><code>dbRemoveTable()</code> returns <code>TRUE</code>, invisibly.
</p>


<h3>Failure modes</h3>

<p>If the table does not exist, an error is raised.
An attempt to remove a view with this function may result in an error.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbRemoveTable()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>temporary</code> (default: <code>FALSE</code>)
</p>
</li>
<li> <p><code>fail_if_missing</code> (default: <code>TRUE</code>)
</p>
</li></ul>

<p>These arguments must be provided as named arguments.
</p>
<p>If <code>temporary</code> is <code>TRUE</code>, the call to <code>dbRemoveTable()</code>
will consider only temporary tables.
Not all backends support this argument.
In particular, permanent tables of the same name are left untouched.
</p>
<p>If <code>fail_if_missing</code> is <code>FALSE</code>, the call to <code>dbRemoveTable()</code>
succeeds if the table does not exist.
</p>


<h3>Specification</h3>

<p>A table removed by <code>dbRemoveTable()</code> doesn't appear in the list of tables
returned by <code><a href="DBI.html#topic+dbListTables">dbListTables()</a></code>,
and <code><a href="DBI.html#topic+dbExistsTable">dbExistsTable()</a></code> returns <code>FALSE</code>.
The removal propagates immediately to other connections to the same database.
This function can also be used to remove a temporary table.
</p>
<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbRemoveTable()</code> will do the
quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>



<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_unquote_identifier'>spec_sql_unquote_identifier</h2><span id='topic+spec_sql_unquote_identifier'></span>

<h3>Description</h3>

<p>spec_sql_unquote_identifier
</p>


<h3>Value</h3>

<p><code>dbUnquoteIdentifier()</code> returns a list of objects
of the same length as the input.
For an empty vector, this function returns a length-0 object.
The names of the input argument are preserved in the output.
If <code>x</code> is a value returned by <code>dbUnquoteIdentifier()</code>,
calling <code>dbUnquoteIdentifier(..., dbQuoteIdentifier(..., x))</code>
returns <code>list(x)</code>.
If <code>x</code> is an object of class <a href="DBI.html#topic+Id">Id</a>,
calling <code>dbUnquoteIdentifier(..., x)</code> returns <code>list(x)</code>.
(For backends it may be most convenient to return <a href="DBI.html#topic+Id">Id</a> objects
to achieve this behavior, but this is not required.)
</p>
<p>Plain character vectors can also be passed to <code>dbUnquoteIdentifier()</code>.
</p>


<h3>Failure modes</h3>

<p>An error is raised if a character vectors with a missing value is passed
as the <code>x</code> argument.
</p>


<h3>Specification</h3>

<p>For any character vector of length one, quoting (with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>)
then unquoting then quoting the first element is identical to just quoting.
This is also true for strings that
contain special characters such as a space,
a dot,
a comma,
or quotes used to mark strings
or identifiers,
if the database supports this.
</p>
<p>Unquoting simple strings (consisting of only letters) wrapped with <code><a href="DBI.html#topic+SQL">SQL()</a></code> and
then quoting via <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> gives the same result as just
quoting the string.
Similarly, unquoting expressions of the form <code>SQL("schema.table")</code>
and then quoting gives the same result as quoting the identifier
constructed by <code>Id("schema", "table")</code>.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_write_table">spec_sql_write_table</a></code>
</p>

<hr>
<h2 id='spec_sql_write_table'>spec_sql_write_table</h2><span id='topic+spec_sql_write_table'></span>

<h3>Description</h3>

<p>spec_sql_write_table
</p>


<h3>Value</h3>

<p><code>dbWriteTable()</code> returns <code>TRUE</code>, invisibly.
</p>


<h3>Failure modes</h3>

<p>If the table exists, and both <code>append</code> and <code>overwrite</code> arguments are unset,
or <code>append = TRUE</code> and the data frame with the new data has different
column names,
an error is raised; the remote table remains unchanged.
</p>
<p>An error is raised when calling this method for a closed
or invalid connection.
An error is also raised
if <code>name</code> cannot be processed with <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code> or
if this results in a non-scalar.
Invalid values for the additional arguments <code>row.names</code>,
<code>overwrite</code>, <code>append</code>, <code>field.types</code>, and <code>temporary</code>
(non-scalars,
unsupported data types,
<code>NA</code>,
incompatible values,
duplicate
or missing names,
incompatible columns)
also raise an error.
</p>


<h3>Additional arguments</h3>

<p>The following arguments are not part of the <code>dbWriteTable()</code> generic
(to improve compatibility across backends)
but are part of the DBI specification:
</p>

<ul>
<li> <p><code>row.names</code> (default: <code>FALSE</code>)
</p>
</li>
<li> <p><code>overwrite</code> (default: <code>FALSE</code>)
</p>
</li>
<li> <p><code>append</code> (default: <code>FALSE</code>)
</p>
</li>
<li> <p><code>field.types</code> (default: <code>NULL</code>)
</p>
</li>
<li> <p><code>temporary</code> (default: <code>FALSE</code>)
</p>
</li></ul>

<p>They must be provided as named arguments.
See the &quot;Specification&quot; and &quot;Value&quot; sections for details on their usage.
</p>


<h3>Specification</h3>

<p>The <code>name</code> argument is processed as follows,
to support databases that allow non-syntactic names for their objects:
</p>

<ul>
<li><p> If an unquoted table name as string: <code>dbWriteTable()</code> will do the quoting,
perhaps by calling <code>dbQuoteIdentifier(conn, x = name)</code>
</p>
</li>
<li><p> If the result of a call to <code><a href="DBI.html#topic+dbQuoteIdentifier">dbQuoteIdentifier()</a></code>: no more quoting is done
</p>
</li></ul>

<p>The <code>value</code> argument must be a data frame
with a subset of the columns of the existing table if <code>append = TRUE</code>.
The order of the columns does not matter with <code>append = TRUE</code>.
</p>
<p>If the <code>overwrite</code> argument is <code>TRUE</code>, an existing table of the same name
will be overwritten.
This argument doesn't change behavior if the table does not exist yet.
</p>
<p>If the <code>append</code> argument is <code>TRUE</code>, the rows in an existing table are
preserved, and the new data are appended.
If the table doesn't exist yet, it is created.
</p>
<p>If the <code>temporary</code> argument is <code>TRUE</code>, the table is not available in a
second connection and is gone after reconnecting.
Not all backends support this argument.
A regular, non-temporary table is visible in a second connection,
in a pre-existing connection,
and after reconnecting to the database.
</p>
<p>SQL keywords can be used freely in table names, column names, and data.
Quotes, commas, spaces, and other special characters such as newlines and tabs,
can also be used in the data,
and, if the database supports non-syntactic identifiers,
also for table names
and column names.
</p>
<p>The following data types must be supported at least,
and be read identically with <code><a href="DBI.html#topic+dbReadTable">dbReadTable()</a></code>:
</p>

<ul>
<li><p> integer
</p>
</li>
<li><p> numeric
(the behavior for <code>Inf</code> and <code>NaN</code> is not specified)
</p>
</li>
<li><p> logical
</p>
</li>
<li> <p><code>NA</code> as NULL
</p>
</li>
<li><p> 64-bit values (using <code>"bigint"</code> as field type); the result can be
</p>

<ul>
<li><p> converted to a numeric, which may lose precision,
</p>
</li>
<li><p> converted a character vector, which gives the full decimal
representation
</p>
</li>
<li><p> written to another table and read again unchanged
</p>
</li></ul>

</li>
<li><p> character (in both UTF-8
and native encodings),
supporting empty strings
before and after a non-empty string
</p>
</li>
<li><p> factor (returned as character)
</p>
</li>
<li><p> list of raw
(if supported by the database)
</p>
</li>
<li><p> objects of type <a href="blob.html#topic+blob">blob::blob</a>
(if supported by the database)
</p>
</li>
<li><p> date
(if supported by the database;
returned as <code>Date</code>),
also for dates prior to 1970 or 1900 or after 2038
</p>
</li>
<li><p> time
(if supported by the database;
returned as objects that inherit from <code>difftime</code>)
</p>
</li>
<li><p> timestamp
(if supported by the database;
returned as <code>POSIXct</code>
respecting the time zone but not necessarily preserving the
input time zone),
also for timestamps prior to 1970 or 1900 or after 2038
respecting the time zone but not necessarily preserving the
input time zone)
</p>
</li></ul>

<p>Mixing column types in the same table is supported.
</p>
<p>The <code>field.types</code> argument must be a named character vector with at most
one entry for each column.
It indicates the SQL data type to be used for a new column.
If a column is missed from <code>field.types</code>, the type is inferred
from the input data with <code><a href="DBI.html#topic+dbDataType">dbDataType()</a></code>.
</p>
<p>The interpretation of <a href="base.html#topic+rownames">rownames</a> depends on the <code>row.names</code> argument,
see <code><a href="DBI.html#topic+sqlRownamesToColumn">sqlRownamesToColumn()</a></code> for details:
</p>

<ul>
<li><p> If <code>FALSE</code> or <code>NULL</code>, row names are ignored.
</p>
</li>
<li><p> If <code>TRUE</code>, row names are converted to a column named &quot;row_names&quot;,
even if the input data frame only has natural row names from 1 to <code>nrow(...)</code>.
</p>
</li>
<li><p> If <code>NA</code>, a column named &quot;row_names&quot; is created if the data has custom row names,
no extra column is created in the case of natural row names.
</p>
</li>
<li><p> If a string, this specifies the name of the column in the remote table
that contains the row names,
even if the input data frame only has natural row names.
</p>
</li></ul>

<p>The default is <code>row.names = FALSE</code>.
</p>


<h3>See Also</h3>

<p>Other sql specifications: 
<code><a href="#topic+spec_sql_append_table">spec_sql_append_table</a></code>,
<code><a href="#topic+spec_sql_create_table">spec_sql_create_table</a></code>,
<code><a href="#topic+spec_sql_exists_table">spec_sql_exists_table</a></code>,
<code><a href="#topic+spec_sql_list_fields">spec_sql_list_fields</a></code>,
<code><a href="#topic+spec_sql_list_objects">spec_sql_list_objects</a></code>,
<code><a href="#topic+spec_sql_list_tables">spec_sql_list_tables</a></code>,
<code><a href="#topic+spec_sql_quote_identifier">spec_sql_quote_identifier</a></code>,
<code><a href="#topic+spec_sql_quote_literal">spec_sql_quote_literal</a></code>,
<code><a href="#topic+spec_sql_quote_string">spec_sql_quote_string</a></code>,
<code><a href="#topic+spec_sql_read_table">spec_sql_read_table</a></code>,
<code><a href="#topic+spec_sql_remove_table">spec_sql_remove_table</a></code>,
<code><a href="#topic+spec_sql_unquote_identifier">spec_sql_unquote_identifier</a></code>
</p>

<hr>
<h2 id='spec_transaction_begin_commit_rollback'>spec_transaction_begin_commit_rollback</h2><span id='topic+spec_transaction_begin_commit_rollback'></span>

<h3>Description</h3>

<p>spec_transaction_begin_commit_rollback
</p>


<h3>Value</h3>

<p><code>dbBegin()</code>, <code>dbCommit()</code> and <code>dbRollback()</code> return <code>TRUE</code>, invisibly.
</p>


<h3>Failure modes</h3>

<p>The implementations are expected to raise an error in case of failure,
but this is not tested.
In any way, all generics throw an error with a closed
or invalid connection.
In addition, a call to <code>dbCommit()</code>
or <code>dbRollback()</code>
without a prior call to <code>dbBegin()</code> raises an error.
Nested transactions are not supported by DBI,
an attempt to call <code>dbBegin()</code> twice
yields an error.
</p>


<h3>Specification</h3>

<p>Actual support for transactions may vary between backends.
A transaction is initiated by a call to <code>dbBegin()</code>
and committed by a call to <code>dbCommit()</code>.
Data written in a transaction must persist after the transaction is committed.
For example, a record that is missing when the transaction is started
but is created during the transaction
must exist
both during
and after the transaction,
and also in a new connection.
</p>
<p>A transaction
can also be aborted with <code>dbRollback()</code>.
All data written in such a transaction must be removed after the
transaction is rolled back.
For example, a record that is missing when the transaction is started
but is created during the transaction
must not exist anymore after the rollback.
</p>
<p>Disconnection from a connection with an open transaction
effectively rolls back the transaction.
All data written in such a transaction must be removed after the
transaction is rolled back.
</p>
<p>The behavior is not specified if other arguments are passed to these
functions. In particular, <span class="pkg">RSQLite</span> issues named transactions
with support for nesting
if the <code>name</code> argument is set.
</p>
<p>The transaction isolation level is not specified by DBI.
</p>


<h3>See Also</h3>

<p>Other transaction specifications: 
<code><a href="#topic+spec_transaction_with_transaction">spec_transaction_with_transaction</a></code>
</p>

<hr>
<h2 id='spec_transaction_with_transaction'>spec_transaction_with_transaction</h2><span id='topic+spec_transaction_with_transaction'></span>

<h3>Description</h3>

<p>spec_transaction_with_transaction
</p>


<h3>Value</h3>

<p><code>dbWithTransaction()</code> returns the value of the executed code.
</p>


<h3>Failure modes</h3>

<p>Failure to initiate the transaction
(e.g., if the connection is closed
or invalid
of if <code><a href="DBI.html#topic+dbBegin">dbBegin()</a></code> has been called already)
gives an error.
</p>


<h3>Specification</h3>

<p><code>dbWithTransaction()</code> initiates a transaction with <code>dbBegin()</code>, executes
the code given in the <code>code</code> argument, and commits the transaction with
<code><a href="DBI.html#topic+dbCommit">dbCommit()</a></code>.
If the code raises an error, the transaction is instead aborted with
<code><a href="DBI.html#topic+dbRollback">dbRollback()</a></code>, and the error is propagated.
If the code calls <code>dbBreak()</code>, execution of the code stops and the
transaction is silently aborted.
All side effects caused by the code
(such as the creation of new variables)
propagate to the calling environment.
</p>


<h3>See Also</h3>

<p>Other transaction specifications: 
<code><a href="#topic+spec_transaction_begin_commit_rollback">spec_transaction_begin_commit_rollback</a></code>
</p>

<hr>
<h2 id='test_all'>Run all tests</h2><span id='topic+test_all'></span><span id='topic+test_some'></span>

<h3>Description</h3>

<p><code>test_all()</code> calls all tests defined in this package (see the section
&quot;Tests&quot; below). This function supports running only one test by setting an
environment variable, e.g., set the <code>DBITEST_ONLY_RESULT</code> to a nonempty
value to run only <code>test_result()</code>.
</p>
<p><code>test_some()</code> allows testing one or more tests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_all(skip = NULL, run_only = NULL, ctx = get_default_context())

test_some(test, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_all_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_all_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_all_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
<tr><td><code id="test_all_+3A_test">test</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code><br />
A character vector of regular expressions
describing the tests to run.
The regular expressions are matched against the entire test name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Internally <code>^</code> and <code>$</code> are used as prefix and suffix around the
regular expressions passed in the <code>skip</code> and <code>run_only</code> arguments.
</p>


<h3>Tests</h3>

<p>This function runs the following tests, except the stress tests:
</p>
<p><code><a href="#topic+test_getting_started">test_getting_started()</a></code>:
Getting started with testing
</p>
<p><code><a href="#topic+test_driver">test_driver()</a></code>:
Test the &quot;Driver&quot; class
</p>
<p><code><a href="#topic+test_connection">test_connection()</a></code>:
Test the &quot;Connection&quot; class
</p>
<p><code><a href="#topic+test_result">test_result()</a></code>:
Test the &quot;Result&quot; class
</p>
<p><code><a href="#topic+test_sql">test_sql()</a></code>:
Test SQL methods
</p>
<p><code><a href="#topic+test_meta">test_meta()</a></code>:
Test metadata functions
</p>
<p><code><a href="#topic+test_transaction">test_transaction()</a></code>:
Test transaction functions
</p>
<p><code><a href="#topic+test_arrow">test_arrow()</a></code>:
Test Arrow methods
</p>
<p><code><a href="#topic+test_compliance">test_compliance()</a></code>:
Test full compliance to DBI
</p>
<p><code><a href="#topic+test_stress">test_stress()</a></code>:
Stress tests (not tested with <code>test_all</code>)
</p>

<hr>
<h2 id='test_arrow'>Test Arrow methods</h2><span id='topic+test_arrow'></span>

<h3>Description</h3>

<p>Test Arrow methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_arrow(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_arrow_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_arrow_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_arrow_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_compliance'>Test full compliance to DBI</h2><span id='topic+test_compliance'></span>

<h3>Description</h3>

<p>Test full compliance to DBI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_compliance(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_compliance_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_compliance_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_compliance_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_connection'>Test the &quot;Connection&quot; class</h2><span id='topic+test_connection'></span>

<h3>Description</h3>

<p>Test the &quot;Connection&quot; class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_connection(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_connection_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_connection_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_connection_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_data_type'>test_data_type</h2><span id='topic+test_data_type'></span>

<h3>Description</h3>

<p>test_data_type
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_data_type(ctx, dbObj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_data_type_+3A_ctx">ctx</code>, <code id="test_data_type_+3A_dbobj">dbObj</code></td>
<td>
<p>Arguments to internal test function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dbDataType()</code> returns the SQL type that corresponds to the <code>obj</code> argument
as a non-empty
character string.
For data frames, a character vector with one element per column
is returned.
</p>


<h3>Failure modes</h3>

<p>An error is raised for invalid values for the <code>obj</code> argument such as a
<code>NULL</code> value.
</p>


<h3>Specification</h3>

<p>The backend can override the <code><a href="DBI.html#topic+dbDataType">dbDataType()</a></code> generic
for its driver class.
</p>
<p>This generic expects an arbitrary object as second argument.
To query the values returned by the default implementation,
run <code>example(dbDataType, package = "DBI")</code>.
If the backend needs to override this generic,
it must accept all basic R data types as its second argument, namely
<a href="base.html#topic+logical">logical</a>,
<a href="base.html#topic+integer">integer</a>,
<a href="base.html#topic+numeric">numeric</a>,
<a href="base.html#topic+character">character</a>,
dates (see <a href="base.html#topic+Dates">Dates</a>),
date-time (see <a href="base.html#topic+DateTimeClasses">DateTimeClasses</a>),
and <a href="base.html#topic+difftime">difftime</a>.
If the database supports blobs,
this method also must accept lists of <a href="base.html#topic+raw">raw</a> vectors,
and <a href="blob.html#topic+blob">blob::blob</a> objects.
As-is objects (i.e., wrapped by <code><a href="base.html#topic+I">I()</a></code>) must be
supported and return the same results as their unwrapped counterparts.
The SQL data type for <a href="base.html#topic+factor">factor</a> and
<a href="base.html#topic+ordered">ordered</a> is the same as for character.
The behavior for other object types is not specified.
</p>

<hr>
<h2 id='test_driver'>Test the &quot;Driver&quot; class</h2><span id='topic+test_driver'></span>

<h3>Description</h3>

<p>Test the &quot;Driver&quot; class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_driver(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_driver_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_driver_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_driver_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_getting_started'>Getting started with testing</h2><span id='topic+test_getting_started'></span>

<h3>Description</h3>

<p>Tests very basic features of a DBI driver package, to support testing
and test-first development right from the start.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_getting_started(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_getting_started_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_getting_started_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_getting_started_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_meta'>Test metadata functions</h2><span id='topic+test_meta'></span>

<h3>Description</h3>

<p>Test metadata functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_meta(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_meta_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_meta_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_meta_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_result'>Test the &quot;Result&quot; class</h2><span id='topic+test_result'></span>

<h3>Description</h3>

<p>Test the &quot;Result&quot; class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_result(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_result_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_result_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_result_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_sql'>Test SQL methods</h2><span id='topic+test_sql'></span>

<h3>Description</h3>

<p>Test SQL methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_sql(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_sql_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_sql_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_sql_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_stress'>Stress tests</h2><span id='topic+test_stress'></span>

<h3>Description</h3>

<p>Stress tests
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_stress(skip = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_stress_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_stress_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_transaction">test_transaction</a>()</code>
</p>

<hr>
<h2 id='test_transaction'>Test transaction functions</h2><span id='topic+test_transaction'></span>

<h3>Description</h3>

<p>Test transaction functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_transaction(skip = NULL, run_only = NULL, ctx = get_default_context())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_transaction_+3A_skip">skip</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; skip test if matching any.
The regular expressions are matched against the entire test name
minus a possible suffix <code style="white-space: pre;">&#8288;_N&#8288;</code> where <code>N</code> is a number.
For example, <code>skip = "exists_table"</code> will skip both
<code>"exists_table_1"</code> and <code>"exists_table_2"</code>.</p>
</td></tr>
<tr><td><code id="test_transaction_+3A_run_only">run_only</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character()]&#8288;</code><br /> A vector of regular expressions to match
against test names; run only these tests.
The regular expressions are matched against the entire test name.</p>
</td></tr>
<tr><td><code id="test_transaction_+3A_ctx">ctx</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[DBItest_context]&#8288;</code><br /> A test context as created by
<code><a href="#topic+make_context">make_context()</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other tests: 
<code><a href="#topic+test_arrow">test_arrow</a>()</code>,
<code><a href="#topic+test_compliance">test_compliance</a>()</code>,
<code><a href="#topic+test_connection">test_connection</a>()</code>,
<code><a href="#topic+test_driver">test_driver</a>()</code>,
<code><a href="#topic+test_getting_started">test_getting_started</a>()</code>,
<code><a href="#topic+test_meta">test_meta</a>()</code>,
<code><a href="#topic+test_result">test_result</a>()</code>,
<code><a href="#topic+test_sql">test_sql</a>()</code>,
<code><a href="#topic+test_stress">test_stress</a>()</code>
</p>

<hr>
<h2 id='tweaks'>Tweaks for DBI tests</h2><span id='topic+tweaks'></span>

<h3>Description</h3>

<p>The tweaks are a way to control the behavior of certain tests. Currently,
you need to search the <span class="pkg">DBItest</span> source code to understand which tests
are affected by which tweaks. This function is usually called to set the
<code>tweaks</code> argument in a <code><a href="#topic+make_context">make_context()</a></code> call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tweaks(
  ...,
  constructor_name = NULL,
  constructor_relax_args = FALSE,
  strict_identifier = FALSE,
  omit_blob_tests = FALSE,
  current_needs_parens = FALSE,
  union = function(x) paste(x, collapse = " UNION "),
  placeholder_pattern = NULL,
  logical_return = identity,
  date_cast = function(x) paste0("date('", x, "')"),
  time_cast = function(x) paste0("time('", x, "')"),
  timestamp_cast = function(x) paste0("timestamp('", x, "')"),
  blob_cast = identity,
  date_typed = TRUE,
  time_typed = TRUE,
  timestamp_typed = TRUE,
  temporary_tables = TRUE,
  list_temporary_tables = TRUE,
  allow_na_rows_affected = FALSE,
  is_null_check = function(x) paste0("(", x, " IS NULL)"),
  create_table_as = function(table_name, query) paste0("CREATE TABLE ", table_name,
    " AS ", query),
  dbitest_version = "1.7.1"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tweaks_+3A_...">...</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[any]&#8288;</code><br />
Unknown tweaks are accepted, with a warning.  The ellipsis
also makes sure that you only can pass named arguments.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_constructor_name">constructor_name</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
Name of the function that constructs the <code>Driver</code> object.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_constructor_relax_args">constructor_relax_args</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code><br />
If <code>TRUE</code>, allow a driver constructor with default values for all
arguments; otherwise, require a constructor with empty argument list
(default).</p>
</td></tr>
<tr><td><code id="tweaks_+3A_strict_identifier">strict_identifier</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code><br />
Set to <code>TRUE</code> if the DBMS does not support arbitrarily-named
identifiers even when quoting is used.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_omit_blob_tests">omit_blob_tests</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code><br />
Set to <code>TRUE</code> if the DBMS does not support a <code>BLOB</code> data
type.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_current_needs_parens">current_needs_parens</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code><br />
Set to <code>TRUE</code> if the SQL functions <code>current_date</code>,
<code>current_time</code>, and <code>current_timestamp</code> require parentheses.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_union">union</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(character)]&#8288;</code><br />
Function that combines several subqueries into one so that the
resulting query returns the concatenated results of the subqueries</p>
</td></tr>
<tr><td><code id="tweaks_+3A_placeholder_pattern">placeholder_pattern</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code><br />
A pattern for placeholders used in <code><a href="DBI.html#topic+dbBind">dbBind()</a></code>, e.g.,
<code>"?"</code>, <code>"$1"</code>, or <code>":name"</code>. See
<code><a href="#topic+make_placeholder_fun">make_placeholder_fun()</a></code> for details.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_logical_return">logical_return</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(logical)]&#8288;</code><br />
A vectorized function that converts logical values to the data type
returned by the DBI backend.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_date_cast">date_cast</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(character)]&#8288;</code><br />
A vectorized function that creates an SQL expression for coercing a
string to a date value.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_time_cast">time_cast</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(character)]&#8288;</code><br />
A vectorized function that creates an SQL expression for coercing a
string to a time value.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_timestamp_cast">timestamp_cast</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(character)]&#8288;</code><br />
A vectorized function that creates an SQL expression for coercing a
string to a timestamp value.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_blob_cast">blob_cast</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(character)]&#8288;</code><br />
A vectorized function that creates an SQL expression for coercing a
string to a blob value.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_date_typed">date_typed</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1L)]&#8288;</code><br />
Set to <code>FALSE</code> if the DBMS doesn't support a dedicated type for dates.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_time_typed">time_typed</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1L)]&#8288;</code><br />
Set to <code>FALSE</code> if the DBMS doesn't support a dedicated type for times.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_timestamp_typed">timestamp_typed</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1L)]&#8288;</code><br />
Set to <code>FALSE</code> if the DBMS doesn't support a dedicated type for
timestamps.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_temporary_tables">temporary_tables</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1L)]&#8288;</code><br />
Set to <code>FALSE</code> if the DBMS doesn't support temporary tables.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_list_temporary_tables">list_temporary_tables</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1L)]&#8288;</code><br />
Set to <code>FALSE</code> if the DBMS doesn't support listing temporary tables.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_allow_na_rows_affected">allow_na_rows_affected</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1L)]&#8288;</code><br />
Set to <code>TRUE</code> to allow <code><a href="DBI.html#topic+dbGetRowsAffected">dbGetRowsAffected()</a></code> to return <code>NA</code>.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_is_null_check">is_null_check</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(character)]&#8288;</code><br />
A vectorized function that creates an SQL expression for checking if a
value is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_create_table_as">create_table_as</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function(character(1), character(1))]&#8288;</code><br />
A function that creates an SQL expression for creating a table
from an SQL expression.</p>
</td></tr>
<tr><td><code id="tweaks_+3A_dbitest_version">dbitest_version</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
Compatible DBItest version, default: &quot;1.7.1&quot;.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
make_context(..., tweaks = tweaks(strict_identifier = TRUE))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
