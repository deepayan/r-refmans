<!DOCTYPE html><html><head><title>Help for package arcpullr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {arcpullr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#arcpullr-package'><p>arcpullr</p></a></li>
<li><a href='#example_urls'><p>Various URLs used in examples</p></a></li>
<li><a href='#format_coords'><p>Convert coordinates from an 'sf' object to formatted well-known text</p></a></li>
<li><a href='#get_geometry_type'><p>Get Geometry Type</p></a></li>
<li><a href='#get_image_layer'><p>Retrieve an image service layer from an ArcGIS REST API</p></a></li>
<li><a href='#get_layer_html'><p>Pull the HTML body from a web page</p></a></li>
<li><a href='#get_layer_info'><p>Retrieve metadata for a layer</p></a></li>
<li><a href='#get_layer_legend'><p>Returns a legend for a raster layer</p></a></li>
<li><a href='#get_layers_by_spatial'><p>Retrieve ArcGIS REST API spatial layer by spatial query</p></a></li>
<li><a href='#get_map_layer'><p>Retrieve a map service layer from an ArcGIS REST API</p></a></li>
<li><a href='#get_raster_layer'><p>Pull a raster layer from a map service or image service layer of an ArcGIS</p>
REST API</a></li>
<li><a href='#get_service_type'><p>Get elements of a Service or Layer from an ArcGIS REST endpoint</p></a></li>
<li><a href='#get_sf_crs'><p>Return CRS value of an sf object</p></a></li>
<li><a href='#get_spatial_layer'><p>Retrieve a feature service layer from an ArcGIS REST API</p></a></li>
<li><a href='#get_table_layer'><p>Retrieve a table from an ArcGIS REST API</p></a></li>
<li><a href='#match_raster_colors'><p>Match colors in RasterLayer color space to the provided legend values</p></a></li>
<li><a href='#plot_layer'><p>Plot a spatial layer</p></a></li>
<li><a href='#plot_layer,RasterBrick-method'><p>Plot a RasterBrick object</p></a></li>
<li><a href='#plot_layer,RasterLayer-method'><p>Plot a RasterLayer object</p></a></li>
<li><a href='#plot_layer,RasterStack-method'><p>Plot a RasterStack object</p></a></li>
<li><a href='#plot_layer,sf-method'><p>Plot an sf object</p></a></li>
<li><a href='#raster_colors'><p>Convert RasterLayer into data.frame of colors for each pixel that can be</p>
used for plotting</a></li>
<li><a href='#raster_colors,RasterBrick-method'><p>Convert RasterBrick into data.frame of colors that can be used for plotting</p></a></li>
<li><a href='#raster_colors,RasterLayer-method'><p>Convert RasterLayer into data.frame of colors that can be used for plotting</p></a></li>
<li><a href='#raster_colors,RasterStack-method'><p>Convert RasterStack into data.frame of colors that can be used for plotting</p></a></li>
<li><a href='#sf_example_polys'><p>Various example sf polygons</p></a></li>
<li><a href='#sf_example_raster'><p>Various example raster objects</p></a></li>
<li><a href='#sf_objects'><p>Create sf objects from coordinates</p></a></li>
<li><a href='#sp_rel_lookups'><p>Spatial relationship descriptor and lookup tables</p></a></li>
<li><a href='#sp_rel_xref'><p>Lookup function for shorthand versions of spatial relation text strings</p></a></li>
<li><a href='#sql_where'><p>Format a SQL where clause from arguments</p></a></li>
<li><a href='#valid_sp_rel'><p>Check to see which spatial relation types are applicable to the feature</p>
classes being queried and the sf objects use do to a spatial query</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Pull Data from an 'ArcGIS REST' API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.9</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Functions to efficiently query 'ArcGIS REST' APIs 
  <a href="https://developers.arcgis.com/rest/">https://developers.arcgis.com/rest/</a>. 
  Both spatial and SQL queries can be used to retrieve data. 
  Simple Feature (sf) objects are utilized to perform spatial queries. 
  This package was neither produced nor is maintained by Esri.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0), sf (&ge; 0.9.7),</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr (&ge; 1.4.1), jsonlite (&ge; 1.6.1), dplyr (&ge; 1.0.2),
ggplot2 (&ge; 3.3.0), tidyr (&ge; 1.0.2), rlang (&ge; 0.4.7), raster
(&ge; 3.4.5), grDevices, graphics, DT, methods</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.1), knitr (&ge; 1.30), rmarkdown (&ge; 2.6),
rvest (&ge; 0.3.6), xml2 (&ge; 1.3.2), stringr (&ge; 1.4.0), cowplot
(&ge; 1.1.1), magick (&ge; 2.5.2)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-11 18:32:25 UTC; paul</td>
</tr>
<tr>
<td>Author:</td>
<td>Paul Frater <a href="https://orcid.org/0000-0002-7237-6563"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Zac Driscoll <a href="https://orcid.org/0000-0002-8233-0980"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Paul Frater &lt;paul.frater@wisconsin.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-11 19:00:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='arcpullr-package'>arcpullr</h2><span id='topic+arcpullr-package'></span><span id='topic+arcpullr'></span>

<h3>Description</h3>

<p>A package for pulling spatial data from an ArcGIS REST API
</p>


<h3>Details</h3>

<p><img src="../help/figures/logo.png" alt='logo' width='15%' />

The role of the arcpullr package is simple...to pull spatial data from an
ArcGIS REST API. These APIs are housed by various different agencies,
organizations, entitites, etc., but allow a consistent format for storing and
retrieving spatial data
</p>


<h3><code><a href="#topic+get_spatial_layer">get_spatial_layer</a></code></h3>

<p>This function makes up the core of the package. It allows users to pull
spatial data given a URL of an ArcGIS REST API. There are many additional
query parameters that can (and probably should) be added; however, we've
simplified many of these out for you with the functions below.
</p>


<h3><code><a href="#topic+get_layer_by_spatial">get_layer_by_spatial</a></code> family of functions</h3>

<p>These functions allow you to pull layers using a spatial query. The abstract
syntax is wrapped into the functions, so all you have to do is pass these
functions an sf object of the spatial area, line, or point you want to query
by. These functions include get_layer_by_poly, get_layer_by_point,
get_layer_by_line, get_layer_by_multipoint, and get_layer_by_envelope. It
should be fairly obvious what type of spatial layer each function takes with
the exception of get_layer_by_envelope except that it isn't particularly
useful for a single point.
</p>


<h3><code><a href="#topic+get_image_layer">get_image_layer</a></code></h3>

<p>This is one of the core functions of the package. It retrieves image service
layers from an ArcGIS REST API designated by the URL
</p>


<h3><code><a href="#topic+get_map_layer">get_map_layer</a></code></h3>

<p>This is one of the core functions of the package. It retrieves map service
layers from an ArcGIS REST API designated by the URL
</p>


<h3>Helper functions</h3>

<p>There are a few utility functions to help you along the way. The first is
<code><a href="#topic+plot_layer">plot_layer</a></code>, which is a useful way to plot the spatial layer
you've tried to pull just to make sure it works. If you want fancier maps
you'd be better served with ggplot2 or tmaps, though.
</p>
<p>Other helpers include the <code><a href="#topic+sf_objects">sf_objects</a></code> functions, which allow
you to easily create sf points, lines, and polygons with a few coordinates.
</p>
<p>Lastly, there is a <code><a href="#topic+sql_where">sql_where</a></code> function to help aid in building
more complex SQL WHERE clauses used to query by the where argument in the
retrieval functions above.
</p>

<hr>
<h2 id='example_urls'>Various URLs used in examples</h2><span id='topic+example_urls'></span><span id='topic+reykjanes_lava_flow_url'></span><span id='topic+wi_hydro_url'></span><span id='topic+wi_landcover_url'></span><span id='topic+wi_leaf_off_url'></span>

<h3>Description</h3>

<p>These are URLs that are used for examples throughout the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reykjanes_lava_flow_url

wi_hydro_url

wi_landcover_url

wi_leaf_off_url
</code></pre>


<h3>Format</h3>

<p>Character strings of URLs
</p>
<p>An object of class <code>character</code> of length 1.
</p>
<p>An object of class <code>character</code> of length 1.
</p>
<p>An object of class <code>character</code> of length 1.
</p>

<hr>
<h2 id='format_coords'>Convert coordinates from an 'sf' object to formatted well-known text</h2><span id='topic+format_coords'></span><span id='topic+format_polygon_coords'></span><span id='topic+format_line_coords'></span><span id='topic+format_multipoint_coords'></span><span id='topic+format_point_coords'></span><span id='topic+format_envelope_coords'></span>

<h3>Description</h3>

<p>Use this function to convert the coordinates of a sf polygon object to
a string of well known text. The output can be passed to an ArcGIS REST
API to perform a spatial query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_polygon_coords(sf_obj)

format_line_coords(sf_obj)

format_multipoint_coords(sf_obj)

format_point_coords(sf_obj)

format_envelope_coords(sf_obj)

format_coords(sf_obj, geom_type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_coords_+3A_sf_obj">sf_obj</code></td>
<td>
<p>An sf object</p>
</td></tr>
<tr><td><code id="format_coords_+3A_geom_type">geom_type</code></td>
<td>
<p>Either &quot;points&quot;, &quot;paths&quot;, or &quot;rings&quot;. Choose wisely</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Spatial queries from an ArcGIS REST API require specific text inputs
formatted in a way called well-known text (WKT). ArcGIS REST APIs have their
own syntax for how the text is taken. These functions will format sf objects
in the correct way to be able to make spatial queries from a ArcGIS REST
API
</p>


<h3>Value</h3>

<p>String of well known text
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mke_polygon_coords &lt;- format_polygon_coords(mke_county)
</code></pre>

<hr>
<h2 id='get_geometry_type'>Get Geometry Type</h2><span id='topic+get_geometry_type'></span>

<h3>Description</h3>

<p>Get Geometry Type
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_geometry_type(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_geometry_type_+3A_url">url</code></td>
<td>
<p>A character string of a feature services URL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string of the layers geometry type
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_geometry_type(reykjanes_lava_flow_url)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_image_layer'>Retrieve an image service layer from an ArcGIS REST API</h2><span id='topic+get_image_layer'></span>

<h3>Description</h3>

<p>This function retrieves image service layers from an ArcGIS
REST services API and returns them as a <code>RasterStack</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_image_layer(
  url,
  sf_object = NULL,
  bbox = NULL,
  bbox_crs = NULL,
  token = "",
  clip_raster = TRUE,
  format = "png",
  transparent = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_image_layer_+3A_url">url</code></td>
<td>
<p>A character string of the url for the layer to pull</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_sf_object">sf_object</code></td>
<td>
<p>An <code>sf</code> object used for the bounding box</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_bbox">bbox</code></td>
<td>
<p>Vector of bounding box coordinates</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_bbox_crs">bbox_crs</code></td>
<td>
<p>CRS for bbox (required if bbox is used)</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_token">token</code></td>
<td>
<p>A character string of the token (if needed)</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_clip_raster">clip_raster</code></td>
<td>
<p>Logical. Should the raster be clipped to contain only
the pixels that reside in the <code>sf_object</code>? By default, ArcGIS returns
some overlapping edge pixels. Setting <code>clip_raster</code> to TRUE (default)
will remove these using <code><a href="raster.html#topic+mask">mask</a></code> from the <code>raster</code>
package</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_format">format</code></td>
<td>
<p>The raster format desired. Default is &quot;png&quot;</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_transparent">transparent</code></td>
<td>
<p>Logical. Retrieve a raster with a transparent background
(TRUE, default) or not (FALSE)</p>
</td></tr>
<tr><td><code id="get_image_layer_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to the ArcGIS REST API</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is one of the core functions of the package. It retrieves image service
layers from an ArcGIS REST API designated by the URL. These layers require a
bounding box to query the map layer, which is either taken from the
<code>sf_object</code> argument or optionally can be passed via the <code>bbox</code>
argument. Either <code>sf_object</code> or <code>bbox</code> are optional, but one of
them must be present.
</p>
<p>All of the querying parameters are sent via a POST request to the URL, so
if there are issues with passing additional parameters via <code>...</code>
first determine how they fit into the POST request and make adjustments as
needed. This syntax can be tricky if you're not used to it.
</p>


<h3>Value</h3>

<p>A &quot;RasterStack&quot; object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_leaf_off_layer &lt;- get_image_layer(wi_leaf_off_url, wis_poly)
plot_layer(wi_leaf_off_layer, outline_poly = wis_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_layer_html'>Pull the HTML body from a web page</h2><span id='topic+get_layer_html'></span>

<h3>Description</h3>

<p>Used internally to pull HTML for a layer's web page so that the call
doesn't have to be made twice in <code><a href="#topic+get_geometry_type">get_geometry_type</a></code> if the
url provided there is for a raster layer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_layer_html(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_layer_html_+3A_url">url</code></td>
<td>
<p>Character. The URL of the web page</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string of the HTML body
</p>

<hr>
<h2 id='get_layer_info'>Retrieve metadata for a layer</h2><span id='topic+get_layer_info'></span>

<h3>Description</h3>

<p>This function retrieves metadata for a layer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_layer_info(url, token = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_layer_info_+3A_url">url</code></td>
<td>
<p>A character string of the url for the layer to pull</p>
</td></tr>
<tr><td><code id="get_layer_info_+3A_token">token</code></td>
<td>
<p>A character string of the token (if needed)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of metadata fields
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# lava flows on Reykjanes (pr. 'rake-yah-ness') peninsula in Iceland
lava_flows_info &lt;- get_layer_info(reykjanes_lava_flow_url)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_layer_legend'>Returns a legend for a raster layer</h2><span id='topic+get_layer_legend'></span>

<h3>Description</h3>

<p>Raster layers are accompanied with legends to identify what the colors mean.
This function retrieves those legend values and returns them as a data.frame
with the associated RGB color values. This will likely be most useful for
plotting and analysis of map layers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_layer_legend(url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_layer_legend_+3A_url">url</code></td>
<td>
<p>A URL to a Map or Image Service layer</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with two columns (color, values) and the number of
rows equal to the number of values in a layer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_layer_legend(wi_landcover_url)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_layers_by_spatial'>Retrieve ArcGIS REST API spatial layer by spatial query</h2><span id='topic+get_layers_by_spatial'></span><span id='topic+get_layer_by_poly'></span><span id='topic+get_layer_by_line'></span><span id='topic+get_layer_by_point'></span><span id='topic+get_layer_by_multipoint'></span><span id='topic+get_layer_by_envelope'></span><span id='topic+get_layer_by_spatial'></span>

<h3>Description</h3>

<p>These functions are wrappers around <code><a href="#topic+get_spatial_layer">get_spatial_layer</a></code> that are
specialized for querying by a spatial layer. They will make a POST request
to the query URL which returns data (if available) based on the appropriate
spatial feature (<code>geometry</code>) and relationship (<code>sp_rel</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_layer_by_poly(url, geometry, sp_rel = "contains", ...)

get_layer_by_line(url, geometry, sp_rel = "intersects", ...)

get_layer_by_point(url, geometry, sp_rel = "intersects", ...)

get_layer_by_multipoint(url, geometry, sp_rel = "intersects", ...)

get_layer_by_envelope(url, geometry, sp_rel = "intersects", ...)

get_layer_by_spatial(
  url,
  geometry,
  geom_type,
  sp_ref = NULL,
  sp_rel = "intersects",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_layers_by_spatial_+3A_url">url</code></td>
<td>
<p>A character string of the url for the layer to pull</p>
</td></tr>
<tr><td><code id="get_layers_by_spatial_+3A_geometry">geometry</code></td>
<td>
<p>An <code>sf</code> object used for the spatial query</p>
</td></tr>
<tr><td><code id="get_layers_by_spatial_+3A_sp_rel">sp_rel</code></td>
<td>
<p>Character. The type of relationship to query by. Possible
options include &quot;intersects&quot;, &quot;contains&quot;, and &quot;crosses&quot;</p>
</td></tr>
<tr><td><code id="get_layers_by_spatial_+3A_...">...</code></td>
<td>
<p>Additional arguements to pass to <code><a href="#topic+get_spatial_layer">get_spatial_layer</a></code></p>
</td></tr>
<tr><td><code id="get_layers_by_spatial_+3A_geom_type">geom_type</code></td>
<td>
<p>A character of the geometry type to be used. This param is
automatically specified in all <code>get_layer_by_*</code> functions except
<code>get_spatial_layer</code></p>
</td></tr>
<tr><td><code id="get_layers_by_spatial_+3A_sp_ref">sp_ref</code></td>
<td>
<p>The spatial reference value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class &quot;sf&quot; of the appropriate layer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  mke_waters &lt;- get_layer_by_poly(wi_hydro_url, mke_county)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_map_layer'>Retrieve a map service layer from an ArcGIS REST API</h2><span id='topic+get_map_layer'></span>

<h3>Description</h3>

<p>This function retrieves map service layers from an ArcGIS
REST services API and returns them as a <code>RasterLayer</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_map_layer(
  url,
  sf_object = NULL,
  bbox = NULL,
  bbox_crs = NULL,
  token = "",
  clip_raster = TRUE,
  format = "png",
  transparent = TRUE,
  add_legend = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_map_layer_+3A_url">url</code></td>
<td>
<p>A character string of the url for the layer to pull</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_sf_object">sf_object</code></td>
<td>
<p>An <code>sf</code> object used for the bounding box</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_bbox">bbox</code></td>
<td>
<p>Vector of bounding box coordinates</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_bbox_crs">bbox_crs</code></td>
<td>
<p>CRS for bbox (required if bbox is used)</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_token">token</code></td>
<td>
<p>A character string of the token (if needed)</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_clip_raster">clip_raster</code></td>
<td>
<p>Logical. Should the raster be clipped to contain only
the pixels that reside in the <code>sf_object</code>? By default, ArcGIS returns
some overlapping edge pixels. Setting <code>clip_raster</code> to TRUE (default)
will remove these using <code><a href="raster.html#topic+mask">mask</a></code> from the <code>raster</code>
package</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_format">format</code></td>
<td>
<p>The raster format desired. Default is &quot;png&quot;</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_transparent">transparent</code></td>
<td>
<p>Logical. Retrieve a raster with a transparent background
(TRUE, default) or not (FALSE)</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_add_legend">add_legend</code></td>
<td>
<p>Logical. Pull legend and match to color values
(TRUE, default) or not (FALSE)</p>
</td></tr>
<tr><td><code id="get_map_layer_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to the ArcGIS REST API</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is one of the core functions of the package. It retrieves map service
layers from an ArcGIS REST API designated by the URL. These layers require a
bounding box to query the map layer, which is either taken from the
<code>sf_object</code> argument or optionally can be passed via the <code>bbox</code>
argument. Either <code>sf_object</code> or <code>bbox</code> are optional, but one of
them must be present.
</p>
<p>All of the querying parameters are sent via a POST request to the URL, so
if there are issues with passing additional parameters via <code>...</code>
first determine how they fit into the POST request and make adjustments as
needed. This syntax can be tricky if you're not used to it.
</p>


<h3>Value</h3>

<p>A &quot;RasterLayer&quot; object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_landcover&lt;- get_map_layer(wi_landcover_url, wis_poly)
plot_layer(wi_landcover, outline_poly = wis_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_raster_layer'>Pull a raster layer from a map service or image service layer of an ArcGIS
REST API</h2><span id='topic+get_raster_layer'></span>

<h3>Description</h3>

<p>This is an internal function to pull raster layers from either a map service
or an image service of an ArcGIS REST API. This function is the engine that
drives <code><a href="#topic+get_map_layer">get_map_layer</a></code> and <code><a href="#topic+get_image_layer">get_image_layer</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_raster_layer(
  url,
  sf_object = NULL,
  bbox = NULL,
  bbox_crs = NULL,
  token = "",
  clip_raster = TRUE,
  format = "png",
  transparent = TRUE,
  export_type = "map",
  add_legend = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_raster_layer_+3A_url">url</code></td>
<td>
<p>A character string of the url for the layer to pull</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_sf_object">sf_object</code></td>
<td>
<p>An <code>sf</code> object used for the bounding box</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_bbox">bbox</code></td>
<td>
<p>Vector of bounding box coordinates</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_bbox_crs">bbox_crs</code></td>
<td>
<p>CRS for bbox (required if bbox is used)</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_token">token</code></td>
<td>
<p>A character string of the token (if needed)</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_clip_raster">clip_raster</code></td>
<td>
<p>Logical. Should the raster be clipped to contain only
the pixels that reside in the <code>sf_object</code>? By default, ArcGIS returns
some overlapping edge pixels. Setting <code>clip_raster</code> to TRUE (default)
will remove these using <code><a href="raster.html#topic+mask">mask</a></code> from the <code>raster</code>
package</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_format">format</code></td>
<td>
<p>The raster format desired. Default is &quot;png&quot;</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_transparent">transparent</code></td>
<td>
<p>Logical. Retrieve a raster with a transparent background
(TRUE, default) or not (FALSE)</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_export_type">export_type</code></td>
<td>
<p>Character. Either &quot;map&quot; or &quot;image&quot; for the respective
service layer desired</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_add_legend">add_legend</code></td>
<td>
<p>Logical. Pull legend and match to color values
(TRUE, default) or not (FALSE)</p>
</td></tr>
<tr><td><code id="get_raster_layer_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to the ArcGIS REST API</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of type <code>RasterLayer</code> if <code>export_type = "map"</code> or
an object of type <code>RasterStack</code> if <code>export_type = "image"</code>
</p>

<hr>
<h2 id='get_service_type'>Get elements of a Service or Layer from an ArcGIS REST endpoint</h2><span id='topic+get_service_type'></span>

<h3>Description</h3>

<p>This family of functions is meant to pull attributes from a particular
service or layer hosted on an ArcGIS REST API. If the service is an
ImageServer or MapServer, then the behavior will be slightly different than
for a Feature Layer (see details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_service_type(url, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_service_type_+3A_url">url</code></td>
<td>
<p>A character string of a valid layer URL</p>
</td></tr>
<tr><td><code id="get_service_type_+3A_...">...</code></td>
<td>
<p>Only used internally, but html can be passed</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_service_type</code> will return the type of service or layer for the
respective URL (or html) that is passed to the function. For a feature layer
the function should return &quot;feature_layer&quot;, for a Image or Map Server the
function will return &quot;image&quot; or &quot;map&quot;, respectively.
</p>
<p><code>get_geometry_type</code> will return the geometry type of feature service
layers housed on an ArcGIS REST API server. If a URL is provided that points
to a map or image layer the function will return an error (i.e. only
feature layers have geometry types).
</p>
<p><code>get_supported_operations</code> will simply return a character vector that
lists the supported operations for <code>url</code>.
</p>


<h3>Value</h3>

<p>A character string defining the layer type
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_service_type(reykjanes_lava_flow_url)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_sf_crs'>Return CRS value of an sf object</h2><span id='topic+get_sf_crs'></span>

<h3>Description</h3>

<p>Return CRS value of an sf object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_sf_crs(sf_obj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_sf_crs_+3A_sf_obj">sf_obj</code></td>
<td>
<p>An object of class sf</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value referring to the coordinate reference system
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_sf_crs(iceland_poly)
</code></pre>

<hr>
<h2 id='get_spatial_layer'>Retrieve a feature service layer from an ArcGIS REST API</h2><span id='topic+get_spatial_layer'></span>

<h3>Description</h3>

<p>This function retrieves spatial layers present in Feature Service layers of
an ArcGIS REST services API and returns them as an <code>sf</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_spatial_layer(
  url,
  out_fields = c("*"),
  where = "1=1",
  token = "",
  sf_type = NULL,
  head = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_spatial_layer_+3A_url">url</code></td>
<td>
<p>A character string of the url for the layer to pull</p>
</td></tr>
<tr><td><code id="get_spatial_layer_+3A_out_fields">out_fields</code></td>
<td>
<p>A character string of the fields to pull for each layer</p>
</td></tr>
<tr><td><code id="get_spatial_layer_+3A_where">where</code></td>
<td>
<p>A character string of the where condition. Default is 1=1</p>
</td></tr>
<tr><td><code id="get_spatial_layer_+3A_token">token</code></td>
<td>
<p>A character string of the token (if needed)</p>
</td></tr>
<tr><td><code id="get_spatial_layer_+3A_sf_type">sf_type</code></td>
<td>
<p>A character string specifying the layer geometry to convert to
sf (&quot;esriGeometryPolygon&quot;, &quot;esriGeometryPoint&quot;, &quot;esriGeometryPolyline&quot;),
if NULL (default) the server will take its best guess</p>
</td></tr>
<tr><td><code id="get_spatial_layer_+3A_head">head</code></td>
<td>
<p>Logical or numeric. Limits the number of records returned from a
query. If TRUE, only the first 5 records will be returned. If numeric, then
the number of records specified in <code>head</code> will be returned</p>
</td></tr>
<tr><td><code id="get_spatial_layer_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to the ArcGIS REST POST request (or
associated internal functions used to query them)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is one of the core functions of this package. It retrieves spatial
layers from feature services of an ArcGIS REST API designated by the URL.
Additional querying features can be passed such as a SQL WHERE statement
(<code>where</code> argument) or spatial queries as well as any other types of
queries that the ArcGIS REST API accepts (using <code>...</code>). However, for
easier spatial querying see <code><a href="#topic+get_layers_by_spatial">get_layers_by_spatial</a></code>.
</p>
<p>All of the querying parameters are sent via a POST request to the URL, so
if there are issues with passing additional parameters via <code>...</code>
first determine how they fit into the POST request and make adjustments as
needed. This syntax can be tricky if you're not used to it.
</p>


<h3>Value</h3>

<p>An object of class &quot;sf&quot; of the appropriate layer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# lava flows on Reykjanes (pr. 'rake-yah-ness') peninsula in Iceland
lava_flows &lt;- get_spatial_layer(reykjanes_lava_flow_url)
plot_layer(lava_flows, outline_poly = reykjanes_poly)
plot_layer(lava_flows, outline_poly = iceland_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_table_layer'>Retrieve a table from an ArcGIS REST API</h2><span id='topic+get_table_layer'></span>

<h3>Description</h3>

<p>This function retrieves tables present in an ArcGIS REST services API and
returns them as a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_table_layer(
  url,
  out_fields = "*",
  where = "1=1",
  token = "",
  head = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_table_layer_+3A_url">url</code></td>
<td>
<p>A character string of the url for the layer to pull</p>
</td></tr>
<tr><td><code id="get_table_layer_+3A_out_fields">out_fields</code></td>
<td>
<p>A character string of the fields to pull for each layer</p>
</td></tr>
<tr><td><code id="get_table_layer_+3A_where">where</code></td>
<td>
<p>A character string of the where condition. Default is 1=1</p>
</td></tr>
<tr><td><code id="get_table_layer_+3A_token">token</code></td>
<td>
<p>A character string of the token (if needed)</p>
</td></tr>
<tr><td><code id="get_table_layer_+3A_head">head</code></td>
<td>
<p>Logical or numeric. Limits the number of records returned from a
query. If TRUE, only the first 5 records will be returned. If numeric, then
the number of records specified in <code>head</code> will be returned</p>
</td></tr>
<tr><td><code id="get_table_layer_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to the ArcGIS REST POST request (or
associated internal functions used to query them)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function retrieves tables from an ArcGIS REST API designated by the
URL. Additional querying features can be passed such as a SQL WHERE
statement (<code>where</code> argument) as well as any other types of queries
that the ArcGIS REST API accepts (using <code>...</code>).
</p>
<p>All of the querying parameters are sent via a POST request to the URL, so
if there are issues with passing additional parameters via <code>...</code>
first determine how they fit into the POST request and make adjustments as
needed. This syntax can be tricky if you're not used to it.
</p>


<h3>Value</h3>

<p>A data frame of the appropriate layer
</p>

<hr>
<h2 id='match_raster_colors'>Match colors in RasterLayer color space to the provided legend values</h2><span id='topic+match_raster_colors'></span>

<h3>Description</h3>

<p>Colors provided by the legend do not always correspond exactly with the
colors in the colortable of a RasterLayer object. They are usually pretty
close, though, so this function finds the closest colors, maps them to the
appropriate colors in the Raster* object, and applies that to the legend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_raster_colors(legend, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="match_raster_colors_+3A_legend">legend</code></td>
<td>
<p>An object of class raster_legend as returned by
<code><a href="#topic+get_layer_legend">get_layer_legend</a></code></p>
</td></tr>
<tr><td><code id="match_raster_colors_+3A_x">x</code></td>
<td>
<p>A RasterLayer object as returned by <code><a href="#topic+get_map_layer">get_map_layer</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Raster colors in <code>x</code> are mapped to those in <code>legend</code> by converting
the RGB hexadecimal values to a 3D vector of values for red, green and blue.
The closest values are then assigned using 3D Pythagorean theorem to compute
the distance among all colors. The minimum distance in three dimensional
space is the color in <code>x</code> that gets mapped to the appropriate color in
<code>legend</code>.
</p>


<h3>Value</h3>

<p>A raster_legend object with corrected colors to match those in
<code>x</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_landcover &lt;- get_map_layer(wi_landcover_url, wis_poly)
legend &lt;- get_layer_legend(wi_landcover_url)
new_legend &lt;- match_raster_colors(legend, wi_landcover_url)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_layer'>Plot a spatial layer</h2><span id='topic+plot_layer'></span><span id='topic+plot_layer.sf'></span>

<h3>Description</h3>

<p>This function plots a spatial layer as returned from
<code><a href="#topic+get_spatial_layer">get_spatial_layer</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_layer(x, ...)

plot_layer.sf(
  x,
  outline_poly = NULL,
  outline_size = 1.2,
  outline_color = "gray30",
  plot_pkg = "ggplot",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_layer_+3A_x">x</code></td>
<td>
<p>An sf or Raster* object as returned from a
<code>get_*_layer</code> function</p>
</td></tr>
<tr><td><code id="plot_layer_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>plot_layer</code></p>
</td></tr>
<tr><td><code id="plot_layer_+3A_outline_poly">outline_poly</code></td>
<td>
<p>Optional. An sf polygon to outline <code>sf_data</code> for
context</p>
</td></tr>
<tr><td><code id="plot_layer_+3A_outline_size">outline_size</code></td>
<td>
<p>Numeric argument that controls width of parameter</p>
</td></tr>
<tr><td><code id="plot_layer_+3A_outline_color">outline_color</code></td>
<td>
<p>A character vector of a valid color</p>
</td></tr>
<tr><td><code id="plot_layer_+3A_plot_pkg">plot_pkg</code></td>
<td>
<p>Character. The plotting environment to use. Either &quot;ggplot&quot;
(default) or &quot;base&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a <code>ggplot</code> object, or simply plots <code>x</code> if
<code>plot_pkg = "base"</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
plot_layer(iceland_poly)
plot_layer(portage_county, outline_poly = wis_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_layer+2CRasterBrick-method'>Plot a RasterBrick object</h2><span id='topic+plot_layer+2CRasterBrick-method'></span>

<h3>Description</h3>

<p>Plot a RasterBrick object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterBrick'
plot_layer(
  x,
  outline_poly = NULL,
  outline_size = 1.2,
  outline_color = "gray30",
  plot_pkg = "ggplot",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_layer+2B2CRasterBrick-method_+3A_x">x</code></td>
<td>
<p>An sf or Raster* object as returned from a
<code>get_*_layer</code> function</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterBrick-method_+3A_outline_poly">outline_poly</code></td>
<td>
<p>Optional. An sf polygon to outline <code>sf_data</code> for
context</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterBrick-method_+3A_outline_size">outline_size</code></td>
<td>
<p>Numeric argument that controls width of parameter</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterBrick-method_+3A_outline_color">outline_color</code></td>
<td>
<p>A character vector of a valid color</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterBrick-method_+3A_plot_pkg">plot_pkg</code></td>
<td>
<p>Character. The plotting environment to use. Either &quot;ggplot&quot;
(default) or &quot;base&quot;</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterBrick-method_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>plot_layer</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_aerial &lt;- get_map_layer(wi_leaf_off_url, wis_poly)
plot_layer(wi_aerial, outline_poly = wis_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_layer+2CRasterLayer-method'>Plot a RasterLayer object</h2><span id='topic+plot_layer+2CRasterLayer-method'></span>

<h3>Description</h3>

<p>Plot a RasterLayer object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterLayer'
plot_layer(
  x,
  outline_poly = NULL,
  outline_size = 1.2,
  outline_color = "gray30",
  legend = TRUE,
  plot_pkg = "ggplot",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_layer+2B2CRasterLayer-method_+3A_x">x</code></td>
<td>
<p>An sf or Raster* object as returned from a
<code>get_*_layer</code> function</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterLayer-method_+3A_outline_poly">outline_poly</code></td>
<td>
<p>Optional. An sf polygon to outline <code>sf_data</code> for
context</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterLayer-method_+3A_outline_size">outline_size</code></td>
<td>
<p>Numeric argument that controls width of parameter</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterLayer-method_+3A_outline_color">outline_color</code></td>
<td>
<p>A character vector of a valid color</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterLayer-method_+3A_legend">legend</code></td>
<td>
<p>Logical. Only valid when plotting RasterLayers
retrieved from <code><a href="#topic+get_map_layer">get_map_layer</a></code> where legend was also retrieved</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterLayer-method_+3A_plot_pkg">plot_pkg</code></td>
<td>
<p>Character. The plotting environment to use. Either &quot;ggplot&quot;
(default) or &quot;base&quot;</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterLayer-method_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>plot_layer</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_landcover &lt;- get_map_layer(wi_landcover_url, wis_poly)
plot_layer(wi_landcover, outline_poly = wis_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_layer+2CRasterStack-method'>Plot a RasterStack object</h2><span id='topic+plot_layer+2CRasterStack-method'></span>

<h3>Description</h3>

<p>Plot a RasterStack object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterStack'
plot_layer(
  x,
  outline_poly = NULL,
  outline_size = 1.2,
  outline_color = "gray30",
  plot_pkg = "ggplot",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_layer+2B2CRasterStack-method_+3A_x">x</code></td>
<td>
<p>An sf or Raster* object as returned from a
<code>get_*_layer</code> function</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterStack-method_+3A_outline_poly">outline_poly</code></td>
<td>
<p>Optional. An sf polygon to outline <code>sf_data</code> for
context</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterStack-method_+3A_outline_size">outline_size</code></td>
<td>
<p>Numeric argument that controls width of parameter</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterStack-method_+3A_outline_color">outline_color</code></td>
<td>
<p>A character vector of a valid color</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterStack-method_+3A_plot_pkg">plot_pkg</code></td>
<td>
<p>Character. The plotting environment to use. Either &quot;ggplot&quot;
(default) or &quot;base&quot;</p>
</td></tr>
<tr><td><code id="plot_layer+2B2CRasterStack-method_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>plot_layer</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_aerial &lt;- get_map_layer(wi_leaf_off_url, wis_poly)
plot_layer(wi_aerial, outline_poly = wis_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_layer+2Csf-method'>Plot an sf object</h2><span id='topic+plot_layer+2Csf-method'></span>

<h3>Description</h3>

<p>Plot an sf object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'sf'
plot_layer(
  x,
  outline_poly = NULL,
  outline_size = 1.2,
  outline_color = "gray30",
  plot_pkg = "ggplot",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_layer+2B2Csf-method_+3A_x">x</code></td>
<td>
<p>An sf or Raster* object as returned from a
<code>get_*_layer</code> function</p>
</td></tr>
<tr><td><code id="plot_layer+2B2Csf-method_+3A_outline_poly">outline_poly</code></td>
<td>
<p>Optional. An sf polygon to outline <code>sf_data</code> for
context</p>
</td></tr>
<tr><td><code id="plot_layer+2B2Csf-method_+3A_outline_size">outline_size</code></td>
<td>
<p>Numeric argument that controls width of parameter</p>
</td></tr>
<tr><td><code id="plot_layer+2B2Csf-method_+3A_outline_color">outline_color</code></td>
<td>
<p>A character vector of a valid color</p>
</td></tr>
<tr><td><code id="plot_layer+2B2Csf-method_+3A_plot_pkg">plot_pkg</code></td>
<td>
<p>Character. The plotting environment to use. Either &quot;ggplot&quot;
(default) or &quot;base&quot;</p>
</td></tr>
<tr><td><code id="plot_layer+2B2Csf-method_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>plot_layer</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
plot_layer(wis_poly)

## End(Not run)
</code></pre>

<hr>
<h2 id='raster_colors'>Convert RasterLayer into data.frame of colors for each pixel that can be
used for plotting</h2><span id='topic+raster_colors'></span>

<h3>Description</h3>

<p>This function is used internally by <code><a href="#topic+plot_layer">plot_layer</a></code> to convert a
Raster* object to a data.frame of colors for each pixel that can be used for
plotting with ggplot2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raster_colors(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster_colors_+3A_x">x</code></td>
<td>
<p>A Raster* object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with 3 columns and <code>length(raster_object)</code> rows.
Two of these columns are the x-y coordinates of each pixel, and one is a
value for color that can be used for plotting
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_landcover &lt;- get_map_layer(wi_landcover_url, wis_poly)
wi_landcover_data &lt;- raster_colors(wi_landcover)
head(wi_landcover_data)

## End(Not run)
</code></pre>

<hr>
<h2 id='raster_colors+2CRasterBrick-method'>Convert RasterBrick into data.frame of colors that can be used for plotting</h2><span id='topic+raster_colors+2CRasterBrick-method'></span>

<h3>Description</h3>

<p>This function is used internally by <code><a href="#topic+plot_layer">plot_layer</a></code> to convert a
RasterBrick object to a data.frame of colors for each pixel that can be used
for plotting with ggplot2. Note that this function assumes that the first
three bands in the RasterBrick objects are the RGB values and all additional
bands are ignored.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterBrick'
raster_colors(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster_colors+2B2CRasterBrick-method_+3A_x">x</code></td>
<td>
<p>A RasterBrick object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with 3 columns and <code>length(raster_object)</code> rows
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_leaf_off_layer &lt;- get_image_layer(wi_leaf_off_url, wis_poly)
wi_leaf_off_data &lt;- raster_colors(wi_leaf_off_layer)

## End(Not run)
</code></pre>

<hr>
<h2 id='raster_colors+2CRasterLayer-method'>Convert RasterLayer into data.frame of colors that can be used for plotting</h2><span id='topic+raster_colors+2CRasterLayer-method'></span>

<h3>Description</h3>

<p>This function is used internally by <code><a href="#topic+plot_layer">plot_layer</a></code> to convert a
RasterLayer object to a data.frame of colors for each pixel that can be used
for plotting with ggplot2
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterLayer'
raster_colors(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster_colors+2B2CRasterLayer-method_+3A_x">x</code></td>
<td>
<p>A RasterLayer object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with 3 columns and <code>length(raster_object)</code> rows
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_landcover &lt;- get_map_layer(wi_landcover_url, wis_poly)
wi_landcover_data &lt;- raster_colors(wi_landcover)

## End(Not run)
</code></pre>

<hr>
<h2 id='raster_colors+2CRasterStack-method'>Convert RasterStack into data.frame of colors that can be used for plotting</h2><span id='topic+raster_colors+2CRasterStack-method'></span>

<h3>Description</h3>

<p>This function is used internally by <code><a href="#topic+plot_layer">plot_layer</a></code> to convert a
RasterStack object to a data.frame of colors for each pixel that can be used
for plotting with ggplot2. Note that this function assumes that the first
three bands in the RasterStack objects are the RGB values and all additional
bands are ignored.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterStack'
raster_colors(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster_colors+2B2CRasterStack-method_+3A_x">x</code></td>
<td>
<p>A RasterStack object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with 3 columns and <code>length(raster_object)</code> rows
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wi_leaf_off_layer &lt;- get_image_layer(wi_leaf_off_url, wis_poly)
wi_leaf_off_data &lt;- raster_colors(wi_leaf_off_layer)

## End(Not run)
</code></pre>

<hr>
<h2 id='sf_example_polys'>Various example sf polygons</h2><span id='topic+sf_example_polys'></span><span id='topic+iceland_poly'></span><span id='topic+mke_county'></span><span id='topic+portage_county'></span><span id='topic+reykjanes_poly'></span><span id='topic+wis_counties'></span><span id='topic+wis_poly'></span><span id='topic+cook_creek_ws'></span><span id='topic+cook_creek_streams'></span><span id='topic+cook_creek_env'></span><span id='topic+mke_river'></span><span id='topic+poly_streams_contains'></span><span id='topic+poly_streams_crosses'></span><span id='topic+sugar_creek'></span><span id='topic+sugar_creek_env'></span><span id='topic+trout_hab_project_pt'></span><span id='topic+trout_hab_project_pts'></span><span id='topic+example_poly'></span>

<h3>Description</h3>

<p>These are sf polygons that are used for examples throughout the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iceland_poly

mke_county

portage_county

reykjanes_poly

wis_counties

wis_poly

cook_creek_ws

cook_creek_streams

cook_creek_env

mke_river

poly_streams_contains

poly_streams_crosses

sugar_creek

sugar_creek_env

trout_hab_project_pt

trout_hab_project_pts

example_poly

trout_hab_project_pts
</code></pre>


<h3>Format</h3>

<p>An object of class sf and data.frame:
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 3 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 3 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 2 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 72 rows and 3 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 2 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 7 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>) with 5 rows and 3 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>) with 10 rows and 3 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>tbl_df</code>, <code>tbl</code>, <code>data.frame</code>) with 5 rows and 5 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 28 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 4 rows and 28 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 7 rows and 28 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 15 rows and 28 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 11 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 4 rows and 11 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 1 rows and 1 columns.
</p>
<p>An object of class <code>sf</code> (inherits from <code>data.frame</code>) with 4 rows and 11 columns.
</p>


<h3>Source</h3>

<p>ggplot2's <code><a href="ggplot2.html#topic+map_data">map_data</a></code> and <a href="https://dnrmaps.wi.gov/arcgis/rest/services">Wisconsin DNR ArcGIS REST API</a>
</p>

<hr>
<h2 id='sf_example_raster'>Various example raster objects</h2><span id='topic+sf_example_raster'></span><span id='topic+wi_landcover'></span><span id='topic+wi_aerial_imagery'></span>

<h3>Description</h3>

<p>These are raster objects that are used for examples throughout the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wi_landcover

wi_aerial_imagery
</code></pre>


<h3>Format</h3>

<p>An object of class <code>RasterLayer</code> of dimension 400 x 400 x 1.
</p>
<p>An object of class <code>RasterBrick</code> of dimension 400 x 400 x 3.
</p>


<h3>Source</h3>

<p><a href="https://dnrmaps.wi.gov/arcgis_image/rest/services">Wisconsin DNR ArcGIS Image Server</a>
</p>

<hr>
<h2 id='sf_objects'>Create sf objects from coordinates</h2><span id='topic+sf_objects'></span><span id='topic+sf_line'></span><span id='topic+sf_point'></span><span id='topic+sf_points'></span><span id='topic+sf_polygon'></span><span id='topic+sf_box'></span>

<h3>Description</h3>

<p>These are simple wrapper functions for creating sf objects from points
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf_line(..., crs = 4326)

sf_point(..., crs = 4326)

sf_points(..., crs = 4326)

sf_polygon(..., crs = 4326)

sf_box(xmin, ymin, xmax, ymax, crs = 4326)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sf_objects_+3A_...">...</code></td>
<td>
<p>The coordinates of the object</p>
</td></tr>
<tr><td><code id="sf_objects_+3A_crs">crs</code></td>
<td>
<p>The coordinate reference system. Defaults to 4326</p>
</td></tr>
<tr><td><code id="sf_objects_+3A_xmin">xmin</code>, <code id="sf_objects_+3A_xmax">xmax</code>, <code id="sf_objects_+3A_ymin">ymin</code>, <code id="sf_objects_+3A_ymax">ymax</code></td>
<td>
<p>Corners for sf_box</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An sf object of the appropriate type
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pt_a &lt;- c(-90, 45)
pt_b &lt;- c(-89, 44)
pt &lt;- sf_points(pt_a)
line &lt;- sf_line(pt_a, pt_b)
</code></pre>

<hr>
<h2 id='sp_rel_lookups'>Spatial relationship descriptor and lookup tables</h2><span id='topic+sp_rel_lookups'></span><span id='topic+sp_rel_valid'></span><span id='topic+sp_rel_lookup'></span>

<h3>Description</h3>

<p>These data.frames are used to lookup and explain which spatial relation types
go with different spatial queries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_rel_valid

sp_rel_lookup
</code></pre>


<h3>Format</h3>

<p><code>sp_rel_valid</code> is a data.frame with 105 rows and 3 variables as
follows:
</p>

<dl>
<dt>feature_class</dt><dd><p>A feature class to be queried</p>
</dd>
<dt>query_feature_class</dt><dd><p>The feature class used to do a spatial query</p>
</dd>
<dt>sp_rel</dt><dd>
<p>The spatial relationships that are valid for the feature class and
query_feature_class combination
</p>
</dd>
</dl>

<p><code>sp_rel_lookup</code> is a data.frame with 9 rows and 2 variables as
follows:
</p>

<dl>
<dt>sp_rel</dt><dd><p>The spatial relationship being described</p>
</dd>
<dt>description</dt><dd><p>A description of the sp_rel</p>
</dd>
</dl>



<h3>Details</h3>

<p>sp_rel_lookup explains the various different types of spatial relationships
available through ArcGIS REST APIs. sp_rel_valid shows which spatial
relationships are valid with different geometry types being queried and
used to do spatial queries
</p>


<h3>Source</h3>

<p>sp_rel_valid&ndash;Independent tests done specifically by and for arcpullr
</p>
<p>sp_rel_lookup &ndash;
<a href="https://help.arcgis.com/en/webapi/wpf/apiref/ESRI.ArcGIS.Client~ESRI.ArcGIS.Client.Tasks.SpatialRelationship.html">https://help.arcgis.com/en/webapi/wpf/apiref/ESRI.ArcGIS.Client~ESRI.ArcGIS.Client.Tasks.SpatialRelationship.html</a>
</p>

<hr>
<h2 id='sp_rel_xref'>Lookup function for shorthand versions of spatial relation text strings</h2><span id='topic+sp_rel_xref'></span>

<h3>Description</h3>

<p>After typing &quot;esriSpatialRelIntersects&quot; into 4 to 5 functions, you'll get
pretty sick of typing that. This function serves to allow shorthand strings
to be passed to the <code>sp_rel</code> arguments of the
<code><a href="#topic+get_layers_by_spatial">get_layers_by_spatial</a></code> family of functions. For example, you can
pass  &quot;intersects&quot; to this function and it will return
&quot;esriSpatialRelIntersects&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sp_rel_xref(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sp_rel_xref_+3A_x">x</code></td>
<td>
<p>A character string. One of &quot;contains&quot;, &quot;crosses&quot;,
&quot;envelopeintersects&quot;, &quot;indexintersects&quot;, &quot;intersects&quot;, &quot;overlaps&quot;,
&quot;relation&quot;, &quot;touches&quot;, &quot;within&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The appropriately named ESRI version of <code>x</code>. For example,
an <code>x</code> value of &quot;intersects&quot; returns &quot;esriSpatialRelIntersects&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sp_rel_xref("intersects")
</code></pre>

<hr>
<h2 id='sql_where'>Format a SQL where clause from arguments</h2><span id='topic+sql_where'></span>

<h3>Description</h3>

<p>This function will create a where statement that is compatible with
<code><a href="#topic+get_spatial_layer">get_spatial_layer</a></code>). This statement can then be passed
to the <code>where</code> argument in this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sql_where(..., rel_op = "=")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sql_where_+3A_...">...</code></td>
<td>
<p>Named objects to be queried by</p>
</td></tr>
<tr><td><code id="sql_where_+3A_rel_op">rel_op</code></td>
<td>
<p>Character. The relational operator in the SQL clause (i.e. &quot;=&quot;,
&quot;IN&quot;, &quot;NOT IN&quot;, etc.). If a single rel_op is provide with multiple ...
parameters then it will be recycled <code>length(...)</code> times.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string that can be passed to the where argument of
<code>get_spatial_layer</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
wbics &lt;- sql_where(WATERBODY_WBIC = c(805400, 804600), rel_op = "IN")
lakes &lt;- get_spatial_layer(wi_hydro_url, where = wbics)
plot_layer(lakes)

## End(Not run)
</code></pre>

<hr>
<h2 id='valid_sp_rel'>Check to see which spatial relation types are applicable to the feature
classes being queried and the sf objects use do to a spatial query</h2><span id='topic+valid_sp_rel'></span>

<h3>Description</h3>

<p>Check to see which spatial relation types are applicable to the feature
classes being queried and the sf objects use do to a spatial query
</p>


<h3>Usage</h3>

<pre><code class='language-R'>valid_sp_rel(fc1, fc2, pull = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="valid_sp_rel_+3A_fc1">fc1</code></td>
<td>
<p>Character. The feature class type being queried. Available options
are &quot;point&quot;, &quot;multipoint&quot;, &quot;line&quot;, or &quot;area&quot;.</p>
</td></tr>
<tr><td><code id="valid_sp_rel_+3A_fc2">fc2</code></td>
<td>
<p>Character. The geometry type of the sf object used to do a spatial
query. Available options are &quot;point&quot;, &quot;multipoint&quot;, &quot;line&quot;, or &quot;area&quot;.</p>
</td></tr>
<tr><td><code id="valid_sp_rel_+3A_pull">pull</code></td>
<td>
<p>Logical. Pull the available options (TRUE) or print all columns
of the sp_rel_valid data.frame for the appropriate fc1 and fc2</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a vector or filtered data.frame showing the appropriate
sp_rels for the given feature classes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>valid_sp_rel("line", "line")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
