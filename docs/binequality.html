<!DOCTYPE html><html><head><title>Help for package binequality</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {binequality}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#binequality-package'>
<p>Methods for Analyzing Binned Income Data</p></a></li>
<li><a href='#county_bins'>
<p>A data set containing binned income for US counties</p></a></li>
<li><a href='#fitFunc'>
<p>A function to fit a parametric distribution to binned data.</p></a></li>
<li><a href='#getMids'>
<p>A function to calculate the bin midpoints.</p></a></li>
<li><a href='#getQuantilesParams'>
<p>A function to extract the quantiles and parameters</p></a></li>
<li><a href='#giniCoef'>
<p>Calculates the Gini coefficient from quantiles</p></a></li>
<li><a href='#LRT'>
<p>A function to perform likelihood ratio tests</p></a></li>
<li><a href='#makeFitComb'>
<p>A function to transform a list into a dataframe</p></a></li>
<li><a href='#makeInt'>
<p>A function to create a survival object from bin counts.</p></a></li>
<li><a href='#makeIntWeight'>
<p>A function to create a survival object from bin counts and normalized bin weights.</p></a></li>
<li><a href='#makeWeightsAIC'>
<p>A function to calculate AIC weights</p></a></li>
<li><a href='#mAvg'>
<p>A simple function to perfom model averaging using pre-calculated weights.</p></a></li>
<li><a href='#midStats'>
<p>A function to calculate statistics using bin midpoints</p></a></li>
<li><a href='#MLD'>
<p>A function to calculate the MLD</p></a></li>
<li><a href='#modelAvg'>
<p>A function to calculate model averages</p></a></li>
<li><a href='#paramFilt'>
<p>A function to filter models based on estimated parameters</p></a></li>
<li><a href='#run_GB_family'>
<p>A function to fit a parametric distributions to binned data.</p></a></li>
<li><a href='#school_district_bins'>
<p>A data set containing the school district data.</p></a></li>
<li><a href='#SDL'>
<p>A function to calculate the SDL</p></a></li>
<li><a href='#state_bins'>
<p>A data set containing the binned state data.</p></a></li>
<li><a href='#theilInd'>
<p>A function to calculate the Theil</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Methods for Analyzing Binned Income Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-11-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Samuel V. Scarpino, Paul von Hippel, and Igor Holas</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Samuel V. Scarpino &lt;s.scarpino@northeastern.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Methods for model selection, model averaging, and calculating metrics, such as the Gini, Theil, Mean Log Deviation, etc, on binned income data where the topmost bin is right-censored.  We provide both a non-parametric method, termed the bounded midpoint estimator (BME), which assigns cases to their bin midpoints; except for the censored bins, where cases are assigned to an income estimated by fitting a Pareto distribution. Because the usual Pareto estimate can be inaccurate or undefined, especially in small samples, we implement a bounded Pareto estimate that yields much better results.  We also provide a parametric approach, which fits distributions from the generalized beta (GB) family. Because some GB distributions can have poor fit or undefined estimates, we fit 10 GB-family distributions and use multimodel inference to obtain definite estimates from the best-fitting distributions. We also provide binned income data from all United States of America school districts, counties, and states.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3.0)</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10), gamlss (&ge; 4.2.7), gamlss.cens (&ge; 4.2.7),
gamlss.dist (&ge; 4.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival (&ge; 2.37-7), ineq (&ge; 0.2-11)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-11-05 14:01:07 UTC; scarpino</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-11-05 14:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='binequality-package'>
Methods for Analyzing Binned Income Data
</h2><span id='topic+binequality-package'></span><span id='topic+binequality'></span>

<h3>Description</h3>

<p>Methods for model selection, model averaging, and calculating metrics, such as the Gini, Theil, Mean Log Deviation, etc, on binned income data where the topmost bin is right-censored.  We provide both a non-parametric method, termed the bounded midpoint estimator (BME), which assigns cases to their bin midpoints; except for the censored bins, where cases are assigned to an income estimated by fitting a Pareto distribution. Because the usual Pareto estimate can be inaccurate or undefined, especially in small samples, we implement a bounded Pareto estimate that yields much better results.  We also provide a parametric approach, which fits distributions from the generalized beta (GB) family. Because some GB distributions can have poor fit or undefined estimates, we fit 10 GB-family distributions and use multimodel inference to obtain definite estimates from the best-fitting distributions. We also provide binned income data from all United States of America school districts, counties, and states.    
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> binequality</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 1.0.4</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2018-11-05</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL (&gt;= 3.0)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The datasets are: state_bins, county_bins, and school_district_bins.
</p>
<p>The main functions are: fitFunc, run_GB_family, getMids, getQuantilesParams, giniCoef, LRT, makeFitComb, makeInt, makeIntWeight, makeWeightsAIC, mAvg, midStats, MLD, modelAvg, paramFilt, and theilInd.
</p>
<p>Type ?&lt;object&gt; to learn more about these objects, e.g. ?state_bins
</p>
<p>Type ?&lt;function&gt; to see examples of the function's use, e.g. ?getMids
</p>


<h3>Author(s)</h3>

<p>Samuel V. Scarpino, Paul von Hippel, and Igor Holas 
</p>
<p>Maintainer: Samuel V. Scarpino &lt;s.scarpino@northeastern.edu&gt;
</p>


<h3>References</h3>

<p>Von Hippel, P. T., Scarpino, S. V., &amp; Holas, I. (2016). Robust estimation of inequality from binned incomes. Sociological Methodology, 46(1), 212-251.
</p>


<h3>See Also</h3>

<p><code><a href="gamlss.html#topic+gamlss">gamlss</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#FIXME, write the example run of states here
</code></pre>

<hr>
<h2 id='county_bins'>
A data set containing binned income for US counties
</h2><span id='topic+county_bins'></span>

<h3>Description</h3>

<p>A data set of binned income by US counties.  FIXME - more info.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(state_bins)</code></pre>


<h3>Format</h3>

<p>#FIXME add in format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(county_bins)
</code></pre>

<hr>
<h2 id='fitFunc'>
A function to fit a parametric distribution to binned data.
</h2><span id='topic+fitFunc'></span>

<h3>Description</h3>

<p>This function fits a parametric distribution binned data. The data are subdivided using 
ID.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fitFunc(ID, hb, bin_min, bin_max, obs_mean, ID_name,
  distribution = "LOGNO", distName = "LNO", links = c(muLink = 
  "identity", sigmaLink = "log", nuLink = NULL, tauLink = NULL),
   qFunc = qLOGNO, quantiles = seq(0.006, 0.996, length.out = 
   1000), linksq = c(identity, exp, NULL, NULL), con = 
   gamlss.control(c.crit=0.1,n.cyc=200, trace=FALSE), 
   saveQuants = FALSE, muStart = NULL, sigmaStart = NULL,
    nuStart = NULL, tauStart = NULL, muFix = FALSE, 
    sigmaFix = FALSE, nuFix = FALSE, tauFix = FALSE, 
    freeParams = c(TRUE, TRUE, FALSE, FALSE), 
    smartStart = FALSE, tstamp = as.numeric(Sys.time()))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitFunc_+3A_id">ID</code></td>
<td>

<p>a (non-empty) object containing the group ID for each row. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_hb">hb</code></td>
<td>

<p>a (non-empty) object containing the number of observations in each bin.  Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_bin_min">bin_min</code></td>
<td>

<p>a (non-empty) object containing the lower bound of each bin. Currently, this package cannot handle data with open lower bounds. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_bin_max">bin_max</code></td>
<td>

<p>a (non-empty) object the upper bound of each bin. Currently, this package can only handle the upper-most bin being open ended. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_obs_mean">obs_mean</code></td>
<td>

<p>a (non-empty) object containing the mean for each group.  Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_id_name">ID_name</code></td>
<td>

<p>a (non-empty) object containing column name for the ID column.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_distribution">distribution</code></td>
<td>

<p>a (non-empty) character naming a gamlss family.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_distname">distName</code></td>
<td>

<p>a (non-empty) character object with the name of the distribution.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_links">links</code></td>
<td>

<p>a (non-empty) vector of link characters naming functions with the following items: muLink, sigmaLink, nuLink, and tauLink.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_qfunc">qFunc</code></td>
<td>

<p>a (non-empty)gamlss function for calculating quantiles, this should match the distribution in distribution.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_quantiles">quantiles</code></td>
<td>

<p>a (non-empty) numeric vectors of the desired quantiles, these are used in calculating metrics.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_linksq">linksq</code></td>
<td>

<p>a (non-empty) vector of functions, which undue the link functions.  For example, if muLink = log, then the first entry in linksq should be exp.  If you are using an indentity link function in links, then the corresponding entry in linksq should be indentity. 
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_con">con</code></td>
<td>

<p>an optional lists modifying gamlss.control.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_savequants">saveQuants</code></td>
<td>

<p>an optional logical value indicating whether to save the quantiles.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_mustart">muStart</code></td>
<td>

<p>an optional numerical value for the starting value of mu.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_sigmastart">sigmaStart</code></td>
<td>

<p>an optional numerical value for the starting value of sigma.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_nustart">nuStart</code></td>
<td>

<p>an optional numerical value for the starting value of nu.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_taustart">tauStart</code></td>
<td>

<p>an optional numerical value for the starting value of tau.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_mufix">muFix</code></td>
<td>

<p>an logical value indicating whether mu is fixed or is free to vary during the fitting process.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_sigmafix">sigmaFix</code></td>
<td>

<p>an logical value indicating whether sigma is fixed or is free to vary during the fitting process.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_nufix">nuFix</code></td>
<td>

<p>an logical value indicating whether nu is fixed or is free to vary during the fitting process.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_taufix">tauFix</code></td>
<td>

<p>an logical value indicating whether tau is fixed or is free to vary during the fitting process.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_freeparams">freeParams</code></td>
<td>

<p>a vector of logical values indicating whether each of the four parameters is free == TRUE or fixed == FALSE.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_smartstart">smartStart</code></td>
<td>

<p>a logical indicating whether a smart starting place should be chosen, this applies only when fitting the GB2 distribution.
</p>
</td></tr>
<tr><td><code id="fitFunc_+3A_tstamp">tstamp</code></td>
<td>

<p>a time stamp.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fits a GAMLSS and estimates a number of metrics, see value.
</p>


<h3>Value</h3>

<p>returns a list with 'datOut' a data.frame with the IDs, observer mean, distribution, estimated mean, variance, coefficient of variation, cv squared, gini, theil, MLD, aic, bic, the results of a convergence test, log likelihood, number of parameters, median, and std. deviation; 'timeStamp' a time stamp; 'parameters' the estiamted parameter; and 'quantiles' the quantile estimates if saveQuants == TRUE)
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>See Also</h3>

<p><code><a href="gamlss.html#topic+gamlss">gamlss</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(state_bins)

use_states &lt;- which(state_bins[,'State'] == 'Texas' | state_bins[,'State'] == 'California')

ID &lt;- state_bins[use_states,'State']
hb &lt;- state_bins[use_states,'hb']
bmin &lt;- state_bins[use_states,'bin_min']
bmax &lt;- state_bins[use_states,'bin_max']
omu &lt;- rep(NA, length(use_states))
fitFunc(ID = ID, hb = hb, bin_min = bmin, bin_max = bmax, obs_mean = omu, ID_name = 'State')
</code></pre>

<hr>
<h2 id='getMids'>
A function to calculate the bin midpoints.  
</h2><span id='topic+getMids'></span>

<h3>Description</h3>

<p>This function returns the bin midpoints for use in calculating midpoint-based statistics. The code is not written to handle left censored bins or more than one right censored bins.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMids(ID, hb, lb, ub, alpha_bound)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMids_+3A_id">ID</code></td>
<td>

<p>A vector of group IDs
</p>
</td></tr>
<tr><td><code id="getMids_+3A_hb">hb</code></td>
<td>

<p>A vector of heights for each bin
</p>
</td></tr>
<tr><td><code id="getMids_+3A_lb">lb</code></td>
<td>

<p>A vector of lower bounds, which must all be real numbers.
</p>
</td></tr>
<tr><td><code id="getMids_+3A_ub">ub</code></td>
<td>

<p>A vector of upper bouns, which can have one censored bin per group.
</p>
</td></tr>
<tr><td><code id="getMids_+3A_alpha_bound">alpha_bound</code></td>
<td>

<p>A numeric value indicating the bound on alpha for determining the midpoint of the upper-most, censored bin.  To unbound the value of alpha, set alpha_bound = numeric(0).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For all non-censored bins, ie real number upper and lower bounds, the midpoint is simply the arithemtic mean of the bounds.  This assumes the number of observations are normally distributed in each bin.  However, for the right-censored bin we relax this assumption when calcuting the bin midpoint. FIXME - say something about the method we use to calculate midpoint of the upper bin. 
</p>


<h3>Value</h3>

<p>returns a list with the following elements: mids (a data frame with the midpoint information needed for the midStats function), the &quot;c&quot; values, and &quot;alpha&quot; values from the model fit.
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(state_bins)

bin_mids &lt;- getMids(ID = state_bins[,'State'], hb = 
state_bins[,'hb'], lb = state_bins[,'bin_min'], ub = 
state_bins[,'bin_max'], alpha_bound = 10/9)

bin_mids_unbound &lt;- getMids(ID = state_bins[,'State'], hb = 
state_bins[,'hb'], lb = state_bins[,'bin_min'], ub = 
state_bins[,'bin_max'], alpha_bound = numeric(0))
</code></pre>

<hr>
<h2 id='getQuantilesParams'>
A function to extract the quantiles and parameters
</h2><span id='topic+getQuantilesParams'></span>

<h3>Description</h3>

<p>This extracts the quantiles and parameters. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getQuantilesParams(fit.i, qFunc = qLOGNO, quantiles = seq(0.006, 
0.996, length.out = 1000), linksq = c(identity, exp, NULL, 
NULL), freeParams, fixedParams)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getQuantilesParams_+3A_fit.i">fit.i</code></td>
<td>

<p>a (non-empty) object of class gamlss, which is the fitted distribution.
</p>
</td></tr>
<tr><td><code id="getQuantilesParams_+3A_qfunc">qFunc</code></td>
<td>

<p>a (non-empty) quantile generating function from gamlss.
</p>
</td></tr>
<tr><td><code id="getQuantilesParams_+3A_quantiles">quantiles</code></td>
<td>

<p>an optional numeric vector of the desired quantiles.
</p>
</td></tr>
<tr><td><code id="getQuantilesParams_+3A_linksq">linksq</code></td>
<td>

<p>a (non-empty) vector is link functions.
</p>
</td></tr>
<tr><td><code id="getQuantilesParams_+3A_freeparams">freeParams</code></td>
<td>

<p>a (non-empty) logical vector inidicating whether parameters are fixed == FALSE or free == TRUE.
</p>
</td></tr>
<tr><td><code id="getQuantilesParams_+3A_fixedparams">fixedParams</code></td>
<td>

<p>a (non-empty) numeric vector of fixed parameter values. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Extracts the quantile and parameter estimates.
</p>


<h3>Value</h3>

<p>Returns a list with: samps = the quantiles extracted at the locations specified in quantiles and params = the parameter values of the fitted model.
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, this function is used internally
</code></pre>

<hr>
<h2 id='giniCoef'>
Calculates the Gini coefficient from quantiles
</h2><span id='topic+giniCoef'></span>

<h3>Description</h3>

<p>This function estimates the Gini coefficient using the quantiles sampled from a fitted GAMLSS object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>giniCoef(seq.i, samps.i)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="giniCoef_+3A_seq.i">seq.i</code></td>
<td>

<p>a (non-empty) numeric vector of quantile locations.
</p>
</td></tr>
<tr><td><code id="giniCoef_+3A_samps.i">samps.i</code></td>
<td>

<p>a (non-empty) numeric vector of quantile values.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates the Gini coefficient from quantiles
</p>


<h3>Value</h3>

<p>Returns the Gini coefficient estimate.
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, internal function
</code></pre>

<hr>
<h2 id='LRT'>
A function to perform likelihood ratio tests
</h2><span id='topic+LRT'></span>

<h3>Description</h3>

<p>This function performs likelihood ratio tests for use in model selection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LRT(dat, fitComb, ID)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="LRT_+3A_dat">dat</code></td>
<td>

<p>a (non-empty) data frame containing an ID column (see ID) and a column called &quot;hb&quot;, which contains the bin heights used in model fitting.
</p>
</td></tr>
<tr><td><code id="LRT_+3A_fitcomb">fitComb</code></td>
<td>

<p>a (non-empty) data frame returned from the function makeFitComb.  
</p>
</td></tr>
<tr><td><code id="LRT_+3A_id">ID</code></td>
<td>

<p>a (non-empty) string indicating the column dat and the column in fitComb containing the group ids, these column names must match.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Performs a likelihood ratio test.
</p>


<h3>Value</h3>

<p>Returns an object with the same information as was passed into the fitComb argument, but with additional columns G2 = the test statistic, p = the p value, and df = the degrees of freedom.
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, function is used internally 
</code></pre>

<hr>
<h2 id='makeFitComb'>
A function to transform a list into a dataframe
</h2><span id='topic+makeFitComb'></span>

<h3>Description</h3>

<p>This funciton transforms a list of fitted models into a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeFitComb(distFitsList)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeFitComb_+3A_distfitslist">distFitsList</code></td>
<td>

<p>a (non-empty) list containing the fitted models from the function fitFunc
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Transforms a list into a data frame
</p>


<h3>Value</h3>

<p>Returns a data frame where each row is a distribution/unique ID pair, ie a county and its fitted GB2 distribution.  It also contains summary stats.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, internal function
</code></pre>

<hr>
<h2 id='makeInt'>
A function to create a survival object from bin counts.
</h2><span id='topic+makeInt'></span>

<h3>Description</h3>

<p>This function creates a survival object from bin counts, these data cannot be right censored.  There is a separate function for the right censored bins.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeInt(ints, hb, trans = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeInt_+3A_ints">ints</code></td>
<td>

<p>a (non-empty) numeric matrix containing the bin end points, there must be as many rows as length(hb) and the lower bin should be on the left.
</p>
</td></tr>
<tr><td><code id="makeInt_+3A_hb">hb</code></td>
<td>

<p>a (non-empty) numeric vector of bin heights.  
</p>
</td></tr>
<tr><td><code id="makeInt_+3A_trans">trans</code></td>
<td>

<p>an optional function to transform the bins.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates a survival object.  FIXME - reference to survival package and Surv function.
</p>


<h3>Value</h3>

<p>Returns an object of class &quot;Surv&quot;
</p>


<h3>See Also</h3>

<p>FIXME - reference to survival package and Surv function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, internal function
</code></pre>

<hr>
<h2 id='makeIntWeight'>
A function to create a survival object from bin counts and normalized bin weights.
</h2><span id='topic+makeIntWeight'></span>

<h3>Description</h3>

<p>This function creates a survival object from bin counts, these data cannot be right censored.  There is a separate function for the right censored bins. It also returns normalized bin weights.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeIntWeight(ints, hb, trans = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeIntWeight_+3A_ints">ints</code></td>
<td>

<p>a (non-empty) numeric matrix containing the bin end points, there must be as many rows as length(hb) and the lower bin should be on the left.
</p>
</td></tr>
<tr><td><code id="makeIntWeight_+3A_hb">hb</code></td>
<td>

<p>a (non-empty) numeric vector of bin heights.  
</p>
</td></tr>
<tr><td><code id="makeIntWeight_+3A_trans">trans</code></td>
<td>

<p>an optional function to transform the bins.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates a survival object.  FIXME - reference to survival package and Surv function.
</p>


<h3>Value</h3>

<p>Returns an object of class &quot;Surv&quot; and normalizde bin weights.
</p>


<h3>See Also</h3>

<p>FIXME - reference to survival package and Surv function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, internal function
</code></pre>

<hr>
<h2 id='makeWeightsAIC'>
A function to calculate AIC weights
</h2><span id='topic+makeWeightsAIC'></span>

<h3>Description</h3>

<p>This function calculates AIC weights for use in model selection and model averaging.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeWeightsAIC(aics)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeWeightsAIC_+3A_aics">aics</code></td>
<td>

<p>a (non-empty) numeric vector of AIC values.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>FIXME - citation
</p>


<h3>Value</h3>

<p>Returns a vector of AIC weights.
</p>


<h3>References</h3>

<p>FIXME - refs
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, internal function
</code></pre>

<hr>
<h2 id='mAvg'>
A simple function to perfom model averaging using pre-calculated weights.
</h2><span id='topic+mAvg'></span>

<h3>Description</h3>

<p>This function takes weights and parameters and returns model averaged parameters using the weights.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mAvg(params, ws)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mAvg_+3A_params">params</code></td>
<td>

<p>a (non-empty) numeric vector of parameters
</p>
</td></tr>
<tr><td><code id="mAvg_+3A_ws">ws</code></td>
<td>

<p>a (non-empty) numeric vector of weights corresponding to params.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a numeric vector of model averaged parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, iternal function
</code></pre>

<hr>
<h2 id='midStats'>
A function to calculate statistics using bin midpoints
</h2><span id='topic+midStats'></span>

<h3>Description</h3>

<p>This function calcualtes a suite of pre-defined statistics on binned distributions using pre-calculated midpoints for each bin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>midStats(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="midStats_+3A_data">data</code></td>
<td>

<p>a (non-empty) data frame with columns named ID, mids, and hb. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently has the following stats: 'mean','median','gini','theil','cv','MLD'.  FIXME - reference to functions in gamlss
</p>


<h3>Value</h3>

<p>Returns a data frame with the following columns: 'ID','mean','median','gini','theil','cv','MLD', 'SLD'.  &quot;cv&quot; is the coefficient of variation, &quot;MLD&quot; is the mean log deviance, and &quot;SLD&quot; is the squar root of the MLD. 
</p>


<h3>See Also</h3>

<p><code><a href="ineq.html#topic+Gini">Gini</a></code>
<code><a href="ineq.html#topic+Theil">Theil</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(state_bins)

bin_mids &lt;- getMids(ID = state_bins[,'State'], hb = 
state_bins[,'hb'], lb = state_bins[,'bin_min'], ub = 
state_bins[,'bin_max'], alpha_bound = 10/9)

state_bin_mid_stats &lt;- midStats(data = bin_mids$mids)
</code></pre>

<hr>
<h2 id='MLD'>
A function to calculate the MLD 
</h2><span id='topic+MLD'></span>

<h3>Description</h3>

<p>This fuction calculates MLD 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MLD(samps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="MLD_+3A_samps">samps</code></td>
<td>

<p>a (non-empty) numeric vector of values to calculate MLD over, for example, bin mid points or samples take from a fitted distribution.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>FIXME - equations
</p>


<h3>Value</h3>

<p>returns a numeric value representing the MLD
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>Examples</h3>

<pre><code class='language-R'>MLD(qnorm(seq(0.001,0.999,length.out = 10), mean = 100))
</code></pre>

<hr>
<h2 id='modelAvg'>
A function to calculate model averages
</h2><span id='topic+modelAvg'></span>

<h3>Description</h3>

<p>This function calculates model averaged statistics using AIC and BIC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modelAvg(fitList, ID, nonCon = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modelAvg_+3A_fitlist">fitList</code></td>
<td>

<p>a (non-empty) list of fitted distributions
</p>
</td></tr>
<tr><td><code id="modelAvg_+3A_id">ID</code></td>
<td>

<p>a (non-empty) string of the ID column name.
</p>
</td></tr>
<tr><td><code id="modelAvg_+3A_noncon">nonCon</code></td>
<td>

<p>an optional logical, where nonCon == TRUE excludes models failing to converged and nonCon == FALSE includes them. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates model averaged statistics using BIC and AIC as weights.
</p>


<h3>Value</h3>

<p>Returns a list with aic and bic values, aic and bic averages, and the aic and bic weights.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, internal function
</code></pre>

<hr>
<h2 id='paramFilt'>
A function to filter models based on estimated parameters
</h2><span id='topic+paramFilt'></span>

<h3>Description</h3>

<p>This functions filters models, excludes them from model averaging, and sets all parameter values/statistics to NA. The filter determines which models should have undefined moments based on the estimated parameters.  These are filtered. FIXME - add in specific criteria for filtering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paramFilt(paramsList, fitComb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="paramFilt_+3A_paramslist">paramsList</code></td>
<td>

<p>a (non-empty) list containing the parameter values, it should be of length(fitComb).
</p>
</td></tr>
<tr><td><code id="paramFilt_+3A_fitcomb">fitComb</code></td>
<td>

<p>a (non-empty) list of fitted models
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns fitComb, filtered based on the parameters.
</p>


<h3>References</h3>

<p>FIXME - references for specific filtering criteria
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#not run, internal function
</code></pre>

<hr>
<h2 id='run_GB_family'>
A function to fit a parametric distributions to binned data.
</h2><span id='topic+run_GB_family'></span>

<h3>Description</h3>

<p>This function fits a series of parametric distributions from the GB family to binned data. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_GB_family(ID,hb,bin_min,bin_max,obs_mean,ID_name,quantiles,modelsToFit,return_params)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_GB_family_+3A_id">ID</code></td>
<td>

<p>a (non-empty) object containing the group ID for each row. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_hb">hb</code></td>
<td>

<p>a (non-empty) object containing the number of observations in each bin.  Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_bin_min">bin_min</code></td>
<td>

<p>a (non-empty) object containing the lower bound of each bin. Currently, this package cannot handle data with open lower bounds. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_bin_max">bin_max</code></td>
<td>

<p>a (non-empty) object the upper bound of each bin. Currently, this package can only handle the upper-most bin being open ended. Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_obs_mean">obs_mean</code></td>
<td>

<p>a (non-empty) object containing the mean for each group.  Importantly, ID, bh, bin_min, bin_max, and obs_mean MUST be the same length and be in the SAME order.
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_id_name">ID_name</code></td>
<td>

<p>a (non-empty) object containing column name for the ID column.
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_quantiles">quantiles</code></td>
<td>

<p>a (non-empty) vector of quantiles for use in calculating metrics. The default is seq(0.006,0.996, length.out = 1000).
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_modelstofit">modelsToFit</code></td>
<td>

<p>a (non-empty) vector of model names as characters, currently limited to the following distributions GB2, GG, BETA2, DAGUM, SINGMAD, LOGNO, WEI, GA, LOGLOG, PARETO2.
</p>
</td></tr>
<tr><td><code id="run_GB_family_+3A_return_params">return_params</code></td>
<td>

<p>a (non-empty) logical indicating whether to retunr the parameters. The default is TRUE.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fits a GAMLSS and estimates a number of metrics, see value.
</p>


<h3>Value</h3>

<p>returns a list with &quot;fit&quot; = fitted model and metrics, &quot;fit.filter&quot; = filtered for undefined moments fitted model and metrics, &quot;best_model&quot; = best model results, &quot;best_model.filter&quot; = filtered for undefined moments best model results.
</p>


<h3>See Also</h3>

<p><code><a href="gamlss.html#topic+gamlss">gamlss</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(state_bins)

use_states &lt;- which(state_bins[,'State'] == 'Texas')
TX &lt;- state_bins[use_states,]

LNO_WEI_GA &lt;- run_GB_family(ID = TX[,'State'], hb = TX[,'hb'], 
bin_min = TX[,'bin_min'], bin_max = TX[,'bin_max'], obs_mean = 
rep(NA, length(use_states)), ID_name = "State", quantiles = 
seq(0.006,0.996, length.out = 1000), modelsToFit = 
c('LOGNO','WEI','GA'))

</code></pre>

<hr>
<h2 id='school_district_bins'>
A data set containing the school district data.
</h2><span id='topic+school_district_bins'></span>

<h3>Description</h3>

<p>This is a list where each entry is a different year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(state_bins)</code></pre>


<h3>Format</h3>

<p>#FIXME - add in format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(school_district_bins)
head(school_district_bins[[1]])
names(school_district_bins)
</code></pre>

<hr>
<h2 id='SDL'>
A function to calculate the SDL 
</h2><span id='topic+SDL'></span>

<h3>Description</h3>

<p>This fuction calculates SDL 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SDL(samps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SDL_+3A_samps">samps</code></td>
<td>

<p>a (non-empty) numeric vector of values to calculate SDL over, for example, bin mid points or samples take from a fitted distribution.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>FIXME - equations
</p>


<h3>Value</h3>

<p>returns a numeric value representing the SLD
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>Examples</h3>

<pre><code class='language-R'>SDL(qnorm(seq(0.001,0.999,length.out = 10), mean = 100))
</code></pre>

<hr>
<h2 id='state_bins'>
A data set containing the binned state data.
</h2><span id='topic+state_bins'></span>

<h3>Description</h3>

<p>A data set of binned income by US counties.  FIXME - more info.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(state_bins)</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>data(state_bins)
</code></pre>

<hr>
<h2 id='theilInd'>
A function to calculate the Theil
</h2><span id='topic+theilInd'></span>

<h3>Description</h3>

<p>This fuction calculates the Theil Index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theilInd(samps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="theilInd_+3A_samps">samps</code></td>
<td>

<p>a (non-empty) numeric vector of values to calculate MLD over, for example, bin mid points or samples take from a fitted distribution.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>FIXME - equations
</p>


<h3>Value</h3>

<p>returns a numeric value representing the Theil Index
</p>


<h3>References</h3>

<p>FIXME - references
</p>


<h3>Examples</h3>

<pre><code class='language-R'>theilInd(qnorm(seq(0.001,0.999,length.out = 10), mean = 100))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
