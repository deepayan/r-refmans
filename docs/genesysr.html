<!DOCTYPE html><html><head><title>Help for package genesysr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {genesysr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.check_auth'><p>Ensure that environment has OAuth token</p></a></li>
<li><a href='#.fetch_accessions_page'><p>Fetch accession passport data page.</p></a></li>
<li><a href='#.fetch_csv_page'><p>Fetch a page of data from Genesys</p></a></li>
<li><a href='#.fetch_json_page'><p>Fetch a page of data from Genesys</p></a></li>
<li><a href='#.list_accessions_page'><p>List accession passport data (paginated)</p></a></li>
<li><a href='#.MAX_ALLOWED_PAGES'><p>Max pages to retrieve</p></a></li>
<li><a href='#.onLoad'><p>Configure package defaults on load</p></a></li>
<li><a href='#.post'><p>HTTP POST method</p></a></li>
<li><a href='#api1_url'><p>Get partial API v1 URL for the provided path</p></a></li>
<li><a href='#api2_url'><p>Get partial API v2 URL for the provided path</p></a></li>
<li><a href='#authorization'><p>Provide OAuth2 token to use for authorization with Genesys</p></a></li>
<li><a href='#check_country'><p>Run Land-or-Sea check on MCPD data. Uploads only rows where ORIGCTY,</p>
DECLATITUDE and DECLONGITUDE are provided.</a></li>
<li><a href='#check_landorsea'><p>Run Land-or-Sea check on MCPD data using https://validator.genesys-pgr.org.</p>
Uploads only rows where DECLATITUDE and DECLONGITUDE are provided.
In practice it is better to use 'check_country' if ORIGCTY data exists.</a></li>
<li><a href='#check_taxonomy'><p>Check MCPD taxonomic data (GENUS, SPECIES, SPAUTHOR, SUBTAXA, SUBTAUTHOR)</p>
using https://validator.genesys-pgr.org.</a></li>
<li><a href='#client_login'><p>Login to Genesys as a service client (system-to-system)</p></a></li>
<li><a href='#download_mcpd'><p>Download passport data for one genebank in Excel format and save it to disk</p></a></li>
<li><a href='#download_pdci'><p>Download PDCI data for one genebank in Excel format and save it to disk.</p></a></li>
<li><a href='#fetch_accessions'><p>Fetch accession passport data and return the paged data structure for further processing.</p>
<code>get_accessions</code> might be more useful as it returns a data table.</a></li>
<li><a href='#filter_DOI'><p>Add filter on accession DOI</p></a></li>
<li><a href='#filter_GENUS'><p>Add filter by genus</p></a></li>
<li><a href='#filter_INSTCODE'><p>Add filter by genus</p></a></li>
<li><a href='#filter_ORIGCTY'><p>Add filter on Country of origin of material</p></a></li>
<li><a href='#filter_SAMPSTAT'><p>Add filter on Biological status of sample</p></a></li>
<li><a href='#filter_SPECIES'><p>Add filter on specific epithet</p></a></li>
<li><a href='#get_accessions'><p>Get accession passport data as a data table.</p></a></li>
<li><a href='#list_crops'><p>Fetch Genesys crops. Note that the list of Genesys crops does not fully</p>
correspond with various CROPNAME in MCPD provided by genebanks.</a></li>
<li><a href='#list_institutes'><p>List FAO WIEWS institutes.</p></a></li>
<li><a href='#list_species'><p>Fetch taxonomic data of selected accessions.</p></a></li>
<li><a href='#mcpd_filter'><p>Make or adjust filter using MCPD terminology</p></a></li>
<li><a href='#me'><p>Who am i? Loads and prints the user profile from Genesys as JSON.</p>
You need to be logged in.</a></li>
<li><a href='#print_setup'><p>Print Genesys client configuration</p></a></li>
<li><a href='#setup'><p>Configure the Genesys environment</p></a></li>
<li><a href='#setup_production'><p>Setup for Genesys Production</p></a></li>
<li><a href='#setup_sandbox'><p>Setup for Genesys Sandbox</p></a></li>
<li><a href='#user_login'><p>Login to Genesys as a user</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>2.1.1</td>
</tr>
<tr>
<td>Title:</td>
<td>Genesys PGR Client</td>
</tr>
<tr>
<td>Description:</td>
<td>Access data on plant genetic resources from genebanks around the world published on Genesys (<a href="https://www.genesys-pgr.org">https://www.genesys-pgr.org</a>).
  Your use of data is subject to terms and conditions available at <a href="https://www.genesys-pgr.org/content/legal/terms">https://www.genesys-pgr.org/content/legal/terms</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gitlab.croptrust.org/genesys-pgr/genesysr">https://gitlab.croptrust.org/genesys-pgr/genesysr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.croptrust.org/genesys-pgr/genesysr/-/issues">https://gitlab.croptrust.org/genesys-pgr/genesysr/-/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matija Obreza &lt;matija.obreza@croptrust.org&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr2 (&ge; 1.0.0), jsonlite, dplyr, readr, magrittr,
tidyselect,</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-23 08:43:52 UTC; mobreza</td>
</tr>
<tr>
<td>Author:</td>
<td>Global Crop Diversity Trust [cph],
  Matija Obreza [aut, cre],
  Nora Castaneda [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-23 09:10:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='.check_auth'>Ensure that environment has OAuth token</h2><span id='topic+.check_auth'></span>

<h3>Description</h3>

<p>Ensure that environment has OAuth token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.check_auth()
</code></pre>

<hr>
<h2 id='.fetch_accessions_page'>Fetch accession passport data page.</h2><span id='topic+.fetch_accessions_page'></span>

<h3>Description</h3>

<p>Fetch accession passport data page.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.fetch_accessions_page(
  filters = list(),
  page = 0,
  size = 1000,
  selector = NULL
)
</code></pre>


<h3>Value</h3>

<p>Paged data structure
</p>

<hr>
<h2 id='.fetch_csv_page'>Fetch a page of data from Genesys</h2><span id='topic+.fetch_csv_page'></span>

<h3>Description</h3>

<p>Fetch a page of data from Genesys
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.fetch_csv_page(
  path,
  filters = list(),
  accept = "text/csv",
  page = 0,
  size = 1000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".fetch_csv_page_+3A_path">path</code></td>
<td>
<p>API path</p>
</td></tr>
<tr><td><code id=".fetch_csv_page_+3A_filters">filters</code></td>
<td>
<p>Filters</p>
</td></tr>
<tr><td><code id=".fetch_csv_page_+3A_accept">accept</code></td>
<td>
<p>Accepted content type</p>
</td></tr>
<tr><td><code id=".fetch_csv_page_+3A_page">page</code></td>
<td>
<p>Page to request</p>
</td></tr>
<tr><td><code id=".fetch_csv_page_+3A_size">size</code></td>
<td>
<p>Size of page</p>
</td></tr>
</table>

<hr>
<h2 id='.fetch_json_page'>Fetch a page of data from Genesys</h2><span id='topic+.fetch_json_page'></span>

<h3>Description</h3>

<p>Fetch a page of data from Genesys
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.fetch_json_page(
  path,
  filters = list(),
  accept = "application/json",
  page = 0,
  size = 1000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".fetch_json_page_+3A_path">path</code></td>
<td>
<p>API path</p>
</td></tr>
<tr><td><code id=".fetch_json_page_+3A_filters">filters</code></td>
<td>
<p>Filters</p>
</td></tr>
<tr><td><code id=".fetch_json_page_+3A_accept">accept</code></td>
<td>
<p>Accepted content type</p>
</td></tr>
<tr><td><code id=".fetch_json_page_+3A_page">page</code></td>
<td>
<p>Page to request</p>
</td></tr>
<tr><td><code id=".fetch_json_page_+3A_size">size</code></td>
<td>
<p>Size of page</p>
</td></tr>
</table>

<hr>
<h2 id='.list_accessions_page'>List accession passport data (paginated)</h2><span id='topic+.list_accessions_page'></span>

<h3>Description</h3>

<p>List accession passport data (paginated)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.list_accessions_page(
  filters = list(),
  page = 0,
  size = 1000,
  fields = NULL,
  exclude = NULL,
  selector = NULL
)
</code></pre>


<h3>Value</h3>

<p>table
</p>

<hr>
<h2 id='.MAX_ALLOWED_PAGES'>Max pages to retrieve</h2><span id='topic+.MAX_ALLOWED_PAGES'></span>

<h3>Description</h3>

<p>Max pages to retrieve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.MAX_ALLOWED_PAGES
</code></pre>


<h3>Format</h3>

<p>An object of class <code>numeric</code> of length 1.
</p>

<hr>
<h2 id='.onLoad'>Configure package defaults on load</h2><span id='topic+.onLoad'></span>

<h3>Description</h3>

<p>Configure package defaults on load
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.onLoad(libname, pkgname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".onLoad_+3A_libname">libname</code></td>
<td>
<p>Library name</p>
</td></tr>
<tr><td><code id=".onLoad_+3A_pkgname">pkgname</code></td>
<td>
<p>Package name</p>
</td></tr>
</table>

<hr>
<h2 id='.post'>HTTP POST method</h2><span id='topic+.post'></span>

<h3>Description</h3>

<p>HTTP POST method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.post(
  path,
  query = NULL,
  body = NULL,
  content.type = "application/json",
  accept = "application/json"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".post_+3A_path">path</code></td>
<td>
<p>API path</p>
</td></tr>
<tr><td><code id=".post_+3A_query">query</code></td>
<td>
<p>query string parameters</p>
</td></tr>
<tr><td><code id=".post_+3A_body">body</code></td>
<td>
<p>request body (will be serialized to JSON)</p>
</td></tr>
<tr><td><code id=".post_+3A_content.type">content.type</code></td>
<td>
<p>Content-Type of the body</p>
</td></tr>
</table>


<h3>Value</h3>

<p>httr response
</p>

<hr>
<h2 id='api1_url'>Get partial API v1 URL for the provided path</h2><span id='topic+api1_url'></span>

<h3>Description</h3>

<p>Get partial API v1 URL for the provided path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api1_url(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="api1_url_+3A_path">path</code></td>
<td>
<p>relative path of the API v1 endpoint (e.g. <code>/me</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns &quot;/api/v1&quot; + path
</p>


<h3>Examples</h3>

<pre><code class='language-R'> api1_url("/me")
</code></pre>

<hr>
<h2 id='api2_url'>Get partial API v2 URL for the provided path</h2><span id='topic+api2_url'></span>

<h3>Description</h3>

<p>Get partial API v2 URL for the provided path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api2_url(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="api2_url_+3A_path">path</code></td>
<td>
<p>relative path of the API v2 endpoint (e.g. <code>/me</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns &quot;/api/v2&quot; + path
</p>


<h3>Examples</h3>

<pre><code class='language-R'> api2_url("/me")
</code></pre>

<hr>
<h2 id='authorization'>Provide OAuth2 token to use for authorization with Genesys</h2><span id='topic+authorization'></span>

<h3>Description</h3>

<p>Provide OAuth2 token to use for authorization with Genesys
</p>


<h3>Usage</h3>

<pre><code class='language-R'>authorization(authorization)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="authorization_+3A_authorization">authorization</code></td>
<td>
<p>OAuth2 Authorization header obtained from somewhere else (e.g. an ENV variable)</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+user_login">user_login</a></code>, <code><a href="#topic+client_login">client_login</a></code>
</p>

<hr>
<h2 id='check_country'>Run Land-or-Sea check on MCPD data. Uploads only rows where ORIGCTY,
DECLATITUDE and DECLONGITUDE are provided.</h2><span id='topic+check_country'></span>

<h3>Description</h3>

<p>Run Land-or-Sea check on MCPD data. Uploads only rows where ORIGCTY,
DECLATITUDE and DECLONGITUDE are provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_country(mcpd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_country_+3A_mcpd">mcpd</code></td>
<td>
<p>Accession passport data in MCPD format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Results from validator
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  geoCheck &lt;- genesysr::check_country(mcpd)

## End(Not run)

</code></pre>

<hr>
<h2 id='check_landorsea'>Run Land-or-Sea check on MCPD data using https://validator.genesys-pgr.org.
Uploads only rows where DECLATITUDE and DECLONGITUDE are provided. 
In practice it is better to use 'check_country' if ORIGCTY data exists.</h2><span id='topic+check_landorsea'></span>

<h3>Description</h3>

<p>Run Land-or-Sea check on MCPD data using https://validator.genesys-pgr.org.
Uploads only rows where DECLATITUDE and DECLONGITUDE are provided. 
In practice it is better to use 'check_country' if ORIGCTY data exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_landorsea(mcpd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_landorsea_+3A_mcpd">mcpd</code></td>
<td>
<p>Accession passport data in MCPD format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Results from validator
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  waterCheck &lt;- genesysr::check_landorsea(mcpd)

## End(Not run)

</code></pre>

<hr>
<h2 id='check_taxonomy'>Check MCPD taxonomic data (GENUS, SPECIES, SPAUTHOR, SUBTAXA, SUBTAUTHOR)
using https://validator.genesys-pgr.org.</h2><span id='topic+check_taxonomy'></span>

<h3>Description</h3>

<p>Duplicate input rows are removed using dplyr::distinct() and results are
returned for unique rows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_taxonomy(mcpd, toCurrentTaxa = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_taxonomy_+3A_mcpd">mcpd</code></td>
<td>
<p>Accession passport data in MCPD format</p>
</td></tr>
<tr><td><code id="check_taxonomy_+3A_tocurrenttaxa">toCurrentTaxa</code></td>
<td>
<p>Should obsoleted names be reported?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Results from validator
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  taxaCheck &lt;- genesysr::check_taxonomy(mcpd)

## End(Not run)

</code></pre>

<hr>
<h2 id='client_login'>Login to Genesys as a service client (system-to-system)</h2><span id='topic+client_login'></span>

<h3>Description</h3>

<p>The client must be enabled for Client Credential grant on Genesys.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>client_login()
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+setup">setup</a></code>
</p>

<hr>
<h2 id='download_mcpd'>Download passport data for one genebank in Excel format and save it to disk</h2><span id='topic+download_mcpd'></span>

<h3>Description</h3>

<p>Download passport data for one genebank in Excel format and save it to disk
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_mcpd(instituteCode, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_mcpd_+3A_institutecode">instituteCode</code></td>
<td>
<p>FAO WIEWS institute code</p>
</td></tr>
<tr><td><code id="download_mcpd_+3A_file">file</code></td>
<td>
<p>Target file name. Defaults to Genesys-provided file name in the current working directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The downloaded MCPD file name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Download MCPD passport data for NGA039
  excelFile &lt;- download_mcpd("NGA039")

## End(Not run)

</code></pre>

<hr>
<h2 id='download_pdci'>Download PDCI data for one genebank in Excel format and save it to disk.</h2><span id='topic+download_pdci'></span>

<h3>Description</h3>

<p>Download PDCI data for one genebank in Excel format and save it to disk.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_pdci(instituteCode, file = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_pdci_+3A_institutecode">instituteCode</code></td>
<td>
<p>FAO WIEWS institute code</p>
</td></tr>
<tr><td><code id="download_pdci_+3A_file">file</code></td>
<td>
<p>Target file name. Defaults to Genesys-provided file name in the current working directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The downloaded PDCI file name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Download PDCI  data for NGA039
  excelData &lt;- download_pdci("NGA039")

## End(Not run)

</code></pre>

<hr>
<h2 id='fetch_accessions'>Fetch accession passport data and return the paged data structure for further processing.
<code><a href="#topic+get_accessions">get_accessions</a></code> might be more useful as it returns a data table.</h2><span id='topic+fetch_accessions'></span>

<h3>Description</h3>

<p>Fetch accession passport data and return the paged data structure for further processing.
<code><a href="#topic+get_accessions">get_accessions</a></code> might be more useful as it returns a data table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetch_accessions(
  filters = list(),
  page = NULL,
  size = 1000,
  selector = NULL,
  at.least = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetch_accessions_+3A_filters">filters</code></td>
<td>
<p>an R <code>structure</code> with Genesys filters</p>
</td></tr>
<tr><td><code id="fetch_accessions_+3A_page">page</code></td>
<td>
<p>the page index (0-based)</p>
</td></tr>
<tr><td><code id="fetch_accessions_+3A_size">size</code></td>
<td>
<p>number of records to load per page (page size)</p>
</td></tr>
<tr><td><code id="fetch_accessions_+3A_selector">selector</code></td>
<td>
<p>NULL or a function to &quot;select&quot; variables of interest</p>
</td></tr>
<tr><td><code id="fetch_accessions_+3A_at.least">at.least</code></td>
<td>
<p>stop fetching when at.least records are received from Genesys</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Paged data structure
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_accessions">get_accessions</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Retrieve all accession data by country of origin
  accessions &lt;- genesysr::fetch_accessions(mcpd_filter(ORIGCTY = c("DEU", "SVN")))

  # Fetch Musa
  musa &lt;- genesysr::fetch_accessions(list(taxonomy.genus = c('Musa')))

  # Apply selector function
  accessions &lt;- genesysr::fetch_accessions(
    mcpd_filter(ORIGCTY = c("DEU", "SVN")),
    selector = function(x) {
      list(id = x$id, acceNumb = x$acceNumb, instCode = x$institute$code)
    }
  )

## End(Not run)

</code></pre>

<hr>
<h2 id='filter_DOI'>Add filter on accession DOI</h2><span id='topic+filter_DOI'></span>

<h3>Description</h3>

<p>Add filter on accession DOI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_DOI(filter = list(), DOI)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_DOI_+3A_filter">filter</code></td>
<td>
<p>Existing filters (or blank list if not provided)</p>
</td></tr>
<tr><td><code id="filter_DOI_+3A_doi">DOI</code></td>
<td>
<p>Accession DOI</p>
</td></tr>
</table>

<hr>
<h2 id='filter_GENUS'>Add filter by genus</h2><span id='topic+filter_GENUS'></span>

<h3>Description</h3>

<p>Add filter by genus
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_GENUS(filter = list(), GENUS)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_GENUS_+3A_filter">filter</code></td>
<td>
<p>Existing filters (or blank list if not provided)</p>
</td></tr>
<tr><td><code id="filter_GENUS_+3A_genus">GENUS</code></td>
<td>
<p>List of genera</p>
</td></tr>
</table>

<hr>
<h2 id='filter_INSTCODE'>Add filter by genus</h2><span id='topic+filter_INSTCODE'></span>

<h3>Description</h3>

<p>Add filter by genus
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_INSTCODE(filter = list(), INSTCODE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_INSTCODE_+3A_filter">filter</code></td>
<td>
<p>Existing filters (or blank list if not provided)</p>
</td></tr>
<tr><td><code id="filter_INSTCODE_+3A_instcode">INSTCODE</code></td>
<td>
<p>List of WIEWS institute codes</p>
</td></tr>
</table>

<hr>
<h2 id='filter_ORIGCTY'>Add filter on Country of origin of material</h2><span id='topic+filter_ORIGCTY'></span>

<h3>Description</h3>

<p>Add filter on Country of origin of material
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_ORIGCTY(filter = list(), ORIGCTY)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_ORIGCTY_+3A_filter">filter</code></td>
<td>
<p>Existing filters (or blank list if not provided)</p>
</td></tr>
<tr><td><code id="filter_ORIGCTY_+3A_origcty">ORIGCTY</code></td>
<td>
<p>Country of origin</p>
</td></tr>
</table>

<hr>
<h2 id='filter_SAMPSTAT'>Add filter on Biological status of sample</h2><span id='topic+filter_SAMPSTAT'></span>

<h3>Description</h3>

<p>Add filter on Biological status of sample
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_SAMPSTAT(filter = list(), SAMPSTAT)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_SAMPSTAT_+3A_filter">filter</code></td>
<td>
<p>Existing filters (or blank list if not provided)</p>
</td></tr>
<tr><td><code id="filter_SAMPSTAT_+3A_sampstat">SAMPSTAT</code></td>
<td>
<p>Biological status of sample</p>
</td></tr>
</table>

<hr>
<h2 id='filter_SPECIES'>Add filter on specific epithet</h2><span id='topic+filter_SPECIES'></span>

<h3>Description</h3>

<p>Add filter on specific epithet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_SPECIES(filter = list(), SPECIES)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_SPECIES_+3A_filter">filter</code></td>
<td>
<p>Existing filters (or blank list if not provided)</p>
</td></tr>
<tr><td><code id="filter_SPECIES_+3A_species">SPECIES</code></td>
<td>
<p>List of specific epithets</p>
</td></tr>
</table>

<hr>
<h2 id='get_accessions'>Get accession passport data as a data table.</h2><span id='topic+get_accessions'></span>

<h3>Description</h3>

<p>Get accession passport data as a data table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_accessions(
  filters = list(),
  page = 0,
  size = 1000,
  fields = NULL,
  exclude = NULL,
  selector = NULL,
  at.least = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_accessions_+3A_filters">filters</code></td>
<td>
<p>an R <code>structure</code> with Genesys filters</p>
</td></tr>
<tr><td><code id="get_accessions_+3A_page">page</code></td>
<td>
<p>the page index (0-based)</p>
</td></tr>
<tr><td><code id="get_accessions_+3A_size">size</code></td>
<td>
<p>number of records to load per page (page size)</p>
</td></tr>
<tr><td><code id="get_accessions_+3A_fields">fields</code></td>
<td>
<p>list of fields to fetch from Genesys</p>
</td></tr>
<tr><td><code id="get_accessions_+3A_exclude">exclude</code></td>
<td>
<p>list of field prefixes to exclude from the Genesys response</p>
</td></tr>
<tr><td><code id="get_accessions_+3A_selector">selector</code></td>
<td>
<p>NULL or a function to &quot;select&quot; variables of interest</p>
</td></tr>
<tr><td><code id="get_accessions_+3A_at.least">at.least</code></td>
<td>
<p>stop fetching when at.least records are received from Genesys</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data table
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mcpd_filter">mcpd_filter</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Retrieve all accession data by country of origin (Slovenia, Ivory Coast)
  accessions &lt;- genesysr::get_accessions(list(countryOfOrigin = list(code3 = c('SVN', 'CIV'))))

  # Fetch Musa, but only geographic data and accessionNumber
  musa &lt;- genesysr::get_accessions(list(taxonomy = list(genus = c('Musa'))),
    fields = c("accessionNumber", "geo"))

  # Apply selector function
  accessions &lt;- genesysr::get_accessions(mcpd_filter(ORIGCTY = c('DEU', 'SVN')),
    selector = function(x) {
      list(id = x$id, acceNumb = x$accessionNumber, instCode = x$instituteCode)
    }, at.least = 100)

## End(Not run)

</code></pre>

<hr>
<h2 id='list_crops'>Fetch Genesys crops. Note that the list of Genesys crops does not fully
correspond with various CROPNAME in MCPD provided by genebanks.</h2><span id='topic+list_crops'></span>

<h3>Description</h3>

<p>Fetch Genesys crops. Note that the list of Genesys crops does not fully
correspond with various CROPNAME in MCPD provided by genebanks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_crops()
</code></pre>


<h3>Value</h3>

<p>Genesys crops
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Retrieve all Genesys crops
  crops &lt;- genesysr::list_crops()

## End(Not run)

</code></pre>

<hr>
<h2 id='list_institutes'>List FAO WIEWS institutes.</h2><span id='topic+list_institutes'></span>

<h3>Description</h3>

<p>Institute filters:
- code: list of WIEWS institute codes
- accessions: boolean, TRUE list only institutes with accessions in Genesys, FALSE without accessions
- country$code3: list of ISO3166 country codes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_institutes(filters = list(), at.least = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_institutes_+3A_filters">filters</code></td>
<td>
<p>an R <code>structure</code> with Institute filters</p>
</td></tr>
<tr><td><code id="list_institutes_+3A_at.least">at.least</code></td>
<td>
<p>stop fetching when at.least records are received from Genesys</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of institutes
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mcpd_filter">mcpd_filter</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Retrieve taxa of selected accessions
  filters &lt;- c();
  filters$accessions = TRUE; # Has accessions in Genesys
  institutes &lt;- genesysr::list_institutes(filters)

## End(Not run)

</code></pre>

<hr>
<h2 id='list_species'>Fetch taxonomic data of selected accessions.</h2><span id='topic+list_species'></span>

<h3>Description</h3>

<p>Fetch taxonomic data of selected accessions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_species(filters = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_species_+3A_filters">filters</code></td>
<td>
<p>an R <code>structure</code> with Genesys filters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Taxonomic records of selected accessions
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mcpd_filter">mcpd_filter</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Retrieve taxa of selected accessions
  taxa &lt;- genesysr::list_species(mcpd_filter(INSTCODE = c("LBN002", "MEX002")))

## End(Not run)

</code></pre>

<hr>
<h2 id='mcpd_filter'>Make or adjust filter using MCPD terminology</h2><span id='topic+mcpd_filter'></span>

<h3>Description</h3>

<p>See FAO/Bioversity Multi-Crop Passport Descriptors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mcpd_filter(
  filter = list(),
  INSTCODE = NULL,
  DOI = NULL,
  ORIGCTY = NULL,
  SAMPSTAT = NULL,
  GENUS = NULL,
  SPECIES = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mcpd_filter_+3A_filter">filter</code></td>
<td>
<p>Existing filters (or blank list if not provided)</p>
</td></tr>
<tr><td><code id="mcpd_filter_+3A_instcode">INSTCODE</code></td>
<td>
<p>WIEWS Institute Code of the holding institute</p>
</td></tr>
<tr><td><code id="mcpd_filter_+3A_doi">DOI</code></td>
<td>
<p>Accession DOI</p>
</td></tr>
<tr><td><code id="mcpd_filter_+3A_origcty">ORIGCTY</code></td>
<td>
<p>Country of origin</p>
</td></tr>
<tr><td><code id="mcpd_filter_+3A_sampstat">SAMPSTAT</code></td>
<td>
<p>Biological status of sample</p>
</td></tr>
<tr><td><code id="mcpd_filter_+3A_genus">GENUS</code></td>
<td>
<p>List of genera</p>
</td></tr>
<tr><td><code id="mcpd_filter_+3A_species">SPECIES</code></td>
<td>
<p>List of specific epithets (within specified genera)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'> # Filter accessions from Mexico and Slovenia
 mcpd_filter(ORIGCTY = c("MEX", "SVN"))


</code></pre>

<hr>
<h2 id='me'>Who am i? Loads and prints the user profile from Genesys as JSON.
You need to be logged in.</h2><span id='topic+me'></span>

<h3>Description</h3>

<p>Who am i? Loads and prints the user profile from Genesys as JSON.
You need to be logged in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>me()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  # Login
  setup_production()
  user_login()
  me()

## End(Not run)

</code></pre>

<hr>
<h2 id='print_setup'>Print Genesys client configuration</h2><span id='topic+print_setup'></span>

<h3>Description</h3>

<p>Print Genesys client configuration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_setup()
</code></pre>

<hr>
<h2 id='setup'>Configure the Genesys environment</h2><span id='topic+setup'></span>

<h3>Description</h3>

<p>Configure the Genesys environment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup(server = NULL, client_id = NULL, client_secret = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setup_+3A_server">server</code></td>
<td>
<p>Server base URL (e.g. &quot;https://api.genesys-pgr.org&quot; or &quot;https://api.sandbox.genesys-pgr.org&quot;)</p>
</td></tr>
<tr><td><code id="setup_+3A_client_id">client_id</code></td>
<td>
<p>OAuth client ID</p>
</td></tr>
<tr><td><code id="setup_+3A_client_secret">client_secret</code></td>
<td>
<p>OAuth client secret</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>See utility methods <code><a href="#topic+setup_production">setup_production</a></code>, <code><a href="#topic+setup_sandbox">setup_sandbox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  # Link with sandbox
  setup_sandbox()

</code></pre>

<hr>
<h2 id='setup_production'>Setup for Genesys Production</h2><span id='topic+setup_production'></span>

<h3>Description</h3>

<p>Use the Genesys R Client with &lt;https://api.genesys-pgr.org&gt; requiring <code><a href="#topic+user_login">user_login</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_production()
</code></pre>

<hr>
<h2 id='setup_sandbox'>Setup for Genesys Sandbox</h2><span id='topic+setup_sandbox'></span>

<h3>Description</h3>

<p>Use the Genesys R Client with &lt;https://api.sandbox.genesys-pgr.org&gt; requiring <code><a href="#topic+user_login">user_login</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setup_sandbox()
</code></pre>

<hr>
<h2 id='user_login'>Login to Genesys as a user</h2><span id='topic+user_login'></span>

<h3>Description</h3>

<p>The authorization URL will open in a browser, ask the user to grant
permissions to R. After successful authentication the browser will 
display a message:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user_login(redirect_uri = "http://127.0.0.1:48913")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="user_login_+3A_redirect_uri">redirect_uri</code></td>
<td>
<p>a custom redirect_uri to submit as part of the authentication request.
This is most useful if the default port is blocked and you wish to specify
another port: redirect_uri = &quot;http://127.0.0.1:44211&quot;
Note that &quot;http://127.0.0.1&quot; is requred and that &quot;http://localhost&quot; will not work.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>&ldquo;'
Authentication complete. Please close this page and return to R.
&ldquo;'
</p>
<p>Close the browser and return to R.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+setup">setup</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
