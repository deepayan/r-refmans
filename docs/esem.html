<!DOCTYPE html><html lang="en"><head><title>Help for package esem</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {esem}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#create_referent'><p>Create a referent list</p></a></li>
<li><a href='#esem_c'><p>Exploratory Structural Equiation Modeling ESEM (ESEM)</p></a></li>
<li><a href='#esem_cfa'><p>Confirmatory factor anaysis (CFA) step for ESEM-with-CFA</p></a></li>
<li><a href='#esem_cfa_syntax'><p>Title</p></a></li>
<li><a href='#esem_cfa2'><p>Exploratory Structural Equiation Modeling ESEM (ESEM) with geominT rotation</p></a></li>
<li><a href='#esem_efa'><p>Exploratory factor analysis (EFA) for ESEM</p></a></li>
<li><a href='#esem_syntax'><p>Create a model syntax for ESEM-with-CFA</p></a></li>
<li><a href='#esem_syntax_keys'><p>Title</p></a></li>
<li><a href='#esem_syntax_mplus'><p>Create a model syntax for ESEM-with-CFA compatible with MPlus</p></a></li>
<li><a href='#make_target'><p>Title</p></a></li>
<li><a href='#sdq_lsac'><p>Strengths and Difficulties Questionnaire (SDQ) of the Longitudinal Study of Australian Children (LSAC)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Exploratory Structural Equation Modeling ESEM</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of functions developed to support the tutorial on using Exploratory Structural Equiation Modeling (ESEM) (Asparouhov &amp; Muthén, 2009) <a href="https://www.statmodel.com/download/EFACFA810.pdf">https://www.statmodel.com/download/EFACFA810.pdf</a>) with Longitudinal Study of Australian Children (LSAC) dataset (Mohal et al., 2023) &lt;<a href="https://doi.org/10.26193%2FQR4L6Q">doi:10.26193/QR4L6Q</a>&gt;. 
    The package uses 'tidyverse','psych', 'lavaan','semPlot' and provides additional functions to conduct ESEM. 
    The package provides general functions to complete ESEM, including esem_c(), creation of target matrix (if it is used) make_target(), generation of the Confirmatory Factor Analysis (CFA) model syntax esem_cfa_syntax(). 
    A sample data is provided - the package includes a sample data of the Strengths and Difficulties Questionnaire of the Longitudinal Study of Australian Children (SDQ LSAC) in sdq_lsac().  
    'ESEM' package vignette presents the tutorial demonstrating the use of ESEM on SDQ LSAC data. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>lavaan, magrittr, psych, tidyr, dplyr, rlang, tibble, methods,
utils</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/maria-pro/esem">https://github.com/maria-pro/esem</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/maria-pro/esem/issues">https://github.com/maria-pro/esem/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10), GPArotation</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-07-03 07:57:51 UTC; e5028514</td>
</tr>
<tr>
<td>Author:</td>
<td>Maria Prokofieva <a href="https://orcid.org/0000-0003-1974-3827"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Vasileios Stavropoulos [aut],
  Daniel Zarate [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Maria Prokofieva &lt;maria.prokofieva@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-07-05 14:03:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling 'rhs(lhs)'.
</p>

<hr>
<h2 id='create_referent'>Create a referent list</h2><span id='topic+create_referent'></span>

<h3>Description</h3>

<p>Create a referent list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_referent(esem_efa_results)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_referent_+3A_esem_efa_results">esem_efa_results</code></td>
<td>
<p>is a <cite>psych::fa()</cite> object with the results of exploratory factor analysis (EFA)
The object can be created using psych::fa() or a wrapper esem_efa() function
The function uses efa object to identify referents
A referent indicator is selected for each factor
It is the item that has a large (target) loading for the factor it measures and
The referents are used to ensure model identification and are used as starting values/ fixed values in the
the next step to create a lavaan model syntax.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with factors and corresponding referents (i.e. referents in that factor)
</p>

<hr>
<h2 id='esem_c'>Exploratory Structural Equiation Modeling ESEM (ESEM)</h2><span id='topic+esem_c'></span>

<h3>Description</h3>

<p>Exploratory Structural Equiation Modeling ESEM (ESEM)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_c(
  data,
  nfactors,
  fm = "ML",
  rotate = "geominT",
  scores = "regression",
  residuals = TRUE,
  Target = NULL,
  missing = TRUE,
  mimic = c("MPlus"),
  std.lv = TRUE,
  ordered = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_c_+3A_data">data</code></td>
<td>
<p>is a raw data matrix.</p>
</td></tr>
<tr><td><code id="esem_c_+3A_nfactors">nfactors</code></td>
<td>
<p>is number of factors to extract</p>
</td></tr>
<tr><td><code id="esem_c_+3A_fm">fm</code></td>
<td>
<p>is factoring method to be used in factor estimation. The suggested methods are available in  <cite>psych::fa()</cite></p>
</td></tr>
<tr><td><code id="esem_c_+3A_rotate">rotate</code></td>
<td>
<p>is the rotation method to be used. The suggested methods are available in  <cite>psych::fa()</cite></p>
</td></tr>
<tr><td><code id="esem_c_+3A_scores">scores</code></td>
<td>
<p>is the factor scores to be used in EFA estimation. The default scores are estimated using regression as set in &quot;regression&quot;.</p>
</td></tr>
<tr><td><code id="esem_c_+3A_residuals">residuals</code></td>
<td>
<p>is set to FALSE by default. In case the residual matrix is required in the output, this parameter should be set to TRUE</p>
</td></tr>
<tr><td><code id="esem_c_+3A_target">Target</code></td>
<td>
<p>is the target rotation matrix to be used. In case no target matrix is provided, EFA proceeds with alternative approach. The list of target rotations are available from <cite>GPArotation</cite></p>
</td></tr>
<tr><td><code id="esem_c_+3A_missing">missing</code></td>
<td>
<p>is used with scores set to TRUE. The default is missing=TRUE which imputes missing values using either the median or the mean.</p>
</td></tr>
<tr><td><code id="esem_c_+3A_mimic">mimic</code></td>
<td>
<p>allows to mimic the final output results (i.e. CFA stage) to MPLUS to allow the user to compare the output.</p>
</td></tr>
<tr><td><code id="esem_c_+3A_std.lv">std.lv</code></td>
<td>
<p>is set to TRUE by default to provide standardized latent variables.</p>
</td></tr>
<tr><td><code id="esem_c_+3A_ordered">ordered</code></td>
<td>
<p>is set to TRUE by default to allow the use of categorical variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <cite>lavaan::lavaan-class</cite>, for which several methods are available, including a summary method.
</p>

<hr>
<h2 id='esem_cfa'>Confirmatory factor anaysis (CFA) step for ESEM-with-CFA</h2><span id='topic+esem_cfa'></span>

<h3>Description</h3>

<p>is a wrapper for lavaan::cfa() function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_cfa(model, data, mimic = c("MPlus"), std.lv = TRUE, ordered = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_cfa_+3A_model">model</code></td>
<td>
<p>is a character vector with a lavaan syntax for the ESEM model.</p>
</td></tr>
<tr><td><code id="esem_cfa_+3A_data">data</code></td>
<td>
<p>is a raw data matrix.</p>
</td></tr>
<tr><td><code id="esem_cfa_+3A_mimic">mimic</code></td>
<td>
<p>allows to mimic the final output results (i.e. CFA stage) to MPLUS to allow the user to compare the output.</p>
</td></tr>
<tr><td><code id="esem_cfa_+3A_std.lv">std.lv</code></td>
<td>
<p>is set to TRUE by default to provide standardized latent variables.</p>
</td></tr>
<tr><td><code id="esem_cfa_+3A_ordered">ordered</code></td>
<td>
<p>is set to TRUE by default to allow the use of categorical variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <cite>lavaan::lavaan-class</cite>, for which several methods are available, including a summary method.
</p>

<hr>
<h2 id='esem_cfa_syntax'>Title</h2><span id='topic+esem_cfa_syntax'></span>

<h3>Description</h3>

<p>Title
</p>
<p>Title
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_cfa_syntax(loadings)

esem_cfa_syntax(loadings)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_cfa_syntax_+3A_loadings">loadings</code></td>
<td>
<p>is a matrix with loadings values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with the syntax of the model tp be used at the CFA stage.
</p>
<p>A character vector with the syntax of the model tp be used at the CFA stage.
</p>

<hr>
<h2 id='esem_cfa2'>Exploratory Structural Equiation Modeling ESEM (ESEM) with geominT rotation</h2><span id='topic+esem_cfa2'></span>

<h3>Description</h3>

<p>Exploratory Structural Equiation Modeling ESEM (ESEM) with geominT rotation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_cfa2(
  data,
  nfactors,
  fm = "ML",
  rotate = "geominT",
  scores = "regression",
  residuals = TRUE,
  Target = NULL,
  missing = TRUE,
  mimic = c("MPlus"),
  std.lv = TRUE,
  ordered = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_cfa2_+3A_data">data</code></td>
<td>
<p>is a raw data matrix.</p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_nfactors">nfactors</code></td>
<td>
<p>is number of factors to extract</p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_fm">fm</code></td>
<td>
<p>is factoring method to be used in factor estimation. The suggested methods are available in  <cite>psych::fa()</cite></p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_rotate">rotate</code></td>
<td>
<p>is the rotation method to be used. The suggested methods are available in  <cite>psych::fa()</cite></p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_scores">scores</code></td>
<td>
<p>is the factor scores to be used in EFA estimation. The default scores are estimated using regression as set in &quot;regression&quot;.</p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_residuals">residuals</code></td>
<td>
<p>is set to FALSE by default. In case the residual matrix is required in the output, this parameter should be set to TRUE</p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_target">Target</code></td>
<td>
<p>is the target rotation matrix to be used. In case no target matrix is provided, EFA proceeds with alternative approach. The list of target rotations are available from <cite>GPArotation</cite></p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_missing">missing</code></td>
<td>
<p>is used with scores set to TRUE. The default is missing=TRUE which imputes missing values using either the median or the mean.</p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_mimic">mimic</code></td>
<td>
<p>allows to mimic the final output results (i.e. CFA stage) to MPLUS to allow the user to compare the output.</p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_std.lv">std.lv</code></td>
<td>
<p>is set to TRUE by default to provide standardized latent variables.</p>
</td></tr>
<tr><td><code id="esem_cfa2_+3A_ordered">ordered</code></td>
<td>
<p>is set to TRUE by default to allow the use of categorical variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <cite>lavaan::lavaan-class</cite>, for which several methods are available, including a summary method.
</p>

<hr>
<h2 id='esem_efa'>Exploratory factor analysis (EFA) for ESEM</h2><span id='topic+esem_efa'></span>

<h3>Description</h3>

<p>Exploratory factor analysis (EFA) for ESEM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_efa(
  data,
  nfactors,
  fm = "ML",
  rotate = "geominT",
  scores = "regression",
  residuals = TRUE,
  Target = NULL,
  missing = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_efa_+3A_data">data</code></td>
<td>
<p>is a raw data matrix.</p>
</td></tr>
<tr><td><code id="esem_efa_+3A_nfactors">nfactors</code></td>
<td>
<p>is number of factors to extract</p>
</td></tr>
<tr><td><code id="esem_efa_+3A_fm">fm</code></td>
<td>
<p>is the factoring method.</p>
</td></tr>
<tr><td><code id="esem_efa_+3A_rotate">rotate</code></td>
<td>
<p>is the rotation method to be used. The suggested methods are available in  <cite>psych::fa()</cite></p>
</td></tr>
<tr><td><code id="esem_efa_+3A_scores">scores</code></td>
<td>
<p>is the factor scores to be used in EFA estimation. The default scores are estimated using regression as set in &quot;regression&quot;.</p>
</td></tr>
<tr><td><code id="esem_efa_+3A_residuals">residuals</code></td>
<td>
<p>is set to FALSE by default. In case the residual matrix is required in the output, this parameter should be set to TRUE</p>
</td></tr>
<tr><td><code id="esem_efa_+3A_target">Target</code></td>
<td>
<p>is the target rotation matrix to be used. In case no target matrix is provided, EFA proceeds with alternative approach. The list of target rotations are available from <cite>GPArotation</cite></p>
</td></tr>
<tr><td><code id="esem_efa_+3A_missing">missing</code></td>
<td>
<p>is used with scores set to TRUE. The default is missing=TRUE which imputes missing values using either the median or the mean.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Eigen values of the common factor solution and reporting results for EFA stage
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sdq_lsac&lt;-sdq_lsac
esem_efa(data=sdq_lsac,
nfactors=5,
fm = 'ML',
rotate="geominT",
scores="regression",
residuals=TRUE,
missing=TRUE)
</code></pre>

<hr>
<h2 id='esem_syntax'>Create a model syntax for ESEM-with-CFA</h2><span id='topic+esem_syntax'></span>

<h3>Description</h3>

<p>Create a model syntax for ESEM-with-CFA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_syntax(esem_efa_results, referent_list = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_syntax_+3A_esem_efa_results">esem_efa_results</code></td>
<td>
<p>is a <cite>psych::fa()</cite> object with the results of exploratory factor analysis (EFA)
The object can be created using psych::fa() or a wrapper esem_efa() function</p>
</td></tr>
<tr><td><code id="esem_syntax_+3A_referent_list">referent_list</code></td>
<td>
<p>is a list with latent variables (factors) and their corresponding referent items.
referent_list can be generated using create_referent() function.
If no referent_list is provided, the list is generated automatically</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with a lavaan syntax for the ESEM model.
</p>

<hr>
<h2 id='esem_syntax_keys'>Title</h2><span id='topic+esem_syntax_keys'></span>

<h3>Description</h3>

<p>Title
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_syntax_keys(key_matrix, fixed)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_syntax_keys_+3A_key_matrix">key_matrix</code></td>
<td>
<p>is a matrix to be used to generate loadings</p>
</td></tr>
<tr><td><code id="esem_syntax_keys_+3A_fixed">fixed</code></td>
<td>
<p>is the values fixed or should be freely estimated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with the syntax of the model tp be used at the CFA stage.
</p>

<hr>
<h2 id='esem_syntax_mplus'>Create a model syntax for ESEM-with-CFA compatible with MPlus</h2><span id='topic+esem_syntax_mplus'></span>

<h3>Description</h3>

<p>Create a model syntax for ESEM-with-CFA compatible with MPlus
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esem_syntax_mplus(key_matrix = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esem_syntax_mplus_+3A_key_matrix">key_matrix</code></td>
<td>
<p>is a key matrix with the primary factor items. It can be made with the make.keys() function.
The primary factor items in the matrix are  used as referent items.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector with a lavaan syntax for the ESEM model that imitates MPlus.
</p>

<hr>
<h2 id='make_target'>Title</h2><span id='topic+make_target'></span>

<h3>Description</h3>

<p>Title
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_target(data, keys)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_target_+3A_data">data</code></td>
<td>
<p>is a dataset to be used in EFA</p>
</td></tr>
<tr><td><code id="make_target_+3A_keys">keys</code></td>
<td>
<p>is a key matrix with the primary factor items. It can be made with the make.keys() function.
The primary factor items in the matrix are  used as referent items.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with target matrix
</p>

<hr>
<h2 id='sdq_lsac'>Strengths and Difficulties Questionnaire (SDQ) of the Longitudinal Study of Australian Children (LSAC)</h2><span id='topic+sdq_lsac'></span>

<h3>Description</h3>

<p>The Longitudinal Study of Australian Children (LSAC) is a major study following
the development of 10,000 young people and their families from all parts of Australia.
It is conducted in partnership between the Department of Social Services,
the Australian Institute of Family Studies and the Australian Bureau of Statistics
with advice provided by a consortium of leading researchers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sdq_lsac
</code></pre>


<h3>Format</h3>

<p>A tibble with 3840 rows and 25 variables
</p>


<h3>Details</h3>

<p>The study began in 2003 with a representative sample of children
from urban and rural areas of all states and territories in Australia.
The study has a multi-disciplinary base, and examines a broad range of topics,
including parenting, family, peers, education, child care and health.
</p>
<p>Data are collected from two cohorts every two years.
The first cohort of 5,000 children was aged 0–1 years in 2003–04, and
the second cohort of 5,000 children was aged 4–5 years in 2003–04. The full dataset is available
<a href="https://growingupinaustralia.gov.au/data-and-documentation">here</a>
The SDQ is a 25-item instrument for children aged 4-17
years and includes fives scales: the “Hyperactivity,” “Emotional Symptoms,”
“Conduct Problems,” “Peer Problems,” and “Prosocial Behaviors”.
</p>
<p>The dataset was pre-processed and includes only variables relevant to the original latent
variables. The cleaning included:
</p>
<p>- reverse coding items s7_1, s11_1, s14_1,  s21_1, s25_1.
The reversed variables are named with R in the end: s7_1R, s11_1R, s14_1R,  s21_1R,s25_1R
</p>
<p>- the missing data treatment was done is addressed following guidelines of Baraldi &amp; Enders, 2010 and
Baraldi &amp; Enders, 2010.
</p>
<p>The cases with more than 10
with 5 iterations using multivariate imputations by chained equations approach that is based on Fully
Conditional Specification,
where each incomplete variable is imputed by a separate model (see
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
