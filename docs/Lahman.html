<!DOCTYPE html><html><head><title>Help for package Lahman</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Lahman}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AllstarFull'>
<p>AllstarFull table</p></a></li>
<li><a href='#Appearances'>
<p>Appearances table</p></a></li>
<li><a href='#AwardsManagers'>
<p>AwardsManagers table</p></a></li>
<li><a href='#AwardsPlayers'>
<p>AwardsPlayers table</p></a></li>
<li><a href='#AwardsShareManagers'>
<p>AwardsShareManagers table</p></a></li>
<li><a href='#AwardsSharePlayers'>
<p>AwardsSharePlayers table</p></a></li>
<li><a href='#Batting'>
<p>Batting table</p></a></li>
<li><a href='#battingLabels'>
<p>Variable Labels</p></a></li>
<li><a href='#BattingPost'>
<p>BattingPost table</p></a></li>
<li><a href='#battingStats'>
<p>Calculate additional batting statistics</p></a></li>
<li><a href='#CollegePlaying'>
<p>CollegePlaying table</p></a></li>
<li><a href='#Fielding'>
<p>Fielding table</p></a></li>
<li><a href='#FieldingOF'>
<p>FieldingOF table</p></a></li>
<li><a href='#FieldingOFsplit'>
<p>FieldingOFsplit table</p></a></li>
<li><a href='#FieldingPost'>
<p>FieldingPost data</p></a></li>
<li><a href='#HallOfFame'>
<p>Hall of Fame Voting Data</p></a></li>
<li><a href='#HomeGames'>
<p>HomeGames table</p></a></li>
<li><a href='#Label'>
<p>Extract the Label for a Variable</p></a></li>
<li><a href='#Lahman-package'>
<p>Sean Lahman's Baseball Database</p></a></li>
<li><a href='#LahmanData'>
<p>Lahman Datasets</p></a></li>
<li><a href='#Managers'>
<p>Managers table</p></a></li>
<li><a href='#ManagersHalf'>
<p>ManagersHalf table</p></a></li>
<li><a href='#Parks'>
<p>Parks table</p></a></li>
<li><a href='#People'>
<p>People table</p></a></li>
<li><a href='#Pitching'>
<p>Pitching table</p></a></li>
<li><a href='#PitchingPost'>
<p>PitchingPost table</p></a></li>
<li><a href='#playerInfo'>
<p>Lookup Information for Players and Teams</p></a></li>
<li><a href='#Salaries'>
<p>Salaries table</p></a></li>
<li><a href='#Schools'>
<p>Schools table</p></a></li>
<li><a href='#SeriesPost'>
<p>SeriesPost table</p></a></li>
<li><a href='#Teams'>
<p>Teams table</p></a></li>
<li><a href='#TeamsFranchises'>
<p>TeamFranchises table</p></a></li>
<li><a href='#TeamsHalf'>
<p>TeamsHalf table</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Sean 'Lahman' Baseball Database</td>
</tr>
<tr>
<td>Version:</td>
<td>11.0-0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-04-16</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Friendly [aut],
  Chris Dalzell [cre, aut],
  Martin Monkman [aut],
  Dennis Murphy [aut],
  Vanessa Foot [ctb],
  Justeena Zaki-Azat [ctb],
  Sean Lahman [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Chris Dalzell &lt;cdalzell@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides the tables from the 'Sean Lahman Baseball Database' as
    a set of R data.frames. It uses the data on pitching, hitting and fielding
    performance and other tables from 1871 through 2022, as recorded in the 2023
    version of the database. Documentation examples show how many baseball
    questions can be investigated.</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>lattice, ggplot2, googleVis, data.table, vcd, reshape2,
tidyr, knitr, rmarkdown, car</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://CRAN.R-project.org/package=Lahman">https://CRAN.R-project.org/package=Lahman</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/cdalzell/Lahman/issues">https://github.com/cdalzell/Lahman/issues</a></td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-03 21:57:19 UTC; DZ</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-04 08:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='AllstarFull'>
AllstarFull table
</h2><span id='topic+AllstarFull'></span>

<h3>Description</h3>

<p>All Star appearances by players
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(AllstarFull)</code></pre>


<h3>Format</h3>

<p>A data frame with 5516 observations on the following 8 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>gameNum</code></dt><dd><p>Game number (for years in which more than one game was played)</p>
</dd>
<dt><code>gameID</code></dt><dd><p>Game ID code</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>GP</code></dt><dd><p>Game played (zero if player did not appear in game)</p>
</dd>
<dt><code>startingPos</code></dt><dd><p>If the player started, what position he played</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AllstarFull)

# find number of appearances by players in the All Star games
player_appearances &lt;- with(AllstarFull, rev(sort(table(playerID))))

# How many All-Star players, in total?
length(player_appearances)

# density plot of the whole distribution
plot(density(player_appearances), main="Player appearances in All Star Games")
rug(jitter(player_appearances))

# who has played in more than 10 ASGs?
player_appearances[player_appearances &gt; 10]
hist(player_appearances[player_appearances &gt; 10])


# Hank Aaron's All-Star record:
subset(AllstarFull, playerID == "aaronha01")

# Years that Stan Musial played in the ASG:
with(AllstarFull, yearID[playerID == "musiast01"])

# Starting positions he played (NA means did not start)
with(AllstarFull, startingPos[playerID == "musiast01"])

# All-Star rosters from the 1966 ASG
subset(AllstarFull, gameID == "NLS196607120")

# All-Stars from the Washington Nationals
subset(AllstarFull, teamID == "WAS")

# Teams with the fewest All-Stars
rare &lt;- names(which(table(AllstarFull$teamID) &lt; 10))

# Records associated with the 'rare' teams:
# (There are a few teamID typos: can you spot them?)
subset(AllstarFull, teamID %in% rare)
</code></pre>

<hr>
<h2 id='Appearances'>
Appearances table
</h2><span id='topic+Appearances'></span>

<h3>Description</h3>

<p>Data on player appearances
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Appearances)</code></pre>


<h3>Format</h3>

<p>A data frame with 112106 observations on the following 21 variables.
</p>

<dl>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>G_all</code></dt><dd><p>Total games played</p>
</dd>
<dt><code>GS</code></dt><dd><p>Games started</p>
</dd>
<dt><code>G_batting</code></dt><dd><p>Games in which player batted</p>
</dd>
<dt><code>G_defense</code></dt><dd><p>Games in which player appeared on defense</p>
</dd>
<dt><code>G_p</code></dt><dd><p>Games as pitcher</p>
</dd>
<dt><code>G_c</code></dt><dd><p>Games as catcher</p>
</dd>
<dt><code>G_1b</code></dt><dd><p>Games as firstbaseman</p>
</dd>
<dt><code>G_2b</code></dt><dd><p>Games as secondbaseman</p>
</dd>
<dt><code>G_3b</code></dt><dd><p>Games as thirdbaseman</p>
</dd>
<dt><code>G_ss</code></dt><dd><p>Games as shortstop</p>
</dd>
<dt><code>G_lf</code></dt><dd><p>Games as leftfielder</p>
</dd>
<dt><code>G_cf</code></dt><dd><p>Games as centerfielder</p>
</dd>
<dt><code>G_rf</code></dt><dd><p>Games as right fielder</p>
</dd>
<dt><code>G_of</code></dt><dd><p>Games as outfielder</p>
</dd>
<dt><code>G_dh</code></dt><dd><p>Games as designated hitter</p>
</dd>
<dt><code>G_ph</code></dt><dd><p>Games as pinch hitter</p>
</dd>
<dt><code>G_pr</code></dt><dd><p>Games as pinch runner</p>
</dd>
</dl>



<h3>Details</h3>

<p>The Appearances table in the original version has some incorrect variable names.
In particular, the 5th column is <code>career_year</code>.
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Appearances)
library("dplyr")
library("tidyr")

# Henry Aaron's last two years as a DH in Milwaukee
Appearances %&gt;%
   filter(playerID == "aaronha01" &amp; teamID == "ML4") %&gt;%
   select(yearID:G_batting, G_of:G_ph)  # subset variables
   
# Herb Washington, strictly a pinch runner for Oakland in 1974-5
Appearances %&gt;%
   filter(playerID == "washihe01") 

# A true utility player - Jerry Hairston, Jr.
Appearances %&gt;%
  filter(playerID == "hairsje02")

# Appearances for the 1984 Cleveland Indians
Appearances %&gt;%
  filter(teamID == "CLE" &amp; yearID == 1984)

# Pete Rose's primary position each year of his career
Appearances %&gt;% 
   filter(playerID == "rosepe01") %&gt;%
   group_by(yearID, teamID) %&gt;%
   gather(pos, G, G_1b:G_rf) %&gt;%
   filter(G == max(G)) %&gt;%
   select(yearID:G_all, pos, G) %&gt;%
   mutate(pos = substring(as.character(pos), 3, 4)) %&gt;%
   arrange(yearID, teamID)


# Most pitcher appearances each year since 1950
Appearances %&gt;%
   filter(yearID &gt;= 1950) %&gt;%
   group_by(yearID) %&gt;%
   summarise(maxPitcher = playerID[which.max(G_p)],
             maxAppear = max(G_p))

# Individuals who have played all 162 games since 1961
all162 &lt;- Appearances %&gt;%
              filter(yearID &gt; 1960 &amp; G_all == 162) %&gt;% 
              arrange(yearID, playerID) %&gt;%
              select(yearID:G_all)
# Number of all-gamers by year (returns a vector)
table(all162$yearID)

# Players with most pinch hitting appearances in a year
Appearances %&gt;%
  arrange(desc(G_ph)) %&gt;%
  select(playerID, yearID, teamID, lgID, G_all, G_ph) %&gt;%
  head(., 10)

# Players with most pinch hitting appearances, career
Appearances %&gt;%
  group_by(playerID) %&gt;%
  select(playerID, G_all, G_ph) %&gt;%
  summarise(G = sum(G_all), PH = sum(G_ph)) %&gt;%
  arrange(desc(PH)) %&gt;%
  head(., 10)

# Players with most career appearances at each position
Appearances %&gt;%
  select(playerID, G_c:G_rf) %&gt;%
  rename(C = G_c, `1B` = G_1b, `2B` = G_2b, SS = G_ss,
         `3B` = G_3b, LF = G_lf, CF = G_cf, RF = G_rf) %&gt;%
  gather(pos, G, C:RF) %&gt;%
  group_by(pos, playerID) %&gt;%
  summarise(G = sum(G)) %&gt;%
  arrange(desc(G)) %&gt;%
  do(head(., 1))
</code></pre>

<hr>
<h2 id='AwardsManagers'>
AwardsManagers table 
</h2><span id='topic+AwardsManagers'></span>

<h3>Description</h3>

<p>Award information for managers awards
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(AwardsManagers)</code></pre>


<h3>Format</h3>

<p>A data frame with 179 observations on the following 6 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Manager (player) ID code</p>
</dd>
<dt><code>awardID</code></dt><dd><p>Name of award won</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>tie</code></dt><dd><p>Award was a tie (Y or N)</p>
</dd>
<dt><code>notes</code></dt><dd><p>Notes about the award</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Post-season managerial awards

# Number of recipients of each award by year
with(AwardsManagers, table(yearID, awardID))

# 1996 award winners
subset(AwardsManagers, yearID == 1996)

# AL winners of the BBWAA managerial award
subset(AwardsManagers, awardID == "BBWAA Manager of the year" &amp;
                          lgID == "AL")

# Tony LaRussa's manager of the year awards
subset(AwardsManagers, playerID == "larusto01")

</code></pre>

<hr>
<h2 id='AwardsPlayers'>
AwardsPlayers table 
</h2><span id='topic+AwardsPlayers'></span>

<h3>Description</h3>

<p>Award information for players awards
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(AwardsPlayers)</code></pre>


<h3>Format</h3>

<p>A data frame with 6879 observations on the following 6 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>awardID</code></dt><dd><p>Name of award won</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>ML</code> <code>NL</code></p>
</dd>
<dt><code>tie</code></dt><dd><p>Award was a tie (Y or N)</p>
</dd>
<dt><code>notes</code></dt><dd><p>Notes about the award</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AwardsPlayers)
# Which awards have been given and how many?
with(AwardsPlayers, table(awardID))
awardtab &lt;- with(AwardsPlayers, table(awardID))

# Plot the awardtab table as a Cleveland dot plot
library("lattice")
dotplot(awardtab)

# Restrict to MVP awards
mvp &lt;- subset(AwardsPlayers, awardID == "Most Valuable Player")
# Who won in 1994?
mvp[mvp$yearID == 1994L, ]

goldglove &lt;- subset(AwardsPlayers, awardID == "Gold Glove")
# which players won most often?
GGcount &lt;- table(goldglove$playerID)
GGcount[GGcount&gt;10]

# Triple Crown winners
subset(AwardsPlayers, awardID == "Triple Crown")

# Simultaneous Triple Crown and MVP winners
# (compare merged file to TC)
TC &lt;- subset(AwardsPlayers, awardID == "Triple Crown")
MVP &lt;- subset(AwardsPlayers, awardID == "Most Valuable Player")
keepvars &lt;- c("playerID", "yearID", "lgID.x")
merge(TC, MVP, by = c("playerID", "yearID"))[ ,keepvars]


</code></pre>

<hr>
<h2 id='AwardsShareManagers'>
AwardsShareManagers table
</h2><span id='topic+AwardsShareManagers'></span>

<h3>Description</h3>

<p>Award voting for managers awards
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(AwardsShareManagers)</code></pre>


<h3>Format</h3>

<p>A data frame with 425 observations on the following 7 variables.
</p>

<dl>
<dt><code>awardID</code></dt><dd><p>name of award votes were received for</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>playerID</code></dt><dd><p>Manager (player) ID code</p>
</dd>
<dt><code>pointsWon</code></dt><dd><p>Number of points received</p>
</dd>
<dt><code>pointsMax</code></dt><dd><p>Maximum number of points possible</p>
</dd>
<dt><code>votesFirst</code></dt><dd><p>Number of first place votes</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Voting for the BBWAA Manager of the Year award by year and league

require("dplyr")

# Sort in decreasing order of points by year and league
AwardsShareManagers %&gt;%
   group_by(yearID, lgID) %&gt;%
   arrange(desc(pointsWon))

# Any unanimous winners?
AwardsShareManagers %&gt;%
  filter(pointsWon == pointsMax)

# Manager with highest proportion of possible points
AwardsShareManagers %&gt;%
   mutate(propWon = pointsWon/pointsMax) %&gt;%
   arrange(desc(propWon)) %&gt;%
   head(., 1)

# Bobby Cox's MOY vote tallies
AwardsShareManagers %&gt;%
  filter(playerID == "coxbo01")

</code></pre>

<hr>
<h2 id='AwardsSharePlayers'>
AwardsSharePlayers table
</h2><span id='topic+AwardsSharePlayers'></span>

<h3>Description</h3>

<p>Award voting for managers awards
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(AwardsSharePlayers)</code></pre>


<h3>Format</h3>

<p>A data frame with 6879 observations on the following 7 variables.
</p>

<dl>
<dt><code>awardID</code></dt><dd><p>name of award votes were received for</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AL</code> <code>ML</code> <code>NL</code></p>
</dd>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>pointsWon</code></dt><dd><p>Number of points received</p>
</dd>
<dt><code>pointsMax</code></dt><dd><p>Maximum number of points possible</p>
</dd>
<dt><code>votesFirst</code></dt><dd><p>Number of first place votes</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Vote tallies for post-season player awards

require("dplyr")

# Which awards are represented in this data frame?
unique(AwardsSharePlayers$awardID)

# Sort the votes for the Cy Young award in decreasing order.
# Until 1967, the award went to the best pitcher
# in both leagues.

cyvotes &lt;- AwardsSharePlayers %&gt;%
              filter(awardID == "Cy Young") %&gt;%
              group_by(yearID, lgID) %&gt;%
              arrange(desc(pointsWon))

# 2012 votes
subset(cyvotes, yearID == 2012)

# top three votegetters each year by league

cya_top3 &lt;- cyvotes %&gt;%
              group_by(yearID, lgID) %&gt;%
              do(head(., 3))
head(cya_top3, 12)

# unanimous Cy Young winners
subset(cyvotes, pointsWon == pointsMax)

## CYA was a major league award until 1967
# Find top five pitchers with most top 3 vote tallies in CYA
# head(with(cya_top3, rev(sort(table(playerID)))), 5)

# Pre-1967
cya_top3 %&gt;% 
  filter(yearID &lt;= 1966) %&gt;%
  group_by(playerID) %&gt;%
  summarise(yrs_top3 = n()) %&gt;%
  arrange(desc(yrs_top3)) %&gt;%
  head(., 2)

# 1967+ (both leagues)
cya_top3 %&gt;% 
  filter(yearID &gt; 1966) %&gt;%
  group_by(playerID) %&gt;%
  summarise(yrs_top3 = n()) %&gt;%
  arrange(desc(yrs_top3)) %&gt;%
  head(., 5)

# 1967+ (by league)
cya_top3 %&gt;% 
  filter(yearID &gt; 1966) %&gt;%
  group_by(playerID, lgID) %&gt;%
  summarise(yrs_top3 = n()) %&gt;%
  arrange(desc(yrs_top3)) %&gt;%
  head(., 5)

# Ditto for MVP awards
# Top 3 votegetters for MVP award by year and league
MVP_top3 &lt;- AwardsSharePlayers %&gt;% 
              filter(awardID == "MVP") %&gt;%
              group_by(yearID, lgID) %&gt;% 
              arrange(desc(pointsWon)) %&gt;%
              do(head(., 3))
tail(MVP_top3)

## Select players with &gt;= 7 top 3 finishes
MVP_top3 %&gt;% 
  group_by(playerID) %&gt;%
  summarise(n_top3 = n()) %&gt;%
  arrange(desc(n_top3)) %&gt;%
  filter(n_top3 &gt; 6)

</code></pre>

<hr>
<h2 id='Batting'>
Batting table
</h2><span id='topic+Batting'></span>

<h3>Description</h3>

<p>Batting table - batting statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Batting)</code></pre>


<h3>Format</h3>

<p>A data frame with 112184 observations on the following 22 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>stint</code></dt><dd><p>player's stint (order of appearances within a season)</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>G</code></dt><dd><p>Games: number of games in which a player played</p>
</dd>
<dt><code>AB</code></dt><dd><p>At Bats</p>
</dd>
<dt><code>R</code></dt><dd><p>Runs</p>
</dd>
<dt><code>H</code></dt><dd><p>Hits: times reached base because of a batted, fair ball without error by the defense</p>
</dd>
<dt><code>X2B</code></dt><dd><p>Doubles: hits on which the batter reached second base safely</p>
</dd>
<dt><code>X3B</code></dt><dd><p>Triples: hits on which the batter reached third base safely</p>
</dd>
<dt><code>HR</code></dt><dd><p>Homeruns</p>
</dd>
<dt><code>RBI</code></dt><dd><p>Runs Batted In</p>
</dd>
<dt><code>SB</code></dt><dd><p>Stolen Bases</p>
</dd>
<dt><code>CS</code></dt><dd><p>Caught Stealing</p>
</dd>
<dt><code>BB</code></dt><dd><p>Base on Balls</p>
</dd>
<dt><code>SO</code></dt><dd><p>Strikeouts</p>
</dd>
<dt><code>IBB</code></dt><dd><p>Intentional walks</p>
</dd>
<dt><code>HBP</code></dt><dd><p>Hit by pitch</p>
</dd>
<dt><code>SH</code></dt><dd><p>Sacrifice hits</p>
</dd>
<dt><code>SF</code></dt><dd><p>Sacrifice flies</p>
</dd>
<dt><code>GIDP</code></dt><dd><p>Grounded into double plays</p>
</dd>
</dl>



<h3>Details</h3>

<p>Variables <code>X2B</code> and <code>X3B</code> are named <code>2B</code> and <code>3B</code> in the original database
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+battingStats">battingStats</a></code> for calculating batting average (BA) and other derived statistics
</p>
<p><code><a href="plyr.html#topic+baseball">baseball</a></code> for a similar dataset, but a subset of players who played 15 or more seasons.
</p>
<p><code><a href="vcd.html#topic+Baseball">Baseball</a></code> for data on batting in the 1987 season.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Batting)
head(Batting)
require("dplyr")

## Prelude: Extract information from Salaries and People
## to be merged with the batting data.

# Subset of Salaries data
salaries &lt;- Salaries %&gt;%
              select(playerID, yearID, teamID, salary)

# Subset of People table (player metadata)
peopleInfo &lt;- People %&gt;%
              select(playerID, birthYear, birthMonth, nameLast,
                     nameFirst, bats)

# Left join salaries and peopleInfo to batting data,
# create an age variable and sort by playerID, yearID and stint
# Returns an ignorable warning.
batting &lt;- battingStats() %&gt;% 
             left_join(salaries, 
                       by =c("playerID", "yearID", "teamID")) %&gt;%
             left_join(peopleInfo, by = "playerID") %&gt;%
             mutate(age = yearID - birthYear - 
                            1L *(birthMonth &gt;= 10)) %&gt;%
             arrange(playerID, yearID, stint)

## Generate a ggplot similar to the NYT graph in the story about Ted
## Williams and the last .400 MLB season 
# http://www.nytimes.com/interactive/2011/09/18/sports/baseball/WILLIAMS-GRAPHIC.html

# Restrict the pool of eligible players to the years after 1899 and
# players with a minimum of 450 plate appearances (this covers the
# strike year of 1994 when Tony Gwynn hit .394 before play was suspended
# for the season - in a normal year, the minimum number of plate appearances is 502)

eligibleHitters &lt;- batting %&gt;%
                     filter(yearID &gt;= 1900 &amp; PA &gt; 450)

# Find the hitters with the highest BA in MLB each year (there are a
# few ties).  Include all players with BA &gt; .400, whether they
# won a batting title or not, and add an indicator variable for
# .400 average in a season.

topHitters &lt;- eligibleHitters %&gt;%
                 group_by(yearID) %&gt;%
                 filter(BA == max(BA)| BA &gt;= .400) %&gt;%
                 mutate(ba400 = BA &gt;= 0.400) %&gt;%
                 select(playerID, yearID, nameLast, 
                        nameFirst, BA, ba400)

# Sub-data frame for the .400 hitters plus the outliers after 1950
# (averages above .380) - used to produce labels in the plot below
bignames &lt;- topHitters %&gt;%
              filter(ba400 | (yearID &gt; 1950 &amp; BA &gt; 0.380)) %&gt;%
              arrange(desc(BA))

# Variable to provide a vertical offset to certain
# labels in the ggplot below
bignames$yoffset &lt;-  c(0, 0, 0, 0, 0.002, 0, 0, 0,
                       0.001, -0.001, 0, -0.002, 0, 0,
                       0.002, 0, 0)

# Produce the plot

require("ggplot2")                               
ggplot(topHitters, aes(x = yearID, y = BA)) +
  geom_point(aes(colour = ba400), size = 2.5) +
  geom_hline(yintercept = 0.400, size = 1, colour = "gray70") +
  geom_text(data = bignames, aes(y = BA + yoffset,
                                 label = nameLast), 
                             size = 3, hjust = 1.2) +
  scale_colour_manual(values = c("FALSE" = "black", "TRUE" = "red")) +
  xlim(1899, 2015) +
  xlab("Year") +
  scale_y_continuous("Batting average",
                     limits = c(0.330, 0.430),
                     breaks = seq(0.34, 0.42, by = 0.02),
                     labels = c(".340", ".360", ".380", ".400", ".420")) +
  geom_smooth() +
  theme(legend.position = "none")

##########################################################
# after Chris Green,
# http://sabr.org/research/baseball-s-first-power-surge-home-runs-late-19th-century-major-leagues

# Total home runs by year
totalHR &lt;- Batting %&gt;%
             group_by(yearID) %&gt;%
             summarise(HomeRuns = sum(as.numeric(HR), na.rm=TRUE),
                       Games = sum(as.numeric(G), na.rm=TRUE))

# Plot HR by year, pre-1919 (dead ball era)
totalHR %&gt;% filter(yearID &lt;= 1918) %&gt;%
            ggplot(., aes(x = yearID, y = HomeRuns)) +
               geom_line() +
               geom_point() +
               labs(x = "Year", y = "Home runs hit")

# Take games into account
totalHR %&gt;% filter(yearID &lt;= 1918) %&gt;%
  ggplot(., aes(x = yearID, y = HomeRuns/Games)) +
     geom_line() +
     geom_point() +
     labs(x = "Year", y = "Home runs per game played")

# Widen perspective to all years from 1871
ggplot(totalHR, aes(x = yearID, y = HomeRuns)) +
  geom_point() +
  geom_path() +
  geom_smooth() +
  labs(x = "Year", y = "Home runs hit")

# Similar plot for HR per game played by year -
# shows several eras with spikes in HR hit
ggplot(totalHR, aes(x = yearID, y = HomeRuns/Games)) +
  geom_point() +
  geom_path() +
  geom_smooth(se = FALSE) +
  labs(x = "Year", y = "Home runs per game played")


</code></pre>

<hr>
<h2 id='battingLabels'>
Variable Labels
</h2><span id='topic+fieldingLabels'></span><span id='topic+pitchingLabels'></span><span id='topic+battingLabels'></span>

<h3>Description</h3>

<p>These data frames provide descriptive labels for the variables in the
<code><a href="#topic+Batting">Batting</a></code>, 
<code><a href="#topic+Pitching">Pitching</a></code> and
<code><a href="#topic+Fielding">Fielding</a></code> files (and related <code>*Post</code> files).
They are useful for plots and other output using <code><a href="#topic+Label">Label</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(battingLabels)

data(fieldingLabels)

data(pitchingLabels)
</code></pre>


<h3>Format</h3>

<p>Each is data frame with observations on the following 2 variables.
</p>

<dl>
<dt><code>variable</code></dt><dd><p>variable name</p>
</dd>
<dt><code>label</code></dt><dd><p>variable label</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+Label">Label</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(battingLabels)
str(battingLabels)

require("dplyr")

# find and plot maximum number of homers per year
batHR &lt;- Batting %&gt;%
           filter(!is.na(HR)) %&gt;%
           group_by(yearID) %&gt;%
           summarise(max=max(HR))
		
with(batHR, {
  plot(yearID, max, 
       xlab=Label("yearID"), ylab=paste("Maximum", Label("HR")), 
       cex=0.8)
  lines(lowess(yearID, max), col="blue", lwd=2)
  abline(lm(max ~ yearID), col="red", lwd=2)
	})

</code></pre>

<hr>
<h2 id='BattingPost'>
BattingPost table
</h2><span id='topic+BattingPost'></span>

<h3>Description</h3>

<p>Post season batting statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(BattingPost)</code></pre>


<h3>Format</h3>

<p>A data frame with 16374 observations on the following 22 variables.
</p>

<dl>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>round</code></dt><dd><p>Level of playoffs </p>
</dd>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>G</code></dt><dd><p>Games</p>
</dd>
<dt><code>AB</code></dt><dd><p>At Bats</p>
</dd>
<dt><code>R</code></dt><dd><p>Runs</p>
</dd>
<dt><code>H</code></dt><dd><p>Hits</p>
</dd>
<dt><code>X2B</code></dt><dd><p>Doubles</p>
</dd>
<dt><code>X3B</code></dt><dd><p>Triples</p>
</dd>
<dt><code>HR</code></dt><dd><p>Homeruns</p>
</dd>
<dt><code>RBI</code></dt><dd><p>Runs Batted In</p>
</dd>
<dt><code>SB</code></dt><dd><p>Stolen Bases</p>
</dd>
<dt><code>CS</code></dt><dd><p>Caught stealing</p>
</dd>
<dt><code>BB</code></dt><dd><p>Base on Balls</p>
</dd>
<dt><code>SO</code></dt><dd><p>Strikeouts</p>
</dd>
<dt><code>IBB</code></dt><dd><p>Intentional walks</p>
</dd>
<dt><code>HBP</code></dt><dd><p>Hit by pitch</p>
</dd>
<dt><code>SH</code></dt><dd><p>Sacrifices</p>
</dd>
<dt><code>SF</code></dt><dd><p>Sacrifice flies</p>
</dd>
<dt><code>GIDP</code></dt><dd><p>Grounded into double plays</p>
</dd>
</dl>



<h3>Details</h3>

<p>Variables <code>X2B</code> and <code>X3B</code> are named <code>2B</code> and <code>3B</code> in the original database
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Post-season batting data
# Requires care since intra-league playoffs have evolved since 1969
# Simplest case: World Series

require("dplyr")

# Create a sub-data frame for modern World Series play
ws &lt;- BattingPost %&gt;%
        filter(round == "WS" &amp; yearID &gt;= 1903) %&gt;%
        mutate(BA = 0 + (AB &gt; 0) * round(H/AB, 3),
               TB = H + X2B + 2 * X3B + 3 * HR,
               SA = 0 + (AB &gt; 0) * round(TB/AB, 3),
               PA = AB + BB + IBB + HBP + SH + SF,
               OB = H + BB + IBB + HBP,
               OBP = 0 + (AB &gt; 0) * round(OB/PA, 3) )

# Players with most appearances in the WS:
ws %&gt;% group_by(playerID) %&gt;%
       summarise(appearances = n()) %&gt;%
       arrange(desc(appearances)) %&gt;%
       head(., 10)

# Non-Yankees with most WS appearances
ws %&gt;% filter(teamID != "NYA") %&gt;%
       group_by(playerID) %&gt;%
       summarise(appearances = n()) %&gt;%
       arrange(desc(appearances)) %&gt;%
       head(., 10)


# Top ten single WS batting averages ( &gt;= 10 AB )
ws %&gt;% filter(AB &gt; 10) %&gt;%
       arrange(desc(BA)) %&gt;%
       head(., 10)

# Top ten slugging averages in a single WS 
ws %&gt;% filter(AB &gt; 10) %&gt;%
  arrange(desc(SA)) %&gt;%
  head(., 10)


# Hitting stats for the 1946 St. Louis Cardinals, ordered by BA
ws %&gt;% 
  filter(teamID == "SLN" &amp; yearID == 1946) %&gt;%
  arrange(desc(BA))

# Babe Ruth's WS profile
ws %&gt;% 
  filter(playerID == "ruthba01") %&gt;%
  arrange(yearID)


</code></pre>

<hr>
<h2 id='battingStats'>
Calculate additional batting statistics
</h2><span id='topic+battingStats'></span>

<h3>Description</h3>

<p>The <code><a href="#topic+Batting">Batting</a></code> does not contain batting statistics derived from those
present in the data.frame.  This function calculates
batting average (<code>BA</code>),
plate appearances (<code>PA</code>),
total bases (<code>TB</code>),
slugging percentage (<code>SlugPct</code>),
on-base percentage (<code>OBP</code>),
on-base percentage + slugging (<code>OPS</code>), and
batting average on balls in play (<code>BABIP</code>)
for each record in a Batting-like data.frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>battingStats(data = Lahman::Batting, 
             idvars = c("playerID", "yearID", "stint", "teamID", "lgID"), 
             cbind = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="battingStats_+3A_data">data</code></td>
<td>

<p>input data, typically <code><a href="#topic+Batting">Batting</a></code>
</p>
</td></tr>
<tr><td><code id="battingStats_+3A_idvars">idvars</code></td>
<td>

<p>ID variables to include in the output data.frame
</p>
</td></tr>
<tr><td><code id="battingStats_+3A_cbind">cbind</code></td>
<td>

<p>If <code>TRUE</code>, the calculated statistics are appended to the input data as additional columns
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Standard calculations, e.g., <code>BA &lt;- H/AB</code> are problematic because of the
presence of <code>NA</code>s and zeros.  This function tries to deal with those
problems.
</p>


<h3>Value</h3>

<p>A data.frame with all the observations in <code>data</code>.
If <code>cbind==FALSE</code>, only the <code>idvars</code> and the calculated variables are returned.





</p>


<h3>Author(s)</h3>

<p>Michael Friendly, Dennis Murphy
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Batting">Batting</a></code>, <code><a href="#topic+BattingPost">BattingPost</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>	bstats &lt;- battingStats()
	str(bstats)
	bstats &lt;- battingStats(cbind=FALSE)
	str(bstats)
</code></pre>

<hr>
<h2 id='CollegePlaying'>
CollegePlaying table
</h2><span id='topic+CollegePlaying'></span>

<h3>Description</h3>

<p>Information on schools players attended, by player
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(CollegePlaying)</code></pre>


<h3>Format</h3>

<p>A data frame with 17350 observations on the following 3 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>schoolID</code></dt><dd><p>school ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year player attended school</p>
</dd>
</dl>



<h3>Details</h3>

<p>This data set reflects a change in the Lahman schema for the 2015 version.
The old <code>SchoolsPlayers</code> table was replaced with
this new table called <code>CollegePlaying</code>.
</p>
<p>According to the documentation,
this change reflects advances in the compilation of this data, largely led by
Ted Turocy. The old table reported college attendance for major league
players by listing a start date and end date.  The new version has a 
separate record for each year that a player attended.  This allows
us to better account for players who attended multiple colleges or
skipped a season, as well as to identify teammates.
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(CollegePlaying)
head(CollegePlaying)

## Q: What are the top universities for producing MLB players?
SPcount &lt;- table(CollegePlaying$schoolID)
SPcount[SPcount&gt;50]

library("lattice")
dotplot(SPcount[SPcount&gt;50])
dotplot(sort(SPcount[SPcount&gt;50]))

## Q: How many schools are represented in this dataset?
length(table(CollegePlaying$schoolID))

# Histogram of the number of players from each school who played in MLB:
with(CollegePlaying, 
     hist(table(schoolID), xlab = "Number of players",
                           main = ""))
</code></pre>

<hr>
<h2 id='Fielding'>
Fielding table
</h2><span id='topic+Fielding'></span>

<h3>Description</h3>

<p>Fielding table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Fielding)</code></pre>


<h3>Format</h3>

<p>A data frame with 149365 observations on the following 18 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>stint</code></dt><dd><p>player's stint (order of appearances within a season)</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>POS</code></dt><dd><p>Position</p>
</dd>
<dt><code>G</code></dt><dd><p>Games </p>
</dd>
<dt><code>GS</code></dt><dd><p>Games Started</p>
</dd>
<dt><code>InnOuts</code></dt><dd><p>Time played in the field expressed as outs </p>
</dd>
<dt><code>PO</code></dt><dd><p>Putouts</p>
</dd>
<dt><code>A</code></dt><dd><p>Assists</p>
</dd>
<dt><code>E</code></dt><dd><p>Errors</p>
</dd>
<dt><code>DP</code></dt><dd><p>Double Plays</p>
</dd>
<dt><code>PB</code></dt><dd><p>Passed Balls (by catchers)</p>
</dd>
<dt><code>WP</code></dt><dd><p>Wild Pitches (by catchers)</p>
</dd>
<dt><code>SB</code></dt><dd><p>Opponent Stolen Bases (by catchers)</p>
</dd>
<dt><code>CS</code></dt><dd><p>Opponents Caught Stealing (by catchers)</p>
</dd>
<dt><code>ZR</code></dt><dd><p>Zone Rating</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Fielding)
# Basic fielding data

require("dplyr")


# Roberto Clemente's fielding profile
# pitching and catching related data removed
# subset(Fielding, playerID == "clemero01")[, 1:13]
Fielding %&gt;% 
   filter(playerID == "clemero01") %&gt;%
   select(1:13)
   
# Yadier Molina's fielding profile
# PB, WP, SP and CS apply to catchers
Fielding %&gt;% 
  subset(playerID == "molinya01") %&gt;%
  select(-WP, -ZR)

# Pedro Martinez's fielding profile
Fielding %&gt;% subset(playerID == "martipe02")

# Table of games played by Pete Rose at different positions
with(subset(Fielding, playerID == "rosepe01"), xtabs(G ~ POS))

# Career total G/PO/A/E/DP for Luis Aparicio
Fielding %&gt;%
    filter(playerID == "aparilu01") %&gt;% 
    select(G, PO, A, E, DP) %&gt;%
    summarise_each(funs(sum))


# Top ten 2B/SS in turning DPs
Fielding %&gt;%
    subset(POS %in% c("2B", "SS")) %&gt;%
    group_by(playerID) %&gt;%
    summarise(TDP = sum(DP, na.rm = TRUE)) %&gt;%
    arrange(desc(TDP)) %&gt;%
    head(., 10)

# League average fielding statistics, 1961-present
Fielding %&gt;% 
   filter(yearID &gt;= 1961 &amp; POS != "DH") %&gt;%
   select(yearID, lgID, POS, InnOuts, PO, A, E) %&gt;%
   group_by(yearID, lgID) %&gt;%
   summarise_at(vars(InnOuts, PO, A, E), funs(sum), na.rm = TRUE) %&gt;%
   mutate(fpct = round( (PO + A)/(PO + A + E), 3), 
          OPE = round(InnOuts/E, 3))


</code></pre>

<hr>
<h2 id='FieldingOF'>
FieldingOF table
</h2><span id='topic+FieldingOF'></span>

<h3>Description</h3>

<p>Outfield position data: information about positions played in the outfield
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(FieldingOF)</code></pre>


<h3>Format</h3>

<p>A data frame with 12028 observations on the following 6 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>stint</code></dt><dd><p>player's stint (order of appearances within a season)</p>
</dd>
<dt><code>Glf</code></dt><dd><p>Games played in left field</p>
</dd>
<dt><code>Gcf</code></dt><dd><p>Games played in center field</p>
</dd>
<dt><code>Grf</code></dt><dd><p>Games played in right field</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("dplyr")
require("tidyr")

## Data set only goes through 1955
## Can get a more complete record from the Fielding data frame
## or from the Appearances data (see below)

## Output directly from the FieldingOF data

## Barry Bonds (no records: post-1955 player)
FieldingOF %&gt;% 
   filter(playerID == "bondsba01") 

## Willie Mays (first few years)
FieldingOF %&gt;% 
  filter(playerID == "mayswi01") 

## Ty Cobb (complete)
FieldingOF %&gt;% 
  filter(playerID == "cobbty01") 

## One way to get OF game information from the Fielding data
## Note: OF games != sum(LF, CF, RF) because players can switch
## OF positions within a game. Players can also switch from
## other positions to outfield during a game. OF represents
## the number of games a player started in the outfield.
Fielding %&gt;%
   select(playerID, yearID, stint, POS, G) %&gt;%
   filter(POS %in% c("LF", "CF", "RF", "OF")) %&gt;%
   tidyr::spread(POS, G, fill = 0) %&gt;%
   filter(playerID == "trumbma01")

## Another way is through the Appearances data (no stint).
## Provides a somewhat nicer table than the above.

## Mark Trumbo (active player)
Appearances %&gt;%
   select(playerID, yearID, G_lf, G_cf, G_rf, G_of) %&gt;%
   filter(playerID == "trumbma01")

## A slightly better format, perhaps
Appearances %&gt;%
  select(playerID, yearID, G_lf, G_cf, G_rf, G_of) %&gt;%
  rename(LF = G_lf, CF = G_cf, RF = G_rf, OF = G_of) %&gt;%
  filter(playerID == "trumbma01")

## Willie Mays (1951-1973)
Appearances %&gt;%
  select(playerID, yearID, G_lf, G_cf, G_rf, G_of) %&gt;%
  filter(playerID == "mayswi01")

## Joe DiMaggio (1936-1951)
Appearances %&gt;%
  select(playerID, yearID, G_lf, G_cf, G_rf, G_of) %&gt;%
  filter(playerID == "dimagjo01")

</code></pre>

<hr>
<h2 id='FieldingOFsplit'>
FieldingOFsplit table
</h2><span id='topic+FieldingOFsplit'></span>

<h3>Description</h3>

<p>Outfield position data: information about positions played in the outfield
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(FieldingOFsplit)</code></pre>


<h3>Format</h3>

<p>A data frame with 35315 observations on the following 18 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>stint</code></dt><dd><p>player's stint (order of appearances within a season)</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>POS</code></dt><dd><p>Position</p>
</dd>
<dt><code>G</code></dt><dd><p>Games </p>
</dd>
<dt><code>GS</code></dt><dd><p>Games Started</p>
</dd>
<dt><code>InnOuts</code></dt><dd><p>Time played in the field expressed as outs </p>
</dd>
<dt><code>PO</code></dt><dd><p>Putouts</p>
</dd>
<dt><code>A</code></dt><dd><p>Assists</p>
</dd>
<dt><code>E</code></dt><dd><p>Errors</p>
</dd>
<dt><code>DP</code></dt><dd><p>Double Plays</p>
</dd>
<dt><code>PB</code></dt><dd><p>Passed Balls (by catchers)</p>
</dd>
<dt><code>WP</code></dt><dd><p>Wild Pitches (by catchers)</p>
</dd>
<dt><code>SB</code></dt><dd><p>Opponent Stolen Bases (by catchers)</p>
</dd>
<dt><code>CS</code></dt><dd><p>Opponents Caught Stealing (by catchers)</p>
</dd>
<dt><code>ZR</code></dt><dd><p>Zone Rating</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("dplyr")
require("tidyr")

## Data set starts in 1954
## Can get a more complete record from the Fielding data frame
## or from the Appearances data (see below)

## Output directly from the FieldingOFsplit data

## Joe DiMaggio (no records: pre-1954 player)
FieldingOFsplit %&gt;% 
   filter(playerID == "dimagjo01") 

## Willie Mays (all but his first few years)
FieldingOF %&gt;% 
  filter(playerID == "mayswi01") 

## Mike Trout (complete)
FieldingOF %&gt;% 
  filter(playerID == "troutmi01")
</code></pre>

<hr>
<h2 id='FieldingPost'>
FieldingPost data
</h2><span id='topic+FieldingPost'></span>

<h3>Description</h3>

<p>Post season fielding data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(FieldingPost)</code></pre>


<h3>Format</h3>

<p>A data frame with 15540 observations on the following 17 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>round</code></dt><dd><p>Level of playoffs </p>
</dd>
<dt><code>POS</code></dt><dd><p>Position</p>
</dd>
<dt><code>G</code></dt><dd><p>Games </p>
</dd>
<dt><code>GS</code></dt><dd><p>Games Started</p>
</dd>
<dt><code>InnOuts</code></dt><dd><p>Time played in the field expressed as outs </p>
</dd>
<dt><code>PO</code></dt><dd><p>Putouts</p>
</dd>
<dt><code>A</code></dt><dd><p>Assists</p>
</dd>
<dt><code>E</code></dt><dd><p>Errors</p>
</dd>
<dt><code>DP</code></dt><dd><p>Double Plays</p>
</dd>
<dt><code>TP</code></dt><dd><p>Triple Plays</p>
</dd>
<dt><code>PB</code></dt><dd><p>Passed Balls</p>
</dd>
<dt><code>SB</code></dt><dd><p>Stolen Bases allowed (by catcher)</p>
</dd>
<dt><code>CS</code></dt><dd><p>Caught Stealing (by catcher)</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("dplyr")

## World Series fielding record for Yogi Berra
FieldingPost %&gt;%
  filter(playerID == "berrayo01" &amp; round == "WS")

## Yogi's career efficiency in throwing out base stealers 
## in his WS appearances and CS as a percentage of his 
## overall assists
FieldingPost %&gt;%
  filter(playerID == "berrayo01" &amp; round == "WS" &amp; POS == "C") %&gt;%
  summarise(cs_pct = round(100 * sum(CS)/sum(SB + CS), 2),
            cs_assists = round(100 * sum(CS)/sum(A), 2))

## Innings per error for several selected shortstops in the WS
FieldingPost %&gt;%
  filter(playerID %in% c("belanma01", "jeterde01", "campabe01",
                         "conceda01", "bowala01"), round == "WS") %&gt;%
  group_by(playerID) %&gt;%
  summarise(G = sum(G),
            InnOuts = sum(InnOuts),
            Eper9 = round(27 * sum(E)/sum(InnOuts), 3))


## Top 10 center fielders in innings played in the WS
FieldingPost %&gt;%
  filter(POS == "CF" &amp; round == "WS") %&gt;%
  group_by(playerID) %&gt;%
  summarise(inn_total = sum(InnOuts)) %&gt;%
  arrange(desc(inn_total)) %&gt;%
  head(., 10)

## Most total chances by position
FieldingPost %&gt;%
  filter(round == "WS" &amp; !(POS %in% c("DH", "OF", "P"))) %&gt;%
  group_by(POS, playerID) %&gt;%
  summarise(TC = sum(PO + A + E)) %&gt;%
  arrange(desc(TC)) %&gt;%
  do(head(., 1))    # provides top player by position

</code></pre>

<hr>
<h2 id='HallOfFame'>
Hall of Fame Voting Data
</h2><span id='topic+HallOfFame'></span>

<h3>Description</h3>

<p>Hall of Fame table. This is composed of the voting results for all candidates nominated for the
Baseball Hall of Fame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(HallOfFame)</code></pre>


<h3>Format</h3>

<p>A data frame with 4323 observations on the following 9 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year of ballot</p>
</dd>
<dt><code>votedBy</code></dt><dd><p>Method by which player was voted upon.  See Details</p>
</dd>
<dt><code>ballots</code></dt><dd><p>Total ballots cast in that year</p>
</dd>
<dt><code>needed</code></dt><dd><p>Number of votes needed for selection in that year</p>
</dd>
<dt><code>votes</code></dt><dd><p>Total votes received</p>
</dd>
<dt><code>inducted</code></dt><dd><p>Whether player was inducted by that vote or not (Y or N)</p>
</dd>
<dt><code>category</code></dt><dd><p>Category of candidate; a factor with levels <code>Manager</code> <code>Pioneer/Executive</code> <code>Player</code> <code>Umpire</code></p>
</dd>
<dt><code>needed_note</code></dt><dd><p>Explanation of qualifiers for special elections</p>
</dd>
</dl>



<h3>Details</h3>

<p>This table links to the <code><a href="#topic+People">People</a></code> table via the <code>playerID</code>.
</p>
<p><code>votedBy</code>: Most Hall of Fame inductees have been elected by the 
Baseball Writers Association of America (<code>BBWAA</code>).  Rules for election are
described in <a href="https://en.wikipedia.org/wiki/National_Baseball_Hall_of_Fame_and_Museum#Selection_process">https://en.wikipedia.org/wiki/National_Baseball_Hall_of_Fame_and_Museum#Selection_process</a>.
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Some examples for  Hall of Fame induction data

require("dplyr")
require("ggplot2")

############################################################
## Some simple queries

# What are the different types of HOF voters?
table(HallOfFame$votedBy)

# What was the first year of Hall of Fame elections?
sort(unique(HallOfFame$yearID))[1]
# Who comprised the original class?
subset(HallOfFame, yearID == 1936 &amp; inducted == "Y")

# Result of a player's last year on the BBWAA ballot
# Restrict to players voted by BBWAA:
HOFplayers &lt;- subset(HallOfFame, 
                 votedBy == "BBWAA" &amp; category == "Player")


# Number of years as HOF candidate, last pct vote, etc.
# for a given player
playerOutcomes &lt;- HallOfFame %&gt;%
    filter(votedBy == "BBWAA" &amp; category == "Player") %&gt;%
    group_by(playerID) %&gt;%
    mutate(nyears = length(ballots)) %&gt;%
    arrange(yearID) %&gt;%
    do(tail(., 1)) %&gt;%
    mutate(lastPct = 100 * round(votes/ballots, 3)) %&gt;%
    select(playerID, nyears, inducted, lastPct, yearID) %&gt;%
    rename(lastYear = yearID)


############################################################
# How many voting years until election?
inducted &lt;- subset(playerOutcomes, inducted == "Y")
table(inducted$nyears)

# Bar chart of years to induction for inductees
barplot(table(inducted$nyears), 
        main="Number of voting years until election",
	    	ylab="Number of players", xlab="Years")
box()

# What is the form of this distribution?
require("vcd")
goodfit(inducted$nyears)
plot(goodfit(inducted$nyears), xlab="Number of years",
	main="Poissonness plot of number of years voting until election")
Ord_plot(table(inducted$nyears), xlab="Number of years")



# First ballot inductees sorted by vote percentage:
playerOutcomes %&gt;%
  filter(nyears == 1L &amp; inducted == "Y") %&gt;%
  arrange(desc(lastPct))

# Who took at least ten years on the ballot before induction?
playerOutcomes %&gt;%
  filter(nyears &gt;= 10L &amp; inducted == "Y")

############################################################
## Plots of voting percentages over time for the borderline
## HOF candidates, according to the BBWAA:

# Identify players on the BBWAA ballot for at least 10 years
# Returns a character vector of playerIDs
longTimers &lt;- as.character(unlist(subset(playerOutcomes,
                                         nyears &gt;= 10, select = "playerID")))

# Extract their information from the HallOfFame data
HOFlt &lt;- HallOfFame %&gt;% 
    filter(playerID %in% longTimers &amp; votedBy == "BBWAA") %&gt;%
    group_by(playerID) %&gt;%
    mutate(elected = ifelse(any(inducted == "Y"), 
                              "Elected", "Not elected"),
           pct = 100 * round(votes/ballots, 3))

# Plot the voting profiles:
ggplot(HOFlt, aes(x = yearID, y = pct,
                  group = playerID)) +
    ggtitle("Profiles of BBWAA voting percentage, long-time HOF candidates") +
    geom_line() +
    geom_hline(yintercept = 75, colour = 'red') +
    labs(x = "Year", y = "Percentage of votes") +
    facet_wrap(~ elected, ncol = 1)
    
## Eventual inductees tend to have increasing support over time.
## Fit simple linear regression models to each player's voting
## percentage profile and extract the slopes. Then compare the
## distributions of the slopes in each group.

# data frame for playerID and induction status among
# long term candidates
HOFstatus &lt;- HOFlt %&gt;% 
               group_by(playerID) %&gt;%
               select(playerID, elected, inducted) %&gt;%
               do(tail(., 1))

# data frame of regression slopes, which represent average
# increase in percentage support by BBWAA members over a
# player's candidacy.
HOFslope &lt;- HOFlt %&gt;%
              group_by(playerID) %&gt;%
              do(mod = lm(pct ~ yearID, data = .)) %&gt;%
              do(data.frame(slope = coef(.$mod)[2]))

## Boxplots of regression slopes by induction group
ggplot(data.frame(HOFstatus, HOFslope), 
       aes(x = elected, y = slope)) +
    geom_boxplot(width = 0.5) +
    geom_point(position = position_jitter(width = 0.2))

# Note 1: Only two players whose maximum voting percentage
# was over 60% were not eventually inducted
# into the HOF: Gil Hodges and Jack Morris. 
# Red Ruffing was elected in a 1967 runoff election while
# the others have been voted in by the Veterans Committee. 

# Note 2: Of the players whose slope was &gt;= 2.5 among 
# non-inductees, only Jack Morris has not (yet) been 
# subsequently inducted into the HOF; however, his last year of
# eligibility was 2014 so he could be inducted by a future
# Veterans Committee.


</code></pre>

<hr>
<h2 id='HomeGames'>
HomeGames table
</h2><span id='topic+HomeGames'></span>

<h3>Description</h3>

<p>Data mapping teams to the stadiums they played regular season games in as the home team.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(HomeGames)</code></pre>


<h3>Format</h3>

<p>A data frame with 3200 observations on the following 9 variables.
</p>

<dl>
<dt><code>year.key</code></dt><dd><p>Year</p>
</dd>
<dt><code>league.key</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>team.key</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>park.key</code></dt><dd><p>Unique identifier for each ballpark</p>
</dd>
<dt><code>span.first</code></dt><dd><p>First date the park began acting as home field for the team</p>
</dd>
<dt><code>span.last</code></dt><dd><p>Last date the park began acting as home field for the team</p>
</dd>
<dt><code>games</code></dt><dd><p>Total games in this time span</p>
</dd>
<dt><code>openings</code></dt><dd><p>Total opening in this time span</p>
</dd>
<dt><code>attendance</code></dt><dd><p>Total attendance in this time span</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(HomeGames)
library(dplyr)

# How many parks has every team played in as the home team for even a single game?
HomeGames %&gt;%
  count(team.key) %&gt;%
  arrange(team.key)

# What parks have the Toronto Blue Jays played in as the home team?
HomeGames %&gt;%
  filter(team.key == "TOR") %&gt;%
  arrange(span.last)
  
# What parks have the Boston Red Sox played in as the home team?
HomeGames %&gt;%
  filter(team.key == "BOS") %&gt;%
  arrange(span.last)
  
# What is the Toronto Blue Jays annual total home attendance by year?
HomeGames %&gt;%
  filter(team.key == "TOR") %&gt;%
  group_by(year.key) %&gt;%
  summarize(total.attendance = sum(attendance)) %&gt;%
  arrange(year.key)
</code></pre>

<hr>
<h2 id='Label'>
Extract the Label for a Variable
</h2><span id='topic+Label'></span>

<h3>Description</h3>

<p>Extracts the label for a variable from one or more of the <code>*Labels</code>
files. This is useful for plots and other displays because the variable
names are often cryptically short.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Label(var, labels = rbind(Lahman::battingLabels, 
                          Lahman::pitchingLabels, 
                          Lahman::fieldingLabels))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Label_+3A_var">var</code></td>
<td>

<p>name of a variable
</p>
</td></tr>
<tr><td><code id="Label_+3A_labels">labels</code></td>
<td>

<p>label table(s) to search, a 2-column dataframe containing 
variable names and labels.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the variable label, or <code>var</code> if no label is found




</p>


<h3>Author(s)</h3>

<p>Michael Friendly
</p>


<h3>See Also</h3>

<p><code><a href="#topic+battingLabels">battingLabels</a></code>,
<code><a href="#topic+pitchingLabels">pitchingLabels</a></code>,
<code><a href="#topic+fieldingLabels">fieldingLabels</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>require("dplyr")
# find and plot maximum number of homers per year
batHR &lt;- Batting %&gt;%
           filter(!is.na(HR)) %&gt;%
           group_by(yearID) %&gt;%
           summarise(max = max(HR))
		
with(batHR, {
  plot(yearID, max, 
       xlab=Label("yearID"), ylab=paste("Maximum", Label("HR")), 
       cex=0.8)
  lines(lowess(yearID, max), col="blue", lwd=2)
  abline(lm(max ~ yearID), col="red", lwd=2)
	})
</code></pre>

<hr>
<h2 id='Lahman-package'>
Sean Lahman's Baseball Database
</h2><span id='topic+Lahman-package'></span><span id='topic+Lahman'></span>

<h3>Description</h3>

<p>This database contains pitching, hitting, and fielding statistics for
Major League Baseball from 1871 through 2021.  It includes data from
the two current leagues (American and National), the four other &quot;major&quot; 
leagues (American Association, Union Association, Players League, and
Federal League), and the National Association of 1871-1875. 
</p>
<p>This database was created by Sean Lahman, who pioneered the effort to
make baseball statistics freely available to the general public. What
started as a one man effort in 1994 has grown tremendously, and now a
team of researchers have collected their efforts to make this the
largest and most accurate source for baseball statistics available
anywhere. 
</p>
<p>This database, in the form of an R package offers a variety of interesting
challenges and opportunities for data processing and visualization in R.
</p>
<p>In the current version, the examples make extensive use of the <code>dplyr</code>
package for data manipulation (tabulation, queries, summaries, merging, etc.),
reflecting the original relational database design
and <code>ggplot2</code> for graphics.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> Lahman</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 11.0-0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2023-04-16</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL version 2 or newer</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyData: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The main form of this database is a relational database in Microsoft Access format.
The design follows these general principles:  Each player is assigned a
unique code (<code>playerID</code>).  All of the information in different tables relating to that player
is tagged with his <code>playerID</code>.  The <code>playerID</code>s are linked to names and 
birthdates in the <code><a href="#topic+People">People</a></code> table.  Similar links exist among other tables
via analogous <code>*ID</code> variables.
</p>
<p>The database is composed of the following main tables:
</p>

<dl>
<dt><code><a href="#topic+People">People</a></code></dt><dd><p>Player names, dates of birth, death and other biographical info</p>
</dd>
<dt><code><a href="#topic+Batting">Batting</a></code></dt><dd><p>batting statistics</p>
</dd>
<dt><code><a href="#topic+Pitching">Pitching</a></code></dt><dd><p>pitching statistics</p>
</dd>
<dt><code><a href="#topic+Fielding">Fielding</a></code></dt><dd><p>fielding statistics</p>
</dd>

</dl>

<p>A collection of other tables is also provided:
</p>
<p>Teams:
</p>

<table>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+Teams">Teams</a></code> </td><td style="text-align: left;"> yearly stats and standings</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+TeamsHalf">TeamsHalf</a></code> </td><td style="text-align: left;"> split season data for teams</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+TeamsFranchises">TeamsFranchises</a></code> </td><td style="text-align: left;"> franchise information</td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>

<p>Post-season play:
</p>

<table>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+BattingPost">BattingPost</a></code> </td><td style="text-align: left;"> post-season batting statistics</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+PitchingPost">PitchingPost</a></code> </td><td style="text-align: left;"> post-season pitching statistics</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+FieldingPost">FieldingPost</a></code></td><td style="text-align: left;"> post-season fielding data</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+SeriesPost">SeriesPost</a></code> </td><td style="text-align: left;"> post-season series information</td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>

<p>Awards:
</p>

<table>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+AwardsManagers">AwardsManagers</a></code> </td><td style="text-align: left;"> awards won by managers</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+AwardsPlayers">AwardsPlayers</a></code> </td><td style="text-align: left;"> awards won by players</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+AwardsShareManagers">AwardsShareManagers</a></code> </td><td style="text-align: left;"> award voting for manager awards</td>
</tr>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+AwardsSharePlayers">AwardsSharePlayers</a></code> </td><td style="text-align: left;"> award voting for player awards</td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>

<p>Hall of Fame:  links to People via <code>hofID</code>
</p>

<table>
<tr>
 <td style="text-align: right;">
  <code><a href="#topic+HallOfFame">HallOfFame</a></code> </td><td style="text-align: left;"> Hall of Fame voting data</td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>

<p>Other tables:
</p>

<p><code><a href="#topic+AllstarFull">AllstarFull</a></code> - All-Star games appearances;
<code><a href="#topic+Managers">Managers</a></code> - managerial statistics;
<code><a href="#topic+FieldingOF">FieldingOF</a></code> - outfield position data;
<code><a href="#topic+ManagersHalf">ManagersHalf</a></code> - split season data for managers;
<code><a href="#topic+Salaries">Salaries</a></code> - player salary data;
<code><a href="#topic+Appearances">Appearances</a></code> - data on player appearances;
<code><a href="#topic+Schools">Schools</a></code> - Information on schools players attended;
<code><a href="#topic+CollegePlaying">CollegePlaying</a></code> - Information on schools players attended, by player and year;

</p>
<p>Variable label tables are provided for some of the tables:
</p>
<p><code><a href="#topic+battingLabels">battingLabels</a></code>,
<code><a href="#topic+pitchingLabels">pitchingLabels</a></code>,
<code><a href="#topic+fieldingLabels">fieldingLabels</a></code>
</p>


<h3>Author(s)</h3>

<p>Michael Friendly, Dennis Murphy, Chris Dalzell, Martin Monkman
</p>
<p>Maintainer: Chris Dalzell &lt;cdalzell@gmail.com&gt;
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, Main page, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>

<hr>
<h2 id='LahmanData'>
Lahman Datasets
</h2><span id='topic+LahmanData'></span>

<h3>Description</h3>

<p>This dataset gives a concise description of the data files in the Lahman package.
It may be useful for computing on the various files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(LahmanData)</code></pre>


<h3>Format</h3>

<p>A data frame with 24 observations on the following 5 variables.
</p>

<dl>
<dt><code>file</code></dt><dd><p>name of dataset</p>
</dd>
<dt><code>class</code></dt><dd><p>class of dataset</p>
</dd>
<dt><code>nobs</code></dt><dd><p>number of observations</p>
</dd>
<dt><code>nvar</code></dt><dd><p>number of variables</p>
</dd>
<dt><code>title</code></dt><dd><p>dataset title</p>
</dd>
</dl>



<h3>Details</h3>

<p>This dataset is generated using <code>vcdExtra::datasets(package="Lahman")</code>
with some post-processing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(LahmanData)

# find ID variables in the datasets
IDvars &lt;- lapply(LahmanData[,"file"], function(x) grep('.*ID$', colnames(get(x)), value=TRUE))
names(IDvars) &lt;- LahmanData[,"file"]
str(IDvars)
# vector of unique ID variables
unique(unlist(IDvars))

# which datasets have playerID?
names(which(sapply(IDvars, function(x) "playerID" %in% x)))

################################################
# Visualize relations among datasets via an MDS
################################################
# jaccard distance between two sets; assure positivity
jaccard &lt;- function(A, B) {
	max(1 - length(intersect(A,B)) / length(union(A,B)), .00001)
}	

distmat &lt;- function(vars, FUN=jaccard) {
	nv &lt;- length(vars)
	d &lt;- matrix(0, nv, nv, dimnames=list(names(vars), names(vars)))
	
	for(i in 1:nv) {
		for (j in 1:nv) {
			if (i != j) d[i,j] &lt;- FUN(vars[[i]], vars[[j]])
		}
	}
	
	d[is.nan(d)] = 0
	
	d
}

# do an MDS on distances
distID &lt;- distmat(IDvars)
config &lt;- cmdscale(distID)

pos=rep(1:4, length=nrow(config))
plot(config[,1], config[,2], xlab = "", ylab = "", asp = 1, axes=FALSE,
	main="MDS of ID variable distances of Lahman tables")
abline(h=0, v=0, col="gray80")
text(config[,1], config[,2], rownames(config), cex = 0.75, pos=pos, xpd=NA)

</code></pre>

<hr>
<h2 id='Managers'>
Managers table
</h2><span id='topic+Managers'></span>

<h3>Description</h3>

<p>Managers table: information about individual team managers, teams they managed and some basic statistics
for those teams in each year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Managers)</code></pre>


<h3>Format</h3>

<p>A data frame with 3718 observations on the following 10 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Manager (player) ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>inseason</code></dt><dd><p>Managerial order.  Zero if the individual managed the team
the entire year.  Otherwise denotes where the manager appeared
in the managerial order (1 for first manager, 2 for second, etc.)</p>
</dd>
<dt><code>G</code></dt><dd><p>Games managed</p>
</dd>
<dt><code>W</code></dt><dd><p>Wins</p>
</dd>
<dt><code>L</code></dt><dd><p>Losses</p>
</dd>
<dt><code>rank</code></dt><dd><p>Team's final position in standings that year</p>
</dd>
<dt><code>plyrMgr</code></dt><dd><p>Player Manager (denoted by 'Y'); a factor with levels <code>N</code> <code>Y</code></p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>####################################
# Basic career summaries by manager
####################################

library("dplyr")
mgrSumm &lt;- Managers %&gt;%
            group_by(playerID) %&gt;%
            summarise(nyear = length(unique(yearID)),
                      yearBegin = min(yearID),
                      yearEnd = max(yearID),
                      nTeams = length(unique(teamID)),
                      nfirst = sum(rank == 1L),
                      W = sum(W),
                      L = sum(L),
                      WinPct = round(W/(W + L), 3))

MgrInfo &lt;- People %&gt;%
            filter(!is.na(playerID)) %&gt;%
            select(playerID, nameLast, nameFirst)

# Merge names into the table
mgrTotals &lt;- right_join(MgrInfo, mgrSumm, by = "playerID")

# add total games managed
mgrTotals &lt;- mgrTotals %&gt;%
              mutate(games = W + L)

##########################
# Some basic queries
##########################

# Top 20 managers in terms of years of service:
mgrTotals %&gt;%
   arrange(desc(nyear)) %&gt;%
   head(., 20)

# Top 20 winningest managers (500 games minimum)
mgrTotals %&gt;%
   filter((W + L) &gt;= 500) %&gt;%
   arrange(desc(WinPct)) %&gt;%
   head(., 20)

# Most of these are 19th century managers.
# How about the modern era?
mgrTotals %&gt;%
   filter(yearBegin &gt;= 1901 &amp; (W + L) &gt;= 500) %&gt;%
   arrange(desc(WinPct)) %&gt;%
   head(., 20)

# Top 10 managers in terms of percentage of titles 
# (league or divisional) - should bias toward managers
#  post-1970 since more first place finishes are available
mgrTotals %&gt;%
   filter(yearBegin &gt;= 1901 &amp; (W + L) &gt;= 500) %&gt;%
   arrange(desc(round(nfirst/nyear, 3))) %&gt;%
   head(., 10)

# How about pre-1969?
mgrTotals %&gt;%
  filter(yearBegin &gt;= 1901 &amp; yearEnd &lt;= 1969 &amp;
          (W + L) &gt;= 500) %&gt;%
  arrange(desc(round(nfirst/nyear, 3))) %&gt;%
  head(., 10)

## Tony LaRussa's managerial record by team
Managers %&gt;%
  filter(playerID == "larusto01") %&gt;%
  group_by(teamID) %&gt;%
  summarise(nyear = length(unique(yearID)),
            yearBegin = min(yearID),
            yearEnd = max(yearID),
            games = sum(G),
            nfirst = sum(rank == 1L),
            W = sum(W),
            L = sum(L),
            WinPct = round(W/(W + L), 3))

##############################################
# Density plot of the number of games managed:
##############################################

library("ggplot2")

ggplot(mgrTotals, aes(x = games)) + 
    geom_density(fill = "red", alpha = 0.3) +
    labs(x = "Number of games managed")

# Who managed more than 4000 games?
mgrTotals %&gt;% 
  filter(W + L &gt;= 4000) %&gt;%
  arrange(desc(W + L))
# Connie Mack's advantage: he owned the Philadelphia A's :)

# Table of Tony LaRussa's team finishes (rank order):
Managers %&gt;%
   filter(playerID == "larusto01") %&gt;%
   count(rank)



##############################################
# Scatterplot of winning percentage vs. number 
# of games managed (min 100)
##############################################

ggplot(subset(mgrTotals, yearBegin &gt;= 1900 &amp; games &gt;= 100),
       aes(x = games, y = WinPct)) + 
  geom_point() + geom_smooth() +
  labs(x = "Number of games managed")

############################################
# Division titles
############################################

# Plot of number of first place finishes by managers who
# started in the divisional era (&gt;= 1969) with 
# at least 8 years of experience

mgrTotals %&gt;% 
  filter(yearBegin &gt;= 1969 &amp; nyear &gt;= 8) %&gt;%
  ggplot(., aes(x = nyear, y = nfirst)) +
     geom_point(position = position_jitter(width = 0.2)) +
     labs(x = "Number of years", 
          y = "Number of divisional titles") +
     geom_smooth()


# Change response to proportion of titles relative
# to years managed
mgrTotals %&gt;% 
  filter(yearBegin &gt;= 1969 &amp; nyear &gt;= 8) %&gt;%
  ggplot(., aes(x = nyear, y = round(nfirst/nyear, 3))) +
     geom_point(position = position_jitter(width = 0.2)) +
     labs(x = "Number of years", 
          y = "Proportion of divisional titles") +
     geom_smooth()

</code></pre>

<hr>
<h2 id='ManagersHalf'>
ManagersHalf table
</h2><span id='topic+ManagersHalf'></span>

<h3>Description</h3>

<p>Split season data for managers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ManagersHalf)</code></pre>


<h3>Format</h3>

<p>A data frame with 93 observations on the following 10 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Manager (player) ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>inseason</code></dt><dd><p>Managerial order.  One if the individual managed the team
the entire year.  Otherwise denotes where the manager appeared
in the managerial order (1 for first manager, 2 for second, etc.).
A factor with levels <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code></p>
</dd>
<dt><code>half</code></dt><dd><p>First or second half of season</p>
</dd>
<dt><code>G</code></dt><dd><p>Games managed</p>
</dd>
<dt><code>W</code></dt><dd><p>Wins</p>
</dd>
<dt><code>L</code></dt><dd><p>Losses</p>
</dd>
<dt><code>rank</code></dt><dd><p>Team's position in standings for the half</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("dplyr")
library("reshape2")

# Only have data for 1892 and 1981

# League rank by half for 1981 teams with the same
# manager in both halves who were hired in-season
ManagersHalf %&gt;% 
  filter(yearID &gt;= 1901) %&gt;%
  group_by(teamID, yearID) %&gt;%
  filter(all(playerID == playerID[1])) %&gt;%  # same manager in both halves
  mutate(winPct = round(W/G, 3)) %&gt;%
  reshape2::dcast(playerID + yearID + teamID + lgID ~ half,
                     value.var = "rank") %&gt;%
  rename(rank1 = `1`, rank2 = `2`) 
</code></pre>

<hr>
<h2 id='Parks'>
Parks table
</h2><span id='topic+Parks'></span>

<h3>Description</h3>

<p>Name and location data for baseball stadiums. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Parks)</code></pre>


<h3>Format</h3>

<p>A data frame with 255 observations on the following 6 variables.
</p>

<dl>
<dt><code>park.key</code></dt><dd><p>unique identifier for each ballpark</p>
</dd>
<dt><code>park.name</code></dt><dd><p>the name of the ballpark</p>
</dd>
<dt><code>park.alias</code></dt><dd><p>a semicolon delimited list of other names for the ballpark if they exist</p>
</dd>
<dt><code>city</code></dt><dd><p>city where the ballpark is located</p>
</dd>
<dt><code>state</code></dt><dd><p>state where the ballpark is located</p>
</dd>
<dt><code>country</code></dt><dd><p>country where the ballpark is located</p>
</dd>
</dl>



<h3>Details</h3>

<p>This dataset apparently includes all ballparks that were ever used in baseball. There is no
indication of the years they were used, nor the teams that played there.
</p>
<p>The ballparks can be associated with teams through the <code>park</code> variable in the 
<code><a href="#topic+Teams">Teams</a></code> table.
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Teams">Teams</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Parks)
library(dplyr)
# how many parks in each country?
table(Parks$country)

# how many parks in each US state?
Parks %&gt;% 
  filter(country=="US") %&gt;% 
  count(state, sort=TRUE)

# ballparks in NYC
Parks %&gt;% 
  filter(state=="NY") %&gt;% 
  filter(city %in% c("New York", "Brooklyn", "Queens"))

# ballparks in Canada
Parks %&gt;% 
  filter(country=="CA") %&gt;% 
  count(state, sort=TRUE)

# what are the Canadian parks?
Parks %&gt;% 
  dplyr::filter(country=="CA")
</code></pre>

<hr>
<h2 id='People'>
People table
</h2><span id='topic+People'></span>

<h3>Description</h3>

<p>People table - Player names, DOB, and biographical info.  This file is to be used to get details
about players listed in the <code><a href="#topic+Batting">Batting</a></code>, <code><a href="#topic+Pitching">Pitching</a></code>, and other files
where players are identified only by <code>playerID</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(People)</code></pre>


<h3>Format</h3>

<p>A data frame with 20370 observations on the following 26 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>A unique code assigned to each player.  The <code>playerID</code> links
the data in this file with records on players in the other files.</p>
</dd>
<dt><code>birthYear</code></dt><dd><p>Year player was born</p>
</dd>
<dt><code>birthMonth</code></dt><dd><p>Month player was born</p>
</dd>
<dt><code>birthDay</code></dt><dd><p>Day player was born</p>
</dd>
<dt><code>birthCountry</code></dt><dd><p>Country where player was born</p>
</dd>
<dt><code>birthState</code></dt><dd><p>State where player was born</p>
</dd>
<dt><code>birthCity</code></dt><dd><p>City where player was born</p>
</dd>
<dt><code>deathYear</code></dt><dd><p>Year player died</p>
</dd>
<dt><code>deathMonth</code></dt><dd><p>Month player died</p>
</dd>
<dt><code>deathDay</code></dt><dd><p>Day player died</p>
</dd>
<dt><code>deathCountry</code></dt><dd><p>Country where player died</p>
</dd>
<dt><code>deathState</code></dt><dd><p>State where player died</p>
</dd>
<dt><code>deathCity</code></dt><dd><p>City where player died</p>
</dd>
<dt><code>nameFirst</code></dt><dd><p>Player's first name</p>
</dd>
<dt><code>nameLast</code></dt><dd><p>Player's last name</p>
</dd>


<dt><code>nameGiven</code></dt><dd><p>Player's given name (typically first and middle)</p>
</dd>

<dt><code>weight</code></dt><dd><p>Player's weight in pounds</p>
</dd>
<dt><code>height</code></dt><dd><p>Player's height in inches</p>
</dd>
<dt><code>bats</code></dt><dd><p>a factor: Player's batting hand (left (L), right (R), or both (B))         </p>
</dd>
<dt><code>throws</code></dt><dd><p>a factor: Player's throwing hand (left(L) or right(R))</p>
</dd>
<dt><code>debut</code></dt><dd><p>Date that player made first major league appearance</p>
</dd>
<dt><code>finalGame</code></dt><dd><p>Date that player made first major league appearance (blank if still active)</p>
</dd>
<dt><code>retroID</code></dt><dd><p>ID used by retrosheet, <a href="https://www.retrosheet.org/">https://www.retrosheet.org/</a></p>
</dd>
<dt><code>bbrefID</code></dt><dd><p>ID used by Baseball Reference website, <a href="https://www.baseball-reference.com/">https://www.baseball-reference.com/</a></p>
</dd>
<dt><code>birthDate</code></dt><dd><p>Player's birthdate, in <code>as.Date</code> format</p>
</dd>
<dt><code>deathDate</code></dt><dd><p>Player's deathdate, in <code>as.Date</code> format</p>
</dd>
</dl>



<h3>Details</h3>

<p><code>debut</code>, <code>finalGame</code> were converted from character strings with <code>as.Date</code>.
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(People); data(Batting)

## add player's name to Batting data
People$name &lt;- paste(People$nameFirst, People$nameLast, sep=" ")
batting &lt;- merge(Batting, 
                 People[,c("playerID","name")], 
                 by="playerID", all.x=TRUE)

## batting and throwing
# right-handed batters are much less ambidexterous in throwing than left-handed batters
# (should only include batters)

BT &lt;- with(People, table(bats, throws))
require(vcd)
structable(BT)
mosaic(BT, shade=TRUE)

## Who is Shoeless Joe Jackson?
subset(People, nameLast=="Jackson" &amp; nameFirst=="Joe")
subset(People, nameLast=="Jackson" &amp; nameFirst=="Shoeless Joe")

joeID &lt;-c(subset(People, nameLast=="Jackson" &amp; nameFirst=="Shoeless Joe")["playerID"])

subset(Batting, playerID==joeID)
subset(Fielding, playerID==joeID)
</code></pre>

<hr>
<h2 id='Pitching'>
Pitching table
</h2><span id='topic+Pitching'></span>

<h3>Description</h3>

<p>Pitching table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Pitching)</code></pre>


<h3>Format</h3>

<p>A data frame with 50402 observations on the following 30 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>stint</code></dt><dd><p>player's stint (order of appearances within a season)</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>W</code></dt><dd><p>Wins</p>
</dd>
<dt><code>L</code></dt><dd><p>Losses</p>
</dd>
<dt><code>G</code></dt><dd><p>Games</p>
</dd>
<dt><code>GS</code></dt><dd><p>Games Started</p>
</dd>
<dt><code>CG</code></dt><dd><p>Complete Games </p>
</dd>
<dt><code>SHO</code></dt><dd><p>Shutouts</p>
</dd>
<dt><code>SV</code></dt><dd><p>Saves</p>
</dd>
<dt><code>IPouts</code></dt><dd><p>Outs Pitched (innings pitched x 3)</p>
</dd>
<dt><code>H</code></dt><dd><p>Hits</p>
</dd>
<dt><code>ER</code></dt><dd><p>Earned Runs</p>
</dd>
<dt><code>HR</code></dt><dd><p>Homeruns</p>
</dd>
<dt><code>BB</code></dt><dd><p>Walks</p>
</dd>
<dt><code>SO</code></dt><dd><p>Strikeouts</p>
</dd>
<dt><code>BAOpp</code></dt><dd><p>Opponent's Batting Average</p>
</dd>
<dt><code>ERA</code></dt><dd><p>Earned Run Average</p>
</dd>
<dt><code>IBB</code></dt><dd><p>Intentional Walks</p>
</dd>
<dt><code>WP</code></dt><dd><p>Wild Pitches</p>
</dd>
<dt><code>HBP</code></dt><dd><p>Batters Hit By Pitch</p>
</dd>
<dt><code>BK</code></dt><dd><p>Balks</p>
</dd>
<dt><code>BFP</code></dt><dd><p>Batters faced by Pitcher</p>
</dd>
<dt><code>GF</code></dt><dd><p>Games Finished</p>
</dd>
<dt><code>R</code></dt><dd><p>Runs Allowed</p>
</dd>
<dt><code>SH</code></dt><dd><p>Sacrifices by opposing batters</p>
</dd>
<dt><code>SF</code></dt><dd><p>Sacrifice flies by opposing batters</p>
</dd>
<dt><code>GIDP</code></dt><dd><p>Grounded into double plays by opposing batter</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Pitching data

require("dplyr")

###################################
# cleanup, and add some other stats
###################################

# Restrict to AL and NL data, 1901+
# All data re SH, SF and GIDP are missing, so remove
# Intentional walks (IBB) not recorded until 1955
pitching &lt;- Pitching %&gt;%
               filter(yearID &gt;= 1901 &amp; lgID %in% c("AL", "NL")) %&gt;%
               select(-(28:30)) %&gt;%  # remove SH, SF, GIDP
               mutate(BAOpp = round(H/(H + IPouts), 3),  # loose def'n
                      WHIP = round((H + BB) * 3/IPouts, 2),
                      KperBB = round(ifelse(yearID &gt;= 1955, 
                                            SO/(BB - IBB), SO/BB), 2))
                                            

#####################
# some simple queries
#####################

# Team pitching statistics, Toronto Blue Jays, 1993
tor93 &lt;- pitching %&gt;%
           filter(yearID == 1993 &amp; teamID == "TOR") %&gt;%
           arrange(ERA)

# Career pitching statistics, Greg Maddux
subset(pitching, playerID == "maddugr01")

# Best ERAs for starting pitchers post WWII
pitching %&gt;% 
    filter(yearID &gt;= 1946 &amp; IPouts &gt;= 600) %&gt;%
    group_by(lgID) %&gt;%
    arrange(ERA) %&gt;%
    do(head(., 5))


# Best K/BB ratios post-1955 among starters (excludes intentional walks)
pitching %&gt;% 
    filter(yearID &gt;= 1955 &amp; IPouts &gt;= 600) %&gt;%
    mutate(KperBB = SO/(BB - IBB)) %&gt;%
    arrange(desc(KperBB)) %&gt;%
    head(., 10)
    
# Best K/BB ratios among relievers post-1950 (min. 20 saves)
pitching %&gt;% 
    filter(yearID &gt;= 1950 &amp; SV &gt;= 20) %&gt;%
    arrange(desc(KperBB)) %&gt;%
    head(., 10)

###############################################
# Winningest pitchers in each league each year:
###############################################

# Add name &amp; throws information:
peopleInfo &lt;- People %&gt;%
                select(playerID, nameLast, nameFirst, throws)
                
# Merge peopleInfo into the pitching data
pitching1 &lt;- right_join(peopleInfo, pitching, by = "playerID")

# Extract the pitcher with the maximum number of wins 
# each year, by league
winp &lt;- pitching1 %&gt;%
         group_by(yearID, lgID) %&gt;%
         filter(W == max(W)) %&gt;% 
         select(nameLast, nameFirst, teamID, W, throws)

# A simple ANCOVA model of wins vs. year, league and hand (L/R)
anova(lm(formula = W ~ yearID + I(yearID^2) + lgID + throws, data = winp))

# Nature of managing pitching staffs has altered importance of
# wins over time
## Not run: 
require("ggplot2") 

# compare loess smooth with quadratic fit
ggplot(winp, aes(x = yearID, y = W)) +
    geom_point(aes(colour = throws, shape=lgID), size = 2) +
    geom_smooth(method="loess", size=1.5, color="blue") +
    geom_smooth(method = "lm", se=FALSE, color="black", 
                 formula = y ~ poly(x,2)) +
    ylab("League maximum Wins") + xlab("Year") +
    ggtitle("Maximum pitcher wins by year")
    
## To reinforce this, plot the mean IPouts by year and league,
## which gives some idea of pitcher usage. Restrict pitcher
## pool to those who pitched at least 100 innings in a year.

pitching %&gt;% filter(IPouts &gt;= 300) %&gt;%  # &gt;= 100 IP

ggplot(., aes(x = yearID, y = IPouts, color = lgID)) +
  geom_smooth(method="loess") +
  labs(x = "Year", y = "IPouts")

## Another indicator: total number of complete games pitched
## (Mirrors the trend from the preceding plot.)
pitching %&gt;% 
   group_by(yearID, lgID) %&gt;%
   summarise(totalCG = sum(CG, na.rm = TRUE)) %&gt;%
   ggplot(., aes(x = yearID, y = totalCG, color = lgID)) +
      geom_point() +
      geom_path() +
      labs(x = "Year", y = "Number of complete games")

## End(Not run)

</code></pre>

<hr>
<h2 id='PitchingPost'>
PitchingPost table
</h2><span id='topic+PitchingPost'></span>

<h3>Description</h3>

<p>Post season pitching statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(PitchingPost)</code></pre>


<h3>Format</h3>

<p>A data frame with 6538 observations on the following 30 variables.
</p>

<dl>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>round</code></dt><dd><p>Level of playoffs </p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>W</code></dt><dd><p>Wins</p>
</dd>
<dt><code>L</code></dt><dd><p>Losses</p>
</dd>
<dt><code>G</code></dt><dd><p>Games</p>
</dd>
<dt><code>GS</code></dt><dd><p>Games Started</p>
</dd>
<dt><code>CG</code></dt><dd><p>Complete Games</p>
</dd>
<dt><code>SHO</code></dt><dd><p>Shutouts </p>
</dd>
<dt><code>SV</code></dt><dd><p>Saves</p>
</dd>
<dt><code>IPouts</code></dt><dd><p>Outs Pitched (innings pitched x 3)</p>
</dd>
<dt><code>H</code></dt><dd><p>Hits</p>
</dd>
<dt><code>ER</code></dt><dd><p>Earned Runs</p>
</dd>
<dt><code>HR</code></dt><dd><p>Homeruns</p>
</dd>
<dt><code>BB</code></dt><dd><p>Walks</p>
</dd>
<dt><code>SO</code></dt><dd><p>Strikeouts</p>
</dd>
<dt><code>BAOpp</code></dt><dd><p>Opponents' batting average</p>
</dd>
<dt><code>ERA</code></dt><dd><p>Earned Run Average</p>
</dd>
<dt><code>IBB</code></dt><dd><p>Intentional Walks</p>
</dd>
<dt><code>WP</code></dt><dd><p>Wild Pitches</p>
</dd>
<dt><code>HBP</code></dt><dd><p>Batters Hit By Pitch</p>
</dd>
<dt><code>BK</code></dt><dd><p>Balks</p>
</dd>
<dt><code>BFP</code></dt><dd><p>Batters faced by Pitcher</p>
</dd>
<dt><code>GF</code></dt><dd><p>Games Finished</p>
</dd>
<dt><code>R</code></dt><dd><p>Runs Allowed</p>
</dd>
<dt><code>SH</code></dt><dd><p>Sacrifice Hits allowed</p>
</dd>
<dt><code>SF</code></dt><dd><p>Sacrifice Flies allowed</p>
</dd>
<dt><code>GIDP</code></dt><dd><p>Grounded into Double Plays</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("dplyr")
library(ggplot2)

# Restrict data to World Series in modern era
ws &lt;- PitchingPost %&gt;%
         filter(yearID &gt;= 1903 &amp; round == "WS")
# Pitchers with ERA 0.00 in WS play (&gt; 10 IP)
ws %&gt;%
  filter(IPouts &gt; 30 &amp; ERA == 0.00) %&gt;%
  arrange(desc(IPouts)) %&gt;%
  select(playerID, yearID, teamID, lgID, IPouts, W, L, G, 
         CG, SHO, H, R, SO, BFP) 

# Pitchers with the most IP in a series 
# 1903 Series went eight games - for details, see
# https://en.wikipedia.org/wiki/1903_World_Series
ws %&gt;%
  arrange(desc(IPouts)) %&gt;%
  select(playerID, yearID, teamID, lgID, IPouts, W, L, G, 
         CG, SHO, H, SO, BFP, ERA) %&gt;%
  head(., 10)

# Pitchers with highest strikeout rate in WS
# (minimum 20 IP)
ws %&gt;%
  filter(IPouts &gt;= 60) %&gt;%
  mutate(K_rate = 27 * SO/IPouts) %&gt;%
  arrange(desc(K_rate)) %&gt;%
  select(playerID, yearID, teamID, lgID, IPouts, 
         H, SO, K_rate) %&gt;%
  head(., 10)
  
# Pitchers with the most IP in WS history
ws %&gt;%
  group_by(playerID) %&gt;%
  summarise_at(vars(IPouts, H, ER, CG, BB, SO, W, L), 
               sum, na.rm = TRUE) %&gt;%
  mutate(ERA = round(27 * ER/IPouts, 2),
         Kper9 = round(27 * SO/IPouts, 3),
         WHIP = round(3 * (H + BB)/IPouts, 3)) %&gt;%
  arrange(desc(IPouts)) %&gt;%
  select(-H, -ER) %&gt;%
  head(., 10)

# Plot of K/9 by year
ws %&gt;%
  group_by(yearID) %&gt;%
  summarise(Kper9 = 27 * sum(SO)/sum(IPouts)) %&gt;%
  ggplot(., aes(x = yearID, y = Kper9)) +
    geom_point() +
    geom_smooth() +
    labs(x = "Year", y = "K per 9 innings")

</code></pre>

<hr>
<h2 id='playerInfo'>
Lookup Information for Players and Teams
</h2><span id='topic+playerInfo'></span><span id='topic+teamInfo'></span>

<h3>Description</h3>

<p>These functions use <code>grep</code> to lookup information about players
(from the <code><a href="#topic+People">People</a></code> file)
and teams (from the <code><a href="#topic+Teams">Teams</a></code> file).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
playerInfo(playerID, nameFirst, nameLast, data = Lahman::People, extra = NULL, ...)

teamInfo(teamID, name, data = Lahman::Teams, extra = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="playerInfo_+3A_playerid">playerID</code></td>
<td>

<p>pattern for <code>playerID</code>
</p>
</td></tr>
<tr><td><code id="playerInfo_+3A_namefirst">nameFirst</code></td>
<td>

<p>pattern for first name
</p>
</td></tr>
<tr><td><code id="playerInfo_+3A_namelast">nameLast</code></td>
<td>

<p>pattern for last name
</p>
</td></tr>
<tr><td><code id="playerInfo_+3A_data">data</code></td>
<td>

<p>The name of the dataset to search
</p>
</td></tr>
<tr><td><code id="playerInfo_+3A_extra">extra</code></td>
<td>

<p>A character vector of other fields to include in the result
</p>
</td></tr>
<tr><td><code id="playerInfo_+3A_...">...</code></td>
<td>

<p>other arguments passed to <code><a href="base.html#topic+grep">grep</a></code>
</p>
</td></tr>
<tr><td><code id="playerInfo_+3A_teamid">teamID</code></td>
<td>

<p>pattern for <code>teamID</code> 
</p>
</td></tr>
<tr><td><code id="playerInfo_+3A_name">name</code></td>
<td>

<p>pattern for team name
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame for unique matching rows from <code>data</code>





</p>


<h3>Author(s)</h3>

<p>Michael Friendly
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+grep">grep</a></code>, ~~~
</p>


<h3>Examples</h3>

<pre><code class='language-R'>	playerInfo("aaron")

  teamInfo("CH", extra="park")
</code></pre>

<hr>
<h2 id='Salaries'>
Salaries table
</h2><span id='topic+Salaries'></span>

<h3>Description</h3>

<p>Player salary data.  
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Salaries)</code></pre>


<h3>Format</h3>

<p>A data frame with 26428 observations on the following 5 variables.
</p>

<dl>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor</p>
</dd>
<dt><code>playerID</code></dt><dd><p>Player ID code</p>
</dd>
<dt><code>salary</code></dt><dd><p>Salary</p>
</dd>
</dl>



<h3>Details</h3>

<p>There is no real coverage of player's salaries until 1985.
</p>


<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># what years are included?
summary(Salaries$yearID)

# how many players included each year?
table(Salaries$yearID)

# Team salary data

require("dplyr")
require("ggplot2")

# Total team salaries by league, team and year
teamSalaries &lt;- Salaries %&gt;%
                  group_by(lgID, teamID, yearID) %&gt;%
                  summarise(Salary = sum(as.numeric(salary))) %&gt;%
                  group_by(yearID, lgID) %&gt;%
                  arrange(desc(Salary))

#######################################
# Highest paid players each year:
maxSal &lt;- Salaries %&gt;%
            group_by(yearID) %&gt;%
            filter(salary == max(salary)) 
maxPlayers &lt;- bind_rows(lapply(maxSal$playerID, playerInfo)) %&gt;%
                  select(-playerID)
maxSal &lt;- bind_cols(maxPlayers, maxSal)

# Plot maximum MLB salary by year (1985-present)           
ggplot(maxSal, aes(x = yearID, y = salary/1e6)) +
   geom_point() +
   geom_smooth(se = FALSE) +
   labs(x = "Year", y = "Salary (millions)")

# Plot salary distributions by year for all players
ggplot(Salaries, aes(x = factor(yearID), y = salary/1e5)) +
   geom_boxplot(fill = "lightblue", outlier.size = 1) +
   labs(x = "Year", y = "Salary ($100,000)") +
   coord_flip()

# Plot median MLB salary per year
Salaries %&gt;%
   group_by(yearID) %&gt;%
   summarise(medsal = median(salary)) %&gt;%
   ggplot(., aes(x = yearID, y = medsal/1e6)) +
   geom_point() +
   geom_smooth() +
   labs(x = "Year", y = "Median MLB salary (millions)")

# add salary to Batting data
batting &lt;- Batting %&gt;%
              filter(yearID &gt;= 1985) %&gt;%
              left_join(select(Salaries, playerID, yearID, teamID, salary), 
                         by=c("playerID", "yearID", "teamID"))
str(batting)

#######################################
# Average salaries by teams, over years
#######################################

# Some franchises are multiply named, so add a new variable
# 'franchise' to the Salaries data as a lookup table

franchise &lt;- c(`ANA` = "LAA", `ARI` = "ARI", `ATL` = "ATL", 
               `BAL` = "BAL", `BOS` = "BOS", `CAL` = "LAA",
               `CHA` = "CHA", `CHN` = "CHN", `CIN` = "CIN", 
               `CLE` = "CLE", `COL` = "COL", `DET` = "DET", 
               `FLO` = "MIA", `HOU` = "HOU", `KCA` = "KCA", 
               `LAA` = "LAA", `LAN` = "LAN", `MIA` = "MIA", 
               `MIL` = "MIL", `MIN` = "MIN", `ML4` = "MIL", 
               `MON` = "WAS", `NYA` = "NYA", `NYM` = "NYN", 
               `NYN` = "NYN", `OAK` = "OAK", `PHI` = "PHI", 
               `PIT` = "PIT", `SDN` = "SDN", `SEA` = "SEA",
               `SFG` = "SFN", `SFN` = "SFN", `SLN` = "SLN", 
               `TBA` = "TBA", `TEX` = "TEX", `TOR` = "TOR",
               `WAS` = "WAS")

Salaries$franchise &lt;- unname(franchise[Salaries$teamID])

# Average salaries annual salaries by team, in millions USD
avg_team_salaries &lt;- Salaries %&gt;%
    group_by(yearID, franchise, lgID) %&gt;%
    summarise(salary= mean(salary)/1e6) %&gt;%
    filter(!(franchise == "CLE" &amp; lgID == "NL"))

# Spaghetti plot of team salary over time by team
# Yankees have largest average team salary since 2003
ggplot(avg_team_salaries, 
       aes(x = yearID, y = salary, group = factor(franchise))) +
       geom_path() +
       labs(x = "Year", y = "Average team salary (millions USD)")
</code></pre>

<hr>
<h2 id='Schools'>
Schools table
</h2><span id='topic+Schools'></span>

<h3>Description</h3>

<p>Information on schools players attended, by school
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Schools)</code></pre>


<h3>Format</h3>

<p>A data frame with 1207 observations on the following 5 variables.
</p>

<dl>
<dt><code>schoolID</code></dt><dd><p>school ID code</p>
</dd>
<dt><code>name_full</code></dt><dd><p>school name</p>
</dd>
<dt><code>city</code></dt><dd><p>city where school is located</p>
</dd>
<dt><code>state</code></dt><dd><p>state where school's city is located</p>
</dd>
<dt><code>country</code></dt><dd><p>country where school is located</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2023) Lahman's Baseball Database, 1871-2022, 2022 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require("dplyr")

# How many different schools are listed in each state?
table(Schools$state)
 
# How many different schools are listed in each country?
table(Schools$country)

# Top 20 schools 
schoolInfo &lt;- Schools %&gt;% select(-country)

schoolCount &lt;- CollegePlaying %&gt;%
                 group_by(schoolID) %&gt;%
                 summarise(players = length(schoolID)) %&gt;%
                 left_join(schoolInfo, by = "schoolID") %&gt;%
                 arrange(desc(players)) 
head(schoolCount, 20)

# sum counts by state
schoolStates &lt;- schoolCount %&gt;%
                  group_by(state) %&gt;%
                  summarise(players = sum(players),
                            schools = length(state))
str(schoolStates)
summary(schoolStates)
</code></pre>

<hr>
<h2 id='SeriesPost'>
SeriesPost table
</h2><span id='topic+SeriesPost'></span>

<h3>Description</h3>

<p>Post season series information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(SeriesPost)</code></pre>


<h3>Format</h3>

<p>A data frame with 378 observations on the following 9 variables.
</p>

<dl>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>round</code></dt><dd><p>Level of playoffs </p>
</dd>
<dt><code>teamIDwinner</code></dt><dd><p>Team ID of the team that won the series; a factor</p>
</dd>
<dt><code>lgIDwinner</code></dt><dd><p>League ID of the team that won the series; a factor with levels <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>teamIDloser</code></dt><dd><p>Team ID of the team that lost the series; a factor</p>
</dd>
<dt><code>lgIDloser</code></dt><dd><p>League ID of the team that lost the series; a factor with levels <code>AL</code> <code>NL</code> </p>
</dd>
<dt><code>wins</code></dt><dd><p>Wins by team that won the series</p>
</dd>
<dt><code>losses</code></dt><dd><p>Losses by team that won the series</p>
</dd>
<dt><code>ties</code></dt><dd><p>Tie games</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2021) Lahman's Baseball Database, 1871-2020, 2020 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(SeriesPost)

# How many times has each team won the World Series?

# Notes: 
# - the SeriesPost table includes an identifier for the 
# team (teamID), but not the franchise (e.g. the Brooklyn Dodgers
# [BRO] and Los Angeles Dodgers [LAN] are counted separately)
#
# - the World Series was first played in 1903, but the 
# Lahman data tables have the final round of the earlier 
# playoffs labelled "WS", so it is necessary to
# filter the SeriesPost table to exclude years prior to 1903. 

# using the dplyr data manipulation package
library("dplyr")
library("tidyr")
library("ggplot2")

## WS winners, arranged in descending order of titles won
ws_winner_table &lt;- SeriesPost %&gt;%
  filter(yearID &gt; "1902", round == "WS") %&gt;%
  group_by(teamIDwinner) %&gt;%
  summarise(wincount = n()) %&gt;%
  arrange(desc(wincount))
ws_winner_table

## Expanded form of World Series team data in modern era

ws &lt;- SeriesPost %&gt;%
        filter(yearID &gt;= 1903 &amp; round == "WS") %&gt;%
        select(-ties, -round) %&gt;%
        mutate(lgIDloser = droplevels(lgIDloser),
               lgIDwinner = droplevels(lgIDwinner))

# Bar chart of length of series (# games played)
# 1903, 1919 and 1921 had eight games
ggplot(ws, aes(x = wins + losses)) +
  geom_bar(fill = "dodgerblue") +
  labs(x = "Number of games", y = "Frequency")

# Last year the Cubs appeared in the WS
ws %&gt;% 
  filter(teamIDwinner == "CHN" | teamIDloser == "CHN") %&gt;% 
  summarise(max(yearID))

# Dot chart of number of WS appearances by teamID
ws %&gt;% 
  gather(wl, team, teamIDwinner, teamIDloser) %&gt;%
  count(team) %&gt;%
  arrange(desc(n)) %&gt;%
  ggplot(., aes(x = reorder(team, n), y = n)) +
    theme_bw() +
    geom_point(size = 3, color = "dodgerblue") +
    geom_segment(aes(xend = reorder(team, n), yend = 0), 
                 linetype = "dotted", color = "dodgerblue", 
                 size = 1) +
    labs(x = NULL, y = "Number of WS appearances") +
    scale_y_continuous(expand = c(0, 0), limits = c(0, 42)) +
    coord_flip() +
    theme(axis.text.y = element_text(size = rel(0.8)),
          axis.ticks.y = element_blank())

# Initial year of each round of championship series in modern era
SeriesPost %&gt;% 
    filter(yearID &gt;= 1903) %&gt;%   # modern WS started in 1903
    group_by(round) %&gt;%
    summarise(first_year = min(yearID)) %&gt;%
    arrange(first_year)

# Ditto, but with more information about each series played
SeriesPost %&gt;% 
  filter(yearID &gt;= 1903) %&gt;%
  group_by(round) %&gt;%
  arrange(yearID) %&gt;%
  do(head(., 1)) %&gt;%
  select(-lgIDwinner, -lgIDloser) %&gt;%
  arrange(yearID, round)
</code></pre>

<hr>
<h2 id='Teams'>
Teams table
</h2><span id='topic+Teams'></span>

<h3>Description</h3>

<p>Yearly statistics and standings for teams
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Teams)</code></pre>


<h3>Format</h3>

<p>A data frame with 3015 observations on the following 48 variables.
</p>

<dl>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AA</code> <code>AL</code> <code>FL</code> <code>NL</code> <code>PL</code> <code>UA</code></p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>franchID</code></dt><dd><p>Franchise (links to <code><a href="#topic+TeamsFranchises">TeamsFranchises</a></code> table)</p>
</dd>
<dt><code>divID</code></dt><dd><p>Team's division; a factor with levels  <code>C</code> <code>E</code> <code>W</code></p>
</dd>
<dt><code>Rank</code></dt><dd><p>Position in final standings</p>
</dd>
<dt><code>G</code></dt><dd><p>Games played</p>
</dd>
<dt><code>Ghome</code></dt><dd><p>Games played at home</p>
</dd>
<dt><code>W</code></dt><dd><p>Wins</p>
</dd>
<dt><code>L</code></dt><dd><p>Losses</p>
</dd>
<dt><code>DivWin</code></dt><dd><p>Division Winner (Y or N)</p>
</dd>
<dt><code>WCWin</code></dt><dd><p>Wild Card Winner (Y or N)</p>
</dd>
<dt><code>LgWin</code></dt><dd><p>League Champion(Y or N)</p>
</dd>
<dt><code>WSWin</code></dt><dd><p>World Series Winner (Y or N)</p>
</dd>
<dt><code>R</code></dt><dd><p>Runs scored</p>
</dd>
<dt><code>AB</code></dt><dd><p>At bats</p>
</dd>
<dt><code>H</code></dt><dd><p>Hits by batters</p>
</dd>
<dt><code>X2B</code></dt><dd><p>Doubles</p>
</dd>
<dt><code>X3B</code></dt><dd><p>Triples</p>
</dd>
<dt><code>HR</code></dt><dd><p>Homeruns by batters</p>
</dd>
<dt><code>BB</code></dt><dd><p>Walks by batters</p>
</dd>
<dt><code>SO</code></dt><dd><p>Strikeouts by batters</p>
</dd>
<dt><code>SB</code></dt><dd><p>Stolen bases</p>
</dd>
<dt><code>CS</code></dt><dd><p>Caught stealing</p>
</dd>
<dt><code>HBP</code></dt><dd><p>Batters hit by pitch</p>
</dd>
<dt><code>SF</code></dt><dd><p>Sacrifice flies</p>
</dd>
<dt><code>RA</code></dt><dd><p>Opponents runs scored</p>
</dd>
<dt><code>ER</code></dt><dd><p>Earned runs allowed</p>
</dd>
<dt><code>ERA</code></dt><dd><p>Earned run average</p>
</dd>
<dt><code>CG</code></dt><dd><p>Complete games</p>
</dd>
<dt><code>SHO</code></dt><dd><p>Shutouts</p>
</dd>
<dt><code>SV</code></dt><dd><p>Saves</p>
</dd>
<dt><code>IPouts</code></dt><dd><p>Outs Pitched (innings pitched x 3)</p>
</dd>
<dt><code>HA</code></dt><dd><p>Hits allowed</p>
</dd>
<dt><code>HRA</code></dt><dd><p>Homeruns allowed</p>
</dd>
<dt><code>BBA</code></dt><dd><p>Walks allowed</p>
</dd>
<dt><code>SOA</code></dt><dd><p>Strikeouts by pitchers</p>
</dd>
<dt><code>E</code></dt><dd><p>Errors</p>
</dd>
<dt><code>DP</code></dt><dd><p>Double Plays</p>
</dd>
<dt><code>FP</code></dt><dd><p>Fielding  percentage</p>
</dd>
<dt><code>name</code></dt><dd><p>Team's full name</p>
</dd>
<dt><code>park</code></dt><dd><p>Name of team's home ballpark</p>
</dd>
<dt><code>attendance</code></dt><dd><p>Home attendance total</p>
</dd>
<dt><code>BPF</code></dt><dd><p>Three-year park factor for batters</p>
</dd>
<dt><code>PPF</code></dt><dd><p>Three-year park factor for pitchers</p>
</dd>
<dt><code>teamIDBR</code></dt><dd><p>Team ID used by Baseball Reference website</p>
</dd>
<dt><code>teamIDlahman45</code></dt><dd><p>Team ID used in Lahman database version 4.5</p>
</dd>
<dt><code>teamIDretro</code></dt><dd><p>Team ID used by Retrosheet</p>
</dd>
</dl>



<h3>Details</h3>

<p>Variables <code>X2B</code> and <code>X3B</code> are named <code>2B</code> and <code>3B</code> in the original database
</p>


<h3>Source</h3>

<p>Lahman, S. (2021) Lahman's Baseball Database, 1871-2020, 2020 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Teams)
library("dplyr")
library("tidyr")

# Add some selected measures to the Teams data frame
# Restrict to AL and NL in modern era
teams &lt;- Teams %&gt;% 
  filter(yearID &gt;= 1901 &amp; lgID %in% c("AL", "NL")) %&gt;%
  group_by(yearID, teamID) %&gt;%
  mutate(TB = H + X2B + 2 * X3B + 3 * HR,
         WinPct = W/G,
         rpg = R/G,
         hrpg = HR/G,
         tbpg = TB/G,
         kpg = SO/G,
         k2bb = SO/BB,
         whip = 3 * (H + BB)/IPouts)

# Function to create a ggplot by year for selected team stats
# Both arguments are character strings
yrPlot &lt;- function(yvar, label)
{
    require("ggplot2")
    ggplot(teams, aes_string(x = "yearID", y = yvar)) +
       geom_point(size = 0.5) +
       geom_smooth(method="loess") +
       labs(x = "Year", y = paste(label, "per game"))
}

## Run scoring in the modern era by year
yrPlot("rpg", "Runs")

## Home runs per game by year
yrPlot("hrpg", "Home runs")

## Total bases per game by year
yrPlot("tbpg", "Total bases")

## Strikeouts per game by year
yrPlot("kpg", "Strikeouts")

## Plot win percentage vs. run differential (R - RA)
ggplot(teams, aes(x = R - RA, y = WinPct)) +
   geom_point(size = 0.5) +
   geom_smooth(method="loess") + 
   geom_hline(yintercept = 0.5, color = "orange") +
   geom_vline(xintercept = 0, color = "orange") +
   labs(x = "Run differential", y = "Win percentage")

## Plot attendance vs. win percentage by league, post-1980
teams %&gt;%  filter(yearID &gt;= 1980) %&gt;%
ggplot(., aes(x = WinPct, y = attendance/1000)) +
   geom_point(size = 0.5) +
   geom_smooth(method="loess", se = FALSE) +
   facet_wrap(~ lgID) +
   labs(x = "Win percentage", y = "Attendance (1000s)")

## Teams with over 4 million attendance in a season
teams %&gt;% 
  filter(attendance &gt;= 4e6) %&gt;%
  select(yearID, lgID, teamID, Rank, attendance) %&gt;%
  arrange(desc(attendance))

## Average season HRs by park, post-1980
teams %&gt;% 
   filter(yearID &gt;= 1980) %&gt;%
   group_by(park) %&gt;%
     summarise(meanHRpg = mean((HR + HRA)/Ghome), nyears = n()) %&gt;%
     filter(nyears &gt;= 10) %&gt;%
     arrange(desc(meanHRpg)) %&gt;%
     head(., 10)

## Home runs per game at Fenway Park and Wrigley Field,
## the two oldest MLB parks, by year. Fenway opened in 1912.
teams %&gt;% 
  filter(yearID &gt;= 1912 &amp; teamID %in% c("BOS", "CHN")) %&gt;%
  mutate(hrpg = (HR + HRA)/Ghome) %&gt;%
  ggplot(., aes(x = yearID, y = hrpg, color = teamID)) +
    geom_line(size = 1) +
    geom_point() +
    labs(x = "Year", y = "Home runs per game", color = "Team") +
    scale_color_manual(values = c("red", "blue"))

## Ditto for total strikeouts per game
teams %&gt;% 
  filter(yearID &gt;= 1912 &amp; teamID %in% c("BOS", "CHN")) %&gt;%
  mutate(kpg = (SO + SOA)/Ghome) %&gt;%
  ggplot(., aes(x = yearID, y = kpg, color = teamID)) +
  geom_line(size = 1) +
  geom_point() +
  labs(x = "Year", y = "Strikeouts per game", color = "Team") +
  scale_color_manual(values = c("red", "blue"))  


## Not run: 
if(require(googleVis)) {
motion1 &lt;- gvisMotionChart(as.data.frame(teams), 
             idvar="teamID", timevar="yearID", chartid="gvisTeams",
	           options=list(width=700, height=600))
plot(motion1)
#print(motion1, file="gvisTeams.html")

# Merge with avg salary for years where salary is available

teamsal &lt;- Salaries %&gt;%
                group_by(yearID, teamID) %&gt;%
                summarise(Salary = sum(salary, na.rm = TRUE)) %&gt;%
                select(yearID, teamID, Salary)

teamsSal &lt;- teams %&gt;%
                filter(yearID &gt;= 1985) %&gt;%
                left_join(teamsal, by = c("yearID", "teamID")) %&gt;%
                select(yearID, teamID, attendance, Salary, WinPct) %&gt;%
                as.data.frame(.)

motion2 &lt;- gvisMotionChart(teamsSal, idvar="teamID", timevar="yearID",
  xvar="attendance", yvar="salary", sizevar="WinPct",
	chartid="gvisTeamsSal", options=list(width=700, height=600))
plot(motion2)
#print(motion2, file="gvisTeamsSal.html")

}

## End(Not run)
</code></pre>

<hr>
<h2 id='TeamsFranchises'>
TeamFranchises table
</h2><span id='topic+TeamsFranchises'></span>

<h3>Description</h3>

<p>Information about team franchises
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(TeamsFranchises)</code></pre>


<h3>Format</h3>

<p>A data frame with 120 observations on the following 4 variables.
</p>

<dl>
<dt><code>franchID</code></dt><dd><p>Franchise ID; a factor</p>
</dd>
<dt><code>franchName</code></dt><dd><p>Franchise name</p>
</dd>
<dt><code>active</code></dt><dd><p>Whether team is currently active (Y or N)</p>
</dd>
<dt><code>NAassoc</code></dt><dd><p>ID of National Association team franchise played as</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2021) Lahman's Baseball Database, 1871-2020, 2020 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(TeamsFranchises)

# Which of the active Major League Baseball teams had a National Association predecessor?

# Notes: 
# - the National Association was founded in 1871, and continued through the
# 1875 season. In 1876, six clubs from the National Association and two other
# independent clubs formed the National League, which exists to this day.
# - the `active` field has "NA" for the National Association franchises
# - where appropriate, the `NAassoc` field has the `franchID` of the successor National League team

# using the dplyr data manipulation package
library("dplyr")

NatAssoc_active_table &lt;- TeamsFranchises %&gt;%
  filter(active == "Y") %&gt;%
  filter(!is.na(NAassoc))
NatAssoc_active_table

# Merge current team IDs with franchise IDs
currentTeams &lt;- Teams %&gt;% 
                  filter(yearID == 2014) %&gt;%
                  select(teamID, franchID, lgID, park)

# Merge TeamsFranchises with currentTeams
TeamsFranchises %&gt;%
    filter(active == "Y") %&gt;%
    select(-active, -NAassoc) %&gt;%
    left_join(currentTeams, by = "franchID")
</code></pre>

<hr>
<h2 id='TeamsHalf'>
TeamsHalf table
</h2><span id='topic+TeamsHalf'></span>

<h3>Description</h3>

<p>Split season data for teams
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(TeamsHalf)</code></pre>


<h3>Format</h3>

<p>A data frame with 52 observations on the following 10 variables.
</p>

<dl>
<dt><code>yearID</code></dt><dd><p>Year</p>
</dd>
<dt><code>lgID</code></dt><dd><p>League; a factor with levels <code>AL</code> <code>NL</code></p>
</dd>
<dt><code>teamID</code></dt><dd><p>Team; a factor</p>
</dd>
<dt><code>Half</code></dt><dd><p>First or second half of season</p>
</dd>
<dt><code>divID</code></dt><dd><p>Division</p>
</dd>
<dt><code>DivWin</code></dt><dd><p>Won Division (Y or N)</p>
</dd>
<dt><code>Rank</code></dt><dd><p>Team's position in standings for the half</p>
</dd>
<dt><code>G</code></dt><dd><p>Games played</p>
</dd>
<dt><code>W</code></dt><dd><p>Wins</p>
</dd>
<dt><code>L</code></dt><dd><p>Losses</p>
</dd>
</dl>



<h3>Source</h3>

<p>Lahman, S. (2021) Lahman's Baseball Database, 1871-2020, 2020 version, <a href="https://www.seanlahman.com/baseball-archive/statistics/">https://www.seanlahman.com/baseball-archive/statistics/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 1981 season team data split into half seasons
data(TeamsHalf)
library("dplyr")

# List standings with winning percentages by
# season half, league and division
TeamsHalf %&gt;%
   group_by(Half, lgID, divID) %&gt;%
   mutate(WinPct = round(W/G, 3)) %&gt;%
   arrange(Half, lgID, divID, Rank) %&gt;%
   select(Half, lgID, divID, Rank, teamID, WinPct)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
