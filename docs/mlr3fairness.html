<!DOCTYPE html><html><head><title>Help for package mlr3fairness</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mlr3fairness}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mlr3fairness-package'><p>mlr3fairness: Fairness Auditing and Debiasing for 'mlr3'</p></a></li>
<li><a href='#adult'><p>Adult Dataset</p></a></li>
<li><a href='#compare_metrics'><p>Compare different metrics</p></a></li>
<li><a href='#compas'><p>COMPAS Dataset</p></a></li>
<li><a href='#compute_metrics'><p>Compute metrics for non-mlr3 predictions.</p></a></li>
<li><a href='#fairness_accuracy_tradeoff'><p>Plot Fairness Accuracy Trade-offs</p></a></li>
<li><a href='#fairness_prediction_density'><p>Probability Density Plot</p></a></li>
<li><a href='#fairness_tensor'><p>Compute the Fairness Tensor given a Prediction and a Task</p></a></li>
<li><a href='#groupdiff_tau'><p>Groupwise Operations</p></a></li>
<li><a href='#groupwise_metrics'><p>Evaluate a metric on each protected subgroup in a task.</p></a></li>
<li><a href='#MeasureFairness'><p>Base Measure for Fairness</p></a></li>
<li><a href='#MeasureFairnessComposite'><p>Composite Fairness Measure</p></a></li>
<li><a href='#MeasureFairnessConstraint'><p>Fairness Constraint Measure</p></a></li>
<li><a href='#MeasureSubgroup'><p>Evaluate a metric on a subgroup</p></a></li>
<li><a href='#mlr_learners_classif.fairfgrrm'><p>Classification Fair Generalized Ridge Regression Learner</p></a></li>
<li><a href='#mlr_learners_classif.fairzlrm'><p>Classification Fair Logistic Regression With Covariance Constraints Learner</p></a></li>
<li><a href='#mlr_learners_fairness'><p>Fair Learners in mlr3</p></a></li>
<li><a href='#mlr_learners_regr.fairfrrm'><p>Regression Fair Ridge Regression Learner</p></a></li>
<li><a href='#mlr_learners_regr.fairnclm'><p>Regression Non-convex Fair Regression Learner</p></a></li>
<li><a href='#mlr_learners_regr.fairzlm'><p>Regression Fair Regression With Covariance Constraints Learner</p></a></li>
<li><a href='#mlr_measures_fairness'><p>Fairness Measures in mlr3</p></a></li>
<li><a href='#mlr_measures_positive_probability'><p>Positive Probability Measure</p></a></li>
<li><a href='#mlr_pipeops_equalized_odds'><p>Equalized Odds Debiasing</p></a></li>
<li><a href='#mlr_pipeops_explicit_pta'><p>PipeOpExplicitPta</p></a></li>
<li><a href='#mlr_pipeops_reweighing'><p>Reweighing to balance disparate impact metric</p></a></li>
<li><a href='#report_datasheet'><p>Create a Datasheet for Documenting a Dataset</p></a></li>
<li><a href='#report_fairness'><p>Create a Fairness Report</p></a></li>
<li><a href='#report_modelcard'><p>Create a Modelcard</p></a></li>
<li><a href='#task_summary'><p>Task summary for fairness report</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Fairness Auditing and Debiasing for 'mlr3'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.2</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Integrates fairness auditing and bias mitigation methods for the 'mlr3' ecosystem.
    This includes fairness metrics, reporting tools, visualizations and bias mitigation techniques such as
    "Reweighing" described in 'Kamiran, Calders' (2012) &lt;<a href="https://doi.org/10.1007%2Fs10115-011-0463-8">doi:10.1007/s10115-011-0463-8</a>&gt;  and
    "Equalized Odds" described in 'Hardt et al.' (2016) <a href="https://papers.nips.cc/paper/2016/file/9d2682367c3935defcb1f9e247a97c0d-Paper.pdf">https://papers.nips.cc/paper/2016/file/9d2682367c3935defcb1f9e247a97c0d-Paper.pdf</a>.
    Integration with 'mlr3' allows for auditing of ML models as well as convenient joint tuning of
    machine learning algorithms and debiasing methods.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://mlr3fairness.mlr-org.com">https://mlr3fairness.mlr-org.com</a>,
<a href="https://github.com/mlr-org/mlr3fairness">https://github.com/mlr-org/mlr3fairness</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mlr-org/mlr3fairness/issues">https://github.com/mlr-org/mlr3fairness/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, R6 (&ge; 2.4.1), data.table (&ge; 1.13.6), paradox,
mlr3 (&ge; 0.13.0), mlr3measures, mlr3misc, mlr3pipelines,
mlr3learners, rlang, ggplot2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.1.0), patchwork, rpart, ranger, mlr3viz,
linprog, rmarkdown, knitr, posterdown, kableExtra, fairml, iml</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>false</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-04 20:45:55 UTC; flo</td>
</tr>
<tr>
<td>Author:</td>
<td>Florian Pfisterer <a href="https://orcid.org/0000-0001-8867-762X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre, aut],
  Wei Siyi [aut],
  Michel Lang <a href="https://orcid.org/0000-0001-9754-0393"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Florian Pfisterer &lt;pfistererf@googlemail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-04 23:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mlr3fairness-package'>mlr3fairness: Fairness Auditing and Debiasing for 'mlr3'</h2><span id='topic+mlr3fairness'></span><span id='topic+mlr3fairness-package'></span>

<h3>Description</h3>

<p>Integrates fairness auditing and bias mitigation methods for the 'mlr3' ecosystem. This includes fairness metrics, reporting tools, visualizations and bias mitigation techniques such as &quot;Reweighing&quot; described in 'Kamiran, Calders' (2012) <a href="https://doi.org/10.1007/s10115-011-0463-8">doi:10.1007/s10115-011-0463-8</a> and &quot;Equalized Odds&quot; described in 'Hardt et al.' (2016) <a href="https://papers.nips.cc/paper/2016/file/9d2682367c3935defcb1f9e247a97c0d-Paper.pdf">https://papers.nips.cc/paper/2016/file/9d2682367c3935defcb1f9e247a97c0d-Paper.pdf</a>. Integration with 'mlr3' allows for auditing of ML models as well as convenient joint tuning of machine learning algorithms and debiasing methods.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Florian Pfisterer <a href="mailto:pfistererf@googlemail.com">pfistererf@googlemail.com</a> (<a href="https://orcid.org/0000-0001-8867-762X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Wei Siyi <a href="mailto:weisiyi2@gmail.com">weisiyi2@gmail.com</a>
</p>
</li>
<li><p> Michel Lang <a href="mailto:michellang@gmail.com">michellang@gmail.com</a> (<a href="https://orcid.org/0000-0001-9754-0393">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://mlr3fairness.mlr-org.com">https://mlr3fairness.mlr-org.com</a>
</p>
</li>
<li> <p><a href="https://github.com/mlr-org/mlr3fairness">https://github.com/mlr-org/mlr3fairness</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/mlr-org/mlr3fairness/issues">https://github.com/mlr-org/mlr3fairness/issues</a>
</p>
</li></ul>


<hr>
<h2 id='adult'>Adult Dataset</h2><span id='topic+adult'></span><span id='topic+adult_test'></span><span id='topic+adult_train'></span>

<h3>Description</h3>

<p>Dataset used to predict whether income exceeds $50K/yr based on census data.
Also known as &quot;Census Income&quot; dataset
Train dataset contains 13 features and 30178 observations.
Test dataset contains 13 features and 15315 observations.
Target column is &quot;target&quot;: A binary factor where 1: &lt;=50K and 2: &gt;50K for annual income.
The column <code>"sex"</code> is set as protected attribute.
</p>


<h3>Derived tasks</h3>


<ul>
<li> <p><code>adult_train</code>: Original train split for the adult task available at UCI.
</p>
</li>
<li> <p><code>adult_test</code>: Original test split for the adult task available at UCI.
</p>
</li></ul>



<h3>Using Adult - Known Problems</h3>

<p>The adult dataset has several known limitations such as its age, limited documentation, and outdated feature encodings (Ding et al., 2021).
Furthermore, the selected threshold (income &lt;=50K) has strong implications on the outcome of analysis, such that
&quot;In many cases, the $50k threshold understates and misrepresents the broader picture&quot; (Ding et al., 2021).
As a result, conclusions w.r.t. real-world implications are severely limited.
</p>
<p>We decide to replicate the dataset here, as it is a widely used benchmark dataset and it can still serve this purpose.
</p>


<h3>Pre-processing</h3>


<ul>
<li> <p><code>fnlwgt</code> Remove final weight, which is the number of people the census believes the entry represents
</p>
</li>
<li> <p><code>native-country</code> Remove Native Country, which is the country of origin for an individual
</p>
</li>
<li><p> Rows containing <code>NA</code> in workclass and occupation have been removed.
</p>
</li>
<li><p> Pre-processing inspired by article: @url https://cseweb.ucsd.edu//classes/sp15/cse190-c/reports/sp15/048.pdf
</p>
</li></ul>



<h3>Metadata</h3>


<ul>
<li><p> (integer) age: The age of the individuals
</p>
</li>
<li><p> (factor) workclass: A general term to represent the employment status of an individual
</p>
</li>
<li><p> (factor) education: The highest level of education achieved by an individual.
</p>
</li>
<li><p> (integer) education_num: the highest level of education achieved in numerical form.
</p>
</li>
<li><p> (factor) marital_status: marital status of an individual.
</p>
</li>
<li><p> (factor) occupation: the general type of occupation of an individual
</p>
</li>
<li><p> (factor) relationship: whether the individual is in a relationship-
</p>
</li>
<li><p> (factor) race: Descriptions of an individual’s race
</p>
</li>
<li><p> (factor) sex: the biological sex of the individual
</p>
</li>
<li><p> (integer) captain-gain: capital gains for an individual
</p>
</li>
<li><p> (integer) captain-loss: capital loss for an individual
</p>
</li>
<li><p> (integer) hours-per-week: the hours an individual has reported to work per week
</p>
</li>
<li><p> (factor) target: whether or not an individual makes more than $50,000 annually
</p>
</li></ul>



<h3>Source</h3>

<p>Dua, Dheeru, Graff, Casey (2017).
&ldquo;UCI Machine Learning Repository.&rdquo;
<a href="http://archive.ics.uci.edu/ml/">http://archive.ics.uci.edu/ml/</a>.
Ding, Frances, Hardt, Moritz, Miller, John, Schmidt, Ludwig (2021).
&ldquo;Retiring adult: New datasets for fair machine learning.&rdquo;
In <em>Thirty-fifth Conference on Neural Information Processing Systems Datasets and Benchmarks Track (Round 1)</em>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
data("adult_test", package = "mlr3fairness")
data("adult_train", package = "mlr3fairness")
</code></pre>

<hr>
<h2 id='compare_metrics'>Compare different metrics</h2><span id='topic+compare_metrics'></span>

<h3>Description</h3>

<p>Compare learners with respect to to one or multiple metrics.
Metrics can but be but are not limited to fairness metrics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_metrics(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_metrics_+3A_object">object</code></td>
<td>
<p>(<a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a> | <a href="mlr3.html#topic+BenchmarkResult">BenchmarkResult</a> | <a href="mlr3.html#topic+ResampleResult">ResampleResult</a>)<br />
The object to create a plot for.
</p>

<ul>
<li><p> If provided a (<a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a>).
Then the visualization will compare the fairness metrics among the binary level from protected field
through bar plots.
</p>
</li>
<li><p> If provided a (<a href="mlr3.html#topic+ResampleResult">ResampleResult</a>).
Then the visualization will generate the boxplots for fairness metrics, and compare them among
the binary level from protected field.
</p>
</li>
<li><p> If provided a (<a href="mlr3.html#topic+BenchmarkResult">BenchmarkResult</a>).
Then the visualization will generate the boxplots for fairness metrics, and compare them among
both the binary level from protected field and the models implemented.
</p>
</li></ul>
</td></tr>
<tr><td><code id="compare_metrics_+3A_...">...</code></td>
<td>
<p>The arguments to be passed to methods, such as:
</p>

<ul>
<li> <p><code>fairness_measures</code> (list of <a href="mlr3.html#topic+Measure">Measure</a>)<br />
The fairness measures that will evaluated on object, could be single <a href="mlr3.html#topic+Measure">Measure</a> or list of <a href="mlr3.html#topic+Measure">Measure</a>s.
Default measure set to be <code>msr("fairness.acc")</code>.
</p>
</li>
<li> <p><code>task</code> (<a href="mlr3.html#topic+TaskClassif">TaskClassif</a>)<br />
The data task that contains the protected column, only required when object is (<a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a>).
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'ggplot2' object.
</p>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
library("mlr3learners")

# Setup the Fairness Measures and tasks
task = tsk("adult_train")$filter(1:500)
learner = lrn("classif.ranger", predict_type = "prob")
learner$train(task)
predictions = learner$predict(task)
design = benchmark_grid(
  tasks = task,
  learners = lrns(c("classif.ranger", "classif.rpart"),
    predict_type = "prob", predict_sets = c("train", "predict")),
  resamplings = rsmps("cv", folds = 3)
)

bmr = benchmark(design)
fairness_measure = msr("fairness.tpr")
fairness_measures = msrs(c("fairness.tpr", "fairness.fnr", "fairness.acc"))

# Predictions
compare_metrics(predictions, fairness_measure, task)
compare_metrics(predictions, fairness_measures, task)

# BenchmarkResult and ResamplingResult
compare_metrics(bmr, fairness_measure)
compare_metrics(bmr, fairness_measures)
</code></pre>

<hr>
<h2 id='compas'>COMPAS Dataset</h2><span id='topic+compas'></span><span id='topic+Compas'></span>

<h3>Description</h3>

<p>The COMPAS dataset includes the processed COMPAS data between 2013-2014.
The data cleaning process followed the guidance in the original COMPAS repo.
Contains 6172 observations and 14 features.
The target column could either be &quot;is_recid&quot; or &quot;two_year_recid&quot;, but often &quot;two_year_recid&quot; is prefered.
The column <code>"sex"</code> is set as protected attribute, but more often <code>"race"</code> is used.
</p>
<p>Derived tasks: <br />
</p>

<ul>
<li> <p><code>compas</code> : A classification task for the <a href="#topic+compas">compas</a> data set with the protected attribute 'sex'.
</p>
</li></ul>


<ul>
<li> <p><code>compas_race_binary</code> : A classification task for the <a href="#topic+compas">compas</a> data set with the protected attribute 'race'.
The observations have been filtered, keeping only observations with race
<code>"Caucasian"</code> and <code>"African-American"</code>. The protected attribute has been set
to <code>"race"</code>.
</p>
</li></ul>



<h3>Format</h3>

<p><a href="R6.html#topic+R6Class">R6::R6Class</a> inheriting from <a href="mlr3.html#topic+TaskClassif">TaskClassif</a>.
</p>
<p><a href="R6.html#topic+R6Class">R6::R6Class</a> inheriting from <a href="mlr3.html#topic+TaskClassif">TaskClassif</a>.
</p>


<h3>Using COMPAS - Known Problems</h3>

<p>The COMPAS dataset was collected as part of the ProPublica analysis of machine bias in criminal sentencing.
It is important to note, that using COMPAS is generally discouraged for the following reasons:
</p>

<ul>
<li><p> The prediction task derived from this dataset has little connection to actually relevant tasks in the
context of risk assessment instruments.
</p>
</li>
<li><p> Collected data and labels suffer from disparate measurement bias.
</p>
</li></ul>

<p>The dataset should therefore not be used to benchmark new fairness algorithms or measures.
For a more in-depth treatment, see Bao et al., 2021: It's COMPASlicated: The Messy Relationship between RAI Datasets and Algorithmic Fairness Benchmarks.
We replicate the dataset here to raise awareness for this issue.
Furthermore, similar issues exist across a wide variety of datasets widely used in the context of fairness auditing
and we, therefore, consider issues, e.g. derived from disparate measurement bias an important issue in the context of fairness audits.
</p>


<h3>Pre-processing</h3>


<ul>
<li><p> Identifying columns are removed
</p>
</li>
<li><p> Removed the outliers for abs(days_b_screening_arrest) &gt;= 30.
</p>
</li>
<li><p> Removed observations where is_recid != -1.
</p>
</li>
<li><p> Removed observations where c_charge_degree != &quot;O&quot;.
</p>
</li>
<li><p> Removed observations where score_text != 'N/A'.
</p>
</li>
<li><p> Factorize the features that are categorical.
</p>
</li>
<li><p> Add length of stay (c_jail_out - c_jail_in) in the dataset.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;Pre-processing Resource:&#8288;</code> @url https://github.com/propublica/compas-analysis/blob/master/Compas%20Analysis.ipynb
</p>
</li></ul>



<h3>Metadata</h3>


<ul>
<li><p> (integer) age : The age of defendants.
</p>
</li>
<li><p> (factor) c_charge_degree : The charge degree of defendants. F: Felony M: Misdemeanor
</p>
</li>
<li><p> (factor) race: The race of defendants.
</p>
</li>
<li><p> (factor) age_cat: The age category of defendants.
</p>
</li>
<li><p> (factor) score_text: The score category of defendants.
</p>
</li>
<li><p> (factor) sex: The sex of defendants.
</p>
</li>
<li><p> (integer) priors_count: The prior criminal records of defendants.
</p>
</li>
<li><p> (integer) days_b_screening_arrest: The count of days between screening date and (original) arrest date.
If they are too far apart, that may indicate an error. If the value is negative,
that indicate the screening date happened before the arrest date.
</p>
</li>
<li><p> (integer) decile_score: Indicate the risk of recidivism (Min=1, Max=10)
</p>
</li>
<li><p> (integer) is_recid: Binary variable indicate whether defendant is rearrested at any time.
</p>
</li>
<li><p> (factor) two_year_recid: Binary variable indicate whether defendant is rearrested at within two years.
</p>
</li>
<li><p> (numeric) length_of_stay: The count of days stay in jail.
</p>
</li></ul>



<h3>Construction</h3>

<div class="sourceCode"><pre>mlr_tasks$get("compas")
tsk("compas")
</pre></div>
<div class="sourceCode"><pre>mlr_tasks$get("compas_race_binary")
tsk("compas_race_binary")
</pre></div>


<h3>Source</h3>

<p>ProPublica Analysis: <a href="https://github.com/propublica/compas-analysis">https://github.com/propublica/compas-analysis</a>
</p>
<p>Bao, Michelle, Zhou, Angela, Zottola, A S, Brubach, Brian, Desmarais, Sarah, Horowitz, Seth A, Lum, Kristian, Venkatasubramanian, Suresh (2021).
&ldquo;It's COMPASlicated: The Messy Relationship between RAI Datasets and Algorithmic Fairness Benchmarks.&rdquo;
In <em>Thirty-fifth Conference on Neural Information Processing Systems Datasets and Benchmarks Track (Round 1)</em>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
data("compas", package = "mlr3fairness")
</code></pre>

<hr>
<h2 id='compute_metrics'>Compute metrics for non-mlr3 predictions.</h2><span id='topic+compute_metrics'></span>

<h3>Description</h3>

<p>Allows computing metrics for predictions that do not stem from mlr3, and were
e.g. being made by models outside of mlr3.
Currently only <code>classif</code> and <code>regr</code> - style predictions are supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_metrics(data, target, protected_attribute, prediction, metrics = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_metrics_+3A_data">data</code></td>
<td>
<p>(<code>data.table</code>) <br /> The dataset used for predicting.</p>
</td></tr>
<tr><td><code id="compute_metrics_+3A_target">target</code></td>
<td>
<p>(<code>character</code>) <br /> The name of the target variable. Must be available in <code>data</code>.</p>
</td></tr>
<tr><td><code id="compute_metrics_+3A_protected_attribute">protected_attribute</code></td>
<td>
<p>(<code>character</code>) <br /> The name(s) of the protected attributes(s). Must be available in <code>data</code>.</p>
</td></tr>
<tr><td><code id="compute_metrics_+3A_prediction">prediction</code></td>
<td>
<p>(<code>vector</code>) <br /> A vector containing predictions.</p>
</td></tr>
<tr><td><code id="compute_metrics_+3A_metrics">metrics</code></td>
<td>
<p>(<code>Metric</code>|<code>list</code>) <br /> (List of) mlr3 metrics to apply.</p>
</td></tr>
</table>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# Get adult data as a data.table
train = tsk("adult_train")$data()
mod = rpart::rpart(target ~ ., train)

# Predict on test data
test = tsk("adult_test")$data()
yhat = predict(mod, test, type = "vector")

# Convert to a factor with the same levels
yhat = as.factor(yhat)
levels(yhat) = levels(test$target)

compute_metrics(
  data = test, 
  target = "target",
  prediction = yhat,
  protected_attribute = "sex",
  metrics = msr("fairness.acc")
)
</code></pre>

<hr>
<h2 id='fairness_accuracy_tradeoff'>Plot Fairness Accuracy Trade-offs</h2><span id='topic+fairness_accuracy_tradeoff'></span>

<h3>Description</h3>

<p>Provides visualization wrt. trade-offs between fairness and accuracy metrics across learners and
resampling iterations.
This can assist in gauging the optimal model from a set of options along with estimates of variance
(through individual resampling iterations).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fairness_accuracy_tradeoff(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fairness_accuracy_tradeoff_+3A_object">object</code></td>
<td>
<p>(<a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a> | <a href="mlr3.html#topic+BenchmarkResult">BenchmarkResult</a> | <a href="mlr3.html#topic+ResampleResult">ResampleResult</a>)<br />
The binary class prediction object that will be evaluated.
</p>

<ul>
<li><p> If provided a <a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a>.
Then only one point will indicate the accuracy and fairness metrics for the current predictions.
Requires also passing a <a href="mlr3.html#topic+Task">Task</a>.
</p>
</li>
<li><p> If provided a <a href="mlr3.html#topic+ResampleResult">ResampleResult</a>.
Then the plot will compare the accuracy and fairness metrics for the same model,
but different resampling iterations  as well as the aggregate indicated by a cross.
</p>
</li>
<li><p> If provided a <a href="mlr3.html#topic+BenchmarkResult">BenchmarkResult</a>.
Then the plot will compare the accuracy and fairness metrics for all models and all resampling iterations.
Points are colored according to the learner_id and faceted by task_id.
The aggregated score is indicated by a cross.
</p>
</li></ul>
</td></tr>
<tr><td><code id="fairness_accuracy_tradeoff_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to methods. Such as:
</p>

<ul>
<li> <p><code>fairness_measure</code> (<a href="mlr3.html#topic+Measure">Measure</a>)<br />
The fairness measures that will evaluated.
Default measure set to be <code>msr("fairness.fpr")</code>
</p>
</li>
<li> <p><code>accuracy_measure</code> (<a href="mlr3.html#topic+Measure">Measure</a>)<br />
The accuracy measure that will evaluated.
Default measure set to be <a href="mlr3.html#topic+MeasureClassif">msr(&quot;classif.acc&quot;)</a>.
</p>
</li>
<li> <p><code>task</code> (<a href="mlr3.html#topic+TaskClassif">TaskClassif</a>)<br />
The data task that contains the protected column, only required when the class of object is (<a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a>)
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'ggplot2' object.
</p>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
library("mlr3learners")
library("ggplot2")

# Setup the Fairness measure and tasks
task = tsk("adult_train")$filter(1:500)
learner = lrn("classif.ranger", predict_type = "prob")
fairness_measure = msr("fairness.tpr")

# Example 1 - A single prediction
learner$train(task)
predictions = learner$predict(task)
fairness_accuracy_tradeoff(predictions, fairness_measure, task = task)

# Example2 - A benchmark
design = benchmark_grid(
  tasks = task,
  learners = lrns(c("classif.featureless", "classif.rpart"),
    predict_type = "prob", predict_sets = c("train", "test")),
  resamplings = rsmps("cv", folds = 2)
)
bmr = benchmark(design)
fairness_accuracy_tradeoff(bmr, fairness_measure)
</code></pre>

<hr>
<h2 id='fairness_prediction_density'>Probability Density Plot</h2><span id='topic+fairness_prediction_density'></span>

<h3>Description</h3>

<p>Visualizes per-subgroup densities across learners, task and class.
The plot is a combination of boxplot and violin plot.
The y-axis shows the levels in protected columns. And the x-axis shows the predicted probability.
The title for the plot will demonstrate which class for predicted probability.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fairness_prediction_density(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fairness_prediction_density_+3A_object">object</code></td>
<td>
<p>(<a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a> | <a href="mlr3.html#topic+ResampleResult">ResampleResult</a> | <a href="mlr3.html#topic+BenchmarkResult">BenchmarkResult</a>)<br />
The binary class prediction object that will be evaluated.
If <a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a>, a <a href="mlr3.html#topic+Task">Task</a> is required.</p>
</td></tr>
<tr><td><code id="fairness_prediction_density_+3A_...">...</code></td>
<td>
<p>The arguments to be passed to methods, such as:
</p>

<ul>
<li> <p><code>task</code> (<a href="mlr3.html#topic+TaskClassif">TaskClassif</a>)<br />
The data task that contains the protected column.
</p>
</li>
<li> <p><code>type</code> <code><a href="base.html#topic+character">character</a></code><br />
The plot type. Either <code>violin</code> or <code>density</code>.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'ggplot2' object.
</p>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
library("mlr3learners")

task = tsk("adult_train")$filter(1:500)
learner = lrn("classif.rpart", predict_type = "prob", cp = 0.001)
learner$train(task)

# For prediction
predictions = learner$predict(task)
fairness_prediction_density(predictions, task)

# For resampling
rr = resample(task, learner, rsmp("cv"))
fairness_prediction_density(rr)
</code></pre>

<hr>
<h2 id='fairness_tensor'>Compute the Fairness Tensor given a Prediction and a Task</h2><span id='topic+fairness_tensor'></span><span id='topic+fairness_tensor.data.table'></span><span id='topic+fairness_tensor.PredictionClassif'></span><span id='topic+fairness_tensor.ResampleResult'></span>

<h3>Description</h3>

<p>A fairness tensor is a list of groupwise confusion matrices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fairness_tensor(object, normalize = "all", ...)

## S3 method for class 'data.table'
fairness_tensor(object, normalize = "all", task, ...)

## S3 method for class 'PredictionClassif'
fairness_tensor(object, normalize = "all", task, ...)

## S3 method for class 'ResampleResult'
fairness_tensor(object, normalize = "all", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fairness_tensor_+3A_object">object</code></td>
<td>
<p>(<code><a href="data.table.html#topic+data.table">data.table()</a></code> | <a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a> | <a href="mlr3.html#topic+ResampleResult">ResampleResult</a>)<br />
A data.table with columns <code>truth</code> and <code>prediction</code>,
a <a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a> or a <a href="mlr3.html#topic+ResampleResult">ResampleResult</a>.</p>
</td></tr>
<tr><td><code id="fairness_tensor_+3A_normalize">normalize</code></td>
<td>
<p>(<code>character</code>)<br />
How should the fairness tensor be normalized?
&quot;all&quot; normalizes entries by dividing by dataset size,
&quot;group&quot; normalizes entries by dividing by group size and
&quot;none&quot; does not conduct any normalization at all.</p>
</td></tr>
<tr><td><code id="fairness_tensor_+3A_...">...</code></td>
<td>
<p><code>any</code><br />
Currently not used.</p>
</td></tr>
<tr><td><code id="fairness_tensor_+3A_task">task</code></td>
<td>
<p>(<a href="mlr3.html#topic+TaskClassif">TaskClassif</a>)<br />
A <a href="mlr3.html#topic+TaskClassif">TaskClassif</a>. Needs <code>col_role</code> <code>"pta"</code> to be set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list()</code> of confusion matrix for every group in <code>"pta"</code>.
</p>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
task = tsk("compas")
prediction = lrn("classif.rpart")$train(task)$predict(task)
fairness_tensor(prediction, task = task)
</code></pre>

<hr>
<h2 id='groupdiff_tau'>Groupwise Operations</h2><span id='topic+groupdiff_tau'></span><span id='topic+groupdiff_absdiff'></span><span id='topic+groupdiff_diff'></span>

<h3>Description</h3>

<p><code>groupdiff_tau()</code> computes <code class="reqn">min(x/y, y/x)</code>, i.e. the smallest symmetric ratio between <code class="reqn">x</code> and eqny
that is smaller than 1. If <code class="reqn">x</code> is a vector, the symmetric ratio between all
elements in <code class="reqn">x</code> is computed.
</p>
<p><code>groupdiff_absdiff()</code> computes <code class="reqn">max(abs(x-y, y-x))</code>, i.e. the smallest absolute difference
between <code class="reqn">x</code> and <code class="reqn">y</code>.
If <code class="reqn">x</code> is a vector, the symmetric absolute difference between all elements in <code class="reqn">x</code> is computed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>groupdiff_tau(x)

groupdiff_absdiff(x)

groupdiff_diff(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groupdiff_tau_+3A_x">x</code></td>
<td>
<p>(<code>numeric()</code>)<br />
Measured performance in group 1, 2, ...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single <code>numeric</code>.
</p>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>groupdiff_tau(1:3)
groupdiff_diff(1:3)
groupdiff_absdiff(1:3)
</code></pre>

<hr>
<h2 id='groupwise_metrics'>Evaluate a metric on each protected subgroup in a task.</h2><span id='topic+groupwise_metrics'></span>

<h3>Description</h3>

<p>Instantiates one new measure per protected attribute group in a task.
Each metric is then evaluated only on predictions made for the given specific subgroup.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>groupwise_metrics(base_measure, task, intersect = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groupwise_metrics_+3A_base_measure">base_measure</code></td>
<td>
<p>(<code>Measure()</code>)<br />
The base metric evaluated within each subgroup.</p>
</td></tr>
<tr><td><code id="groupwise_metrics_+3A_task">task</code></td>
<td>
<p><code><a href="mlr3.html#topic+Task">Task</a></code> <br />
<code><a href="mlr3.html#topic+Task">mlr3::Task()</a></code> to instantiate measures for.</p>
</td></tr>
<tr><td><code id="groupwise_metrics_+3A_intersect">intersect</code></td>
<td>
<p><code><a href="base.html#topic+logical">logical</a></code> <br />
Should multiple pta groups be intersected? Defaults to <code>TRUE</code>.
Only relevant if more than one <code>pta</code> columns are provided.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code> <br />
List of <a href="mlr3.html#topic+Measure">mlr3::Measure</a>s.
</p>


<h3>See Also</h3>

<p><a href="#topic+MeasureSubgroup">MeasureSubgroup</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  library("mlr3")
  t = tsk("compas")
  l = lrn("classif.rpart")
  m = groupwise_metrics(msr("classif.acc"), t)
  l$train(t)$predict(t)$score(m, t)
</code></pre>

<hr>
<h2 id='MeasureFairness'>Base Measure for Fairness</h2><span id='topic+MeasureFairness'></span>

<h3>Description</h3>

<p>This measure extends <code><a href="mlr3.html#topic+Measure">mlr3::Measure()</a></code> with statistical group fairness:
A common approach to quantifying a model's fairness is to compute the difference between a
protected and an unprotected group according w.r.t. some performance metric, e.g.
<code style="white-space: pre;">&#8288;classification error&#8288;</code> (<a href="mlr3.html#topic+mlr_measures_classif.ce">mlr_measures_classif.ce</a>) or <code style="white-space: pre;">&#8288;false positive rate&#8288;</code>
(<a href="mlr3.html#topic+mlr_measures_classif.fpr">mlr_measures_classif.fpr</a>).
The operation for comparison (e.g., difference or quotient) can be specified using the <code>operation</code>
parameter, e.g. <code><a href="#topic+groupdiff_absdiff">groupdiff_absdiff()</a></code> or <code><a href="#topic+groupdiff_tau">groupdiff_tau()</a></code>.
</p>
<p>Composite measures encompasing multiple fairness metrics can be built using
<a href="#topic+MeasureFairnessComposite">MeasureFairnessComposite</a>.
</p>
<p>Some popular predefined measures can be found in the <a href="mlr3misc.html#topic+Dictionary">dictionary</a> <a href="mlr3.html#topic+mlr_measures">mlr_measures</a>.
</p>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Super class</h3>

<p><code><a href="mlr3.html#topic+Measure">mlr3::Measure</a></code> -&gt; <code>MeasureFairness</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>base_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The base measure to be used by the fairness measures,
e.g. <a href="mlr3.html#topic+mlr_measures_classif.fpr">mlr_measures_classif.fpr</a> for the false positive rate.</p>
</dd>
<dt><code>operation</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function()&#8288;</code>)<br />
The operation used to compute the difference. A function with args 'x' and 'y' that returns
a single value. Defaults to <code>abs(x - y)</code>.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MeasureFairness-new"><code>MeasureFairness$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MeasureFairness-clone"><code>MeasureFairness$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="aggregate"><a href='../../mlr3/html/Measure.html#method-Measure-aggregate'><code>mlr3::Measure$aggregate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="format"><a href='../../mlr3/html/Measure.html#method-Measure-format'><code>mlr3::Measure$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="help"><a href='../../mlr3/html/Measure.html#method-Measure-help'><code>mlr3::Measure$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="print"><a href='../../mlr3/html/Measure.html#method-Measure-print'><code>mlr3::Measure$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="score"><a href='../../mlr3/html/Measure.html#method-Measure-score'><code>mlr3::Measure$score()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MeasureFairness-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureFairness$new(
  id = NULL,
  base_measure,
  operation = groupdiff_absdiff,
  minimize = TRUE,
  range = c(-Inf, Inf)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character</code>)<br />
The measure's id. Set to 'fairness.&lt;base_measure_id&gt;' if ommited.</p>
</dd>
<dt><code>base_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The base metric evaluated within each subgroup.</p>
</dd>
<dt><code>operation</code></dt><dd><p>(<code>function</code>)<br />
The operation used to compute the difference. A function that returns
a single value given input: computed metric for each subgroup.
Defaults to <a href="#topic+groupdiff_absdiff">groupdiff_absdiff</a>.</p>
</dd>
<dt><code>minimize</code></dt><dd><p>(<code>logical()</code>)<br />
Should the measure be minimized? Defaults to <code>TRUE</code>.</p>
</dd>
<dt><code>range</code></dt><dd><p>(<code>numeric(2)</code>)<br />
Range of the resulting measure. Defaults to <code>c(-Inf, Inf)</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-MeasureFairness-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureFairness$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><a href="#topic+MeasureFairnessComposite">MeasureFairnessComposite</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# Create MeasureFairness to measure the Predictive Parity.
t = tsk("adult_train")
learner = lrn("classif.rpart", cp = .01)
learner$train(t)
measure = msr("fairness", base_measure = msr("classif.ppv"))
predictions = learner$predict(t)
predictions$score(measure, task = t)
</code></pre>

<hr>
<h2 id='MeasureFairnessComposite'>Composite Fairness Measure</h2><span id='topic+MeasureFairnessComposite'></span>

<h3>Description</h3>

<p>Computes a composite measure from multiple fairness metrics and aggregates them
using <code>aggfun</code> (defaulting to <code><a href="base.html#topic+mean">mean()</a></code>).
</p>


<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Super class</h3>

<p><code><a href="mlr3.html#topic+Measure">mlr3::Measure</a></code> -&gt; <code>MeasureFairnessComposite</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MeasureFairnessComposite-new"><code>MeasureFairnessComposite$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MeasureFairnessComposite-clone"><code>MeasureFairnessComposite$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="aggregate"><a href='../../mlr3/html/Measure.html#method-Measure-aggregate'><code>mlr3::Measure$aggregate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="format"><a href='../../mlr3/html/Measure.html#method-Measure-format'><code>mlr3::Measure$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="help"><a href='../../mlr3/html/Measure.html#method-Measure-help'><code>mlr3::Measure$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="print"><a href='../../mlr3/html/Measure.html#method-Measure-print'><code>mlr3::Measure$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="score"><a href='../../mlr3/html/Measure.html#method-Measure-score'><code>mlr3::Measure$score()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MeasureFairnessComposite-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureFairnessComposite$new(
  id = NULL,
  measures,
  aggfun = function(x) mean(x),
  operation = groupdiff_absdiff,
  minimize = TRUE,
  range = c(-Inf, Inf)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)<br />
Id of the measure. Defaults to the concatenation of ids in <code>measure</code>.</p>
</dd>
<dt><code>measures</code></dt><dd><p>(list of <a href="#topic+MeasureFairness">MeasureFairness</a>)<br />
List of fairness measures to aggregate.</p>
</dd>
<dt><code>aggfun</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function()&#8288;</code>)<br />
Aggregation function used to aggregate results from respective measures. Defaults to <code>sum</code>.</p>
</dd>
<dt><code>operation</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function()&#8288;</code>)<br />
The operation used to compute the difference. A function that returns
a single value given input: computed metric for each subgroup.
Defaults to <code>groupdiff_absdiff</code>.
See <code>MeasureFairness</code> for more information.</p>
</dd>
<dt><code>minimize</code></dt><dd><p>(<code>logical(1)</code>)<br />
Should the measure be minimized? Defaults to <code>TRUE</code>.</p>
</dd>
<dt><code>range</code></dt><dd><p>(<code>numeric(2)</code>)<br />
Range of the resulting measure. Defaults to <code>c(-Inf, Inf)</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-MeasureFairnessComposite-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureFairnessComposite$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# Equalized Odds Metric
MeasureFairnessComposite$new(measures = msrs(c("fairness.fpr", "fairness.tpr")))

# Other metrics e.g. based on negative rates
MeasureFairnessComposite$new(measures = msrs(c("fairness.fnr", "fairness.tnr")))
</code></pre>

<hr>
<h2 id='MeasureFairnessConstraint'>Fairness Constraint Measure</h2><span id='topic+MeasureFairnessConstraint'></span>

<h3>Description</h3>

<p>This measure allows constructing for 'constraint' measures of the following form:<br />
</p>
<p style="text-align: center;"><code class="reqn">min performance subject to fairness &lt; \epsilon</code>
</p>



<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Super class</h3>

<p><code><a href="mlr3.html#topic+Measure">mlr3::Measure</a></code> -&gt; <code>MeasureFairnessConstraint</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>performance_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The performance measure to be used.</p>
</dd>
<dt><code>fairness_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The fairness measure to be used.</p>
</dd>
<dt><code>epsilon</code></dt><dd><p>(<code>numeric</code>)<br />
Deviation from perfect fairness that is allowed.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MeasureFairnessConstraint-new"><code>MeasureFairnessConstraint$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MeasureFairnessConstraint-clone"><code>MeasureFairnessConstraint$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="aggregate"><a href='../../mlr3/html/Measure.html#method-Measure-aggregate'><code>mlr3::Measure$aggregate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="format"><a href='../../mlr3/html/Measure.html#method-Measure-format'><code>mlr3::Measure$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="help"><a href='../../mlr3/html/Measure.html#method-Measure-help'><code>mlr3::Measure$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="print"><a href='../../mlr3/html/Measure.html#method-Measure-print'><code>mlr3::Measure$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="score"><a href='../../mlr3/html/Measure.html#method-Measure-score'><code>mlr3::Measure$score()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MeasureFairnessConstraint-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureFairnessConstraint$new(
  id = NULL,
  performance_measure,
  fairness_measure,
  epsilon = 0.01,
  range = c(-Inf, Inf)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character</code>)<br />
The measure's id. Set to 'fairness.&lt;base_measure_id&gt;' if ommited.</p>
</dd>
<dt><code>performance_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The measure used to measure performance (e.g. accuracy).</p>
</dd>
<dt><code>fairness_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The measure used to measure fairness (e.g. equalized odds).</p>
</dd>
<dt><code>epsilon</code></dt><dd><p>(<code>numeric</code>)<br />
Allowed divergence from perfect fairness. Initialized to 0.01.</p>
</dd>
<dt><code>range</code></dt><dd><p>(<code>numeric</code>)<br />
Range of the resulting measure. Defaults to <code>c(-Inf, Inf)</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-MeasureFairnessConstraint-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureFairnessConstraint$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p>mlr_measures_fairness
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Accuracy subject to equalized odds fairness constraint:
library("mlr3")
t = tsk("adult_train")
learner = lrn("classif.rpart", cp = .01)
learner$train(t)
measure = msr("fairness.constraint", id = "acc_tpr", msr("classif.acc"), msr("fairness.tpr"))
predictions = learner$predict(t)
predictions$score(measure, task = t)
</code></pre>

<hr>
<h2 id='MeasureSubgroup'>Evaluate a metric on a subgroup</h2><span id='topic+MeasureSubgroup'></span>

<h3>Description</h3>

<p>Allows for calculation of arbitrary <code><a href="mlr3.html#topic+Measure">mlr3::Measure()</a></code>s on a selected sub-group.
</p>


<h3>Super class</h3>

<p><code><a href="mlr3.html#topic+Measure">mlr3::Measure</a></code> -&gt; <code>MeasureSubgroup</code>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>base_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The base measure to be used by the fairness measures,
e.g. <a href="mlr3.html#topic+mlr_measures_classif.fpr">mlr_measures_classif.fpr</a> for the false positive rate.</p>
</dd>
<dt><code>subgroup</code></dt><dd><p>(<code>character</code>)|(<code>integer</code>)<br />
Subgroup identifier.</p>
</dd>
<dt><code>intersect</code></dt><dd><p>(<code>logical</code>)<br />
Should groups be intersected?</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MeasureSubgroup-new"><code>MeasureSubgroup$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MeasureSubgroup-clone"><code>MeasureSubgroup$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="aggregate"><a href='../../mlr3/html/Measure.html#method-Measure-aggregate'><code>mlr3::Measure$aggregate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="format"><a href='../../mlr3/html/Measure.html#method-Measure-format'><code>mlr3::Measure$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="help"><a href='../../mlr3/html/Measure.html#method-Measure-help'><code>mlr3::Measure$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="print"><a href='../../mlr3/html/Measure.html#method-Measure-print'><code>mlr3::Measure$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="score"><a href='../../mlr3/html/Measure.html#method-Measure-score'><code>mlr3::Measure$score()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MeasureSubgroup-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureSubgroup$new(id = NULL, base_measure, subgroup, intersect = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character</code>)<br />
The measure's id. Set to 'fairness.&lt;base_measure_id&gt;' if ommited.</p>
</dd>
<dt><code>base_measure</code></dt><dd><p>(<code>Measure()</code>)<br />
The measure used to measure fairness.</p>
</dd>
<dt><code>subgroup</code></dt><dd><p>(<code>character</code>)|(<code>integer</code>)<br />
Subgroup identifier. Either value for the protected attribute or position in <code>task$levels</code>.</p>
</dd>
<dt><code>intersect</code></dt><dd><p><code><a href="base.html#topic+logical">logical</a></code> <br />
Should multiple pta groups be intersected? Defaults to <code>TRUE</code>.
Only relevant if more than one <code>pta</code> columns are provided.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-MeasureSubgroup-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasureSubgroup$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p><a href="#topic+MeasureFairness">MeasureFairness</a>, <a href="#topic+groupwise_metrics">groupwise_metrics</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# Create MeasureFairness to measure the Predictive Parity.
t = tsk("adult_train")
learner = lrn("classif.rpart", cp = .01)
learner$train(t)
measure = msr("subgroup", base_measure = msr("classif.acc"), subgroup = "Female")
predictions = learner$predict(t)
predictions$score(measure, task = t)
</code></pre>

<hr>
<h2 id='mlr_learners_classif.fairfgrrm'>Classification Fair Generalized Ridge Regression Learner</h2><span id='topic+mlr_learners_classif.fairfgrrm'></span><span id='topic+LearnerClassifFairfgrrm'></span>

<h3>Description</h3>

<p>Calls <a href="fairml.html#topic+frrm">fairml::fgrrm</a> from package <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>.
</p>


<h3>Details</h3>

<p>Fair generalized ridge regression model implemented via package <code>fairml</code>.
The 'unfairness' parameter is set to 0.05 as a default.
</p>


<h3>Dictionary</h3>

<p>This <a href="mlr3.html#topic+Learner">Learner</a> can be instantiated via the
<a href="mlr3misc.html#topic+Dictionary">dictionary</a> <a href="mlr3.html#topic+mlr_learners">mlr_learners</a> or with the associated
sugar function <code><a href="mlr3.html#topic+lrn">lrn()</a></code>:
</p>
<div class="sourceCode"><pre>mlr_learners$get("classif.fairfgrrm")
lrn("classif.fairfgrrm")
</pre></div>


<h3>Meta Information</h3>


<ul>
<li><p> Task type: &ldquo;classif&rdquo;
</p>
</li>
<li><p> Predict Types: &ldquo;response&rdquo;, &ldquo;prob&rdquo;
</p>
</li>
<li><p> Feature Types: &ldquo;integer&rdquo;, &ldquo;numeric&rdquo;, &ldquo;factor&rdquo;, &ldquo;ordered&rdquo;
</p>
</li>
<li><p> Required Packages: <a href="https://CRAN.R-project.org/package=mlr3"><span class="pkg">mlr3</span></a>, <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>
</p>
</li></ul>



<h3>Parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   Id </td><td style="text-align: left;"> Type </td><td style="text-align: left;"> Default </td><td style="text-align: left;"> Levels </td><td style="text-align: left;"> Range </td>
</tr>
<tr>
 <td style="text-align: left;">
   lambda </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> 0 </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, \infty)</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   definition </td><td style="text-align: left;"> character </td><td style="text-align: left;"> sp-komiyama </td><td style="text-align: left;"> sp-komiyama, eo-komiyama </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
   save.auxiliary </td><td style="text-align: left;"> logical </td><td style="text-align: left;"> FALSE </td><td style="text-align: left;"> TRUE, FALSE </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
   unfairness </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> - </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, 1]</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   family </td><td style="text-align: left;"> character </td><td style="text-align: left;"> binomial </td><td style="text-align: left;"> gaussian, binomial </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
   intersect </td><td style="text-align: left;"> logical </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> TRUE, FALSE </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Super classes</h3>

<p><code><a href="mlr3.html#topic+Learner">mlr3::Learner</a></code> -&gt; <code><a href="mlr3.html#topic+LearnerClassif">mlr3::LearnerClassif</a></code> -&gt; <code>LearnerClassifFairfgrrm</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LearnerClassifFairfgrrm-new"><code>LearnerClassifFairfgrrm$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LearnerClassifFairfgrrm-clone"><code>LearnerClassifFairfgrrm$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="base_learner"><a href='../../mlr3/html/Learner.html#method-Learner-base_learner'><code>mlr3::Learner$base_learner()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="format"><a href='../../mlr3/html/Learner.html#method-Learner-format'><code>mlr3::Learner$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="help"><a href='../../mlr3/html/Learner.html#method-Learner-help'><code>mlr3::Learner$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict"><a href='../../mlr3/html/Learner.html#method-Learner-predict'><code>mlr3::Learner$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict_newdata"><a href='../../mlr3/html/Learner.html#method-Learner-predict_newdata'><code>mlr3::Learner$predict_newdata()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="print"><a href='../../mlr3/html/Learner.html#method-Learner-print'><code>mlr3::Learner$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="reset"><a href='../../mlr3/html/Learner.html#method-Learner-reset'><code>mlr3::Learner$reset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="train"><a href='../../mlr3/html/Learner.html#method-Learner-train'><code>mlr3::Learner$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LearnerClassifFairfgrrm-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerClassifFairfgrrm$new()</pre></div>


<hr>
<a id="method-LearnerClassifFairfgrrm-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerClassifFairfgrrm$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Author(s)</h3>

<p>pfistfl
</p>


<h3>References</h3>

<p>Scutari M, Panero F, Proissl M (2021).
&ldquo;Achieving Fairness with a Simple Ridge Penalty.&rdquo;
<em>arXiv preprint arXiv:2105.13817</em>.
</p>


<h3>See Also</h3>

<p><a href="mlr3misc.html#topic+Dictionary">Dictionary</a> of <a href="mlr3.html#topic+Learner">Learners</a>:
<a href="mlr3.html#topic+mlr_learners">mlr3::mlr_learners</a>
</p>
<p>Other fairness_learners: 
<code><a href="#topic+mlr_learners_classif.fairzlrm">mlr_learners_classif.fairzlrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairfrrm">mlr_learners_regr.fairfrrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairnclm">mlr_learners_regr.fairnclm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairzlm">mlr_learners_regr.fairzlm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# stop example failing with warning if package not installed
learner = suppressWarnings(mlr3::lrn("classif.fairfgrrm"))
print(learner)

# available parameters:
learner$param_set$ids()
</code></pre>

<hr>
<h2 id='mlr_learners_classif.fairzlrm'>Classification Fair Logistic Regression With Covariance Constraints Learner</h2><span id='topic+mlr_learners_classif.fairzlrm'></span><span id='topic+LearnerClassifFairzlrm'></span>

<h3>Description</h3>

<p>Calls <a href="fairml.html#topic+zlm">fairml::zlrm</a> from package <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>.
</p>


<h3>Details</h3>

<p>Generalized fair regression model from Zafar et al., 2019 implemented via package <code>fairml</code>.
The 'unfairness' parameter is set to 0.05 as a default.
The optimized fairness metric is statistical parity.
</p>


<h3>Dictionary</h3>

<p>This <a href="mlr3.html#topic+Learner">Learner</a> can be instantiated via the
<a href="mlr3misc.html#topic+Dictionary">dictionary</a> <a href="mlr3.html#topic+mlr_learners">mlr_learners</a> or with the associated
sugar function <code><a href="mlr3.html#topic+lrn">lrn()</a></code>:
</p>
<div class="sourceCode"><pre>mlr_learners$get("classif.fairzlrm")
lrn("classif.fairzlrm")
</pre></div>


<h3>Meta Information</h3>


<ul>
<li><p> Task type: &ldquo;classif&rdquo;
</p>
</li>
<li><p> Predict Types: &ldquo;response&rdquo;, &ldquo;prob&rdquo;
</p>
</li>
<li><p> Feature Types: &ldquo;integer&rdquo;, &ldquo;numeric&rdquo;, &ldquo;factor&rdquo;, &ldquo;ordered&rdquo;
</p>
</li>
<li><p> Required Packages: <a href="https://CRAN.R-project.org/package=mlr3"><span class="pkg">mlr3</span></a>, <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>
</p>
</li></ul>



<h3>Parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   Id </td><td style="text-align: left;"> Type </td><td style="text-align: left;"> Default </td><td style="text-align: left;"> Levels </td><td style="text-align: left;"> Range </td>
</tr>
<tr>
 <td style="text-align: left;">
   unfairness </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> - </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, 1]</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   intersect </td><td style="text-align: left;"> logical </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> TRUE, FALSE </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Super classes</h3>

<p><code><a href="mlr3.html#topic+Learner">mlr3::Learner</a></code> -&gt; <code><a href="mlr3.html#topic+LearnerClassif">mlr3::LearnerClassif</a></code> -&gt; <code>LearnerClassifFairzlrm</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LearnerClassifFairzlrm-new"><code>LearnerClassifFairzlrm$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LearnerClassifFairzlrm-clone"><code>LearnerClassifFairzlrm$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="base_learner"><a href='../../mlr3/html/Learner.html#method-Learner-base_learner'><code>mlr3::Learner$base_learner()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="format"><a href='../../mlr3/html/Learner.html#method-Learner-format'><code>mlr3::Learner$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="help"><a href='../../mlr3/html/Learner.html#method-Learner-help'><code>mlr3::Learner$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict"><a href='../../mlr3/html/Learner.html#method-Learner-predict'><code>mlr3::Learner$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict_newdata"><a href='../../mlr3/html/Learner.html#method-Learner-predict_newdata'><code>mlr3::Learner$predict_newdata()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="print"><a href='../../mlr3/html/Learner.html#method-Learner-print'><code>mlr3::Learner$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="reset"><a href='../../mlr3/html/Learner.html#method-Learner-reset'><code>mlr3::Learner$reset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="train"><a href='../../mlr3/html/Learner.html#method-Learner-train'><code>mlr3::Learner$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LearnerClassifFairzlrm-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerClassifFairzlrm$new()</pre></div>


<hr>
<a id="method-LearnerClassifFairzlrm-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerClassifFairzlrm$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Author(s)</h3>

<p>pfistfl
</p>


<h3>References</h3>

<p>BJ Z, I V, M G, KP G (2019).
&ldquo;Fairness Constraints: a Flexible Approach for Fair Classification.&rdquo;
In <em>Journal of Machine Learning Research, 30</em>, 1-42.
</p>


<h3>See Also</h3>

<p><a href="mlr3misc.html#topic+Dictionary">Dictionary</a> of <a href="mlr3.html#topic+Learner">Learners</a>:
<a href="mlr3.html#topic+mlr_learners">mlr3::mlr_learners</a>
</p>
<p>Other fairness_learners: 
<code><a href="#topic+mlr_learners_classif.fairfgrrm">mlr_learners_classif.fairfgrrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairfrrm">mlr_learners_regr.fairfrrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairnclm">mlr_learners_regr.fairnclm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairzlm">mlr_learners_regr.fairzlm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# stop example failing with warning if package not installed
learner = suppressWarnings(mlr3::lrn("classif.fairzlrm"))
print(learner)

# available parameters:
learner$param_set$ids()
</code></pre>

<hr>
<h2 id='mlr_learners_fairness'>Fair Learners in mlr3</h2><span id='topic+mlr_learners_fairness'></span>

<h3>Description</h3>

<p>Fair Learners in mlr3
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlr_learners_fairness
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.table</code> (inherits from <code>data.frame</code>) with 5 rows and 3 columns.
</p>


<h3>Value</h3>

<p>A data.table containing an overview of available fair learners.
</p>


<h3>Predefined measures</h3>

<p><a href="https://CRAN.R-project.org/package=mlr3fairness"><span class="pkg">mlr3fairness</span></a> comes with a set of predefined fairn learners listed below:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>key</strong> </td><td style="text-align: left;"> <strong>package</strong> </td><td style="text-align: left;"> <strong>reference</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
regr.fairfrrm     </td><td style="text-align: left;"> fairml </td><td style="text-align: left;"> Scutari et al., 2021 </td>
</tr>
<tr>
 <td style="text-align: left;">
classif.fairfgrrm </td><td style="text-align: left;"> fairml </td><td style="text-align: left;"> Scutari et al., 2021 </td>
</tr>
<tr>
 <td style="text-align: left;">
regr.fairzlm      </td><td style="text-align: left;"> fairml </td><td style="text-align: left;"> Zafar et al., 2019   </td>
</tr>
<tr>
 <td style="text-align: left;">
classif.fairzlrm  </td><td style="text-align: left;"> fairml </td><td style="text-align: left;"> Zafar et al., 2019   </td>
</tr>
<tr>
 <td style="text-align: left;">
regr.fairnclm     </td><td style="text-align: left;"> fairml </td><td style="text-align: left;"> Komiyama et al., 2018
</td>
</tr>

</table>



<h3>Protected Attributes</h3>

<p>The protected attribute is specified as a <code>col_role</code> in the corresponding <code><a href="mlr3.html#topic+Task">Task()</a></code>:<br />
<code style="white-space: pre;">&#8288;&lt;Task&gt;$col_roles$pta = "name_of_attribute"&#8288;</code> <br />
This also allows specifying more than one protected attribute,
in which case fairness will be considered on the level of intersecting groups defined by all columns
selected as a predicted attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# Available learners:
mlr_learners_fairness
</code></pre>

<hr>
<h2 id='mlr_learners_regr.fairfrrm'>Regression Fair Ridge Regression Learner</h2><span id='topic+mlr_learners_regr.fairfrrm'></span><span id='topic+LearnerRegrFairfrrm'></span>

<h3>Description</h3>

<p>If more than one <code>pta</code> columns are provided, the hyperparameter <code>intersectional</code> controls whether
intersections of protected groups are formed (e.g. combinations of gender and race).
Initialized to <code>TRUE</code>.
If <code>FALSE</code>, only the group specified by the first element of <code>pta</code> is used.
</p>
<p>Calls <a href="fairml.html#topic+frrm">fairml::frrm</a> from package <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>.
</p>


<h3>Details</h3>

<p>Fair ridge regression learner implemented via package <code>fairml</code>.
The 'unfairness' parameter has been initialized to 0.05.
</p>


<h3>Dictionary</h3>

<p>This <a href="mlr3.html#topic+Learner">Learner</a> can be instantiated via the
<a href="mlr3misc.html#topic+Dictionary">dictionary</a> <a href="mlr3.html#topic+mlr_learners">mlr_learners</a> or with the associated
sugar function <code><a href="mlr3.html#topic+lrn">lrn()</a></code>:
</p>
<div class="sourceCode"><pre>mlr_learners$get("regr.fairfrrm")
lrn("regr.fairfrrm")
</pre></div>


<h3>Meta Information</h3>


<ul>
<li><p> Task type: &ldquo;regr&rdquo;
</p>
</li>
<li><p> Predict Types: &ldquo;response&rdquo;
</p>
</li>
<li><p> Feature Types: &ldquo;integer&rdquo;, &ldquo;numeric&rdquo;, &ldquo;factor&rdquo;, &ldquo;ordered&rdquo;
</p>
</li>
<li><p> Required Packages: <a href="https://CRAN.R-project.org/package=mlr3"><span class="pkg">mlr3</span></a>, <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>
</p>
</li></ul>



<h3>Parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   Id </td><td style="text-align: left;"> Type </td><td style="text-align: left;"> Default </td><td style="text-align: left;"> Levels </td><td style="text-align: left;"> Range </td>
</tr>
<tr>
 <td style="text-align: left;">
   lambda </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> 0 </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, \infty)</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   definition </td><td style="text-align: left;"> character </td><td style="text-align: left;"> sp-komiyama </td><td style="text-align: left;"> sp-komiyama, eo-komiyama </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
   save.auxiliary </td><td style="text-align: left;"> logical </td><td style="text-align: left;"> FALSE </td><td style="text-align: left;"> TRUE, FALSE </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
   unfairness </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> - </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, 1]</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Super classes</h3>

<p><code><a href="mlr3.html#topic+Learner">mlr3::Learner</a></code> -&gt; <code><a href="mlr3.html#topic+LearnerRegr">mlr3::LearnerRegr</a></code> -&gt; <code>LearnerRegrFairfrrm</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LearnerRegrFairfrrm-new"><code>LearnerRegrFairfrrm$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LearnerRegrFairfrrm-clone"><code>LearnerRegrFairfrrm$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="base_learner"><a href='../../mlr3/html/Learner.html#method-Learner-base_learner'><code>mlr3::Learner$base_learner()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="format"><a href='../../mlr3/html/Learner.html#method-Learner-format'><code>mlr3::Learner$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="help"><a href='../../mlr3/html/Learner.html#method-Learner-help'><code>mlr3::Learner$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict"><a href='../../mlr3/html/Learner.html#method-Learner-predict'><code>mlr3::Learner$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict_newdata"><a href='../../mlr3/html/Learner.html#method-Learner-predict_newdata'><code>mlr3::Learner$predict_newdata()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="print"><a href='../../mlr3/html/Learner.html#method-Learner-print'><code>mlr3::Learner$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="reset"><a href='../../mlr3/html/Learner.html#method-Learner-reset'><code>mlr3::Learner$reset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="train"><a href='../../mlr3/html/Learner.html#method-Learner-train'><code>mlr3::Learner$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LearnerRegrFairfrrm-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerRegrFairfrrm$new()</pre></div>


<hr>
<a id="method-LearnerRegrFairfrrm-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerRegrFairfrrm$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Author(s)</h3>

<p>pfistfl
</p>


<h3>References</h3>

<p>Scutari M, Panero F, Proissl M (2021).
&ldquo;Achieving Fairness with a Simple Ridge Penalty.&rdquo;
<em>arXiv preprint arXiv:2105.13817</em>.
</p>


<h3>See Also</h3>

<p><a href="mlr3misc.html#topic+Dictionary">Dictionary</a> of <a href="mlr3.html#topic+Learner">Learners</a>:
<a href="mlr3.html#topic+mlr_learners">mlr3::mlr_learners</a>
</p>
<p>Other fairness_learners: 
<code><a href="#topic+mlr_learners_classif.fairfgrrm">mlr_learners_classif.fairfgrrm</a></code>,
<code><a href="#topic+mlr_learners_classif.fairzlrm">mlr_learners_classif.fairzlrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairnclm">mlr_learners_regr.fairnclm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairzlm">mlr_learners_regr.fairzlm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# stop example failing with warning if package not installed
learner = suppressWarnings(mlr3::lrn("regr.fairfrrm"))
print(learner)

# available parameters:
learner$param_set$ids()
</code></pre>

<hr>
<h2 id='mlr_learners_regr.fairnclm'>Regression Non-convex Fair Regression Learner</h2><span id='topic+mlr_learners_regr.fairnclm'></span><span id='topic+LearnerRegrFairnclm'></span>

<h3>Description</h3>

<p>Calls <a href="fairml.html#topic+nclm">fairml::nclm</a> from package <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>.
</p>


<h3>Details</h3>

<p>Fair regression model based on nonconvex optimization from Komiyama et al. (2018).
Implemented via package <code>fairml</code>.
The 'unfairness' parameter is set to 0.05 as a default.
</p>


<h3>Dictionary</h3>

<p>This <a href="mlr3.html#topic+Learner">Learner</a> can be instantiated via the
<a href="mlr3misc.html#topic+Dictionary">dictionary</a> <a href="mlr3.html#topic+mlr_learners">mlr_learners</a> or with the associated
sugar function <code><a href="mlr3.html#topic+lrn">lrn()</a></code>:
</p>
<div class="sourceCode"><pre>mlr_learners$get("regr.fairnclm")
lrn("regr.fairnclm")
</pre></div>


<h3>Meta Information</h3>


<ul>
<li><p> Task type: &ldquo;regr&rdquo;
</p>
</li>
<li><p> Predict Types: &ldquo;response&rdquo;
</p>
</li>
<li><p> Feature Types: &ldquo;integer&rdquo;, &ldquo;numeric&rdquo;, &ldquo;factor&rdquo;, &ldquo;ordered&rdquo;
</p>
</li>
<li><p> Required Packages: <a href="https://CRAN.R-project.org/package=mlr3"><span class="pkg">mlr3</span></a>, <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>
</p>
</li></ul>



<h3>Parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   Id </td><td style="text-align: left;"> Type </td><td style="text-align: left;"> Default </td><td style="text-align: left;"> Levels </td><td style="text-align: left;"> Range </td>
</tr>
<tr>
 <td style="text-align: left;">
   lambda </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> 0 </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, \infty)</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   save.auxiliary </td><td style="text-align: left;"> logical </td><td style="text-align: left;"> FALSE </td><td style="text-align: left;"> TRUE, FALSE </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
   covfun </td><td style="text-align: left;"> untyped </td><td style="text-align: left;"> stats::cov </td><td style="text-align: left;">  </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
   unfairness </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> - </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, 1]</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Super classes</h3>

<p><code><a href="mlr3.html#topic+Learner">mlr3::Learner</a></code> -&gt; <code><a href="mlr3.html#topic+LearnerRegr">mlr3::LearnerRegr</a></code> -&gt; <code>LearnerRegrFairnclm</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LearnerRegrFairnclm-new"><code>LearnerRegrFairnclm$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LearnerRegrFairnclm-clone"><code>LearnerRegrFairnclm$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="base_learner"><a href='../../mlr3/html/Learner.html#method-Learner-base_learner'><code>mlr3::Learner$base_learner()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="format"><a href='../../mlr3/html/Learner.html#method-Learner-format'><code>mlr3::Learner$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="help"><a href='../../mlr3/html/Learner.html#method-Learner-help'><code>mlr3::Learner$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict"><a href='../../mlr3/html/Learner.html#method-Learner-predict'><code>mlr3::Learner$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict_newdata"><a href='../../mlr3/html/Learner.html#method-Learner-predict_newdata'><code>mlr3::Learner$predict_newdata()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="print"><a href='../../mlr3/html/Learner.html#method-Learner-print'><code>mlr3::Learner$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="reset"><a href='../../mlr3/html/Learner.html#method-Learner-reset'><code>mlr3::Learner$reset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="train"><a href='../../mlr3/html/Learner.html#method-Learner-train'><code>mlr3::Learner$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LearnerRegrFairnclm-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerRegrFairnclm$new()</pre></div>


<hr>
<a id="method-LearnerRegrFairnclm-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerRegrFairnclm$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Author(s)</h3>

<p>pfistfl
</p>


<h3>References</h3>

<p>J K, A T, J H, H S (2018).
&ldquo;Nonconvex Optimization for Regression with Fairness Constraints.&rdquo;
In <em>Proceedings of the 35th International Conference on Machine Learning (ICML), PMLR 80</em>, 2737-2746.
</p>


<h3>See Also</h3>

<p><a href="mlr3misc.html#topic+Dictionary">Dictionary</a> of <a href="mlr3.html#topic+Learner">Learners</a>:
<a href="mlr3.html#topic+mlr_learners">mlr3::mlr_learners</a>
</p>
<p>Other fairness_learners: 
<code><a href="#topic+mlr_learners_classif.fairfgrrm">mlr_learners_classif.fairfgrrm</a></code>,
<code><a href="#topic+mlr_learners_classif.fairzlrm">mlr_learners_classif.fairzlrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairfrrm">mlr_learners_regr.fairfrrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairzlm">mlr_learners_regr.fairzlm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# stop example failing with warning if package not installed
learner = suppressWarnings(mlr3::lrn("regr.fairnclm"))
print(learner)

# available parameters:
learner$param_set$ids()
</code></pre>

<hr>
<h2 id='mlr_learners_regr.fairzlm'>Regression Fair Regression With Covariance Constraints Learner</h2><span id='topic+mlr_learners_regr.fairzlm'></span><span id='topic+LearnerRegrFairzlm'></span>

<h3>Description</h3>

<p>Calls <a href="fairml.html#topic+zlm">fairml::zlm</a> from package <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>.
</p>


<h3>Details</h3>

<p>Fair regression model from Zafar et al., 2019 implemented via package <code>fairml</code>.
The 'unfairness' parameter is set to 0.05 as a default.
The optimized fairness metric is statistical parity.
</p>


<h3>Dictionary</h3>

<p>This <a href="mlr3.html#topic+Learner">Learner</a> can be instantiated via the
<a href="mlr3misc.html#topic+Dictionary">dictionary</a> <a href="mlr3.html#topic+mlr_learners">mlr_learners</a> or with the associated
sugar function <code><a href="mlr3.html#topic+lrn">lrn()</a></code>:
</p>
<div class="sourceCode"><pre>mlr_learners$get("regr.fairzlm")
lrn("regr.fairzlm")
</pre></div>


<h3>Meta Information</h3>


<ul>
<li><p> Task type: &ldquo;regr&rdquo;
</p>
</li>
<li><p> Predict Types: &ldquo;response&rdquo;
</p>
</li>
<li><p> Feature Types: &ldquo;integer&rdquo;, &ldquo;numeric&rdquo;, &ldquo;factor&rdquo;, &ldquo;ordered&rdquo;
</p>
</li>
<li><p> Required Packages: <a href="https://CRAN.R-project.org/package=mlr3"><span class="pkg">mlr3</span></a>, <a href="https://CRAN.R-project.org/package=fairml"><span class="pkg">fairml</span></a>
</p>
</li></ul>



<h3>Parameters</h3>


<table>
<tr>
 <td style="text-align: left;">
   Id </td><td style="text-align: left;"> Type </td><td style="text-align: left;"> Default </td><td style="text-align: left;"> Levels </td><td style="text-align: left;"> Range </td>
</tr>
<tr>
 <td style="text-align: left;">
   unfairness </td><td style="text-align: left;"> numeric </td><td style="text-align: left;"> - </td><td style="text-align: left;">  </td><td style="text-align: left;"> <code class="reqn">[0, 1]</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   intersect </td><td style="text-align: left;"> logical </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> TRUE, FALSE </td><td style="text-align: left;"> - </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Super classes</h3>

<p><code><a href="mlr3.html#topic+Learner">mlr3::Learner</a></code> -&gt; <code><a href="mlr3.html#topic+LearnerRegr">mlr3::LearnerRegr</a></code> -&gt; <code>LearnerRegrFairzlm</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LearnerRegrFairzlm-new"><code>LearnerRegrFairzlm$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LearnerRegrFairzlm-clone"><code>LearnerRegrFairzlm$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="base_learner"><a href='../../mlr3/html/Learner.html#method-Learner-base_learner'><code>mlr3::Learner$base_learner()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="format"><a href='../../mlr3/html/Learner.html#method-Learner-format'><code>mlr3::Learner$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="help"><a href='../../mlr3/html/Learner.html#method-Learner-help'><code>mlr3::Learner$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict"><a href='../../mlr3/html/Learner.html#method-Learner-predict'><code>mlr3::Learner$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="predict_newdata"><a href='../../mlr3/html/Learner.html#method-Learner-predict_newdata'><code>mlr3::Learner$predict_newdata()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="print"><a href='../../mlr3/html/Learner.html#method-Learner-print'><code>mlr3::Learner$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="reset"><a href='../../mlr3/html/Learner.html#method-Learner-reset'><code>mlr3::Learner$reset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Learner" data-id="train"><a href='../../mlr3/html/Learner.html#method-Learner-train'><code>mlr3::Learner$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LearnerRegrFairzlm-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this <a href="R6.html#topic+R6Class">R6</a> class.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerRegrFairzlm$new()</pre></div>


<hr>
<a id="method-LearnerRegrFairzlm-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LearnerRegrFairzlm$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Author(s)</h3>

<p>pfistfl
</p>


<h3>References</h3>

<p>BJ Z, I V, M G, KP G (2019).
&ldquo;Fairness Constraints: a Flexible Approach for Fair Classification.&rdquo;
In <em>Journal of Machine Learning Research, 30</em>, 1-42.
</p>


<h3>See Also</h3>

<p><a href="mlr3misc.html#topic+Dictionary">Dictionary</a> of <a href="mlr3.html#topic+Learner">Learners</a>:
<a href="mlr3.html#topic+mlr_learners">mlr3::mlr_learners</a>
</p>
<p>Other fairness_learners: 
<code><a href="#topic+mlr_learners_classif.fairfgrrm">mlr_learners_classif.fairfgrrm</a></code>,
<code><a href="#topic+mlr_learners_classif.fairzlrm">mlr_learners_classif.fairzlrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairfrrm">mlr_learners_regr.fairfrrm</a></code>,
<code><a href="#topic+mlr_learners_regr.fairnclm">mlr_learners_regr.fairnclm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# stop example failing with warning if package not installed
learner = suppressWarnings(mlr3::lrn("regr.fairzlm"))
print(learner)

# available parameters:
learner$param_set$ids()
</code></pre>

<hr>
<h2 id='mlr_measures_fairness'>Fairness Measures in mlr3</h2><span id='topic+mlr_measures_fairness'></span>

<h3>Description</h3>

<p>Fairness Measures in mlr3
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlr_measures_fairness
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.table</code> (inherits from <code>data.frame</code>) with 18 rows and 2 columns.
</p>


<h3>Value</h3>

<p>A data.table containing an overview of available fairness metrics.
</p>


<h3>Predefined measures</h3>

<p><a href="https://CRAN.R-project.org/package=mlr3fairness"><span class="pkg">mlr3fairness</span></a> comes with a set of predefined fairness measures as listed below.
For full flexibility, <a href="#topic+MeasureFairness">MeasureFairness</a> can be used to construct classical
group fairness measures based on a difference between a performance metrics across groups
by combining a performance measure with an operation for measuring differences.
Furthermore <a href="#topic+MeasureSubgroup">MeasureSubgroup</a> can be used to measure performance in a given subgroup, or alternatively
groupwise_metrics(measure, task) to instantiate a measure for each subgroup in a <a href="mlr3.html#topic+Task">Task</a>.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>key</strong> </td><td style="text-align: left;"> <strong>description</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.acc         </td><td style="text-align: left;"> Absolute differences in accuracy across groups                                                           </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.mse         </td><td style="text-align: left;"> Absolute differences in mean squared error across groups                                                 </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.fnr         </td><td style="text-align: left;"> Absolute differences in false negative rates across groups                                               </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.fpr         </td><td style="text-align: left;"> Absolute differences in false positive rates across groups                                               </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.tnr         </td><td style="text-align: left;"> Absolute differences in true negative rates across groups                                                </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.tpr         </td><td style="text-align: left;"> Absolute differences in true positive rates across groups                                                </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.npv         </td><td style="text-align: left;"> Absolute differences in negative predictive values across groups                                         </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.ppv         </td><td style="text-align: left;"> Absolute differences in positive predictive values across groups                                         </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.fomr        </td><td style="text-align: left;"> Absolute differences in false omission rates across groups                                               </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.fp          </td><td style="text-align: left;"> Absolute differences in false positives across groups                                                    </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.tp          </td><td style="text-align: left;"> Absolute differences in true positives across groups                                                     </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.tn          </td><td style="text-align: left;"> Absolute differences in true negatives across groups                                                     </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.fn          </td><td style="text-align: left;"> Absolute differences in false negatives across groups                                                    </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.cv          </td><td style="text-align: left;"> Difference in positive class prediction, also known as Calders-Wevers gap or demographic parity          </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.eod         </td><td style="text-align: left;"> Equalized Odds: Mean of absolute differences between true positive and false positive rates across groups</td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.pp          </td><td style="text-align: left;"> Predictive Parity: Mean of absolute differences between ppv and npv across groups                        </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.acc_eod=.05 </td><td style="text-align: left;"> Accuracy under equalized odds &lt; 0.05 constraint                                                          </td>
</tr>
<tr>
 <td style="text-align: left;">
fairness.acc_ppv=.05 </td><td style="text-align: left;"> Accuracy under ppv difference &lt; 0.05 constraint
</td>
</tr>

</table>



<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# Predefined measures:
mlr_measures_fairness$key
</code></pre>

<hr>
<h2 id='mlr_measures_positive_probability'>Positive Probability Measure</h2><span id='topic+mlr_measures_positive_probability'></span><span id='topic+MeasurePositiveProbability'></span>

<h3>Description</h3>

<p>Return the probabiliy of a positive prediction, often known as 'Calders-Wevers' gap.
This is defined as count of positive predictions divided by the number of observations.
</p>


<h3>Super class</h3>

<p><code><a href="mlr3.html#topic+Measure">mlr3::Measure</a></code> -&gt; <code>MeasurePositiveProbability</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MeasurePositiveProbability-new"><code>MeasurePositiveProbability$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MeasurePositiveProbability-clone"><code>MeasurePositiveProbability$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="aggregate"><a href='../../mlr3/html/Measure.html#method-Measure-aggregate'><code>mlr3::Measure$aggregate()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="format"><a href='../../mlr3/html/Measure.html#method-Measure-format'><code>mlr3::Measure$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="help"><a href='../../mlr3/html/Measure.html#method-Measure-help'><code>mlr3::Measure$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="print"><a href='../../mlr3/html/Measure.html#method-Measure-print'><code>mlr3::Measure$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3" data-topic="Measure" data-id="score"><a href='../../mlr3/html/Measure.html#method-Measure-score'><code>mlr3::Measure$score()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MeasurePositiveProbability-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a Measure Positive Probability Object
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasurePositiveProbability$new()</pre></div>


<hr>
<a id="method-MeasurePositiveProbability-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MeasurePositiveProbability$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
# Create Positive Probability Measure
t = tsk("adult_train")
learner = lrn("classif.rpart", cp = .01)
learner$train(t)
measure = msr("classif.pp")
predictions = learner$predict(t)
predictions$score(measure, task = t)
</code></pre>

<hr>
<h2 id='mlr_pipeops_equalized_odds'>Equalized Odds Debiasing</h2><span id='topic+mlr_pipeops_equalized_odds'></span><span id='topic+PipeOpEOd'></span>

<h3>Description</h3>

<p>Fairness post-processing method to achieve equalized odds fairness.
Works by randomly flipping a subset of predictions with pre-computed
probabilities in order to satisfy equalized odds constraints.<br />
NOTE: Carefully assess the correct privileged group.
</p>


<h3>Format</h3>

<p><a href="R6.html#topic+R6Class">R6Class</a> object inheriting from <code><a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a></code>/<code><a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a></code>.
</p>


<h3>Construction</h3>

<div class="sourceCode"><pre>PipeOpEOd*$new(id = "eod", param_vals = list())
</pre></div>

<ul>
<li> <p><code>id</code> (<code style="white-space: pre;">&#8288;character(1))&#8288;</code>.
</p>
</li>
<li> <p><code>param_vals</code> (<code>list()</code>)
</p>
</li></ul>



<h3>Input and Output Channels</h3>

<p>Input and output channels are inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>. Instead of a <code><a href="mlr3.html#topic+Task">Task</a></code>, a
<a href="mlr3.html#topic+TaskClassif">TaskClassif</a> is used as input and output during training and prediction.
</p>
<p>The output during training is the input <a href="mlr3.html#topic+Task">Task</a>. The output during prediction is
a <a href="mlr3.html#topic+PredictionClassif">PredictionClassif</a> with partially flipped predictions.
</p>


<h3>State</h3>

<p>The <code style="white-space: pre;">&#8288;$state&#8288;</code> is a named <code>list</code> with the <code style="white-space: pre;">&#8288;$state&#8288;</code> elements inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>.
</p>


<h3>Parameters</h3>


<ul>
<li> <p><code>alpha</code> (<code>numeric()</code>): A number between 0 (no debiasing) and 1 (full debiasing).
Controls the debiasing strength by multiplying the flipping probabilities with alpha.
</p>
</li>
<li> <p><code>privileged</code> (<code>character()</code>): The privileged group.
</p>
</li></ul>



<h3>Fields</h3>

<p>Only fields inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>/<code><a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a></code>.
</p>


<h3>Methods</h3>

<p>Methods inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>/<a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a>.
</p>


<h3>Super class</h3>

<p><code><a href="mlr3pipelines.html#topic+PipeOp">mlr3pipelines::PipeOp</a></code> -&gt; <code>PipeOpEOd</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-PipeOpEOd-new"><code>PipeOpEOd$new()</code></a>
</p>
</li>
<li> <p><a href="#method-PipeOpEOd-clone"><code>PipeOpEOd$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="help"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-help'><code>mlr3pipelines::PipeOp$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="predict"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-predict'><code>mlr3pipelines::PipeOp$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="print"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-print'><code>mlr3pipelines::PipeOp$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="train"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-train'><code>mlr3pipelines::PipeOp$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-PipeOpEOd-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this [R6][R6::R6Class][PipeOp] R6 class.
</p>


<h5>Usage</h5>

<div class="r"><pre>PipeOpEOd$new(id = "EOd", param_vals = list())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p><code>character</code> <br />
The PipeOps identifier in the PipeOps library.</p>
</dd>
<dt><code>param_vals</code></dt><dd><p><code>list</code> <br />
The parameter values to be set. See <code>Parameters</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-PipeOpEOd-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>PipeOpEOd$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Hardt M, Price E, Srebro N (2016).
&ldquo;Equality of Opportunity in Supervised Learning.&rdquo;
In <em>Advances in Neural Information Processing Systems</em>, volume 29, 3315&ndash;3323.
<a href="https://papers.nips.cc/paper/2016/file/9d2682367c3935defcb1f9e247a97c0d-Paper.pdf">https://papers.nips.cc/paper/2016/file/9d2682367c3935defcb1f9e247a97c0d-Paper.pdf</a>.
</p>
<p>Pleiss, Geoff, Raghavan, Manish, Wu, Felix, Kleinberg, Jon, Weinberger, Q K (2017).
&ldquo;On Fairness and Calibration.&rdquo;
In Guyon I, Luxburg UV, Bengio S, Wallach H, Fergus R, Vishwanathan S, Garnett R (eds.), <em>Advances in Neural Information Processing Systems</em>, volume 30.
<a href="https://proceedings.neurips.cc/paper/2017/file/b8b9c74ac526fffbeb2d39ab038d1cd7-Paper.pdf">https://proceedings.neurips.cc/paper/2017/file/b8b9c74ac526fffbeb2d39ab038d1cd7-Paper.pdf</a>.
</p>


<h3>See Also</h3>

<p>https://mlr3book.mlr-org.com/list-pipeops.html
</p>
<p>Other PipeOps: 
<code><a href="#topic+mlr_pipeops_explicit_pta">mlr_pipeops_explicit_pta</a></code>,
<code><a href="#topic+mlr_pipeops_reweighing">mlr_pipeops_reweighing</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
library("mlr3pipelines")

eod = po("EOd")
learner_po = po("learner_cv",
  learner = lrn("classif.rpart"),
  resampling.method = "insample"
)

task = tsk("compas")
graph = learner_po %&gt;&gt;% eod
glrn = GraphLearner$new(graph)
glrn$train(task)

# On a Task
glrn$predict(task)

# On newdata
glrn$predict_newdata(task$data(cols = task$feature_names))
</code></pre>

<hr>
<h2 id='mlr_pipeops_explicit_pta'>PipeOpExplicitPta</h2><span id='topic+mlr_pipeops_explicit_pta'></span><span id='topic+PipeOpExplicitPta'></span>

<h3>Description</h3>

<p>Turns the column with column role 'pta' into an explicit separate column prefixed with &quot;..<em>internal_pta</em>&quot;.
This keeps it from getting changed or adapted by subsequent pipelines that operate on the feature pta.
</p>


<h3>Format</h3>

<p><a href="R6.html#topic+R6Class">R6Class</a> object inheriting from <code><a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a></code>/<code><a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a></code>.
</p>


<h3>Construction</h3>

<div class="sourceCode"><pre>PipeOpExplicitPta$new(id = "reweighing", param_vals = list())
</pre></div>

<ul>
<li> <p><code>id</code> (<code>character(1)</code>).
</p>
</li>
<li> <p><code>param_vals</code> (<code>list()</code>)
</p>
</li></ul>



<h3>Input and Output Channels</h3>

<p>Input and output channels are inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>. Instead of a <a href="mlr3.html#topic+Task">Task</a>, a
<a href="mlr3.html#topic+TaskClassif">TaskClassif</a> is used as input and output during training and prediction.
</p>
<p>The output during training is the input <a href="mlr3.html#topic+Task">Task</a> with added weights column according
to target class. The output during prediction is the unchanged input.
</p>


<h3>State</h3>

<p>The <code style="white-space: pre;">&#8288;$state&#8288;</code> is a named <code>list</code> with the <code style="white-space: pre;">&#8288;$state&#8288;</code> elements inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>.
</p>


<h3>Parameters</h3>

<p>The PipeOp does not have any hyperparameters.
</p>


<h3>Internals</h3>

<p>Copies the existing pta column to a new column.
</p>


<h3>Fields</h3>

<p>Only fields inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>/<code><a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a></code>.
</p>


<h3>Methods</h3>

<p>Methods inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>/<a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a>.
</p>


<h3>Super classes</h3>

<p><code><a href="mlr3pipelines.html#topic+PipeOp">mlr3pipelines::PipeOp</a></code> -&gt; <code><a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">mlr3pipelines::PipeOpTaskPreproc</a></code> -&gt; <code>PipeOpExplicitPta</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-PipeOpExplicitPta-new"><code>PipeOpExplicitPta$new()</code></a>
</p>
</li>
<li> <p><a href="#method-PipeOpExplicitPta-clone"><code>PipeOpExplicitPta$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="help"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-help'><code>mlr3pipelines::PipeOp$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="predict"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-predict'><code>mlr3pipelines::PipeOp$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="print"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-print'><code>mlr3pipelines::PipeOp$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="train"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-train'><code>mlr3pipelines::PipeOp$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-PipeOpExplicitPta-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this [R6][R6::R6Class][PipeOp] R6 class.
</p>


<h5>Usage</h5>

<div class="r"><pre>PipeOpExplicitPta$new(id = "explicit_pta", param_vals = list())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p><code>character</code> <br />
The PipeOps identifier in the PipeOps library.</p>
</dd>
<dt><code>param_vals</code></dt><dd><p><code>list</code> <br />
The parameter values to be set. See <code>Parameters</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-PipeOpExplicitPta-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>PipeOpExplicitPta$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>See Also</h3>

<p>https://mlr3book.mlr-org.com/list-pipeops.html
</p>
<p>Other PipeOps: 
<code><a href="#topic+mlr_pipeops_equalized_odds">mlr_pipeops_equalized_odds</a></code>,
<code><a href="#topic+mlr_pipeops_reweighing">mlr_pipeops_reweighing</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
library("mlr3pipelines")
epta = po("explicit_pta")
new = epta$train(list(tsk("adult_train")))
</code></pre>

<hr>
<h2 id='mlr_pipeops_reweighing'>Reweighing to balance disparate impact metric</h2><span id='topic+mlr_pipeops_reweighing'></span><span id='topic+PipeOpReweighingWeights'></span><span id='topic+PipeOpReweighingOversampling'></span>

<h3>Description</h3>

<p>Adjusts class balance and protected group balance in order to achieve fair(er) outcomes.
</p>


<h3>Format</h3>

<p><a href="R6.html#topic+R6Class">R6Class</a> object inheriting from <code><a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a></code>/<code><a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a></code>.
</p>


<h3>PipeOpReweighingWeights</h3>

<p>Adds a class weight column to the <a href="mlr3.html#topic+Task">Task</a> that different <code><a href="mlr3.html#topic+Learner">Learner</a></code>s
may be using. In case initial weights are present, those are multiplied with new weights.
Caution: Only fairness tasks are supported. Which means tasks need to have protected field.
<code>tsk$col_roles$pta</code>.
</p>


<h3>PipeOpReweighingOversampling</h3>

<p>Oversamples a <a href="mlr3.html#topic+Task">Task</a> for more balanced ratios in subgroups and protected groups.
Can be used if a learner does not support weights.
Caution: Only fairness tasks are supported. Which means tasks need to have protected field.
<code>tsk$col_roles$pta</code>.
</p>


<h3>Construction</h3>

<div class="sourceCode"><pre>PipeOpReweighing*$new(id = "reweighing", param_vals = list())
</pre></div>

<ul>
<li> <p><code>id</code> (<code>character(1)</code>).
</p>
</li>
<li> <p><code>param_vals</code> (<code>list()</code>)
</p>
</li></ul>



<h3>Input and Output Channels</h3>

<p>Input and output channels are inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>. Instead of a <code><a href="mlr3.html#topic+Task">Task</a></code>, a
<a href="mlr3.html#topic+TaskClassif">TaskClassif</a> is used as input and output during training and prediction.
</p>
<p>The output during training is the input <a href="mlr3.html#topic+Task">Task</a> with added weights column according
to target class. The output during prediction is the unchanged input.
</p>


<h3>State</h3>

<p>The <code style="white-space: pre;">&#8288;$state&#8288;</code> is a named <code>list</code> with the <code style="white-space: pre;">&#8288;$state&#8288;</code> elements inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>.
</p>


<h3>Parameters</h3>


<ul>
<li> <p><code>alpha</code> (<code>numeric()</code>): A number between 0 (no debiasing) and 1 (full debiasing).
</p>
</li></ul>



<h3>Internals</h3>

<p>Introduces, or overwrites, the &quot;weights&quot; column in the <a href="mlr3.html#topic+Task">Task</a>.
However, the <a href="mlr3.html#topic+Learner">Learner</a> method needs to
respect weights for this to have an effect.
</p>
<p>The newly introduced column is named <code>reweighing.WEIGHTS</code>; there will be a naming conflict if this
column already exists and is <em>not</em> a weight column itself.
</p>


<h3>Fields</h3>

<p>Only fields inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>/<code><a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a></code>.
</p>


<h3>Methods</h3>

<p>Methods inherited from <a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">PipeOpTaskPreproc</a>/<code><a href="mlr3pipelines.html#topic+PipeOp">PipeOp</a></code>.
</p>


<h3>Super classes</h3>

<p><code><a href="mlr3pipelines.html#topic+PipeOp">mlr3pipelines::PipeOp</a></code> -&gt; <code><a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">mlr3pipelines::PipeOpTaskPreproc</a></code> -&gt; <code>PipeOpReweighingWeights</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-PipeOpReweighingWeights-new"><code>PipeOpReweighingWeights$new()</code></a>
</p>
</li>
<li> <p><a href="#method-PipeOpReweighingWeights-clone"><code>PipeOpReweighingWeights$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="help"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-help'><code>mlr3pipelines::PipeOp$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="predict"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-predict'><code>mlr3pipelines::PipeOp$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="print"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-print'><code>mlr3pipelines::PipeOp$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="train"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-train'><code>mlr3pipelines::PipeOp$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-PipeOpReweighingWeights-new"></a>



<h4>Method <code>new()</code></h4>

<p>Creates a new instance of this [R6][R6::R6Class][PipeOp] R6 class.
</p>


<h5>Usage</h5>

<div class="r"><pre>PipeOpReweighingWeights$new(id = "reweighing_wts", param_vals = list())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p><code>character</code> <br />
The PipeOps identifier in the PipeOps library.</p>
</dd>
<dt><code>param_vals</code></dt><dd><p><code>list</code> <br />
The parameter values to be set.
</p>

<ul>
<li><p> alpha: controls the proportion between initial weight (1 if non existing) and reweighing weight.
Defaults to 1.
Here is how it works:
new_weight = (1 - alpha) * 1 + alpha x reweighing_weight
final_weight = old_weight * new_weight
</p>
</li></ul>
</dd>
</dl>

</div>


<hr>
<a id="method-PipeOpReweighingWeights-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>PipeOpReweighingWeights$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Super classes</h3>

<p><code><a href="mlr3pipelines.html#topic+PipeOp">mlr3pipelines::PipeOp</a></code> -&gt; <code><a href="mlr3pipelines.html#topic+PipeOpTaskPreproc">mlr3pipelines::PipeOpTaskPreproc</a></code> -&gt; <code>PipeOpReweighingOversampling</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-PipeOpReweighingOversampling-new"><code>PipeOpReweighingOversampling$new()</code></a>
</p>
</li>
<li> <p><a href="#method-PipeOpReweighingOversampling-clone"><code>PipeOpReweighingOversampling$clone()</code></a>
</p>
</li></ul>



<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="help"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-help'><code>mlr3pipelines::PipeOp$help()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="predict"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-predict'><code>mlr3pipelines::PipeOp$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="print"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-print'><code>mlr3pipelines::PipeOp$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="mlr3pipelines" data-topic="PipeOp" data-id="train"><a href='../../mlr3pipelines/html/PipeOp.html#method-PipeOp-train'><code>mlr3pipelines::PipeOp$train()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-PipeOpReweighingOversampling-new"></a>



<h4>Method <code>new()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>PipeOpReweighingOversampling$new(id = "reweighing_os", param_vals = list())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>&lsquo;character&rsquo; <br />
The PipeOp's id.</p>
</dd>
<dt><code>param_vals</code></dt><dd><p>&lsquo;list&rsquo; <br />
A list of parameter values.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-PipeOpReweighingOversampling-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>PipeOpReweighingOversampling$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>References</h3>

<p>Kamiran, Faisal, Calders, Toon (2012).
&ldquo;Data preprocessing techniques for classification without discrimination.&rdquo;
<em>Knowledge and Information Systems</em>, <b>33</b>(1), 1&ndash;33.
</p>


<h3>See Also</h3>

<p>https://mlr3book.mlr-org.com/list-pipeops.html
</p>
<p>Other PipeOps: 
<code><a href="#topic+mlr_pipeops_equalized_odds">mlr_pipeops_equalized_odds</a></code>,
<code><a href="#topic+mlr_pipeops_explicit_pta">mlr_pipeops_explicit_pta</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
library("mlr3pipelines")

reweighing = po("reweighing_wts")
learner_po = po("learner", learner = lrn("classif.rpart"))

data = tsk("adult_train")
graph = reweighing %&gt;&gt;% learner_po
glrn = GraphLearner$new(graph)
glrn$train(data)
tem = glrn$predict(data)
tem$confusion
</code></pre>

<hr>
<h2 id='report_datasheet'>Create a Datasheet for Documenting a Dataset</h2><span id='topic+report_datasheet'></span>

<h3>Description</h3>

<p>Creates a new <a href="https://CRAN.R-project.org/package=rmarkdown"><span class="pkg">rmarkdown</span></a> template with a skeleton questionnaire for dataset documentation.
Uses the awesome markdown template created by Chris Garbin
<a href="https://github.com/fau-masters-collected-works-cgarbin/model-card-template">from Github</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>report_datasheet(filename = "datasheet.Rmd", edit = FALSE, build = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="report_datasheet_+3A_filename">filename</code></td>
<td>
<p>(<code>character(1)</code>)<br />
File path or name for new file that should be created.</p>
</td></tr>
<tr><td><code id="report_datasheet_+3A_edit">edit</code></td>
<td>
<p>(<code>logical(1)</code>)<br />
<code>TRUE</code> to edit the template immediately.</p>
</td></tr>
<tr><td><code id="report_datasheet_+3A_build">build</code></td>
<td>
<p>(<code>logical(1)</code>)<br />
Should the report be built after creation? Initialized to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the path to the newly created file(s).
</p>


<h3>References</h3>

<p>Gebru, Timnit, Morgenstern, Jamie, Vecchione, Briana, Vaughan, Wortman J, Wallach, Hanna, III D, Hal, Crawford, Kate (2018).
&ldquo;Datasheets for datasets.&rdquo;
<em>arXiv preprint arXiv:1803.09010</em>.
</p>


<h3>See Also</h3>

<p>Other fairness_reports: 
<code><a href="#topic+report_fairness">report_fairness</a>()</code>,
<code><a href="#topic+report_modelcard">report_modelcard</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  report_file = tempfile()
  report_datasheet(report_file)
</code></pre>

<hr>
<h2 id='report_fairness'>Create a Fairness Report</h2><span id='topic+report_fairness'></span>

<h3>Description</h3>

<p>Creates a new <a href="https://CRAN.R-project.org/package=rmarkdown"><span class="pkg">rmarkdown</span></a> template with a skeleton of  reported metrics and visualizations.
Uses the awesome markdown template created by Chris Garbin
<a href="https://github.com/fau-masters-collected-works-cgarbin/model-card-template">from Github</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>report_fairness(
  filename = "fairness_report.Rmd",
  objects,
  edit = FALSE,
  check_objects = FALSE,
  build = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="report_fairness_+3A_filename">filename</code></td>
<td>
<p>(<code>character(1)</code>)<br />
File path or name for new file that should be created.</p>
</td></tr>
<tr><td><code id="report_fairness_+3A_objects">objects</code></td>
<td>
<p>(<code>list()</code>)<br />
A named list of objects required for the fairness report.
Objects are saved as <code style="white-space: pre;">&#8288;&lt;name&gt;.rds&#8288;</code> in the new folder created for the report.
</p>

<ul>
<li> <p><code>task</code> :: The <code><a href="mlr3.html#topic+Task">Task</a></code> a report should be created for.
</p>
</li>
<li> <p><code>resample_result</code> ::  A <a href="mlr3.html#topic+ResampleResult">mlr3::ResampleResult</a> result to be analyzed.
</p>
</li>
<li> <p><code>...</code> :: any other objects passed on for the report.
</p>
</li></ul>
</td></tr>
<tr><td><code id="report_fairness_+3A_edit">edit</code></td>
<td>
<p>(<code>logical(1)</code>)<br />
<code>TRUE</code> to edit the template immediately.</p>
</td></tr>
<tr><td><code id="report_fairness_+3A_check_objects">check_objects</code></td>
<td>
<p>(<code>logical(1)</code>)<br />
Should items in <code>objects</code> be checked? If <code>FALSE</code>, no checks on <code>object</code> are performed.</p>
</td></tr>
<tr><td><code id="report_fairness_+3A_build">build</code></td>
<td>
<p>(<code>logical(1)</code>)<br />
Should the report be built after creation? Initialized to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the path to the newly created file(s).
</p>


<h3>See Also</h3>

<p>Other fairness_reports: 
<code><a href="#topic+report_datasheet">report_datasheet</a>()</code>,
<code><a href="#topic+report_modelcard">report_modelcard</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  library("mlr3")
  report_file = tempfile()
  task = tsk("compas")
  learner = lrn("classif.rpart", predict_type = "prob")
  rr = resample(task, learner, rsmp("cv", folds = 3L))
  report_fairness(report_file, list(task = task, resample_result = rr))
</code></pre>

<hr>
<h2 id='report_modelcard'>Create a Modelcard</h2><span id='topic+report_modelcard'></span>

<h3>Description</h3>

<p>Creates a new <a href="https://CRAN.R-project.org/package=rmarkdown"><span class="pkg">rmarkdown</span></a> template with a skeleton questionnaire for a model card.
Uses the awesome markdown template created by Chris Garbin
<a href="https://github.com/fau-masters-collected-works-cgarbin/model-card-template">from Github</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>report_modelcard(filename = "modelcard.Rmd", edit = FALSE, build = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="report_modelcard_+3A_filename">filename</code></td>
<td>
<p>(<code>character(1)</code>)<br />
File path or name for new file that should be created.</p>
</td></tr>
<tr><td><code id="report_modelcard_+3A_edit">edit</code></td>
<td>
<p>(<code>logical(1)</code>)<br />
<code>TRUE</code> to edit the template immediately.</p>
</td></tr>
<tr><td><code id="report_modelcard_+3A_build">build</code></td>
<td>
<p>(<code>logical(1)</code>)<br />
Should the report be built after creation? Initialized to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the path to the newly created file(s).
</p>


<h3>References</h3>

<p>Mitchell, Margaret, Wu, Simone, Zaldivar, Andrew, Barnes, Parker, Vasserman, Lucy, Hutchinson, Ben, Spitzer, Elena, Raji, Deborah I, Gebru, Timnit (2019).
&ldquo;Model cards for model reporting.&rdquo;
In <em>Proceedings of the conference on fairness, accountability, and transparency</em>, 220&ndash;229.
</p>


<h3>See Also</h3>

<p>Other fairness_reports: 
<code><a href="#topic+report_datasheet">report_datasheet</a>()</code>,
<code><a href="#topic+report_fairness">report_fairness</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  report_file = tempfile()
  report_modelcard(report_file)
</code></pre>

<hr>
<h2 id='task_summary'>Task summary for fairness report</h2><span id='topic+task_summary'></span>

<h3>Description</h3>

<p>Create the general task documentation in a dataframe for fairness report.
The information includes
</p>

<ul>
<li><p> Audit Date
</p>
</li>
<li><p> Task Name
</p>
</li>
<li><p> Number of observations
</p>
</li>
<li><p> Number of features
</p>
</li>
<li><p> Target Name
</p>
</li>
<li><p> Feature Names
</p>
</li>
<li><p> The Protected Attribute
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>task_summary(task)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="task_summary_+3A_task">task</code></td>
<td>
<p><a href="mlr3.html#topic+Task">Task</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> containing the reported information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlr3")
task_summary(tsk("adult_train"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
