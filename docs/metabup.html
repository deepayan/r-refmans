<!DOCTYPE html><html lang="en"><head><title>Help for package metabup</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {metabup}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#metabup'><p>Bayesian meta-analysis using basic uncertain pooling.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian Meta-Analysis Using Basic Uncertain Pooling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains functions that allow Bayesian meta-analysis (1) with binomial data, counts(y) and total counts (n) or, (2) with user-supplied point estimates and associated variances.   Case (1) provides an analysis based on the logit transformation of the sample proportion. This methodology is also appropriate for combining data from sample surveys and related sources. The functions can  calculate the corresponding similarity matrix. More details can be found in Cahoy and Sedransk (2023), Cahoy and Sedransk (2022)  &lt;<a href="https://doi.org/10.1007%2Fs42519-018-0027-2">doi:10.1007/s42519-018-0027-2</a>&gt;, Evans and Sedransk (2001) &lt;<a href="https://doi.org/10.1093%2Fbiomet%2F88.3.643">doi:10.1093/biomet/88.3.643</a>&gt;, and Malec and Sedransk (1992) &lt;<a href="https://doi.org/10.1093%2Fbiomet%2F79.3.593">doi:10.1093/biomet/79.3.593</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, ggplot2, partitions</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-13 18:59:24 UTC; cahoyd</td>
</tr>
<tr>
<td>Author:</td>
<td>Dexter Cahoy [aut, cre],
  Joseph Sedransk [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dexter Cahoy &lt;dexter.cahoy@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-17 06:20:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='metabup'>Bayesian meta-analysis using basic uncertain pooling.</h2><span id='topic+metabup'></span>

<h3>Description</h3>

<p>Bayesian meta-analysis analysis  (1) with binomial data, counts(y) and total counts (n) or, (2) with user-supplied estimates and associated variances.  Case (1) provides an analysis based on the logit transformation of the sample proportion. This methodology is also appropriate for combining data from sample surveys and related sources.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metabup(y, nv, type = NULL, d2max = NULL, ngrid2 = NULL, N = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="metabup_+3A_y">y</code></td>
<td>
<p>vector of counts or effect estimates.</p>
</td></tr>
<tr><td><code id="metabup_+3A_nv">nv</code></td>
<td>
<p>vector of total counts n (if y's are counts) or variances associated with the estimates(if y's are estimates).</p>
</td></tr>
<tr><td><code id="metabup_+3A_type">type</code></td>
<td>
<p>assumes a single value: 1 (counts and total counts as inputs) or 2 (estimates and variances as inputs). Default is type 2.</p>
</td></tr>
<tr><td><code id="metabup_+3A_d2max">d2max</code></td>
<td>
<p>maximum value of the prior variance delta^2  to be used in the grid sampling. Default is .Machine$double.xmin.</p>
</td></tr>
<tr><td><code id="metabup_+3A_ngrid2">ngrid2</code></td>
<td>
<p>number of grid points for the prior variance. Default is 1000 if d2max &gt; .Machine$double.xmin.</p>
</td></tr>
<tr><td><code id="metabup_+3A_n">N</code></td>
<td>
<p>sample size to be drawn from the partition-delta^2 grid. Default is 1000.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list consisting of the sample and posterior effect estimates and standard deviations, the partitions with the largest posterior probabilities, and the similarity matrix.
</p>


<h3>References</h3>

<p>Cahoy and Sedransk (2023). <em>Combining data from surveys and related sources.</em>  Surv. Methodol., To appear.
</p>
<p>Cahoy and Sedransk (2022). <em>Bayesian inference for asymptomatic COVID-19 infection rates.</em>  Stat Med, 41(16):3131-3148,
&lt;doi:10.1002/sim.9408&gt;
</p>
<p>Evans and Sedransk (2001). <em>Combining data from experiments that may be similar.</em> Biometrika, 88(3):643-656,
&lt;doi:10.1093/biomet/88.3.643&gt;
</p>
<p>Malec and Sedransk (1992). <em>Bayesian methodology for combining the results from different experiments when the specifications for pooling are uncertain</em>. Biometrika, 79(3):593-601,
&lt;doi:10.1093/biomet/79.3.593&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

y=c(4, 18, 40, 130)
nv=c(13, 83, 60,166)
require(partitions)
out=metabup(y, nv, type=1)

#estimates
out[1]
#the partitions with the largest posterior p(g|y)
out[2:3]

#plotting similarity matrix
require(ggplot2)
L=length(y)
indmat=matrix(unlist(out[4]),ncol=L, byrow=FALSE)
psingle&lt;-rep(0,L)
sim_mat&lt;-indmat +t(indmat)
diag(sim_mat)&lt;-psingle #rep(1,L)
xy=expand.grid(x=1:L, y=1:L)
index=as.vector( sim_mat)
mat_data =  cbind(xy,index)
brlab&lt;-round(seq(0, max(sim_mat)+0.05, length.out=4),2)
p &lt;- ggplot(data = mat_data) +                        # Set data
geom_tile(aes(x = x, y = y, fill =index)) +
scale_fill_gradientn(colours=rev(heat.colors(5)),na.value = "transparent",
                      breaks=brlab,labels=brlab,
                      limits=c(0,max(sim_mat)+0.075))+
scale_x_continuous(name="Study Number", breaks=1:L,   limits=c(0.5,+L+0.5)) +
scale_y_continuous(name="", breaks=1:L,  limits=c(0.5,L+0.5))
p + theme(axis.title  = element_text() )



ph=c(31, 21.7, 66.7,78.3)/100
y=log(ph/(1-ph))
n=c(13, 83, 60,166)
nv=1/(ph*(1-ph)*n)  #variance
require(partitions)
out=metabup(y, nv)

#estimates
out[1]
#the partitions with the largest posterior p(g|y)
out[2:3]

#plotting similarity matrix
require(ggplot2)
L=length(y)
indmat=matrix(unlist(out[4]),ncol=L, byrow=FALSE)
psingle&lt;-rep(0,L)
sim_mat&lt;-indmat +t(indmat)
diag(sim_mat)&lt;-psingle #rep(1,L)
xy=expand.grid(x=1:L, y=1:L)
index=as.vector( sim_mat)
mat_data =  cbind(xy,index)
brlab&lt;-round(seq(0, max(sim_mat)+0.05, length.out=4),2)
p &lt;- ggplot(data = mat_data) +                        # Set data
geom_tile(aes(x = x, y = y, fill =index)) +
scale_fill_gradientn(colours=rev(heat.colors(5)),na.value = "transparent",
                      breaks=brlab,labels=brlab,
                      limits=c(0,max(sim_mat)+0.075))+
scale_x_continuous(name="Study Number", breaks=1:L,   limits=c(0.5,+L+0.5)) +
scale_y_continuous(name="", breaks=1:L,  limits=c(0.5,L+0.5))
p + theme(axis.title  = element_text() )



</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
