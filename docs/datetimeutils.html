<!DOCTYPE html><html><head><title>Help for package datetimeutils</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {datetimeutils}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#business_days'>
<p>Business Days</p></a></li>
<li><a href='#convert_date'>
<p>Convert Various Formats to Date</p></a></li>
<li><a href='#convert_tz'>
<p>Convert a Timestamp from one Timezone to Another</p></a></li>
<li><a href='#date1904'>
<p>Is File Origin 1904?</p></a></li>
<li><a href='#datetimeutils-package'>
<p>Utilities for Dates and Times</p></a></li>
<li><a href='#end_of_period'>
<p>Handling and Manipulating Dates and Times</p></a></li>
<li><a href='#guess_datetime'>
<p>Guess Timestamp Format</p></a></li>
<li><a href='#last_weekday'>
<p>Functions for Computing Days of the Week</p></a></li>
<li><a href='#month.name.de'>
<p>Non-English Month Names and Abbreviations</p></a></li>
<li><a href='#nth_day'>
<p>Compute Reference Dates</p></a></li>
<li><a href='#rfc822t'>
<p>Format Date and Time as Described in RFC 822</p></a></li>
<li><a href='#roundPOSIXt'>
<p>Round POSIXt Objects to Specified Interval</p></a></li>
<li><a href='#timegrid'>
<p>POSIXct Time Grid</p></a></li>
<li><a href='#tznames'>
<p>Timezone Names</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Utilities for Dates and Times</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6-4</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-04-01</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Enrico Schumann &lt;es@enricoschumann.net&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Utilities for handling dates and times, such
   as selecting particular days of the week or month,
   formatting timestamps as required by RSS feeds, or
   converting timestamp representations of other software
   (such as 'MATLAB' and 'Excel') to R. The package is
   lightweight (no dependencies, pure R implementations) and
   relies only on R's standard classes to represent dates
   and times ('Date' and 'POSIXt'); it aims to provide
   efficient implementations, through vectorisation and the
   use of R's native numeric representations of timestamps
   where possible.</td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://enricoschumann.net/R/packages/datetimeutils/">http://enricoschumann.net/R/packages/datetimeutils/</a> ,
<a href="https://git.sr.ht/~enricoschumann/datetimeutils">https://git.sr.ht/~enricoschumann/datetimeutils</a> ,
<a href="https://github.com/enricoschumann/datetimeutils">https://github.com/enricoschumann/datetimeutils</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-01 07:26:35 UTC; es19</td>
</tr>
<tr>
<td>Author:</td>
<td>Enrico Schumann <a href="https://orcid.org/0000-0001-7601-6576"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Unicode, Inc. [dtc, cph] (source of timezone names in 'tznames')</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-01 07:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='business_days'>
Business Days
</h2><span id='topic+is_weekend'></span><span id='topic+is_businessday'></span><span id='topic+next_businessday'></span><span id='topic+next_bday'></span><span id='topic+previous_businessday'></span><span id='topic+prev_bday'></span>

<h3>Description</h3>

<p>Check whether a timestamp of class <code><a href="base.html#topic+Date">Date</a></code> or
<code><a href="base.html#topic+POSIXt">POSIXt</a></code> is a business day; compute past or future
business days.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_businessday(x, holidays = NULL)
is_weekend(x)
previous_businessday(x, holidays = NULL, shift = -1)
prev_bday(x, holidays = NULL, shift = -1)
next_businessday(x, holidays = NULL, shift = 1)
next_bday(x, holidays = NULL, shift = 1)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="business_days_+3A_x">x</code></td>
<td>

<p>a vector of class <code>Date</code> or <code>POSIXct</code>
</p>
</td></tr>
<tr><td><code id="business_days_+3A_holidays">holidays</code></td>
<td>

<p>A vector of class <code><a href="base.html#topic+Date">Date</a></code>, or a character vector in a
format that is understood by <code><a href="base.html#topic+as.Date">as.Date</a></code>, or anything that
can be coerced to class <code>Date</code> by <code><a href="base.html#topic+as.Date">as.Date</a></code> (e.g.
<code><a href="base.html#topic+POSIXt">POSIXt</a></code>).
</p>
</td></tr>
<tr><td><code id="business_days_+3A_shift">shift</code></td>
<td>

<p>integer
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>is_weekend</code> checks whether a given date is a Saturday or Sunday.
</p>
<p><code>previous_businessday</code> takes a <code><a href="base.html#topic+Date">Date</a></code> <code>x</code> and
returns the last non-weekend day before. When <code>shift</code> is less
than -1, the function evaluates to the <code>shift</code>-th previous
day. When <code>shift</code> is 0, the function will return <code>x</code> if it
is a business day, else the previous business
day. <code>next_businessday</code> works analogously. There are shorter-named
versions <code>next_bday</code> and <code>prev_bday</code>.
</p>


<h3>Value</h3>

<p>Logical.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8&ndash;12, 2001.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+DateTimeClasses">DateTimeClasses</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_weekend(Sys.Date())
previous_businessday(Sys.Date())
next_businessday(Sys.Date())

</code></pre>

<hr>
<h2 id='convert_date'>
Convert Various Formats to Date
</h2><span id='topic+convert_date'></span>

<h3>Description</h3>

<p>Convert dates in external formats (e.g. from MATLAB) to Date or POSIXct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_date(x, type, fraction = FALSE, tz = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_date_+3A_x">x</code></td>
<td>

<p>numeric
</p>
</td></tr>
<tr><td><code id="convert_date_+3A_type">type</code></td>
<td>

<p>character: <code>"excel"</code>, <code>"excel1904"</code>, <code>"matlab"</code> and
<code>"spss"</code>/<code>"pspp"</code> are supported.
</p>
</td></tr>
<tr><td><code id="convert_date_+3A_fraction">fraction</code></td>
<td>

<p>logical: should fractional dates (i.e. times) be used?  Default is
<code>FALSE</code>.
</p>
</td></tr>
<tr><td><code id="convert_date_+3A_tz">tz</code></td>
<td>

<p>character: if fraction is TRUE, then what time zone is to be
assumed?  Default is <code>""</code>, i.e. the local time zone.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Convert the numeric representation of a date to class
<code><a href="base.html#topic+Date">Date</a></code>.  Note that different versions of Excel use
different origins: 1900-01-01 or 1904-01-01. For the latter, set
<code>type</code> to <code>"excel1904"</code>.
For the former, <code>convert_date</code> uses 1899-12-31 because Excel
considers 1900 a leap year (which it is not).
So dates before 1 March 1900 are probably wrong (off by one day).
</p>


<h3>Value</h3>

<p>A vector of class <code><a href="base.html#topic+Date">Date</a></code>, or <code><a href="base.html#topic+POSIXct">POSIXct</a></code> if
fraction is <code>TRUE</code>.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann; type <code>spss</code>/<code>pspp</code>
suggested and based on a patch by J\&quot;org Beyer
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+as.Date">as.Date</a></code>, <code><a href="base.html#topic+as.POSIXlt">as.POSIXlt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>convert_date(40000, "excel")
</code></pre>

<hr>
<h2 id='convert_tz'>
Convert a Timestamp from one Timezone to Another
</h2><span id='topic+convert_tz'></span>

<h3>Description</h3>

<p>Convert a timestamp from one timezone to another.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_tz(datetime, from = "", to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_tz_+3A_datetime">datetime</code></td>
<td>

<p>character: <code>YYYY-MM-DD HH:MM:SS</code>
</p>
</td></tr>
<tr><td><code id="convert_tz_+3A_from">from</code></td>
<td>

<p>the timezone of datetime. If <code>""</code>, the local timezone is used.
</p>
</td></tr>
<tr><td><code id="convert_tz_+3A_to">to</code></td>
<td>

<p>to timezone to which datetime should be converted
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="base.html#topic+timezones">timezones</a></code>.
</p>
<p>Be careful: if the specified timezone does not exist on your
system, the function will <b>not</b> return an error.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+POSIXct">POSIXct</a></code>
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8&ndash;12, 2001.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+POSIXct">POSIXct</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
convert_tz("2016-05-10 12:00:00",
          "America/Chicago", "America/Chicago")

convert_tz("2016-05-10 12:00:00",
          "Europe/Berlin", "America/Chicago")

convert_tz(Sys.time(), to = "Europe/London")
convert_tz(Sys.time(), to = "America/Chicago")


</code></pre>

<hr>
<h2 id='date1904'>
Is File Origin 1904?
</h2><span id='topic+date1904'></span>

<h3>Description</h3>

<p>Checks whether an xlsx file uses 1 Jan 1904 as its origin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date1904(filename)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="date1904_+3A_filename">filename</code></td>
<td>

<p>character: one or more filenames
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Requires <code>utils::unzip</code>.
</p>


<h3>Value</h3>

<p>A logical vector:
<code>TRUE</code> if origin is 1904;
<code>FALSE</code> if origin is 1900;
<code>NA</code> if file could not be processed.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann; type <code>spss</code>/<code>pspp</code>
suggested and based on a patch by J\&quot;org Beyer
</p>


<h3>References</h3>

<p>ECMA-376-1:2016 <em>Office Open XML File Formats</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+convert_date">convert_date</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
date1904("~/Desktop/02_company_statistics.pdf")

</code></pre>

<hr>
<h2 id='datetimeutils-package'>
Utilities for Dates and Times
</h2><span id='topic+datetimeutils-package'></span><span id='topic+datetimeutils'></span>

<h3>Description</h3>

<p>Utilities for handling dates and times, such
   as selecting particular days of the week or month,
   formatting timestamps as required by RSS feeds, or
   converting timestamp representations of other software
   (such as 'MATLAB' and 'Excel') to R. The package is
   lightweight (no dependencies, pure R implementations) and
   relies only on R's standard classes to represent dates
   and times ('Date' and 'POSIXt'); it aims to provide
   efficient implementations, through vectorisation and the
   use of R's native numeric representations of timestamps
   where possible.
</p>


<h3>Details</h3>

<p>Helper functions for dealing with times and dates.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>
<p>Maintainer: Enrico Schumann &lt;es@enricoschumann.net&gt;
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8&ndash;12, 2001.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+DateTimeClasses">DateTimeClasses</a></code>, <code><a href="base.html#topic+Dates">Dates</a></code>
</p>

<hr>
<h2 id='end_of_period'>
Handling and Manipulating Dates and Times
</h2><span id='topic+day_of_month+3C-'></span><span id='topic+day_of_month'></span><span id='topic+mday+3C-'></span><span id='topic+mday'></span><span id='topic+end_of_month'></span><span id='topic+end_of_quarter'></span><span id='topic+end_of_year'></span><span id='topic+end_of_previous_year'></span><span id='topic+end_of_previous_month'></span><span id='topic+first_of_month'></span><span id='topic+first_of_year'></span><span id='topic+is_leapyear'></span><span id='topic+second'></span><span id='topic+minute'></span><span id='topic+hour'></span><span id='topic+month'></span><span id='topic+year'></span>

<h3>Description</h3>

<p>Functions for manipulating vectors that inherit from class
<code>POSIXt</code> or <code>Date</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_leapyear(x)

first_of_month(x)
end_of_month(x, shift = 0L)
end_of_previous_month(x)

first_of_year(x)
end_of_year(x, shift = 0L)
end_of_previous_year(x)

end_of_quarter(x, shift = 0L)

day_of_month(x)
day_of_month(x) &lt;- value
mday(x)
mday(x) &lt;- value

second(x, as.character = FALSE)
minute(x, as.character = FALSE)
hour(x, as.character = FALSE)
month(x, as.character = FALSE)
year(x, as.character = FALSE)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="end_of_period_+3A_x">x</code></td>
<td>

<p>a vector of class <code>Date</code>
</p>
</td></tr>
<tr><td><code id="end_of_period_+3A_value">value</code></td>
<td>

<p>a vector of integers
</p>
</td></tr>
<tr><td><code id="end_of_period_+3A_shift">shift</code></td>
<td>

<p>integer
</p>
</td></tr>
<tr><td><code id="end_of_period_+3A_as.character">as.character</code></td>
<td>

<p>logical
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>end_of_month</code> returns the last calendar day of a given month. If
<code>shift</code> is positive, then shift <code>months</code> into the future; if
negative, the end of previous months. <code>end_of_month(x, -1)</code> is
equivalent to <code>end_of_previous_month(x)</code>. <code>end_of_year</code>
works in the same way, but for calendar years.
</p>
<p><code>mday</code> is a wrapper for <code>day_of_month</code>.
</p>


<h3>Value</h3>

<p>Vectors of class <code>Date</code> or <code>POSIXct</code>; or <code>logical</code>
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8&ndash;12, 2001.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+DateTimeClasses">DateTimeClasses</a></code>
</p>
<p>Many useful functions are also in package <span class="pkg">chron</span>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## vectorisation: x *or* shift (but not both!)
end_of_month(as.Date("2013-01-15"), shift = c(-1, 0, 1))
end_of_month(as.Date("2013-01-15") + 0:100)


day_of_month(d &lt;- as.Date("2013-01-22"))
day_of_month(d) &lt;- 5
d
</code></pre>

<hr>
<h2 id='guess_datetime'>
Guess Timestamp Format
</h2><span id='topic+guess_datetime'></span>

<h3>Description</h3>

<p>Tries to convert a character vector to POSIXct.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guess_datetime(s, date.only = FALSE, within = FALSE, tz = "",
               try.patterns = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="guess_datetime_+3A_s">s</code></td>
<td>
<p>character</p>
</td></tr>
<tr><td><code id="guess_datetime_+3A_date.only">date.only</code></td>
<td>
<p>logical: try to guess dates only (if
<code>TRUE</code>) or times as well (if <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="guess_datetime_+3A_within">within</code></td>
<td>
<p>logical: ignore surrounding text? Note
that trailing text is always ignored, see
<code><a href="base.html#topic+as.Date">as.Date</a></code>.</p>
</td></tr>
<tr><td><code id="guess_datetime_+3A_tz">tz</code></td>
<td>
<p>character: timezone to assume for
times. Default is the current timezone. See argument
<code>tz</code> in <code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code></p>
</td></tr>
<tr><td><code id="guess_datetime_+3A_try.patterns">try.patterns</code></td>
<td>
<p>either <code><a href="base.html#topic+NULL">NULL</a></code> or a
character vector. See Details and Examples.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function first coerces its argument to character.
It then applies a list of patterns to each element of
<code>s</code>. Let <code>d</code> be a numeric digit; then the
rules are roughly those in the table below. (For the
precise rules, see Examples below.)
</p>

<table>
<tr>
 <td style="text-align: left;">
    <em>original pattern</em>     </td><td style="text-align: left;"> <em>assumed format</em>          </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>dddd-dd-dd dd:dd:dd</code>  </td><td style="text-align: left;"> <code>%Y-%m-%d %H:%M:%S</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>dd/dd/dddd dd:dd:dd</code>  </td><td style="text-align: left;"> <code>%m/%d/%Y %H:%M:%S</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>dd.dd.dddd dd:dd:dd</code>  </td><td style="text-align: left;"> <code>%d.%m.%Y %H:%M:%S</code>
  </td>
</tr>

</table>

<p>The rules are followed in the given order; an element
will be matched only once. If there is a match,
<code><a href="base.html#topic+strptime">strptime</a></code> will be tried with the
<em>assumed format</em> (when date.only is <code>TRUE</code>,
<code><a href="base.html#topic+as.Date">as.Date</a></code> will be tried).
For elements that do not match any pattern or for
which <code><a href="base.html#topic+strptime">strptime</a></code> fails, <code><a href="base.html#topic+NA">NA</a></code> is returned.
</p>
<p>Additional patterns can be specified as
<code>try.patterns</code>.  This must be a character vector
with an even number of elements: the first of each
pair of elements is used as the pattern in a regular
expression; the second as the format string passed to
<code><a href="base.html#topic+strptime">strptime</a></code>. See Examples.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+POSIXct">POSIXct</a></code>
</p>


<h3>Warning</h3>

<p>If you know the format of a timestamp, then <b>do
not use this function</b> (use <code><a href="base.html#topic+strptime">strptime</a></code>
instead). If you have no idea at all about the format
of a timestamp, then <b>do not use this function</b>.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+strptime">strptime</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>s &lt;- c("  1999-08-19     10:00:31   ",
       "   1999-08-19 10:00",
       "19.8.1999 10:00",
       "8/19/99      10:00:31",
       "8/19/1999 10:00:31",
       "19.8.1999 10:00:31")

guess_datetime(s)

## the actual rules
rules &lt;- as.data.frame(matrix(datetimeutils:::.dt_patterns,
                              byrow = TRUE, ncol = 2),
                       stringsAsFactors = FALSE)
names(rules) &lt;- c("pattern", "assumed_format")
rules



## ----------------------------------

## a function for finding old files by looking at the
## dates in filenames (e.g. in a backup directory)
old_files &lt;- function(min.age = 365,   ## in days
                      path = ".",
                      recursive = FALSE,
                      full.names = FALSE) {

    files &lt;- dir(path, recursive = recursive, full.names = full.names)
    dates &lt;- guess_datetime(files, date.only = TRUE, within = TRUE)

    age &lt;- as.numeric(Sys.Date() - dates)
    old &lt;- age &gt;= min.age

    files[ !is.na(old) &amp; old ]
}


## ----------------------------------

## specifying additional formats

s &lt;- c("19-08-99",
       "29-2-00")
guess_datetime(s, date.only = TRUE)
## NA NA
guess_datetime(s, date.only = TRUE,
               try.patterns = c("[0-9]+-[0-9]+-[0-9]+", "%d-%m-%y"))
## "1999-08-19" "2000-02-29"
</code></pre>

<hr>
<h2 id='last_weekday'>
Functions for Computing Days of the Week
</h2><span id='topic+last_weekday'></span><span id='topic+nth_weekday'></span>

<h3>Description</h3>

<p>Functions for computing a specifed day-of-week, such as &lsquo;the
last Friday of October 2015&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>last_weekday(weekday, x, shift = 0L,
             period = "month", before, inclusive = TRUE)
nth_weekday(weekday, x, n = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="last_weekday_+3A_x">x</code></td>
<td>

<p>a vector of class <code>Date</code> (but only the <code>YYYY-MM</code> part is relevant)
</p>
</td></tr>
<tr><td><code id="last_weekday_+3A_shift">shift</code></td>
<td>

<p>a vector of integers
</p>
</td></tr>
<tr><td><code id="last_weekday_+3A_weekday">weekday</code></td>
<td>

<p>an integer (<code>1</code> is Monday, <code>2</code> is Tuesday, and so on)
</p>
</td></tr>
<tr><td><code id="last_weekday_+3A_period">period</code></td>
<td>

<p>character. Currently ignored.
</p>
</td></tr>
<tr><td><code id="last_weekday_+3A_before">before</code></td>
<td>

<p>a <code><a href="base.html#topic+Date">Date</a></code>. See also <code>inclusive</code>.
</p>
</td></tr>
<tr><td><code id="last_weekday_+3A_inclusive">inclusive</code></td>
<td>

<p>logical. Is <code>before</code> meant is &lsquo;before but including&rsquo;?
</p>
</td></tr>
<tr><td><code id="last_weekday_+3A_n">n</code></td>
<td>

<p>an integer
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>last_weekday</code> computes the last day-of-the-week
(specified as an integer 0 to 6, with Sunday being 0)
in a given month, e.g. &lsquo;the last Friday&rsquo;.
<code>shift</code> moves forward (when positive) or
backward (when negative) by one week; see Examples.
</p>
<p><code>nth_weekday</code> gives the <em>n</em>-th
day-of-the-week (specified as an integer 0 to 6, with
Sunday being 0) of a given month, e.g. &lsquo;the
second Monday&rsquo;.
</p>


<h3>Value</h3>

<p><code>Date</code>
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8&ndash;12, 2001.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+DateTimeClasses">DateTimeClasses</a></code>
</p>
<p>Many useful functions are also in package <span class="pkg">chron</span>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## GOAL:     find the third Friday in March 2013
## SOLUTION: find the last Friday in February 2013 and
##           shift forward by 3 weeks
last_weekday(5, as.Date("2013-02-01"), shift = 3)

## ... or much simpler
nth_weekday(5, as.Date("2013-03-01"), 3)

</code></pre>

<hr>
<h2 id='month.name.de'>
Non-English Month Names and Abbreviations
</h2><span id='topic+month.name.de'></span><span id='topic+month.abb.de.din1355.1'></span>

<h3>Description</h3>

<p>Month names and abbreviations in languages other than
English: Currently only German is supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>month.name.de
month.abb.de.din1355.1
</code></pre>


<h3>Format</h3>

<p>Character vectors; encoded as <abbr><span class="acronym">UTF</span></abbr>-8 if necessary.
</p>


<h3>Details</h3>

<p>Character vectors, encoded as <abbr><span class="acronym">UTF</span></abbr>-8.
</p>
<p><code>month.abb.de.din1355.1</code> contains the
abbreviations of the withdrawn <abbr><span class="acronym">DIN</span></abbr> 1355-1,
which uses &ldquo;Mrz&rdquo; for March.
</p>


<h3>Source</h3>

<p><a href="https://de.wikipedia.org/wiki/DIN_1355-1">https://de.wikipedia.org/wiki/DIN_1355-1</a>
</p>


<h3>References</h3>

<p><a href="https://de.wikipedia.org/wiki/DIN_1355-1">https://de.wikipedia.org/wiki/DIN_1355-1</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>month.name.de
month.name.de[month(Sys.Date())]
</code></pre>

<hr>
<h2 id='nth_day'>
Compute Reference Dates
</h2><span id='topic+nth_day'></span>

<h3>Description</h3>

<p>Compute sequences of reference dates, such as last
day of month or first day of quarter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nth_day(timestamps, period = "month", n,
        start, end, business.days = FALSE,
        missing = "previous", index = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nth_day_+3A_timestamps">timestamps</code></td>
<td>

<p>timestamps: a sorted vector of Dates
</p>
</td></tr>
<tr><td><code id="nth_day_+3A_period">period</code></td>
<td>

<p>numeric or character: supported are <code>"week"</code>,
<code>"month"</code>, <code>"quarter"</code>,
<code>"halfyear"</code>, <code>"year"</code>.  If numeric,
period is interpreted as a month number, with
January being 1.  Also possible are month names,
either English as in <code><a href="base.html#topic+month.name">month.name</a></code> or
<code><a href="base.html#topic+month.abb">month.abb</a></code>, or as defined in the
current locale (see <code><a href="base.html#topic+strftime">strftime</a></code> format
specification <code>"%b"</code> and <code>"%B"</code>).
</p>
</td></tr>
<tr><td><code id="nth_day_+3A_n">n</code></td>
<td>

<p>numeric or character: currently supported are
<code>"first"</code> and <code>"last"</code>. If numeric, it
will be interpreted as the <em>n</em>-th day of the
period.
</p>
</td></tr>
<tr><td><code id="nth_day_+3A_start">start</code></td>
<td>

<p><code><a href="base.html#topic+Date">Date</a></code>
</p>
</td></tr>
<tr><td><code id="nth_day_+3A_end">end</code></td>
<td>

<p><code><a href="base.html#topic+Date">Date</a></code>
</p>
</td></tr>
<tr><td><code id="nth_day_+3A_business.days">business.days</code></td>
<td>

<p>logical
</p>
</td></tr>
<tr><td><code id="nth_day_+3A_missing">missing</code></td>
<td>

<p>character. Not supported yet.
</p>
</td></tr>
<tr><td><code id="nth_day_+3A_index">index</code></td>
<td>

<p>logical. If <code>TRUE</code>, the indices (instead of
actual timestamps) are returned.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function computes sequences of dates that are
often used as reference dates, for instance in
financial reporting: last day of the month or of the
year, or a particular day of the month.
</p>
<p>The function takes a vector of timestamps and returns
a subset of these timestamps. Alternatively, a
sequence of calendar days may be constructed by
specifying <code>start</code> and <code>end</code>.
</p>


<h3>Value</h3>

<p>A vector of timestamps or, if <code>index</code> is
<code>TRUE</code>, a vector of integers.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>See Also</h3>

<p><code><a href="#topic+nth_weekday">nth_weekday</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>timestamps &lt;- seq(from = as.Date("2001-01-01"),
                  to   = as.Date("2001-04-15"),
                  by   = "1 day")

nth_day(timestamps, period = "quarter", n = "last")
## [1] "2001-03-31" "2001-04-15"

nth_day(timestamps, period = "quarter", n = 10)
## [1] "2001-01-10" "2001-04-10"

nth_day(timestamps, period = "quarter", n = 1:2)
## [1] "2001-01-01" "2001-01-02" "2001-04-01" "2001-04-02"

nth_day(timestamps, period = "month", n = "last")
## [1] "2001-01-31" "2001-02-28" "2001-03-31" "2001-04-15"


nth_day(start = as.Date("2016-06-03"),
        end   = as.Date("2017-08-01"),
        period = c(6, 12), n = 3)
## [1] "2016-06-05" "2016-12-03" "2017-06-03"

nth_day(start = as.Date("2016-06-03"),
        end   = as.Date("2017-08-01"),
        period = c("Jun", "Dec"), n = c(3, 5))
## [1] "2016-06-05" "2016-06-07" "2016-12-03" "2016-12-05"
## [5] "2017-06-03" "2017-06-05"

</code></pre>

<hr>
<h2 id='rfc822t'>
Format Date and Time as Described in RFC 822
</h2><span id='topic+rfc822t'></span>

<h3>Description</h3>

<p>Format a timestamp as described in RFC 822.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rfc822t(x, include.dow = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rfc822t_+3A_x">x</code></td>
<td>

<p>a vector that can be coerced to <code><a href="base.html#topic+POSIXlt">POSIXlt</a></code>
</p>
</td></tr>
<tr><td><code id="rfc822t_+3A_include.dow">include.dow</code></td>
<td>

<p>logical; include the day of the week?
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Formats a timestamp as &lsquo;<code>%Y %H:%M:%S %z</code>&rsquo;, possibly
prepending an abbreviated day-of-week. The function ignores the
current locale: day-of-week and month names are in English. The
format is required for timestamps in RSS feeds.
</p>


<h3>Value</h3>

<p>a character vector
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p><a href="https://www.ietf.org/rfc/rfc0822.txt">https://www.ietf.org/rfc/rfc0822.txt</a>
</p>
<p><a href="https://www.rssboard.org/rss-specification">https://www.rssboard.org/rss-specification</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+strftime">strftime</a></code>, <code><a href="base.html#topic+date">date</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rfc822t(Sys.time())
</code></pre>

<hr>
<h2 id='roundPOSIXt'>
Round POSIXt Objects to Specified Interval
</h2><span id='topic+roundPOSIXt'></span>

<h3>Description</h3>

<p>Round POSIXt objects to specified intervals such as &lsquo;5 minutes&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roundPOSIXt(t, interval, up = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="roundPOSIXt_+3A_t">t</code></td>
<td>

<p>a vector that inherits from class <code><a href="base.html#topic+POSIXt">POSIXt</a></code>
</p>
</td></tr>
<tr><td><code id="roundPOSIXt_+3A_interval">interval</code></td>
<td>

<p>A character string of the form &ldquo;<code>num</code> <code>units</code>&rdquo;, in which
<code>num</code> is a number, and <code>units</code> is <code>sec</code>, <code>min</code>,
<code>hour</code> or <code>day</code>. <code>num</code> and <code>units</code> must be
separated by white space.
</p>
</td></tr>
<tr><td><code id="roundPOSIXt_+3A_up">up</code></td>
<td>

<p>logical: round down (the default) or up?
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>roundPOSIXt</code> rounds an input of class <code>POSIXt</code>; it
returns a vector of class <code>POSIXct</code>.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+POSIXct">POSIXct</a></code>
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8&ndash;12, 2001.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+DateTimeClasses">DateTimeClasses</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>times &lt;- as.POSIXct("2012-03-24 22:17:27") + 1:3
roundPOSIXt(times, "10 min")
roundPOSIXt(times, "10 min", TRUE)
</code></pre>

<hr>
<h2 id='timegrid'>
POSIXct Time Grid
</h2><span id='topic+timegrid'></span>

<h3>Description</h3>

<p>Build an equally-spaced sequence of POSIXct timestamps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>timegrid(from, to, interval,
         exclude.weekends = TRUE, holidays = NULL,
         fromHHMMSS = "080000", toHHMMSS = "220000")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="timegrid_+3A_from">from</code></td>
<td>

<p>a vector of length one that inherits from class
<code><a href="base.html#topic+POSIXt">POSIXt</a></code>. If there from has a timezone attribute, it
will be used for the grid.
</p>
</td></tr>
<tr><td><code id="timegrid_+3A_to">to</code></td>
<td>

<p>a vector of length one that inherits from class <code><a href="base.html#topic+POSIXt">POSIXt</a></code>
</p>
</td></tr>
<tr><td><code id="timegrid_+3A_interval">interval</code></td>
<td>

<p>A character string like &ldquo;<code>num</code> <code>units</code>&rdquo;, in which
<code>num</code> is a number, and <code>units</code> is <code>sec</code>, <code>min</code>,
<code>hour</code> or <code>day</code>. <code>num</code> and <code>units</code> must be
separated by white space.
</p>
</td></tr>
<tr><td><code id="timegrid_+3A_exclude.weekends">exclude.weekends</code></td>
<td>

<p>logical; default is <code>TRUE</code>
</p>
</td></tr>
<tr><td><code id="timegrid_+3A_fromhhmmss">fromHHMMSS</code></td>
<td>

<p>A character vector of length one like
&ldquo;<code>HHMMSS</code>&rdquo;. Times-of-day earlier than <code>HHMMSS</code> are
excluded from the grid. The applicable timezone will be taken from the
<code>from</code> argument.
</p>
</td></tr>
<tr><td><code id="timegrid_+3A_tohhmmss">toHHMMSS</code></td>
<td>

<p>A character vector of length one like
&ldquo;<code>HHMMSS</code>&rdquo;. Times-of-day later than <code>HHMMSS</code> are
excluded from the grid. The applicable timezone will be taken from the
<code>from</code> argument.
</p>
</td></tr>
<tr><td><code id="timegrid_+3A_holidays">holidays</code></td>
<td>

<p>A vector of class <code><a href="base.html#topic+Date">Date</a></code>, or a character vector in a format that
is understood by <code><a href="base.html#topic+as.Date">as.Date</a></code>, or anything that can be
coerced to class <code>Date</code> by <code><a href="base.html#topic+as.Date">as.Date</a></code> (eg, <code><a href="base.html#topic+POSIXt">POSIXt</a></code>).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>timegrid</code> creates an equally-spaced grid of class <code>POSIXct</code>.
</p>


<h3>Value</h3>

<p>a vector of class <code><a href="base.html#topic+POSIXct">POSIXct</a></code> (or a character vector of
length zero, in case no valid points remain)
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p>B.D. Ripley and K. Hornik. <em>Date-Time Classes</em>. R-News,
<strong>1</strong>(2):8&ndash;12, 2001.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+strftime">strftime</a></code>, <code><a href="base.html#topic+date">date</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>from &lt;- as.POSIXct("2012-04-30 08:00:00")
to   &lt;- as.POSIXct("2012-05-04 22:00:00")
timegrid(from, to, interval = "1 hour",
         holidays = as.Date("2012-05-01"))


timegrid(as.POSIXct("2017-06-23 21:00:00"), ## system timezone
         as.POSIXct("2017-06-26 10:00:00"),
         interval = "15 min")
timegrid(as.POSIXlt("2017-06-23 21:00:00", tz = "UTC"),
         as.POSIXlt("2017-06-26 10:00:00", tz = "UTC"),
         interval = "15 min")
</code></pre>

<hr>
<h2 id='tznames'>
Timezone Names
</h2><span id='topic+tznames'></span>

<h3>Description</h3>

<p>A mapping between <code>tz</code> database (a.k.a. Olson database)
and Windows timezone names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("tznames")</code></pre>


<h3>Format</h3>

<p>A data frame of the following 2 variables:
</p>

<dl>
<dt><code>Windows</code></dt><dd><p>a character vector: the timezone names used
under Windows and its applications (e.g. in Outlook calendars)</p>
</dd>
<dt><code>Olson</code></dt><dd><p>a character vector of the names returned by
<code><a href="base.html#topic+OlsonNames">OlsonNames</a></code></p>
</dd>
</dl>



<h3>Details</h3>

<p>The data are auto-generated from file <code>windowsZones.xml</code> in the
Unicode Common Locale Data Repository
(<a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).  See
<a href="https://www.unicode.org/copyright.html">https://www.unicode.org/copyright.html</a> and
<a href="https://www.unicode.org/license.html">https://www.unicode.org/license.html</a> for the terms of use.
</p>
<p>There is no 1-to-1 mapping between names: several Olson names
typically map to a single  Windows name.
</p>


<h3>Source</h3>

<p>Unicode Common Locale Data Repository (CLDR) <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>
</p>


<h3>References</h3>

<p>See <a href="https://www.iana.org/time-zones">https://www.iana.org/time-zones</a>
and <a href="http://web.cs.ucla.edu/~eggert/tz/tz-link.htm">http://web.cs.ucla.edu/~eggert/tz/tz-link.htm</a> for more
information about the <code>tz</code> database.
</p>
<p>See also <code><a href="base.html#topic+OlsonNames">OlsonNames</a></code>.
</p>
<p>A plain-text table is at
<a href="https://github.com/enricoschumann/datetimeutils/blob/master/data/tznames.txt">https://github.com/enricoschumann/datetimeutils/blob/master/data/tznames.txt</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>str(tznames)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
