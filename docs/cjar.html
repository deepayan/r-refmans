<!DOCTYPE html><html lang="en"><head><title>Help for package cjar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cjar}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cjar-package'><p><code>cjar</code> Package</p></a></li>
<li><a href='#cja_auth'><p>Generate an access token for the Customer Journey Analytics API</p></a></li>
<li><a href='#cja_auth_with'><p>Set authorization options</p></a></li>
<li><a href='#cja_freeform_table'><p>Get a freeform table</p></a></li>
<li><a href='#cja_get_audit_logs'><p>Get audit logs</p></a></li>
<li><a href='#cja_get_audit_logs_search'><p>Get audit logs search</p></a></li>
<li><a href='#cja_get_calculatedmetrics'><p>Get a list of calculated metrics.</p></a></li>
<li><a href='#cja_get_dataviews'><p>Get data view ids</p></a></li>
<li><a href='#cja_get_dateranges'><p>Get a paginated list of dateranges in CJA</p></a></li>
<li><a href='#cja_get_dimensions'><p>Get a list of dimensions in CJA</p></a></li>
<li><a href='#cja_get_filter'><p>Get a filter in CJA</p></a></li>
<li><a href='#cja_get_filters'><p>Get a paginated list of filters in CJA</p></a></li>
<li><a href='#cja_get_me'><p>Get my information</p></a></li>
<li><a href='#cja_get_metrics'><p>Get a list of metrics in CJA</p></a></li>
<li><a href='#cja_get_project_config'><p>Get a project configuration in CJA</p></a></li>
<li><a href='#cja_get_projects'><p>Get a paginated list of projects in CJA</p></a></li>
<li><a href='#filter_build'><p>Build the filter in CJA</p></a></li>
<li><a href='#filter_con'><p>Create the filter container</p></a></li>
<li><a href='#filter_rule'><p>Create the filter rule</p></a></li>
<li><a href='#filter_seq'><p>Create the filter sequence container</p></a></li>
<li><a href='#filter_then'><p>Create the filter sequence <code>then</code> object</p></a></li>
<li><a href='#filter_val'><p>Validate a filter in CJA</p></a></li>
<li><a href='#filter_verbs'><p>Verbs available to be used in filter rules.</p></a></li>
<li><a href='#retrieve_cja_token'><p>Retrieve a token</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Client for 'Customer Journey Analytics' ('CJA') API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Connect and pull data from the 'CJA' API, which powers 'CJA Workspace' <a href="https://github.com/AdobeDocs/cja-apis">https://github.com/AdobeDocs/cja-apis</a>. 
             The package was developed with the analyst in mind and will 
             continue to be developed with the guiding principles of iterative, 
             repeatable, timely analysis. New features are actively being 
             developed and we value your feedback and contribution to the process. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, httr, magrittr, purrr, R6, dplyr, jsonlite, glue,
jose, tibble, lubridate, progress, vctrs, stringr, rlang,
memoise, openssl, httr2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-16 05:15:08 UTC; benwoodard</td>
</tr>
<tr>
<td>Author:</td>
<td>Ben Woodard [aut, cre],
  Charles Gallagher [ctb],
  Braxton Butcher [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ben Woodard &lt;benrwoodard@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-16 09:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cjar-package'><code>cjar</code> Package</h2><span id='topic+cjar'></span><span id='topic+cjar-package'></span>

<h3>Description</h3>

<p>Connect to the 'CJA' API
<a href="https://developer.adobe.com/cja-apis/docs">https://developer.adobe.com/cja-apis/docs</a> which powers 'CJA
Workspace'. The package was developed with the analyst in mind, and it will
continue to be developed with the guiding principles of iterative,
repeatable, timely analysis.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ben Woodard <a href="mailto:benrwoodard@gmail.com">benrwoodard@gmail.com</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Charles Gallagher <a href="mailto:charlesjgallagher15@gmail.com">charlesjgallagher15@gmail.com</a> [contributor]
</p>
</li>
<li><p> Braxton Butcher <a href="mailto:braxton.butcher@gofurther.com">braxton.butcher@gofurther.com</a> [contributor]
</p>
</li></ul>


<hr>
<h2 id='cja_auth'>Generate an access token for the Customer Journey Analytics API</h2><span id='topic+cja_auth'></span><span id='topic+auth_jwt'></span><span id='topic+auth_oauth'></span><span id='topic+auth_s2s'></span>

<h3>Description</h3>

<p><strong>Note:</strong> <code>cja_auth()</code> is the primary function used for authorization. <code>auth_s2s()</code>
and <code>auth_jwt()</code> should typically not be called directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_auth(type = "s2s", ...)

auth_jwt(
  file = Sys.getenv("CJA_AUTH_FILE"),
  private_key = Sys.getenv("CJA_PRIVATE_KEY"),
  jwt_token = NULL,
  ...
)

auth_s2s(file = Sys.getenv("CJA_AUTH_FILE"), s2s_token = NULL, ...)

auth_oauth(
  client_id = Sys.getenv("CJA_CLIENT_ID"),
  client_secret = Sys.getenv("CJA_CLIENT_SECRET"),
  use_oob = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_auth_+3A_type">type</code></td>
<td>
<p>Either 'jwt' or 's2s' (default). This can be set explicitly, but a best practice is
to run <code>cja_auth_with()</code> to set the authorization type as an environment variable before
running <code>cja_auth()</code></p>
</td></tr>
<tr><td><code id="cja_auth_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to auth functions.</p>
</td></tr>
<tr><td><code id="cja_auth_+3A_file">file</code></td>
<td>
<p>A JSON file containing service account credentials required for JWT
authentication. This file can be downloaded directly from the Adobe Console,
and should minimally have the fields <code>API_KEY</code> or <code>CLIENT_ID</code>, <code>CLIENT_SECRET</code>, <code>ORG_ID</code>,
and <code>TECHNICAL_ACCOUNT_ID</code>.</p>
</td></tr>
<tr><td><code id="cja_auth_+3A_private_key">private_key</code></td>
<td>
<p>Filename of the private key for JWT authentication.</p>
</td></tr>
<tr><td><code id="cja_auth_+3A_jwt_token">jwt_token</code></td>
<td>
<p><em>(Optional)</em> A custom, encoded, signed JWT claim. If used,
<code>client_id</code> and <code>client_secret</code> are still required.</p>
</td></tr>
<tr><td><code id="cja_auth_+3A_s2s_token">s2s_token</code></td>
<td>
<p><em>(Optional)</em> A custom, encoded, signed JWT claim. If used,
<code>client_id</code> and <code>client_secret</code> are still required.</p>
</td></tr>
<tr><td><code id="cja_auth_+3A_client_id">client_id</code></td>
<td>
<p>The client ID, defined by a global variable or manually defined</p>
</td></tr>
<tr><td><code id="cja_auth_+3A_client_secret">client_secret</code></td>
<td>
<p>The client secret, defined by a global variable or manually defined</p>
</td></tr>
<tr><td><code id="cja_auth_+3A_use_oob">use_oob</code></td>
<td>
<p>if <code>FALSE</code>, use a local webserver for the OAuth dance.
Otherwise, provide a URL to the user and prompt for a validation code.
Defaults to the value of the <code>httr_oob_default</code> default, or TRUE if
<code>httpuv</code> is not installed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The path of the cached token. This is returned invisibly.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>auth_jwt()</code>: Authenticate with JWT token
</p>
</li>
<li> <p><code>auth_s2s()</code>: Authenticate with S2S token
</p>
</li>
<li> <p><code>auth_oauth()</code>: Authorize via OAuth 2.0
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+cja_auth_with">cja_auth_with()</a></code>
</p>

<hr>
<h2 id='cja_auth_with'>Set authorization options</h2><span id='topic+cja_auth_with'></span><span id='topic+cja_auth_path'></span><span id='topic+cja_auth_name'></span>

<h3>Description</h3>

<p><strong>Get</strong> or <strong>set</strong> various authorization options. If called without an argument, then
these functions return the current setting for the requested option (which can be
<code>NULL</code> if the option has not been set). To clear the setting, pass <code>NULL</code> as an
argument.
</p>
<p><code>cja_auth_with</code> sets the type of authorization for the session. This is used
as the default by <code>cja_auth()</code> when no specific option is given.
</p>
<p><code>cja_auth_path</code> sets the file path for the cached authorization token. It
should be a directory, rather than a filename. If this option is not set, the
current working directory is used instead.
</p>
<p><code>cja_auth_name</code> sets the file name for the cached authorization token. If this
option is not set, the default filename is <code>cja_auth.rds</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_auth_with(type = "s2s")

cja_auth_path(path)

cja_auth_name(name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_auth_with_+3A_type">type</code></td>
<td>
<p>The authorization type: 's2s'</p>
</td></tr>
<tr><td><code id="cja_auth_with_+3A_path">path</code></td>
<td>
<p>The location for the cached authorization token. It should be a
directory, rather than a filename. If this option is not set, the current
working directory is used instead. If the location does not exist, it will
be created the first time a token is cached.</p>
</td></tr>
<tr><td><code id="cja_auth_with_+3A_name">name</code></td>
<td>
<p>The filename, such as <code>cja_auth.rds</code> for the cached authorization
token file. The file is stored as an RDS file, but there is no requirement
for the <code>.rds</code> file extension. <code>.rds</code> is not appended automatically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The option value, invisibly
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cja_auth">cja_auth()</a></code>
</p>

<hr>
<h2 id='cja_freeform_table'>Get a freeform table</h2><span id='topic+cja_freeform_table'></span>

<h3>Description</h3>

<p>Get a report analogous to a <strong>Freeform Table</strong> visualization in CJA Workspace. The function uses
the arguments to construct and execute a JSON-based query to the CJA API and then returns
the results as a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_freeform_table(
  dataviewId = Sys.getenv("CJA_DATAVIEW_ID"),
  date_range = c(Sys.Date() - 30, Sys.Date() - 1),
  dimensions = c("daterangeday"),
  metrics = c("visits", "visitors"),
  top = c(0),
  page = 0,
  filterType = "breakdown",
  segmentId = NA,
  metricSort = "desc",
  include_unspecified = TRUE,
  search = NA,
  prettynames = FALSE,
  allowRemoteLoad = "default",
  useCache = TRUE,
  useResultsCache = FALSE,
  includeOberonXml = FALSE,
  includePlatformPredictiveObjects = FALSE,
  debug = FALSE,
  check_components = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_freeform_table_+3A_dataviewid">dataviewId</code></td>
<td>
<p>CJA Data View ID (dv). If an environment variable called <code>CJA_DATAVIEW_ID</code> exists
in <code>.Renviron</code> or elsewhere and no <code>dataviewId</code> argument is provided, then the <code>CJA_DATAVIEW_ID</code> value will
be used. Use <code><a href="#topic+cja_get_dataviews">cja_get_dataviews()</a></code> to get a list of available <code>dataviewId</code>. Required</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_date_range">date_range</code></td>
<td>
<p>A length-2 vector with a start date and an end date.
<code>POSIXt</code> objects are sent as is, for fine control over the date range.
Numeric values are automatically converted to dates.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_dimensions">dimensions</code></td>
<td>
<p>A character vector of dimensions. There is currently a limit of 20 dimension
breakdowns. Each dimension value that gets broken down by another dimension requires an additional API
call, so the more dimensions that are included, the longer the function will take to return results.
This is how the CJA API works. Use <code><a href="#topic+cja_get_dimensions">cja_get_dimensions()</a></code> to get a list of available
<code>dimensions</code> IDs.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_metrics">metrics</code></td>
<td>
<p>A character vector of metrics. Use <code><a href="#topic+cja_get_metrics">cja_get_metrics()</a></code> and <code><a href="#topic+cja_get_calculatedmetrics">cja_get_calculatedmetrics()</a></code>
to get a list of available <code>metrics</code> IDs.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_top">top</code></td>
<td>
<p>The number of values to be pulled for each dimension. The default is 5 and the &quot;top&quot; is based on
the first <code>metric</code> value (along with <code>metricSort</code>). If there are multiple dimensions, then this argument can
either be a vector that includes the number of values to include at each level (each breakdown) or, if a single
value is used, then that will be the maximum number of values to return at each level. See the <strong>Details</strong> for
information on the unique handling of <code>daterange...</code> values.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_page">page</code></td>
<td>
<p>Used in combination with <code>top</code> to return the next page of results. Uses 0-based numbering (e.g.,
<code>top = 50000</code> and <code>page = 1</code> will return the top 50,000 items <em>starting at 50,001</em>).</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_filtertype">filterType</code></td>
<td>
<p>This is a placeholder argument for use as additional functionality is added to the package.
Currently, it defaults to <code>breakdown</code>, and that is the only supported value.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_segmentid">segmentId</code></td>
<td>
<p>A single segment ID or a vector of multiple segment IDs to apply to the overall report.
If multiple <code>segmentId</code> values are included, the segments will be effectived ANDed together, just as if
multiple segments were added to the header of an Analysis Workspace panel. Use <code><a href="#topic+cja_get_filters">cja_get_filters()</a></code>
to get a list of available <code>segmentId</code> values.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_metricsort">metricSort</code></td>
<td>
<p>Pre-sorts the table by metrics. Values are either <code>asc</code> (ascending) or <code>desc</code> (descending).</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_include_unspecified">include_unspecified</code></td>
<td>
<p>Whether or not to include <strong>Unspecified</strong> values in the results. This is the equivalent
of the <strong>Include Unspecified (None)</strong> checkbox in freeform tables in Analysis Workspace. This defaults to <code>TRUE</code>,
which includes <strong>Unspecified</strong> values in the results.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_search">search</code></td>
<td>
<p>Criteria to filter the results by one or more dimensions. Searches are case-insenstive. Refer to
the <strong>Details</strong> for more information on constructing values for this argument.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_prettynames">prettynames</code></td>
<td>
<p>A logical that determines whether the column names in the results use the API field name
(e.g., &quot;mobiledevicetype&quot;, &quot;pageviews&quot;) or the &quot;pretty name&quot; for the field (e.g., &quot;Mobile Device Type&quot;,
&quot;Page Views&quot;). This applies to both dimensions and metrics. The default value is <code>FALSE</code>, which returns the
API field names. For custom eVars, props, and events, the non-pretty values are simply the variable number
(e.g., &quot;evar2&quot;, &quot;prop3&quot;, &quot;event15&quot;). If <code>TRUE</code>, undoes any efficiency gains
from setting <code>check_components</code> to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_allowremoteload">allowRemoteLoad</code></td>
<td>
<p>Controls if Oberon should remote load data. Default behavior is true with fallback to
false if remote data does not exist. The default is &quot;default&quot; but options include: &quot;true&quot;, &quot;false&quot;, or &quot;default&quot;.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_usecache">useCache</code></td>
<td>
<p>Use caching for faster requests (Use cached dimensions to speed up permission checks - This does
not do any report caching). TRUE (default) or FALSE</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_useresultscache">useResultsCache</code></td>
<td>
<p>Use results caching for faster reporting times (This is a pass through to Oberon which manages
the Cache) FALSE (default) or TRUE</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_includeoberonxml">includeOberonXml</code></td>
<td>
<p>Controls if Oberon XML should be returned in the response - DEBUG ONLY. FALSE (default) or TRUE</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_includeplatformpredictiveobjects">includePlatformPredictiveObjects</code></td>
<td>
<p>Controls if platform Predictive Objects should be returned in the response. Only available when using
Anomaly Detection or Forecasting- DEBUG ONLY. FALSE (default) or TRUE</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_debug">debug</code></td>
<td>
<p>Set to <code>TRUE</code> to publish the full JSON request(s) being sent to the API to the console when the
function is called. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="cja_freeform_table_+3A_check_components">check_components</code></td>
<td>
<p>Logical, whether to check the validity of metrics and
dimensions before running the query. Defaults to <code>TRUE</code>, but causes
<code>cja_freeform_report</code> to request all dimensions and metrics from the API,
which may be inefficient if you're running many queries. If you have many
queries, it's more efficient to implement validity checking yourself on either
side of your queries.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is based on the <strong>Freeform Table</strong> visualization in Analysis Workspace. It is accessing
the same API call type that is used to generate those visualizations.
</p>


<h4>Dimension Ordering</h4>

<p>CJA only queries one dimension at a time, even though the results get returned in a single data
frame (or table in the case of Analysis Workspace). The more dimensions are included in the report&ndash;the more
breakdowns of the data&ndash;the more queries are required. As a result, the <em>order</em> of the dimensions <em>can</em>
have a dramatic impact on the total query time, even if the resulting data is essentially identical.
</p>
<p>One way to understand this is to consider how much dragging and dropping would be required to return the
data in Analysis Workspace <em>if you were not able to &quot;Shift&quot;-&quot;click&quot; to highlight multiple values before
dragging a new dimension to break down existing values</em>.
</p>
<p>Consider a scenario where you are pulling metrics for the last 30 days (<code>daterangeday</code>) for <strong>Mobile Device Type</strong>
(<code>mobiledevicetype</code>), which has 7 unique values. Setting <code>dimensions = c("daterangeday", "mobiledevicetype")</code>
would make one query to get the values of the 30 days included. The query would then run a separate query
for <em>each of those 30 days</em> to get the <code>mobiledevicetype</code> results for each day. So, this would be <strong>31 API calls</strong>.
</p>
<p>If, instead, the function was called with the <code>dimension</code> values reversed (<code>dimensions = c("mobiledevicetype", "daterangeday")</code>), then
the first query would return the 7 <code>mobiledevicetype</code> values, and then would run an additional query for each of
those <em>7 mobile device type values</em> to return the results for the 30 days within each device type. This would be only <strong>7 API calls</strong>.
</p>
<p>Strategically ordering dimensions&ndash;and then wrangling the resulting data set as needed&ndash;is one of the best
ways to improve query performance.
</p>



<h4>Date Handling</h4>

<p>Date handling has several special characteristics that are worth getting familiar with:
</p>

<ul>
<li><p> The API names for day, week, month, etc. are prepended with <code>daterange</code>, so daily data uses
<code>daterangeday</code>, weekly data uses <code>daterangeweek</code>, monthly data uses <code>daterangemonth</code>, etc.
</p>
</li>
<li><p> When setting the argument for <code>top</code>, if the first (or only) <code>dimension</code> value is a <code>daterange...</code> object,
then, if this argument is not explicitly specified <em>or</em> if it uses only a single value (e.g., <code>top = 10</code>),
the function will still return all of the values that fall in that date range. For instance, if the
<code>date_range</code> was set for a 30-day period and the first <code>dimension</code> value was <code>daterangeday</code>, <em>and</em> no value
is specified for <code>top</code>, rather than simply returning the first 5 dates in the range, all 30 days will be
returned. In the same scenario, if <code>top = 10</code> was set, then all 30 days would still be returned, and the
<code>10</code> would simply be applied to the additional dimensions.
</p>
</li>
<li><p> If you want to return all of the date/time values but then have specific control over the number of
values returned for each of the drilldown dimensions, then set <code>0</code> as the first value in the <code>top</code>
argument and then specify different numbers for each breakdown (e.g., <code>top = c(0, 3, 10)</code> would return
all of the date/time values for the specified <code>date_range</code>, the top 3 values for the second specified
<code>dimension</code>, and then the top 10 values for each of the next dimension's results).
</p>
</li>
<li><p> If you are using a <code>daterange...</code> value <em>not</em> as the first dimension, then simply using <code>0</code> at the
same level in the <code>top</code> argument specification will return all of the values for that date/time value.
</p>
</li></ul>




<h4>Search/Filtering</h4>

<p>There are powerful filtering abilities within the function. However, to support that power requires a
syntax that can feel a bit cumbersome for simple queries. <strong><em>Note:</em></strong> search filters are case-insensitive.
This is CJA API functionality and can not be specified otherwise in queries.
</p>
<p>The <code>search</code> argument takes a vector of search strings, with each value in the vector corresponding to
the <code>dimension</code> value that is at the same position. These search strings support a range of operators,
including <code>AND</code>, <code>OR</code>, <code>NOT</code>, <code>MATCH</code>, <code>CONTAINS</code>, <code>BEGINS-WITH</code>, and <code>ENDS-WITH</code>.
</p>
<p>The default for any search string is to use <code>CONTAINS</code>. Consider a query where
<code>dimensions = c("mobiledevicetype", "lasttouchchannel")</code>:
</p>

<ul>
<li> <p><code>search = "CONTAINS 'mobile'"</code> will return results where <code>mobiledevicetype</code> contains &quot;mobile&quot;, so would return all rows for <strong>Mobile Phone</strong>.
</p>
</li>
<li><p> This could be shortened to <code>search = "'mobile'"</code> and would behave exactly the same, since <code>CONTAINS</code> is the default operator
</p>
</li>
<li> <p><code>search = c("CONTAINS 'mobile'", "CONTAINS 'search'")</code> will return results where <code>mobiledevicetype</code> contains &quot;mobile&quot; and, within those results, results where <code>lasttouchchannel</code> contains &quot;search&quot;.
</p>
</li>
<li> <p><code>search = c("(CONTAINS 'mobile') OR (CONTAINS 'tablet')", "(MATCH 'paid search')")</code> will return results where <code>mobiledevicetype</code> contains &quot;mobile&quot; <em>or</em> &quot;tablet&quot; and, within those results, will only include results where <code>lasttouchchannel</code> exactly matches &quot;paid search&quot; (but is case-insensitive, so would return &quot;Paid Search&quot; values).
</p>
</li></ul>




<h3>Value</h3>

<p>A data frame with dimensions and metrics.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cja_get_me">cja_get_me()</a></code>, <code><a href="#topic+cja_get_dataviews">cja_get_dataviews()</a></code>, <code><a href="#topic+cja_get_filters">cja_get_filters()</a></code>,
<code><a href="#topic+cja_get_dimensions">cja_get_dimensions()</a></code>, <code><a href="#topic+cja_get_metrics">cja_get_metrics()</a></code>
</p>
<p>Use <code><a href="#topic+cja_get_me">cja_get_me()</a></code> to get started.
</p>

<hr>
<h2 id='cja_get_audit_logs'>Get audit logs</h2><span id='topic+cja_get_audit_logs'></span>

<h3>Description</h3>

<p>This function will pull a list of audit logs defined by the different defined parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_audit_logs(
  startDate = NULL,
  endDate = NULL,
  action = NULL,
  component = NULL,
  componentId = NULL,
  userType = NULL,
  userId = NULL,
  userEmail = NULL,
  description = NULL,
  pageSize = 100,
  pageNumber = 0,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_audit_logs_+3A_startdate">startDate</code></td>
<td>
<p>Date is not required, but if you filter by date, both start &amp; end date must be set.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_enddate">endDate</code></td>
<td>
<p>Date is not required, but if you filter by date, both start &amp; end date must be set.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_action">action</code></td>
<td>
<p>The action you want to filter by.See details section for options</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_component">component</code></td>
<td>
<p>The type of component you want to filter by. See details section for options</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_componentid">componentId</code></td>
<td>
<p>The ID of the component.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_usertype">userType</code></td>
<td>
<p>The type of user.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_userid">userId</code></td>
<td>
<p>The ID of the user.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_useremail">userEmail</code></td>
<td>
<p>The email address of the user.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_description">description</code></td>
<td>
<p>The log description you want to filter by.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_pagesize">pageSize</code></td>
<td>
<p>Number of results per page. If left null, the default size will be set to 100.</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_pagenumber">pageNumber</code></td>
<td>
<p>Page number (base 0 - first page is &quot;0&quot;)</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>startDate/endDate</em> format
</p>
<p><em>Action</em> available values are: 'CREATE', 'EDIT', 'DELETE', 'LOGIN_FAILED',
'LOGIN_SUCCESSFUL', 'API_REQUEST', 'LOGOUT', 'APPROVE', 'UNAPPROVE', 'SHARE', 'UNSHARE',
'TRANSFER', 'ORG_CHANGE'
</p>
<p><em>Component</em> available values are: 'ANNOTATION', 'CALCULATED_METRIC', 'CONNECTION',
'DATA_GROUP', 'DATA_VIEW', 'DATE_RANGE', 'FILTER', 'MOBILE', 'PROJECT',
'REPORT', 'SCHEDULED_PROJECT', 'USER', 'USER_GROUP', 'IMS_ORG',
'FEATURE_ACCESS'
</p>


<h3>Value</h3>

<p>A data frame of audit logs and corresponding metadata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_audit_logs()

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_audit_logs_search'>Get audit logs search</h2><span id='topic+cja_get_audit_logs_search'></span>

<h3>Description</h3>

<p>This function will pull a list of audit logs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_audit_logs_search(body = NULL, debug = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_audit_logs_search_+3A_body">body</code></td>
<td>
<p>The json string with the search functions included</p>
</td></tr>
<tr><td><code id="cja_get_audit_logs_search_+3A_debug">debug</code></td>
<td>
<p>Set to TRUE if needed to help troubleshoot api call errors</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of audit logs and corresponding metadata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_audit_logs_search(body = jsonrequest)

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_calculatedmetrics'>Get a list of calculated metrics.</h2><span id='topic+cja_get_calculatedmetrics'></span>

<h3>Description</h3>

<p>Retrieve a list of available calculated metrics. The results will always include these default items:
<code>id</code>, <code>name</code>, <code>description</code>, <code>owner</code>, <code>polarity</code>, <code>precision</code>, <code>type</code>. Other attributes can
be optionally requested through the <code>expansion</code> field.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_calculatedmetrics(
  expansion = NULL,
  includeType = "all",
  dataviewIds = NULL,
  ownerId = NULL,
  filterByIds = NULL,
  toBeUsedInRsid = NULL,
  locale = "en_US",
  favorite = NULL,
  approved = NULL,
  pagination = TRUE,
  limit = 10,
  page = 0,
  sortDirection = "DESC",
  sortProperty = NULL,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_calculatedmetrics_+3A_expansion">expansion</code></td>
<td>
<p>Additional calculated metric metadata fields to include in the results:
&quot;dataName&quot; &quot;approved&quot; &quot;favorite&quot; &quot;shares&quot; &quot;tags&quot; &quot;sharesFullName&quot; &quot;usageSummary&quot;
&quot;usageSummaryWithRelevancyScore&quot; &quot;reportSuiteName&quot; &quot;siteTitle&quot; &quot;ownerFullName&quot;
&quot;modified&quot; &quot;migratedIds&quot; &quot;isDeleted&quot; &quot;definition&quot; &quot;authorization&quot; &quot;compatibility&quot;
&quot;legacyId&quot; &quot;internal&quot; &quot;dataGroup&quot; &quot;categories&quot;.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_includetype">includeType</code></td>
<td>
<p>Include additional calculated metrics not owned by user. Available values are <code>all</code> (default),
<code>shared</code>, <code>templates</code>, <code>unauthorized</code>, <code>deleted</code>, <code>internal</code>, and <code>curatedItem</code>. The <code>all</code> option takes precedence over <code>shared</code></p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_dataviewids">dataviewIds</code></td>
<td>
<p>Filter the list to only include calculated metrics tied to a specified dataviewId or
list of dataviewIds. Specify multiple dataviewIds as a vector (i.e., &quot;<code style="white-space: pre;">&#8288;dataviewIds = c("dataviewid_1", dataviewid_2",...dataviewid_n")&#8288;</code>&quot;).
Use <code><a href="#topic+cja_get_dataviews">cja_get_dataviews</a></code> to get a list of available <code>dataviewId</code> values.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_ownerid">ownerId</code></td>
<td>
<p>Filter the list to only include calculated metrics owned by the specified loginId.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_filterbyids">filterByIds</code></td>
<td>
<p>Filter the list to only include calculated metrics in the specified list as
specified by a single string or as a vector of strings.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_tobeusedinrsid">toBeUsedInRsid</code></td>
<td>
<p>The data view where the calculated metric intended to be used.
This data view will be used to determine things like compatibility and permissions.
If it is not specified then the permissions will be calculated based on the union of all metrics
authorized in all groups the user belongs to. If the compatibility expansion is specified and toBeUsedInRsid
is not then the compatibility returned is based off the compatibility from the last time the calculated metric was saved.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_locale">locale</code></td>
<td>
<p>The locale that system-named metrics should be returned in. Non-localized values will
be returned for title, name, description, etc. if a localized value is not available.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_favorite">favorite</code></td>
<td>
<p>Set to <code>TRUE</code> to only include calculated metrics that are favorites in the results. A
value of <code>FALSE</code> will return all calculated metrics, including those that are favorites.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_approved">approved</code></td>
<td>
<p>Set to <code>TRUE</code> to only include calculated metrics that are approved in the results. A
value of <code>FALSE</code> will return all calculated metrics, including those that are approved and those that are not.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_pagination">pagination</code></td>
<td>
<p>return paginated results. Set to 'TRUE' by default</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_limit">limit</code></td>
<td>
<p>Number of results per page. Default is 10</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_page">page</code></td>
<td>
<p>The &quot;page&quot; of results to display. This works in conjunction with the <code>limit</code> argument and is
zero-based. For instance, if <code>limit = 10</code> and <code>page = 1</code>, the results returned would be 11 through 20.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_sortdirection">sortDirection</code></td>
<td>
<p>The sort direction for the results: <code>ASC</code> (default) for ascending or <code>DESC</code> for
descending. (This is case insensitive, so <code>asc</code> and <code>desc</code> work as well.)</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_sortproperty">sortProperty</code></td>
<td>
<p>The property to sort the results by. Currently available values are <code>id</code> (default), <code>name</code>,
and <code>modified_date</code>. Note that setting <code>expansion = modified</code> returns results with a column added called
<code>modified</code>, which is the last date the calculated metric was modified. When using this value for <code>sortProperty</code>,
though, the name of the argument is <code>modified_date</code>.</p>
</td></tr>
<tr><td><code id="cja_get_calculatedmetrics_+3A_debug">debug</code></td>
<td>
<p>Include the output and input of the api call in the console for debugging. Default is FALSE</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is useful/needed to identify the specific ID of a calculated metric for use in other
functions like <code>cja_freeform_report</code>.
</p>
<p>The <code>expansion</code> argument accepts the following values, which will then include additional columns
in the results:
</p>

<ul>
<li> <p><strong>ownerFullName</strong>: adds <code>owner.name</code> and <code>owner.login</code> columns to the results (<code>owner.id</code> is
already included by default).
</p>
</li>
<li> <p><strong>modified</strong>: adds a <code>modified</code> column to the output with the date (ISO 8601 format) each
calculated metric was last modified.
</p>
</li>
<li> <p><strong>definition</strong>: adds <em>multiple</em> columns (the number will vary based on the number and complexity
of calculated metrics returns) that provide the actual formula for each of the calculated metrics.
This is returned from the API as a JSON object and converted into columns by the function, which
means it is pretty messy, so, really, it's not recommended that you use this value.
</p>
</li>
<li> <p><strong>compatability</strong>: should add a column with the products that the metric is compatible with, but this
behavior has not actually been shown to be true, so this may actually do nothing if included.
</p>
</li>
<li> <p><strong>reportSuiteName</strong>: adds a <code>reportSuiteName</code> and a <code>siteTitle</code> column with the friendly report
suite name for the RSID.
</p>
</li>
<li> <p><strong>tags</strong>: adds a column with an embedded data frame with all of the existing tags that are
associated with the calculated metric. This can be a bit messy to work with, but the information
is, at least, there.
</p>
</li></ul>

<p>Other Expansion options that are available: &quot;dataName&quot;, &quot;approved&quot;, &quot;favorite&quot;,
&quot;shares&quot;, &quot;sharesFullName&quot;, &quot;usageSummary&quot;, &quot;usageSummaryWithRelevancyScore&quot;,
&quot;siteTitle&quot;, &quot;migratedIds&quot;, &quot;isDeleted&quot;, &quot;authorization&quot;, &quot;legacyId&quot;,
&quot;internal&quot;, &quot;dataGroup&quot;, &quot;categories&quot;
</p>
<p>Multiple values for <code>expansion</code> can be included in the argument as a vector. For instance,
<code>expansion = c("tags", "modified")</code> will add both a <code>tags</code> column and a <code>modified</code> column to the output.
</p>


<h3>Value</h3>

<p>A data frame of calculated metrics and their metadata.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cja_get_metrics">cja_get_metrics</a></code>
</p>

<hr>
<h2 id='cja_get_dataviews'>Get data view ids</h2><span id='topic+cja_get_dataviews'></span>

<h3>Description</h3>

<p>This function will pull a list of data views ids that you have access to. These are similar to report suites in Adobe Analytics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_dataviews(
  expansion = c("name"),
  parentDataGroupId = NULL,
  externalIds = NULL,
  externalParentIds = NULL,
  dataviewIds = NULL,
  includeType = NULL,
  cached = TRUE,
  limit = 1000,
  page = 0,
  sortDirection = "ASC",
  sortProperty = "id",
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_dataviews_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional fields to include on response. Options include: &quot;name&quot; &quot;description&quot; &quot;owner&quot; &quot;isDeleted&quot; &quot;parentDataGroupId&quot; &quot;segmentList&quot; &quot;currentTimezoneOffset&quot; &quot;timezoneDesignator&quot; &quot;modified&quot; &quot;createdDate&quot; &quot;organization&quot; &quot;curationEnabled&quot; &quot;recentRecordedAccess&quot; &quot;sessionDefinition&quot; &quot;externalData&quot; &quot;containerNames&quot;</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_parentdatagroupid">parentDataGroupId</code></td>
<td>
<p>Filters data views by a single parentDataGroupId</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_externalids">externalIds</code></td>
<td>
<p>Comma-delimited list of external ids to limit the response with</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_externalparentids">externalParentIds</code></td>
<td>
<p>Comma-delimited list of external parent ids to limit the response with.</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_dataviewids">dataviewIds</code></td>
<td>
<p>Comma-delimited list of data view ids to limit the response with.</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_includetype">includeType</code></td>
<td>
<p>Include additional DataViews not owned by user. Options: &quot;deleted&quot;</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_cached">cached</code></td>
<td>
<p>return cached results. TRUE (default) or FALSE</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_limit">limit</code></td>
<td>
<p>number of results per page. 10 is default</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_page">page</code></td>
<td>
<p>Page number (base 0 - first page is 0). 0 is default</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_sortdirection">sortDirection</code></td>
<td>
<p>Sort direction ('ASC' (default) or DESC)</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_sortproperty">sortProperty</code></td>
<td>
<p>property to sort by (only modifiedDate and id are currently allowed). 'id' is default</p>
</td></tr>
<tr><td><code id="cja_get_dataviews_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Expansion</strong> available items: &quot;name&quot; &quot;description&quot; &quot;owner&quot; &quot;isDeleted&quot;
&quot;parentDataGroupId&quot; &quot;segmentList&quot; &quot;currentTimezoneOffset&quot; &quot;timezoneDesignator&quot;
&quot;modified&quot; &quot;createdDate&quot; &quot;organization&quot; &quot;curationEnabled&quot; &quot;recentRecordedAccess&quot;
&quot;sessionDefinition&quot; &quot;externalData&quot; &quot;containerNames&quot;
</p>


<h3>Value</h3>

<p>A data frame of dataview ids and their corresponding metadata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_dataviews()

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_dateranges'>Get a paginated list of dateranges in CJA</h2><span id='topic+cja_get_dateranges'></span>

<h3>Description</h3>

<p>This function allows users to pull a list of stored date ranges so that they can be reused in an analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_dateranges(
  locale = "en_US",
  filterByIds = NULL,
  limit = 10,
  page = 0,
  expansion = "definition",
  includeType = "all",
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_dateranges_+3A_locale">locale</code></td>
<td>
<p>Locale - Default: &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="cja_get_dateranges_+3A_filterbyids">filterByIds</code></td>
<td>
<p>Filter list to only include date ranges in the specified list (comma-delimited list of IDs). This has filtered Ids from tags, approved, favorites and user specified Ids list.</p>
</td></tr>
<tr><td><code id="cja_get_dateranges_+3A_limit">limit</code></td>
<td>
<p>Number of results per page. default is 10</p>
</td></tr>
<tr><td><code id="cja_get_dateranges_+3A_page">page</code></td>
<td>
<p>Page number (base 0 - first page is &quot;0&quot;)</p>
</td></tr>
<tr><td><code id="cja_get_dateranges_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional date range metadata fields to include on response.</p>
</td></tr>
<tr><td><code id="cja_get_dateranges_+3A_includetype">includeType</code></td>
<td>
<p>Include additional filters not owned by user. Default is &quot;all&quot;. Options include: &quot;all&quot; (default), &quot;shared&quot;, &quot;templates&quot;</p>
</td></tr>
<tr><td><code id="cja_get_dateranges_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>expansion</em> options can include any of the following:
&quot;definition&quot; &quot;modified&quot; &quot;ownerFullName&quot; &quot;sharesFullName&quot; &quot;shares&quot; &quot;tags&quot;
</p>
<p><em>includeType</em> options can include any of the following:
&quot;all&quot;, &quot;shared&quot;, &quot;templates&quot;
</p>


<h3>Value</h3>

<p>A data frame of dateranges and their corresponding metadata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_dateranges()

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_dimensions'>Get a list of dimensions in CJA</h2><span id='topic+cja_get_dimensions'></span>

<h3>Description</h3>

<p>Retrieves a list of dimensions available in a specified dataviewId
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_dimensions(
  dataviewId = Sys.getenv("CJA_DATAVIEW_ID"),
  expansion = "description",
  includeType = NULL,
  locale = "en_US",
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_dimensions_+3A_dataviewid">dataviewId</code></td>
<td>
<p><em>Required</em> The id of the dataview for which to retrieve dimensions. If an environment variable called <code>CJA_DATAVIEW_ID</code> exists
in <code>.Renviron</code> or elsewhere and no <code>dataviewId</code> argument is provided, then the <code>CJA_DATAVIEW_ID</code> value will
be used. Use <code><a href="#topic+cja_get_dataviews">cja_get_dataviews()</a></code> to get a list of available <code>dataviewId</code>.</p>
</td></tr>
<tr><td><code id="cja_get_dimensions_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional segment metadata fields to include on response. See Details for all options available.</p>
</td></tr>
<tr><td><code id="cja_get_dimensions_+3A_includetype">includeType</code></td>
<td>
<p>Include additional segments not owned by user. Options include: &quot;shared&quot; &quot;templates&quot; &quot;deleted&quot; &quot;internal&quot;</p>
</td></tr>
<tr><td><code id="cja_get_dimensions_+3A_locale">locale</code></td>
<td>
<p>Locale - Default: &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="cja_get_dimensions_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>Expansion</em> options can include the following:
&quot;approved&quot; &quot;favorite&quot; &quot;tags&quot; &quot;usageSummary&quot; &quot;usageSummaryWithRelevancyScore&quot;
&quot;description&quot; &quot;sourceFieldId&quot; &quot;segmentable&quot; &quot;required&quot; &quot;hideFromReporting&quot;
&quot;hidden&quot; &quot;includeExcludeSetting&quot; &quot;fieldDefinition&quot; &quot;bucketingSetting&quot;
&quot;noValueOptionsSetting&quot; &quot;defaultDimensionSort&quot; &quot;persistenceSetting&quot;
&quot;storageId&quot; &quot;tableName&quot; &quot;dataSetIds&quot; &quot;dataSetType&quot; &quot;type&quot; &quot;schemaPath&quot;
&quot;hasData&quot; &quot;sourceFieldName&quot; &quot;schemaType&quot; &quot;sourceFieldType&quot; &quot;fromGlobalLookup&quot;
&quot;multiValued&quot; &quot;precision&quot;
</p>


<h3>Value</h3>

<p>A data frame of dimensions in a specified dataview
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_dimensions(dataviewId = "dv_5f4f1e2572ea0000003ce262")

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_filter'>Get a filter in CJA</h2><span id='topic+cja_get_filter'></span>

<h3>Description</h3>

<p>Retrieves a specific filter, also known as a <code>segment</code> in Adobe Analytics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_filter(
  id = NULL,
  toBeUsedInRsid = NULL,
  locale = "en_US",
  expansion = "definition",
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_filter_+3A_id">id</code></td>
<td>
<p>The filter id to retrieve</p>
</td></tr>
<tr><td><code id="cja_get_filter_+3A_tobeusedinrsid">toBeUsedInRsid</code></td>
<td>
<p>The data view where the filter is intended to be used.
This data view will be used to determine things like compatibility and permissions.</p>
</td></tr>
<tr><td><code id="cja_get_filter_+3A_locale">locale</code></td>
<td>
<p>Locale - Default: &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="cja_get_filter_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional filter metadata fields to
include on response. See Details for all options available</p>
</td></tr>
<tr><td><code id="cja_get_filter_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>Expansion</em> options can include the following:
&quot;compatibility&quot;, &quot;definition&quot;, &quot;internal&quot;, &quot;modified&quot;, &quot;isDeleted&quot;, &quot;definitionLastModified&quot;,
&quot;createdDate&quot;, &quot;recentRecordedAccess&quot;, &quot;performanceScore&quot;, &quot;owner&quot;, &quot;dataId&quot;,
&quot;ownerFullName&quot;, &quot;dataName&quot;, &quot;sharesFullName&quot;, &quot;approved&quot;, &quot;favorite&quot;, &quot;shares&quot;,
&quot;tags&quot;, &quot;usageSummary&quot;, &quot;usageSummaryWithRelevancyScore&quot;
</p>


<h3>Value</h3>

<p>A filter list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_filter()

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_filters'>Get a paginated list of filters in CJA</h2><span id='topic+cja_get_filters'></span>

<h3>Description</h3>

<p>Retrieves a paginated list of filters, also known as <code>segments</code> in Adobe Analytics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_filters(
  expansion = NULL,
  includeType = "all",
  dataviewIds = NULL,
  ownerId = NULL,
  filterByIds = NULL,
  toBeUsedInRsid = NULL,
  locale = "en_US",
  name = NULL,
  filterByModifiedAfter = NULL,
  cached = TRUE,
  pagination = TRUE,
  limit = 10,
  page = 0,
  sortDirection = "ASC",
  sortProperty = "id",
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_filters_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional segment metadata fields to include on response. See Details for all options available</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_includetype">includeType</code></td>
<td>
<p>Include additional filters not owned by user. Default is &quot;all&quot;. Options include: &quot;shared&quot; &quot;templates&quot; &quot;deleted&quot; &quot;internal&quot;</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_dataviewids">dataviewIds</code></td>
<td>
<p>Filter list to only include filters tied to the specified data group ID list (comma-delimited)</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_ownerid">ownerId</code></td>
<td>
<p>Filter list to only include filters owned by the specified imsUserId</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_filterbyids">filterByIds</code></td>
<td>
<p>Filter list to only include filters in the specified list (comma-delimited list of IDs). This has filtered Ids from tags, approved, favorites and user specified Ids list.</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_tobeusedinrsid">toBeUsedInRsid</code></td>
<td>
<p>The report suite where the segment is intended to be used. This report suite will be used to determine things like compatibility and permissions.</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_locale">locale</code></td>
<td>
<p>Locale - Default: &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_name">name</code></td>
<td>
<p>Filter list to only include filters that contains the Name. Can only be a string value.</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_filterbymodifiedafter">filterByModifiedAfter</code></td>
<td>
<p>Filter list to only include filters modified since this date. 'yyyy-mm-dd' format</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_cached">cached</code></td>
<td>
<p>Return cached results. TRUE by default.</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_pagination">pagination</code></td>
<td>
<p>Return paginated results</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_limit">limit</code></td>
<td>
<p>Number of results per page</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_page">page</code></td>
<td>
<p>Page number (base 0 - first page is &quot;0&quot;)</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_sortdirection">sortDirection</code></td>
<td>
<p>Sort direction ('ASC' or 'DESC'). 'ASC' is default.</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_sortproperty">sortProperty</code></td>
<td>
<p>Property to sort by (name, modified_date, performanceScore, id is currently allowed). 'id' is default</p>
</td></tr>
<tr><td><code id="cja_get_filters_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>Expansion</em> options can include the following:
&quot;compatibility&quot;, &quot;definition&quot;, &quot;internal&quot;, &quot;modified&quot;, &quot;isDeleted&quot;,
&quot;definitionLastModified&quot;, &quot;createdDate&quot;, &quot;recentRecordedAccess&quot;,
&quot;performanceScore&quot;, &quot;owner&quot;, &quot;dataId&quot;, &quot;ownerFullName&quot;, &quot;dataName&quot;,
&quot;sharesFullName&quot;, &quot;approved&quot;, &quot;favorite&quot;, &quot;shares&quot;, &quot;tags&quot;, &quot;usageSummary&quot;,
&quot;usageSummaryWithRelevancyScore&quot;
</p>


<h3>Value</h3>

<p>A data frame of company ids and company names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_filters()

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_me'>Get my information</h2><span id='topic+cja_get_me'></span>

<h3>Description</h3>

<p>This function will quickly pull the list of company ids that you have access to
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_me(expansion = NULL, debug = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_me_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional metadata fields to include in the response. Options are 'admin'</p>
</td></tr>
<tr><td><code id="cja_get_me_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the current user metadata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_me()

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_metrics'>Get a list of metrics in CJA</h2><span id='topic+cja_get_metrics'></span>

<h3>Description</h3>

<p>Retrieves a list of metrics available in a specified dataview
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_metrics(
  dataviewId = Sys.getenv("CJA_DATAVIEW_ID"),
  expansion = "description",
  includeType = NULL,
  locale = "en_US",
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_metrics_+3A_dataviewid">dataviewId</code></td>
<td>
<p><em>Required</em> The id of the dataview for which to retrieve metrics. If an environment variable called <code>CJA_DATAVIEW_ID</code> exists
in <code>.Renviron</code> or elsewhere and no <code>dataviewId</code> argument is provided, then the <code>CJA_DATAVIEW_ID</code> value will
be used. Use <code><a href="#topic+cja_get_dataviews">cja_get_dataviews()</a></code> to get a list of available <code>dataviewId</code>.</p>
</td></tr>
<tr><td><code id="cja_get_metrics_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional segment metadata fields to include on response. See Details for all options available.</p>
</td></tr>
<tr><td><code id="cja_get_metrics_+3A_includetype">includeType</code></td>
<td>
<p>Include additional segments not owned by user. Options include: &quot;shared&quot; &quot;templates&quot; &quot;deleted&quot; &quot;internal&quot;</p>
</td></tr>
<tr><td><code id="cja_get_metrics_+3A_locale">locale</code></td>
<td>
<p>Locale - Default: &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="cja_get_metrics_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>Expansion</em> options can include the following:
&quot;approved&quot; &quot;favorite&quot; &quot;tags&quot; &quot;usageSummary&quot; &quot;usageSummaryWithRelevancyScore&quot;
&quot;description&quot; &quot;sourceFieldId&quot; &quot;segmentable&quot; &quot;required&quot; &quot;hideFromReporting&quot;
&quot;hidden&quot; &quot;includeExcludeSetting&quot; &quot;fieldDefinition&quot; &quot;bucketingSetting&quot;
&quot;noValueOptionsSetting&quot; &quot;defaultmetricsort&quot; &quot;persistenceSetting&quot; &quot;storageId&quot;
&quot;tableName&quot; &quot;dataSetIds&quot; &quot;dataSetType&quot; &quot;type&quot; &quot;schemaPath&quot; &quot;hasData&quot;
&quot;sourceFieldName&quot; &quot;schemaType&quot; &quot;sourceFieldType&quot; &quot;fromGlobalLookup&quot;
&quot;multiValued&quot; &quot;precision&quot;
</p>


<h3>Value</h3>

<p>A data frame of metrics in a specified dataview
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_metrics(dataviewId = "dv_5f4f1e2572ea0000003ce262")

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_project_config'>Get a project configuration in CJA</h2><span id='topic+cja_get_project_config'></span>

<h3>Description</h3>

<p>Retrieves a project configuration JSON string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_project_config(
  id = NULL,
  expansion = "definition",
  locale = "en_US",
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_project_config_+3A_id">id</code></td>
<td>
<p>(Required) The Project id for which to retrieve information</p>
</td></tr>
<tr><td><code id="cja_get_project_config_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional segment metadata fields to include on response. See Details for all options available</p>
</td></tr>
<tr><td><code id="cja_get_project_config_+3A_locale">locale</code></td>
<td>
<p>Locale - Default: &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="cja_get_project_config_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>expansion</em> options can include any of the following:
&quot;shares&quot; &quot;tags&quot; &quot;accessLevel&quot; &quot;modified&quot; &quot;externalReferences&quot; &quot;definition&quot;
</p>


<h3>Value</h3>

<p>A project configuration list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_project_config(id = '6047e0a3de6aaaaac7c3accb')

## End(Not run)
</code></pre>

<hr>
<h2 id='cja_get_projects'>Get a paginated list of projects in CJA</h2><span id='topic+cja_get_projects'></span>

<h3>Description</h3>

<p>Retrieves a paginated list of projects, also known as <code style="white-space: pre;">&#8288;Workspace Projects&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cja_get_projects(
  includeType = "all",
  expansion = "definition",
  locale = "en_US",
  filterByIds = NULL,
  pagination = "true",
  ownerId = NULL,
  limit = 10,
  page = 0,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cja_get_projects_+3A_includetype">includeType</code></td>
<td>
<p>Include additional filters not owned by user. Default is &quot;all&quot;. Options include: &quot;all&quot; (default) &quot;shared&quot;</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional segment metadata fields to include on response. See Details for all options available</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_locale">locale</code></td>
<td>
<p>Locale - Default: &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_filterbyids">filterByIds</code></td>
<td>
<p>Filter list to only include filters in the specified list (comma-delimited list of IDs). This has filtered Ids from tags, approved, favorites and user specified Ids list.</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_pagination">pagination</code></td>
<td>
<p>Return paginated results</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_ownerid">ownerId</code></td>
<td>
<p>Filter list to only include filters owned by the specified imsUserId</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_limit">limit</code></td>
<td>
<p>Number of results per page</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_page">page</code></td>
<td>
<p>Page number (base 0 - first page is &quot;0&quot;)</p>
</td></tr>
<tr><td><code id="cja_get_projects_+3A_debug">debug</code></td>
<td>
<p>Used to help troubleshoot api call issues. Shows the call and result in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>expansion</em> options can include any of the following:
&quot;shares&quot; &quot;tags&quot; &quot;accessLevel&quot; &quot;modified&quot; &quot;externalReferences&quot; &quot;definition&quot;
</p>
<p><em>includeType</em> options can include any of the following:
&quot;all&quot;, &quot;shared&quot;
</p>


<h3>Value</h3>

<p>A data frame of projects and corresponding metadata
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cja_get_projects()

## End(Not run)
</code></pre>

<hr>
<h2 id='filter_build'>Build the filter in CJA</h2><span id='topic+filter_build'></span>

<h3>Description</h3>

<p>This function combines rules and/or containers and then makes the post
call to create the filter in CJA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_build(
  dataviewId = Sys.getenv("CJA_DATAVIEW_ID"),
  name = NULL,
  description = NULL,
  containers = NULL,
  rules = NULL,
  sequences = NULL,
  context = "hits",
  conjunction = "and",
  sequence = "in_order",
  sequence_context = "hits",
  exclude = FALSE,
  create_filter = FALSE,
  debug = FALSE,
  locale = "en_US",
  expansion = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_build_+3A_dataviewid">dataviewId</code></td>
<td>
<p>CJA data view id.  If an environment variable called <code>CJA_DATAVIEW_ID</code> exists
in <code>.Renviron</code> or elsewhere and no <code>dataviewId</code> argument is provided, then the <code>CJA_DATAVIEW_ID</code> value will
be used. Use <code><a href="#topic+cja_get_dataviews">cja_get_dataviews()</a></code> to get a list of available <code>dataviewId</code>. Required</p>
</td></tr>
<tr><td><code id="filter_build_+3A_name">name</code></td>
<td>
<p>This is the name of the new filter (required)</p>
</td></tr>
<tr><td><code id="filter_build_+3A_description">description</code></td>
<td>
<p>This is the description of the filter (required)</p>
</td></tr>
<tr><td><code id="filter_build_+3A_containers">containers</code></td>
<td>
<p>List of the container(s) that make up the filter. Containers
are list objects created using the <code><a href="#topic+filter_con">filter_con()</a></code> function.</p>
</td></tr>
<tr><td><code id="filter_build_+3A_rules">rules</code></td>
<td>
<p>List of the rules to create a filter. Rules are
list objects created using the <code>filter_rule()</code> function.</p>
</td></tr>
<tr><td><code id="filter_build_+3A_sequences">sequences</code></td>
<td>
<p>List of the predicate(s) and sequence container(s) that are
combined to make a filter. Sequence containers are list objects created using
the <code>filter_seq()</code> function.</p>
</td></tr>
<tr><td><code id="filter_build_+3A_context">context</code></td>
<td>
<p>Defines the level that the filter logic should operate on. Valid
values are visitors, visits, and hits. See Details</p>
</td></tr>
<tr><td><code id="filter_build_+3A_conjunction">conjunction</code></td>
<td>
<p>This will tell how the different containers and rules
should be compared. Use either 'and' or 'or'.</p>
</td></tr>
<tr><td><code id="filter_build_+3A_sequence">sequence</code></td>
<td>
<p>Used to define if the filter should be 'in_order' (default),
'after', or 'before' the sequence of events</p>
</td></tr>
<tr><td><code id="filter_build_+3A_sequence_context">sequence_context</code></td>
<td>
<p>Used to define the sequential items context which
should be below the container context. ex. if container context is visitors
then the sequence_context should be visits or hits</p>
</td></tr>
<tr><td><code id="filter_build_+3A_exclude">exclude</code></td>
<td>
<p>Excludes the main container which will include all rules.
Only used when the rule arguments are used.</p>
</td></tr>
<tr><td><code id="filter_build_+3A_create_filter">create_filter</code></td>
<td>
<p>Used to determine if the filter should be created in the
UI or if the definition should be returned to be used in a freeform
table API call as a global filter. Default is FALSE, which means the segment
json string will be returned and the segment will not be created in the UI.</p>
</td></tr>
<tr><td><code id="filter_build_+3A_debug">debug</code></td>
<td>
<p>This enables the api call information to show in the console for
help with debugging issues. default is FALSE</p>
</td></tr>
<tr><td><code id="filter_build_+3A_locale">locale</code></td>
<td>
<p>Locale. Default &quot;en_US&quot;</p>
</td></tr>
<tr><td><code id="filter_build_+3A_expansion">expansion</code></td>
<td>
<p>Comma-delimited list of additional filter metadata fields to
include on response. See Detail section for available options</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Context</strong>
The rules in a filter have a context that specify the level of operation.
The context can be visitors, visits or hits.
As an example, let's build a filter rule where revenue is greater than 0 (meaning
a purchase took place) and change the context to see how things change.
If the context is set to visitors, the filter includes all hits from visitors
that have a purchase of some kind during a visit. This is useful in analyzing
customer behavior in visits leading up to a purchase and possibly behavior after
a purchase.
the context is set to visits, the filter includes all hits from visits where
a purchase occurred. This is useful for seeing the behavior of a visitor in
immediate page views leading up to the purchase.
If the context is set to hit, the filter only includes hits where a purchase
occurred, and no other hits. This is useful in seeing which products were most popular.
In the above example, the context for the container listed is hits. This means
that the container only evaluates data at the hit level, (in contrast to visit
or visitor level). The rows in the container are also at the hit level.
</p>
<p><strong>Expansion</strong>
Available option include the following:
&quot;compatibility&quot; &quot;definition&quot; &quot;internal&quot; &quot;modified&quot; &quot;isDeleted&quot; &quot;definitionLastModified&quot;
&quot;createdDate&quot; &quot;recentRecordedAccess&quot; &quot;performanceScore&quot; &quot;owner&quot; &quot;dataId&quot; &quot;ownerFullName&quot;
&quot;dataName&quot; &quot;sharesFullName&quot; &quot;approved&quot; &quot;favorite&quot; &quot;shares&quot; &quot;tags&quot; &quot;usageSummary&quot;
&quot;usageSummaryWithRelevancyScore&quot;
</p>


<h3>Value</h3>

<p>If the filter validates it will return a data frame of the newly
created filter id along with some other basic meta data. If it returns and
error then the error response will be returned to help understand what needs
to be corrected. If the argument <code>create_filter</code> is set to FALSE, the json string
will be returned in list format.
</p>

<hr>
<h2 id='filter_con'>Create the filter container</h2><span id='topic+filter_con'></span>

<h3>Description</h3>

<p>This function combines rules into a container
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_con(
  context = "hits",
  conjunction = "and",
  rules = NULL,
  exclude = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_con_+3A_context">context</code></td>
<td>
<p>Defines the level that the filter logic should operate on. Valid
values are visitors, visits, and hits. See Details</p>
</td></tr>
<tr><td><code id="filter_con_+3A_conjunction">conjunction</code></td>
<td>
<p>This defines the relationship of the rules.  The two options are &quot;and&quot; (default)
and &quot;or&quot;.</p>
</td></tr>
<tr><td><code id="filter_con_+3A_rules">rules</code></td>
<td>
<p>List of rules and/or containers. Must be wrapped in a list() function.
Adding a container list item will nest it within a containers.</p>
</td></tr>
<tr><td><code id="filter_con_+3A_exclude">exclude</code></td>
<td>
<p>Exclude the entire container</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Context</strong>
The rules in a filter have a context that specify the level of operation.
The context can be visitors, visits or hits.
As an example, let's build a filter rule where revenue is greater than 0 (meaning
a purchase took place) and change the context to see how things change.
If the context is set to 'visitors', the filter includes all hits from visitors
that have a purchase of some kind during a visit. This is useful in analyzing
customer behavior in visits leading up to a purchase and possibly behavior after a purchase.
If the context is set to 'visits', the filter includes all hits from visits where
a purchase occurred. This is useful for seeing the behavior of a visitor in
immediate page views leading up to the purchase.
If the context is set to hit, the filter only includes hits where a purchase
occurred, and no other 'hits.' This is useful in seeing which products were most popular.
In the above example, the context for the container listed is hits. This
means that the container only evaluates data at the hit level, (in contrast
to visit or visitor level). The rows in the container are also at the hit level.
</p>


<h3>Value</h3>

<p>a structured list of containers to be used to build the filter
</p>

<hr>
<h2 id='filter_rule'>Create the filter rule</h2><span id='topic+filter_rule'></span>

<h3>Description</h3>

<p>This function creates the simple rule of a filter
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_rule(
  dimension = NULL,
  metric = NULL,
  verb = NULL,
  object = NULL,
  description = NULL,
  is_distinct = FALSE,
  attribution = "repeating",
  attribution_context = "visitors",
  validate = FALSE,
  dataviewId = Sys.getenv("CJA_DATAVIEW_ID")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_rule_+3A_dimension">dimension</code></td>
<td>
<p>This is the subject of the rule. The value should be the dimension
id. Only the dimension or metric can be used at a time.</p>
</td></tr>
<tr><td><code id="filter_rule_+3A_metric">metric</code></td>
<td>
<p>This is the subject of the rule. The value should be the metric
id.  Only the dimension or metric can be used at a time.</p>
</td></tr>
<tr><td><code id="filter_rule_+3A_verb">verb</code></td>
<td>
<p>Choose from any of the 30 different verbs. Use the <code><a href="#topic+filter_verbs">filter_verbs()</a></code>
package data to see all available verbs along with the descriptions.</p>
</td></tr>
<tr><td><code id="filter_rule_+3A_object">object</code></td>
<td>
<p>This is the object of the rule and answers the question <code>what</code> or <code style="white-space: pre;">&#8288;how many&#8288;</code></p>
</td></tr>
<tr><td><code id="filter_rule_+3A_description">description</code></td>
<td>
<p>The internal description for the rule. (optional) This will
not show in the UI but could be very helpful when using the API.</p>
</td></tr>
<tr><td><code id="filter_rule_+3A_is_distinct">is_distinct</code></td>
<td>
<p>This will filter on a distinct count of items within a dimension.
Examples: “Visitors who viewed more than 5 distinct products,” or “Visits where
more than 5 distinct pages were seen.”</p>
</td></tr>
<tr><td><code id="filter_rule_+3A_attribution">attribution</code></td>
<td>
<p>Define the type of attribution. Either <code>repeating</code> (default),
<code>instance</code>, or <code>nonrepeating</code>. See Details for more information.</p>
</td></tr>
<tr><td><code id="filter_rule_+3A_attribution_context">attribution_context</code></td>
<td>
<p>When applying a non-repeating instance attribution model
to a rule the context for the attribution must be <code>visitors</code> (default) or <code>visits</code></p>
</td></tr>
<tr><td><code id="filter_rule_+3A_validate">validate</code></td>
<td>
<p>Set to TRUE when metric or dimension validation is preferred. Default is FALSE.
Validation will slow down the function response time but ensure a valid rule result.</p>
</td></tr>
<tr><td><code id="filter_rule_+3A_dataviewid">dataviewId</code></td>
<td>
<p>CJA data view id.  Required if the argument <code>validate</code> is set to TRUE.
If an environment variable called <code>CJA_DATAVIEW_ID</code> exists in <code>.Renviron</code> or
elsewhere and no <code>dataviewId</code> argument is provided, then the <code>CJA_DATAVIEW_ID</code> value will
be used. Use <code><a href="#topic+cja_get_dataviews">cja_get_dataviews()</a></code> to get a list of available <code>dataviewId</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Attribution Models</strong>
Available for dimensions only, these models determine what values in a dimension to filter for.
Dimension models are particularly useful in sequential filter.
</p>

<ul>
<li> <p><em>repeating</em> (default): Includes instances and persisted values for the dimension.
</p>
</li>
<li> <p><em>instance</em>: Includes instances for the dimension.
</p>
</li>
<li> <p><em>nonrepeating</em> instance: Includes unique instances (non-repeating) for the dimension. This is the model applied in Flow when repeat instances are excluded.
</p>
</li></ul>



<h3>Value</h3>

<p>A structured list defining the rule for a filter
</p>

<hr>
<h2 id='filter_seq'>Create the filter sequence container</h2><span id='topic+filter_seq'></span>

<h3>Description</h3>

<p>This function combines rules into a sequence container
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_seq(
  context = "visits",
  rules = NULL,
  sequence = "in_order",
  exclude = FALSE,
  exclude_checkpoint = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_seq_+3A_context">context</code></td>
<td>
<p>Defines the level that the filter logic should operate on. Valid values for sequential filters is visitors and visits. See Details</p>
</td></tr>
<tr><td><code id="filter_seq_+3A_rules">rules</code></td>
<td>
<p>List of rules created using <code>filter_rule()</code> function. Must wrapped in a list() function.</p>
</td></tr>
<tr><td><code id="filter_seq_+3A_sequence">sequence</code></td>
<td>
<p>How should the sequence of items be considered. Options: <code>in_order</code> (default), <code>before</code>, <code>after</code>, <code>and</code>, <code>or</code></p>
</td></tr>
<tr><td><code id="filter_seq_+3A_exclude">exclude</code></td>
<td>
<p>Excludes the entire sequence container which will include all rules.</p>
</td></tr>
<tr><td><code id="filter_seq_+3A_exclude_checkpoint">exclude_checkpoint</code></td>
<td>
<p>Which checkpoints (rules) should be excluded. Example <code>c(1, 4)</code>. See Details</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Context</strong>
</p>
<p>The rules in a filter have a context that specify the level of operation. The context can be visitors, visits or hits.
As an example, let's build a filter rule where revenue is greater than 0 (meaning a purchase took place) and change the context to see how things change.
If the context is set to visitors, the filter includes all hits from visitors that have a purchase of some kind during a visit. This is useful in analyzing customer behavior in visits leading up to a purchase and possibly behavior after a purchase.
the context is set to visits, the filter includes all hits from visits where a purchase occurred. This is useful for seeing the behavior of a visitor in immediate page views leading up to the purchase.
If the context is set to hit, the filter only includes hits where a purchase occurred, and no other hits. This is useful in seeing which products were most popular.
In the above example, the context for the container listed is hits. This means that the container only evaluates data at the hit level, (in contrast to visit or visitor level). The rows in the container are also at the hit level.
</p>
<p><strong>Exclude checkpoint</strong>
</p>
<p>Ensures the next checkpoint doesn't happen between the
preceding checkpoint and the subsequent checkpoint. If there is no subsequent
checkpoint then the excluded checkpoint must not occur at any point after
the preceding checkpoint. If there is no preceding checkpoint then the
excluded checkpoint must not have occurred at any point preceding the
subsequent checkpoint.
</p>
<p><strong>More Information</strong>
</p>
<p>Sequential filters can be difficult to get right. Referencing this article
can help: https://experienceleague.adobe.com/docs/analytics-platform/using/cja-components/cja-filters/filters-overview.html?lang=en
</p>


<h3>Value</h3>

<p>a structured list of containers to be used to build the filter
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
filter_seq(context = 'visits', rules = list(rule1, rule2),
sequence = 'in_order', exclude = FALSE)
## End(Not run)

</code></pre>

<hr>
<h2 id='filter_then'>Create the filter sequence <code>then</code> object</h2><span id='topic+filter_then'></span>

<h3>Description</h3>

<p>This function creates a 'then' list object which restricts the time constraint of a filter to be added to a sequence filter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_then(limit = "within", count = 1, unit = "year")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_then_+3A_limit">limit</code></td>
<td>
<p>The limitation of the restriction. Either <code>within</code> (default) or <code>after</code></p>
</td></tr>
<tr><td><code id="filter_then_+3A_count">count</code></td>
<td>
<p>How many of the units should be used. <code>1</code> is set as default.</p>
</td></tr>
<tr><td><code id="filter_then_+3A_unit">unit</code></td>
<td>
<p>A unit of time. Valid values are <code>hit</code>, <code>visit</code>, <code>minute</code>, <code>hour</code>, <code>day</code>, <code>week</code> (default), <code>month</code>, <code>quarter</code>, or <code>year</code>. Always use the singular form.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Combining <code>filter_then</code> arguments</h4>

<p>In the UI you can add 'after' and 'within' statements to create a more complex time restriction.
The same can be accomplished using this function by listing the limits, counts, and units in a c()
function. This would look like:  <code style="white-space: pre;">&#8288;limit = c('within', 'after'), count = c(5, 1), unit = c('hit', 'visit')&#8288;</code>
</p>



<h4>Using within and after in the same time <code>filter_then</code> function call</h4>

<p>Time restrictions can only be combined using 'within' first before 'after'.
The function will automatically align these to be in the correct list item order.
</p>



<h4>A word about unit values</h4>

<p>Currently <code>pageviews</code> and <code>dimensions</code> are not supported unit values.
</p>



<h3>Value</h3>

<p>a structured list of time restrictions to be used to build the sequential filter
</p>

<hr>
<h2 id='filter_val'>Validate a filter in CJA</h2><span id='topic+filter_val'></span>

<h3>Description</h3>

<p>Returns a filter validation for a filter contained in a json string object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_val(filter_body = NULL, debug = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filter_val_+3A_filter_body">filter_body</code></td>
<td>
<p>The json string of the filter that is being validated (required)</p>
</td></tr>
<tr><td><code id="filter_val_+3A_debug">debug</code></td>
<td>
<p>This enables the api call information to show in the console for
help with debugging issues. default is FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A validation True or False response
</p>

<hr>
<h2 id='filter_verbs'>Verbs available to be used in filter rules.</h2><span id='topic+filter_verbs'></span>

<h3>Description</h3>

<p>A dataset containing the list of available verbs which can be used in filters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_verbs
</code></pre>


<h3>Format</h3>

<p>A data frame with 34 rows and 5 variables:
</p>

<dl>
<dt>type</dt><dd><p>one of number, string, or exists</p>
</dd>
<dt>class</dt><dd><p>gives the context of the type of value is expected, either
string, list, glob, number, or exists</p>
</dd>
<dt>verb</dt><dd><p>the actual verb id to be used in the segment defition</p>
</dd>
<dt>description</dt><dd><p>a simple description of the verb</p>
</dd>
<dt>arg</dt><dd><p>specifies what argument to use when building the segment verb function</p>
</dd>
</dl>
<p>...

</p>


<h3>Source</h3>

<p><a href="https://experienceleague.adobe.com/en/docs/analytics-platform/using/cja-components/cja-filters/operators">https://experienceleague.adobe.com/en/docs/analytics-platform/using/cja-components/cja-filters/operators</a>
</p>

<hr>
<h2 id='retrieve_cja_token'>Retrieve a token</h2><span id='topic+retrieve_cja_token'></span>

<h3>Description</h3>

<p>Updates (if necessary) and returns a session token. This function first checks
for a session token, then for a cached token, and, finally, generates a
new token. The default type may be set for the session with <code>cja_auth_with()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retrieve_cja_token(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="retrieve_cja_token_+3A_...">...</code></td>
<td>
<p>Further arguments passed to auth functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A token object of type <code>response</code> (JWT) or <code>Token2.0</code> (OAuth)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
