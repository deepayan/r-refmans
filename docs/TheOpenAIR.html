<!DOCTYPE html><html><head><title>Help for package TheOpenAIR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {TheOpenAIR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#%c%'><p>Send a message to ChatGPT and assign the response to a variable</p></a></li>
<li><a href='#add_roxygen'><p>Add Roxygen2 documentation to an R function</p></a></li>
<li><a href='#add_roxygen_prompt'><p>Input: message content template for add_roxygen()</p></a></li>
<li><a href='#add_to_chatlog'><p>Add data to a chat log</p></a></li>
<li><a href='#chat'><p>Start or continue a chat conversation</p></a></li>
<li><a href='#chat_completion'><p>Generate Text Using the OpenAI API's Chat Endpoint</p></a></li>
<li><a href='#chatlog-class'><p>chatlog class</p></a></li>
<li><a href='#clean_output'><p>Clean Output From Code Responses</p></a></li>
<li><a href='#clear_chatlog'><p>Clear a chat log</p></a></li>
<li><a href='#contains_r_func'><p>Check if a text file or character string contains an R function definition</p></a></li>
<li><a href='#contains_roxygen'><p>Check if a text file or character string contains Roxygen2 documentation</p></a></li>
<li><a href='#count_tokens'><p>Count the number of tokens in a text string</p></a></li>
<li><a href='#created'><p>Extract Created DateTime from OpenAI API response</p></a></li>
<li><a href='#df_to_csv'><p>Convert a data.frame to a CSV-formatted character string</p></a></li>
<li><a href='#edit_code'><p>Edit code based on user's input</p></a></li>
<li><a href='#extract_blocks'><p>Extract blocks of a specified type from a list of blocks</p></a></li>
<li><a href='#extract_blocks_content'><p>Extract the content parts of blocks</p></a></li>
<li><a href='#extract_entities'><p>Extract Entities from a Text</p></a></li>
<li><a href='#extract_entities_prompt'><p>Input: message content template for extract_entities()</p></a></li>
<li><a href='#extract_r_code'><p>Extract R code and comments from a given input string.</p></a></li>
<li><a href='#extract_roxygen2'><p>Extract roxygen2 documentation lines from a function definition</p></a></li>
<li><a href='#get_chatlog'><p>Get the current chatlog</p></a></li>
<li><a href='#id'><p>Extract ID from OpenAI API response</p></a></li>
<li><a href='#initialize_messages'><p>Initialize a new messages object for OpenAI API chat completions</p></a></li>
<li><a href='#install_tiktoken'><p>Install the tiktoken Python package</p></a></li>
<li><a href='#is_chatlog'><p>Determine if an object is a chatlog</p></a></li>
<li><a href='#is_json'><p>Check if the provided string is in valid JSON format.</p></a></li>
<li><a href='#is_python'><p>Check if a Character String Contains Valid Python Code</p></a></li>
<li><a href='#is_r'><p>Check if a character string contains valid R code</p></a></li>
<li><a href='#is_xml'><p>Check if the provided string is in valid XML format.</p></a></li>
<li><a href='#java_to_r'><p>Convert Java code to R code</p></a></li>
<li><a href='#java_to_r_prompt'><p>Input: message content template for java_to_r()</p></a></li>
<li><a href='#messages'><p>Extract messages from a response object or a chatlog object</p></a></li>
<li><a href='#messages_content'><p>Extract Messages Content from OpenAI API Response</p></a></li>
<li><a href='#model'><p>Extract Model from OpenAI API response</p></a></li>
<li><a href='#nested_to_pipe'><p>Convert nested R code to pipe syntax</p></a></li>
<li><a href='#nested_to_pipe_prompt'><p>Input: message content template for nested_to_pipe()</p></a></li>
<li><a href='#num_tokens'><p>Get number of tokens in a string using OpenAI's tiktoken library</p></a></li>
<li><a href='#num_tokens_file'><p>Compute total number of tokens in a text file</p></a></li>
<li><a href='#object'><p>Extract object information from OpenAI API response</p></a></li>
<li><a href='#openai_api_key'><p>Set OpenAI API Key as an Environment Variable</p></a></li>
<li><a href='#parse_response'><p>Parse a Response From the API</p></a></li>
<li><a href='#python_to_r'><p>Convert Python code to R code</p></a></li>
<li><a href='#python_to_r_prompt'><p>Input: message content template for python_to_r()</p></a></li>
<li><a href='#r_to_python'><p>Convert R Code to Python Code</p></a></li>
<li><a href='#r_to_python_prompt'><p>Input: message content template for r_to_python()</p></a></li>
<li><a href='#read_text'><p>Convert Text to Tidy-Text Format</p></a></li>
<li><a href='#read_text_batches'><p>Load data from text files in batches</p></a></li>
<li><a href='#refactor'><p>Refactor R Code with AI Assistance</p></a></li>
<li><a href='#refactor_prompt'><p>Input: message content template for refactor()</p></a></li>
<li><a href='#references_to_bibtex'><p>Convert references in plain text to BibTeX format</p></a></li>
<li><a href='#references_to_bibtex_prompt'><p>Input: message content template for references_to_bibtex()</p></a></li>
<li><a href='#regenerate'><p>Regenerate the last response in an ongoing chat</p></a></li>
<li><a href='#replace_file_extension'><p>Replace File Extension</p></a></li>
<li><a href='#set_chatlog'><p>Set up a new chatlog</p></a></li>
<li><a href='#split_text'><p>Split Text into Chunks</p></a></li>
<li><a href='#start_chat'><p>Start a new chat session</p></a></li>
<li><a href='#TheOpenAIR-package'><p>TheOpenAIR: Integrate 'OpenAI' Large Language Models into Your 'R' Workflows</p></a></li>
<li><a href='#trump'><p>Essay on How Donald Trump Became President of the United States</p></a></li>
<li><a href='#usage'><p>Extract usage data from OpenAI API response</p></a></li>
<li><a href='#write_code'><p>Write code based on user's input</p></a></li>
<li><a href='#write_test'><p>Write test for an R function</p></a></li>
<li><a href='#write_test_prompt'><p>Input: message content template for write_test()</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Integrate 'OpenAI' Large Language Models into Your 'R' Workflows</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ulrich Matter &lt;umatter@protonmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Utilizing the 'OpenAI' API as the back end (<a href="https://platform.openai.com/docs/api-reference">https://platform.openai.com/docs/api-reference</a>), 'TheOpenAIR' offers 'R' wrapper functions for the 'ChatGPT' endpoint and several high-level functions that enable the integration of 'ChatGPT' capabilities in diverse data-related tasks, such as data cleansing and automated analytics script generation.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>readr, jsonlite, tidyr, dplyr, lubridate, testthat (&ge;
3.0.0), knitr, rmarkdown</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/reticulate:</td>
<td>list( packages = list( list(package = "tiktoken") )
)</td>
</tr>
<tr>
<td>Imports:</td>
<td>reticulate, magrittr, tibble, methods, stringr, stringi,
data.table, httr, R.utils, xml2, utils, cli, rstudioapi</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://openair-lib.org/">http://openair-lib.org/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-26 08:24:54 UTC; jldc</td>
</tr>
<tr>
<td>Author:</td>
<td>Ulrich Matter [aut, cre, cph],
  Jonathan Chassot [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-27 12:32:30 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling 'rhs(lhs)'.
</p>

<hr>
<h2 id='+25c+25'>Send a message to ChatGPT and assign the response to a variable</h2><span id='topic++25c+25'></span>

<h3>Description</h3>

<p>This function sends a message to the ChatGPT API using the 'chat()' function and returns the response in the specified output format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>message %c% output
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25c+2B25_+3A_message">message</code></td>
<td>
<p>A character string containing the message to be sent to the ChatGPT API.</p>
</td></tr>
<tr><td><code id="+2B25c+2B25_+3A_output">output</code></td>
<td>
<p>A character string specifying the output format. Valid options are &quot;message_to_console&quot;, &quot;message&quot;, or &quot;response_object&quot;. Default is &quot;message_to_console&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depending on the value of the 'output' argument, this function returns one of the following:
* &quot;message_to_console&quot;: a message containing the response text to be printed to the console.
* &quot;message&quot;: the response text as a character vector.
* &quot;response_object&quot;: the full response object from the ChatGPT API.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Send a message and assign the response to a variable
response_var &lt;- "Hello, ChatGPT!" %c% "message"

# Print the response
print(response_var)

# Send a message and return the full response object
response_obj &lt;- "Hello, ChatGPT!" %c% "response_object"

# Print the response
print(response_obj)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_roxygen'>Add Roxygen2 documentation to an R function</h2><span id='topic+add_roxygen'></span>

<h3>Description</h3>

<p>This function adds Roxygen2 documentation to an R function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_roxygen(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_roxygen_+3A_file">file</code></td>
<td>
<p>A character string indicating the path to the file containing the R function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the path provided is a character string, this function returns the documented function as a character string. If the input is a file path, this function returns the path of the file to which documentation was added to the file.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>

<hr>
<h2 id='add_roxygen_prompt'>Input: message content template for add_roxygen()</h2><span id='topic+add_roxygen_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the add_roxygen function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_roxygen_prompt
</code></pre>


<h3>Format</h3>

<p>## 'add_roxygen_prompt'
A data frame with 2 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='add_to_chatlog'>Add data to a chat log</h2><span id='topic+add_to_chatlog'></span>

<h3>Description</h3>

<p>This function adds data to the in-memory chat log, which is in the global environment. The data
can be any R object, such as a vector, list, or data frame. The function supports adding data
to the chat log by providing either a data.frame or a chatlog object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_to_chatlog(msgs, chatlog_id = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_to_chatlog_+3A_msgs">msgs</code></td>
<td>
<p>A chatlog object or a data.frame containing the messages to be added to the chat log.</p>
</td></tr>
<tr><td><code id="add_to_chatlog_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>The id of the chatlog object. Required when the provided msgs is a data.frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The updated chatlog object with the newly added messages.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Add a data frame of messages to an existing chat log
chatlog_df &lt;- data.frame(
user = c("user1", "user2"),
message = c("Hello!", "Hi!")
)
updated_chatlog &lt;- add_to_chatlog(chatlog_df, "existing_chatlog_id")

# Add messages from one chat log to another
chatlog1 &lt;- create_chatlog("chatlog1")
chatlog2 &lt;- create_chatlog("chatlog2")
chatlog1 &lt;- add_message(chatlog1, "user1", "Hello!")
chatlog2 &lt;- add_message(chatlog2, "user2", "Hi!")
merged_chatlog &lt;- add_to_chatlog(chatlog1, chatlog2@chatlog_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='chat'>Start or continue a chat conversation</h2><span id='topic+chat'></span>

<h3>Description</h3>

<p>This function starts or continues a chat conversation by adding the user's message to the conversation.
If the conversation does not exist, a new one will be initiated. The response can be displayed in the
console, returned as a character vector, or returned as a full response object from the ChatGPT API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chat(
  message,
  chatlog_id = ".__CURRENTCHAT__",
  output = "message_to_console",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="chat_+3A_message">message</code></td>
<td>
<p>A character string representing the message to be added to the chat conversation.</p>
</td></tr>
<tr><td><code id="chat_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>A character string representing the ID of the chat conversation to start or continue.
Default is &quot;.__CURRENTCHAT__&quot;.</p>
</td></tr>
<tr><td><code id="chat_+3A_output">output</code></td>
<td>
<p>A character string indicating the output format of the response. Default is &quot;message_to_console&quot;.
Valid options are &quot;message_to_console&quot;, &quot;message&quot;, or &quot;response_object&quot;.</p>
</td></tr>
<tr><td><code id="chat_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the 'chat_completion' function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depending on the value of the 'output' argument, this function returns one of the following:
* &quot;message_to_console&quot;: a message containing the response text is printed to the console (default).
* &quot;message&quot;: the response text as a character vector.
* &quot;response_object&quot;: the full response object from the ChatGPT API.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Start a new chat and print the response to the console
chat("What's the weather like today?")

# Continue the chat, but return the response as a character vector
response_text &lt;- chat("What about tomorrow's weather?", output = "message")

## End(Not run)
</code></pre>

<hr>
<h2 id='chat_completion'>Generate Text Using the OpenAI API's Chat Endpoint</h2><span id='topic+chat_completion'></span>

<h3>Description</h3>

<p>This function generates natural language text in a conversational style using the OpenAI API's chat endpoint.
It takes a series of chat messages as input, either as a data.frame or a chatlog object, and generates a text
completion based on the conversation history and the specified model parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chat_completion(
  msgs,
  model = "gpt-3.5-turbo",
  temperature = NULL,
  max_tokens = NULL,
  n = NULL,
  stop = NULL,
  presence_penalty = NULL,
  frequency_penalty = NULL,
  best_of = NULL,
  logit_bias = NULL,
  stream = FALSE,
  top_p = NULL,
  user = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="chat_completion_+3A_msgs">msgs</code></td>
<td>
<p>A data.frame containing the chat history to generate text from or a chatlog object.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_model">model</code></td>
<td>
<p>A character string specifying the ID of the model to use.
The default value is &quot;gpt-3.5-turbo&quot;.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_temperature">temperature</code></td>
<td>
<p>An optional numeric scalar specifying the sampling temperature to use.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_max_tokens">max_tokens</code></td>
<td>
<p>An optional integer scalar specifying the maximum number of tokens to generate in the text.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_n">n</code></td>
<td>
<p>An optional integer scalar specifying the number of text completions to generate.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_stop">stop</code></td>
<td>
<p>An optional character string or character vector specifying one or more stop sequences to use when generating the text.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_presence_penalty">presence_penalty</code></td>
<td>
<p>An optional numeric scalar specifying the presence penalty to use when generating the text. The default value is NULL.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_frequency_penalty">frequency_penalty</code></td>
<td>
<p>An optional numeric scalar specifying the frequency penalty to use when generating the text. The default value is NULL.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_best_of">best_of</code></td>
<td>
<p>An optional integer scalar specifying the number of completions to generate and return the best one. The default value is NULL.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_logit_bias">logit_bias</code></td>
<td>
<p>An optional named numeric vector specifying the logit bias to use for each token in the generated text.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_stream">stream</code></td>
<td>
<p>An optional logical scalar specifying whether to use the streaming API. The default value is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_top_p">top_p</code></td>
<td>
<p>An optional numeric scalar specifying the top p sampling ratio. The default value is NULL.</p>
</td></tr>
<tr><td><code id="chat_completion_+3A_user">user</code></td>
<td>
<p>A unique identifier representing your end-user, which can help OpenAI to monitor and detect abuse.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing the generated text(s).
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>See Also</h3>

<p><a href="https://platform.openai.com/docs/">https://platform.openai.com/docs/</a> for more information on the OpenAI API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
openai_api_key("your_api_key_here")
msgs_df &lt;- data.frame(role=c("system",
"user",
"assistant",
"user"),
content=c("You are a helpful assistant",
"Who won the world series in 2020?",
"The Los Angeles Dodgers won the World Series in 2020.",
"Where was it played?"))
chat_completion(msgs_df)

## End(Not run)
</code></pre>

<hr>
<h2 id='chatlog-class'>chatlog class</h2><span id='topic+chatlog-class'></span>

<h3>Description</h3>

<p>chatlog class
</p>


<h3>Slots</h3>


<dl>
<dt><code>messages</code></dt><dd><p>The message data of the object</p>
</dd>
<dt><code>chatlog_id</code></dt><dd><p>The chatlog's ID</p>
</dd>
</dl>

<hr>
<h2 id='clean_output'>Clean Output From Code Responses</h2><span id='topic+clean_output'></span>

<h3>Description</h3>

<p>This function extracts the content from a given text string that is enclosed between the '&ldquo;'' markers. It can be used to extract any kind of code or text content.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_output(text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_output_+3A_text">text</code></td>
<td>
<p>A character string containing the code or text content with '&ldquo;'' markers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string containing the extracted code or text content.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>code_text &lt;- "```
example_code &lt;- function(x) {
  return(x * 2)
}
```"
clean_output(code_text)
</code></pre>

<hr>
<h2 id='clear_chatlog'>Clear a chat log</h2><span id='topic+clear_chatlog'></span>

<h3>Description</h3>

<p>This function clears a chat log, leaving only the initial (system) message.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_chatlog(chatlog_id = ".__CURRENTCHAT__")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clear_chatlog_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>character string indicating the name of the chat log to clear.
Default is &quot;.__CURRENTCHAT__&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function does not return anything.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Clear the current chat log
clear_chatlog()

## End(Not run)
</code></pre>

<hr>
<h2 id='contains_r_func'>Check if a text file or character string contains an R function definition</h2><span id='topic+contains_r_func'></span>

<h3>Description</h3>

<p>This function parses a text file or a character string and returns TRUE if it contains
a valid R function definition. It uses a regex pattern to identify
possible R function definitions and then attempts to parse the matched
lines as R code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contains_r_func(input)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contains_r_func_+3A_input">input</code></td>
<td>
<p>A character string specifying the path to the text file, or a character
string containing the text to be checked for an R function definition.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value (TRUE or FALSE) indicating whether the input
contains a valid R function definition.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a temporary file with an R function definition
temp_file &lt;- tempfile(fileext = ".R")
writeLines("example_function &lt;- function(x) {\n  return(x * 2)\n}", temp_file)

# Check if the temporary file contains an R function definition
result &lt;- contains_r_func(temp_file)
print(result) # Should print TRUE

# Check if a character string contains an R function definition
result &lt;- contains_r_func("example_function &lt;- function(x) { return(x * 2) }")
print(result) # Should print TRUE

# Remove the temporary file
file.remove(temp_file)
</code></pre>

<hr>
<h2 id='contains_roxygen'>Check if a text file or character string contains Roxygen2 documentation</h2><span id='topic+contains_roxygen'></span>

<h3>Description</h3>

<p>This function parses a text file or a character string and returns TRUE if it contains
Roxygen2 documentation. It uses a regex pattern to identify
possible Roxygen2 documentation lines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contains_roxygen(input)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contains_roxygen_+3A_input">input</code></td>
<td>
<p>A character string specifying the path to the text file, or a character
string containing the text to be checked for Roxygen2 documentation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value (TRUE or FALSE) indicating whether the input
contains Roxygen2 documentation.
</p>

<hr>
<h2 id='count_tokens'>Count the number of tokens in a text string</h2><span id='topic+count_tokens'></span>

<h3>Description</h3>

<p>This function takes a file path, URL or character string as input and
returns the number of tokens in the text. Tokens are defined as words and/or
special characters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_tokens(text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="count_tokens_+3A_text">text</code></td>
<td>
<p>A file path, URL or character string representing the text to be
tokenized.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer representing the number of tokens in the text.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Example 1: File path
test_file_path &lt;- tempfile()
writeLines("This is a test.", test_file_path)
expect_equal(count_tokens(test_file_path), 5)
file.remove(test_file_path)

# Example 2: URL
url &lt;- "https://www.gutenberg.org/files/2701/2701-0.txt"
count_tokens(url)

# Example 3: Character string
text &lt;- "This is a test string."
count_tokens(text)

## End(Not run)

</code></pre>

<hr>
<h2 id='created'>Extract Created DateTime from OpenAI API response</h2><span id='topic+created'></span>

<h3>Description</h3>

<p>This function extracts the date-time string of when the response was created from the parsed HTTP response of an API call to the
OpenAI chat completions endpoint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>created(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="created_+3A_response">response</code></td>
<td>
<p>a list object representing the HTTP response</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Date object representing the date-time string of when the response was created
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>

<hr>
<h2 id='df_to_csv'>Convert a data.frame to a CSV-formatted character string</h2><span id='topic+df_to_csv'></span>

<h3>Description</h3>

<p>The 'df_to_csv' function takes a data.frame as input and returns a character
string representing the content of the original data.frame formatted as a CSV file.
The resulting CSV-formatted string can be written to a file or further processed
as needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df_to_csv(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="df_to_csv_+3A_df">df</code></td>
<td>
<p>A data.frame to be converted to a CSV-formatted character string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string representing the data values in the input data.frame
formatted as a CSV file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a data.frame
example_data &lt;- data.frame(
  Name = c("Alice", "Bob", "Carol"),
  Age = c(30, 25, 28),
  Height = c(168, 175, 162),
  stringsAsFactors = FALSE
)

# Convert the data.frame to a CSV-formatted character string
csv_string &lt;- df_to_csv(example_data)
cat(csv_string)
</code></pre>

<hr>
<h2 id='edit_code'>Edit code based on user's input</h2><span id='topic+edit_code'></span>

<h3>Description</h3>

<p>The 'edit_code' function prompts the user to provide a plain English description of how the code in a given file
should be modified. The function then generates the modified code based on the user's input
and writes it back to the specified file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edit_code(filename, chatlog_id = ".__CURRENTCODEFILE__")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edit_code_+3A_filename">filename</code></td>
<td>
<p>A character string representing the name of the file containing the code to be edited.</p>
</td></tr>
<tr><td><code id="edit_code_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>An optional character string representing the chatlog ID. Defaults to &quot;.__CURRENTCODEFILE__&quot;.
This ID is used to maintain the conversation history with the AI.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the name of the file containing the modified code.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Edit code in an existing file based on user input
modified_code_file &lt;- edit_code("example_code.R")

# Check the content of the modified code file
cat(readLines(modified_code_file))

## End(Not run)
</code></pre>

<hr>
<h2 id='extract_blocks'>Extract blocks of a specified type from a list of blocks</h2><span id='topic+extract_blocks'></span>

<h3>Description</h3>

<p>Extract blocks of a specified type from a list of blocks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_blocks(block_list, block_type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_blocks_+3A_block_list">block_list</code></td>
<td>
<p>A list of blocks</p>
</td></tr>
<tr><td><code id="extract_blocks_+3A_block_type">block_type</code></td>
<td>
<p>The type of blocks to be extracted</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of blocks of the specified type
</p>


<h3>Author(s)</h3>

<p>Jonathan Chassot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Example 1: Extract 'code' blocks
blocks &lt;- list(
  list(type = "text", content = "Hello world!"),
  list(type = "code", content = "print('Hello world!')")
)
extract_blocks(blocks, "code")
# Output:
# [[1]]
# $type
# [1] "code"
#
# $content
# [1] "print('Hello world!')"

# Example 2: Extract 'text' blocks
blocks &lt;- list(
  list(type = "text", content = "Hello world!"),
  list(type = "code", content = "print('Hello world!')")
)
extract_blocks(blocks, "text")
# Output:
# [[1]]
# $type
# [1] "text"
#
# $content
# [1] "Hello world!"

## End(Not run)
</code></pre>

<hr>
<h2 id='extract_blocks_content'>Extract the content parts of blocks</h2><span id='topic+extract_blocks_content'></span>

<h3>Description</h3>

<p>This function takes a list of blocks and returns a list of their content parts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_blocks_content(block_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_blocks_content_+3A_block_list">block_list</code></td>
<td>
<p>A list of blocks to extract the content from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of content parts
</p>

<hr>
<h2 id='extract_entities'>Extract Entities from a Text</h2><span id='topic+extract_entities'></span>

<h3>Description</h3>

<p>This function takes a character string or a path to a text file and returns a tibble describing the entities found in the text.
The type of entities to be searched for and extracted can be defined by the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_entities(
  text,
  entity_types = c("locations", "persons", "organizations"),
  batch_size = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_entities_+3A_text">text</code></td>
<td>
<p>A character string containing the text to be processed, or a path to a text file</p>
</td></tr>
<tr><td><code id="extract_entities_+3A_entity_types">entity_types</code></td>
<td>
<p>A character vector containing names of entity types to be extracted. Defaults to c(&quot;locations&quot;, &quot;persons&quot;, &quot;organizations&quot;).</p>
</td></tr>
<tr><td><code id="extract_entities_+3A_batch_size">batch_size</code></td>
<td>
<p>An integer indicating the size of each batch, if the text input is supposed to be processed in batches. Set this to NULL to process all at once.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 
extract_entities("Hello, how are you?")
extract_entities("path/to/text/file.txt",  batch_size = 100)

## End(Not run)

</code></pre>

<hr>
<h2 id='extract_entities_prompt'>Input: message content template for extract_entities()</h2><span id='topic+extract_entities_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the extract_entities function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_entities_prompt
</code></pre>


<h3>Format</h3>

<p>## 'extract_entities_prompt'
A data frame with 2 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='extract_r_code'>Extract R code and comments from a given input string.</h2><span id='topic+extract_r_code'></span>

<h3>Description</h3>

<p>This function takes an input string, detects R code and comments, and returns a character vector
containing the R code and comments. The input string is split into lines based on newline characters,
and each line is examined for R code and comment patterns. Only the lines that match either of these
patterns are returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_r_code(input_string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_r_code_+3A_input_string">input_string</code></td>
<td>
<p>A character string containing R code and comments, mixed with other text.
The string may contain multiple lines separated by newline characters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing R code and comment lines extracted from the input string.
Each element in the vector corresponds to one line of code or a comment.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example_string &lt;- 
"This is a text string with R code and comments.\n
# A comment\n
x &lt;- 5\
ny = 10\n
z &lt;- x + y\n
Another line of text."
extract_r_code(example_string)
</code></pre>

<hr>
<h2 id='extract_roxygen2'>Extract roxygen2 documentation lines from a function definition</h2><span id='topic+extract_roxygen2'></span>

<h3>Description</h3>

<p>This function takes a character vector containing the lines of a function
definition and returns a character string containing only the lines
belonging to the roxygen2 documentation (lines starting with &quot;#'&quot;).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_roxygen2(func_def)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_roxygen2_+3A_func_def">func_def</code></td>
<td>
<p>A character vector containing the lines of a function definition</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string containing the roxygen2 documentation lines
</p>


<h3>Examples</h3>

<pre><code class='language-R'>func_def &lt;- c(
  "#' Extracts object from a response list",
  "#'",
  "#' @export",
  "object &lt;- function(response) {",
  "  if (!is.list(response)) {",
  "    stop('Invalid response format. Expected list object.')",
  "  }",
  "}")

roxygen2_docu &lt;- extract_roxygen2(func_def)
print(roxygen2_docu)
</code></pre>

<hr>
<h2 id='get_chatlog'>Get the current chatlog</h2><span id='topic+get_chatlog'></span>

<h3>Description</h3>

<p>This function extracts the current chatlog of a given chat from the chat environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_chatlog(x = ".__CURRENTCHAT__")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_chatlog_+3A_x">x</code></td>
<td>
<p>either a chatlog object r, or a character string representing the id of a chatlog (the default is &quot;.__CURRENTCHAT__&quot;, the current log of the chat()-function)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a chatlog object
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>

<hr>
<h2 id='id'>Extract ID from OpenAI API response</h2><span id='topic+id'></span>

<h3>Description</h3>

<p>This function extracts the ID from the parsed HTTP response of an API call to the
OpenAI chat completions endpoint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>id(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="id_+3A_response">response</code></td>
<td>
<p>a list object representing the HTTP response</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string representing the ID from the response
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>

<hr>
<h2 id='initialize_messages'>Initialize a new messages object for OpenAI API chat completions</h2><span id='topic+initialize_messages'></span>

<h3>Description</h3>

<p>This function initializes a new messages object as a template for messages sent to the OpenAI API
https://api.openai.com/v1/chat/completions endpoint. By default, the template contains a single message from
the system to the user with the initial content &quot;You are a helpful assistant.&quot;, but you can customize the content
by specifying a different value for the &quot;initial_system_content&quot; parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initialize_messages(
  initial_role = "system",
  initial_content = "You are a helpful assistant."
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initialize_messages_+3A_initial_role">initial_role</code></td>
<td>
<p>A character string representing the role issueing the initial content (per default: &quot;system&quot;)</p>
</td></tr>
<tr><td><code id="initialize_messages_+3A_initial_content">initial_content</code></td>
<td>
<p>A character string representing the initial message from the system</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing a single message from the system to the user, with columns for the
message role and content.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>messages &lt;- initialize_messages()
messages_custom &lt;- initialize_messages("Hello! How can I assist you today?")

</code></pre>

<hr>
<h2 id='install_tiktoken'>Install the tiktoken Python package</h2><span id='topic+install_tiktoken'></span>

<h3>Description</h3>

<p>This function installs the tiktoken Python package using the specified installation method 
and Conda environment (if any).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>install_tiktoken(method = "auto", conda = "auto")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="install_tiktoken_+3A_method">method</code></td>
<td>
<p>The installation method to use. Can be one of &quot;auto&quot; (default), &quot;conda&quot;, 
&quot;virtualenv&quot;, &quot;pip&quot;, or &quot;windows&quot;.</p>
</td></tr>
<tr><td><code id="install_tiktoken_+3A_conda">conda</code></td>
<td>
<p>The name or path of the Conda environment to use for the installation, 
or &quot;auto&quot; (default) to let reticulate automatically manage the environment.</p>
</td></tr>
</table>

<hr>
<h2 id='is_chatlog'>Determine if an object is a chatlog</h2><span id='topic+is_chatlog'></span>

<h3>Description</h3>

<p>This function checks if an object is of class &quot;chatlog&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_chatlog(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_chatlog_+3A_object">object</code></td>
<td>
<p>An R object to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if the object is of class &quot;chatlog&quot;, FALSE otherwise
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_chatlog("Hello, World!")
# [1] FALSE

chat &lt;- new("chatlog")
is_chatlog(chat)
# [1] TRUE
</code></pre>

<hr>
<h2 id='is_json'>Check if the provided string is in valid JSON format.</h2><span id='topic+is_json'></span>

<h3>Description</h3>

<p>Check if the provided string is in valid JSON format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_json(input_string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_json_+3A_input_string">input_string</code></td>
<td>
<p>A character string to be checked for JSON format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value. If the input string is in valid JSON format, returns TRUE, otherwise returns FALSE.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_json('{"name": "John", "age": 30}')
# TRUE

is_json('{"name": "John", age: 30}')
# FALSE

is_json('')
# FALSE
</code></pre>

<hr>
<h2 id='is_python'>Check if a Character String Contains Valid Python Code</h2><span id='topic+is_python'></span>

<h3>Description</h3>

<p>This function takes a character string as input and checks if it contains valid Python code. It returns TRUE if the string contains valid Python code, and FALSE otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_python(code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_python_+3A_code">code</code></td>
<td>
<p>A character string containing code to be checked for Python code validity.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function presuposes that python is installed on the system.
</p>


<h3>Value</h3>

<p>A logical value: TRUE if the input character string contains valid Python code, and FALSE otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Check if the string contains valid Python code
is_python("print('Hello, World!')")

# Check if the string contains invalid Python code
is_python("prit('Hello, World!')")

## End(Not run)
</code></pre>

<hr>
<h2 id='is_r'>Check if a character string contains valid R code</h2><span id='topic+is_r'></span>

<h3>Description</h3>

<p>This function takes a character string as input and attempts to parse it as R code using the
'parse' function. If the parsing is successful, the function returns TRUE, indicating that
the input string contains valid R code. If parsing fails, the function returns FALSE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_r(code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_r_+3A_code">code</code></td>
<td>
<p>A character string containing the R code to be checked.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value indicating whether the input code string contains valid R code or not.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Valid R code
valid_code &lt;- "x &lt;- 5; y &lt;- 10; z &lt;- x + y"
is_r(valid_code)

# Invalid R code
invalid_code &lt;- "x &lt;- 5 + 'a'"
is_r(invalid_code)

</code></pre>

<hr>
<h2 id='is_xml'>Check if the provided string is in valid XML format.</h2><span id='topic+is_xml'></span>

<h3>Description</h3>

<p>Check if the provided string is in valid XML format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_xml(input_string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_xml_+3A_input_string">input_string</code></td>
<td>
<p>A character string to be checked for XML format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value. If the input string is in valid XML format, returns TRUE, otherwise returns FALSE.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_xml('&lt;?xml version="1.0"?&gt;&lt;root&gt;&lt;element&gt;value&lt;/element&gt;&lt;/root&gt;')
# TRUE

is_xml('&lt;root&gt;&lt;element&gt;value&lt;/element&gt;&lt;/root&gt;')
# FALSE

is_xml('')
# FALSE
</code></pre>

<hr>
<h2 id='java_to_r'>Convert Java code to R code</h2><span id='topic+java_to_r'></span>

<h3>Description</h3>

<p>This function takes Java code as input and returns the corresponding R code.
It uses GPT-4 powered chat to perform the code conversion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>java_to_r(java)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="java_to_r_+3A_java">java</code></td>
<td>
<p>A character string containing the Java code to be converted to R, or a filename with the Java code.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is not guaranteed to provide perfect conversions and might produce invalid R code in some cases.
Users are encouraged to verify the output code carefully.
</p>


<h3>Value</h3>

<p>If the input is a character string, the resulting R code will be printed and returned as a character string.
If the input is a filename, the resulting R code will be saved as a file with the same name as the input file, but with the extension '.R', and the filename will be returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Convert a simple Java code snippet to R
java_code &lt;- "public class HelloWorld {
               public static void main(String[] args) {
                 System.out.println(\"Hello, world!\");
               }
             }"
r_code &lt;- java_to_r(java_code)
cat(r_code)

# Convert Java code from a file and save the result to an R file
input_file &lt;- "path/to/java_file.java"
output_file &lt;- java_to_r(input_file)

## End(Not run)

</code></pre>

<hr>
<h2 id='java_to_r_prompt'>Input: message content template for java_to_r()</h2><span id='topic+java_to_r_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the java_to_r() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>java_to_r_prompt
</code></pre>


<h3>Format</h3>

<p>## 'java_to_r_prompt'
A data frame with 2 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='messages'>Extract messages from a response object or a chatlog object</h2><span id='topic+messages'></span>

<h3>Description</h3>

<p>This function takes a response object or a chatlog object as input and
returns the messages. If the input is a response object, the function
extracts and returns the messages from the choices. If the input is a
chatlog object, the function returns the messages directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>messages(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="messages_+3A_x">x</code></td>
<td>
<p>A list representing a response object or a chatlog object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing the messages
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Using a response object
response &lt;- list(choices = list(message = "This is a message."))
messages_from_response &lt;- messages(response)
print(messages_from_response)

# Using a chatlog object
chatlog_id &lt;- chat("Hello, how are you?")
chatlog &lt;- get_chatlog(chatlog_id)
messages_from_chatlog &lt;- messages(chatlog)
print(messages_from_chatlog)

## End(Not run)
</code></pre>

<hr>
<h2 id='messages_content'>Extract Messages Content from OpenAI API Response</h2><span id='topic+messages_content'></span>

<h3>Description</h3>

<p>This function extracts the messages content from the HTTP response of an API call to the
OpenAI chat completions endpoint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>messages_content(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="messages_content_+3A_response">response</code></td>
<td>
<p>a list object representing the HTTP response</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string representing the choices/messages from the response
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>

<hr>
<h2 id='model'>Extract Model from OpenAI API response</h2><span id='topic+model'></span>

<h3>Description</h3>

<p>This function extracts the model from the parsed HTTP response of an API call to the
OpenAI chat completions endpoint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_+3A_response">response</code></td>
<td>
<p>a list object representing the HTTP response</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string representing the model from the response
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>

<hr>
<h2 id='nested_to_pipe'>Convert nested R code to pipe syntax</h2><span id='topic+nested_to_pipe'></span>

<h3>Description</h3>

<p>This function takes an R script containing traditional (nested syntax) R code and
converts it to magrittr-style syntax, using the pipe (
It also validates the input and output code to ensure proper R syntax.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nested_to_pipe(r, n_tokens_limit = 3000, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nested_to_pipe_+3A_r">r</code></td>
<td>
<p>A file path or character string containing the R code to be converted.</p>
</td></tr>
<tr><td><code id="nested_to_pipe_+3A_n_tokens_limit">n_tokens_limit</code></td>
<td>
<p>The maximum number of tokens allowed in the input text (default: 3000).</p>
</td></tr>
<tr><td><code id="nested_to_pipe_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the chat_completion function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If r is a character string, the function returns the converted R code as a character string. If r is a file path, the function writes the converted code to a new file with the same name and a &quot;-pipe.R&quot; suffix, and returns the path to the output file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Converting a character string
input &lt;- "result &lt;- mean(sqrt(abs(rnorm(10, 0, 1))), na.rm = TRUE)"
output &lt;- nested_to_pipe(input)
cat(output)

# Converting a file
# Create a temporary input file
input_file &lt;- tempfile(fileext = ".R")
write("result &lt;- mean(sqrt(abs(rnorm(10, 0, 1))), na.rm = TRUE)", input_file)

# Convert the file using nested_to_pipe
output_file &lt;- nested_to_pipe(input_file)

# Check the converted file content
cat(readLines(output_file))

## End(Not run)
</code></pre>

<hr>
<h2 id='nested_to_pipe_prompt'>Input: message content template for nested_to_pipe()</h2><span id='topic+nested_to_pipe_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the nested_to_pipe() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nested_to_pipe_prompt
</code></pre>


<h3>Format</h3>

<p>## 'nested_to_pipe_prompt'
A data frame with 4 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='num_tokens'>Get number of tokens in a string using OpenAI's tiktoken library</h2><span id='topic+num_tokens'></span>

<h3>Description</h3>

<p>This function uses the num_tokens_from_string function provided in OpenAI's
tiktoken python library to get the number of tokens in a string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>num_tokens(text, encoding = "cl100k_base")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="num_tokens_+3A_text">text</code></td>
<td>
<p>a character string to count the number of tokens from</p>
</td></tr>
<tr><td><code id="num_tokens_+3A_encoding">encoding</code></td>
<td>
<p>a character string that specifies how text is converted into tokens. The default is &quot;cl100k_base&quot; (for ChatGPT models; see https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb for details)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an integer indicating the number of tokens in the input string
</p>


<h3>References</h3>

<p>https://github.com/openai/openai-cookbook/blob/main/examples/How_to_count_tokens_with_tiktoken.ipynb
</p>

<hr>
<h2 id='num_tokens_file'>Compute total number of tokens in a text file</h2><span id='topic+num_tokens_file'></span>

<h3>Description</h3>

<p>The function batch-wise computes the total number of tokens in a text file. 
The function returns a numeric value indicating the total
number of tokens in the file. The function can be used on very large text files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>num_tokens_file(filename, batch_size = 1000, encoding = "cl100k_base")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="num_tokens_file_+3A_filename">filename</code></td>
<td>
<p>character string indicating the name of the text file to read in</p>
</td></tr>
<tr><td><code id="num_tokens_file_+3A_batch_size">batch_size</code></td>
<td>
<p>integer indicating the number of lines to read in per batch (default is 1000)</p>
</td></tr>
<tr><td><code id="num_tokens_file_+3A_encoding">encoding</code></td>
<td>
<p>character string indicating the encoding to use (default is &quot;cl100k_base&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric value indicating the total number of tokens in the text file
</p>

<hr>
<h2 id='object'>Extract object information from OpenAI API response</h2><span id='topic+object'></span>

<h3>Description</h3>

<p>This function extracts the object data from the parsed HTTP response of an API call to the
OpenAI chat completions endpoint (provides information about the endpoint).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>object(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="object_+3A_response">response</code></td>
<td>
<p>a list object representing the HTTP response</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the usage statistics of the API call (how many tokens used)
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>

<hr>
<h2 id='openai_api_key'>Set OpenAI API Key as an Environment Variable</h2><span id='topic+openai_api_key'></span>

<h3>Description</h3>

<p>This function sets the OpenAI API key as an environment variable in the current R session.
It takes the API key as an input and stores it as an environment variable, allowing other
functions to access the key when needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>openai_api_key(api_key)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="openai_api_key_+3A_api_key">api_key</code></td>
<td>
<p>A character string containing the OpenAI API key.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing is returned; the function is called for its side effects.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>See Also</h3>

<p><a href="https://platform.openai.com/docs/">https://platform.openai.com/docs/</a> for more information on the OpenAI API.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Set the OpenAI API key for the current R session
openai_api_key("your_api_key_here")

## End(Not run)
</code></pre>

<hr>
<h2 id='parse_response'>Parse a Response From the API</h2><span id='topic+parse_response'></span>

<h3>Description</h3>

<p>This function takes an input string containing both text and code blocks,
and returns a list of blocks with their respective type, content, and language (if applicable).
Each block is either of type 'text' or 'code'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_response(input_string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_response_+3A_input_string">input_string</code></td>
<td>
<p>The response from the API</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of blocks with type, content, and language (for code blocks)
</p>


<h3>Author(s)</h3>

<p>Jonathan Chassot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
parse_response("Hello world!")
# [[1]]
# [[1]]$type
# [1] "text"
#
# [[1]]$content
# [1] "Hello world!"
#
parse_response("```python\nprint('Hello world!')\n```")
# [[1]]
# [[1]]$type
# [1] "code"
#
# [[1]]$content
# [1] "print('Hello world!')"
#
# [[1]]$language
# [1] "python"
#
parse_response("Hello world!\n\n```python\nprint('Hello world!')\n```")
# [[1]]
# [[1]]$type
# [1] "text"
#
# [[1]]$content
# [1] "Hello world!"
#
# [[2]]
# [[2]]$type
# [1] "code"
#
# [[2]]$content
# [1] "print('Hello world!')"
#
# [[2]]$language
# [1] "python"
#

## End(Not run)
</code></pre>

<hr>
<h2 id='python_to_r'>Convert Python code to R code</h2><span id='topic+python_to_r'></span>

<h3>Description</h3>

<p>This function takes a Python code file or character string as input and attempts to
convert the code to R using the OpenAI API. The function provides feedback on
the total tokens used during the conversion and warns if the output might not be valid R code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>python_to_r(py)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="python_to_r_+3A_py">py</code></td>
<td>
<p>A file path or character string containing the Python code to be converted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the input is a character string, the function returns the converted R code as a
character string. If the input is a file, the function writes the converted R code to a
new file with the same name and a &quot;.R&quot; extension, and returns the output file path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Convert a Python code string to R code
python_code &lt;- "x = 5"
r_code &lt;- python_to_r(python_code)
print(r_code)

# Convert a Python code file to an R code file
python_file &lt;- "path/to/your/python_file.py"
r_file &lt;- python_to_r(python_file)
cat(readLines(r_file), sep = "\n")

## End(Not run)

</code></pre>

<hr>
<h2 id='python_to_r_prompt'>Input: message content template for python_to_r()</h2><span id='topic+python_to_r_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the python_to_r() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>python_to_r_prompt
</code></pre>


<h3>Format</h3>

<p>## 'python_to_r_prompt'
A data frame with 2 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='r_to_python'>Convert R Code to Python Code</h2><span id='topic+r_to_python'></span>

<h3>Description</h3>

<p>This function takes an R code file as input and uses a language model to convert the R code to Python code. The converted Python code is then either returned as a character string or written to a file, depending on the input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r_to_python(r)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="r_to_python_+3A_r">r</code></td>
<td>
<p>The R code file to be converted to Python code. This should be a file path in the form of a character string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the input filename is a &quot;character string&quot;, the converted Python code will be returned as a character string. Otherwise, a new Python file will be created with the same name as the input file but with a &quot;.py&quot; extension, and the function will return the file path of the newly created Python file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Convert R code to Python code and display the result as a character string
r_to_python("example.R")

# Convert R code to Python code and save it to a file
r_to_python("example.R", output_file = "example.py")

## End(Not run)
</code></pre>

<hr>
<h2 id='r_to_python_prompt'>Input: message content template for r_to_python()</h2><span id='topic+r_to_python_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the r_to_python() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r_to_python_prompt
</code></pre>


<h3>Format</h3>

<p>## 'r_to_python_prompt'
A data frame with 2 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='read_text'>Convert Text to Tidy-Text Format</h2><span id='topic+read_text'></span>

<h3>Description</h3>

<p>This function takes a character string or a path to a text file as input and converts it 
to tidy-text format. The resulting tibble contains one row for each line of the input text,
along with the file name, and line number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_text(text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_text_+3A_text">text</code></td>
<td>
<p>A character string containing the text to be converted, or a path to a text file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the converted text in tidy-text format, with columns for the text,
file name, line number, and batch index (if applicable).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>read_text("Hello, how are you?")
read_text("path/to/text/file.txt")

</code></pre>

<hr>
<h2 id='read_text_batches'>Load data from text files in batches</h2><span id='topic+read_text_batches'></span>

<h3>Description</h3>

<p>This function reads in data from text files in batches using the read_lines_chunked
function from the readr package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_text_batches(text, batch_size = 3500)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_text_batches_+3A_text">text</code></td>
<td>
<p>character string, either containing a path to a text file to read in or containing the text.</p>
</td></tr>
<tr><td><code id="read_text_batches_+3A_batch_size">batch_size</code></td>
<td>
<p>integer indicating the number of lines to read in per batch (default is 3500)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric value indicating the total number of tokens in the text file
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data_path &lt;- system.file("text", "lorem.txt", package = "OpenAIR")
text_data &lt;- read_text_batches(data_path)

## End(Not run)
</code></pre>

<hr>
<h2 id='refactor'>Refactor R Code with AI Assistance</h2><span id='topic+refactor'></span>

<h3>Description</h3>

<p>This function refactors R code with the assistance of an AI chatbot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refactor(file, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="refactor_+3A_file">file</code></td>
<td>
<p>character, file name of a file containing R code to be refactored or a character string containing R code to be refactored</p>
</td></tr>
<tr><td><code id="refactor_+3A_...">...</code></td>
<td>
<p>optional arguments to be passed to the chat_completion function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The refactored code either to the console (if the input 'file' was a character string) or written to a file (if the input was a file name).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create a sample R function file
cat("my_sum &lt;- function(a, b) {", "return(a + b)", "}", file = "sample_function.R")

# Refactor the R function and return the output
refactored_function &lt;- refactor(file = "sample_function.R")

# Refactor the R function and write the output to the same file
refactor(file = "sample_function.R")

## End(Not run)
</code></pre>

<hr>
<h2 id='refactor_prompt'>Input: message content template for refactor()</h2><span id='topic+refactor_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the refactor() function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refactor_prompt
</code></pre>


<h3>Format</h3>

<p>## 'nested_to_pipe_prompt'
A data frame with 2 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='references_to_bibtex'>Convert references in plain text to BibTeX format</h2><span id='topic+references_to_bibtex'></span>

<h3>Description</h3>

<p>This function takes a character string or a file path to plain text references and
converts them into BibTeX format. The function reads the input text, processes it, and
returns a character string containing the references in BibTeX format. If a file path is
provided, the function also writes the BibTeX entries to a .bib file in the same
directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>references_to_bibtex(references)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="references_to_bibtex_+3A_references">references</code></td>
<td>
<p>A character string or a file path to a file containing the plain text references to convert.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string containing the references in BibTeX format or, if a file path is provided, the function writes the BibTeX entries to a .bib file in the same directory and returns the file path of the newly created .bib file.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>See Also</h3>

<p><a href="https://ctan.org/pkg/bibtex">https://ctan.org/pkg/bibtex</a> for more information on BibTeX format
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Convert plain text references to BibTeX format
references &lt;- "Doe, J., &amp; Smith, J. (2020). The title of the paper.
Journal of Scientific Computing, 12, 45-67."
references_to_bibtex(references)

## End(Not run)
</code></pre>

<hr>
<h2 id='references_to_bibtex_prompt'>Input: message content template for references_to_bibtex()</h2><span id='topic+references_to_bibtex_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the references_to_bibtex
function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>references_to_bibtex_prompt
</code></pre>


<h3>Format</h3>

<p>## 'references_to_bibtex_prompt'
A data frame with 4 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

<hr>
<h2 id='regenerate'>Regenerate the last response in an ongoing chat</h2><span id='topic+regenerate'></span>

<h3>Description</h3>

<p>This function removes the last response in a chatlog, generates a new response
based on the updated chatlog, and updates the chatlog accordingly. The output
can be displayed as a message in the console, returned as a message, or returned
as a response object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regenerate(chatlog_id = ".__CURRENTCHAT__", output = "message_to_console")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regenerate_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>A character string specifying the ID of the chatlog (default: '.__CURRENTCHAT__')</p>
</td></tr>
<tr><td><code id="regenerate_+3A_output">output</code></td>
<td>
<p>A character string specifying the output format. Options are 'message_to_console', 'message', or 'response_object' (default: 'message_to_console')</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If output is 'message_to_console', the function returns NULL and prints the message to the console.
If output is 'message', the function returns a character string containing the message.
If output is 'response_object', the function returns the full response object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Start a new chat and save the chatlog ID
chatlog_id &lt;- chat("Hello, how are you?")

# Regenerate the last response in the chat and display it in the console
regenerate(chatlog_id)

# Regenerate the last response in the chat and return it as a message
message &lt;- regenerate(chatlog_id, output = "message")
print(message)

# Regenerate the last response in the chat and return it as a response object
response_object &lt;- regenerate(chatlog_id, output = "response_object")
print(response_object)

## End(Not run)
</code></pre>

<hr>
<h2 id='replace_file_extension'>Replace File Extension</h2><span id='topic+replace_file_extension'></span>

<h3>Description</h3>

<p>This function replaces the file extension of a given filename with a specified new extension.
It validates the input to ensure the filename and the new extension are single character strings.
Then, it replaces the old extension with the new one and returns the modified filename.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replace_file_extension(filename, new_extension)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replace_file_extension_+3A_filename">filename</code></td>
<td>
<p>The input filename as a character string.</p>
</td></tr>
<tr><td><code id="replace_file_extension_+3A_new_extension">new_extension</code></td>
<td>
<p>The new file extension to replace the old one (including the dot, e.g., &quot;.bib&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string representing the filename with the replaced file extension.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter umatter@protonmail.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Replace the file extension of a text file with a BibTeX extension
new_filename &lt;- replace_file_extension("example_document.txt", ".bib")
print(new_filename) # "example_document.bib"

## End(Not run)
</code></pre>

<hr>
<h2 id='set_chatlog'>Set up a new chatlog</h2><span id='topic+set_chatlog'></span>

<h3>Description</h3>

<p>This function sets up a new chatlog object for a conversation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_chatlog(
  initial_role = "system",
  initial_content = "You are a helpful assistant.",
  chatlog_id = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_chatlog_+3A_initial_role">initial_role</code></td>
<td>
<p>A character string representing the role issueing the initial content (per default: &quot;system&quot;)</p>
</td></tr>
<tr><td><code id="set_chatlog_+3A_initial_content">initial_content</code></td>
<td>
<p>A character string representing the initial message from the system</p>
</td></tr>
<tr><td><code id="set_chatlog_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>A character string representing the ID of this conversation. Per default, this will be set automatically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new chatlog object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>chat &lt;- set_chatlog("Welcome to our chat!")
is_chatlog(chat)
chat
</code></pre>

<hr>
<h2 id='split_text'>Split Text into Chunks</h2><span id='topic+split_text'></span>

<h3>Description</h3>

<p>This function splits a text string into a vector of strings with a
specified number of tokens each.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_text(text, N)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_text_+3A_text">text</code></td>
<td>
<p>A character vector containing the text to be split.</p>
</td></tr>
<tr><td><code id="split_text_+3A_n">N</code></td>
<td>
<p>An integer specifying the number of tokens per chunk.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing the chunks of text with N tokens each.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>large_text &lt;- "This is an example of a large text string 
that will be split into chunks of N tokens each by our custom R function."
num_tokens_per_chunk &lt;- 5
split_text(large_text, num_tokens_per_chunk)
</code></pre>

<hr>
<h2 id='start_chat'>Start a new chat session</h2><span id='topic+start_chat'></span>

<h3>Description</h3>

<p>This function starts a new chat session by initializing a messages object with an initial system message,
creating a new log environment to store the messages, and adding the messages object to the log environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>start_chat(
  initial_role = "system",
  initial_content = "You are a helpful assistant.",
  show = FALSE,
  chatlog_id = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="start_chat_+3A_initial_role">initial_role</code></td>
<td>
<p>A character string representing the role issueing the initial content (per default: &quot;system&quot;)</p>
</td></tr>
<tr><td><code id="start_chat_+3A_initial_content">initial_content</code></td>
<td>
<p>A character string representing the initial message from the system</p>
</td></tr>
<tr><td><code id="start_chat_+3A_show">show</code></td>
<td>
<p>Logical, if TRUE, the current chat log is displayed via View(). Default is FALSE.</p>
</td></tr>
<tr><td><code id="start_chat_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>A character string representing the ID of this conversation. Per default, this will be set automatically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string indicating the name of the log environment created for the chat session.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Start a new chat session with the default system message
chatlog_id &lt;- start_chat()

# Start a new chat session with a custom system message
chatlog_id &lt;- start_chat("How can I assist you today?")

</code></pre>

<hr>
<h2 id='TheOpenAIR-package'>TheOpenAIR: Integrate 'OpenAI' Large Language Models into Your 'R' Workflows</h2><span id='topic+TheOpenAIR'></span><span id='topic+TheOpenAIR-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Utilizing the 'OpenAI' API as the back end (<a href="https://platform.openai.com/docs/api-reference">https://platform.openai.com/docs/api-reference</a>), 'TheOpenAIR' offers 'R' wrapper functions for the 'ChatGPT' endpoint and several high-level functions that enable the integration of 'ChatGPT' capabilities in diverse data-related tasks, such as data cleansing and automated analytics script generation.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ulrich Matter <a href="mailto:umatter@protonmail.com">umatter@protonmail.com</a> [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Jonathan Chassot <a href="mailto:jonathan.chassot@unisg.ch">jonathan.chassot@unisg.ch</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="http://openair-lib.org/">http://openair-lib.org/</a>
</p>
</li></ul>


<hr>
<h2 id='trump'>Essay on How Donald Trump Became President of the United States</h2><span id='topic+trump'></span>

<h3>Description</h3>

<p>This dataset contains an essay describing how Donald Trump became the 45th
President of the United States in 2016. The essay is written in the style of
Mark Twain, a famous American writer known for his satirical and humorous
style.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trump
</code></pre>


<h3>Format</h3>

<p>## 'trump'
A character string.
</p>


<h3>Source</h3>

<p>This essay was written by a language model trained by OpenAI.
</p>

<hr>
<h2 id='usage'>Extract usage data from OpenAI API response</h2><span id='topic+usage'></span>

<h3>Description</h3>

<p>This function extracts the usage data from the parsed HTTP response of an API call to the
OpenAI chat completions endpoint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usage(response)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="usage_+3A_response">response</code></td>
<td>
<p>a list object representing the HTTP response</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the usage statistics of the API call (how many tokens used)
</p>

<hr>
<h2 id='write_code'>Write code based on user's input</h2><span id='topic+write_code'></span>

<h3>Description</h3>

<p>The 'write_code' function prompts the user to provide a plain English description of a program or function
and the programming language it should be written in. The function then generates the code based on the user's input
and writes it to a specified file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_code(filename, chatlog_id = ".__CURRENTCODEFILE__")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_code_+3A_filename">filename</code></td>
<td>
<p>A character string representing the name of the file where the generated code will be saved.</p>
</td></tr>
<tr><td><code id="write_code_+3A_chatlog_id">chatlog_id</code></td>
<td>
<p>An optional character string representing the chatlog ID. Defaults to &quot;.__CURRENTCODEFILE__&quot;.
This ID is used to maintain the conversation history with the chatbot API.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the name of the file containing the generated code.
</p>


<h3>Author(s)</h3>

<p>Ulrich Matter
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Generate code based on user input and save it to a file
generated_code_file &lt;- write_code("example_code.R")

# Check the content of the generated code file
cat(readLines(generated_code_file))

# Clean up
unlink(generated_code_file)

## End(Not run)
</code></pre>

<hr>
<h2 id='write_test'>Write test for an R function</h2><span id='topic+write_test'></span>

<h3>Description</h3>

<p>This function reads an R function from a file and generates a test file with
documentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_test(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_test_+3A_file">file</code></td>
<td>
<p>The file path of the R function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the input is a character string, the function returns the
generated output without creating a test file. Otherwise, it creates a test
file and returns the file name.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Write test for an R function
write_test("path/to/file.R")

## End(Not run)
</code></pre>

<hr>
<h2 id='write_test_prompt'>Input: message content template for write_test()</h2><span id='topic+write_test_prompt'></span>

<h3>Description</h3>

<p>This message content serves as user input for the write_test function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_test_prompt
</code></pre>


<h3>Format</h3>

<p>## 'write_test_prompt'
A data frame with 2 rows and 2 columns representing the messages object in API calls.
</p>


<h3>Source</h3>

<p>Contributed by umatter
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
