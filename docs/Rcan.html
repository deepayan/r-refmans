<!DOCTYPE html><html><head><title>Help for package Rcan</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Rcan}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#csu_ageSpecific'><p>csu_ageSpecific</p></a></li>
<li><a href='#csu_ageSpecific_top'><p>csu_ageSpecific_top</p></a></li>
<li><a href='#csu_asr'><p>csu_asr</p></a></li>
<li><a href='#csu_bar_top'><p>csu_bar_top</p></a></li>
<li><a href='#csu_ci5_mean'>
<p>cancer registry data</p></a></li>
<li><a href='#csu_CI5XI_data'>
<p>Cancer in five continent volume XI.</p></a></li>
<li><a href='#csu_cumrisk'><p>csu_cumrisk</p></a></li>
<li><a href='#csu_eapc'><p>csu_eapc</p></a></li>
<li><a href='#csu_group_cases'><p>csu_group_cases</p></a></li>
<li><a href='#csu_merge_cases_pop'><p>csu_merge_cases_pop</p></a></li>
<li><a href='#csu_registry_data_1'>
<p>cancer registry data</p></a></li>
<li><a href='#csu_registry_data_2'>
<p>cancer registry data</p></a></li>
<li><a href='#csu_time_trend'><p>csu_time_trend</p></a></li>
<li><a href='#csu_trend_legend'><p>csu_trend_legend</p></a></li>
<li><a href='#csu_trendCohortPeriod'><p>csu_trendCohortPeriod</p></a></li>
<li><a href='#data_individual_file'>
<p>Data individual example</p></a></li>
<li><a href='#data_population_file'>
<p>Population data example</p></a></li>
<li><a href='#ICD_group_CI5'>
<p>ICD10 group detailed example</p></a></li>
<li><a href='#ICD_group_GLOBOCAN'>
<p>ICD10 group example</p></a></li>
<li><a href='#Rcan-package'>
<p>Cancer Registry Data Analysis and Visualisation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.3.82</td>
</tr>
<tr>
<td>Title:</td>
<td>Cancer Registry Data Analysis and Visualisation</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-05-17</td>
</tr>
<tr>
<td>Author:</td>
<td>Mathieu Laversanne [aut, cre],
  Jerome Vignat [aut],
  Cancer Surveillance Unit [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mathieu Laversanne &lt;laversannem@iarc.fr&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for basic and advance cancer statistics and graphics.
	Groups individual data, merges registry data and population data, calculates age-specific rate, age-standardized rate, cumulative risk, estimated annual percentage rate with standards error. Creates graphics across variable and
    time, such as age-specific trends, bar chart and period-cohort trends.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/timat35/Rcan">https://github.com/timat35/Rcan</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, stats, ggplot2, grid, scales, grDevices, graphics,
utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-05-19 09:16:58 UTC; laversannem</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-05-19 11:40:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='csu_ageSpecific'>csu_ageSpecific</h2><span id='topic+csu_ageSpecific'></span>

<h3>Description</h3>

<p><code>csu_ageSpecific</code> calculate and plot Age-Specific Rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_ageSpecific(df_data,
		var_age="age",
        var_cases="cases",
        var_py="py",
        group_by = NULL, 
        missing_age = NULL,
        db_rate = 100000,
		logscale=FALSE,
        plot_title=NULL,
        legend=csu_trend_legend(),
        color_trend = NULL,
        CI5_comparison=NULL,
        var_rate="rate") 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_ageSpecific_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_var_age">var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
 <td style="text-align: left;">
			1 </td><td style="text-align: left;"> "0-4" </td><td style="text-align: left;"> 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
			2 </td><td style="text-align: left;"> "5-9" </td><td style="text-align: left;"> 5 </td>
</tr>
<tr>
 <td style="text-align: left;">
			3 </td><td style="text-align: left;"> "10-14" </td><td style="text-align: left;"> 10 </td>
</tr>
<tr>
 <td style="text-align: left;">
			... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
			17 </td><td style="text-align: left;"> "80-84" </td><td style="text-align: left;"> 80 </td>
</tr>
<tr>
 <td style="text-align: left;">
			18 </td><td style="text-align: left;"> "85+" </td><td style="text-align: left;"> 85 </td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

<p>Missing age value must be precise in the option <code>missing_age</code>.<br />
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_var_cases">var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_var_py">var_py</code></td>
<td>

<p>Population year variable.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_group_by">group_by</code></td>
<td>

<p>Variable to compare different age specific rate (sex, country, cancer ...).<br />
Only one variable can be chosen.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_missing_age">missing_age</code></td>
<td>

<p>Age value representing the missing age cases.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_db_rate">db_rate</code></td>
<td>

<p>The denominator population. Default is 100000.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_logscale">logscale</code></td>
<td>

<p>Logical value: if <code>TRUE</code> Y-axis use logscale.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_plot_title">plot_title</code></td>
<td>

<p>Title of the plot.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_legend">legend</code></td>
<td>

<p>Legend option: see <code><a href="#topic+csu_trend_legend">csu_trend_legend</a></code>.<br />
Use only if <code>group_by</code> is not <code>NULL</code>.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_color_trend">color_trend</code></td>
<td>

<p>Vector of color for the trend.
The color codes are hexadecimal (e.g. &quot;#FF0000&quot;) or predefined R color names (e.g. &quot;red&quot;).
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_ci5_comparison">CI5_comparison</code></td>
<td>

<p>Add a dotted line representing the CI5XI for a specific cancer.<br />
Value can be a cancer_label (example: &quot;Liver&quot;), or a cancer_code (example = 16).<br />
See <code><a href="#topic+csu_ci5_mean">csu_ci5_mean</a></code> to get the list of possible values.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_+3A_var_rate">var_rate</code></td>
<td>

<p>Name of the age specific variable if a dataframe is return.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculate and plot the age specific rate. 
The <code>group_by</code> option allow to compare different population or cancer.
The <code>CI5_comparison</code> option allow to compare with the CI5XI and therefore test the quality of the data.
If the population data stops before 85+ (75+ for instance), the population data <b>must</b> be 0 when the population data is unknown so, the program can detect automatically the last age group (70+,75+,80+ or 85+) for population.
</p>


<h3>Value</h3>

<p>Return a plot and a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>References</h3>

<p><a href="https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf">https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(csu_registry_data_1)
data(csu_registry_data_2)

# you can import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")

# to select only 1 population.
test &lt;- subset(csu_registry_data_1 , registry_label == "Colombia, Cali")


# plot age specific rate for 1 population.
csu_ageSpecific(test,
				plot_title = "Colombia, Liver, male")

# plot age specific rate for 1 population, and comparison with CI5XI data.
csu_ageSpecific(test,
				plot_title = "Colombia, Liver, male",
				CI5_comparison = "Liver")

# plot age specific rate for 4 population, 
# legend at the bottom and comparison with CI5XI data using cancer code.
csu_ageSpecific(
	csu_registry_data_1,
	group_by="registry_label",
	legend=csu_trend_legend(position="bottom", nrow = 1),
	plot_title = "Liver, male",
	CI5_comparison = 16
	)

	

# plot age specific rate for 4 population, legend at the right.
csu_ageSpecific(
	csu_registry_data_1,
	group_by="registry_label",
	legend=csu_trend_legend(
		position="right", right_space_margin = 6.5
	),
	plot_title = "Liver, male")	



# Plot embedded in a graphic device
pdf("test.pdf",width = 11.692 , height =  8.267) 


csu_ageSpecific(
	csu_registry_data_1,
	group_by="registry_label",
	legend=csu_trend_legend(position="bottom", nrow = 2),
	plot_title = "Liver, male",
	CI5_comparison = 16)

plot.new()

csu_ageSpecific(
	csu_registry_data_1,
	group_by="registry_label",
	legend=csu_trend_legend(
		position="right", right_space_margin = 6.5
	),
	plot_title = "Liver, male")	



dev.off()





	
</code></pre>

<hr>
<h2 id='csu_ageSpecific_top'>csu_ageSpecific_top</h2><span id='topic+csu_ageSpecific_top'></span>

<h3>Description</h3>

<p><code>csu_ageSpecific_top</code> calculate and plot Age-Specific Rate for the top X cancer or top X population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_ageSpecific_top(df_data,
           var_age="age",
       	   var_cases="cases",
           var_py="py",
           var_top, 
           group_by=NULL,
           missing_age=NULL,
           db_rate = 100000,
           logscale = FALSE,
           nb_top = 5,
           plot_title=NULL,
           plot_subtitle=NULL,
           var_color=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_ageSpecific_top_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_var_age">var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
 <td style="text-align: left;">
			1 </td><td style="text-align: left;"> "0-4" </td><td style="text-align: left;"> 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
			2 </td><td style="text-align: left;"> "5-9" </td><td style="text-align: left;"> 5 </td>
</tr>
<tr>
 <td style="text-align: left;">
			3 </td><td style="text-align: left;"> "10-14" </td><td style="text-align: left;"> 10 </td>
</tr>
<tr>
 <td style="text-align: left;">
			... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
			17 </td><td style="text-align: left;"> "80-84" </td><td style="text-align: left;"> 80 </td>
</tr>
<tr>
 <td style="text-align: left;">
			18 </td><td style="text-align: left;"> "85+" </td><td style="text-align: left;"> 85 </td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

<p>Missing age value must be precise in the option <code>missing_age</code>.<br />
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_var_cases">var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_var_py">var_py</code></td>
<td>

<p>Population year variable.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_var_top">var_top</code></td>
<td>

<p>Cancer label variable or country/registry variable for example.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_group_by">group_by</code></td>
<td>

<p>Variable to compare different age specific rate (sex, registry ...).<br />
Only one variable can be chosen.
One graph will be produce per variable.
If the variable is a factor, the labels associate to the variable will be the subtitle of the plot.
See <code><a href="base.html#topic+factor">factor</a></code>.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_missing_age">missing_age</code></td>
<td>

<p>Age value representing the missing age cases.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_db_rate">db_rate</code></td>
<td>

<p>The denominator population. Default is 100000.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_logscale">logscale</code></td>
<td>

<p>Logical value: if <code>TRUE</code> Y-axis use logscale.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_nb_top">nb_top</code></td>
<td>

<p>Lowest Rank include. Default is 5.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_plot_title">plot_title</code></td>
<td>

<p>Title of the plot.
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_plot_subtitle">plot_subtitle</code></td>
<td>

<p>Subtitle of the plot. (For example, &quot;Top 5 cancer&quot;).
</p>
</td></tr>
<tr><td><code id="csu_ageSpecific_top_+3A_var_color">var_color</code></td>
<td>

<p>Variable with a color associate to each cancer.<br />
The color codes are hexadecimal (e.g. &quot;#FF0000&quot;) or predefined R color names (e.g. &quot;red&quot;).<br />
This allow to keep the same color coding for each graph.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function keep only the top X cancer and plot their age specific rate.
The <code>group_by</code> option allow to compare different population. 
If the population data stops before 85+ (75+ for instance), the population data <b>must</b> be 0 when the population data is unknown so, the program can detect automatically the last age group (70+,75+,80+ or 85+) for population.
</p>


<h3>Value</h3>

<p>Return plots and a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>References</h3>

<p><a href="https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf">https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(Rcan)
data("csu_CI5XI_data")

#get the registry code asssociate to registry_label
#print(unique(csu_CI5XI_data[,c("registry_label", "registry_code")]),nrows = 1000)

#get the cancer code asssociate to cancer_label
#print(unique(csu_CI5XI_data[,c("cancer_label", "cancer_code")]),nrows = 1000)

#remove all cancers:
df_data &lt;- subset(csu_CI5XI_data ,cancer_code &lt; 62)
df_data$sex &lt;- factor(df_data$sex, levels=c(1,2), labels=c("Male", "Female"))

#select Thailand changmai
df_data_1 &lt;- subset(df_data, registry_code==764001)


# plot for Thailand Changmai
dt_result_1 &lt;- 
	csu_ageSpecific_top(df_data_1,
		var_age="age", 
		var_cases="cases", 
		var_py="py",
		var_top="cancer_label", 
		group_by="sex", 
		plot_title= "Thailand, Chiangmai",
		plot_subtitle = "Top 5 cancer",
		missing_age = 19)



	#select USAm NPCR
	df_data_2 &lt;- subset(df_data,registry_code== 840000 &amp; ethnic_group == 99)


	# plot for USA NPCR
	dt_result_2 &lt;- 
		csu_ageSpecific_top(
			df_data_2,
			var_age="age", 
			var_cases="cases", 
			var_py="py",
			var_top="cancer_label", 
			group_by="sex", 
			plot_title= "USA",
			plot_subtitle = "Top 5 cancer",
			missing_age = 19
			)




	
</code></pre>

<hr>
<h2 id='csu_asr'>csu_asr</h2><span id='topic+csu_asr'></span>

<h3>Description</h3>

<p><code>csu_asr</code> calculate Age-Standardized Rate (ASR) and Truncated Age-Standardized Rate (TASR) across different population (Registry, year, sex...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_asr(df_data,
		var_age = "age",
		var_cases = "cases",
		var_py ="py",
		group_by=NULL,
		var_age_group=NULL,
		missing_age = NULL,
		db_rate = 100000,
		first_age = 1,
		last_age = 18,
		pop_base = "SEGI",
		crude_rate = FALSE,
		var_st_err = NULL,
		correction_info = FALSE,
		var_asr = "asr",
		age_dropped = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_asr_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_var_age">var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
 <td style="text-align: left;">
			1 </td><td style="text-align: left;"> "0-4" </td><td style="text-align: left;"> 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
			2 </td><td style="text-align: left;"> "5-9" </td><td style="text-align: left;"> 5 </td>
</tr>
<tr>
 <td style="text-align: left;">
			3 </td><td style="text-align: left;"> "10-14" </td><td style="text-align: left;"> 10 </td>
</tr>
<tr>
 <td style="text-align: left;">
			... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
			17 </td><td style="text-align: left;"> "80-84" </td><td style="text-align: left;"> 80 </td>
</tr>
<tr>
 <td style="text-align: left;">
			18 </td><td style="text-align: left;"> "85+" </td><td style="text-align: left;"> 85 </td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

<p>Missing age value must be precise in the option <code>missing_age</code>.<br />
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_var_cases">var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_var_py">var_py</code></td>
<td>

<p>Population year variable.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_group_by">group_by</code></td>
<td>

<p>A vector of variables to compare different ASR (sex, country, cancer ...).<br />
Any variable included in the next option var_age_group <b>must</b> be also include here.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_var_age_group">var_age_group</code></td>
<td>

<p>Variables over which the number of population age-group might change.<br />
For example the last age group (70+, 75+, 80+ or 85+) can vary across registries, or year, but not across sex.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_missing_age">missing_age</code></td>
<td>

<p>Age value representing the missing age cases.<br /> 
If not precise, missing age value will not affect the calculation.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_db_rate">db_rate</code></td>
<td>

<p>The denominator population. Default is 100000.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_first_age">first_age</code></td>
<td>

<p>First age group included (for Truncated ASR), <b>must</b> be between 1 and 17. 1 represents 0-4, 2 represents 5-9, ... 5 represents 20-24 etc.<br />
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_last_age">last_age</code></td>
<td>

<p>Last age group included (for Truncated ASR), <b>must</b> be between 2 and 18. 2 represents 5-9, ... 5 represents 20-24, ... 18 represents 85+ etc.<br />
To calculate ASR for 15-69 years, use: <code>first_age(4), last_age(14)</code>.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_pop_base">pop_base</code></td>
<td>

<p>Select the standard population:<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		"SEGI" </td><td style="text-align: left;"> SEGI world standard population (1960).</td>
</tr>
<tr>
 <td style="text-align: left;">
		"EURO" </td><td style="text-align: left;"> EURO is the European standard population (1976).</td>
</tr>
<tr>
 <td style="text-align: left;">
		"EURO2" </td><td style="text-align: left;"> EURO2 is the European standard population (2013).</td>
</tr>
<tr>
 <td style="text-align: left;">
		"WHO" </td><td style="text-align: left;"> WHO is the WHO standard population (2001).</td>
</tr>
<tr>
 <td style="text-align: left;">
	</td>
</tr>

</table>

</td></tr>
<tr><td><code id="csu_asr_+3A_crude_rate">crude_rate</code></td>
<td>

<p>Logical value. if <code>TRUE</code> calculate the crude rate instead of the ASR.<br />
Variables <code>var_age_group</code>, <code>missing_age</code>, <code>pop_base</code>, <code>var_st_err</code>, <code>correction_info</code> are not used.<br />
Default name of the new variable is &quot;crude_rate&quot;.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_var_st_err">var_st_err</code></td>
<td>

<p>Calculate the Standard error and name of the new variable. 
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_correction_info">correction_info</code></td>
<td>

<p>Logical value. if <code>TRUE</code> compute the variable &quot;correction&quot; : percentage of missing age cases.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_var_asr">var_asr</code></td>
<td>

<p>Name of the new variable for the ASR.
</p>
</td></tr>
<tr><td><code id="csu_asr_+3A_age_dropped">age_dropped</code></td>
<td>

<p>Only for truncated ASR.<br />
Logical value: if <code>TRUE</code>, Assume the age group not used are already dropped from the data.<br />
First_age and last_age option <b>must</b> still be filled.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function take automatically account the number of age group (last age group can be 70+,75+,80+,85+):<br />
If the population data stops before 85+ (75+ for instance), the population data <b>must</b> be 0 when the population data is unknown so, the program can detect automatically the last age group (70+,75+,80+ or 85+) for population.
</p>


<h3>Value</h3>

<p>Give the list of population with less than 18 age group (last age group: 70+, 75+, 80+).<br />
Return a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>References</h3>

<p><a href="https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf">https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(csu_registry_data_1)
data(csu_registry_data_2)

# you can import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")

# Age standardized rate (ASR) with no missing age cases.
result &lt;- csu_asr(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
                  var_age_group = c("registry_label"))
				  
# you can export your result as csv file using write.csv:
# write.csv(result, file="result.csv")
				  
# ASR,  with the percentage of correction due to missing age cases. 
result &lt;- csu_asr(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
                  var_age_group = c("registry_label"),
				  missing_age = 19,				  
				  correction_info = TRUE)	
				  
# ASR and standard error with missing age.
result &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
                  var_st_err = "st_err",
				  missing_age = 99)
				  
# Truncated ASR, 25-69 years.
result &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
                  var_st_err = "st_err",
				  first_age = 6, 
				  last_age = 14,
				  missing_age = 99)	

# Truncated ASR, 0-15 with denominator population = 1000000. 
result &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
                  var_st_err = "st_err",
				  first_age = 1, 
				  last_age = 3, 
				  missing_age = 99,	
				  db_rate = 1000000)		
				  
# ASR with EURO population as reference (instead of SEGI)
result &lt;- csu_asr(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
                  var_age_group = c("registry_label"),
				  missing_age = 19,
                  pop_base = "EURO")
				    		  
</code></pre>

<hr>
<h2 id='csu_bar_top'>csu_bar_top</h2><span id='topic+csu_bar_top'></span>

<h3>Description</h3>

<p><code>csu_bar_top</code> plots top X single-sided or double-sided bar chart.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_bar_top(df_data,
	var_value, 
	var_bar,
	group_by=NULL,
	nb_top = 10,
	plot_title=NULL,
	plot_subtitle=NULL,
	xtitle= NULL,
	label_by=NULL,
	color=NULL,
	digits = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_bar_top_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see examples to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_var_value">var_value</code></td>
<td>

<p>Value variable.<br />
There must be only 1 value for each bar.
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_var_bar">var_bar</code></td>
<td>

<p>Bar label variable.
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_group_by">group_by</code></td>
<td>


<ul>
<li><p> Single-sided bar chart. <code>NULL</code> (default)
</p>
</li>
<li><p> Double-sided bar chart. Variable name with exactly 2 values. (For example, &quot;sex&quot;).
</p>
</li></ul>

<p>Must be filled if <code>label_by</code> argument is defined.
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_nb_top">nb_top</code></td>
<td>

<p>Lowest Rank included. Default is 10.
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_plot_title">plot_title</code></td>
<td>

<p>Title of the plot. (For example, &quot;Top 10 cancer sites&quot;).
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_plot_subtitle">plot_subtitle</code></td>
<td>

<p>Subtitle of the plot. (For example, &quot;Males&quot;).
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_xtitle">xtitle</code></td>
<td>

<p>x-axe title. (For example, &quot;Number of cases&quot;).
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_label_by">label_by</code></td>
<td>

<p>2 values vector. Will overwrite the legend label for double-sided bar chart. (See <code>group_by</code>).<br />
For example: c(&quot;Male&quot;, &quot;Female&quot;). 
</p>
</td></tr>
<tr><td><code id="csu_bar_top_+3A_color">color</code></td>
<td>

<p>The color codes are hexadecimal (e.g. &quot;#FF0000&quot;) or predefined R color names (e.g. &quot;red&quot;).<br />
</p>

<ul>
<li><p> Single-sided bar chart. 1 hexadecimal color code (same color for each bar) or variable name with a color associated to each bar label variable. 
</p>
</li>
<li><p> Double-sided bar chart. 2 values vector. For example: c(&quot;#2c7bb6&quot;,&quot;#b62ca1&quot;).
</p>
</li></ul>

</td></tr>
<tr><td><code id="csu_bar_top_+3A_digits">digits</code></td>
<td>

<p>Number of decimal digits. Default: 1
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function plots a top X (default is top 10) bar chart, single-sided or double sided.
</p>


<h3>Value</h3>

<p>Return plots and a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(data_individual_file)
data(data_population_file)
data(ICD_group_GLOBOCAN)

#Group individual data by:
#5 year age group
#ICD grouping from dataframe ICD_group_GLOBOCAN
#year extract from date of incidence

df_data_year &lt;- csu_group_cases(data_individual_file,
  var_age="age",
  group_by=c("sex", "regcode", "reglabel"),
  df_ICD = ICD_group_GLOBOCAN,
  var_ICD  ="site",
  var_year = "doi")     

#Merge 5-years age grouped data with population by year (automatic) and sex

df_data &lt;- csu_merge_cases_pop(
  df_data_year, 
  data_population_file, 
  var_age = "age_group",
  var_cases = "cases",
  var_py = "pop",
  group_by = c("sex"))


#prepare for calculate ASR
df_data$age_group_label &lt;- NULL # to avoid warning
df_data &lt;- subset(df_data , year == 2012) # to keep only 2012 data
df_data$year &lt;- NULL # to avoid warning

# calculate asr
df_asr &lt;- csu_asr(df_data,
  "age_group", 
  "cases",
  "pop",
  group_by=c("sex", "ICD_group", "LABEL", "reglabel", "regcode"),
  missing_age =19)

#remove Other cancer
df_asr &lt;- subset(df_asr , LABEL != "Other") 
df_asr &lt;- subset(df_asr , LABEL != "Other skin")


#keep male
df_asr_M &lt;- subset(df_asr , sex==1)

#Single sided bar plot 
data1 &lt;- csu_bar_top(
   df_asr_M,
   var_value="cases",
   var_bar="LABEL",
   nb_top = 10,
   plot_title = "Top 10 cancer sites",
   xtitle= "Number of cases",
   color= c("#2c7bb6"),
   digits=0) 

#Double sided bar plot example 1
data2 &lt;- csu_bar_top(
   df_asr,
   var_value="cases",
   var_bar="LABEL",
   group_by="sex",
   nb_top = 15,
   plot_title = "Top 15 cancer sites",
   xtitle= "Number of cases",
   label_by=c("Male", "Female"),
   color = c("#2c7bb6","#b62ca1"),
   digits=0) 

#Double sided bar plot example 2
data3 &lt;- csu_bar_top(
   df_asr,
   var_value="asr",
   var_bar="LABEL",
   group_by="sex",
   nb_top = 10,
   plot_title = "Top 10 cancer sites",
   xtitle= "Age-standardized rate per 100,000",
   label_by=c("Male", "Female"),
   color = c("#2c7bb6","#b62ca1"),
   digits=1) 

</code></pre>

<hr>
<h2 id='csu_ci5_mean'>
cancer registry data 
</h2><span id='topic+csu_ci5_mean'></span>

<h3>Description</h3>

<p>CI5 XI data, all population grouped.   
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("csu_ci5_mean")</code></pre>


<h3>Format</h3>

<p>A data frame with 1026 observations on the following 5 variables.
</p>

<dl>
<dt><code>ci5_cancer_code</code></dt><dd><p>cancer code</p>
</dd>
<dt><code>ci5_cancer_label</code></dt><dd><p>cancer label</p>
</dd>
<dt><code>CSU_age_factor</code></dt><dd><p>age variable from 1 to 18. 1 is 0-4 years, 2 is 5-9, etc..., 17 is 80-84, 18 is 85+.</p>
</dd> 
<dt><code>CSU_C</code></dt><dd><p>Number of cases (incidence)</p>
</dd>
<dt><code>CSU_P</code></dt><dd><p>Population-year: Reference population</p>
</dd>
</dl>



<h3>Details</h3>

<p>This dataset have been created in order to compare age specific rate with the CI5XI mean directly on the age specific rate graph.
Here is the table of cancer_label and cancer_code available:
</p>

<table>
<tr>
 <td style="text-align: left;">
	ci5_cancer_code </td><td style="text-align: left;"> ci5_cancer_label </td>
</tr>
<tr>
 <td style="text-align: left;">
	1 </td><td style="text-align: left;"> Lip </td>
</tr>
<tr>
 <td style="text-align: left;">
	2 </td><td style="text-align: left;"> Tongue </td>
</tr>
<tr>
 <td style="text-align: left;">
	3 </td><td style="text-align: left;"> Mouth </td>
</tr>
<tr>
 <td style="text-align: left;">
	4 </td><td style="text-align: left;"> Salivary glands </td>
</tr>
<tr>
 <td style="text-align: left;">
	5 </td><td style="text-align: left;"> Tonsil </td>
</tr>
<tr>
 <td style="text-align: left;">
	6 </td><td style="text-align: left;"> Other oropharynx </td>
</tr>
<tr>
 <td style="text-align: left;">
	7 </td><td style="text-align: left;"> Nasopharynx </td>
</tr>
<tr>
 <td style="text-align: left;">
	8 </td><td style="text-align: left;"> Hypopharynx </td>
</tr>
<tr>
 <td style="text-align: left;">
	9 </td><td style="text-align: left;"> Pharynx unspecified </td>
</tr>
<tr>
 <td style="text-align: left;">
	10 </td><td style="text-align: left;"> Oesophagus </td>
</tr>
<tr>
 <td style="text-align: left;">
	11 </td><td style="text-align: left;"> Stomach </td>
</tr>
<tr>
 <td style="text-align: left;">
	12 </td><td style="text-align: left;"> Small intestine </td>
</tr>
<tr>
 <td style="text-align: left;">
	13 </td><td style="text-align: left;"> Colon </td>
</tr>
<tr>
 <td style="text-align: left;">
	14 </td><td style="text-align: left;"> Rectum </td>
</tr>
<tr>
 <td style="text-align: left;">
	15 </td><td style="text-align: left;"> Anus </td>
</tr>
<tr>
 <td style="text-align: left;">
	16 </td><td style="text-align: left;"> Liver </td>
</tr>
<tr>
 <td style="text-align: left;">
	17 </td><td style="text-align: left;"> Gallbladder </td>
</tr>
<tr>
 <td style="text-align: left;">
	18 </td><td style="text-align: left;"> Pancreas </td>
</tr>
<tr>
 <td style="text-align: left;">
	19 </td><td style="text-align: left;"> Nose, sinuses </td>
</tr>
<tr>
 <td style="text-align: left;">
	20 </td><td style="text-align: left;"> Larynx </td>
</tr>
<tr>
 <td style="text-align: left;">
	21 </td><td style="text-align: left;"> Lung </td>
</tr>
<tr>
 <td style="text-align: left;">
	23 </td><td style="text-align: left;"> Bone </td>
</tr>
<tr>
 <td style="text-align: left;">
	24 </td><td style="text-align: left;"> Melanoma of skin </td>
</tr>
<tr>
 <td style="text-align: left;">
	25 </td><td style="text-align: left;"> Other skin </td>
</tr>
<tr>
 <td style="text-align: left;">
	26 </td><td style="text-align: left;"> Mesothelioma </td>
</tr>
<tr>
 <td style="text-align: left;">
	27 </td><td style="text-align: left;"> Kaposi sarcoma </td>
</tr>
<tr>
 <td style="text-align: left;">
	28 </td><td style="text-align: left;"> Connective and soft tissue </td>
</tr>
<tr>
 <td style="text-align: left;">
	29 </td><td style="text-align: left;"> Breast </td>
</tr>
<tr>
 <td style="text-align: left;">
	30 </td><td style="text-align: left;"> Vulva </td>
</tr>
<tr>
 <td style="text-align: left;">
	31 </td><td style="text-align: left;"> Vagina </td>
</tr>
<tr>
 <td style="text-align: left;">
	32 </td><td style="text-align: left;"> Cervix uteri </td>
</tr>
<tr>
 <td style="text-align: left;">
	33 </td><td style="text-align: left;"> Corpus uteri </td>
</tr>
<tr>
 <td style="text-align: left;">
	35 </td><td style="text-align: left;"> Ovary </td>
</tr>
<tr>
 <td style="text-align: left;">
	37 </td><td style="text-align: left;"> Placenta </td>
</tr>
<tr>
 <td style="text-align: left;">
	38 </td><td style="text-align: left;"> Penis </td>
</tr>
<tr>
 <td style="text-align: left;">
	39 </td><td style="text-align: left;"> Prostate </td>
</tr>
<tr>
 <td style="text-align: left;">
	40 </td><td style="text-align: left;"> Testis </td>
</tr>
<tr>
 <td style="text-align: left;">
	42 </td><td style="text-align: left;"> Kidney </td>
</tr>
<tr>
 <td style="text-align: left;">
	43 </td><td style="text-align: left;"> Renal pelvis </td>
</tr>
<tr>
 <td style="text-align: left;">
	44 </td><td style="text-align: left;"> Ureter </td>
</tr>
<tr>
 <td style="text-align: left;">
	45 </td><td style="text-align: left;"> Bladder </td>
</tr>
<tr>
 <td style="text-align: left;">
	47 </td><td style="text-align: left;"> Eye </td>
</tr>
<tr>
 <td style="text-align: left;">
	48 </td><td style="text-align: left;"> Brain, nervous system </td>
</tr>
<tr>
 <td style="text-align: left;">
	49 </td><td style="text-align: left;"> Thyroid </td>
</tr>
<tr>
 <td style="text-align: left;">
	50 </td><td style="text-align: left;"> Adrenal gland </td>
</tr>
<tr>
 <td style="text-align: left;">
	51 </td><td style="text-align: left;"> Other endocrine </td>
</tr>
<tr>
 <td style="text-align: left;">
	52 </td><td style="text-align: left;"> Hodgkin disease </td>
</tr>
<tr>
 <td style="text-align: left;">
	53 </td><td style="text-align: left;"> Non-Hodgkin lymphoma </td>
</tr>
<tr>
 <td style="text-align: left;">
	54 </td><td style="text-align: left;"> Immunoproliferative diseases </td>
</tr>
<tr>
 <td style="text-align: left;">
	55 </td><td style="text-align: left;"> Multiple myeloma </td>
</tr>
<tr>
 <td style="text-align: left;">
	56 </td><td style="text-align: left;"> Lymphoid leukaemia </td>
</tr>
<tr>
 <td style="text-align: left;">
	57 </td><td style="text-align: left;"> Myeloid leukaemia </td>
</tr>
<tr>
 <td style="text-align: left;">
	58 </td><td style="text-align: left;"> Leukaemia unspecified </td>
</tr>
<tr>
 <td style="text-align: left;">
	59 </td><td style="text-align: left;"> Myeloproliferative disorders </td>
</tr>
<tr>
 <td style="text-align: left;">
	60 </td><td style="text-align: left;"> Myelodysplastic syndromes </td>
</tr>
<tr>
 <td style="text-align: left;">
	62 </td><td style="text-align: left;"> All sites </td>
</tr>
<tr>
 <td style="text-align: left;">
	63 </td><td style="text-align: left;"> All sites but skin </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>See: <code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
</p>


<h3>Source</h3>

<p><a href="http://ci5.iarc.fr/Default.aspx">http://ci5.iarc.fr/Default.aspx</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(csu_registry_data_1)
test &lt;- subset(csu_registry_data_1 , registry_label == "Colombia, Cali")
csu_ageSpecific(test,
                plot_title = "Colombia, Liver, male",
                CI5_comparison = "Liver")
 
#See more examples here:
help(csu_ageSpecific)

</code></pre>

<hr>
<h2 id='csu_CI5XI_data'>
Cancer in five continent volume XI.
</h2><span id='topic+csu_CI5XI_data'></span>

<h3>Description</h3>

<p>CI5 XI summary database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("csu_CI5XI_data")</code></pre>


<h3>Format</h3>

<p>A data frame with 1113210 observations on the following 10 variables.
</p>

<dl>
<dt><code>registry_code</code></dt><dd><p>Registry code (integer)</p>
</dd>
<dt><code>registry_label</code></dt><dd><p>Name of the registry (character)</p>
</dd>
<dt><code>sex</code></dt><dd><p>sex (integer)</p>
</dd>
<dt><code>cancer_code</code></dt><dd><p>cancer code (integer)</p>
</dd>
<dt><code>cancer_label</code></dt><dd><p>cancer label (character)</p>
</dd>
<dt><code>age</code></dt><dd><p>age variable from 1 to 19. 1 is 0-4 years, 2 is 5-9, etc..., 17 is 80-84, 18 is 85+, 19 represents missing age. (integer)</p>
</dd> 
<dt><code>cases</code></dt><dd><p>Number of cases (incidence) (integer)</p>
</dd>
<dt><code>py</code></dt><dd><p>Population-year: Reference population of the registry (integer)</p>
</dd>
<dt><code>CI5_continent</code></dt><dd><p>Continent code (integer)</p>
</dd>
<dt><code>ethnic_group</code></dt><dd><p>ethnic code (integer)</p>
</dd>
</dl>



<h3>Details</h3>

<p>All information are available here: <a href="http://ci5.iarc.fr/CI5-XI/Default.aspx">http://ci5.iarc.fr/CI5-XI/Default.aspx</a>
</p>


<h3>Source</h3>

<p><a href="http://ci5.iarc.fr/CI5-XI/Default.aspx">http://ci5.iarc.fr/CI5-XI/Default.aspx</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("csu_CI5XI_data")

#get the registry code asssociate to registry_label
#print(unique(csu_CI5XI_data[,c("registry_code", "registry_label" )]),nrows = 1000)

#get the cancer code asssociate to cancer_label
#print(unique(csu_CI5XI_data[,c("cancer_label", "cancer_code")]),nrows = 1000)

#remove all cancers:
df_data &lt;- subset(csu_CI5XI_data ,cancer_code &lt; 62)

#change group_by option to factor
df_data$sex &lt;- factor(df_data$sex, levels=c(1,2), labels=c("Male", "Female"))


#select Thailand changmai
df_data_1 &lt;- subset(df_data, registry_code==764001)



dt_result_1 &lt;- csu_ageSpecific_top(df_data_1,
                    var_age="age", 
                    var_cases="cases", 
                    var_py="py",
                    var_top="cancer_label", 
                    group_by="sex", 
                    plot_title= "Thailand, Chiangmai",
                    plot_subtitle = "Top 5 cancer",
                    missing_age = 19)



					
#select USA
df_data_2 &lt;- subset(df_data,registry_code== 840000 &amp; ethnic_group == 99)

dt_result_2 &lt;- csu_ageSpecific_top(df_data_2,
                                   var_age="age", 
                                   var_cases="cases", 
                                   var_py="py",
                                   var_top="cancer_label", 
                                   group_by="sex", 
                                   plot_title= "USA",
                                   plot_subtitle = "Top 5 cancer",
                                   missing_age = 19)


				  
			  
</code></pre>

<hr>
<h2 id='csu_cumrisk'>csu_cumrisk</h2><span id='topic+csu_cumrisk'></span>

<h3>Description</h3>

<p><code>csu_cumrisk</code> Calculate cumulative risk across different population (Registry, year, sex...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_cumrisk(df_data,
		var_age = "age",
		var_cases = "cases",
		var_py ="py",
		group_by=NULL,
		missing_age = NULL,
		last_age = 15,
		var_st_err=NULL,
		correction_info=FALSE,
		var_cumrisk="cumrisk") 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_cumrisk_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_var_age">var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
 <td style="text-align: left;">
			1 </td><td style="text-align: left;"> "0-4" </td><td style="text-align: left;"> 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
			2 </td><td style="text-align: left;"> "5-9" </td><td style="text-align: left;"> 5 </td>
</tr>
<tr>
 <td style="text-align: left;">
			3 </td><td style="text-align: left;"> "10-14" </td><td style="text-align: left;"> 10 </td>
</tr>
<tr>
 <td style="text-align: left;">
			... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
			17 </td><td style="text-align: left;"> "80-84" </td><td style="text-align: left;"> 80 </td>
</tr>
<tr>
 <td style="text-align: left;">
			18 </td><td style="text-align: left;"> "85+" </td><td style="text-align: left;"> 85 </td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

<p>Missing age value must be precise in the option <code>missing_age</code>.<br />
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_var_cases">var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_var_py">var_py</code></td>
<td>

<p>Population year variable.
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_group_by">group_by</code></td>
<td>

<p>A vector of variables to compare different ASR (sex, country, cancer ...).<br />
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_missing_age">missing_age</code></td>
<td>

<p>Age value representing the missing age cases.<br /> 
If not precise, missing age value will not affect the calculation.
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_last_age">last_age</code></td>
<td>

<p>Last age group included, <b>must</b> be between 2 and 17. 2 represents 5-9, ... 5 represents 20-24, ..., 17 represents 80-84, 18 represents 85+ etc.<br />
default is 15 (calculates cumulative risk 0-74)
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_var_st_err">var_st_err</code></td>
<td>

<p>Calculate the Standard error and name of the new variable. 
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_correction_info">correction_info</code></td>
<td>

<p>Logical value. if <code>TRUE</code> compute the variable &quot;correction&quot; : percentage of missing age cases.
</p>
</td></tr>
<tr><td><code id="csu_cumrisk_+3A_var_cumrisk">var_cumrisk</code></td>
<td>

<p>Name of the new variable for the cumulative risk.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculate cumulative risk across different population<br />
the age group include in cumulative risk will always exclude the last age group since we do not know the size of the last age group (ie: 85+, 80+ etc..)
</p>


<h3>Value</h3>

<p>Return a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>References</h3>

<p><a href="https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf">https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(csu_registry_data_1)
data(csu_registry_data_2)

# you can import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")

# Cumulative risk, 0-74 years, with no missing age cases.
result &lt;- csu_cumrisk(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ))
				  
# you can export your result as csv file using write.csv:
# write.csv(result, file="result.csv")
				  
# Cumulative risk, 0-74 years, with the percentage of correction due to missing age cases. 
result &lt;- csu_cumrisk(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
				  missing_age = 19,				  
				  correction_info = TRUE)	
				  
# Cumulative risk 0-74 years and standard error with missing age.
result &lt;- csu_cumrisk(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_st_err = "st_err",
				  missing_age = 99)
				  
# Cumulative risk, 0-69 years.
result &lt;- csu_cumrisk(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_st_err = "st_err",
				  last_age = 14,
				  missing_age = 99)	
		    		  
</code></pre>

<hr>
<h2 id='csu_eapc'>csu_eapc</h2><span id='topic+csu_eapc'></span>

<h3>Description</h3>

<p><code>csu_eapc</code> calculate the Estimated Annual Percentage Change (EAPC) of rates during a time period with the Confidence Interval (CI) across different population (Registry, year, sex...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_eapc(df_data,
	var_rate="asr",
	var_year="year",
	group_by=NULL,
	var_eapc = "eapc",
	CI_level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_eapc_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_eapc_+3A_var_rate">var_rate</code></td>
<td>

<p>Rate variable. (Standardized or not, incidence, mortality, etc..)
</p>
</td></tr>
<tr><td><code id="csu_eapc_+3A_var_year">var_year</code></td>
<td>

<p>Period variable. (Year, month, etc...)
</p>
</td></tr>
<tr><td><code id="csu_eapc_+3A_group_by">group_by</code></td>
<td>

<p>A vector of variables to compare different EAPC (sex, country, cancer ...).<br />
</p>
</td></tr>
<tr><td><code id="csu_eapc_+3A_var_eapc">var_eapc</code></td>
<td>

<p>Name of the new variable for the EAPC.<br />
The variable for the CI will be name based on <code>var_eapc</code> + &quot;_&quot; +  up/Low.
</p>
</td></tr>
<tr><td><code id="csu_eapc_+3A_ci_level">CI_level</code></td>
<td>

<p>Confidence interval level. Default is 0.95.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function use Generalized Linear Model (GLM):<br />
glm(rate ~ year, family=poisson(link=&quot;log&quot;)). <br /> 
We use the poisson family instead of Gaussian, so we can compute EAPC even if the is a rate of 0.
</p>


<h3>Value</h3>

<p>Return a dataframe.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>References</h3>

<p><a href="http://rht.iconcologia.net/stats/sart/eapc/eapc_method.pdf">http://rht.iconcologia.net/stats/sart/eapc/eapc_method.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(csu_registry_data_2)

# you import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")

# Estimated Annual Percentage Change (EAPC) base on ASR.


df_asr &lt;- 
	csu_asr(csu_registry_data_2, 
	  "age", "cases", "py",
	  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
	  var_age_group = c("registry_label"), 
	  missing_age = 99
	  )
				  
result &lt;- 
	csu_eapc(df_asr,
		"asr", "year",
		group_by=c("registry", "registry_label", "sex", "ethnic" )
		)

					
# you can export your result as csv file using write.csv:
# write.csv(result, file="result.csv")
				  		  
</code></pre>

<hr>
<h2 id='csu_group_cases'>csu_group_cases</h2><span id='topic+csu_group_cases'></span>

<h3>Description</h3>

<p><code>csu_group_cases</code> groups individual data into 5 years age-group data and other user defined variable (sex, registry, etc...).<br /> 
Optionally: Group cancer based on a standard ICD10 coding; Extract year from custom year format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_group_cases(df_data, 
	var_age ,
	group_by=NULL,
	var_cases = NULL,
	df_ICD = NULL,
	var_ICD=NULL,
	var_year = NULL,
	all_cancer=FALSE) 
	</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_group_cases_+3A_df_data">df_data</code></td>
<td>

<p>Individual data (need to be R <code>data.frame</code> format, see examples to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_group_cases_+3A_var_age">var_age</code></td>
<td>

<p>Age variable. (Numeric). Value &gt; 150 will be considered as missing age.
</p>
</td></tr>
<tr><td><code id="csu_group_cases_+3A_group_by">group_by</code></td>
<td>

<p>(Optional) A vector of variables to create the different population (sex, country, etc...).<br />
</p>
</td></tr>
<tr><td><code id="csu_group_cases_+3A_var_cases">var_cases</code></td>
<td>

<p>(Optional) cases variable: If there is already a variable for the number of cases.
</p>
</td></tr>
<tr><td><code id="csu_group_cases_+3A_df_icd">df_ICD</code></td>
<td>

<p>(Optional) ICD file for ICD grouping information. Must have 2 fields: &quot;ICD&quot;, &quot;LABEL&quot;<br />.
2 formats are possible:<br />
Each ICD code separated by ICD group<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		ICD </td><td style="text-align: left;"> LABEL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C82 </td><td style="text-align: left;"> NHL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C83 </td><td style="text-align: left;"> NHL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C84 </td><td style="text-align: left;"> NHL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C85 </td><td style="text-align: left;"> NHL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C96 </td><td style="text-align: left;"> NHL</td>
</tr>
<tr>
 <td style="text-align: left;">
	</td>
</tr>

</table>

<p>ICD code already grouped.<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		ICD_group </td><td style="text-align: left;"> LABEL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C82-85,C96 </td><td style="text-align: left;"> NHL</td>
</tr>
<tr>
 <td style="text-align: left;">
	</td>
</tr>

</table>

<p>2 ICD codes separated by &quot;-&quot; includes all the ICD code between.<br />
2 ICD codes separated by &quot;,&quot; includes only these 2 ICD code.<br />
For instance, C82-85, C96 (or C82-C85, C96) includes: <br />
C82, C83, C84, C85 and C96 <br />
Must be filled if <code>var_ICD</code> argument is defined
<br />
</p>
<p>example: <code><a href="#topic+ICD_group_GLOBOCAN">ICD_group_GLOBOCAN</a></code>
</p>
</td></tr>
<tr><td><code id="csu_group_cases_+3A_var_icd">var_ICD</code></td>
<td>

<p>(Optional) ICD variable: ICD variable in the individual data.<br />
Must be filled if <code>df_ICD</code> argument is defined
</p>
</td></tr>
<tr><td><code id="csu_group_cases_+3A_var_year">var_year</code></td>
<td>

<p>(Optional) Year variable: Extract year from custom format , as long as the year is expressed with 4 digits (i.e. (&quot;yyyymmdd&quot;,&quot;ddmmyyyy&quot;, &quot;yyyy/mm&quot;,&quot;dd-mm-yyyy&quot;, etc..) and group data by year.
</p>
</td></tr>
<tr><td><code id="csu_group_cases_+3A_all_cancer">all_cancer</code></td>
<td>

<p>(Optional) If <code>TRUE</code>, will calculate the number of cases for all cancers (C00-97) and all cancers but non-melanoma of skin (C00-97 but C44)<br />
Need <code>var_ICD</code> and <code>df_ICD</code> arguments to be defined 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For most analysis, individual cases database need to be grouped by category.<br /> 
This function groups data by 5 years age-group and other user defined variable.<br /> 
Next step will be to add 5 years population data. (see <code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>).
</p>


<h3>Value</h3>

<p>Return a dataframe.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# you can import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")



	
data(ICD_group_GLOBOCAN)
data(data_individual_file)

#group individual data by 
# 5 year age group 
df_data_age &lt;- csu_group_cases(data_individual_file,
  var_age="age",
  group_by=c("sex", "regcode", "reglabel", "site")) 



	#group individual data by 
	# 5 year age group 
	# ICD grouping from dataframe ICD_group_GLOBOCAN

	df_data_icd &lt;- csu_group_cases(data_individual_file,
	  var_age="age",
	  group_by=c("sex", "regcode", "reglabel"),
	  df_ICD = ICD_group_GLOBOCAN,
	  var_ICD  ="site") 

	#group individual data by 
	# 5 year age group 
	# ICD grouping from dataframe ICD_group_GLOBOCAN
	# year (extract from date of incidence)

	df_data_year &lt;- csu_group_cases(data_individual_file,
	  var_age="age",
	  group_by=c("sex", "regcode", "reglabel"),
	  df_ICD = ICD_group_GLOBOCAN,
	  var_ICD  ="site",
	  var_year = "doi")       
	


# you can export your result as csv file using write.csv:
# write.csv(result, file="result.csv")
				  		  
</code></pre>

<hr>
<h2 id='csu_merge_cases_pop'>csu_merge_cases_pop</h2><span id='topic+csu_merge_cases_pop'></span>

<h3>Description</h3>

<p><code>csu_merge_cases_pop</code> merges registry data and population data, group by year and other user defined variable (sex, registry, etc...).<br /> 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_merge_cases_pop(df_cases, 
	df_pop,
	var_age,
	var_cases="cases",
	var_py=NULL,
	group_by=NULL) 
	</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_merge_cases_pop_+3A_df_cases">df_cases</code></td>
<td>

<p>Registry data group by 5 years-age group (need to be R <code>data.frame</code> format, see examples to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_merge_cases_pop_+3A_df_pop">df_pop</code></td>
<td>

<p>Population data group by 5-years age group (need to be R <code>data.frame</code> format, see examples to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_merge_cases_pop_+3A_var_age">var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
 <td style="text-align: left;">
			1 </td><td style="text-align: left;"> 0-4 </td><td style="text-align: left;"> 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
			2 </td><td style="text-align: left;"> 5-9 </td><td style="text-align: left;"> 5 </td>
</tr>
<tr>
 <td style="text-align: left;">
			3 </td><td style="text-align: left;"> 10-14 </td><td style="text-align: left;"> 10 </td>
</tr>
<tr>
 <td style="text-align: left;">
			... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
			17 </td><td style="text-align: left;"> 80-84 </td><td style="text-align: left;"> 80 </td>
</tr>
<tr>
 <td style="text-align: left;">
			18 </td><td style="text-align: left;"> 85+ </td><td style="text-align: left;"> 85 </td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

<p><b>This variable must be a variable with the same column name in both dataset </b> (<code>df_cases</code> and <code>df_pop</code>).<br />
Age &gt;= 85 in the <code>df_pop</code> dataset will be aggregated as 85+.
</p>
</td></tr>
<tr><td><code id="csu_merge_cases_pop_+3A_var_cases">var_cases</code></td>
<td>

<p>Cases variable in the <code>df_cases</code> dataset.<br />
</p>
</td></tr>
<tr><td><code id="csu_merge_cases_pop_+3A_var_py">var_py</code></td>
<td>

<p>(Optional) If population is &quot;long format&quot;, name of the population variable in the <code>df_pop</code> dataset.<br />
If population data is wide format (see <code>details</code>), var_py must be NULL.
</p>
</td></tr>
<tr><td><code id="csu_merge_cases_pop_+3A_group_by">group_by</code></td>
<td>

<p>(Optional) A vector of variables to create the different population (sex, country, etc...).<br />
<b>Each variable must be a variable with the same column name in both dataset </b> (<code>df_cases</code> and <code>df_pop</code>).<br />
Do not include the &quot;year&quot; variable since it is automatically detected (see details).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function merges registry data and population for further analysis.<br /> 
Both datasets must be group by 5-years age group.<br />
<b>If present, the year information in format &quot;yyyy&quot; will be detected automatically</b>.<br /> 
2 formats are accepted for population data:.<br />
Long format: (year and population are 2 variables)<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		sex	</td><td style="text-align: left;"> age </td><td style="text-align: left;"> pop </td><td style="text-align: left;"> year </td>
</tr>
<tr>
 <td style="text-align: left;">
		1 </td><td style="text-align: left;"> 1 </td><td style="text-align: left;"> 116128 </td><td style="text-align: left;"> 2005 </td>
</tr>
<tr>
 <td style="text-align: left;">
		1 </td><td style="text-align: left;"> 2 </td><td style="text-align: left;"> 130995 </td><td style="text-align: left;"> 2005 </td>
</tr>
<tr>
 <td style="text-align: left;">
		1 </td><td style="text-align: left;"> 3 </td><td style="text-align: left;"> 137556 </td><td style="text-align: left;"> 2005 </td>
</tr>
<tr>
 <td style="text-align: left;">
		... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
		2 </td><td style="text-align: left;"> 16 </td><td style="text-align: left;"> 27171 </td><td style="text-align: left;"> 2007 </td>
</tr>
<tr>
 <td style="text-align: left;">
		2 </td><td style="text-align: left;"> 17 </td><td style="text-align: left;"> 13585 </td><td style="text-align: left;"> 2007 </td>
</tr>
<tr>
 <td style="text-align: left;">
		2 </td><td style="text-align: left;"> 18 </td><td style="text-align: left;"> 13585 </td><td style="text-align: left;"> 2007 </td>
</tr>
<tr>
 <td style="text-align: left;">
	</td>
</tr>

</table>

<p>Wide format: (One column per year and no population variable, &quot;yyyy&quot; year format must be included in columns name)<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		sex	</td><td style="text-align: left;"> age </td><td style="text-align: left;"> Y2013 </td><td style="text-align: left;"> Y2014 </td><td style="text-align: left;"> Y2015 </td>
</tr>
<tr>
 <td style="text-align: left;">
		1 </td><td style="text-align: left;"> 0-4 </td><td style="text-align: left;"> 215607 </td><td style="text-align: left;"> 237346 </td><td style="text-align: left;"> 247166 </td>
</tr>
<tr>
 <td style="text-align: left;">
		1 </td><td style="text-align: left;"> 5-9 </td><td style="text-align: left;"> 160498 </td><td style="text-align: left;"> 152190 </td><td style="text-align: left;"> 152113 </td>
</tr>
<tr>
 <td style="text-align: left;">
		1 </td><td style="text-align: left;"> 10-14 </td><td style="text-align: left;"> 175676 </td><td style="text-align: left;"> 171794 </td><td style="text-align: left;"> 165406 </td>
</tr>
<tr>
 <td style="text-align: left;">
		... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
		2 </td><td style="text-align: left;"> 75-79 </td><td style="text-align: left;"> 20625 </td><td style="text-align: left;"> 20868 </td><td style="text-align: left;"> 23434 </td>
</tr>
<tr>
 <td style="text-align: left;">
		2 </td><td style="text-align: left;"> 80-84 </td><td style="text-align: left;"> 7187 </td><td style="text-align: left;"> 7276 </td><td style="text-align: left;"> 7620 </td>
</tr>
<tr>
 <td style="text-align: left;">
		2 </td><td style="text-align: left;"> 85+ </td><td style="text-align: left;"> 2551 </td><td style="text-align: left;"> 2597 </td><td style="text-align: left;"> 2617 </td>
</tr>
<tr>
 <td style="text-align: left;">
	</td>
</tr>

</table>



<h3>Value</h3>

<p>Return a dataframe.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# you can import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")

data(ICD_group_GLOBOCAN)
data(data_individual_file)
data(data_population_file)

#group individual data by 
# 5 year age group 
# ICD grouping from dataframe ICD_group_GLOBOCAN
# year (extract from date of incidence)

df_data_year &lt;- csu_group_cases(data_individual_file,
  var_age="age",
  group_by=c("sex", "regcode", "reglabel"),
  df_ICD = ICD_group_GLOBOCAN,
  var_ICD  ="site",
  var_year = "doi")     

#Merge 5-years age grouped data with population by year (automatic) and sex

df_data &lt;- csu_merge_cases_pop(
	df_data_year, 
	data_population_file, 
	var_age = "age_group",
	var_cases = "cases",
	var_py = "pop",
	group_by = c("sex"))


# you can export your result as csv file using write.csv:
# write.csv(result, file="result.csv")
				  		  
</code></pre>

<hr>
<h2 id='csu_registry_data_1'>
cancer registry data 
</h2><span id='topic+csu_registry_data_1'></span>

<h3>Description</h3>

<p>Cancer registry data for liver cancer, males, 2007, 4 registries. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("csu_registry_data_1")</code></pre>


<h3>Format</h3>

<p>A data frame with 76 observations on the following 5 variables.
</p>

<dl>
<dt><code>age</code></dt><dd><p>age variable from 1 to 19. 1 is 0-4 years, 2 is 5-9, etc..., 17 is 80-84, 18 is 85+, 19 represents missing age.</p>
</dd> 
<dt><code>cases</code></dt><dd><p>Number of cases (incidence)</p>
</dd>
<dt><code>py</code></dt><dd><p>Population-year: Reference population of the registry </p>
</dd>
<dt><code>registry_label</code></dt><dd><p>Name of the registry</p>
</dd>
<dt><code>registry</code></dt><dd><p>Registry code</p>
</dd>
</dl>



<h3>Details</h3>

<p>this 4 registries have been selected for this example as they  different number of age group (75+, 80+, 85+) and some have missing age cases.
</p>


<h3>Source</h3>

<p><a href="http://ci5.iarc.fr/Default.aspx">http://ci5.iarc.fr/Default.aspx</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(csu_registry_data_1)

# Age standardized rate (ASR) with no missing age cases.
result &lt;- csu_asr(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
                  var_age_group = c("registry_label"))
				  
#See more examples here:
help(csu_asr)

				  
				  
</code></pre>

<hr>
<h2 id='csu_registry_data_2'>
cancer registry data 
</h2><span id='topic+csu_registry_data_2'></span>

<h3>Description</h3>

<p>Cancer registry data for liver cancer
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("csu_registry_data_2")</code></pre>


<h3>Format</h3>

<p>A data frame with 125856 observations on the following 8 variables.
</p>

<dl>
<dt><code>sex</code></dt><dd><p>sex variable: 1 male, 2 female</p>
</dd>
<dt><code>year</code></dt><dd><p>year variable, from 1953 to 2007</p>
</dd>
<dt><code>age</code></dt><dd><p>age variable from 0 to 85 with missing age.<br />
0 is 0-4 years, 5 is 5-9, ..., 80 is 80-84, 85 is 85+, 99 represents missing age.</p>
</dd> 
<dt><code>cases</code></dt><dd><p>Number of cases (incidence)</p>
</dd>
<dt><code>py</code></dt><dd><p>Population-year: Reference population of the registry </p>
</dd>
<dt><code>registry_label</code></dt><dd><p>Name of the registry (118 populations)</p>
</dd>
<dt><code>registry</code></dt><dd><p>Registry code (102 registries)</p>
</dd>
<dt><code>ethnic</code></dt><dd><p>ethnic code: white (10), black (30), ..., all(99).</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="http://ci5.iarc.fr/Default.aspx">http://ci5.iarc.fr/Default.aspx</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(csu_registry_data_2)
				  
# ASR and standard error with missing age.
result &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
				  missing_age = 99,
                  var_st_err = "st_err")
				  
#See more examples here:
help(csu_asr)	
				  
</code></pre>

<hr>
<h2 id='csu_time_trend'>csu_time_trend</h2><span id='topic+csu_time_trend'></span>

<h3>Description</h3>

<p><code>csu_time_trend</code>  plot stats over year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_time_trend(df_data,
		var_trend = "asr",
		var_year = "year",
		group_by = NULL,
		logscale = FALSE,
		smoothing = NULL,
		legend = csu_trend_legend(),
		color_trend = NULL,
		ytitle = "Age standardized rate per 100,000",
		plot_title = "csu_title") 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_time_trend_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_var_trend">var_trend</code></td>
<td>

<p>Statistics variable to be plot on Y axis.<br />
Usually for the ASR, but it could be the cumulative risk, or the number of cases.
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_var_year">var_year</code></td>
<td>

<p>Time variable.
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_group_by">group_by</code></td>
<td>

<p>Variable to compare different age specific rate (sex, country, cancer ...).<br />
Only one variable can be chosen.
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_logscale">logscale</code></td>
<td>

<p>Logical value: if <code>TRUE</code> Y-axis use logscale.
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_smoothing">smoothing</code></td>
<td>

<p>Apply a smoothing using the R loess function. <br />.
The numerical parameter controls the degree of smoothing.<br />
See option <code>span</code> in <code><a href="stats.html#topic+loess">loess</a></code>.
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_legend">legend</code></td>
<td>

<p>legend option: see <code><a href="#topic+csu_trend_legend">csu_trend_legend</a></code>.<br />
Use only if <code>group_by</code> is not <code>NULL</code>.
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_color_trend">color_trend</code></td>
<td>

<p>Vector of color for the trend.
The color codes are hexadecimal (e.g. &quot;#FF0000&quot;) or predefined R color names (e.g. &quot;red&quot;).
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_ytitle">ytitle</code></td>
<td>

<p>Y-axis title. Default is &quot;Age standardized rate per 100,000&quot;.
</p>
</td></tr>
<tr><td><code id="csu_time_trend_+3A_plot_title">plot_title</code></td>
<td>

<p>Title of the plot.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is design the plot a statistics over time. It has been design for the ASR by year, but can be used for other statistics over time period.
The <code>group_by</code> option allow to compare different population or cancer.
</p>


<h3>Value</h3>

<p>Return a plot.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
	data(csu_registry_data_2)

	# you can import your data from csv file using read.csv:
	# mydata &lt;-  read.csv("mydata.csv", sep=",")

	# to select only 1 population 

	test &lt;- subset(csu_registry_data_2 , registry_label == "Colombia, Cali")

	# to change sex variable to factor with label
	test$sex &lt;- factor(test$sex, levels=c(1,2), labels=c("Male", "Female"))

	# to calculate the asr
	df_asr &lt;- csu_asr(
		test,missing_age = 99,
		group_by  = c("registry", "registry_label", "year", "sex", "ethnic"),
		var_age_group =  c("registry", "registry_label")
		)


	# plot ASR ove year, by sex.
	csu_time_trend(df_asr, group_by="sex",
			  plot_title = "Colombia, Liver")

	# plot ASR over year, by sex, with small smoothing.
	csu_time_trend(df_asr, group_by="sex",
			  plot_title = "Colombia, Liver",
			  smoothing = 0.3)


	# plot ASR over year, by sex, with high smoothing.
	csu_time_trend(df_asr, group_by="sex",
			  plot_title = "Colombia, Liver",
			  smoothing = 0.5)

	# Plot embedded in a graphic device
	pdf("test.pdf",width = 11.692 , height =  8.267) 
	csu_time_trend(df_asr, group_by="sex",
			  plot_title = "Colombia, Liver",
			  smoothing = 0.3)

	csu_time_trend(df_asr, group_by="sex",
			  plot_title = "Colombia, Liver",
			  smoothing = 0.5)

	dev.off()
			
</code></pre>

<hr>
<h2 id='csu_trend_legend'>csu_trend_legend</h2><span id='topic+csu_trend_legend'></span>

<h3>Description</h3>

<p><code>csu_trend_legend</code> legend option use in Rcan package for trends.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_trend_legend(title=NULL, position="bottom",nrow=1, right_space_margin=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_trend_legend_+3A_title">title</code></td>
<td>

<p>Title of the legend. (only if <code>position</code> = &quot;bottom&quot;).
</p>
</td></tr>
<tr><td><code id="csu_trend_legend_+3A_position">position</code></td>
<td>

<p>Position of the legend:<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		"bottom" </td><td style="text-align: left;"> The legend is place at the bottom of the graph. use with option <code>nrow</code>.</td>
</tr>
<tr>
 <td style="text-align: left;">
		"right" </td><td style="text-align: left;">  The legend is place at the right of each trend. use with option <code>right_space_margin</code>. If there is already a plot in the device, use <code>plot.new()</code> to avoid overprint</td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

</td></tr>
<tr><td><code id="csu_trend_legend_+3A_nrow">nrow</code></td>
<td>

<p>Number of row of the legend (only if <code>position</code> = &quot;bottom&quot;).
</p>
</td></tr>
<tr><td><code id="csu_trend_legend_+3A_right_space_margin">right_space_margin</code></td>
<td>

<p>If the <code>position</code> = &quot;right&quot;, the right margin need to be enough big, to contain the text legend.
value should be between 1 and 10 depending the size of the text legend.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function return a list for the trend graphics of the package <code>Rcan</code>
</p>


<h3>Value</h3>

<p>Return a structured list.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(csu_registry_data_1)

csu_ageSpecific(csu_registry_data_1,
                group_by="registry_label",
                legend=csu_trend_legend(title="registry", position="bottom", nrow = 2),
                plot_title = "Legend: bottom")
				
csu_ageSpecific(csu_registry_data_1,
                group_by="registry_label",
                legend=csu_trend_legend(position="right", right_space_margin = 2),
                plot_title = "Legend: right, cut")

csu_ageSpecific(csu_registry_data_1,
                group_by="registry_label",
                legend=csu_trend_legend(position="right", right_space_margin = 6.5),
                plot_title = "Legend: right")
				
#See more examples here:
help(csu_ageSpecific)
	  		  
</code></pre>

<hr>
<h2 id='csu_trendCohortPeriod'>csu_trendCohortPeriod</h2><span id='topic+csu_trendCohortPeriod'></span>

<h3>Description</h3>

<p><code>csu_trendCohortPeriod</code>  plot cohort period age specific graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csu_trendCohortPeriod(
  df_data,
  var_age = "age",
  var_cases="cases",
  var_py="py",
  var_year = "year",
  type = "Cohort",
  missing_age = NULL,
  logscale = TRUE,
  db_rate = 100000,
  first_age = 6,
  last_age = 16,
  year_group = 5,
  age_dropped=FALSE,
  plot_title = "csu_title",
  format_export = NULL,
  graph_dev =FALSE) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="csu_trendCohortPeriod_+3A_df_data">df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_var_age">var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
 <td style="text-align: left;">
			1 </td><td style="text-align: left;"> "0-4" </td><td style="text-align: left;"> 0 </td>
</tr>
<tr>
 <td style="text-align: left;">
			2 </td><td style="text-align: left;"> "5-9" </td><td style="text-align: left;"> 5 </td>
</tr>
<tr>
 <td style="text-align: left;">
			3 </td><td style="text-align: left;"> "10-14" </td><td style="text-align: left;"> 10 </td>
</tr>
<tr>
 <td style="text-align: left;">
			... </td><td style="text-align: left;"> ... </td><td style="text-align: left;"> ... </td>
</tr>
<tr>
 <td style="text-align: left;">
			17 </td><td style="text-align: left;"> "80-84" </td><td style="text-align: left;"> 80 </td>
</tr>
<tr>
 <td style="text-align: left;">
			18 </td><td style="text-align: left;"> "85+" </td><td style="text-align: left;"> 85 </td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

<p>Missing age value must be precise in the option <code>missing_age</code>.<br />
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_var_cases">var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_var_py">var_py</code></td>
<td>

<p>Population year variable.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_var_year">var_year</code></td>
<td>

<p>Time variable.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_type">type</code></td>
<td>

<p>Type of the plot:<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		"Cohort" </td><td style="text-align: left;"> Cohort graph.</td>
</tr>
<tr>
 <td style="text-align: left;">
		"Period" </td><td style="text-align: left;"> Period graph.</td>
</tr>
<tr>
 <td style="text-align: left;">
		"Both" </td><td style="text-align: left;"> Cohort Period graph.</td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_missing_age">missing_age</code></td>
<td>

<p>Age value representing the missing age cases.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_logscale">logscale</code></td>
<td>

<p>Logical value: if <code>TRUE</code> Y-axis use logscale.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_db_rate">db_rate</code></td>
<td>

<p>The denominator population. Default is 100000.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_first_age">first_age</code></td>
<td>

<p>First age group included, <b>must</b> be between 1 and 17. 1 represents 0-4, 2 represents 5-9, ... 5 represents 20-24 etc.<br />
Default is 6 (25-29 years).
</p>
</td></tr>	
<tr><td><code id="csu_trendCohortPeriod_+3A_last_age">last_age</code></td>
<td>

<p>Last age group included, <b>must</b> be between 2 and 18. 2 represents 5-9, ... 5 represents 20-24, ... 18 represents 85+ etc.<br />
Default is 16 (75-79 years).<br />
To plot the age group from 15-19 years until 65-69 years, use: <code>first_age(4), last_age(14)</code>
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_year_group">year_group</code></td>
<td>

<p>Usually, data are regrouped in 5 years period. <br />.
The numerical parameter controls the size of the group.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_age_dropped">age_dropped</code></td>
<td>

<p>Only if some age grouped are missing in the data.
Logical value: if <code>TRUE</code>, assume the age group not used are already dropped from the data.<br />
First_age and last_age option <b>must</b> still be filled.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_plot_title">plot_title</code></td>
<td>

<p>Title of the plot.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_format_export">format_export</code></td>
<td>

<p>export the graph in different format:<br />
</p>

<table>
<tr>
 <td style="text-align: left;">
		<code>NULL</code> </td><td style="text-align: left;"> Plot in R studio windows.</td>
</tr>
<tr>
 <td style="text-align: left;">
		<code>"pdf"</code> </td><td style="text-align: left;"> Export in PDF format.</td>
</tr>
<tr>
 <td style="text-align: left;">
		<code>"tiff"</code> </td><td style="text-align: left;"> Export in TIFF 300dpi format.</td>
</tr>
<tr>
 <td style="text-align: left;">
		<code>"png"</code> </td><td style="text-align: left;"> Export in PNG 200dpi format.</td>
</tr>
<tr>
 <td style="text-align: left;">
		<code>"svg"</code> </td><td style="text-align: left;"> Export in SVG format. Can be edit with <a href="https://inkscape.org/fr/">https://inkscape.org/fr/</a>.</td>
</tr>
<tr>
 <td style="text-align: left;">
		</td>
</tr>

</table>

<p>The filename is the <code>plot_title</code> option.
</p>
</td></tr>
<tr><td><code id="csu_trendCohortPeriod_+3A_graph_dev">graph_dev</code></td>
<td>

<p>If the plot is embedded in a graphics Device function (such as pdf()), the graph_dev option should be set to TRUE for the first graph to avoid a blank page.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is design the plot a the age-specific cohort and period plot. 
The <code>type</code> option allow to choose between the 3 different graphics: &quot;Cohort&quot;, &quot;Period&quot;, or &quot;Both&quot;.
Please note than the cohort plot and the period plot can be superimposed if the <code>first_age</code> is too low.
</p>


<h3>Value</h3>

<p>Return a plot.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
	data(csu_registry_data_2)

	# you can import your data from csv file using read.csv:
	# mydata &lt;-  read.csv("mydata.csv", sep=",")
	
	# to select only 1 population 
	test &lt;- subset(csu_registry_data_2,registry == 84020 &amp; sex == 1)


	
	# plot cohort graph from 25-29 years until 75-79 years.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males")
						
	# plot Period graph from 0-5 until 85+.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Period",
						first_age=1,
						last_age=18)
						
	# plot Cohort-Period graph from 30-34 years until 70-74 years.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15)

	# plot Cohort-Period graph from 30-34 years until 70-74 years with Y axis normal scale.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15,
						logscale=FALSE)

					
	# plot Cohort graph from 25-29 years until 75-79 years, with data grouped in 2 years period.
	csu_trendCohortPeriod(df_data=test,
						  missing_age =99,
						  plot_title = "USA, Liver, males",
						  type="Cohort",
						  year_group = 2)
						  
	# Plot embedded in a graphic device
	pdf("example_test.pdf")
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15,
						graph_dev=TRUE)
			  
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15,
						logscale=FALSE)
				
	dev.off()
		
</code></pre>

<hr>
<h2 id='data_individual_file'>
Data individual example
</h2><span id='topic+data_individual_file'></span>

<h3>Description</h3>

<p>Data individual example for the function <code><a href="#topic+csu_group_cases">csu_group_cases</a></code><br />
1 line = 1 cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("data_individual_file")</code></pre>


<h3>Format</h3>

<p>A data frame with 19284 observations on the following 10 variables.
</p>

<dl>
<dt><code>regcode</code></dt><dd><p>registry code</p>
</dd>
<dt><code>reglabel</code></dt><dd><p>registry label</p>
</dd>
<dt><code>sex</code></dt><dd><p>sex</p>
</dd>
<dt><code>age</code></dt><dd><p>age</p>
</dd>
<dt><code>doi</code></dt><dd><p>date of birth (yyyymmdd)</p>
</dd>
<dt><code>site</code></dt><dd><p>ICD10 code</p>
</dd>
<dt><code>histo</code></dt><dd><p>histology</p>
</dd>
<dt><code>beh</code></dt><dd><p>behavior code</p>
</dd>
<dt><code>grade</code></dt><dd><p>grade</p>
</dd>
<dt><code>basis</code></dt><dd><p>basis</p>
</dd>
</dl>



<h3>Details</h3>

<p>This dataset provide an example how to group individual cases to 5 years data, grouped by ICD code and year using the function <code><a href="#topic+csu_group_cases">csu_group_cases</a></code> and the database <code><a href="#topic+ICD_group_GLOBOCAN">ICD_group_GLOBOCAN</a></code> 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+ICD_group_GLOBOCAN">ICD_group_GLOBOCAN</a></code>
<code><a href="#topic+ICD_group_CI5">ICD_group_CI5</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(ICD_group_GLOBOCAN)
data(data_individual_file)

#group individual data by 
#	5 year age group 

df_data_age &lt;- csu_group_cases(data_individual_file,
	var_age="age",
	group_by=c("sex", "regcode", "reglabel", "site"))


#group individual data by 
#	5 year age group 
#	ICD grouping from dataframe ICD_group_GLOBOCAN

df_data_icd &lt;- csu_group_cases(data_individual_file,
	var_age="age",
	group_by=c("sex", "regcode", "reglabel"),
	df_ICD = ICD_group_GLOBOCAN,
	var_ICD  ="site") 

</code></pre>

<hr>
<h2 id='data_population_file'>
Population data example
</h2><span id='topic+data_population_file'></span>

<h3>Description</h3>

<p>Population data example for the function <code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("data_population_file")</code></pre>


<h3>Format</h3>

<p>A data frame with 160 observations on the following 4 variables.
</p>

<dl>
<dt><code>year</code></dt><dd><p>year</p>
</dd>
<dt><code>sex</code></dt><dd><p>sex</p>
</dd>
<dt><code>age_group</code></dt><dd><p>5 year age group</p>
</dd>
<dt><code>pop</code></dt><dd><p>Count of population year</p>
</dd>
</dl>



<h3>Details</h3>

<p>This dataset provide an example to merge 5 years age grouped data with population data using the function <code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(ICD_group_GLOBOCAN)
data(data_individual_file)
data(data_population_file)

#group individual data by 
# 5 year age group 
# ICD grouping from dataframe ICD_group_GLOBOCAN
# year (extract from date of incidence)

df_data_year &lt;- csu_group_cases(data_individual_file,
  var_age="age",
  group_by=c("sex", "regcode", "reglabel"),
  df_ICD = ICD_group_GLOBOCAN,
  var_ICD  ="site",
  var_year = "doi")     

#Merge 5-years age grouped data with population by year (automatic) and sex

df_pop &lt;- csu_merge_cases_pop(df_data_year, data_population_file, var_age = "age_group", 
                           var_cases = "cases", var_py = "pop", group_by = c("sex"))
</code></pre>

<hr>
<h2 id='ICD_group_CI5'>
ICD10 group detailed example
</h2><span id='topic+ICD_group_CI5'></span>

<h3>Description</h3>

<p>ICD10 group example for the function <code><a href="#topic+csu_group_cases">csu_group_cases</a></code> based on CI5XI ICD grouping
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("ICD_group_CI5")</code></pre>


<h3>Format</h3>

<p>A data frame with 97 observations on the following 2 variables.
</p>

<dl>
<dt><code>ICD</code></dt><dd><p>ICD10 code</p>
</dd>
<dt><code>LABEL</code></dt><dd><p>label for cancer group</p>
</dd>
</dl>



<h3>Details</h3>

<p>This dataset provide an example how to regroup ICD code using the function <code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
For instance this group
</p>

<table>
<tr>
 <td style="text-align: left;">
	ICD </td><td style="text-align: left;"> LABEL</td>
</tr>
<tr>
 <td style="text-align: left;">
	C18 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
	C19 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
	C20 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
	C21 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Will become:
</p>

<table>
<tr>
 <td style="text-align: left;">
	ICD_group </td><td style="text-align: left;"> LABEL</td>
</tr>
<tr>
 <td style="text-align: left;">
	C18-C21 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>See: <code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+ICD_group_GLOBOCAN">ICD_group_GLOBOCAN</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(ICD_group_CI5)
data(data_individual_file)

#group individual data by 
#	5 year age group 
#	ICd grouping from dataframe ICD_group_CI5

df_data_icd &lt;- csu_group_cases(data_individual_file,
	var_age="age",
	group_by=c("sex", "regcode", "reglabel"),
	df_ICD = ICD_group_CI5,
	var_ICD  ="site") 
</code></pre>

<hr>
<h2 id='ICD_group_GLOBOCAN'>
ICD10 group example
</h2><span id='topic+ICD_group_GLOBOCAN'></span>

<h3>Description</h3>

<p>ICD10 group example for the function <code><a href="#topic+csu_group_cases">csu_group_cases</a></code> based on GLOBOCAN
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("ICD_group_GLOBOCAN")</code></pre>


<h3>Format</h3>

<p>A data frame with 97 observations on the following 2 variables.
</p>

<dl>
<dt><code>ICD</code></dt><dd><p>ICD10 code</p>
</dd>
<dt><code>LABEL</code></dt><dd><p>label for cancer group</p>
</dd>
</dl>



<h3>Details</h3>

<p>This dataset provide an example how to regroup ICD code using the function <code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
For instance this group
</p>

<table>
<tr>
 <td style="text-align: left;">
		ICD </td><td style="text-align: left;"> LABEL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C18 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
		C19 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
		C20 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
		C21 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
	</td>
</tr>

</table>

<p>Will become:
</p>

<table>
<tr>
 <td style="text-align: left;">
		ICD_group </td><td style="text-align: left;"> LABEL</td>
</tr>
<tr>
 <td style="text-align: left;">
		C18-C21 </td><td style="text-align: left;"> COLORECTUM</td>
</tr>
<tr>
 <td style="text-align: left;">
	</td>
</tr>

</table>

<p>See: <code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+ICD_group_CI5">ICD_group_CI5</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(ICD_group_GLOBOCAN)
data(data_individual_file)

#group individual data by 
#	5 year age group 
#	ICd grouping from dataframe ICD_group_GLOBOCAN

df_data_icd &lt;- csu_group_cases(data_individual_file,
	var_age="age",
	group_by=c("sex", "regcode", "reglabel"),
	df_ICD = ICD_group_GLOBOCAN,
	var_ICD  ="site") 
</code></pre>

<hr>
<h2 id='Rcan-package'>
Cancer Registry Data Analysis and Visualisation
</h2><span id='topic+Rcan-package'></span><span id='topic+Rcan'></span>

<h3>Description</h3>

<p>Tools for basic and advance cancer statistics and graphics.
	Groups individual data, merges registry data and population data, calculates age-specific rate, age-standardized rate, cumulative risk, estimated annual percentage rate with standards error. Creates graphics across variable and
    time, such as age-specific trends, bar chart and period-cohort trends.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne [aut, cre], Jerome Vignat [aut], Cancer Surveillance Unit [cph]
</p>
<p>Maintainer: Mathieu Laversanne &lt;laversannem@iarc.fr&gt;
</p>


<h3>References</h3>

<p><a href="https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf">https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+csu_group_cases">csu_group_cases</a></code>
<code><a href="#topic+csu_merge_cases_pop">csu_merge_cases_pop</a></code>
<code><a href="#topic+csu_asr">csu_asr</a></code>
<code><a href="#topic+csu_cumrisk">csu_cumrisk</a></code>
<code><a href="#topic+csu_eapc">csu_eapc</a></code>
<code><a href="#topic+csu_ageSpecific">csu_ageSpecific</a></code>
<code><a href="#topic+csu_ageSpecific_top">csu_ageSpecific_top</a></code>
<code><a href="#topic+csu_bar_top">csu_bar_top</a></code>
<code><a href="#topic+csu_time_trend">csu_time_trend</a></code>
<code><a href="#topic+csu_trendCohortPeriod">csu_trendCohortPeriod</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(ICD_group_GLOBOCAN)
data(data_individual_file)


#group individual data by 
#	5 year age group 
#	ICD grouping from dataframe ICD_group_GLOBOCAN
df_data_year &lt;- csu_group_cases(data_individual_file,
  var_age="age",
  group_by=c("sex", "regcode", "reglabel"),
  df_ICD = ICD_group_GLOBOCAN,
  var_ICD  ="site",
  var_year = "doi")     

head(df_data_year)
# individual cases grouped by ICD and 5 years age group and year.
readline(prompt="Press [enter] to continue to merge cases and population)")	


data(data_population_file)	

df_data &lt;- csu_merge_cases_pop(
	df_data_year, 
	data_population_file, 
	var_age = "age_group",
	var_cases = "cases",
	var_py = "pop",
	group_by = c("sex"))

head(df_data)
#Merge 5-years age grouped data with population by year (automatic) and sex
readline(prompt="Press [enter] to continue to merge cases and population)")	


data(csu_registry_data_2)
				  
# ASR with standard error with missing age.
df_asr &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
                  var_st_err = "st_err")

df_asr[1:4,]	



# ASR with standard error with missing age.		  
readline(prompt="Press [enter] to continue to EAPC")


# EAPC with standard error		
	  
df_eapc &lt;- csu_eapc(df_asr,
					"asr", "year",
					group_by=c("registry", "registry_label", "sex", "ethnic" ))
					
df_eapc[1:4,]	

# EAPC with standard error				  
readline(prompt="Press [enter] to continue to age specific graph")

data(csu_registry_data_1)

# plot age specific rate for 1 population.
df_colombia &lt;- subset(csu_registry_data_1, registry_label=="Colombia, Cali")

csu_ageSpecific(df_colombia,
			plot_title = "Colombia, Liver, male")
				
# plot age specific rate for 1 population, and comparison with CI5XI data.
csu_ageSpecific(df_colombia,
				plot_title = "Colombia, Liver, male",
				CI5_comparison = "Liver")
			
# plot age specific rate for 4 population, legend at the bottom and comparison with CI5XI data.
csu_ageSpecific(csu_registry_data_1,
				group_by="registry_label",
				legend=csu_trend_legend(position="bottom", nrow = 2),
				plot_title = "Liver, male",
				CI5_comparison = 16)
	
	
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
