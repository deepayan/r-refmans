<!DOCTYPE html><html><head><title>Help for package rmapshaper</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rmapshaper}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#apply_mapshaper_commands'><p>Apply a mapshaper command string to a geojson object</p></a></li>
<li><a href='#check_sys_mapshaper'><p>Check the system mapshaper</p></a></li>
<li><a href='#drop_null_geometries'><p>Drop features from a <code>geo_json</code> FeatureCollection with null geometries</p></a></li>
<li><a href='#ms_clip'><p>Remove features or portions of features that fall outside a clipping area.</p></a></li>
<li><a href='#ms_dissolve'><p>Aggregate shapes in a polygon or point layer.</p></a></li>
<li><a href='#ms_erase'><p>Remove features or portions of features that fall inside a specified area</p></a></li>
<li><a href='#ms_explode'><p>Convert multipart lines or polygons to singlepart</p></a></li>
<li><a href='#ms_filter_fields'><p>Delete fields in the attribute table</p></a></li>
<li><a href='#ms_filter_islands'><p>Remove small detached polygons (islands)</p></a></li>
<li><a href='#ms_innerlines'><p>Create a line layer consisting of shared boundaries with no attribute data</p></a></li>
<li><a href='#ms_lines'><p>Convert polygons to topological boundaries (lines)</p></a></li>
<li><a href='#ms_points'><p>Create points from a polygon layer</p></a></li>
<li><a href='#ms_simplify'><p>Topologically-aware geometry simplification.</p></a></li>
<li><a href='#rmapshaper'><p>rmapshaper: Client for 'mapshaper' for 'Geospatial' Operations</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Client for 'mapshaper' for 'Geospatial' Operations</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Edit and simplify 'geojson', 'Spatial', and 'sf'
    objects.  This is wrapper around the 'mapshaper' 'JavaScript' library
    by Matthew Bloch <a href="https://github.com/mbloch/mapshaper/">https://github.com/mbloch/mapshaper/</a> to perform
    topologically-aware polygon simplification, as well as other
    operations such as clipping, erasing, dissolving, and converting
    'multi-part' to 'single-part' geometries.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ateucher/rmapshaper">https://github.com/ateucher/rmapshaper</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ateucher/rmapshaper/issues">https://github.com/ateucher/rmapshaper/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, geojsonsf (&ge; 2.0.2), jsonify (&ge; 1.2.0), readr (&ge;
2.1.0), sf (&ge; 1.0.0), sp (&ge; 1.4-0), V8 (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, magrittr, rmarkdown, testthat (&ge; 3.0.0), jsonlite,
covr, units, withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-10 21:55:00 UTC; andyteucher</td>
</tr>
<tr>
<td>Author:</td>
<td>Andy Teucher [aut, cre],
  Kenton Russell [aut] (JavaScript support),
  Matthew Bloch [cph] (mapshaper Javascript library)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andy Teucher &lt;andy.teucher@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-11 02:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='apply_mapshaper_commands'>Apply a mapshaper command string to a geojson object</h2><span id='topic+apply_mapshaper_commands'></span>

<h3>Description</h3>

<p>Apply a mapshaper command string to a geojson object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_mapshaper_commands(
  data,
  command,
  force_FC = TRUE,
  sys = FALSE,
  sys_mem = getOption("mapshaper.sys_mem", default = 8),
  quiet = getOption("mapshaper.sys_quiet", default = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_mapshaper_commands_+3A_data">data</code></td>
<td>
<p>character containing geojson or path to geojson file.
If a file path, <code>sys</code> must be true.</p>
</td></tr>
<tr><td><code id="apply_mapshaper_commands_+3A_command">command</code></td>
<td>
<p>valid mapshaper command string</p>
</td></tr>
<tr><td><code id="apply_mapshaper_commands_+3A_force_fc">force_FC</code></td>
<td>
<p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</td></tr>
<tr><td><code id="apply_mapshaper_commands_+3A_sys">sys</code></td>
<td>
<p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</td></tr>
<tr><td><code id="apply_mapshaper_commands_+3A_sys_mem">sys_mem</code></td>
<td>
<p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</td></tr>
<tr><td><code id="apply_mapshaper_commands_+3A_quiet">quiet</code></td>
<td>
<p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>geojson
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
nc &lt;- sf::read_sf(system.file("gpkg/nc.gpkg", package = "sf"))
rmapshaper::apply_mapshaper_commands(geojsonsf::sf_geojson(nc), "-clean")

</code></pre>

<hr>
<h2 id='check_sys_mapshaper'>Check the system mapshaper</h2><span id='topic+check_sys_mapshaper'></span>

<h3>Description</h3>

<p>Check the system mapshaper
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_sys_mapshaper(command = "mapshaper-xl", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_sys_mapshaper_+3A_command">command</code></td>
<td>
<p>either &quot;mapshaper-xl&quot; (default) or &quot;mapshaper&quot;</p>
</td></tr>
<tr><td><code id="check_sys_mapshaper_+3A_verbose">verbose</code></td>
<td>
<p>Print a message stating mapshaper's current version? Default <code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>character path to mapshaper executable if appropriate version is installed, otherwise throws an error
</p>

<hr>
<h2 id='drop_null_geometries'>Drop features from a <code>geo_json</code> FeatureCollection with null geometries</h2><span id='topic+drop_null_geometries'></span>

<h3>Description</h3>

<p>Drop features from a <code>geo_json</code> FeatureCollection with null geometries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop_null_geometries(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drop_null_geometries_+3A_x">x</code></td>
<td>
<p>a <code>geo_json</code> FeatureCollection</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>geo_json</code> FeatureCollection with Features with null geometries
removed
</p>

<hr>
<h2 id='ms_clip'>Remove features or portions of features that fall outside a clipping area.</h2><span id='topic+ms_clip'></span>

<h3>Description</h3>

<p>Removes portions of the target layer that fall outside the clipping layer or bounding box.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_clip(target, clip = NULL, bbox = NULL, remove_slivers = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_clip_+3A_target">target</code></td>
<td>
<p>the target layer from which to remove portions. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> points, lines, or polygons;
</p>
</li>
<li> <p><code>SpatialPolygons</code>, <code>SpatialLines</code>, <code>SpatialPoints</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> points, lines, or polygons object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_clip_+3A_clip">clip</code></td>
<td>
<p>the clipping layer (polygon). One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> polygons;
</p>
</li>
<li> <p><code>SpatialPolygons*</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> polygons object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_clip_+3A_bbox">bbox</code></td>
<td>
<p>supply a bounding box instead of a clipping layer to extract from
the target layer. Supply as a numeric vector: <code>c(minX, minY, maxX, maxY)</code>.</p>
</td></tr>
<tr><td><code id="ms_clip_+3A_remove_slivers">remove_slivers</code></td>
<td>
<p>Remove tiny sliver polygons created by clipping. (Default <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="ms_clip_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>clipped target in the same class as the input target
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (rmapshaper:::check_v8_major_version() &gt;= 6L) {
  library(geojsonsf, quietly = TRUE)
  library(sf)

  poly &lt;- structure("{\"type\":\"FeatureCollection\",
    \"features\":[{\"type\":\"Feature\",\"properties\":{},
    \"geometry\":{\"type\":\"Polygon\",\"coordinates\":
    [[[52.8658,-44.7219],[53.7702,-40.4873],[55.3204,-37.5579],
    [56.2757,-37.917],[56.184,-40.6443],[61.0835,-40.7529],
    [58.0202,-43.634],[61.6699,-45.0678],[62.737,-46.2841],
    [55.7763,-46.2637],[54.9742,-49.1184],[52.799,-45.9386],
    [52.0329,-49.5677],[50.1747,-52.1814],[49.0098,-52.3641],
    [52.7068,-45.7639],[43.2278,-47.1908],[48.4755,-45.1388],
    [50.327,-43.5207],[48.0804,-41.2784],[49.6307,-40.6159],
    [52.8658,-44.7219]]]}}]}", class = c("geojson", "json"))
  poly &lt;- geojson_sf(poly)
  plot(poly)

  clip_poly &lt;- structure('{
  "type": "Feature",
  "properties": {},
  "geometry": {
  "type": "Polygon",
  "coordinates": [
  [
  [51, -40],
  [55, -40],
  [55, -45],
  [51, -45],
  [51, -40]
  ]
  ]
  }
  }', class = c("geojson", "json"))
  clip_poly &lt;- geojson_sf(clip_poly)
  plot(clip_poly)

  out &lt;- ms_clip(poly, clip_poly)
  plot(out, add = TRUE)
}

</code></pre>

<hr>
<h2 id='ms_dissolve'>Aggregate shapes in a polygon or point layer.</h2><span id='topic+ms_dissolve'></span>

<h3>Description</h3>

<p>Aggregates using specified field, or all shapes if no field is given. For point layers,
replaces a group of points with their centroid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_dissolve(
  input,
  field = NULL,
  sum_fields = NULL,
  copy_fields = NULL,
  weight = NULL,
  snap = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_dissolve_+3A_input">input</code></td>
<td>
<p>spatial object to dissolve. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> points or polygons;
</p>
</li>
<li> <p><code>SpatialPolygons</code>, or <code>SpatialPoints</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_dissolve_+3A_field">field</code></td>
<td>
<p>the field to dissolve on</p>
</td></tr>
<tr><td><code id="ms_dissolve_+3A_sum_fields">sum_fields</code></td>
<td>
<p>fields to sum</p>
</td></tr>
<tr><td><code id="ms_dissolve_+3A_copy_fields">copy_fields</code></td>
<td>
<p>fields to copy. The first instance of each field will be
copied to the aggregated feature.</p>
</td></tr>
<tr><td><code id="ms_dissolve_+3A_weight">weight</code></td>
<td>
<p>Name of an attribute field for generating weighted centroids (points only).</p>
</td></tr>
<tr><td><code id="ms_dissolve_+3A_snap">snap</code></td>
<td>
<p>Snap together vertices within a small distance threshold to fix
small coordinate misalignment in adjacent polygons. Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ms_dissolve_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>the same class as the input
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(geojsonsf)
library(sf)

poly &lt;- structure('{"type":"FeatureCollection",
  "features":[
  {"type":"Feature",
  "properties":{"a": 1, "b": 2},
  "geometry":{"type":"Polygon","coordinates":[[
  [102,2],[102,3],[103,3],[103,2],[102,2]
  ]]}}
  ,{"type":"Feature",
  "properties":{"a": 5, "b": 3},
  "geometry":{"type":"Polygon","coordinates":[[
  [100,0],[100,1],[101,1],[101,0],[100,0]
  ]]}}]}', class = c("geojson", "json"))
poly &lt;- geojson_sf(poly)
plot(poly)
length(poly)
poly

# Dissolve the polygon
out &lt;- ms_dissolve(poly)
plot(out)
length(out)
out

# Dissolve and summing columns
out &lt;- ms_dissolve(poly, sum_fields = c("a", "b"))
plot(out)
out

</code></pre>

<hr>
<h2 id='ms_erase'>Remove features or portions of features that fall inside a specified area</h2><span id='topic+ms_erase'></span>

<h3>Description</h3>

<p>Removes portions of the target layer that fall inside the erasing layer or bounding box.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_erase(target, erase = NULL, bbox = NULL, remove_slivers = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_erase_+3A_target">target</code></td>
<td>
<p>the target layer from which to remove portions. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> points, lines, or polygons;
</p>
</li>
<li> <p><code>SpatialPolygons</code>, <code>SpatialLines</code>, <code>SpatialPoints</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_erase_+3A_erase">erase</code></td>
<td>
<p>the erase layer (polygon). One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> polygons;
</p>
</li>
<li> <p><code>SpatialPolygons*</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_erase_+3A_bbox">bbox</code></td>
<td>
<p>supply a bounding box instead of an erasing layer to remove from
the target layer. Supply as a numeric vector: <code>c(minX, minY, maxX, maxY)</code>.</p>
</td></tr>
<tr><td><code id="ms_erase_+3A_remove_slivers">remove_slivers</code></td>
<td>
<p>Remove tiny sliver polygons created by erasing. (Default <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="ms_erase_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>erased target in the same format as the input target
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (rmapshaper:::check_v8_major_version() &gt;= 6L) {
  library(geojsonsf, quietly = TRUE)
  library(sf)

  points &lt;- structure("{\"type\":\"FeatureCollection\",
    \"features\":[{\"type\":\"Feature\",\"properties\":{},
    \"geometry\":{\"type\":\"Point\",\"coordinates\":
    [52.8658,-44.7219]}},{\"type\":\"Feature\",\"properties\":{},
    \"geometry\":{\"type\":\"Point\",\"coordinates\":
    [53.7702,-40.4873]}},{\"type\":\"Feature\",\"properties\":{},
    \"geometry\":{\"type\":\"Point\",\"coordinates\":[55.3204,-37.5579]}},
    {\"type\":\"Feature\",\"properties\":{},\"geometry\":
    {\"type\":\"Point\",\"coordinates\":[56.2757,-37.917]}},
    {\"type\":\"Feature\",\"properties\":{},\"geometry\":
    {\"type\":\"Point\",\"coordinates\":[56.184,-40.6443]}},
    {\"type\":\"Feature\",\"properties\":{},\"geometry\":
    {\"type\":\"Point\",\"coordinates\":[61.0835,-40.7529]}},
    {\"type\":\"Feature\",\"properties\":{},\"geometry\":
    {\"type\":\"Point\",\"coordinates\":[58.0202,-43.634]}}]}",
    class = c("geojson", "json"))
  points &lt;- geojson_sf(points)
  plot(points)

  erase_poly &lt;- structure('{
  "type": "Feature",
  "properties": {},
  "geometry": {
  "type": "Polygon",
  "coordinates": [
  [
  [51, -40],
  [55, -40],
  [55, -45],
  [51, -45],
  [51, -40]
  ]
  ]
  }
  }', class = c("geojson", "json"))
  erase_poly &lt;- geojson_sf(erase_poly)

  out &lt;- ms_erase(points, erase_poly)
  plot(out, add = TRUE)
}

</code></pre>

<hr>
<h2 id='ms_explode'>Convert multipart lines or polygons to singlepart</h2><span id='topic+ms_explode'></span>

<h3>Description</h3>

<p>For objects of class <code>Spatial</code> (e.g., <code>SpatialPolygonsDataFrame</code>),
you may find it faster to use <code>sp::disaggregate</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_explode(input, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_explode_+3A_input">input</code></td>
<td>
<p>One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> multipart lines, or polygons;
</p>
</li>
<li><p> multipart <code>SpatialPolygons</code>, <code>SpatialLines</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> multipart lines, or polygons object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_explode_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>There is currently no method for SpatialMultiPoints
</p>


<h3>Value</h3>

<p>same class as input
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(geojsonsf)
library(sf)

poly &lt;- "{\"type\":\"FeatureCollection\",\"features\":
          [\n{\"type\":\"Feature\",\"geometry\":{\"type\":
          \"MultiPolygon\",\"coordinates\":[[[[102,2],[102,3],
          [103,3],[103,2],[102,2]]],[[[100,0],[100,1],[101,1],
          [101,0],[100,0]]]]},\"properties\":{\"a\":0}}\n]}"

poly &lt;- geojson_sf(poly)
plot(poly)
length(poly)
poly

# Explode the polygon
out &lt;- ms_explode(poly)
plot(out)
length(out)
out

</code></pre>

<hr>
<h2 id='ms_filter_fields'>Delete fields in the attribute table</h2><span id='topic+ms_filter_fields'></span>

<h3>Description</h3>

<p>Removes all fields except those listed in the <code>fields</code> parameter
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_filter_fields(input, fields, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_filter_fields_+3A_input">input</code></td>
<td>
<p>spatial object to filter fields on. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> points, lines, or polygons;
</p>
</li>
<li> <p><code>SpatialPolygonsDataFrame</code>, <code>SpatialLinesDataFrame</code>, <code>SpatialPointsDataFrame</code>;
</p>
</li>
<li> <p><code>sf</code> object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_filter_fields_+3A_fields">fields</code></td>
<td>
<p>character vector of fields to retain.</p>
</td></tr>
<tr><td><code id="ms_filter_fields_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>object with only specified attributes retained, in the same class as
the input
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(geojsonsf)
library(sf)

poly &lt;- structure("{\"type\":\"FeatureCollection\",
                  \"features\":[{\"type\":\"Feature\",
                  \"properties\":{\"a\": 1, \"b\":2, \"c\": 3},
                  \"geometry\":{\"type\":\"Polygon\",
                  \"coordinates\":[[[102,2],[102,4],[104,4],[104,2],[102,2]]]}}]}",
                  class = c("geojson", "json"))
poly &lt;- geojson_sf(poly)
poly

# Filter (keep) fields a and b, drop c
out &lt;- ms_filter_fields(poly, c("a", "b"))
out

</code></pre>

<hr>
<h2 id='ms_filter_islands'>Remove small detached polygons (islands)</h2><span id='topic+ms_filter_islands'></span>

<h3>Description</h3>

<p>Remove small detached polygons, keeping those with a minimum area and/or a
minimum number of vertices. Optionally remove null geometries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_filter_islands(
  input,
  min_area = NULL,
  min_vertices = NULL,
  drop_null_geometries = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_filter_islands_+3A_input">input</code></td>
<td>
<p>spatial object to filter. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> polygons;
</p>
</li>
<li> <p><code>SpatialPolygons*</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> polygons object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_filter_islands_+3A_min_area">min_area</code></td>
<td>
<p>minimum area of polygons to retain. Area is calculated using
planar geometry, except for the area of unprojected polygons, which is
calculated using spherical geometry in units of square meters.</p>
</td></tr>
<tr><td><code id="ms_filter_islands_+3A_min_vertices">min_vertices</code></td>
<td>
<p>minimum number of vertices in polygons to retain.</p>
</td></tr>
<tr><td><code id="ms_filter_islands_+3A_drop_null_geometries">drop_null_geometries</code></td>
<td>
<p>should features with empty geometries be dropped?
Default <code>TRUE</code>. Ignored for <code>SpatialPolyons*</code>, as it is always
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ms_filter_islands_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>object with only specified features retained, in the same class as
the input
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(geojsonsf)
library(sf)

poly &lt;- structure("{\"type\":\"FeatureCollection\",
           \"features\":[{\"type\":\"Feature\",\"properties\":{},
           \"geometry\":{\"type\":\"Polygon\",
           \"coordinates\":[[[102,2],[102,4],[104,4],[104,2],[102,2]]]}},
           {\"type\":\"Feature\",\"properties\":{},
           \"geometry\":{\"type\":\"Polygon\",
           \"coordinates\":[[[100,2],[98,4],[101.5,4],[100,2]]]}},
           {\"type\":\"Feature\",\"properties\":{},
           \"geometry\":{\"type\":\"Polygon\",
           \"coordinates\":[[[100,0],[100,1],[101,1],[101,0],[100,0]]]}}]}",
           class = c("geojson", "json"))

poly &lt;- geojson_sf(poly)
plot(poly)

out &lt;- ms_filter_islands(poly, min_area = 12391399903)
plot(out)

</code></pre>

<hr>
<h2 id='ms_innerlines'>Create a line layer consisting of shared boundaries with no attribute data</h2><span id='topic+ms_innerlines'></span>

<h3>Description</h3>

<p>Create a line layer consisting of shared boundaries with no attribute data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_innerlines(input, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_innerlines_+3A_input">input</code></td>
<td>
<p>input polygons object to convert to inner lines. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> polygons;
</p>
</li>
<li> <p><code>SpatialPolygons*</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> polygons object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_innerlines_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>lines in the same class as the input layer, but without attributes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(geojsonsf)
library(sf)

poly &lt;- structure('{"type":"FeatureCollection",
            "features":[
              {"type":"Feature",
                "properties":{"foo": "a"},
                "geometry":{"type":"Polygon","coordinates":[[
                  [102,2],[102,3],[103,3],[103,2],[102,2]
                  ]]}}
              ,{"type":"Feature",
                "properties":{"foo": "a"},
                "geometry":{"type":"Polygon","coordinates":[[
                  [103,3],[104,3],[104,2],[103,2],[103,3]
                  ]]}},
              {"type":"Feature",
                "properties":{"foo": "b"},
                "geometry":{"type":"Polygon","coordinates":[[
                  [102,1],[102,2],[103,2],[103,1],[102,1]
                  ]]}},
              {"type":"Feature",
                "properties":{"foo": "b"},
                "geometry":{"type":"Polygon","coordinates":[[
                  [103,1],[103,2],[104,2],[104,1],[103,1]
                  ]]}}]}', class = c("geojson", "json"))

poly &lt;- geojson_sf(poly)
plot(poly)

out &lt;- ms_innerlines(poly)
plot(out)

</code></pre>

<hr>
<h2 id='ms_lines'>Convert polygons to topological boundaries (lines)</h2><span id='topic+ms_lines'></span>

<h3>Description</h3>

<p>Convert polygons to topological boundaries (lines)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_lines(input, fields = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_lines_+3A_input">input</code></td>
<td>
<p>input polygons object to convert to inner lines. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> polygons;
</p>
</li>
<li> <p><code>SpatialPolygons*</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> polygons object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_lines_+3A_fields">fields</code></td>
<td>
<p>character vector of field names. If left as <code>NULL</code>
(default), external (unshared) boundaries are attributed as TYPE 0 and
internal (shared) boundaries are TYPE 1. Giving a field name adds an
intermediate level of hierarchy at TYPE 1, with the lowest-level internal
boundaries set to TYPE 2. Supplying a character vector of field names adds
additional levels of hierarchy.</p>
</td></tr>
<tr><td><code id="ms_lines_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>topological boundaries as lines, in the same class as the input
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(geojsonsf)
library(sf)

poly &lt;- structure('{"type":"FeatureCollection",
             "features":[
             {"type":"Feature",
             "properties":{"foo": "a"},
             "geometry":{"type":"Polygon","coordinates":[[
             [102,2],[102,3],[103,3],[103,2],[102,2]
             ]]}}
             ,{"type":"Feature",
             "properties":{"foo": "a"},
             "geometry":{"type":"Polygon","coordinates":[[
             [103,3],[104,3],[104,2],[103,2],[103,3]
             ]]}},
             {"type":"Feature",
             "properties":{"foo": "b"},
             "geometry":{"type":"Polygon","coordinates":[[
             [102.5,1],[102.5,2],[103.5,2],[103.5,1],[102.5,1]
             ]]}}]}', class = c("geojson", "json"))

poly &lt;- geojson_sf(poly)
summary(poly)
plot(poly)

out &lt;- ms_lines(poly)
summary(out)
plot(out)

</code></pre>

<hr>
<h2 id='ms_points'>Create points from a polygon layer</h2><span id='topic+ms_points'></span>

<h3>Description</h3>

<p>Can be generated from the polygons by specifying <code>location</code> to be
<code>"centroid"</code> or <code>"inner"</code>, OR by specifying fields in the
attributes of the layer containing <code>x</code> and <code>y</code> coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_points(input, location = NULL, x = NULL, y = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_points_+3A_input">input</code></td>
<td>
<p>input polygons object to convert to points. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> polygons;
</p>
</li>
<li> <p><code>SpatialPolygons*</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> polygons object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_points_+3A_location">location</code></td>
<td>
<p>either <code>"centroid"</code> or <code>"inner"</code>. If
<code>"centroid"</code>, creates points at the centroid of the largest ring of
each polygon feature. if <code>"inner"</code>, creates points in the interior of
the largest ring of each polygon feature. Inner points are located away
from polygon boundaries. Must be <code>NULL</code> if <code>x</code> and <code>y</code> are
specified. If left as <code>NULL</code> (default), will use centroids.</p>
</td></tr>
<tr><td><code id="ms_points_+3A_x">x</code></td>
<td>
<p>name of field containing x coordinate values. Must be <code>NULL</code> if
<code>location</code> is specified.</p>
</td></tr>
<tr><td><code id="ms_points_+3A_y">y</code></td>
<td>
<p>name of field containing y coordinate values. Must be <code>NULL</code> if
<code>location</code> is specified.</p>
</td></tr>
<tr><td><code id="ms_points_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>points in the same class as the input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(geojsonsf)
library(sf)

poly &lt;- structure("{\"type\":\"FeatureCollection\",
           \"features\":[{\"type\":\"Feature\",\"properties\":
           {\"x_pos\": 1, \"y_pos\": 2},
           \"geometry\":{\"type\":\"Polygon\",
           \"coordinates\":[[[102,2],[102,4],[104,4],[104,2],[102,2]]]}},
           {\"type\":\"Feature\",\"properties\":{\"x_pos\": 3, \"y_pos\": 4},
           \"geometry\":{\"type\":\"Polygon\",
           \"coordinates\":[[[100,2],[98,4],[101.5,4],[100,2]]]}},
           {\"type\":\"Feature\",\"properties\":{\"x_pos\": 5, \"y_pos\": 6},
           \"geometry\":{\"type\":\"Polygon\",
           \"coordinates\":[[[100,0],[100,1],[101,1],[101,0],[100,0]]]}}]}",
           class = c("geojson", "json"))

poly &lt;- geojson_sf(poly)
summary(poly)
plot(poly)

# Convert to points using centroids
out &lt;- ms_points(poly, location = "centroid")
summary(out)
plot(out)

# Can also specify locations using attributes in the data
out &lt;- ms_points(poly, x = "x_pos", y = "y_pos")
summary(out)
plot(out)

</code></pre>

<hr>
<h2 id='ms_simplify'>Topologically-aware geometry simplification.</h2><span id='topic+ms_simplify'></span>

<h3>Description</h3>

<p>Uses <a href="https://github.com/mbloch/mapshaper">mapshaper</a> to simplify
polygons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_simplify(
  input,
  keep = 0.05,
  method = NULL,
  weighting = 0.7,
  keep_shapes = FALSE,
  no_repair = FALSE,
  snap = TRUE,
  explode = FALSE,
  drop_null_geometries = TRUE,
  snap_interval = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ms_simplify_+3A_input">input</code></td>
<td>
<p>spatial object to simplify. One of:
</p>

<ul>
<li> <p><code>geo_json</code> or <code>character</code> polygons or lines;
</p>
</li>
<li> <p><code>SpatialPolygons*</code> or <code>SpatialLines*</code>;
</p>
</li>
<li> <p><code>sf</code> or <code>sfc</code> polygons or lines object
</p>
</li></ul>
</td></tr>
<tr><td><code id="ms_simplify_+3A_keep">keep</code></td>
<td>
<p>proportion of points to retain (0-1; default 0.05)</p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_method">method</code></td>
<td>
<p>simplification method to use: <code>"vis"</code> for Visvalingam
algorithm, or <code>"dp"</code> for Douglas-Peuker algorithm. If left as
<code>NULL</code> (default), uses Visvalingam simplification but modifies the
area metric by underweighting the effective area of points at the vertex of
more acute angles, resulting in a smoother appearance. See this
<a href="https://github.com/mbloch/mapshaper/wiki/Simplification-Tips">https://github.com/mbloch/mapshaper/wiki/Simplification-Tips</a>link
for more information.</p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_weighting">weighting</code></td>
<td>
<p>Coefficient for weighting Visvalingam simplification
(default is 0.7). Higher values produce smoother output. weighting=0 is
equivalent to unweighted Visvalingam simplification.</p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_keep_shapes">keep_shapes</code></td>
<td>
<p>Prevent small polygon features from disappearing at high
simplification (default <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_no_repair">no_repair</code></td>
<td>
<p>disable intersection repair after simplification (default
<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_snap">snap</code></td>
<td>
<p>Snap together vertices within a small distance threshold to fix
small coordinate misalignment in adjacent polygons. Default <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_explode">explode</code></td>
<td>
<p>Should multipart polygons be converted to singlepart polygons?
This prevents small shapes from disappearing during simplification if
<code>keep_shapes = TRUE</code>. Default <code>FALSE</code></p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_drop_null_geometries">drop_null_geometries</code></td>
<td>
<p>should Features with null geometries be dropped?
Ignored for <code>Spatial*</code> objects, as it is always <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_snap_interval">snap_interval</code></td>
<td>
<p>Specify snapping distance in source units, must be a
numeric. Default <code>NULL</code></p>
</td></tr>
<tr><td><code id="ms_simplify_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+apply_mapshaper_commands">apply_mapshaper_commands</a></code>
</p>

<dl>
<dt><code>force_FC</code></dt><dd><p>should the output be forced to be a FeatureCollection (or sf object or
Spatial*DataFrame) even if there are no attributes? Default <code>TRUE</code>. If FALSE and
there are no attributes associated with the geometries, a
GeometryCollection (or Spatial object with no dataframe, or sfc) will be output.</p>
</dd>
<dt><code>sys</code></dt><dd><p>Should the system mapshaper be used instead of the bundled mapshaper? Gives
better performance on large files. Requires the mapshaper node package to be installed
and on the PATH.</p>
</dd>
<dt><code>sys_mem</code></dt><dd><p>How much memory (in GB) should be allocated if using the system
mapshaper (<code>sys = TRUE</code>)? Default 8. Ignored if <code>sys = FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_mem"</code></p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>sys = TRUE</code>, should the mapshaper messages be silenced? Default <code>FALSE</code>.
This can also be set globally with the option <code>"mapshaper.sys_quiet"</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>a simplified representation of the geometry in the same class as the
input
</p>


<h3>Examples</h3>

<pre><code class='language-R'># With a simple geojson object
poly &lt;- structure('{
 "type": "Feature",
 "properties": {},
 "geometry": {
   "type": "Polygon",
   "coordinates": [[
     [-70.603637, -33.399918],
     [-70.614624, -33.395332],
     [-70.639343, -33.392466],
     [-70.659942, -33.394759],
     [-70.683975, -33.404504],
     [-70.697021, -33.419406],
     [-70.701141, -33.434306],
     [-70.700454, -33.446339],
     [-70.694274, -33.458369],
     [-70.682601, -33.465816],
     [-70.668869, -33.472117],
     [-70.646209, -33.473835],
     [-70.624923, -33.472117],
     [-70.609817, -33.468107],
     [-70.595397, -33.458369],
     [-70.587158, -33.442901],
     [-70.587158, -33.426283],
     [-70.590591, -33.414248],
     [-70.594711, -33.406224],
     [-70.603637, -33.399918]
   ]]
 }
}', class = c("geojson", "json"))

ms_simplify(poly, keep = 0.1)

# With an sf object

poly_sf &lt;- geojsonsf::geojson_sf(poly)
ms_simplify(poly_sf, keep = 0.5)

</code></pre>

<hr>
<h2 id='rmapshaper'>rmapshaper: Client for 'mapshaper' for 'Geospatial' Operations</h2><span id='topic+rmapshaper'></span>

<h3>Description</h3>

<p>Edit and simplify 'geojson', 'Spatial', and 'sf' objects.
This is wrapper around the 'mapshaper' 'javascript' library by Matthew Bloch
<a href="https://github.com/mbloch/mapshaper/">https://github.com/mbloch/mapshaper/</a> to perform topologically-aware
polygon simplification, as well as other operations such as clipping,
erasing, dissolving, and converting 'multi-part' to 'single-part' geometries.
</p>


<h3>rmapshaper functions</h3>

<p>All functions
</p>

<ul>
<li> <p><code><a href="#topic+ms_simplify">ms_simplify</a></code> - simplify polygons or lines
</p>
</li>
<li> <p><code><a href="#topic+ms_clip">ms_clip</a></code> - clip an area out of a layer using a polygon layer or a bounding box. Works on polygons, lines, and points
</p>
</li>
<li> <p><code><a href="#topic+ms_erase">ms_erase</a></code> - erase an area from a layer using a polygon layer or a bounding box. Works on polygons, lines, and points
</p>
</li>
<li> <p><code><a href="#topic+ms_dissolve">ms_dissolve</a></code> - aggregate polygon features, optionally specifying a field to aggregate on. If no field is specified, will merge all polygons into one.
</p>
</li>
<li> <p><code><a href="#topic+ms_explode">ms_explode</a></code> - convert multipart shapes to single part. Works with polygons, lines, and points in geojson format, but currently only with polygons and lines in the <code>Spatial</code> classes (not <code>SpatialMultiPoints</code> and <code>SpatialMultiPointsDataFrame</code>).
</p>
</li>
<li> <p><code><a href="#topic+ms_lines">ms_lines</a></code> - convert polygons to topological boundaries (lines)
</p>
</li>
<li> <p><code><a href="#topic+ms_innerlines">ms_innerlines</a></code> - convert polygons to shared inner boundaries (lines)
</p>
</li>
<li> <p><code><a href="#topic+ms_points">ms_points</a></code> - create points from a polygon layer
</p>
</li>
<li> <p><code><a href="#topic+ms_filter_fields">ms_filter_fields</a></code> - Remove fields from the attributes
</p>
</li>
<li> <p><code><a href="#topic+ms_filter_islands">ms_filter_islands</a></code> - Remove small detached polygons
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Andy Teucher <a href="mailto:andy.teucher@gmail.com">andy.teucher@gmail.com</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
