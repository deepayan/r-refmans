<!DOCTYPE html><html lang="en"><head><title>Help for package Visualize.CRAN.Downloads</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Visualize.CRAN.Downloads}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check.FileDir'><p>function to check the existance of the directory and combine directory and file names</p></a></li>
<li><a href='#checkDates'><p>function to check dates, ie that t0&lt;t1 and t0!=t1</p></a></li>
<li><a href='#comparison.Plt'><p>function that generates a comparison plot among several packages</p></a></li>
<li><a href='#interactivePlots'><p>function that generates interactive plots of the package downloads logs from CRAN</p></a></li>
<li><a href='#lastyear.date'><p>function that returns the date from one year ago</p></a></li>
<li><a href='#loadLibrary'><p>function to check and load an specific set of libraries</p></a></li>
<li><a href='#movingFn'><p>generic fn that computes the &quot;fn&quot; on a moving window</p></a></li>
<li><a href='#outputType'><p>function to validate the type of file format and open the corresponding file</p></a></li>
<li><a href='#processPckg'><p>main function to analyze a list of packages in a given time frame</p></a></li>
<li><a href='#retrievePckgData'><p>function to download the data from the CRAN logs for an specific package</p></a></li>
<li><a href='#staticPlots'><p>function that generates visual trends of the package downloads logs from CRAN, it will generate 4 plots: two histograms, a pulse plot and the main plot is a plot of the downloads as a function of time</p></a></li>
<li><a href='#summaries'><p>function to display the summary of the data</p></a></li>
<li><a href='#time.intervals'><p>function to identify units of times and time intervals for customizing axes of plots</p></a></li>
<li><a href='#time.units'><p>function to identify units of times based on the number of days</p></a></li>
<li><a href='#today'><p>function that returns the current date</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Visualize Downloads from 'CRAN' Packages</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-03-19</td>
</tr>
<tr>
<td>Author:</td>
<td>Marcelo Ponce [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marcelo Ponce &lt;m.ponce@utoronto.ca&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Visualize the trends and historical downloads from packages in the 'CRAN' repository. Data is obtained by using the 'API' to query the database from the 'RStudio' 'CRAN' mirror.</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, stats, cranlogs, plotly, htmlwidgets</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, devtools, roxygen2, testthat, rmarkdown</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mponce0/Visualize.CRAN.Downloads">https://github.com/mponce0/Visualize.CRAN.Downloads</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mponce0/Visualize.CRAN.Downloads/issues">https://github.com/mponce0/Visualize.CRAN.Downloads/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-03-19 15:33:58 UTC; marcelo</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-03-21 10:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='check.FileDir'>function to check the existance of the directory and combine directory and file names</h2><span id='topic+check.FileDir'></span>

<h3>Description</h3>

<p>function to check the existance of the directory and combine directory and file names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.FileDir(dirSave = NULL, fileName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check.FileDir_+3A_dirsave">dirSave</code></td>
<td>
<p>specify a valid directory where to save the file</p>
</td></tr>
<tr><td><code id="check.FileDir_+3A_filename">fileName</code></td>
<td>
<p>name of the file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>directory and filename combined, ie path to fileName
</p>

<hr>
<h2 id='checkDates'>function to check dates, ie that t0&lt;t1 and t0!=t1</h2><span id='topic+checkDates'></span>

<h3>Description</h3>

<p>function to check dates, ie that t0&lt;t1 and t0!=t1
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDates(t0, t1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkDates_+3A_t0">t0</code></td>
<td>
<p>initial date</p>
</td></tr>
<tr><td><code id="checkDates_+3A_t1">t1</code></td>
<td>
<p>final date</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with t0 being [[1]] and t1 being [[2]]
</p>

<hr>
<h2 id='comparison.Plt'>function that generates a comparison plot among several packages</h2><span id='topic+comparison.Plt'></span>

<h3>Description</h3>

<p>function that generates a comparison plot among several packages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comparison.Plt(
  pckgDwnlds.lst,
  t0,
  t1,
  cmb = TRUE,
  noMAvgs = FALSE,
  noCBs = FALSE,
  device = "PDF",
  dirSave = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="comparison.Plt_+3A_pckgdwnlds.lst">pckgDwnlds.lst</code></td>
<td>
<p>nested list containing the several packages to process</p>
</td></tr>
<tr><td><code id="comparison.Plt_+3A_t0">t0</code></td>
<td>
<p>initial date</p>
</td></tr>
<tr><td><code id="comparison.Plt_+3A_t1">t1</code></td>
<td>
<p>final date</p>
</td></tr>
<tr><td><code id="comparison.Plt_+3A_cmb">cmb</code></td>
<td>
<p>boolean flag, indicating whether the plots are shown in the same (default) graph or not</p>
</td></tr>
<tr><td><code id="comparison.Plt_+3A_nomavgs">noMAvgs</code></td>
<td>
<p>boolean flag, indicating whether moving averages are displayed (default) or NOT &ndash;set to TRUE&ndash;</p>
</td></tr>
<tr><td><code id="comparison.Plt_+3A_nocbs">noCBs</code></td>
<td>
<p>boolean flag, indicating whether shaded confidence intervals are displayed (default) or NOT  &ndash;set to TRUE&ndash;</p>
</td></tr>
<tr><td><code id="comparison.Plt_+3A_device">device</code></td>
<td>
<p>string to select the output format: 'PDF'/'PNG'/'JPEG' or 'screen'</p>
</td></tr>
<tr><td><code id="comparison.Plt_+3A_dirsave">dirSave</code></td>
<td>
<p>specify a valid directory where to save the file</p>
</td></tr>
</table>

<hr>
<h2 id='interactivePlots'>function that generates interactive plots of the package downloads logs from CRAN</h2><span id='topic+interactivePlots'></span>

<h3>Description</h3>

<p>function that generates interactive plots of the package downloads logs from CRAN
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interactivePlots(
  downloads.data,
  mytitle = paste(downloads.data$package[1], "Package downloads counts"),
  nbrPlts = 2,
  month.ln = 30,
  HTMLfile = paste0("Interactive_DWNLDS_", downloads.data$package[1], ".html"),
  device = "HTML",
  dirSave = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interactivePlots_+3A_downloads.data">downloads.data</code></td>
<td>
<p>total downloads from the package</p>
</td></tr>
<tr><td><code id="interactivePlots_+3A_mytitle">mytitle</code></td>
<td>
<p>optional char argument specifying the title to be displayed</p>
</td></tr>
<tr><td><code id="interactivePlots_+3A_nbrplts">nbrPlts</code></td>
<td>
<p>optional numeric argument specifying number of plots to generate</p>
</td></tr>
<tr><td><code id="interactivePlots_+3A_month.ln">month.ln</code></td>
<td>
<p>optional numeric argument specifying the lenght of the month in days</p>
</td></tr>
<tr><td><code id="interactivePlots_+3A_htmlfile">HTMLfile</code></td>
<td>
<p>an optional string argument specifying the name of the file where to save the plots</p>
</td></tr>
<tr><td><code id="interactivePlots_+3A_device">device</code></td>
<td>
<p>an optional string describing whether the interactive plot will be set to screen or to save in an HTLM file</p>
</td></tr>
<tr><td><code id="interactivePlots_+3A_dirsave">dirSave</code></td>
<td>
<p>specify a valid directory where to save the plot</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
packageXdownloads &lt;- retrievePckgData("ggplot")[[1]]
interactivePlots(packageXdownloads)

## End(Not run)

</code></pre>

<hr>
<h2 id='lastyear.date'>function that returns the date from one year ago</h2><span id='topic+lastyear.date'></span>

<h3>Description</h3>

<p>function that returns the date from one year ago
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lastyear.date()
</code></pre>

<hr>
<h2 id='loadLibrary'>function to check and load an specific set of libraries</h2><span id='topic+loadLibrary'></span>

<h3>Description</h3>

<p>function to check and load an specific set of libraries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadLibrary(lib)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadLibrary_+3A_lib">lib</code></td>
<td>
<p>is a list of packages to be loaded</p>
</td></tr>
</table>

<hr>
<h2 id='movingFn'>generic fn that computes the &quot;fn&quot; on a moving window</h2><span id='topic+movingFn'></span>

<h3>Description</h3>

<p>generic fn that computes the &quot;fn&quot; on a moving window
</p>


<h3>Usage</h3>

<pre><code class='language-R'>movingFn(x, fn = mean, period = length(x), direction = "forward")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="movingFn_+3A_x">x</code></td>
<td>
<p>a numeric vector</p>
</td></tr>
<tr><td><code id="movingFn_+3A_fn">fn</code></td>
<td>
<p>a function to be applied/computed, default is set to mean()</p>
</td></tr>
<tr><td><code id="movingFn_+3A_period">period</code></td>
<td>
<p>size of the &quot;moving window&quot;, default set to the lenght of the vector</p>
</td></tr>
<tr><td><code id="movingFn_+3A_direction">direction</code></td>
<td>
<p>type of moving avergage to consider: &quot;forward&quot;, &quot;centered&quot;, &quot;backward&quot;; ie. whether the window computation is ( &quot;centered&quot; / &quot;forward&quot; / &quot;backward&quot; ) wrt the data series</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with the 'moving operation' applied to the x vector
</p>

<hr>
<h2 id='outputType'>function to validate the type of file format and open the corresponding file</h2><span id='topic+outputType'></span>

<h3>Description</h3>

<p>function to validate the type of file format and open the corresponding file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>outputType(
  device,
  dirSave = NULL,
  fileName,
  fileFmts,
  combinePlts,
  msg = "plot"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="outputType_+3A_device">device</code></td>
<td>
<p>string to select the output format: 'PDF'/'PNG'/'JPEG' or 'screen'</p>
</td></tr>
<tr><td><code id="outputType_+3A_dirsave">dirSave</code></td>
<td>
<p>specify a valid directory where to save the file</p>
</td></tr>
<tr><td><code id="outputType_+3A_filename">fileName</code></td>
<td>
<p>name of the file</p>
</td></tr>
<tr><td><code id="outputType_+3A_filefmts">fileFmts</code></td>
<td>
<p>list with the acceptable format types, eg. c(&quot;PDF&quot;,&quot;PNG&quot;,&quot;JPEG&quot;)</p>
</td></tr>
<tr><td><code id="outputType_+3A_combineplts">combinePlts</code></td>
<td>
<p>boolean flag indicating whether plots are combined or not</p>
</td></tr>
<tr><td><code id="outputType_+3A_msg">msg</code></td>
<td>
<p>optional string to customiza message to the user</p>
</td></tr>
</table>

<hr>
<h2 id='processPckg'>main function to analyze a list of packages in a given time frame</h2><span id='topic+processPckg'></span>

<h3>Description</h3>

<p>main function to analyze a list of packages in a given time frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>processPckg(
  pckg.lst,
  t0 = lastyear.date(),
  t1 = today(),
  opts = list(),
  device = "PDF",
  dirSave = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="processPckg_+3A_pckg.lst">pckg.lst</code></td>
<td>
<p>list of packages to process</p>
</td></tr>
<tr><td><code id="processPckg_+3A_t0">t0</code></td>
<td>
<p>initial date, begining of the time period given in &quot;YYYY-MM-DD&quot; format</p>
</td></tr>
<tr><td><code id="processPckg_+3A_t1">t1</code></td>
<td>
<p>final date, ending of the time period given in &quot;YYYY-MM-DD&quot; format</p>
</td></tr>
<tr><td><code id="processPckg_+3A_opts">opts</code></td>
<td>
<p>a list of different options available for customizing the output</p>
</td></tr>
<tr><td><code id="processPckg_+3A_device">device</code></td>
<td>
<p>string to select the output format: 'PDF'/'PNG'/'JPEG' or 'screen'</p>
</td></tr>
<tr><td><code id="processPckg_+3A_dirsave">dirSave</code></td>
<td>
<p>name of a valid directory where to save the file, eg. do not specify this argument or enter &quot;.&quot; for using the current working directory</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# device is set to "screen" so no files are generated and plots will appear on "screen"
# alternative to 'device' are "PDF"/"PNG"/"JPEG"
processPckg("ehelp", device="screen")
processPckg(c("ehelp","plotly","ggplot2"), "2001-01-01", device="screen")
processPckg(c("ehelp","plotly","ggplot2"), "2001-01-01", opts="nostatic", device="screen")
processPckg(c("ehelp","plotly","ggplot2"), "2001-01-01",
	opts=c("nostatic","nocombined","nointeractive"), device="screen")


</code></pre>

<hr>
<h2 id='retrievePckgData'>function to download the data from the CRAN logs for an specific package</h2><span id='topic+retrievePckgData'></span>

<h3>Description</h3>

<p>function to download the data from the CRAN logs for an specific package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retrievePckgData(pckg = NULL, t0 = lastyear.date(), t1 = today())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="retrievePckgData_+3A_pckg">pckg</code></td>
<td>
<p>is the name of the package to look for the downloads data</p>
</td></tr>
<tr><td><code id="retrievePckgData_+3A_t0">t0</code></td>
<td>
<p>is the initial date</p>
</td></tr>
<tr><td><code id="retrievePckgData_+3A_t1">t1</code></td>
<td>
<p>is the final date</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list composed of the stats from the original time frame and the last month
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
retrievePckgData("ehelp")
retrievePckgData("ehelp","2018-01-01","2020-01-01")

</code></pre>

<hr>
<h2 id='staticPlots'>function that generates visual trends of the package downloads logs from CRAN, it will generate 4 plots: two histograms, a pulse plot and the main plot is a plot of the downloads as a function of time</h2><span id='topic+staticPlots'></span>

<h3>Description</h3>

<p>function that generates visual trends of the package downloads logs from CRAN, it will generate 4 plots: two histograms, a pulse plot and the main plot is a plot of the downloads as a function of time
</p>


<h3>Usage</h3>

<pre><code class='language-R'>staticPlots(
  pckg.stats.total,
  device = "PDF",
  fileName = paste0("DWNLDS_", pckg.stats.total$package[1], ".", tolower(device)),
  dirSave = NULL,
  combinePlts = FALSE,
  noMovAvg = FALSE,
  noConfBands = FALSE,
  cutOff.pts = 250,
  dbg = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="staticPlots_+3A_pckg.stats.total">pckg.stats.total</code></td>
<td>
<p>total downloads from the package</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_device">device</code></td>
<td>
<p>string to select the output format: 'PDF'/'PNG'/'JPEG' or 'screen'</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_filename">fileName</code></td>
<td>
<p>an optional string argument specifying the name of the file where to save the plots</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_dirsave">dirSave</code></td>
<td>
<p>specify a valid directory where to save the plot</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_combineplts">combinePlts</code></td>
<td>
<p>a boolean indicating whether the plots generated will be combined into one single figure or not</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_nomovavg">noMovAvg</code></td>
<td>
<p>a boolean indicating whether moving statistical estimators, such as, the moving average will be displayed</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_noconfbands">noConfBands</code></td>
<td>
<p>a boolean indicating whether a confidence band will be displayed</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_cutoff.pts">cutOff.pts</code></td>
<td>
<p>an integer value indicating the cut-off value to determine whether there would be a subsample for clarity sake in the plots</p>
</td></tr>
<tr><td><code id="staticPlots_+3A_dbg">dbg</code></td>
<td>
<p>internal flag for activating debugging options, i.e. display furhter information in screen</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
packageData &lt;- retrievePckgData("ggplot2")
totalDownloads &lt;- packageData[[1]]
#lastmonthDownloads &lt;- packageData[[2]]
staticPlots(totalDownloads, device="screen")
staticPlots(totalDownloads,combinePlts=TRUE, device="screen")


</code></pre>

<hr>
<h2 id='summaries'>function to display the summary of the data</h2><span id='topic+summaries'></span>

<h3>Description</h3>

<p>function to display the summary of the data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summaries(data1, deltaTs = 30)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summaries_+3A_data1">data1</code></td>
<td>
<p>first dataset, eg. total data</p>
</td></tr>
<tr><td><code id="summaries_+3A_deltats">deltaTs</code></td>
<td>
<p>a numerical (integer) value, indicating the lenght &ndash;in days&ndash; for selecting a subset of the original dataset; default value is 1 mont, ie. 30 days</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
packageXdownloads &lt;- retrievePckgData("ehelp")[[1]]
summaries(packageXdownloads)


</code></pre>

<hr>
<h2 id='time.intervals'>function to identify units of times and time intervals for customizing axes of plots</h2><span id='topic+time.intervals'></span>

<h3>Description</h3>

<p>function to identify units of times and time intervals for customizing axes of plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'intervals'
time(tot.days)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time.intervals_+3A_tot.days">tot.days</code></td>
<td>
<p>number of days in time interval to consider</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with the unit of time and time interval
</p>

<hr>
<h2 id='time.units'>function to identify units of times based on the number of days</h2><span id='topic+time.units'></span>

<h3>Description</h3>

<p>function to identify units of times based on the number of days
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'units'
time(tot.days)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time.units_+3A_tot.days">tot.days</code></td>
<td>
<p>number of days</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with the &quot;time units&quot; included in the total number of days
</p>

<hr>
<h2 id='today'>function that returns the current date</h2><span id='topic+today'></span>

<h3>Description</h3>

<p>function that returns the current date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>today()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
