<!DOCTYPE html><html lang="en"><head><title>Help for package halfcircle</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {halfcircle}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ex_flow'><p>Traded volume of land between countries</p></a></li>
<li><a href='#ex_node'><p>country attributes</p></a></li>
<li><a href='#halfcircle'><p>Visualization method for flow data using halfcircle diagram</p></a></li>
<li><a href='#halfmeancenter'><p>Calculate average values of flows and plot them</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Plot Halfcircle Diagram</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-10-28</td>
</tr>
<tr>
<td>Author:</td>
<td>Sohyun Park, Ningchuan Xiao</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sohyun Park &lt;park.2627@osu.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>There are growing concerns on flow data in diverse fields including trade, migration, knowledge diffusion, disease spread, and transportation. The package is an effective visual support to learn the pattern of flow which is called halfcircle diagram. The flow between two nodes placed on the center line of a circle is represented using a half circle drawn from the origin to the destination in a clockwise direction. Through changing the order of nodes, the halfcircle diagram enables users to examine the complex relationship between bidirectional flow and each potential determinants. Furthermore, the halfmeancenter function, which calculates (un) weighted mean center of half circles, makes the comparison easier.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>scales, graphics</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-10-29 00:11:32 UTC; madtr</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-11-02 18:30:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='ex_flow'>Traded volume of land between countries</h2><span id='topic+ex_flow'></span>

<h3>Description</h3>

<p>A dataset containing trade data between countries and traded volumes for each 4 category.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ex_flow)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10866 rows and 6 variables:
</p>

<dl>
<dt>O</dt><dd><p>name of exporting country</p>
</dd>
<dt>D</dt><dd><p>name of importing country</p>
</dd>
<dt>vegetable</dt><dd><p>volume of land associated with trading vegetables, in ha</p>
</dd>
<dt>fruit</dt><dd><p>volume of land associated with trading fruits, in ha</p>
</dd>
<dt>wheat</dt><dd><p>volume of land associated with trading wheats, in ha</p>
</dd>
<dt>soybean</dt><dd><p>volume of land associated with trading soybeans, in ha</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://fao.org/faostat/">http://fao.org/faostat/</a>
</p>

<hr>
<h2 id='ex_node'>country attributes</h2><span id='topic+ex_node'></span>

<h3>Description</h3>

<p>A dataset containing 154 countries who participate in the trade and related attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ex_node)
</code></pre>


<h3>Format</h3>

<p>A data frame with 154 rows and 8 variables:
</p>

<dl>
<dt>country</dt><dd><p>name of exporting country</p>
</dd>
<dt>x</dt><dd><p>longitude of the center of a country</p>
</dd>
<dt>y</dt><dd><p>latitude of the center of a country</p>
</dd>
<dt>pop_total</dt><dd><p>total number of population</p>
</dd>
<dt>gdpc</dt><dd><p>Gross Domestic Product per capita, in dollar</p>
</dd>
<dt>area_cultivation</dt><dd><p>total volume land for cultivation use, in ha</p>
</dd>
<dt>water_total</dt><dd><p>total volume of usable water, in cubic meter</p>
</dd>
<dt>income_level</dt><dd><p>5 levels by income</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://fao.org/faostat/">http://fao.org/faostat/</a>
</p>

<hr>
<h2 id='halfcircle'>Visualization method for flow data using halfcircle diagram</h2><span id='topic+halfcircle'></span>

<h3>Description</h3>

<p>halfcircle function draws flows between nodes creating halfcircle diagram.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>halfcircle(flow, node, dir = "horizontal", circle.col = "lightgray",
  circle.trans = 0.5, flow.col = "black", flow.trans = 0.5,
  flow.width = "proportional", node.color = "black", node.size = 0.1,
  node.pch = 20, node.trans = 0.7, label = node[, c(1)],
  label.size = 0.5, label.col = "black", label.gap = 0.1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="halfcircle_+3A_flow">flow</code></td>
<td>
<p>a dataframe which is to draw half-circles. The data should be in the form of an edge list containing node of origin, node of destination, and magnitude of the flow on the first three columns.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_node">node</code></td>
<td>
<p>a dataframe which contains names of node on the first column. Nodes on the center line of a circle are drawn by the order of the data. Every node presented in flow data must be contained.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_dir">dir</code></td>
<td>
<p>if 'horizontal' (the default), nodes are drawn along the X-axis. If 'vertical', nodes are drawn along the Y-axis.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_circle.col">circle.col</code></td>
<td>
<p>color of background circle</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_circle.trans">circle.trans</code></td>
<td>
<p>transparency of color of background circle</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_flow.col">flow.col</code></td>
<td>
<p>flow color. flow.col can be a list of color vectors, the vectors are then used per flow.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_flow.trans">flow.trans</code></td>
<td>
<p>transparency of color of flows</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_flow.width">flow.width</code></td>
<td>
<p>width of flows. if 'proportional' (the default), each width is calculated to be proportional to the maximum volume of flows. Maximum width is set to be 10. Otherwise, a list of width vectors can be used per flow.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_node.color">node.color</code></td>
<td>
<p>node color. It can be a list of color vectors, and the vectors are then used per node.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_node.size">node.size</code></td>
<td>
<p>node size</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_node.pch">node.pch</code></td>
<td>
<p>node type. see ?points for more options.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_node.trans">node.trans</code></td>
<td>
<p>transparency of color of flows</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_label">label</code></td>
<td>
<p>the first column of node, names, is represented (the default). a list of vector an be used per node. if NULL, no label is drawn.</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_label.size">label.size</code></td>
<td>
<p>label size</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_label.col">label.col</code></td>
<td>
<p>label color</p>
</td></tr>
<tr><td><code id="halfcircle_+3A_label.gap">label.gap</code></td>
<td>
<p>gap between the node and the respective label</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a low-level graphical function, and you will create a halfcircle diagram. To create the diagram, nodes are placed as a set of points on a straight line segment in the center of a circle. The flow between two nodes is represented using a half cicle drawn from the origin to the destination in a clockwise direction. It is virtually drawn on xy-coordinates where both x and y range from -1 to 1. Flows between the same nodes are not drawn.
</p>


<h3>Author(s)</h3>

<p>Sohyun Park &lt;park.2627@osu.edu&gt;, Ningchuan Xiao
</p>


<h3>References</h3>

<p>Xiao and Chun (2009) &lt;doi:10.1559/152304009788188763&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load flow data
data(ex_flow)
flow &lt;- ex_flow[,c(1,2,3)] # select veget column as volume
flow &lt;- subset(flow,flow$vegetable&gt;5000)
data(ex_node) # load node data
node &lt;- ex_node[c(order(-ex_node$gdpc)),] # sort nodes in descending order of gdpc values
halfcircle(flow, node, dir="vertical", circle.col="gray", flow.col="black",label=NULL)

# legend
max &lt;- max(flow[,c(3)]); median &lt;- median(flow[,c(3)]); min &lt;- min(flow[,c(3)])
max_w &lt;- 10; median_w &lt;- round(10*median/max); min_w &lt;- round(10*min/max)
legend(x=-1.2, y=-0.8, legend=c(paste(round(max)), paste(round(median)), paste(round(min))),
    lty=1, lwd=c(max_w, median_w, min_w), cex=0.7)

# customize colors
node$color &lt;- c("#22abcb","#4eb6ad","#86c388","#adcd6c","#dad84f")[node$income_level]
flow2 &lt;- data.frame(flow, node[match(flow[,"O"], node[,"country"]),])
halfcircle(flow2, node, dir="vertical", flow.col=flow2$color, node.color=node$color, label=NULL)

# highlight one node
flow3 &lt;- flow
flow3$color &lt;- "gray"
flow3$color[flow3$O=="China"|flow3$D=="China"] &lt;- "blue"
flow3 &lt;- flow3[c(order(flow3$color,decreasing=TRUE)),]
node$label &lt;- ""
node$label[node$country=="China"] &lt;- "China"
halfcircle(flow3, node, dir="vertical", flow.col=flow3$color, label=node$label, label.size=0.7)
</code></pre>

<hr>
<h2 id='halfmeancenter'>Calculate average values of flows and plot them</h2><span id='topic+halfmeancenter'></span>

<h3>Description</h3>

<p>Calculate average values of flows and plot them
</p>


<h3>Usage</h3>

<pre><code class='language-R'>halfmeancenter(flow, node, dir = "horizontal")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="halfmeancenter_+3A_flow">flow</code></td>
<td>
<p>a dataframe which is to draw half-circles. The data should consist of node of origin, node of destination, and magnitude of the flow on the first three columns.</p>
</td></tr>
<tr><td><code id="halfmeancenter_+3A_node">node</code></td>
<td>
<p>a dataframe which contains names of node on the first column. Nodes on the center line of a circle are drawn by the order of the data.</p>
</td></tr>
<tr><td><code id="halfmeancenter_+3A_dir">dir</code></td>
<td>
<p>if 'horizontal', nodes are drawn along the X-axis. If 'vertical', nodes are drawn along the Y-axis.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is to get values of mean centers and average radius of flows. One of values of mean centers is weighted by the magnitude of flow and the other one is unweighted. If flows are normally distributed or all combinations of flows between nodes are made, the mean center should be located in the center of a circle, that is (0,0) on the xy-coordinates, and average radius should be 0.5. If the mean center fall in a certain quadrant, a user can evaluate the skewedness.
</p>


<h3>Value</h3>

<p>A list containing calculated average values c(x-coordinate of weighted mean center, y-coordinate of weighted mean center, weighted average radius,x-coordinate of unweighted mean center, y-coordinate of unweighted mean center, unweighted average radius)
</p>


<h3>Author(s)</h3>

<p>Sohyun Park &lt;park.2627@osu.edu&gt;, Ningchuan Xiao
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ex_flow)
flow &lt;- subset(ex_flow, ex_flow$veget&gt;5000)
data(ex_node)
node &lt;- ex_node[c(order(-ex_node$gdpc)),]
halfmeancenter(flow, node, dir="vertical")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
