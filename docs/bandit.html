<!DOCTYPE html><html lang="en"><head><title>Help for package bandit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bandit}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bandit-package'><p>Functions for simple A/B split test and multi-armed bandit analysis</p></a></li>
<li><a href='#best_binomial_bandit'>
<p>best_binomial_bandit</p></a></li>
<li><a href='#best_binomial_bandit_sim'><p>best_binomial_bandit_sim</p></a></li>
<li><a href='#best_poisson_bandit'>
<p>best_poisson_bandit</p></a></li>
<li><a href='#deseasonalized_trend'>
<p>deseasonalized_trend</p></a></li>
<li><a href='#distribution_estimate'>
<p>summarize_metrics</p></a></li>
<li><a href='#prob_winner'><p>prob_winner</p></a></li>
<li><a href='#significance_analysis'>
<p>significance_analysis</p></a></li>
<li><a href='#sim_post'><p>sim_post</p></a></li>
<li><a href='#summarize_metrics'>
<p>summarize_metrics</p></a></li>
<li><a href='#value_remaining'><p>value_remaining</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Functions for Simple a/B Split Test and Multi-Armed Bandit
Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-06-028</td>
</tr>
<tr>
<td>Imports:</td>
<td>boot, gam (&ge; 1.09)</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Lotze and Markus Loecher</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Markus Loecher &lt;markus.loecher@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of functions for doing analysis of A/B split test data and web metrics in general.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-28 16:06:35 UTC; loecherm</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-29 11:20:12 UTC</td>
</tr>
</table>
<hr>
<h2 id='bandit-package'>Functions for simple A/B split test and multi-armed bandit analysis</h2><span id='topic+bandit-package'></span><span id='topic+bandit'></span>

<h3>Description</h3>

<p>A set of functions for doing analysis of A/B split test data and web metrics in general.</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
    Package: </td><td style="text-align: left;"> bandit</td>
</tr>
<tr>
 <td style="text-align: left;">
    Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
    Title: </td><td style="text-align: left;"> Functions for simple A/B split test and multi-armed bandit analysis</td>
</tr>
<tr>
 <td style="text-align: left;">
    Version: </td><td style="text-align: left;"> 0.5.0</td>
</tr>
<tr>
 <td style="text-align: left;">
    Date: </td><td style="text-align: left;"> 2014-05-03</td>
</tr>
<tr>
 <td style="text-align: left;">
    Imports: </td><td style="text-align: left;"> boot, gam (&gt;= 1.09)</td>
</tr>
<tr>
 <td style="text-align: left;">
    Author: </td><td style="text-align: left;"> Thomas Lotze and Markus Loecher</td>
</tr>
<tr>
 <td style="text-align: left;">
    Maintainer: </td><td style="text-align: left;"> Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
    License: </td><td style="text-align: left;"> GPL-3</td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Thomas Lotze and Markus Loecher</p>

<hr>
<h2 id='best_binomial_bandit'>
best_binomial_bandit
</h2><span id='topic+best_binomial_bandit'></span><span id='topic+bbb'></span>

<h3>Description</h3>

<p>Compute the Bayesian probabilities for each arm being the best binomial bandit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>best_binomial_bandit(x, n, alpha=1, beta=1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="best_binomial_bandit_+3A_x">x</code></td>
<td>
<p>as in prop.test, a vector of the number of successes</p>
</td></tr>
<tr><td><code id="best_binomial_bandit_+3A_n">n</code></td>
<td>
<p>as in prop.test, a vector of the number of trials</p>
</td></tr>
<tr><td><code id="best_binomial_bandit_+3A_alpha">alpha</code></td>
<td>
<p>shape parameter alpha for the prior beta distribution.</p>
</td></tr>
<tr><td><code id="best_binomial_bandit_+3A_beta">beta</code></td>
<td>
<p>shape parameter beta for the prior beta distribution.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of probabilities for each arm being the best binomial bandit; this can be used for future
randomized allocation
</p>


<h3>Author(s)</h3>

<p>Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt; and Markus Loecher
</p>


<h3>References</h3>

<p>Steven L. Scott, A modern Bayesian look at the multi-armed bandit, Appl. Stochastic Models Bus.
Ind. 2010; 26:639-658. (<a href="http://www.economics.uci.edu/~ivan/asmb.874.pdf">http://www.economics.uci.edu/~ivan/asmb.874.pdf</a>)
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+prop.test">prop.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x=c(10,20,30,50)
n=c(100,102,120,130)
arm_probabilities = best_binomial_bandit(x,n)
print(arm_probabilities)
paste("The best arm is likely ", which.max(arm_probabilities), ", with ",
	round(100*max(arm_probabilities), 2), " percent probability of being the best.", sep="")

best_binomial_bandit(c(2,20),c(100,1000))

best_binomial_bandit(c(2,20),c(100,1000), alpha = 2, beta = 5)

#quick look at the various shapes of the beta distribution as we change the shape params:
AlphaBeta = cbind(alpha=c(0.5,5,1,2,2),beta=c(0.5,1,3,2,5))
M = nrow(AlphaBeta)
y= matrix(0,100,ncol=M)
x = seq(0,1,length=100)
for (i in 1:M) y[,i] = dbeta(x,AlphaBeta[i,1],AlphaBeta[i,2])
matplot(x,y,type="l", ylim = c(0,3.5), lty=1, lwd=2)
param_strings = paste("a=", AlphaBeta[,"alpha"], ", b=", AlphaBeta[,"beta"], sep="")
legend("top", legend = param_strings, col=1:M, lty=1)
</code></pre>

<hr>
<h2 id='best_binomial_bandit_sim'>best_binomial_bandit_sim</h2><span id='topic+best_binomial_bandit_sim'></span>

<h3>Description</h3>

<p>Compute the Bayesian probabilities for each arm being the best binomial bandit, using simulation.</p>


<h3>Usage</h3>

<pre><code class='language-R'>best_binomial_bandit_sim(x, n, alpha = 1, beta = 1, ndraws = 5000)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="best_binomial_bandit_sim_+3A_x">x</code></td>
<td>
<p>as in prop.test, a vector of the number of successes</p>
</td></tr>
<tr><td><code id="best_binomial_bandit_sim_+3A_n">n</code></td>
<td>
<p>as in prop.test, a vector of the number of trials</p>
</td></tr>
<tr><td><code id="best_binomial_bandit_sim_+3A_alpha">alpha</code></td>
<td>
<p>shape parameter alpha for the prior beta distribution.</p>
</td></tr>
<tr><td><code id="best_binomial_bandit_sim_+3A_beta">beta</code></td>
<td>
<p>shape parameter beta for the prior beta distribution.</p>
</td></tr>
<tr><td><code id="best_binomial_bandit_sim_+3A_ndraws">ndraws</code></td>
<td>
<p>number of random draws from the posterior</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of probabilities for each arm being the best binomial bandit;
this can be used for future randomized allocation</p>


<h3>Author(s)</h3>

<p>Thomas Lotze and Markus Loecher</p>


<h3>References</h3>

<p>Steven L. Scott, A modern Bayesian look at the multi-armed bandit, Appl. Stochastic Models Bus. Ind. 2010; 26:639-658.
</p>
<p>(<a href="http://www.economics.uci.edu/~ivan/asmb.874.pdf">http://www.economics.uci.edu/~ivan/asmb.874.pdf</a>)</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+prop.test">prop.test</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>
x=c(10,20,30,33)
n=c(100,102,120,130)
best_binomial_bandit_sim(x,n, ndraws=1000)
round(best_binomial_bandit(x,n),3)

best_binomial_bandit_sim(c(2,20),c(100,1000))

best_binomial_bandit_sim(c(2,20),c(100,1000), alpha = 2, beta = 5)

#quick look at the various shapes of the beta distribution as we change the shape params:
AlphaBeta = cbind(alpha=c(0.5,5,1,2,2),beta=c(0.5,1,3,2,5))
M = nrow(AlphaBeta)
y= matrix(0,100,ncol=M)
x = seq(0,1,length=100)
for (i in 1:M) y[,i] = dbeta(x,AlphaBeta[i,1],AlphaBeta[i,2])
matplot(x,y,type="l", ylim = c(0,3.5), lty=1, lwd=2)
param_strings = paste("a=", AlphaBeta[,"alpha"], ", b=", AlphaBeta[,"beta"], sep="")
legend("top", legend = param_strings, col=1:M, lty=1)
</code></pre>

<hr>
<h2 id='best_poisson_bandit'>
best_poisson_bandit
</h2><span id='topic+best_poisson_bandit'></span><span id='topic+bpb'></span>

<h3>Description</h3>

<p>Compute the Bayesian probabilities for each arm being the best poisson bandit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>best_poisson_bandit(x, n = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="best_poisson_bandit_+3A_x">x</code></td>
<td>

<p>as in prop.test, a vector of the number of successes; it may alternatively be a list of vectors of the results of each trial, if n is not provided
</p>
</td></tr>
<tr><td><code id="best_poisson_bandit_+3A_n">n</code></td>
<td>

<p>as in prop.test, a vector of the number of trials; if it is not provided, x must be a list of vectors of the results of each trial
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of probabilities for each arm being the best poisson bandit; this can be used for future randomized allocation
</p>


<h3>Author(s)</h3>

<p>Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt;
</p>


<h3>References</h3>

<p>Steven L. Scott, A modern Bayesian look at the multi-armed bandit, Appl. Stochastic Models Bus. Ind. 2010; 26:639-658. (<a href="http://www.economics.uci.edu/~ivan/asmb.874.pdf">http://www.economics.uci.edu/~ivan/asmb.874.pdf</a>)
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+prop.test">prop.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p1 = rpois(100, lambda=10)
p2 = rpois(100, lambda=9)
x = sapply(list(p1, p2), sum)
n = sapply(list(p1, p2), length)
best_poisson_bandit(x,n)
</code></pre>

<hr>
<h2 id='deseasonalized_trend'>
deseasonalized_trend
</h2><span id='topic+deseasonalized_trend'></span>

<h3>Description</h3>

<p>A convenience function to analyze a timeseries and return an estimate (via gam, using day of week factors and smoothed timestamp) of whether, after accounting for day-of-week, there is a significant time-based influence and what that influence is.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deseasonalized_trend(df, w=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="deseasonalized_trend_+3A_df">df</code></td>
<td>

<p>a data frame containing timestamp and value entries
</p>
</td></tr>
<tr><td><code id="deseasonalized_trend_+3A_w">w</code></td>
<td>

<p>number of attempts (n for binomial data)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with the following items:
</p>
<table role = "presentation">
<tr><td><code>pval</code></td>
<td>
<p>pval given by anova on gam, to indicate whether s(timestamp) is significant</p>
</td></tr>
<tr><td><code>smoothed_prediction</code></td>
<td>
<p>a smoothed prediction over time (on Wednesdays), to give a human-understandable idea of what the change over time has been</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>timestamps = as.numeric(as.POSIXct(seq(as.Date("2012-01-01"),as.Date("2012-05-03"),by=1)))
df=data.frame(timestamp = timestamps, value = rnorm(length(timestamps)))
dt = deseasonalized_trend(df)
if (dt$pval &lt; 0.01) {
  print("Significant time-based factor")
  plot(df$timestamp, dt$smoothed_prediction)
} else {
  print("No significant time-based factor")
}

df=data.frame(timestamp = timestamps,
              value = sapply(timestamps, function(t) {rpois(1, lambda=t-min(timestamps))}))
dt = deseasonalized_trend(df)
if (dt$pval &lt; 0.01) {
  print("Significant time-based factor")
  plot(df$timestamp, dt$smoothed_prediction)
} else {
  print("No significant time-based factor")
}

</code></pre>

<hr>
<h2 id='distribution_estimate'>
summarize_metrics
</h2><span id='topic+distribution_estimate'></span>

<h3>Description</h3>

<p>A convenience function to perform overall metric analysis: mean, median, CI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distribution_estimate(v, successes=NULL, num_quantiles=101, observed=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="distribution_estimate_+3A_v">v</code></td>
<td>

<p>a vector of values to be analyzed (for nonbinary data), or number of trials (for binary data)
</p>
</td></tr>
<tr><td><code id="distribution_estimate_+3A_successes">successes</code></td>
<td>

<p>number of successes (for binary data)
</p>
</td></tr>
<tr><td><code id="distribution_estimate_+3A_num_quantiles">num_quantiles</code></td>
<td>

<p>number of quantiles to split into
</p>
</td></tr>
<tr><td><code id="distribution_estimate_+3A_observed">observed</code></td>
<td>

<p>whether to generate the observed distribution (rather than the estimated distribution of the mean); default FALSE
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the following columns:
</p>
<table role = "presentation">
<tr><td><code>quantiles</code></td>
<td>
<p>the estimated quantiles (0,0.01,0.02,...,1) for the mean, using a Beta-binomial estimate of p for binomial data, a bootstrapped quantile distribution for real-valued numbers</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>x values for plotting a lineplot of the estimated distribution</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>y values for plotting a lineplot of the estimated distribution</p>
</td></tr>
<tr><td><code>mids</code></td>
<td>
<p>mid values for plotting a barplot of the estimated distribution</p>
</td></tr>
<tr><td><code>lefts</code></td>
<td>
<p>left values for plotting a barplot of the estimated distribution</p>
</td></tr>
<tr><td><code>rights</code></td>
<td>
<p>right values for plotting a barplot of the estimated distribution</p>
</td></tr>
<tr><td><code>widths</code></td>
<td>
<p>width values for plotting a barplot of the estimated distribution</p>
</td></tr>
<tr><td><code>heights</code></td>
<td>
<p>height values for plotting a barplot of the estimated distribution</p>
</td></tr>
<tr><td><code>probabilities</code></td>
<td>
<p>probabilities indicating how much probability is contained in each barplot</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>metric_list = list(rbinom(n=100,size=1,prob=0.5),
                   rbinom(n=100,size=1,prob=0.7),
                   rpois(n=100, lambda=5))
distribution_estimate(length(metric_list[[1]]), sum(metric_list[[1]]))
distribution_estimate(length(metric_list[[2]]), sum(metric_list[[2]]))
de = distribution_estimate(metric_list[[3]])
plot(de$x, de$y, type="l")
barplot(de$heights, de$widths)
distribution_estimate(metric_list[[3]], observed=TRUE)
</code></pre>

<hr>
<h2 id='prob_winner'>prob_winner</h2><span id='topic+prob_winner'></span>

<h3>Description</h3>

<p>Function to compute probability that each arm is the winner, given simulated posterior results</p>


<h3>Usage</h3>

<pre><code class='language-R'>prob_winner(post)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prob_winner_+3A_post">post</code></td>
<td>

<p>the simulated results from the posterior, provided by sim_post
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas Lotze and Markus Loecher</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x=c(10,20,30,50)
n=c(100,102,120,130)
betaPost = sim_post(x,n)
prob_winner(betaPost)

</code></pre>

<hr>
<h2 id='significance_analysis'>
significance_analysis
</h2><span id='topic+significance_analysis'></span>

<h3>Description</h3>

<p>A convenience function to perform overall proportion comparison using prop.test, before doing pairwise comparisons, to see what outcomes seem to be better than others.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>significance_analysis(x, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="significance_analysis_+3A_x">x</code></td>
<td>

<p>as in prop.test, a vector of the number of successes
</p>
</td></tr>
<tr><td><code id="significance_analysis_+3A_n">n</code></td>
<td>

<p>as in prop.test, a vector of the number of trials
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the following columns:
</p>
<table role = "presentation">
<tr><td><code>successes</code></td>
<td>
<p>x</p>
</td></tr>
<tr><td><code>totals</code></td>
<td>
<p>n</p>
</td></tr>
<tr><td><code>estimated_proportion</code></td>
<td>
<p>x/n</p>
</td></tr>
<tr><td><code>lower</code></td>
<td>
<p>0.95 confidence interval on the estimated amount by which this alternative outperforms the next-lower alternative</p>
</td></tr>
<tr><td><code>upper</code></td>
<td>
<p>0.95 confidence interval on the estimated amount by which this alternative outperforms the next-lower alternative</p>
</td></tr>
<tr><td><code>significance</code></td>
<td>
<p>p-value for the test that this alternative outperforms the next-lower alternative</p>
</td></tr>
<tr><td><code>order</code></td>
<td>
<p>order, by highest success proportion</p>
</td></tr>
<tr><td><code>best</code></td>
<td>
<p>1 if it is part of the 'highest performing group' &ndash; those groups which were not significantly different from the best group</p>
</td></tr>
<tr><td><code>p_best</code></td>
<td>
<p>Bayesian posterior probability that this alternative is the best binomial bandit</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This is intended for use in A/B split testing &ndash; so sizes of n should be roughly equal.
Also, note that alternatives which have the same rank are grouped together for analysis with the 'next-lower' alternative, so you may want to check to see if ranks are equal.
</p>


<h3>Author(s)</h3>

<p>Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+prop.test">prop.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x = c(10,20,30,50)
n = c(100,102,120,130)
sa = significance_analysis(x,n)
sa[rev(order(sa$estimated_proportion)), ]

x = c(37,41,30,43,39,30,31,35,50,30)
n = rep(50, length(x))
sa = significance_analysis(x,n)
sa[rev(order(sa$estimated_proportion)), ]

x = c(37,41,30,43,39,30,31,37,50,30)
n = rep(50, length(x))
sa = significance_analysis(x,n)
sa[rev(order(sa$estimated_proportion)), ]
</code></pre>

<hr>
<h2 id='sim_post'>sim_post</h2><span id='topic+sim_post'></span>

<h3>Description</h3>

<p>Simulate the posterior distribution  the Bayesian probabilities for each arm being the best binomial bandit</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_post(x, n, alpha = 1, beta = 1, ndraws = 5000)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_post_+3A_x">x</code></td>
<td>
<p>as in prop.test, a vector of the number of successes</p>
</td></tr>
<tr><td><code id="sim_post_+3A_n">n</code></td>
<td>
<p>as in prop.test, a vector of the number of trials</p>
</td></tr>
<tr><td><code id="sim_post_+3A_alpha">alpha</code></td>
<td>
<p>shape parameter alpha for the prior beta distribution.</p>
</td></tr>
<tr><td><code id="sim_post_+3A_beta">beta</code></td>
<td>
<p>shape parameter beta for the prior beta distribution.</p>
</td></tr>
<tr><td><code id="sim_post_+3A_ndraws">ndraws</code></td>
<td>
<p>number of random draws from the posterior</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas Lotze and Markus Loecher</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x=c(10,20,30,50)
n=c(100,102,120,130)
sim_post(x,n)

</code></pre>

<hr>
<h2 id='summarize_metrics'>
summarize_metrics
</h2><span id='topic+summarize_metrics'></span>

<h3>Description</h3>

<p>A convenience function to perform overall metric analysis: mean, median, CI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_metrics(v, successes=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summarize_metrics_+3A_v">v</code></td>
<td>

<p>a vector of values to be analyzed (for nonbinary data), or number of trials (for binary data)
</p>
</td></tr>
<tr><td><code id="summarize_metrics_+3A_successes">successes</code></td>
<td>

<p>number of successes (for binary data)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with the following items:
</p>
<table role = "presentation">
<tr><td><code>mean</code></td>
<td>
<p>mean</p>
</td></tr>
<tr><td><code>median</code></td>
<td>
<p>median</p>
</td></tr>
<tr><td><code>lower</code></td>
<td>
<p>0.95 confidence interval on the mean</p>
</td></tr>
<tr><td><code>upper</code></td>
<td>
<p>0.95 confidence interval on the mean</p>
</td></tr>
<tr><td><code>num_obs</code></td>
<td>
<p>number of observations of this metric</p>
</td></tr>
<tr><td><code>total</code></td>
<td>
<p>the sum of all values of this metric (mean*num_obs)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Thomas Lotze &lt;thomaslotze@thomaslotze.com&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>metric_list = list(rbinom(n=100,size=1,prob=0.5),
                   rbinom(n=100,size=1,prob=0.7),
                   rpois(n=100, lambda=5))
summarize_metrics(length(metric_list[[1]]), sum(metric_list[[1]]))
summarize_metrics(length(metric_list[[2]]), sum(metric_list[[2]]))
summarize_metrics(metric_list[[3]])
</code></pre>

<hr>
<h2 id='value_remaining'>value_remaining</h2><span id='topic+value_remaining'></span>

<h3>Description</h3>

<p>Compute the &quot;value_remaining&quot; in the binomial bandits</p>


<h3>Usage</h3>

<pre><code class='language-R'>value_remaining(x, n, alpha = 1, beta = 1, ndraws = 10000)</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="value_remaining_+3A_x">x</code></td>
<td>
<p>as in prop.test, a vector of the number of successes</p>
</td></tr>
<tr><td><code id="value_remaining_+3A_n">n</code></td>
<td>
<p>as in prop.test, a vector of the number of trials</p>
</td></tr>
<tr><td><code id="value_remaining_+3A_alpha">alpha</code></td>
<td>
<p>shape parameter alpha for the prior beta distribution.</p>
</td></tr>
<tr><td><code id="value_remaining_+3A_beta">beta</code></td>
<td>
<p>shape parameter beta for the prior beta distribution.</p>
</td></tr>
<tr><td><code id="value_remaining_+3A_ndraws">ndraws</code></td>
<td>
<p>number of random draws from the posterior</p>
</td></tr>
</table>


<h3>Value</h3>

<p>value_remaining distribution; the distribution of improvement amounts that another arm might
have over the current best arm</p>


<h3>Author(s)</h3>

<p>Thomas Lotze and Markus Loecher</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x=c(10,20,30,80)
n=c(100,102,120,240)
vr = value_remaining(x, n)
hist(vr)
best_arm = which.max(best_binomial_bandit(x, n))
# "potential value" remaining in the experiment
potential_value = quantile(vr, 0.95)
paste("Were still unsure about the CvR for the best arm (arm ", best_arm,
	"), but whatever it is, one of the other arms might beat it by as much as ",
	round(potential_value*100, 4), " percent.", sep="")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
