<!DOCTYPE html><html><head><title>Help for package mediation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mediation}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#amelidiate'><p>Function for combining outputs from mediations function and calculating</p>
quantities of interest. For use with multiple imputation procedures.</a></li>
<li><a href='#boundsdata'><p>Example Data for the Design Functions</p></a></li>
<li><a href='#CEDdata'><p>Example Data for the Crossover Encouragement Design</p></a></li>
<li><a href='#framing'><p>Brader, Valentino and Suhay (2008) Framing Experiment Data</p></a></li>
<li><a href='#ivmediate'><p>Causal Mediation Analysis with Treatment Noncompliance</p></a></li>
<li><a href='#jobs'><p>JOBS II data</p></a></li>
<li><a href='#mediate'><p>Causal Mediation Analysis</p></a></li>
<li><a href='#mediate_tsls'><p>Two-stage Least Squares Estimation of the Average Causal Mediation Effects</p></a></li>
<li><a href='#mediate.ced'><p>Estimating Average Causal Mediation Effects under the Crossover Encouragement</p>
Design</a></li>
<li><a href='#mediate.pd'><p>Estimating Average Causal Mediation Effects under the Parallel Design</p></a></li>
<li><a href='#mediate.ped'><p>Computing Bounds on Average Causal Mediation Effects under the Parallel</p>
Encouragement Design</a></li>
<li><a href='#mediate.sed'><p>Estimating Average Causal Mediation Effects under the Single Experiment</p>
Design</a></li>
<li><a href='#mediation'><p>mediation: Parametric and non parametric mediation analysis.</p></a></li>
<li><a href='#mediations'><p>Causal Mediation Analysis for Multiple Outcome/Treatment/Mediator</p>
Combinations</a></li>
<li><a href='#medsens'><p>Sensitivity Analysis for Causal Mediation Effects</p></a></li>
<li><a href='#multimed'><p>Estimation and Sensitivity Analysis for Multiple Causal Mechanisms</p></a></li>
<li><a href='#plot.ivmediate'><p>Plotting Local Indirect, Direct, and Total Effects from Mediation Analysis</p>
with Treatment Noncompliance</a></li>
<li><a href='#plot.mediate'><p>Plotting Indirect, Direct, and Total Effects from Mediation Analysis</p></a></li>
<li><a href='#plot.mediate.mer'><p>Plotting Indirect, Direct, and Total Effects from Mediation Analysis of</p>
Multilevel Models</a></li>
<li><a href='#plot.mediations'><p>Plotting Indirect, Direct, and Total Effects from Multiple Mediation Analyses</p></a></li>
<li><a href='#plot.medsens'><p>Plotting Results from Sensitivity Analysis for Causal Mediation Effects</p></a></li>
<li><a href='#plot.multimed'><p>Plotting the Results of Causal Mediation Analysis for Multiple Mechanisms</p></a></li>
<li><a href='#school'><p>School-level data</p></a></li>
<li><a href='#student'><p>Hypothetical student-level data</p></a></li>
<li><a href='#summary.ivmediate'><p>Summarizing Output from Mediation Analysis with Treatment Noncompliance</p></a></li>
<li><a href='#summary.mediate'><p>Summarizing Output from Mediation Analysis</p></a></li>
<li><a href='#summary.mediate.design'><p>Summarizing Output from Design Based Mediation Analysis</p></a></li>
<li><a href='#summary.mediate.mer'><p>Summarizing Output from Mediation Analysis of Multilevel Models</p></a></li>
<li><a href='#summary.mediations'><p>Summarizing Output from Multiple Mediation Analyses</p></a></li>
<li><a href='#summary.medsens'><p>Summarizing Results from Sensitivity Analysis for Causal Mediation Effects</p></a></li>
<li><a href='#summary.multimed'><p>Summarizing Output from Mediation Analysis with Multiple Mechanisms</p></a></li>
<li><a href='#test.modmed'><p>Significance Test for Moderated Mediation</p></a></li>
<li><a href='#test.TMint'><p>Significance Test for Treatment-Mediator Interaction in Causal Mediation</p>
Analysis</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>4.5.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-9-13</td>
</tr>
<tr>
<td>Title:</td>
<td>Causal Mediation Analysis</td>
</tr>
<tr>
<td>Author:</td>
<td>Dustin Tingley &lt;dtingley@gov.harvard.edu&gt;,
        Teppei Yamamoto &lt;teppei@mit.edu&gt;,
        Kentaro Hirose &lt;hirose@princeton.edu&gt;,
        Luke Keele &lt;ljk20@psu.edu&gt;,
        Kosuke Imai &lt;kimai@princeton.edu&gt;,
        Minh Trinh &lt;mdtrinh@mit.edu&gt;,
        Weihuang Wong &lt;wwong@mit.edu&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Teppei Yamamoto &lt;teppei@mit.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.15.1), MASS, Matrix, mvtnorm, sandwich</td>
</tr>
<tr>
<td>Imports:</td>
<td>lpSolve, Hmisc, lme4 (&ge; 1.0), stats, graphics, grDevices,
utils, boot</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mgcv, quantreg, VGAM, SuppDists, survival, parallel,
testthat, speedglm</td>
</tr>
<tr>
<td>Description:</td>
<td>We implement parametric and non parametric mediation analysis. This package performs the methods and suggestions in Imai, Keele and Yamamoto (2010) &lt;<a href="https://doi.org/10.1214%2F10-STS321">doi:10.1214/10-STS321</a>&gt;, Imai, Keele and Tingley (2010) &lt;<a href="https://doi.org/10.1037%2Fa0020761">doi:10.1037/a0020761</a>&gt;, Imai, Tingley and Yamamoto (2013) &lt;<a href="https://doi.org/10.1111%2Fj.1467-985X.2012.01032.x">doi:10.1111/j.1467-985X.2012.01032.x</a>&gt;, Imai and Yamamoto (2013) &lt;<a href="https://doi.org/10.1093%2Fpan%2Fmps040">doi:10.1093/pan/mps040</a>&gt; and Yamamoto (2013) <a href="http://web.mit.edu/teppei/www/research/IVmediate.pdf">http://web.mit.edu/teppei/www/research/IVmediate.pdf</a>. In addition to the estimation of causal mediation effects, the software also allows researchers to conduct sensitivity analysis for certain parametric models.</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://imai.princeton.edu/projects/mechanisms.html">https://imai.princeton.edu/projects/mechanisms.html</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-09-14 02:53:07 UTC; teppei</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-10-08 23:00:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='amelidiate'>Function for combining outputs from mediations function and calculating 
quantities of interest. For use with multiple imputation procedures.</h2><span id='topic+amelidiate'></span>

<h3>Description</h3>

<p>'amelidiate' takes the output from <code><a href="#topic+mediations">mediations</a></code> and stacks the 
different vectors. Next it outputs these stacked vectors in the format of a 
<code><a href="#topic+mediate">mediate</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>amelidiate(g)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="amelidiate_+3A_g">g</code></td>
<td>
<p>output from mediations that used the same models and variables but 
run on different datasets.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>amelidiate</code> is designed to help users process multiple 
datasets where missing values have been imputed. First create multiple
datasets using your preferred imputation software.
</p>
<p>Next pass the data sets, as shown in the example below, to the 
<code><a href="#topic+mediations">mediations</a></code> function. Finally pass the output of mediations 
through the <code>amelidiate</code> function. This will output an object that can 
then be passed through the standard summary and plot commands.
</p>
<p>This function is not completely developed. It does not support models for 
ordered outcomes, inherits the limitations of the mediations function, and 
does not pass the information required for calculation of p-values.
</p>


<h3>Value</h3>

<p>An object of class &quot;mediate&quot;.
</p>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, <a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+mediations">mediations</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Hypothetical example

## To use mediations, must make list of multiple datasets. Then, 
## must also repeat the treatment assignment list as many times 
## as you have data sets.
# datasets &lt;- list(D1=D1, D2=D2) # list of multiply imputed data sets
# mediators &lt;- c("M1")
# outcome &lt;- c("Ycont1")
# treatment &lt;- c("T1","T1") # note how the treatment indicator is repeated
# covariates &lt;- c("X1+X2")
# olsols &lt;- mediations(datasets, treatment, mediators, outcome, covariates, 
#                      families=c("gaussian","gaussian"), interaction=FALSE,
#                      conf.level=.90, sims=1000)
# output &lt;- amelidiate(olsols)
# summary(output)
# plot(output)

## End(Not run)
</code></pre>

<hr>
<h2 id='boundsdata'>Example Data for the Design Functions</h2><span id='topic+boundsdata'></span>

<h3>Description</h3>

<p>A random subsample of the simulated data used in Imai, Tingley, and
Yamamoto (2012). The data contains 1000 rows and 7 columns with no missing 
values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boundsdata
</code></pre>


<h3>Format</h3>

<p>A data frame containing the following variables, which are 
interpreted as results from a hypothetical randomized trial. See the source 
for a full description.
</p>

<dl>
<dt>out:</dt><dd><p> The binary outcome variable under the parallel design.</p>
</dd>
<dt>out.enc:</dt><dd><p> The binary outcome variable under the parallel 
encouragement design.</p>
</dd>
<dt>med:</dt><dd><p> The binary mediator under the parallel design.</p>
</dd>
<dt>med.enc:</dt><dd><p> The binary mediator under the parallel encouragement 
design.</p>
</dd>
<dt>ttt:</dt><dd><p> The binary treatment variable.</p>
</dd>
<dt>manip:</dt><dd><p> The design indicator, or the variable indicating whether the 
mediator is manipulated under the parallel design.</p>
</dd>
<dt>enc:</dt><dd><p> The trichotomous encouragement variable under the parallel 
encouragement design. Equals 0 if subject received no encouragement; 1 if 
encouraged for the mediator value of 1; and -1 if encouraged for the 
mediator value of 0.</p>
</dd>
</dl>


<h3>Details</h3>

<p>Conditioning on 'manip' = 0 will simulate a randomized trial under 
the single experiment design, where 'out' and 'med' equal observed outcome 
and mediator values, respectively.
</p>
<p>Unconditionally, using 'out', 'med', 'ttt' and 'manip' will simulate an 
experiment under the parallel design.
</p>
<p>The 'out.enc' and 'med.enc' variables represent the outcome and mediator 
values observed when subjects received the encouragement indicated in 
'enc'. Therefore, using 'out.enc', 'med.enc', 'ttt' and 'enc' will simulate 
an experiment under the parallel encouragement design.
</p>
<p>Note that all the observed responses are generated from an underlying 
distribution of potential outcomes and mediators (not shown in this 
dataset) satisfying the assumptions described in Imai, Tingley and 
Yamamoto (2012). The full simulation code is available as a companion 
replication archive for the article.
</p>


<h3>Source</h3>

<p>Imai, K., Tingley, D. and Yamamoto, T. (2012) Experimental Designs 
for Identifying Causal Mechanisms. Journal of the Royal Statistical 
Society, Series A (Statistics in Society).
</p>

<hr>
<h2 id='CEDdata'>Example Data for the Crossover Encouragement Design</h2><span id='topic+CEDdata'></span>

<h3>Description</h3>

<p>A randomly generated dataset containing 2000 rows and 7 columns with no 
missing values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CEDdata
</code></pre>


<h3>Format</h3>

<p>A data frame containing the following variables, which are 
interpreted as results from a hypothetical randomized trial employing the 
crossover encouragement design. 
</p>

<dl>
<dt>T1:</dt><dd><p> The binary treatment indicator in the first stage.</p>
</dd>
<dt>M1:</dt><dd><p> The binary mediator variable recorded in the first stage.</p>
</dd>
<dt>Y1:</dt><dd><p> The binary outcome variable recorded in the first stage.</p>
</dd>
<dt>T2:</dt><dd><p> The binary treatment in the second stage. Equal to 1 - T1 by 
design.</p>
</dd>
<dt>Z:</dt><dd><p> The binary encouragement indicator for the second stage.</p>
</dd>
<dt>M2:</dt><dd><p> The binary mediator recorded in the second stage.</p>
</dd>
<dt>Y2:</dt><dd><p> The binary outcome recorded in the second stage.</p>
</dd>
</dl>


<h3>Details</h3>

<p>Note that all the observed responses are generated from an 
underlying distribution of potential outcomes and mediators (not shown in 
this dataset) satisfying the assumptions described in Imai, Tingley and 
Yamamoto (2012).
</p>


<h3>Source</h3>

<p>Imai, K., Tingley, D. and Yamamoto, T. (2012) Experimental Designs 
for Identifying Causal Mechanisms. Journal of the Royal Statistical 
Society, Series A (Statistics in Society).
</p>

<hr>
<h2 id='framing'>Brader, Valentino and Suhay (2008) Framing Experiment Data</h2><span id='topic+framing'></span>

<h3>Description</h3>

<p>The <code>framing</code> data contains 265 rows and 15 columns of data from a 
framing experiment conducted by Brader, Valentino and Suhay (2008).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>framing
</code></pre>


<h3>Format</h3>

<p>A data frame containing the following variables: 
</p>
 
<dl>
<dt>immigr:</dt><dd><p> A four-point scale measuring subjects' attitudes toward
increased immigration. Larger values indicate more negative attitudes.</p>
</dd> 
<dt>english:</dt><dd><p> A four-point scale indicating whether subjects favor or 
oppose a law making English the official language of the U.S.</p>
</dd> 
<dt>cong_mesg:</dt><dd><p> Whether subjects requested sending an anti-immigration 
message to Congress on their behalf.</p>
</dd> <dt>anti_info:</dt><dd><p> Whether subjects
wanted to receive information from anti-immigration organizations.</p>
</dd> 
<dt>tone:</dt><dd><p> 1st treatment; whether the news story is framed positively or
negatively.</p>
</dd> <dt>eth:</dt><dd><p> 2nd treatment; whether the news story features a
Latino or European immigrant.</p>
</dd> <dt>cond:</dt><dd><p> Four level measure recording
joint treatment status of tone and eth.</p>
</dd> <dt>treat:</dt><dd><p> Product of the two
treatment variables. In the original study the authors only find this cell
to be significant.</p>
</dd> <dt>emo:</dt><dd><p> Measure of subjects' negative feeling
during the experiment. A numeric scale ranging between 3 and 12 where 3
indicates the most negative feeling.</p>
</dd> <dt>anx:</dt><dd><p> A four-point scale
measuring subjects' anxiety about increased immigration.</p>
</dd> <dt>p_harm:</dt><dd>
<p>Subjects' perceived harm caused by increased immigration. A numeric scale
between 2 and 8.</p>
</dd> <dt>age:</dt><dd><p> Subjects' age.</p>
</dd> <dt>educ:</dt><dd><p> Subjects'
highest educational attainments.</p>
</dd> <dt>gender:</dt><dd><p> Subjects' gender.</p>
</dd> 
<dt>income:</dt><dd><p> Subjects' income, measured as a 19-point scale.</p>
</dd> 
</dl>


<h3>Source</h3>

<p>Brader, T., Valentino, N. and Suhay, E. (2008). What triggers public
opposition to immigration? Anxiety, group cues, and immigration threat.
American Journal of Political Science 52, 4, 959&ndash;978.
</p>

<hr>
<h2 id='ivmediate'>Causal Mediation Analysis with Treatment Noncompliance</h2><span id='topic+ivmediate'></span>

<h3>Description</h3>

<p>'ivmediate' is used to estimate local average causal mediation effects, local
average natural direct effects and local average treatment effects for 
compliers using the method of Yamamoto (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ivmediate(model.t, model.m, model.y, ci = TRUE, sims = 1000,
  boot = TRUE, enc = "enc.name", treat = "treat.name",
  mediator = "med.name", conf.level = 0.95, long = TRUE,
  dropobs = FALSE, multicore = FALSE,
  mc.cores = getOption("mc.cores", 2L))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ivmediate_+3A_model.t">model.t</code></td>
<td>
<p>a fitted model object for actual treatment. Can be of class 
'lm' or 'glm'.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_model.m">model.m</code></td>
<td>
<p>a fitted model object for mediator.  Can be of class 'lm', or 
'glm'.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_model.y">model.y</code></td>
<td>
<p>a fitted model object for outcome.  Can be of class 'lm', or 
'glm'.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_ci">ci</code></td>
<td>
<p>a logical value. if 'TRUE' both point estimates and confidence 
intervals are calculated; if 'FALSE' only point estimates are produced. 
Default is 'TRUE'.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_sims">sims</code></td>
<td>
<p>number of Monte Carlo draws for nonparametric bootstrap or 
quasi-Bayesian approximation.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_boot">boot</code></td>
<td>
<p>a logical value. if 'FALSE' a quasi-Bayesian approximation is 
used for confidence intervals; if 'TRUE' nonparametric bootstrap will be 
used. Default is 'TRUE'.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_enc">enc</code></td>
<td>
<p>a character string indicating the name of the encouragement 
variable used in the models. Must be a binary variable.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_treat">treat</code></td>
<td>
<p>a character string indicating the name of the actual treatment 
variable used in the models.  Must be a binary variable.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_mediator">mediator</code></td>
<td>
<p>a character string indicating the name of the mediator 
variable used in the models.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_conf.level">conf.level</code></td>
<td>
<p>a numeric vector indicating the levels of the returned 
two-sided confidence intervals. Default is to return the 2.5 and 97.5 
percentiles of the simulated quantities.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_long">long</code></td>
<td>
<p>a logical value. If 'TRUE', the output will contain the entire 
sets of simulation draws of the estimated effects. Default is 'TRUE'.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_dropobs">dropobs</code></td>
<td>
<p>a logical value indicating the behavior when the model frames 
of 'model.t', 'model.m' and 'model.y' are composed of different 
observations. If 'TRUE', models will be re-fitted using common data rows.
If 'FALSE', error is returned. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_multicore">multicore</code></td>
<td>
<p>a logical value indicating whether to parallelize 
simulations into multiple cores. Default is 'FALSE'. Note that this option 
is currently unavailable on Windows.</p>
</td></tr>
<tr><td><code id="ivmediate_+3A_mc.cores">mc.cores</code></td>
<td>
<p>number of cores to be used in the parallelization of 
bootstrap or Monte Carlo simulations. Default is the value in the
'mc.cores' option (see <code><a href="parallel.html#topic+mclapply">mclapply</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is the workhorse function for estimating local causal mediation
effects for compliers using the approach of Yamamoto (2013).
</p>
<p>Although the method is quite general and accommodate various types of 
mediator and outcome variables, the current function can only handle binary
variables (modeled via <code>glm</code> with <code>family=binomial</code>) and 
continuous variables (modeled via <code>lm</code>). In addition, when the
mediator is continuous and its model contains any predictor other than the 
encouragement and actual treatment, computation of confidence intervals is 
extremely slow because it requires numerical integration via 
<code><a href="stats.html#topic+integrate">integrate</a></code> for each observation in each simulation iteration. 
Users are advised to use a powerful computer (preferably equipped with 
multiple CPU cores and a non-Windows operating system) for such
calculation, especially if the data contain many rows and/or the desired
number of simulations is large.
</p>


<h3>Value</h3>

<p><code>ivmediate</code> returns an object of class '<code>ivmediate</code>', a 
list that contains the components listed below.  Some of these elements are
not available depending on the values of the 'ci' and 'long' options.
</p>
<p>The function <code>summary</code> (i.e., <code>summary.ivmediate</code>) can be used to
obtain a table of the results.  The function <code>plot</code> (i.e., 
<code>plot.ivmediate</code>) can be used to produce a plot of the estimated 
effects along with their confidence intervals.
</p>
<table>
<tr><td><code>dc0</code>, <code>dc1</code></td>
<td>
<p>point estimates for the local average causal mediation 
effects under the control and treatment conditions.</p>
</td></tr>
<tr><td><code>dc0.ci</code>, <code>dc1.ci</code></td>
<td>
<p>confidence intervals for the local average causal 
mediation effects. The confidence levels are set at the value specified in 
'conf.level'.</p>
</td></tr>
<tr><td><code>dc0.issue</code>, <code>dc1.issue</code></td>
<td>
<p>number of observations for which the numerical 
integration via <code><a href="stats.html#topic+integrate">integrate</a></code> encountered computational problems 
when calculating dc0 and dc1, respectively.</p>
</td></tr>
<tr><td><code>dc0.inf</code>, <code>dc1.inf</code></td>
<td>
<p>number of observations for which the numerical 
integration produced non-finite values when calculating dc0 and dc1, 
respectively. (Such values are excluded from the calculation of average 
effects.)</p>
</td></tr>
<tr><td><code>dc0.sims</code>, <code>dc1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation 
draws of local average causal mediation effects.</p>
</td></tr>
<tr><td><code>zc0</code>, <code>zc1</code></td>
<td>
<p>point estimates for the local average natural direct 
effects under the control and treatment conditions.</p>
</td></tr>
<tr><td><code>zc0.ci</code>, <code>zc1.ci</code></td>
<td>
<p>confidence intervals for the local average natural 
direct effects.</p>
</td></tr>
<tr><td><code>zc0.issue</code>, <code>zc1.issue</code></td>
<td>
<p>number of observations for which the numerical 
integration encountered computational problems when calculating zc0 and 
zc1, respectively.</p>
</td></tr>
<tr><td><code>zc0.inf</code>, <code>zc1.inf</code></td>
<td>
<p>number of observations for which the numerical 
integration produced non-finite values for zc0 and zc1.</p>
</td></tr>
<tr><td><code>zc0.sims</code>, <code>zc1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation 
draws of local average natural direct effects.</p>
</td></tr>
<tr><td><code>tauc</code></td>
<td>
<p>point estimate for the local average treatment effect.</p>
</td></tr>
<tr><td><code>tauc.ci</code></td>
<td>
<p>confidence interval for the local average treatment effect.</p>
</td></tr>
<tr><td><code>tauc.sims</code></td>
<td>
<p>a vector of length 'sims' containing simulation draws of 
the local average treatment effect.</p>
</td></tr>
<tr><td><code>boot</code></td>
<td>
<p>logical, the 'boot' argument used.</p>
</td></tr>
<tr><td><code>enc</code></td>
<td>
<p>a character string indicating the name of the 'enc' variable 
used.</p>
</td></tr>
<tr><td><code>treat</code></td>
<td>
<p>a character string indicating the name of the 'treat' variable 
used.</p>
</td></tr>
<tr><td><code>mediator</code></td>
<td>
<p>a character string indicating the name of the 'mediator' 
variable used.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p>the confidence levels used. </p>
</td></tr>
<tr><td><code>nobs</code></td>
<td>
<p>number of observations in the model frame for 'model.t', 
'model.m' and 'model.y'. May differ from the numbers in the original models 
input to 'ivmediate' if 'dropobs' was 'TRUE'.</p>
</td></tr>
<tr><td><code>sims</code></td>
<td>
<p>number of simulation draws used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Yamamoto, T. (2013). Identification and Estimation of Causal Mediation 
Effects with Treatment Noncompliance. Unpublished manuscript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.ivmediate">plot.ivmediate</a></code>, <code><a href="#topic+summary.ivmediate">summary.ivmediate</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# ** For illustration purposes a small number of simulations are used **

require(parallel)
require(MASS)

data(jobs)

a &lt;- lm(comply ~ treat + sex + age + marital + nonwhite + educ + income, 
        data = jobs)
b &lt;- glm(job_dich ~ comply + treat + sex + age + marital + nonwhite + educ + income, 
        data = jobs, family = binomial)
c &lt;- lm(depress2 ~ job_dich * (comply + treat) + sex + age + marital + nonwhite + educ + income, 
        data = jobs)

out &lt;- ivmediate(a, b, c, sims = 50, boot = FALSE, 
                 enc = "treat", treat = "comply", mediator = "job_dich")
                 
summary(out)
plot(out)

# Using non-parametric bootstrap
out.boot &lt;- ivmediate(a, b, c, sims = 50, boot = TRUE, 
                 enc = "treat", treat = "comply", mediator = "job_dich")
                 
summary(out.boot)
plot(out.boot)


</code></pre>

<hr>
<h2 id='jobs'>JOBS II data</h2><span id='topic+jobs'></span>

<h3>Description</h3>

<p>Job Search Intervention Study (JOBS II). JOBS II is a randomized field 
experiment that investigates the efficacy of a job trainingintervention on 
unemployed workers. The program is designed to not only increase 
reemploymentamong the unemployed but also enhance the mental health of the 
job seekers. In the JOBS IIfield experiment, 1,801 unemployed workers 
received a pre-screening questionnaire and were thenrandomly assigned to 
treatment and control groups. Those in the treatment group participatedin 
job-skills workshops. In the workshops, respondents learned job-search skills
and coping strategiesfor dealing with setbacks in the job-search process. 
Those in the control condition receiveda booklet describing job-search tips. 
In follow-up interviews, the two key outcome variables weremeasured; a 
continuous measure of depressive symptoms based on the Hopkins Symptom 
Checklist,and a binary variable, representing whether the respondent had 
become employed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jobs
</code></pre>


<h3>Format</h3>

<p>A data matrix with 899 rows and 17 columns, containing no missing 
values. The data are provided only for illustrative purposes and not for 
inference about program efficacy, for which the original data source should
be consulted. </p>
 <dl>
<dt>econ_hard:</dt><dd><p> Level of economic hardship 
pre-treatment with values from 1 to 5.</p>
</dd> <dt>depress1:</dt><dd><p> Measure of 
depressive symptoms pre-treatment.</p>
</dd> <dt>sex:</dt><dd><p> Indicator variable for 
sex. 1 = female</p>
</dd> <dt>age:</dt><dd><p> Age in years.</p>
</dd> <dt>occp:</dt><dd><p> Factor with 
seven categories for various occupations.</p>
</dd> <dt>marital:</dt><dd><p> Factor with 
five categories for marital status.</p>
</dd> <dt>nonwhite:</dt><dd><p> Indicator variable 
for race. 1 = nonwhite.</p>
</dd> <dt>educ:</dt><dd><p> Factor with five categories for 
educational attainment.</p>
</dd> <dt>income:</dt><dd><p> Factor with five categories for 
level of income.</p>
</dd> <dt>job_seek:</dt><dd><p> A continuous scale measuring the level 
of job-search self-efficacy with values from 1 to 5. The mediator 
variable.</p>
</dd> <dt>depress2:</dt><dd><p> Measure of depressive symptoms 
post-treatment.</p>
</dd> <dt>work1:</dt><dd><p> Indicator variable for employment. 1 = 
employed.</p>
</dd> <dt>job_dich:</dt><dd><p> The job_seek measure recoded into two 
categories of high and low. 1 = high job search self-efficacy.</p>
</dd> 
<dt>job_disc:</dt><dd><p> The job_seek measure recoded into four categories from 
lowest to highest.</p>
</dd> <dt>treat:</dt><dd><p> Indicator variable for whether 
participant was randomly selected for the JOBS II training program. 1 = 
assignment to participation.</p>
</dd> <dt>comply:</dt><dd><p> Indicator variable for 
whether participant actually participated in the JOBS II program. 1 = 
participation.</p>
</dd> <dt>control:</dt><dd><p> Indicator variable for whether participant
was randomly selected to not participate in the JOBS II training program. 1
= non-participation.</p>
</dd> </dl>


<h3>Source</h3>

<p>The complete JOBS II data is available from the data archives at 
www.icpsr.umich.edu/
</p>


<h3>References</h3>

<p>Vinokur, A. and Schul, Y. (1997). Mastery and inoculation against
setbacks as active ingredients in the jobs intervention for the
unemployed. Journal of Consulting and Clinical Psychology 65(5):867-77.
</p>

<hr>
<h2 id='mediate'>Causal Mediation Analysis</h2><span id='topic+mediate'></span>

<h3>Description</h3>

<p>'mediate' is used to estimate various quantities for causal mediation 
analysis, including average causal mediation effects (indirect effect), 
average direct effects, proportions mediated, and total effect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediate(model.m, model.y, sims = 1000, boot = FALSE,
  boot.ci.type = "perc", treat = "treat.name", mediator = "med.name",
  covariates = NULL, outcome = NULL, control = NULL,
  conf.level = 0.95, control.value = 0, treat.value = 1,
  long = TRUE, dropobs = FALSE, robustSE = FALSE, cluster = NULL,
  group.out = NULL, use_speed = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mediate_+3A_model.m">model.m</code></td>
<td>
<p>a fitted model object for mediator.  Can be of class 'lm', 
'polr', 'bayespolr', 'glm', 'bayesglm', 'gam', 'rq', 'survreg', or
'merMod'.</p>
</td></tr>
<tr><td><code id="mediate_+3A_model.y">model.y</code></td>
<td>
<p>a fitted model object for outcome.  Can be of class 'lm', 
'polr', 'bayespolr', 'glm', 'bayesglm', 'gam', 'vglm', 'rq', 'survreg', or 
'merMod'.</p>
</td></tr>
<tr><td><code id="mediate_+3A_sims">sims</code></td>
<td>
<p>number of Monte Carlo draws for nonparametric bootstrap or 
quasi-Bayesian approximation.</p>
</td></tr>
<tr><td><code id="mediate_+3A_boot">boot</code></td>
<td>
<p>a logical value. if 'FALSE' a quasi-Bayesian approximation is 
used for confidence intervals; if 'TRUE' nonparametric bootstrap will be 
used. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="mediate_+3A_boot.ci.type">boot.ci.type</code></td>
<td>
<p>a character string indicating the type of bootstrap 
confidence intervals. If &quot;bca&quot; and boot = TRUE, bias-corrected and 
accelerated (BCa) confidence intervals will be estimated. If &quot;perc&quot; and
boot = TRUE, percentile confidence intervals will be estimated. Default is 
&quot;perc&quot;.</p>
</td></tr>
<tr><td><code id="mediate_+3A_treat">treat</code></td>
<td>
<p>a character string indicating the name of the treatment variable
used in the models.  The treatment can be either binary (integer or a
two-valued factor) or continuous (numeric).</p>
</td></tr>
<tr><td><code id="mediate_+3A_mediator">mediator</code></td>
<td>
<p>a character string indicating the name of the mediator 
variable used in the models.</p>
</td></tr>
<tr><td><code id="mediate_+3A_covariates">covariates</code></td>
<td>
<p>a list or data frame containing values for a subset of the 
pre-treatment covariates in 'model.m' and 'model.y'. If provided, the 
function will return the estimates conditional on those covariate values.</p>
</td></tr>
<tr><td><code id="mediate_+3A_outcome">outcome</code></td>
<td>
<p>a character string indicating the name of the outcome variable
in &lsquo;model.y&rsquo;. Only necessary if 'model.y' is of class 'survreg'; otherwise
ignored.</p>
</td></tr>
<tr><td><code id="mediate_+3A_control">control</code></td>
<td>
<p>a character string indicating the name of the control group 
indicator. Only relevant if 'model.y' is of class 'gam'. If provided, 'd0',
'z0' and 'n0' are allowed to differ from 'd1', 'z1' and 'n1', respectively.</p>
</td></tr>
<tr><td><code id="mediate_+3A_conf.level">conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals. 
Default is to return the 2.5 and 97.5 percentiles of the simulated 
quantities.</p>
</td></tr>
<tr><td><code id="mediate_+3A_control.value">control.value</code></td>
<td>
<p>value of the treatment variable used as the control 
condition. Default is 0.</p>
</td></tr>
<tr><td><code id="mediate_+3A_treat.value">treat.value</code></td>
<td>
<p>value of the treatment variable used as the treatment 
condition. Default is 1.</p>
</td></tr>
<tr><td><code id="mediate_+3A_long">long</code></td>
<td>
<p>a logical value. If 'TRUE', the output will contain the entire 
sets of simulation draws of the the average causal mediation effects,
direct effects, proportions mediated, and total effect. Default is 'TRUE'.</p>
</td></tr>
<tr><td><code id="mediate_+3A_dropobs">dropobs</code></td>
<td>
<p>a logical value indicating the behavior when the model frames 
of 'model.m' and 'model.y' (and the 'cluster' variable if included) are 
composed of different observations. If 'TRUE', models will be re-fitted 
using common data rows. If 'FALSE', error is returned. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="mediate_+3A_robustse">robustSE</code></td>
<td>
<p>a logical value. If 'TRUE', heteroskedasticity-consistent 
standard errors will be used in quasi-Bayesian simulations. Ignored if 
'boot' is 'TRUE' or neither 'model.m' nor 'model.y' has a method for 
<code>vcovHC</code> in the <code>sandwich</code> package. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="mediate_+3A_cluster">cluster</code></td>
<td>
<p>a variable indicating clusters for standard errors. Note that 
this should be a vector of cluster indicators itself, not a character
string for the name of the variable.</p>
</td></tr>
<tr><td><code id="mediate_+3A_group.out">group.out</code></td>
<td>
<p>a character string indicating the name of the lmer/glmer 
group on which the mediate output is based. Can be used even when a merMod 
function is applied to only one of the mediator or the outcome. If merMod 
functions are applied to both the mediator and the outcome, default is the 
group name used in the outcome model; if the mediator group and the outcome
group are different and the user is interested in the mediate output based 
on the mediator group, then set group.out to the group name used in the 
mediator merMod model. If a merMod function is applied to only one of the 
mediator or the outcome, group.out is automatically set to the group name 
used in the merMod model.</p>
</td></tr>
<tr><td><code id="mediate_+3A_use_speed">use_speed</code></td>
<td>
<p>a logical value indicating whether, if nonparametric 
bootstrap is used, <code>lm</code> and <code>glm</code> models should be re-fit using 
functions from the <code>speedglm</code> package. Ignored if 'boot' is 'FALSE' or
if neither 'model.m' nor 'model.y' is of class 'lm' or 'glm'. Default is 
'FALSE'.</p>
</td></tr>
<tr><td><code id="mediate_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code>vcovHC</code> in the <code>sandwich</code> 
package: typically the 'type' argument, which is ignored if 'robustSE' is 
'FALSE'. Arguments to the <code>boot</code> in the <code>boot</code> package may also
be passed, e.g. 'parallel' and 'ncpus'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is the workhorse function for estimating causal mediation 
effects for a variety of data types. The average causal mediation effect 
(ACME) represents the expected difference in the potential outcome when the
mediator took the value that would realize under the treatment condition as
opposed to the control condition, while the treatment status itself is held
constant. That is, 
</p>
<p style="text-align: center;"><code class="reqn">\delta(t) \ = \ E\{Y(t, M(t_1)) - Y(t, M(t_0))\},</code>
</p>
 
<p>where <code class="reqn">t, t_1, t_0</code> are particular values of the treatment 
<code class="reqn">T</code> such that <code class="reqn">t_1 \neq t_0</code>, <code class="reqn">M(t)</code> is the potential
mediator, and <code class="reqn">Y(t,m)</code> is the potential outcome variable. The average 
direct effect (ADE) is defined similarly as,
</p>
<p style="text-align: center;"><code class="reqn">\zeta(t) \ = \ E\{Y(t_1, M(t)) - Y(t_0, M(t))\},</code>
</p>

<p>which represents the expected difference in the potential outcome when the 
treatment is changed but the mediator is held constant at the value that 
would realize if the treatment equals <code class="reqn">t</code>. The two quantities on
average add up to the total effect of the treatment on the outcome,
<code class="reqn">\tau</code>. See the references for more details.
</p>
<p>When both the mediator model ('model.m') and outcome model ('model.y') are 
normal linear regressions, the results will be identical to the usual LSEM 
method by Baron and Kenny (1986).  The function can, however, accommodate 
other data types including binary, ordered and count outcomes and mediators
as well as censored outcomes.  Variables can also be modeled 
nonparametrically, semiparametrically, or using quantile regression.
</p>
<p>If it is desired that inference be made conditional on specific values of 
the pre-treatment covariates included in the model, the &lsquo;covariates&rsquo; 
argument can be used to set those values as a list or data frame. The list 
may contain either the entire set or any strict subset of the covariates in
the model; in the latter case, the effects will be averaged over the other 
covariates. The &lsquo;covariates&rsquo; argument will be particularly useful when the 
models contain interactions between the covariates and the treatment and/or
mediator (known as &ldquo;moderated mediation&rdquo;).
</p>
<p>The prior weights in the mediator and outcome models are taken as sampling 
weights and the estimated effects will be weighted averages when non-NULL 
weights are used in fitting 'model.m' and 'model.y'. This will be useful 
when data does not come from a simple random sample, for example.
</p>
<p>As of version 4.0, the mediator model can be of either 'lm', 'glm' (or 
&lsquo;bayesglm&rsquo;), 'polr' (or &lsquo;bayespolr&rsquo;), 'gam', 'rq', &lsquo;survreg&rsquo;, or &lsquo;merMod&rsquo; 
class, corresponding respectively to the linear regression models, 
generalized linear models, ordered response models, generalized additive 
models, quantile regression models, parametric duration models, or 
multilevel models.. For binary response models, the 'mediator' must be a 
numeric variable with values 0 or 1 as opposed to a factor. 
Quasi-likelihood-based inferences are not allowed for the mediator model 
because the functional form must be exactly specified for the estimation 
algorithm to work.  The 'binomial' family can only be used for binary 
response mediators and cannot be used for multiple-trial responses.  This
is due to conflicts between how the latter type of models are implemented
in <code><a href="stats.html#topic+glm">glm</a></code> and how 'mediate' is currently written.
</p>
<p>For the outcome model, the censored regression model fitted via package 
<code>VGAM</code> (of class 'vglm' with 'family@vfamily' equal to &quot;tobit&quot;) can be
used in addition to the models listed above for the mediator.  The
'mediate' function is not compatible with censored regression models fitted
via other packages.  When the quantile regression is used for the outcome
model ('rq'), the estimated quantities are quantile causal mediation
effects, quantile direct effects and etc., instead of the average effects.
If the outcome model is of class 'survreg', the name of the outcome
variable must be explicitly supplied in the &lsquo;outcome&rsquo; argument. This is due
to the fact that 'survreg' objects do not contain that information in an
easily extractable form. It should also be noted that for
<code><a href="survival.html#topic+survreg">survreg</a></code> models, the <code><a href="survival.html#topic+Surv">Surv</a></code> function must be
directly used in the model formula in the call to the survreg function, and
that censoring types requiring more than two arguments to Surv (e.g.,
interval censoring) are not currently supported by 'mediate'.
</p>
<p>The quasi-Bayesian approximation (King et al. 2000) cannot be used if 
'model.m' is of class 'rq' or 'gam', or if 'model.y' is of class 'gam', 
'polr' or 'bayespolr'. In these cases, either an error message is returned 
or use of the nonparametric bootstrap is forced. Users should note that use
of the nonparametric bootstrap often requires significant computing time, 
especially when 'sims' is set to a large value.
</p>
<p>The 'control' argument must be provided when 'gam' is used for the outcome 
model and user wants to allow ACME and ADE to vary as functions of the 
treatment (i.e., to relax the &quot;no interaction&quot; assumption). Note that the 
outcome model must be fitted via package <code><a href="mgcv.html#topic+mgcv">mgcv</a></code> with
appropriate formula using <code><a href="mgcv.html#topic+s">s</a></code> constructs (see Imai et al. 2009
in the references). For other model types, the interaction can be allowed
by including an interaction term between <code class="reqn">T</code> and <code class="reqn">M</code> in the linear 
predictor of the outcome model. As of version 3.0, the 'INT' argument is 
deprecated and the existence of the interaction term is automatically 
detected (except for 'gam' outcome models).
</p>
<p>When the treatment variable is continuous or a factor with multiple levels,
user must specify the values of <code class="reqn">t_1</code> and <code class="reqn">t_0</code> using the 
'treat.value' and 'control.value' arguments, respectively.  The value of 
<code class="reqn">t</code> in the above expressions is set to <code class="reqn">t_0</code> for 'd0', 'z0', 
etc. and to <code class="reqn">t_1</code> for 'd1', 'z1', etc.
</p>


<h3>Value</h3>

<p><code>mediate</code> returns an object of class &quot;<code>mediate</code>&quot;, 
&quot;<code>mediate.order</code>&quot; if the outcome model used is 'polr' or 'bayespolr', 
or &quot;<code>mediate.mer</code>&quot; if 'lmer' or 'glmer' is used for the outcome or the
mediator model, a list that contains the components listed below.  Some of 
these elements are not available if 'long' is set to 'FALSE' by the user.
</p>
<p>The function <code>summary</code> (i.e., <code>summary.mediate</code>, 
<code>summary.mediate.order</code>, or <code>summary.mediate.mer</code>) can be used to
obtain a table of the results.  The function <code>plot</code> (i.e., 
<code>plot.mediate</code>, <code>plot.mediate.order</code>, or <code>plot.mediate.mer</code>)
can be used to produce a plot of the estimated average causal mediation, 
average direct, and total effects along with their confidence intervals.
</p>
<table>
<tr><td><code>d0</code>, <code>d1</code></td>
<td>
<p>point estimates for average causal mediation effects under 
the control and treatment conditions.</p>
</td></tr>
<tr><td><code>d0.ci</code>, <code>d1.ci</code></td>
<td>
<p>confidence intervals for average causal mediation 
effects. The confidence level is set at the value specified in 
'conf.level'.</p>
</td></tr>
<tr><td><code>d0.p</code>, <code>d1.p</code></td>
<td>
<p>two-sided p-values for average causal mediation effects.</p>
</td></tr>
<tr><td><code>d0.sims</code>, <code>d1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation 
draws of average causal mediation effects.</p>
</td></tr>
<tr><td><code>z0</code>, <code>z1</code></td>
<td>
<p>point estimates for average direct effect under the control 
and treatment conditions.</p>
</td></tr>
<tr><td><code>z0.ci</code>, <code>z1.ci</code></td>
<td>
<p>confidence intervals for average direct effects.</p>
</td></tr>
<tr><td><code>z0.p</code>, <code>z1.p</code></td>
<td>
<p>two-sided p-values for average causal direct effects.</p>
</td></tr>
<tr><td><code>z0.sims</code>, <code>z1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation 
draws of average direct effects.</p>
</td></tr>
<tr><td><code>n0</code>, <code>n1</code></td>
<td>
<p>the &quot;proportions mediated&quot;, or the size of the average causal 
mediation effects relative to the total effect.</p>
</td></tr>
<tr><td><code>n0.ci</code>, <code>n1.ci</code></td>
<td>
<p>confidence intervals for the proportions mediated.</p>
</td></tr>
<tr><td><code>n0.p</code>, <code>n1.p</code></td>
<td>
<p>two-sided p-values for proportions mediated.</p>
</td></tr>
<tr><td><code>n0.sims</code>, <code>n1.sims</code></td>
<td>
<p>vectors of length 'sims' containing simulation 
draws of the proportions mediated.</p>
</td></tr>
<tr><td><code>tau.coef</code></td>
<td>
<p>point estimate for total effect.</p>
</td></tr>
<tr><td><code>tau.ci</code></td>
<td>
<p>confidence interval for total effect.</p>
</td></tr>
<tr><td><code>tau.p</code></td>
<td>
<p>two-sided p-values for total effect.</p>
</td></tr>
<tr><td><code>tau.sims</code></td>
<td>
<p>a vector of length 'sims' containing simulation draws of 
the total effect.</p>
</td></tr>
<tr><td><code>d.avg</code>, <code>z.avg</code>, <code>n.avg</code></td>
<td>
<p>simple averages of d0 and d1, z0 and z1, n0 and 
n1, respectively, which users may want to use as summary values when those 
quantities differ.</p>
</td></tr>
<tr><td><code>d.avg.ci</code>, <code>z.avg.ci</code>, <code>n.avg.ci</code></td>
<td>
<p>confidence intervals for the above.</p>
</td></tr>
<tr><td><code>d.avg.p</code>, <code>z.avg.p</code>, <code>n.avg.p</code></td>
<td>
<p>two-sided p-values for the above.</p>
</td></tr>
<tr><td><code>d.avg.sims</code>, <code>z.avg.sims</code>, <code>n.avg.sims</code></td>
<td>
<p>vectors of length 'sims' 
containing simulation draws of d.avg, z.avg and n.avg, respectively.</p>
</td></tr>
<tr><td><code>d0.group</code>, <code>d1.group</code></td>
<td>
<p>group-specific point estimates for average 
causal mediation effects under the control and treatment conditions.</p>
</td></tr>
<tr><td><code>d0.ci.group</code>, <code>d1.ci.group</code></td>
<td>
<p>group-specific confidence intervals for 
average causal mediation effects. The confidence level is set at the value 
specified in 'conf.level'.</p>
</td></tr>
<tr><td><code>d0.p.group</code>, <code>d1.p.group</code></td>
<td>
<p>group-specific two-sided p-values for average 
causal mediation effects.</p>
</td></tr>
<tr><td><code>d0.sims.group</code>, <code>d1.sims.group</code></td>
<td>
<p>group-specific vectors of length 'sims' 
containing simulation draws of average causal mediation effects.</p>
</td></tr>
<tr><td><code>z0.group</code>, <code>z1.group</code></td>
<td>
<p>group-specific point estimates for average direct 
effect under the control and treatment conditions.</p>
</td></tr>
<tr><td><code>z0.ci.group</code>, <code>z1.ci.group</code></td>
<td>
<p>group-specific confidence intervals for 
average direct effects.</p>
</td></tr>
<tr><td><code>z0.p.group</code>, <code>z1.p.group</code></td>
<td>
<p>group-specific two-sided p-values for average 
causal direct effects.</p>
</td></tr>
<tr><td><code>z0.sims.group</code>, <code>z1.sims.group</code></td>
<td>
<p>group-specific vectors of length 'sims' 
containing simulation draws of average direct effects.</p>
</td></tr>
<tr><td><code>n0.group</code>, <code>n1.group</code></td>
<td>
<p>the group-specific &quot;proportions mediated&quot;, or the 
size of the group-specific average causal mediation effects relative to the 
total effect.</p>
</td></tr>
<tr><td><code>n0.ci.group</code>, <code>n1.ci.group</code></td>
<td>
<p>group-specific confidence intervals for the 
proportions mediated.</p>
</td></tr>
<tr><td><code>n0.p.group</code>, <code>n1.p.group</code></td>
<td>
<p>group-specific two-sided p-values for 
proportions mediated.</p>
</td></tr>
<tr><td><code>n0.sims.group</code>, <code>n1.sims.group</code></td>
<td>
<p>group-specific vectors of length 'sims' 
containing simulation draws of the proportions mediated.</p>
</td></tr>
<tr><td><code>tau.coef.group</code></td>
<td>
<p>group-specific point estimate for total effect.</p>
</td></tr>
<tr><td><code>tau.ci.group</code></td>
<td>
<p>group-specific confidence interval for total effect.</p>
</td></tr>
<tr><td><code>tau.p.group</code></td>
<td>
<p>group-specific two-sided p-values for total effect.</p>
</td></tr>
<tr><td><code>tau.sims.group</code></td>
<td>
<p>a group-specific vector of length 'sims' containing 
simulation draws of the total effect.</p>
</td></tr>
<tr><td><code>d.avg.group</code>, <code>z.avg.group</code>, <code>n.avg.group</code></td>
<td>
<p>group-specific simple averages 
of d0 and d1, z0 and z1, n0 and n1, respectively, which users may want to 
use as summary values when those quantities differ.</p>
</td></tr>
<tr><td><code>d.avg.ci.group</code>, <code>z.avg.ci.group</code>, <code>n.avg.ci.group</code></td>
<td>
<p>group-specific 
confidence intervals for the above.</p>
</td></tr>
<tr><td><code>d.avg.p.group</code>, <code>z.avg.p.group</code>, <code>n.avg.p.group</code></td>
<td>
<p>group-specific two-sided 
p-values for the above.</p>
</td></tr>
<tr><td><code>d.avg.sims.group</code>, <code>z.avg.sims.group</code>, <code>n.avg.sims.group</code></td>
<td>
<p>group-specific 
vectors of length 'sims' containing simulation draws of d.avg, z.avg and 
n.avg, respectively.</p>
</td></tr>
<tr><td><code>boot</code></td>
<td>
<p>logical, the 'boot' argument used.</p>
</td></tr>
<tr><td><code>treat</code></td>
<td>
<p>a character string indicating the name of the 'treat' variable 
used.</p>
</td></tr>
<tr><td><code>mediator</code></td>
<td>
<p>a character string indicating the name of the 'mediator' 
variable used.</p>
</td></tr>
<tr><td><code>INT</code></td>
<td>
<p>a logical value indicating whether the model specification 
allows the effects to differ between the treatment and control conditions.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p>the confidence level used. </p>
</td></tr>
<tr><td><code>model.y</code></td>
<td>
<p>the outcome model used.</p>
</td></tr>
<tr><td><code>model.m</code></td>
<td>
<p>the mediator model used.</p>
</td></tr>
<tr><td><code>group.m</code></td>
<td>
<p>the name of the mediator group used.</p>
</td></tr>
<tr><td><code>group.y</code></td>
<td>
<p>the name of the outcome group used.</p>
</td></tr>
<tr><td><code>group.name</code></td>
<td>
<p>the name of the group on which the output is based.</p>
</td></tr>
<tr><td><code>group.id.m</code></td>
<td>
<p>the data on the mediator group.</p>
</td></tr>
<tr><td><code>group.id.y</code></td>
<td>
<p>the data on the outcome group.</p>
</td></tr>
<tr><td><code>group.id</code></td>
<td>
<p>the data on the group on which the output is based.</p>
</td></tr>
<tr><td><code>control.value</code></td>
<td>
<p>value of the treatment variable used as the control 
condition.</p>
</td></tr>
<tr><td><code>treat.value</code></td>
<td>
<p>value of the treatment variable used as the treatment 
condition.</p>
</td></tr>
<tr><td><code>nobs</code></td>
<td>
<p>number of observations in the model frame for 'model.m' and 
'model.y'. May differ from the numbers in the original models input to 
'mediate' if 'dropobs' was 'TRUE'.</p>
</td></tr>
<tr><td><code>robustSE</code></td>
<td>
<p>&lsquo;TRUE&rsquo; or &lsquo;FALSE&rsquo;.</p>
</td></tr>
<tr><td><code>cluster</code></td>
<td>
<p>the clusters used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>; Luke Keele, Penn State University, 
<a href="mailto:ljk20@psu.edu">ljk20@psu.edu</a>; Kosuke Imai, Princeton University, 
<a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>; Kentaro Hirose, Princeton University, 
<a href="mailto:hirose@princeton.edu">hirose@princeton.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+medsens">medsens</a></code>, <code><a href="#topic+plot.mediate">plot.mediate</a></code>, 
<code><a href="#topic+summary.mediate">summary.mediate</a></code>, <code><a href="#topic+summary.mediate.mer">summary.mediate.mer</a></code>, 
<code><a href="#topic+plot.mediate.mer">plot.mediate.mer</a></code>, <code><a href="#topic+mediations">mediations</a></code>, <code>vcovHC</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# **For illustration purposes a small number of simulations are used**

data(jobs)

####################################################
# Example 1: Linear Outcome and Mediator Models
####################################################
b &lt;- lm(job_seek ~ treat + econ_hard + sex + age, data=jobs)
c &lt;- lm(depress2 ~ treat + job_seek + econ_hard + sex + age, data=jobs)

# Estimation via quasi-Bayesian approximation
contcont &lt;- mediate(b, c, sims=50, treat="treat", mediator="job_seek")
summary(contcont)
plot(contcont)

## Not run: 
# Estimation via nonparametric bootstrap
contcont.boot &lt;- mediate(b, c, boot=TRUE, sims=50, treat="treat", mediator="job_seek")
summary(contcont.boot)

## End(Not run)

# Allowing treatment-mediator interaction
d &lt;- lm(depress2 ~ treat + job_seek + treat:job_seek + econ_hard + sex + age, data=jobs)
contcont.int &lt;- mediate(b, d, sims=50, treat="treat", mediator="job_seek")
summary(contcont.int)

# Allowing ``moderated mediation'' with respect to age
b.int &lt;- lm(job_seek ~ treat*age + econ_hard + sex, data=jobs)
d.int &lt;- lm(depress2 ~ treat*job_seek*age + econ_hard + sex, data=jobs)
contcont.age20 &lt;- mediate(b.int, d.int, sims=50, treat="treat", mediator="job_seek",
			covariates = list(age = 20))
contcont.age70 &lt;- mediate(b.int, d.int, sims=50, treat="treat", mediator="job_seek",
			covariates = list(age = 70))
summary(contcont.age20)
summary(contcont.age70)

# Continuous treatment
jobs$treat_cont &lt;- jobs$treat + rnorm(nrow(jobs))  # (hypothetical) continuous treatment
b.contT &lt;- lm(job_seek ~ treat_cont + econ_hard + sex + age, data=jobs)
c.contT &lt;- lm(depress2 ~ treat_cont + job_seek + econ_hard + sex + age, data=jobs)
contcont.cont &lt;- mediate(b.contT, c.contT, sims=50, 
                    treat="treat_cont", mediator="job_seek",
                    treat.value = 4, control.value = -2)
summary(contcont.cont)

# Categorical treatment 
## Not run: 
b &lt;- lm(job_seek ~ educ + sex, data=jobs)
c &lt;- lm(depress2 ~ educ + job_seek + sex, data=jobs)

# compare two categories of educ --- gradwk and somcol
model.cat &lt;- mediate(b, c, treat="educ", mediator="job_seek", sims=50, 
                     control.value = "gradwk", treat.value = "somcol")
summary(model.cat)

## End(Not run)

######################################################
# Example 2: Binary Outcome and Ordered Mediator
######################################################
## Not run: 
jobs$job_disc &lt;- as.factor(jobs$job_disc)
b.ord &lt;- polr(job_disc ~ treat + econ_hard + sex + age, data=jobs,
            method="probit", Hess=TRUE)
d.bin &lt;- glm(work1 ~ treat + job_disc + econ_hard + sex + age, data=jobs,
            family=binomial(link="probit"))
ordbin &lt;- mediate(b.ord, d.bin, sims=50, treat="treat", mediator="job_disc")
summary(ordbin)

# Using heteroskedasticity-consistent standard errors
ordbin.rb &lt;- mediate(b.ord, d.bin, sims=50, treat="treat", mediator="job_disc",
            robustSE=TRUE)
summary(ordbin.rb)

# Using non-parametric bootstrap
ordbin.boot &lt;- mediate(b.ord, d.bin, sims=50, treat="treat", mediator="job_disc",
            boot=TRUE)
summary(ordbin.boot)

## End(Not run)

######################################################
# Example 3: Quantile Causal Mediation Effect
######################################################
require(quantreg)
c.quan &lt;- rq(depress2 ~ treat + job_seek + econ_hard + sex + age, data=jobs,
            tau = 0.5)  # median
contquan &lt;- mediate(b, c.quan, sims=50, treat="treat", mediator="job_seek")
summary(contquan)

######################################################
# Example 4: GAM Outcome
######################################################
## Not run: 
require(mgcv)
c.gam &lt;- gam(depress2 ~ treat + s(job_seek, bs="cr") + 
            econ_hard + sex + age, data=jobs)
contgam &lt;- mediate(b, c.gam, sims=10, treat="treat", 
                mediator="job_seek", boot=TRUE)
summary(contgam)

# With interaction
d.gam &lt;- gam(depress2 ~ treat + s(job_seek, by = treat) + 
    s(job_seek, by = control) + econ_hard + sex + age, data=jobs)
contgam.int &lt;- mediate(b, d.gam, sims=10, treat="treat", mediator="job_seek",
    control = "control", boot=TRUE)
summary(contgam.int)

## End(Not run)
######################################################
# Example 5: Multilevel Outcome and Mediator Models
######################################################
## Not run: 
require(lme4)
 
# educ: mediator group
# occp: outcome group

# Varying intercept for mediator 
model.m &lt;- glmer(job_dich ~ treat + econ_hard + (1 | educ), 
             		     family = binomial(link = "probit"), data = jobs)

# Varying intercept and slope for outcome
model.y &lt;- glmer(work1 ~ treat + job_dich + econ_hard + (1 + treat | occp), 
                family = binomial(link = "probit"), data = jobs)

# Output based on mediator group ("educ")
multilevel &lt;- mediate(model.m, model.y, treat = "treat", 
              mediator = "job_dich", sims=50, group.out="educ")

# Output based on outcome group ("occp")
# multilevel &lt;- mediate(model.m, model.y, treat = "treat", 
              mediator = "job_dich", sims=50) 

# Group-average effects  
summary(multilevel)

# Group-specific effects organized by effect
summary(multilevel, output="byeffect")
# plot(multilevel, group.plots=TRUE)
# See summary.mediate.mer and plot.mediate.mer for detailed explanations 

# Group-specific effects organized by group
summary(multilevel, output="bygroup")
# See summary.mediate.mer for detailed explanations 

## End(Not run)
</code></pre>

<hr>
<h2 id='mediate_tsls'>Two-stage Least Squares Estimation of the Average Causal Mediation Effects</h2><span id='topic+mediate_tsls'></span>

<h3>Description</h3>

<p>Estimate quantities for causal mediation analysis using an instrumental 
variable estimator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediate_tsls(model.m, model.y, treat = "treat.name", conf.level = 0.95,
  robustSE = FALSE, cluster = NULL, boot = FALSE, sims = 1000,
  est_se = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mediate_tsls_+3A_model.m">model.m</code></td>
<td>
<p>a fitted model object for mediator, of class <code>lm</code>.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_model.y">model.y</code></td>
<td>
<p>a fitted model object for outcome, of class <code>lm</code>.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_treat">treat</code></td>
<td>
<p>a character string indicating the name of the treatment variable
used in the models.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_conf.level">conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals. 
Default is to return the 2.5 and 97.5 percentiles of the simulated 
quantities.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_robustse">robustSE</code></td>
<td>
<p>a logical value. If 'TRUE', heteroskedasticity-consistent 
standard errors will be used. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_cluster">cluster</code></td>
<td>
<p>a variable indicating clusters for standard errors. Note that 
this should be a vector of cluster indicators itself, not a character 
string for the name of the variable.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_boot">boot</code></td>
<td>
<p>a logical value. if <code>FALSE</code> analytic confidence intervals
based on Aroian (1947) will be used; if <code>TRUE</code> nonparametric
bootstrap will be used. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_sims">sims</code></td>
<td>
<p>number of Monte Carlo draws for nonparametric bootstrap.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_est_se">est_se</code></td>
<td>
<p>estimate standard errors. Primarily for internal use. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="mediate_tsls_+3A_...">...</code></td>
<td>
<p>other arguments passed to vcovCL in the sandwich package:
typically the <code>type</code> argument for heteroskedasticity-consistent 
standard errors.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>mediate</code> returns an object of class &quot;<code>mediate</code>&quot;, 
&quot;<code>mediate.tsls</code>&quot;, a list that contains the components listed below.  
</p>
<p>The function <code>summary</code>  can be used to obtain a table of the results.  
</p>
<table>
<tr><td><code>d1</code></td>
<td>
<p>point estimate for average causal mediation effects.</p>
</td></tr>
<tr><td><code>d1.ci</code></td>
<td>
<p>confidence intervals for average causal mediation 
effect. The confidence level is set at the value specified in 
'conf.level'.</p>
</td></tr>
<tr><td><code>z0</code></td>
<td>
<p>point estimates for average direct effect.</p>
</td></tr>
<tr><td><code>z0.ci</code></td>
<td>
<p>confidence intervals for average direct effect.</p>
</td></tr>
<tr><td><code>z0.p</code></td>
<td>
<p>two-sided p-values for average causal direct effect.</p>
</td></tr>
<tr><td><code>n0</code></td>
<td>
<p>the &quot;proportions mediated&quot;, or the size of the average causal 
mediation effect relative to the total effect.</p>
</td></tr>
<tr><td><code>n0.ci</code></td>
<td>
<p>confidence intervals for the proportion mediated.</p>
</td></tr>
<tr><td><code>n0.p</code></td>
<td>
<p>two-sided p-values for proportion mediated.</p>
</td></tr>
<tr><td><code>tau.coef</code></td>
<td>
<p>point estimate for total effect.</p>
</td></tr>
<tr><td><code>tau.ci</code></td>
<td>
<p>confidence interval for total effect.</p>
</td></tr>
<tr><td><code>tau.p</code></td>
<td>
<p>two-sided p-values for total effect.</p>
</td></tr>
<tr><td><code>boot</code></td>
<td>
<p>logical, the <code>boot</code> argument used.</p>
</td></tr>
<tr><td><code>treat</code></td>
<td>
<p>a character string indicating the name of the 'treat' variable 
used.</p>
</td></tr>
<tr><td><code>mediator</code></td>
<td>
<p>a character string indicating the name of the 'mediator' 
variable used.</p>
</td></tr>
<tr><td><code>INT</code></td>
<td>
<p>a logical value indicating whether the model specification 
allows the effects to differ between the treatment and control conditions.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p>the confidence level used. </p>
</td></tr>
<tr><td><code>model.y</code></td>
<td>
<p>the outcome model used.</p>
</td></tr>
<tr><td><code>model.m</code></td>
<td>
<p>the mediator model used.</p>
</td></tr>
<tr><td><code>nobs</code></td>
<td>
<p>number of observations in the model frame for 'model.m' and 
'model.y'. May differ from the numbers in the original models input to 
'mediate' if 'dropobs' was 'TRUE'.</p>
</td></tr>
<tr><td><code>cluster</code></td>
<td>
<p>the clusters used.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Aroian, L. A. 1947. The probability function of the product of
two normally distributed variables. *Annals of Mathematical Statistics,*
18, 265-271.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate data. We use TSLS to address unobserved confounding (n).
set.seed(123)
sims &lt;- 1000
dat &lt;- data.frame(z = sample(0:1, sims, replace = TRUE), 
                  t = sample(0:1, sims, replace = TRUE))
dat$n &lt;- rnorm(sims, mean = 1)
dat$m &lt;- rnorm(sims, mean = dat$z * 0.3 + dat$t * 0.2 + dat$n * 0.7, sd = 0.2)
dat$y &lt;- rnorm(sims, mean = 5 + dat$t + dat$m * (-3) + dat$n, sd = 1)
model.m &lt;- lm(m ~ t + z, data = dat)
model.y &lt;- lm(y ~ t + m, data = dat)
cluster &lt;- factor(sample(1:3, sims, replace = TRUE))
med &lt;- mediate_tsls(model.m, model.y, cluster = cluster, treat = "t")
summary(med) 
</code></pre>

<hr>
<h2 id='mediate.ced'>Estimating Average Causal Mediation Effects under the Crossover Encouragement
Design</h2><span id='topic+mediate.ced'></span>

<h3>Description</h3>

<p>'mediate.ced' estimates the average causal mediation effects for the 
crossover encouragement design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediate.ced(outcome, med.1, med.2, treat, encourage, data, sims = 1000,
  conf.level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mediate.ced_+3A_outcome">outcome</code></td>
<td>
<p>variable name in 'data' containing the outcome values observed
in the second experiment. The variable must be binary (factor or numeric
0/1).</p>
</td></tr>
<tr><td><code id="mediate.ced_+3A_med.1">med.1</code></td>
<td>
<p>variable name in 'data' containing the mediator values observed 
in the first experiment. The variable must be binary (factor or numeric 
0/1).</p>
</td></tr>
<tr><td><code id="mediate.ced_+3A_med.2">med.2</code></td>
<td>
<p>variable name in 'data' containing the mediator values observed 
in the second experiment.</p>
</td></tr>
<tr><td><code id="mediate.ced_+3A_treat">treat</code></td>
<td>
<p>variable name in 'data' containing the treatment values in the 
first experiment. Must be binary (factor or numeric 0/1).</p>
</td></tr>
<tr><td><code id="mediate.ced_+3A_encourage">encourage</code></td>
<td>
<p>name of the encouragement indicator in 'data'. Must be 
binary (factor or numeric 0/1).</p>
</td></tr>
<tr><td><code id="mediate.ced_+3A_data">data</code></td>
<td>
<p>a data frame containing all the above variables.</p>
</td></tr>
<tr><td><code id="mediate.ced_+3A_sims">sims</code></td>
<td>
<p>number of bootstrap simulations.</p>
</td></tr>
<tr><td><code id="mediate.ced_+3A_conf.level">conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function estimates the average indirect effects for the pliable
units under the crossover encouragement design. The design has two stages. 
In the first stage the treatment is randomized and the mediator and outcome
variables are measured. In the second the treatment is set to the value 
opposite of first period and a randomly selected group of units receives 
encouragement to take on the mediator opposite to the values observed in 
the first stage.  See Imai, Tingley and Yamamoto (2012) for a full 
description. The confidence intervals are calculated via the nonparametric 
bootstrap.
</p>
<p>Note that <code>outcome</code> should be the observed responses in the
<em>second</em> stage whereas <code>treat</code> should be the values in the
<em>first</em> stage.
</p>


<h3>Value</h3>

<p><code>mediate.ced</code> returns an object of class 
&quot;<code>mediate.design</code>&quot;, a list that contains the components listed below.
</p>
<p>The <code>summary</code> function can be used to obtain a table of the results.
</p>
<table>
<tr><td><code>d0</code>, <code>d1</code></td>
<td>
<p>point estimates of the average indirect effects under the control and treatment conditions.</p>
</td></tr>
<tr><td><code>d0.ci</code>, <code>d1.ci</code></td>
<td>
<p>confidence intervals for the effects. The confidence level is set at the value specified in 'conf.level'.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p> confidence level used.</p>
</td></tr>
<tr><td><code>sims</code></td>
<td>
<p> number of bootstrap simulations.</p>
</td></tr>
<tr><td><code>nobs</code></td>
<td>
<p> number of observations used.</p>
</td></tr>
<tr><td><code>design</code></td>
<td>
<p> indicates the design. Always equals &quot;CED&quot;.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Tingley, D. and Yamamoto, T. (2012) Experimental Designs for 
Identifying Causal Mechanisms. Journal of the Royal Statistical Society, 
Series A (Statistics in Society)&quot;
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+summary.mediate.design">summary.mediate.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(CEDdata)

res &lt;- mediate.ced("Y2", "M1", "M2", "T1", "Z", CEDdata, sims = 100)
summary(res)
</code></pre>

<hr>
<h2 id='mediate.pd'>Estimating Average Causal Mediation Effects under the Parallel Design</h2><span id='topic+mediate.pd'></span>

<h3>Description</h3>

<p>'mediate.pd' estimates the average causal mediation effects for the parallel 
design. If a treatment-mediator interaction is allowed then the nonparametric
sharp bounds are calculated. If a treatment-mediator interaction is not 
allowed then the estimates of the (point-identified) effects are computed 
along with bootstrapped confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediate.pd(outcome, mediator, treat, manipulated, data, NINT = TRUE,
  sims = 1000, conf.level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mediate.pd_+3A_outcome">outcome</code></td>
<td>
<p>name of the outcome variable in 'data'.</p>
</td></tr>
<tr><td><code id="mediate.pd_+3A_mediator">mediator</code></td>
<td>
<p>name of the mediator in 'data'. The variable must be binary 
(factor or numeric 0/1).</p>
</td></tr>
<tr><td><code id="mediate.pd_+3A_treat">treat</code></td>
<td>
<p>name of the treatment variable in 'data'. Must be binary (factor
or numeric 0/1).</p>
</td></tr>
<tr><td><code id="mediate.pd_+3A_manipulated">manipulated</code></td>
<td>
<p>name of the binary design indicator in 'data', indicating 
whether observation received mediator manipulation.</p>
</td></tr>
<tr><td><code id="mediate.pd_+3A_data">data</code></td>
<td>
<p>a data frame containing all the above variables.</p>
</td></tr>
<tr><td><code id="mediate.pd_+3A_nint">NINT</code></td>
<td>
<p>whether the no interaction assumption is made.</p>
</td></tr>
<tr><td><code id="mediate.pd_+3A_sims">sims</code></td>
<td>
<p>number of bootstrap simulations. Only relevant when 'NINT' is 
TRUE.</p>
</td></tr>
<tr><td><code id="mediate.pd_+3A_conf.level">conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals. Only 
relevant when 'NINT' is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates average causal mediation effects (ACME) for
the parallel design. The design consists of two randomly separated 
experimental arms, indicated by 'manipulated'. In one the treatment is 
randomized and the mediator and outcome variables are measured. In the 
second arm, the treatment is randomized, the mediator is perfectly 
manipulated and the outcome variable is measured.
</p>
<p>Under the parallel design, the ACME is identified when it is assumed that 
there is no interaction between the treatment and mediator. Without the 
assumption the nonparametric sharp bounds can be computed. See Imai, 
Tingley and Yamamoto (2012) for details.
</p>


<h3>Value</h3>

<p><code>mediate.pd</code> returns an object of class &quot;<code>mediate.design</code>&quot;,
a list that contains the components listed below.
</p>
<p>The function <code>summary</code> (i.e., <code>summary.mediate.design</code>) can be 
used to obtain a table of the results.
</p>
<table>
<tr><td><code>d0</code>, <code>d1</code></td>
<td>
<p> point estimates or bounds for the average causal mediation
effects under the control and treatment conditions, respectively.</p>
</td></tr> 
<tr><td><code>d0.ci</code>, <code>d1.ci</code></td>
<td>
<p> confidence intervals for the effects based on the
nonparametric bootstrap. The confidence level is set at the value specified
in 'conf.level'. Only exists when 'NINT' is TRUE.</p>
</td></tr> <tr><td><code>nobs</code></td>
<td>
<p> number of
observations used.</p>
</td></tr> <tr><td><code>conf.level</code></td>
<td>
<p> confidence level used. Only exists
when 'NINT' is TRUE.</p>
</td></tr> <tr><td><code>sims</code></td>
<td>
<p> number of bootstrap simulations used for
confidence interval calculation. Only exists when 'NINT' is TRUE.</p>
</td></tr> 
<tr><td><code>design</code></td>
<td>
<p> indicates the design. &quot;PD.NINT&quot; if no interaction assumed;
&quot;PD&quot; if interaction allowed.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Tingley, D. and Yamamoto, T. (2012) Experimental Designs for 
Identifying Causal Mechanisms. Journal of the Royal Statistical Society, 
Series A (Statistics in Society)&quot;
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+summary.mediate.design">summary.mediate.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(boundsdata)

bound2 &lt;- mediate.pd("out", "med", "ttt", "manip", boundsdata, 
                  NINT = TRUE, sims = 100, conf.level=.95)
summary(bound2)

bound2.1 &lt;- mediate.pd("out", "med", "ttt", "manip", boundsdata, NINT = FALSE)
summary(bound2.1)
</code></pre>

<hr>
<h2 id='mediate.ped'>Computing Bounds on Average Causal Mediation Effects under the Parallel
Encouragement Design</h2><span id='topic+mediate.ped'></span>

<h3>Description</h3>

<p>'mediate.ped' computes the nonparametric bounds on the average causal
mediation effects for the parallel encouragement design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediate.ped(outcome, mediator, treat, encourage, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mediate.ped_+3A_outcome">outcome</code></td>
<td>
<p>name of the outcome variable in 'data'.</p>
</td></tr>
<tr><td><code id="mediate.ped_+3A_mediator">mediator</code></td>
<td>
<p>name of the mediator in 'data'. The variable must be binary
(factor or numeric 0/1).</p>
</td></tr>
<tr><td><code id="mediate.ped_+3A_treat">treat</code></td>
<td>
<p>name of the treatment variable in 'data'. Must be binary
(factor or numeric 0/1).</p>
</td></tr>
<tr><td><code id="mediate.ped_+3A_encourage">encourage</code></td>
<td>
<p>name of the encouragement variable in 'data'. The variable
must be a numeric vector taking on either -1, 0, or 1.</p>
</td></tr>
<tr><td><code id="mediate.ped_+3A_data">data</code></td>
<td>
<p>a data frame containing all the above variables.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calculates average causal mediation effects (ACME) for
the parallel encouragement design. 
</p>
<p>In the design two experimental arms are
used. In one the treatment is randomized and the mediator and outcome
variables are measured. In the second arm the treatment is randomized, the
mediator is randomly encouraged either up or down, and the outcome variable
is measured. 
</p>
<p>Two type of causal quantities are estimated: the population
ACME and the complier ACME. The latter refers to the subpopulation of the
units for whom the encouragement has its intended effect, and the width of
its bounds are tighter than that of the population ACME. See Imai, Tingley
and Yamamoto (2012) for details.
</p>


<h3>Value</h3>

<p><code>mediate.pd</code> returns an object of class
&quot;<code>mediate.design</code>&quot;, a list that contains the components listed below.
</p>
<p>The function <code>summary</code> (i.e., <code>summary.mediate.design</code>) can be
used to obtain a table of the results.
</p>
<table>
<tr><td><code>d0</code>, <code>d1</code></td>
<td>
<p> estimated nonparametric sharp bounds for the population ACME under the control and treatment conditions.</p>
</td></tr>
<tr><td><code>d0.p</code>, <code>d1.p</code></td>
<td>
<p> estimated nonparametric sharp bounds for the complier ACME under the control and treatment conditions.</p>
</td></tr>
<tr><td><code>nobs</code></td>
<td>
<p> number of observations used.</p>
</td></tr>
<tr><td><code>design</code></td>
<td>
<p> indicates the design. Always equals &quot;PED&quot;.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University,
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L.
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Tingley, D. and Yamamoto, T. (2012) Experimental Designs for
Identifying Causal Mechanisms. Journal of the Royal Statistical Society,
Series A (Statistics in Society)&quot;
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the
Black Box of Causality: Learning about Causal Mechanisms from Experimental
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp.
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and
Sensitivity Analysis for Causal Mediation Effects, Statistical Science, Vol.
25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+medsens">medsens</a></code>,
<code><a href="#topic+plot.mediate">plot.mediate</a></code>, <code><a href="#topic+summary.mediate">summary.mediate</a></code>,
<code><a href="#topic+mediations">mediations</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(boundsdata)

bound3 &lt;- mediate.ped("out.enc", "med.enc", "ttt", "enc", boundsdata)
summary(bound3)
</code></pre>

<hr>
<h2 id='mediate.sed'>Estimating Average Causal Mediation Effects under the Single Experiment 
Design</h2><span id='topic+mediate.sed'></span>

<h3>Description</h3>

<p>Estimating Average Causal Mediation Effects under the Single Experiment 
Design
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediate.sed(outcome, mediator, treat, data, SI = FALSE, sims = 1000,
  conf.level = 0.95, boot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mediate.sed_+3A_outcome">outcome</code></td>
<td>
<p>name of the outcome variable in 'data'. The variable must be 
binary (factor or numeric 0/1) if 'SI' is FALSE.</p>
</td></tr>
<tr><td><code id="mediate.sed_+3A_mediator">mediator</code></td>
<td>
<p>name of the mediator in 'data'. The variable must be binary 
(factor or numeric 0/1) if 'SI' is FALSE and discrete if TRUE.</p>
</td></tr>
<tr><td><code id="mediate.sed_+3A_treat">treat</code></td>
<td>
<p>name of the treatment variable in 'data'. Must be binary (factor
or numeric 0/1).</p>
</td></tr>
<tr><td><code id="mediate.sed_+3A_data">data</code></td>
<td>
<p>a data frame containing all the above variables.</p>
</td></tr>
<tr><td><code id="mediate.sed_+3A_si">SI</code></td>
<td>
<p>whether the sequential ignorability assumption is made.</p>
</td></tr>
<tr><td><code id="mediate.sed_+3A_sims">sims</code></td>
<td>
<p>number of bootstrap simulations. Only relevant when 'SI' is TRUE.</p>
</td></tr>
<tr><td><code id="mediate.sed_+3A_conf.level">conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals. Only 
relevant when 'SI' is TRUE.</p>
</td></tr>
<tr><td><code id="mediate.sed_+3A_boot">boot</code></td>
<td>
<p>a logical value. if 'FALSE' a large sample Delta method 
approximation is used for confidence intervals; if 'TRUE' nonparametric 
bootstrap will be used. Default is 'FALSE'. Only relevant if 'SI' is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'mediate.sed' estimates average causal mediation effects for the 
single experiment design. The two options are to use either the sequential 
ignorability (SI) assumption in which nonparametric estimates of the 
average causal mediation effect are produced, or, to relax the SI 
assumption and to calculate the nonparametric bounds on the average causal 
mediation effect.
</p>
<p>This function calculates average causal mediation effects (ACME) for the 
single experiment design, where the treatment is randomized and the 
mediator/outcome variables are measured. The user specifies whether they 
want non-parametric point estimates based on the sequential ignorability 
(SI) assumption, or nonparametric bounds without the SI assumption.
</p>


<h3>Value</h3>

<p><code>mediate.sed</code> returns an object of class 
&quot;<code>mediate.design</code>&quot;, a list that contains the components listed below.
</p>
<p>The <code>summary</code> function can be used to obtain a table of the results.
</p>
<table>
<tr><td><code>d0</code>, <code>d1</code></td>
<td>
<p>point estimates or lower/upper bounds for causal mediation
effects under the control and treatment conditions, respectively.</p>
</td></tr> 
<tr><td><code>d0.ci</code>, <code>d1.ci</code></td>
<td>
<p>confidence intervals for average causal mediation
effects for the nonparametric estimates. The confidence level is set at the
value specified in 'conf.level'. The value exists only when 'SI' is TRUE.</p>
</td></tr> 
<tr><td><code>boot</code></td>
<td>
<p>logical, the 'boot' argument used.</p>
</td></tr> 
<tr><td><code>conf.level</code></td>
<td>
<p>the confidence level used. </p>
</td></tr> 
<tr><td><code>sims</code></td>
<td>
<p>number of bootstrap simulations used for confidence interval 
calculation.</p>
</td></tr> 
<tr><td><code>nobs</code></td>
<td>
<p>number of observations used.</p>
</td></tr> 
<tr><td><code>design</code></td>
<td>
<p> indicates the design. Equals either &quot;SED.NP.SI&quot; or
&quot;SED.NP.NOSI&quot;.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Tingley, D. and Yamamoto, T. (2012) Experimental Designs for 
Identifying Causal Mechanisms. Journal of the Royal Statistical Society, 
Series A (Statistics in Society)&quot;
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science, 
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+summary.mediate.design">summary.mediate.design</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1: Bounds without SI assumption

data(boundsdata)

data.SED &lt;- subset(boundsdata, manip == 0)
bound1 &lt;- mediate.sed("out", "med", "ttt", data.SED, SI=FALSE)
summary(bound1)

# Example 2: Nonparametric estimate of ACME under SI assumption
# Example with JOBS II Field Experiment

data(jobs)

foo.1 &lt;- mediate.sed("depress2", "job_disc", "treat", jobs, SI=TRUE)
summary(foo.1)

foo.2 &lt;- mediate.sed("depress2", "job_disc", "treat", jobs, SI=TRUE, boot=TRUE)
summary(foo.2)
</code></pre>

<hr>
<h2 id='mediation'>mediation: Parametric and non parametric mediation analysis.</h2><span id='topic+mediation'></span><span id='topic+mediation-package'></span>

<h3>Description</h3>

<p>mediation: Parametric and non parametric mediation analysis.
</p>

<hr>
<h2 id='mediations'>Causal Mediation Analysis for Multiple Outcome/Treatment/Mediator 
Combinations</h2><span id='topic+mediations'></span>

<h3>Description</h3>

<p>'mediations' can be used to process a set of outcome/treatment/mediator 
combinations through the <code><a href="#topic+mediate">mediate</a></code> function to produce a series 
of causal mediation analysis results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediations(datasets, treatment, mediators, outcome, covariates = NULL,
  families = c("gaussian", "gaussian"), tau.m = 0.5, tau.y = 0.5,
  LowerY = NULL, UpperY = NULL, interaction = FALSE,
  conf.level = 0.95, sims = 500, boot = FALSE, weights = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mediations_+3A_datasets">datasets</code></td>
<td>
<p>a named list of data frames. Each data frame has a separate 
treatment variable. The names of each data frame must begin with the exact 
name of the treatment variable that is contained in that dataset (see 
example below).</p>
</td></tr>
<tr><td><code id="mediations_+3A_treatment">treatment</code></td>
<td>
<p>a vector of character strings indicating the names of the 
treatment variables, with length equal to the length of 'datasets'. Each 
treatment variable must be included in the data frame listed in the same 
position of list 'datasets' and its name must match the first part of the 
corresponding data frame.</p>
</td></tr>
<tr><td><code id="mediations_+3A_mediators">mediators</code></td>
<td>
<p>a vector of character strings indicating the names of the 
mediators contained within each data frame. All of the mediators will be 
used with each treatment variable and hence must be included in each data 
frame of 'datasets'.</p>
</td></tr>
<tr><td><code id="mediations_+3A_outcome">outcome</code></td>
<td>
<p>a vector of character strings indicating the names of the 
outcome variables contained within each data frame. All of the outcomes
will be used with each treatment variable and must be in each data frame.</p>
</td></tr>
<tr><td><code id="mediations_+3A_covariates">covariates</code></td>
<td>
<p>a character string representing the set of pre-treatment 
covariate names (as they appear in the data frame) to be included in each 
model. The value must take the form of standard model formula, with each 
additive component separated by &quot;+&quot;, etc. (see example below). All 
covariates must be in each data frame. Default is 'NULL'.</p>
</td></tr>
<tr><td><code id="mediations_+3A_families">families</code></td>
<td>
<p>a vector of length two specifying the types of the mediator 
and outcome models. Currently only supports &quot;gaussian&quot; (for linear 
regression), &quot;binomial&quot; (for binary probit), &quot;oprobit&quot; (for ordered probit)
and &quot;quantile&quot; (for quantile regression, see 'tau'). For the outcome the 
tobit model (&quot;tobit&quot;) is also available in addition to the mediator model 
options.</p>
</td></tr>
<tr><td><code id="mediations_+3A_tau.m">tau.m</code></td>
<td>
<p>a numeric value specifying the quantile to be used for a 
quantile regression for the mediator model. Only relevant if the first 
element of 'families' is &quot;quantile&quot;. See <code>rq</code>.</p>
</td></tr>
<tr><td><code id="mediations_+3A_tau.y">tau.y</code></td>
<td>
<p>a numeric value specifying the quantile to be used for a 
quantile regression for the outcome model. Only relevant if the second 
element of 'families' is &quot;quantile&quot;. See <code>rq</code>.</p>
</td></tr>
<tr><td><code id="mediations_+3A_lowery">LowerY</code></td>
<td>
<p>a numeric value indicating the lower bound for the tobit 
outcome model. See <code>tobit</code>.</p>
</td></tr>
<tr><td><code id="mediations_+3A_uppery">UpperY</code></td>
<td>
<p>a numeric value indicating the upper bound for the tobit 
outcome model. See <code>tobit</code>.</p>
</td></tr>
<tr><td><code id="mediations_+3A_interaction">interaction</code></td>
<td>
<p>a logical value indicating whether the treatment and 
mediator variables should be interacted. This will apply to applications of
<code><a href="#topic+mediate">mediate</a></code> to all the treatment/mediator/outcome combinations.</p>
</td></tr>
<tr><td><code id="mediations_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level used in each application of the 
<code><a href="#topic+mediate">mediate</a></code> function.</p>
</td></tr>
<tr><td><code id="mediations_+3A_sims">sims</code></td>
<td>
<p>an integer indicating the desired number of simulations for 
inference. This will apply to all applications of 'mediate' to all the 
treatment/mediator/outcome combinations.</p>
</td></tr>
<tr><td><code id="mediations_+3A_boot">boot</code></td>
<td>
<p>a logical value, indicating whether or not nonparametric 
bootstrap should be used in each <code><a href="#topic+mediate">mediate</a></code> application.</p>
</td></tr>
<tr><td><code id="mediations_+3A_weights">weights</code></td>
<td>
<p>a single valued vector of a character string indicating a 
weight variable to be used in all model fitting.</p>
</td></tr>
<tr><td><code id="mediations_+3A_...">...</code></td>
<td>
<p>other arguments passed to <code><a href="#topic+mediate">mediate</a></code>, such as 
'robustSE', 'dropobs', etc.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function processes multiple treatment/mediators/outcome
variable combinations to produce a collected set of output ready for
analysis or graphing. In principle, this is a function designed to
facilitate running causal mediation analyses on multiple models that share
the same basic specification (i.e. the types of parametric models and the
set of pre-treatment covariates) except the treatment, mediator and outcome
variables can differ across specifications. The function works by looping 
over a set of data frames that are pre-loaded into the workspace. Each one 
of these data frames has a specific treatment variable that is used for 
analysis with that data frame. Then the code runs causal mediation analysis
via <code><a href="#topic+mediate">mediate</a></code> on every combination of the treatment, mediator, 
and outcomes specified in these arguments. This allows the users to explore
whether different mediators transmit the effect of the treatment variable
on a variety of outcome variables. A single set of pre-treatment control 
variables can be specified in 'covariates', which will be used throughout.
</p>
<p>The 'mediations' function can be used with either multiple mediators and a 
single outcome, a single mediator and multiple outcomes, or multiple 
mediators and outcomes. For example, with three different treatments, user 
will create three different data frames, each containing a treatment 
variable. In addition, if there are also four different mediators, each of 
these will be contained in each data frame, along with the outcome
variable. The function will estimate all of the combinations of treatment
variables and mediators instead of separate lines of code being written for
each one.
</p>
<p>Individual elements of the output list (see &quot;Value&quot;) may be passed through 
<code><a href="#topic+summary.mediate">summary</a></code> and 
<code><a href="#topic+plot.mediate">plot</a></code> for tabular and graphical summaries of
the results. Alternatively, the entire output may be directly passed to 
<code><a href="#topic+summary.mediations">summary</a></code> or 
<code><a href="#topic+plot.mediations">plot</a></code> for all results to be inspected.
</p>
<p>The default value of 'covariates' is 'NULL' and no covariate will be 
included in either mediator or outcome models without a custom value. It 
should be noted that users typically should have pre-treatment covariates
to make the sequential ignorability assumption more plausible.
</p>
<p>There are several limitations to the code. First, it works only with a 
subset of the model types that will be accommodated if 'mediate' is used 
individually (see the 'families' argument above for details). Second, one 
cannot specify separate sets of covariates for different 
treatment/mediator/outcome combinations. Users should use 'mediate' 
separately for individual models if more flexibility is required in their 
specific applications.
</p>


<h3>Value</h3>

<p>An object of class &quot;mediations&quot; (or &quot;mediations.order&quot; if the outcome
model is ordered probit), a list of &quot;mediate&quot; (&quot;mediate.order&quot;) objects
produced by applications of <code><a href="#topic+mediate">mediate</a></code> for the specified 
treatment/mediator/outcome combinations.  The elements are named based on 
the names of the outcome, treatment, and mediator variables, each separated
by a &quot;.&quot; (see example below).
</p>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+summary.mediations">summary.mediations</a></code>, 
<code><a href="#topic+plot.mediations">plot.mediations</a></code>, <code>rq</code>, <code>tobit</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
## Not run: 
# Hypothetical example

datasets &lt;- list(T1 = T1, T2 = T2)
    # List of data frames corresponding to the two different treatment variables 
    #"T1vsCont" and "T2vsCont". 
    # Each data set has its respective treatment variable.
    
mediators &lt;- c("M1", "M2") 
    # Vector of mediator names, all included in each data frame.

outcome &lt;- c("Ycont1","Ycont2")
    # Vector of outcome variable names, again all included in each data frame.
    
treatment &lt;- c("T1vsCont", "T2vsCont")
    # Vector of treatment variables names; must begin with identical strings with dataset 
    # names in 'datasets'.
    
covariates &lt;- c("X1 + X2")
    # Set of covariates (in each data set), entered using the standard model formula format.

x &lt;- mediations(datasets, treatment, mediators, outcome, covariates,
    families=c("gaussian","gaussian"), interaction=FALSE, 
    conf.level=.90, sims=50) 
    # Runs 'mediate' iteratively for each variable combinations, with 'lm' on both mediator 
    # and outcome model.

summary(x)  # tabular summary of results for all model combinations
plot(x)  # graphical summary of results for all model combinations at once

plot(x$Ycont1.T1vsCont.M1) 
    # Individual 'mediate' outputs are stored as list elements and can be 
    # accessed using the usual "$" operator.

## End(Not run)

</code></pre>

<hr>
<h2 id='medsens'>Sensitivity Analysis for Causal Mediation Effects</h2><span id='topic+medsens'></span>

<h3>Description</h3>

<p>'medsens' is used to perform sensitivity analysis on the average causal 
mediation effects and direct effects for violations of the sequential 
ignorability assumption.  The function takes output from '<code>mediate</code>' and
calculates the true average causal mediation effects and direct effects for
different values of the sensitivity parameter representing the degree of the
sequential ignorability violation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>medsens(x, rho.by = 0.1, sims = 1000,
  eps = sqrt(.Machine$double.eps), effect.type = c("indirect",
  "direct", "both"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="medsens_+3A_x">x</code></td>
<td>
<p>an object of class 'mediate', typically an output from the 
<code>mediate</code> function.</p>
</td></tr>
<tr><td><code id="medsens_+3A_rho.by">rho.by</code></td>
<td>
<p>a numeric value between 0 and 1 indicating the increment for 
the sensitivity parameter, rho.</p>
</td></tr>
<tr><td><code id="medsens_+3A_sims">sims</code></td>
<td>
<p>the number of Monte Carlo draws for the calculation of confidence
intervals. Only used in cases where either the mediator or outcome variable
is binary.</p>
</td></tr>
<tr><td><code id="medsens_+3A_eps">eps</code></td>
<td>
<p>convergence tolerance parameter for the iterative FGLS. Only used 
when both the mediator and outcome models are linear.</p>
</td></tr>
<tr><td><code id="medsens_+3A_effect.type">effect.type</code></td>
<td>
<p>a character string indicating which effect(s) to be 
analyzed.  Default is &quot;indirect&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is the workhorse function for sensitivity analyses for average
causal mediation effects. The sensitivity analysis can be used to assess
the robustness of the findings from <code>mediate</code> to the violation of 
sequential ignorability, the crucial identification assumption necessary
for the estimates to be valid. The analysis proceeds by quantifying the
degree of sequential ignorability violation as the correlation between the
error terms of the mediator and outcome models, and then calculating the
true values of the average causal mediation effect for given values of this
sensitivity parameter, rho. The original findings are deemed sensitive if 
the true effects are found to vary widely as function of rho.
</p>
<p>The sensitivity analysis is only implemented for the following three model 
combinations: linear mediator and outcome models (both of class 'lm'), 
binary probit mediator (fitted via 'glm' with family &quot;binomial&quot; and link 
&quot;probit&quot;) and linear outcome models, and linear mediator and binary probit 
outcome models.  In addition, the binary outcome model cannot include a 
treatment-mediator interaction term. An error is returned if the 'mediate' 
object in 'x' is based on other model combinations.  As of version 3.0, the
sensitivity analysis can also be conducted with respect to the average 
direct effect by setting 'effect.type' to &quot;direct&quot; (or &quot;both&quot; if results
for the average causal mediation effect are also desired).
</p>
<p>Users should note that computation can take significant time for 
<code>medsens</code>. Setting 'rho.by' to a larger number significantly decreases
computational time, as does decreasing 'eps' (for the linear-linear case)
or the number of simulations 'sims' (for the binary-linear and
linear-binary cases).
</p>


<h3>Value</h3>

<p><code>medsens</code> returns an object of class &quot;<code>medsens</code>&quot;, a list 
containing the following elements. Some of these elements are not available
depending on the 'effect.type' argument specified by the user. The output 
can then be passed to the <code><a href="base.html#topic+summary">summary</a></code> (i.e., 
<code><a href="#topic+summary.medsens">summary.medsens</a></code>) and <code><a href="graphics.html#topic+plot">plot</a></code> (i.e., 
<code><a href="#topic+plot.medsens">plot.medsens</a></code>) functions to produce tabular and graphical 
summaries of the results.
</p>
<table>
<tr><td><code>d0</code>, <code>d1</code></td>
<td>
<p>vectors of point estimates for average causal mediation 
effects under the control and treatment conditions for each value of 
sensitivity parameter rho.</p>
</td></tr>
<tr><td><code>upper.d0</code>, <code>lower.d0</code>, <code>upper.d1</code>, <code>lower.d1</code></td>
<td>
<p>vectors of upper and lower 
confidence limits for average causal mediation effect under the control 
and treatment conditions for each value of rho.</p>
</td></tr>
<tr><td><code>z0</code>, <code>z1</code></td>
<td>
<p>vectors of point estimates for average direct effect under 
the control and treatment conditions for each value of sensitivity 
parameter rho.</p>
</td></tr>
<tr><td><code>upper.z0</code>, <code>lower.z0</code>, <code>upper.z1</code>, <code>lower.z1</code></td>
<td>
<p>vectors of upper and lower 
confidence limits for average direct effect under the control and 
treatment conditions for each value of rho.</p>
</td></tr>
<tr><td><code>tau</code></td>
<td>
<p>a vector of point estimates for total effect for each value of 
rho.  Only present when the outcome model is binary.</p>
</td></tr>
<tr><td><code>upper.tau</code>, <code>lower.tau</code></td>
<td>
<p>vectors of upper and lower confidence limits 
for total effect.  Only present when the outcome model is binary.</p>
</td></tr>
<tr><td><code>nu</code></td>
<td>
<p>a vector of point estimates for the proportion mediated for each 
value of rho.  Only present when the outcome model is binary.</p>
</td></tr>
<tr><td><code>upper.nu</code>, <code>lower.nu</code></td>
<td>
<p>vectors of upper and lower confidence limits 
for the proportion mediated.  Only present when the outcome model is binary.</p>
</td></tr>
<tr><td><code>rho</code></td>
<td>
<p>a numeric vector containing the values of sensitivity 
parameter rho used.</p>
</td></tr>
<tr><td><code>rho.by</code></td>
<td>
<p>a numeric value indicating the increment of rho used.</p>
</td></tr>
<tr><td><code>sims</code></td>
<td>
<p>a numeric value indicating the number of Monte Carlo draws 
used.</p>
</td></tr>
<tr><td><code>err.cr.d</code>, <code>err.cr.z</code></td>
<td>
<p>the values of rho with which the average causal 
mediation and direct effects are zero.  Vectors of length two if 'INT' is 
'TRUE'; numeric values otherwise.</p>
</td></tr>
<tr><td><code>ind.d0</code>, <code>ind.d1</code>, <code>ind.z0</code>, <code>ind.z1</code></td>
<td>
<p>vectors of 0s/1s, indicating whether 
the confidence intervals of d0, d1, z0 and z1 do not cover zero for each 
value of rho.</p>
</td></tr>
<tr><td><code>R2star.prod</code></td>
<td>
<p>a numeric vector containing the values of the products 
of the two &quot;R square stars&quot;, representing the proportions of residual 
variance in the mediator and outcome explained by the hypothesized 
unobserved confounder. The values correspond to those of rho. See 
<code><a href="#topic+plot.medsens">plot.medsens</a></code> for details.</p>
</td></tr>
<tr><td><code>R2tilde.prod</code></td>
<td>
<p>a numeric vector containing the values of the products 
of the two &quot;R square tildes&quot;, representing the proportions of total 
variance in the mediator and outcome explained by the hypothesized 
unobserved confounder. The values correspond to those of rho. See 
<code><a href="#topic+plot.medsens">plot.medsens</a></code> for details.</p>
</td></tr>
<tr><td><code>R2star.d.thresh</code>, <code>R2star.z.thresh</code></td>
<td>
<p>the values of the product of &quot;R 
square stars&quot; for which the average causal mediation and direct effects are 
zero, respectively.</p>
</td></tr>
<tr><td><code>R2tilde.d.thresh</code>, <code>R2tilde.z.thresh</code></td>
<td>
<p>the values of the product of &quot;R 
square tildes&quot; for which the average causal mediation and direct effects 
are zero, respectively.</p>
</td></tr>
<tr><td><code>r.square.y</code>, <code>r.square.m</code></td>
<td>
<p>the usual R square statistics for the 
outcome and mediator models.</p>
</td></tr>
<tr><td><code>INT</code></td>
<td>
<p>a logical value indicating whether interaction between the 
treatment and mediator is allowed in the original mediate object.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p>the confidence level used.</p>
</td></tr>
<tr><td><code>effect.type</code></td>
<td>
<p>the 'effect.type' argument used.</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>a character string indicating the type of the mediator and 
outcome models used. Currently either &quot;ct&quot; (linear mediator and outcome 
models), 'bm' (binary mediator and linear outcome models) or 'bo' (linear 
mediator and binary outcome models).</p>
</td></tr>
<tr><td><code>robustSE</code></td>
<td>
<p>&lsquo;TRUE&rsquo; or &lsquo;FALSE&rsquo;.</p>
</td></tr>
<tr><td><code>cluster</code></td>
<td>
<p>the clusters used.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>; Jaquilyn Waddell-Boie, Princeton 
University, <a href="mailto:jwaddell@princeton.edu">jwaddell@princeton.edu</a>; Kentaro Hirose, Princeton 
University, <a href="mailto:hirose@princeton.edu">hirose@princeton.edu</a>; Luke Keele, Penn State 
University, <a href="mailto:ljk20@psu.edu">ljk20@psu.edu</a>; Kosuke Imai, Princeton University, 
<a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+summary.medsens">summary.medsens</a></code>, 
<code><a href="#topic+plot.medsens">plot.medsens</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# **For illustration purposes a small number of simulations are used**

data(jobs)

####################################################
# Example 1: Binary treatment 
####################################################
# Fit parametric models
b &lt;- lm(job_seek ~ treat + econ_hard + sex + age, data=jobs)
c &lt;- lm(depress2 ~ treat + job_seek + econ_hard + sex + age, data=jobs)

# Pass model objects through mediate function
med.cont &lt;- mediate(b, c, treat="treat", mediator="job_seek", sims=50)
# med.cont &lt;- mediate(b, c, treat="treat", mediator="job_seek", sims=50, robustSE = T)
# jobs$cluster &lt;- rep(1:30, each = 30)[-1]
# med.cont &lt;- mediate(b, c, treat="treat", mediator="job_seek", sims=50, cluster = jobs$cluster)

# Pass mediate output through medsens function
sens.cont &lt;- medsens(med.cont, rho.by=.1, eps=.01, effect.type="both")

# Use summary function to display results
summary(sens.cont)

# Plot true ACMEs and ADEs as functions of rho
par.orig &lt;- par(mfrow = c(2,2))
plot(sens.cont, main="JOBS", ylim=c(-.2,.2))

# Plot true ACMEs and ADEs as functions of "R square tildes"
plot(sens.cont, sens.par="R2", r.type="total", sign.prod="positive")
par(par.orig)

####################################################
# Example 2: Categorical treatment 
####################################################
## Not run: 

# Purely for illustration, think of educ as a ``treatment''

b &lt;- lm(job_seek ~ educ + sex, data=jobs)
c &lt;- lm(depress2 ~ educ + job_seek + sex, data=jobs)

# compare two categories of educ --- gradwk and somcol
med.cont &lt;- mediate(b, c, treat="educ", mediator="job_seek", sims=50, 
                    control.value = "gradwk", treat.value = "somcol")
sens.cont &lt;- medsens(med.cont, rho.by=.1, eps=.01, effect.type="both")
summary(sens.cont)

## End(Not run)

</code></pre>

<hr>
<h2 id='multimed'>Estimation and Sensitivity Analysis for Multiple Causal Mechanisms</h2><span id='topic+multimed'></span>

<h3>Description</h3>

<p>'multimed' is used for causal mediation analysis when post-treatment 
mediator-outcome confounders, or alternative mediators causally preceding the
mediator of interest, exist in the hypothesized causal mechanisms. It 
estimates the average causal mediation effects (indirect effects) and the 
average direct effects under the homogeneous interaction assumption based on 
a varying-coefficient linear structural equation model. The function also 
performs sensitivity analysis with respect to the violation of the homogenous
interaction assumption. The function can be used for both the single
experiment design and the parallel design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multimed(outcome, med.main, med.alt = NULL, treat, covariates = NULL,
  experiment = NULL, data, design = c("single", "parallel"),
  sims = 1000, R2.by = 0.01, conf.level = 0.95, weight = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multimed_+3A_outcome">outcome</code></td>
<td>
<p>name of the outcome variable in 'data'.</p>
</td></tr>
<tr><td><code id="multimed_+3A_med.main">med.main</code></td>
<td>
<p>name of the mediator of interest. Under the parallel design 
this is the only mediator variable used in the estimation.</p>
</td></tr>
<tr><td><code id="multimed_+3A_med.alt">med.alt</code></td>
<td>
<p>vector of character strings indicating the names of the 
post-treatment confounders, i.e., the alternative mediators affecting both 
the main mediator and outcome. Not needed for the parallel design.</p>
</td></tr>
<tr><td><code id="multimed_+3A_treat">treat</code></td>
<td>
<p>name of the treatment variable in 'data'.</p>
</td></tr>
<tr><td><code id="multimed_+3A_covariates">covariates</code></td>
<td>
<p>vector of character strings representing the names of the 
pre-treatment covariates. Cannot be used for the parallel design.</p>
</td></tr>
<tr><td><code id="multimed_+3A_experiment">experiment</code></td>
<td>
<p>name of the binary indicator whether 'med.main' is randomly
manipulated or not. Only used under the parallel design.</p>
</td></tr>
<tr><td><code id="multimed_+3A_data">data</code></td>
<td>
<p>a data frame containing all the above variables.</p>
</td></tr>
<tr><td><code id="multimed_+3A_design">design</code></td>
<td>
<p>experimental design used. Defaults to 'single'.</p>
</td></tr>
<tr><td><code id="multimed_+3A_sims">sims</code></td>
<td>
<p>number of bootstrap samples used for the calculation of 
confidence intervals.</p>
</td></tr>
<tr><td><code id="multimed_+3A_r2.by">R2.by</code></td>
<td>
<p>increment for the &quot;R square tilde&quot; parameter, i.e. the 
sensitivity parameter representing the proportion of residual outcome 
variance explained by heterogeneity in treatment-mediator interactions.
Must be a numeric value between 0 and 1.</p>
</td></tr>
<tr><td><code id="multimed_+3A_conf.level">conf.level</code></td>
<td>
<p>level to be used for confidence intervals.</p>
</td></tr>
<tr><td><code id="multimed_+3A_weight">weight</code></td>
<td>
<p>name of the weights in 'data'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function implements the framework proposed by Imai and Yamamoto
(2012) for the estimation and sensitivity analysis for multiple causal
mechanisms. It estimates the average causal mediation effects (indirect
effects) with respect to the mediator of interest ('med.main'), i.e., the
portion of the treatment effect on the outcome that is transmitted through
that mediator, as well as the average direct effects, i.e., the portion of
the treatment effect on the outcome that is not transmitted through the
main mediator. Unlike the &quot;standard&quot; causal mediation analysis implemented
by <code><a href="#topic+mediate">mediate</a></code> and <code><a href="#topic+medsens">medsens</a></code>, this framework allows
the existence of post-treatment covariates that confound the relationship 
between the main mediator and the outcome, or equivalently, alternative 
mediators ('med.alt') that causally precede the main mediator.
</p>
<p>When the parallel design was used for the experiment (i.e. when the 
experiment contained an additional randomly assigned group for which both 
the treatment and the mediator were randomized), there is no need to
specify a particular post-treatment confounder, for any such confounder
(observed or unobserved) is allowed to exist by virtue of the design.
Similarly, no observed covariates need to be included. The function instead
requires an additional variable ('experiment') indicating whether the
mediator was randomly manipulated for the unit.
</p>
<p>The estimation and sensitivity analysis are both based on a 
varying-coefficient linear structural equations model, which assumes 
additivity but allows for an arbitrary degree of heterogeneity in model 
coefficients across units and thus is substantially more flexible than a 
traditional SEM framework. For details see Imai and Yamamoto (2012).
</p>
<p>The function produces two sets of results. First, point estimates of the 
average causal mediation effects and the average direct effects are 
calculated, along with their (percentile) bootstrap confidence intervals. 
These estimates are based on the &quot;homogeneous interaction&quot; assumption, or 
the assumption that the degree of treatment-mediator interaction is
constant across all units. The estimated total treatment effect is also
reported.
</p>
<p>Second, the bounds on the average causal mediation effects and the average 
direct effects are also estimated and computed for various degrees of 
interaction heterogeneity (i.e., violation of the identification 
assumption), which are represented by the values of three alternative 
sensitivity parameters. These parameters are: (1) sigma, the standard 
deviation of the (varying) regression coefficient on the interaction term, 
(2) R square star, the proportion of the residual variance that would be 
explained by an additional term for interaction heterogeneity, and (3) R 
square tilde, the proportion of the total variance explained by such a
term. The confidence region is also calculated, using the Imbens and Manski
(2004) formula with bootstrap standard errors. Further details are given in
the above reference.
</p>
<p>Note that rows with missing values will be omitted from the calculation of 
the results. Also note that the treatment variable must be a numeric vector
of 1 and 0 and that both mediators and outcome variable must be numeric.
The pre-treatment covariates can be of any type that <code><a href="stats.html#topic+lm">lm</a></code> can
handle as predictors.
</p>


<h3>Value</h3>

<p><code>multimed</code> returns an object of class &quot;<code>multimed</code>&quot;, a list 
contains the following components. The object can be passed to the 
<code>summary</code> and <code>plot</code> method functions for a summary table and a 
graphical summary.
</p>
<table>
<tr><td><code>sigma</code></td>
<td>
<p> values of the sigma sensitivity parameter at which the bounds 
and confidence intervals are evaluated.</p>
</td></tr>
<tr><td><code>R2tilde</code></td>
<td>
<p> values of the R square tilde parameter.</p>
</td></tr>
<tr><td><code>R2star</code></td>
<td>
<p> values of the R square star parameter.</p>
</td></tr>
<tr><td><code>d1.lb</code>, <code>d0.lb</code>, <code>d.ave.lb</code></td>
<td>
<p> lower bounds on the average causal mediation 
effects under treatment, control, and the simple average of the two, 
respectively, corresponding to the values of the sensitivity parameters 
listed above. Note that the first elements of these vectors equal the point 
estimates under the homogeneous interaction assumption.</p>
</td></tr>
<tr><td><code>d1.ub</code>, <code>d0.ub</code>, <code>d.ave.ub</code></td>
<td>
<p> upper bounds on the average causal mediation 
effects.</p>
</td></tr>
<tr><td><code>d1.ci</code>, <code>d0.ci</code>, <code>d.ave.ci</code></td>
<td>
<p> confidence intervals for the average causal
mediation effects at different values of the sensitivity parameters.</p>
</td></tr>
<tr><td><code>z1.lb</code>, <code>z0.lb</code>, <code>z.ave.lb</code></td>
<td>
<p> lower bounds on the average direct effects 
under treatment, control, and the simple average of the two, respectively, 
corresponding to the values of the sensitivity parameters listed above. 
Note that the first elements of these vectors equal the point estimates 
under the homogeneous interaction assumption.</p>
</td></tr>
<tr><td><code>z1.ub</code>, <code>z0.ub</code>, <code>z.ave.ub</code></td>
<td>
<p> upper bounds on the average direct effects.</p>
</td></tr>
<tr><td><code>z1.ci</code>, <code>z0.ci</code>, <code>z.ave.ci</code></td>
<td>
<p> confidence intervals for the average direct 
effects at different values of the sensitivity parameters.</p>
</td></tr>
<tr><td><code>tau</code></td>
<td>
<p> point estimate of the total treatment effect.</p>
</td></tr>
<tr><td><code>tau.ci</code></td>
<td>
<p> confidence interval for the total treatment effect.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p> confidence level used for the calculation of the 
confidence intervals.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K. and Yamamoto, T. (2012) Identification and Sensitivity Analysis
for Multiple Causal Mechanisms: Revisiting Evidence from Framing
Experiments, Unpublished manuscript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.multimed">plot.multimed</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Replicates Figure 3 (right column) of Imai and Yamamoto (2012)
# Note: # of bootstrap samples set low for quick illustration

data(framing)
Xnames &lt;- c("age", "educ", "gender", "income")
res &lt;- multimed("immigr", "emo", "p_harm", "treat", Xnames, 
               data = framing, design = "single", sims = 10)
summary(res)
plot(res, type = "point")
plot(res, type = c("sigma", "R2-total"), tgroup = "average")

# Parallel design example using the simulated data of Imai, Tingley and Yamamoto (2012)

data(boundsdata)
res.para &lt;- multimed(outcome = "out", med.main = "med", treat = "ttt", experiment = "manip",
					 data = boundsdata, design = "parallel", sims = 10)
summary(res.para)
plot(res.para, tg = "av")

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.ivmediate'>Plotting Local Indirect, Direct, and Total Effects from Mediation Analysis 
with Treatment Noncompliance</h2><span id='topic+plot.ivmediate'></span>

<h3>Description</h3>

<p>Function to plot results from <code>ivmediate</code>. The vertical axis lists the 
local average causal mediation effects, local average natural direct effects 
and local average treatment effects and the horizontal axis indicates the 
respective magnitudes. Most standard options for plot function available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ivmediate'
plot(x, treatment = NULL, labels = NULL,
  effect.type = c("indirect", "direct", "total"),
  conf.level = x$conf.level[1], xlim = NULL, ylim = NULL,
  xlab = "", ylab = "", main = NULL, lwd = 1.5, cex = 0.85,
  col = "black", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.ivmediate_+3A_x">x</code></td>
<td>
<p>object of class <code>ivmediate</code> as produced by <code>ivmediate</code>.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_treatment">treatment</code></td>
<td>
<p>a character string indicating the baseline treatment value 
of the estimated local average causal mediation effect and direct effect to
plot. Can be either &quot;control&quot;, &quot;treated&quot; or &quot;both&quot;. If 'NULL' (default), 
both sets of estimates are plotted.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_labels">labels</code></td>
<td>
<p>a vector of character strings indicating the labels for the 
estimated effects. The default labels will be used if NULL.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_effect.type">effect.type</code></td>
<td>
<p>a vector indicating which quantities of interest to plot. 
Default is to plot all three quantities (indirect, direct and total 
effects).</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_conf.level">conf.level</code></td>
<td>
<p>a numeric value for the level of the confidence intervals 
to plot. Must equal one of the confidence levels used to produce the 
<code>ivmediate</code> object.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_xlim">xlim</code></td>
<td>
<p>range of the horizontal axis.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_ylim">ylim</code></td>
<td>
<p>range of the vertical axis.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_xlab">xlab</code></td>
<td>
<p>label of the horizontal axis.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_ylab">ylab</code></td>
<td>
<p>label of the vertical axis.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_main">main</code></td>
<td>
<p>main title.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_lwd">lwd</code></td>
<td>
<p>width of the horizontal bars for confidence intervals.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_cex">cex</code></td>
<td>
<p>size of the dots for point estimates.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_col">col</code></td>
<td>
<p>color of the dots and horizontal bars for the estimates.</p>
</td></tr>
<tr><td><code id="plot.ivmediate_+3A_...">...</code></td>
<td>
<p>additional parameters passed to 'plot'.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Yamamoto, T. (2013). Identification and Estimation of Causal Mediation 
Effects with Treatment Noncompliance. Unpublished manuscript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ivmediate">ivmediate</a></code>, <code><a href="#topic+summary.ivmediate">summary.ivmediate</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# ** For illustration purposes a small number of simulations are used **

require(parallel)
require(MASS)

data(jobs)

a &lt;- lm(comply ~ treat + sex + age + marital + nonwhite + educ + income, 
        data = jobs)
b &lt;- glm(job_dich ~ comply + treat + sex + age + marital + nonwhite + educ + income, 
        data = jobs, family = binomial)
c &lt;- lm(depress2 ~ job_dich * (comply + treat) + sex + age + marital + nonwhite + educ + income, 
        data = jobs)

out &lt;- ivmediate(a, b, c, sims = 50, boot = FALSE,
                 enc = "treat", treat = "comply", mediator = "job_dich")
                 
summary(out)
plot(out)

</code></pre>

<hr>
<h2 id='plot.mediate'>Plotting Indirect, Direct, and Total Effects from Mediation Analysis</h2><span id='topic+plot.mediate'></span><span id='topic+plot.mediate.order'></span>

<h3>Description</h3>

<p>Function to plot results from <code>mediate</code>. The vertical axis lists 
indirect, direct, and total effects and the horizontal axis indicates the 
respective magnitudes. Most standard options for plot function available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mediate'
plot(x, treatment = NULL, labels = NULL,
  effect.type = c("indirect", "direct", "total"), xlim = NULL,
  ylim = NULL, xlab = "", ylab = "", main = NULL, lwd = 1.5,
  cex = 0.85, col = "black", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mediate_+3A_x">x</code></td>
<td>
<p>object of class <code>mediate</code> or <code>mediate.order</code> as produced 
by <code>mediate</code>.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_treatment">treatment</code></td>
<td>
<p>a character string indicating the baseline treatment value 
of the estimated causal mediation effect and direct effect to plot. Can be 
either &quot;control&quot;, &quot;treated&quot; or &quot;both&quot;. If 'NULL' (default), both sets of 
estimates are plotted if and only if they differ.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_labels">labels</code></td>
<td>
<p>a vector of character strings indicating the labels for the 
estimated effects. The default labels will be used if NULL.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_effect.type">effect.type</code></td>
<td>
<p>a vector indicating which quantities of interest to plot. 
Default is to plot all three quantities (indirect, direct and total 
effects).</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_xlim">xlim</code></td>
<td>
<p>range of the horizontal axis.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_ylim">ylim</code></td>
<td>
<p>range of the vertical axis.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_xlab">xlab</code></td>
<td>
<p>label of the horizontal axis.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_ylab">ylab</code></td>
<td>
<p>label of the vertical axis.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_main">main</code></td>
<td>
<p>main title.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_lwd">lwd</code></td>
<td>
<p>width of the horizontal bars for confidence intervals.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_cex">cex</code></td>
<td>
<p>size of the dots for point estimates.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_col">col</code></td>
<td>
<p>color of the dots and horizontal bars for the estimates.</p>
</td></tr>
<tr><td><code id="plot.mediate_+3A_...">...</code></td>
<td>
<p>additional parameters passed to 'plot'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>mediate</code> returns an object of class &quot;<code>mediate</code>&quot;. The 
function <code>summary</code> is used to obtain a table of the results. The 
<code>plot</code> function plots these quantities.
</p>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="graphics.html#topic+plot">plot</a></code>
</p>

<hr>
<h2 id='plot.mediate.mer'>Plotting Indirect, Direct, and Total Effects from Mediation Analysis of 
Multilevel Models</h2><span id='topic+plot.mediate.mer'></span>

<h3>Description</h3>

<p>Function to plot group-specific effects derived from causal mediation 
analysis of multilevel models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mediate.mer'
plot(x, treatment = NULL, group.plots = FALSE,
  ask = prod(par("mfcol")) &lt; nplots, xlim = NULL, ylim = NULL,
  xlab = "", ylab = "", main = NULL, lwd = 1.5, cex = 0.85,
  col = "black", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mediate.mer_+3A_x">x</code></td>
<td>
<p>object of class 'mediate.mer' produced by 'mediate'.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_treatment">treatment</code></td>
<td>
<p>a character string indicating the baseline treatment value 
of the estimated causal mediation effect and direct effect to plot. Can be 
either &quot;control&quot;, &quot;treated&quot;, or &quot;both&quot;. If 'NULL' (default), both sets of 
estimates are plotted if and only if they differ.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_group.plots">group.plots</code></td>
<td>
<p>a logical value indicating whether group-specific effects 
should be plotted in addition to the population-averaged effects.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_ask">ask</code></td>
<td>
<p>a logical value. If 'TRUE', the user is asked for input before a 
new figure is plotted. Default is to ask only if the number of plots on 
current screen is fewer than necessary.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_xlim">xlim</code></td>
<td>
<p>range of the horizontal axis.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_ylim">ylim</code></td>
<td>
<p>range of the vertical axis.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_xlab">xlab</code></td>
<td>
<p>label of the horizontal axis.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_ylab">ylab</code></td>
<td>
<p>label of the vertical axis.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_main">main</code></td>
<td>
<p>main title.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_lwd">lwd</code></td>
<td>
<p>width of the horizontal bars for confidence intervals .</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_cex">cex</code></td>
<td>
<p>size of the dots for point estimates.</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_col">col</code></td>
<td>
<p>color of the dots and horizontal bars for the estimates..</p>
</td></tr>
<tr><td><code id="plot.mediate.mer_+3A_...">...</code></td>
<td>
<p>additional parameters passed to 'plot'.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Kentaro Hirose, Princeton University, <a href="mailto:hirose@princeton.edu">hirose@princeton.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+summary.mediate.mer">summary.mediate.mer</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# **For illustration purposes a small number of simulations are used**
## Not run: 
data(jobs)
require(lme4)

# educ: mediator group
# occp: outcome group

# Varying intercept for mediator 
model.m &lt;- glmer(job_dich ~ treat + econ_hard + (1 | educ), 
             		     family = binomial(link = "probit"), data = jobs)

# Varying intercept and slope for outcome
model.y &lt;- glmer(work1 ~ treat + job_dich + econ_hard + (1 + treat | occp), 
                family = binomial(link = "probit"), data = jobs)

# Output based on mediator group
multilevel &lt;- mediate(model.m, model.y, treat = "treat", 
                      mediator = "job_dich", sims=50, group.out="educ")

#plot(multilevel, group.plots=TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='plot.mediations'>Plotting Indirect, Direct, and Total Effects from Multiple Mediation Analyses</h2><span id='topic+plot.mediations'></span><span id='topic+plot.mediations.order'></span>

<h3>Description</h3>

<p>Function to plot results from multiple causal mediation analyses conducted 
via the <code><a href="#topic+mediations">mediations</a></code> funciton. Output is a series of plots 
generated via <code><a href="#topic+plot.mediate">plot.mediate</a></code> for each treatment/mediator/outcome 
combination specified in the input 'mediations' object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mediations'
plot(x, which = names(x), ask = prod(par("mfcol"))
  &lt; length(which) &amp;&amp; dev.interactive(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mediations_+3A_x">x</code></td>
<td>
<p>output from the mediations function.</p>
</td></tr>
<tr><td><code id="plot.mediations_+3A_which">which</code></td>
<td>
<p>subset of names(x), indicating which model combinations to be 
plotted. Default is to plot all.</p>
</td></tr>
<tr><td><code id="plot.mediations_+3A_ask">ask</code></td>
<td>
<p>logical. If 'TRUE', the user is asked for input before a new 
figure is plotted.  Default is to ask only if the number of plots on
current screen is fewer the number implied by 'which'.</p>
</td></tr>
<tr><td><code id="plot.mediations_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code><a href="#topic+plot.mediate">plot.mediate</a></code> function for 
individual plots.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>mediations</code> returns an object of class <code>mediations</code>.  The 
function <code>summary</code> is used to obtain a table of the results. The plot 
function instead plots these quantities. All additional parameters desired 
for the plotting of an output from <code>mediate</code> can be passed through.
</p>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediations">mediations</a></code>, <code><a href="#topic+plot.mediate">plot.mediate</a></code>, 
<code><a href="graphics.html#topic+plot">plot</a></code>.
</p>

<hr>
<h2 id='plot.medsens'>Plotting Results from Sensitivity Analysis for Causal Mediation Effects</h2><span id='topic+plot.medsens'></span>

<h3>Description</h3>

<p>This function is used to plot results from the 'medsens' function. Causal 
average mediation effects (as well as average direct effects and proportions 
mediated for selected models) can be plotted against two alternative 
sensitivity parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'medsens'
plot(x, sens.par = c("rho", "R2"),
  r.type = c("residual", "total"), sign.prod = c("positive",
  "negative"), pr.plot = FALSE, smooth.effect = FALSE,
  smooth.ci = FALSE, ask = prod(par("mfcol")) &lt; nplots,
  levels = NULL, xlab = NULL, ylab = NULL, xlim = NULL,
  ylim = NULL, main = NULL, lwd = par("lwd"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.medsens_+3A_x">x</code></td>
<td>
<p>'medsens' object, typically output from <code>medsens</code>.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_sens.par">sens.par</code></td>
<td>
<p>a character string indicating the sensitivity parameter to be
used. Default plots effects as functions of &quot;rho&quot;. See Details.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_r.type">r.type</code></td>
<td>
<p>type of the R square parameter to be used in &quot;R2&quot; plots. If 
&quot;residual&quot;, effects are plotted against the proportions of the residual 
variances that are explained by the unobserved confounder.  If &quot;total&quot;, the
proportions of the total variances are used as sensitivity parameters. Only
relevant if 'sens.par' is &quot;R2&quot;.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_sign.prod">sign.prod</code></td>
<td>
<p>a value indicating the direction of hypothesized confounding
in the sensitivity analysis. If &quot;positive&quot;, the confounder is assumed to 
affect the mediator and outcome variable in the same direction; if 
&quot;negative&quot; the effects are assumed to be in opposite directions.  Only 
relevant if sens.par is set to &quot;R2&quot;.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_pr.plot">pr.plot</code></td>
<td>
<p>a logical value. If 'TRUE', the &quot;proportions mediated&quot; will be
plotted instead of the average causal mediation effects or direct effects. 
Currently only available if the object 'medsens' is based on the linear 
mediator and binary probit outcome models. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_smooth.effect">smooth.effect</code></td>
<td>
<p>a logical value indicating whether the estimated 
mediation effects are smoothed via <code><a href="stats.html#topic+lowess">lowess</a></code> before being 
plotted. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_smooth.ci">smooth.ci</code></td>
<td>
<p>a logical value indicating whether the confidence bands are 
smoothed via <code><a href="stats.html#topic+lowess">lowess</a></code> before being plotted. Default is 'FALSE'.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_ask">ask</code></td>
<td>
<p>a logical value. If 'TRUE', the user is asked for input before a 
new figure is plotted.  Default is to ask only if the number of plots on 
current screen is fewer than necessary.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_levels">levels</code></td>
<td>
<p>vector of levels at which to draw contour lines. Only relevant 
if 'sens.par' is set to &quot;R2&quot;. If 'NULL', default values in 
<code><a href="graphics.html#topic+contour.default">contour.default</a></code> are used.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_xlab">xlab</code></td>
<td>
<p>label for the x axis. Default labels are used if 'NULL'.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_ylab">ylab</code></td>
<td>
<p>label for the y axis. Default labels are used if 'NULL'.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_xlim">xlim</code></td>
<td>
<p>limits of the x axis. If 'NULL' default values are used.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_ylim">ylim</code></td>
<td>
<p>limits of the y axis. If 'NULL' default values are used.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_main">main</code></td>
<td>
<p>main title for the plot. If 'NULL', default titles are used.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_lwd">lwd</code></td>
<td>
<p>width of the lines used in graphs.</p>
</td></tr>
<tr><td><code id="plot.medsens_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to plotting functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The sensitivity analysis for causal mediation effects can be
conducted in terms of two alternative sensitivity parameters, which both
quantify the degree of violation of the sequential ignorability assumption.
The &quot;rho&quot; parameter represents the correlation between the two error terms
of the (latent) linear models for the mediator and outcome variables. A
large value of rho indicates the existence of important common unobserved
predictors for both the mediator and outcome and therefore a high degree of
sequential ignorability violation, while a value close to zero implies
there is no such confounders.
</p>
<p>The resulting &quot;rho&quot; figures plot the estimated true values of ACME (or ADE,
proportion mediated) against rho, along with the confidence intervals. When
rho is zero, sequantial ignorability holds, so the estimated value at that 
point will be equal to the estimate returned by the <code><a href="#topic+mediate">mediate</a></code>. 
The confidence level is determined by the 'conf.level' value of the
original <code><a href="#topic+mediate">mediate</a></code> object.
</p>
<p>The &quot;R2&quot; parameters represent the proportions of the mediator and outcome 
variances that are explained by an unobserved pre-treatment confounder, 
thereby indicating the importance of such a confounder in each model.  When
'r.type' is &quot;residual&quot;, the R2 parameters represent the proportions of the 
residual variances of the mediator and outcome models that become explained
by the inclusion of the hypothetical pre-treatment confounder.  These are 
denoted as &quot;R square stars&quot; in Imai, Keele and Yamamoto (2010) and can also
be specified as &quot;star&quot; or using a numeric value 1 in <code>medsens.plot</code>. 
When 'r.type' is &quot;total&quot;, the R2s represent the total mediator and outcome 
variances the unobserved confounder would explain. This option can also be 
specified using &quot;tilde&quot; or a numeric value 2.
</p>
<p>For both types of the &quot;R2&quot; parameters, 'sign.prod' indicates the
hypothesized direction in which the unobserved confounder affects the
mediator and outcome. (The name derives from the fact that this direction
is mathematically represented by the sign of the product of two regression 
coefficients.) If &quot;positive&quot; (or a numeric value 1) is given, the
confounder is assumed to affect the mediator and outcome in the same
direction.  If &quot;negative&quot; (or a numeric value -1), the effect is assumed to
be in opposite directions.
</p>
<p>The resulting contours in the &quot;R2&quot; plots represent the values of the ACME
(or ADE) for different combinations of the mediator R2 and outcome R2
values. When both values are zero (the lower-left corner of the plot), the
unobserved pre-treatment confounder has no effect on either mediator or
outcome and therefore sequantial ignorability is satisfied.
</p>


<h3>Warning</h3>

<p>The 'smooth.effect' and 'smooth.ci' options should be used 
with caution since the smoothing could affect substantive implications of 
the graphical analysis in a significant way.
</p>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>; Jaquilyn Waddell-Boie, Princeton 
University, <a href="mailto:jwaddell@princeton.edu">jwaddell@princeton.edu</a>; Luke Keele, Penn State 
University, <a href="mailto:ljk20@psu.edu">ljk20@psu.edu</a>; Kosuke Imai, Princeton University, 
<a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science, 
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+medsens">medsens</a></code>, <code><a href="graphics.html#topic+plot">plot</a></code>, <code><a href="graphics.html#topic+contour">contour</a></code>.
</p>

<hr>
<h2 id='plot.multimed'>Plotting the Results of Causal Mediation Analysis for Multiple Mechanisms</h2><span id='topic+plot.multimed'></span>

<h3>Description</h3>

<p>Function to plot results from <code>multimed</code>. Most standard plotting options
are available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'multimed'
plot(x, type = c("point", "sigma", "R2-residual",
  "R2-total"), tgroup = c("average", "treated", "control"),
  effect.type = c("indirect", "direct", "total"),
  ask = prod(par("mfcol")) &lt; nplots, xlab = NULL, ylab = NULL,
  xlim = NULL, ylim = NULL, main = NULL, lwd = par("lwd"),
  pch = par("pch"), cex = par("cex"), las = par("las"),
  col.eff = "black", col.cbar = "black", col.creg = "gray", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.multimed_+3A_x">x</code></td>
<td>
<p>object of class <code>multimed</code>, typically output from the 
<code>multimed</code> funciton.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_type">type</code></td>
<td>
<p>type of plot(s) required. The default is to produce all, i.e., 
the point estimates of the effects under the homogenous interaction 
assumpton (&quot;point&quot;) and bounds as function of the sigma (&quot;sigma&quot;), R square
star (&quot;R2-residual&quot;) and R square tilde (&quot;R2-total&quot;) parameters.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_tgroup">tgroup</code></td>
<td>
<p>treatment group(s) for which the estimates are produced. The 
default is to plot all, i.e., the average causal mediation effect when 
treated (&quot;treated&quot;), control (&quot;control&quot;) and the simple average of these 
two effects (&quot;average&quot;).</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_effect.type">effect.type</code></td>
<td>
<p>a vector indicating which quantities of interest to plot 
for the point estimates. Only plotting total effects is not available.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_ask">ask</code></td>
<td>
<p>a logical value. If 'TRUE', the user is asked for input before a 
new figure is plotted.  Default is to ask only if the number of plots on 
current screen is fewer than necessary.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_xlab">xlab</code></td>
<td>
<p>label for the x axis. Default labels are used if 'NULL'.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_ylab">ylab</code></td>
<td>
<p>label for the y axis. Default labels are used if 'NULL'.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_xlim">xlim</code></td>
<td>
<p>limits of the x axis. If 'NULL' default values are used.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_ylim">ylim</code></td>
<td>
<p>limits of the y axis. If 'NULL' default values are used.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_main">main</code></td>
<td>
<p>main title for the plot. If 'NULL', default titles are used.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_lwd">lwd</code></td>
<td>
<p>width of the lines used in graphs. For the &quot;point&quot; plot this is 
the width of confidence bars. For sensitivity plots this is the width of 
the lines for the bounds.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_pch">pch</code></td>
<td>
<p>plotting points used for the &quot;point&quot; plots.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_cex">cex</code></td>
<td>
<p>magnification factor for the plotting points in the &quot;point&quot; plots.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_las">las</code></td>
<td>
<p>style of the y axis labels in the &quot;point&quot; plots.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_col.eff">col.eff</code></td>
<td>
<p>color of the points in the &quot;point&quot; plots and/or the bounds in 
sensitivity plots.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_col.cbar">col.cbar</code></td>
<td>
<p>color of the confidence bars in the &quot;point&quot; plots.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_col.creg">col.creg</code></td>
<td>
<p>color of the confidence regions in sensitivity plots.</p>
</td></tr>
<tr><td><code id="plot.multimed_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to plotting functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'type' and 'tgroup' can contain multiple character strings, in which
case multiple plots are produced. For the use of graphical parameters see 
<code><a href="graphics.html#topic+plot">plot</a></code> and the links it contains.
</p>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K. and Yamamoto, T. (2012) Identification and Sensitivity Analysis 
for Multiple Causal Mechanisms: Revisiting Evidence from Framing 
Experiments, typescript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+multimed">multimed</a></code>, <code><a href="graphics.html#topic+plot">plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Replicates Figure 3 (right column) of Imai and Yamamoto (2012)
# Note: # of bootstrap samples set low for quick illustration

data(framing)
Xnames &lt;- c("age", "educ", "gender", "income")
res &lt;- multimed("immigr", "emo", "p_harm", "treat", Xnames,
               data = framing, sims = 10)
summary(res)
plot(res, type = "point")
plot(res, type = c("sigma", "R2-total"), tgroup = "average")


## End(Not run)

</code></pre>

<hr>
<h2 id='school'>School-level data</h2><span id='topic+school'></span>

<h3>Description</h3>

<p>The original data source is the Education Longitudinal Study of 2002. To deal
with the issue on individually identifiable information, we generated 
hypothetical student-level data using a multiple imputation method. The 
Education Longitudinal Study of 2002 used a two-stage sample selection 
process. First, a national sample of schools was selected using stratified 
probability proportional to size (PPS), and school contacting resulted in 
1,221 eligible public, Catholic, and other private schools from a population 
of approximately 27,000 schools containing 10th grade students. Of the 
eligible schools, 752 participated in the study. In the second stage of 
sample selection, a sample of approximately 26 sophomores, from within each 
of the participating public and private schools was selected. Each school was
asked to provide a list of 10th grade students, and quality assurance (QA) 
checks were performed on each list that was received.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>school
</code></pre>


<h3>Format</h3>

<p>A data matrix with 568 rows and 5 columns, containing no missing 
values. The data are provided only for illustrative purposes and not for 
inference about education effectiveness, for which the original data source
should be consulted. </p>
 <dl>
<dt>SCH_ID:</dt><dd><p> School indicator.</p>
</dd> 
<dt>coed:</dt><dd><p> Indicator variable for coeducation. 1 = coeducation.</p>
</dd> 
<dt>smorale:</dt><dd><p> Measure of student morale in the school. 4 levels.</p>
</dd> 
<dt>free:</dt><dd><p> Percent of 10th grade students receiving free lunch. 1 to 7 
levels.</p>
</dd> <dt>catholic:</dt><dd><p> Indicator variable for catholic school. 1 = 
catholic school.</p>
</dd> </dl>


<h3>Source</h3>

<p>The complete student-level data is available from the data archives 
at www.icpsr.umich.edu/
</p>


<h3>References</h3>

<p>United States Department of Education. National Center for
Education Statistics
</p>

<hr>
<h2 id='student'>Hypothetical student-level data</h2><span id='topic+student'></span>

<h3>Description</h3>

<p>The original data source is the Education Longitudinal Study of 2002. To deal
with the issue on individually identifiable information, we generated 
hypothetical student-level data using a multiple imputation method. The 
Education Longitudinal Study of 2002 used a two-stage sample selection 
process. First, a national sample of schools was selected using stratified 
probability proportional to size (PPS), and school contacting resulted in 
1,221 eligible public, Catholic, and other private schools from a population 
of approximately 27,000 schools containing 10th grade students. Of the 
eligible schools, 752 participated in the study. In the second stage of 
sample selection, a sample of approximately 26 sophomores, from within each 
of the participating public and private schools was selected. Each school was
asked to provide a list of 10th grade students, and quality assurance (QA) 
checks were performed on each list that was received.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>student
</code></pre>


<h3>Format</h3>

<p>A data matrix with 9,679 rows and 17 columns, containing no missing 
values. The data are provided only for illustrative purposes and not for 
inference about education effectiveness, for which the original data source
should be consulted. </p>
 <dl>
<dt>SCH_ID:</dt><dd><p> School indicator.</p>
</dd> 
<dt>fight:</dt><dd><p> Indicator variable for fight at school. 1 = fight.</p>
</dd> 
<dt>attachment:</dt><dd><p> Indicator variable for attachment to school. 1 = like.</p>
</dd>
<dt>work:</dt><dd><p> Indicator variable for part-time job. 1 = work.</p>
</dd> 
<dt>score:</dt><dd><p> Measure of math score.</p>
</dd> <dt>late:</dt><dd><p> Frequency in which the
student was late for school. 5 levels.</p>
</dd> <dt>coed:</dt><dd><p> Indicator variable 
for coeducation. 1 = coeducation.</p>
</dd> <dt>smorale:</dt><dd><p> Measure of student 
morale in the school. 4 levels.</p>
</dd> <dt>gender:</dt><dd><p> Indicator variable for 
gender. 1 = female.</p>
</dd> <dt>income:</dt><dd><p> Total family income. 13 levels.</p>
</dd> 
<dt>free:</dt><dd><p> Percent of 10th grade students receiving free lunch. 1 to 7 
levels.</p>
</dd> <dt>pared:</dt><dd><p> Parents highest level of education. 8 levels</p>
</dd> 
<dt>catholic:</dt><dd><p> Indicator variable for catholic school. 1 = catholic 
school.</p>
</dd> </dl>


<h3>Source</h3>

<p>The complete student-level data is available from the data archives 
at www.icpsr.umich.edu/
</p>


<h3>References</h3>

<p>United States Department of Education. National Center for
Education Statistics
</p>

<hr>
<h2 id='summary.ivmediate'>Summarizing Output from Mediation Analysis with Treatment Noncompliance</h2><span id='topic+summary.ivmediate'></span><span id='topic+print.summary.ivmediate'></span>

<h3>Description</h3>

<p>Function to report results from mediation analysis with treatment 
noncompliance. Reported categories are local average causal mediation 
effects, local average natural direct effects and local average treatment 
(total) effect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ivmediate'
summary(object, conf.level = object$conf.level[1],
  ...)

## S3 method for class 'summary.ivmediate'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.ivmediate_+3A_object">object</code></td>
<td>
<p>output from mediate function.</p>
</td></tr>
<tr><td><code id="summary.ivmediate_+3A_conf.level">conf.level</code></td>
<td>
<p>confidence level for the intervals reported in the summary 
table.</p>
</td></tr>
<tr><td><code id="summary.ivmediate_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
<tr><td><code id="summary.ivmediate_+3A_x">x</code></td>
<td>
<p>output from summary.mediate function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Yamamoto, T. (2013). Identification and Estimation of Causal Mediation 
Effects with Treatment Noncompliance. Unpublished manuscript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ivmediate">ivmediate</a></code>, <code><a href="#topic+plot.ivmediate">plot.ivmediate</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# ** For illustration purposes a small number of simulations are used **

require(parallel)
require(MASS)

data(jobs)

a &lt;- lm(comply ~ treat + sex + age + marital + nonwhite + educ + income, 
        data = jobs)
b &lt;- glm(job_dich ~ comply + treat + sex + age + marital + nonwhite + educ + income, 
        data = jobs, family = binomial)
c &lt;- lm(depress2 ~ job_dich * (comply + treat) + sex + age + marital + nonwhite + educ + income, 
        data = jobs)

out &lt;- ivmediate(a, b, c, sims = 50, boot = FALSE,
                 enc = "treat", treat = "comply", mediator = "job_dich")
                 
summary(out)
plot(out)

</code></pre>

<hr>
<h2 id='summary.mediate'>Summarizing Output from Mediation Analysis</h2><span id='topic+summary.mediate'></span><span id='topic+summary.mediate.order'></span><span id='topic+print.summary.mediate'></span><span id='topic+print.summary.mediate.order'></span>

<h3>Description</h3>

<p>Function to report results from mediation analysis. Reported categories are 
mediation effect, direct effect, total effect, and proportion of total effect
mediated. All quantities reported with confidence intervals. If the 
treatment-mediator interaction is allowed in the mediation analysis, effects 
are reported separately for the treatment and control conditions as well as 
the simple averages of these effects are displayed at the bottom of the 
summary table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mediate'
summary(object, ...)

## S3 method for class 'summary.mediate'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mediate_+3A_object">object</code></td>
<td>
<p>output from mediate or mediate_tsls function.</p>
</td></tr>
<tr><td><code id="summary.mediate_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
<tr><td><code id="summary.mediate_+3A_x">x</code></td>
<td>
<p>output from summary.mediate function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>; Luke Keele, Penn State University, 
<a href="mailto:ljk20@psu.edu">ljk20@psu.edu</a>; Kosuke Imai, Princeton University, 
<a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+mediate_tsls">mediate_tsls</a></code>,
<code><a href="#topic+plot.mediate">plot.mediate</a></code>, <code><a href="base.html#topic+summary">summary</a></code>.
</p>

<hr>
<h2 id='summary.mediate.design'>Summarizing Output from Design Based Mediation Analysis</h2><span id='topic+summary.mediate.design'></span><span id='topic+print.summary.mediate.design'></span>

<h3>Description</h3>

<p>Function to report results from design based mediation analysis. Reported 
categories differ depending on the design and assumptions used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mediate.design'
summary(object, ...)

## S3 method for class 'summary.mediate.design'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mediate.design_+3A_object">object</code></td>
<td>
<p>object of class <code>mediate.design</code>, typically output from a 
function for design-based mediation analysis (such as 
<code><a href="#topic+mediate.sed">mediate.sed</a></code>).</p>
</td></tr>
<tr><td><code id="summary.mediate.design_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
<tr><td><code id="summary.mediate.design_+3A_x">x</code></td>
<td>
<p>output from the summary function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Tingley, D. and Yamamoto, T. (2012) Experimental Designs for 
Identifying Causal Mechanisms. Journal of the Royal Statistical Society, 
Series A (Statistics in Society)
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+plot.mediate">plot.mediate</a></code>, 
<code><a href="base.html#topic+summary">summary</a></code>.
</p>

<hr>
<h2 id='summary.mediate.mer'>Summarizing Output from Mediation Analysis of Multilevel Models</h2><span id='topic+summary.mediate.mer'></span><span id='topic+print.summary.mediate.mer'></span><span id='topic+print.summary.mediate.mer.2'></span><span id='topic+print.summary.mediate.mer.3'></span>

<h3>Description</h3>

<p>Function to report results from mediation analysis of multilevel models. 
Reported categories are mediation effect, direct effect, total effect, and 
proportion of total effect mediated. All quantities reported with confidence 
intervals. Group-specific effects and confidence intervals reported based on 
the mediator or the outcome group. Group-average quantities reported as 
default.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mediate.mer'
summary(object, output = c("default", "byeffect",
  "bygroup"), ...)

## S3 method for class 'summary.mediate.mer'
print(x, ...)

## S3 method for class 'summary.mediate.mer.2'
print(x, ...)

## S3 method for class 'summary.mediate.mer.3'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mediate.mer_+3A_object">object</code></td>
<td>
<p>output from mediate function.</p>
</td></tr>
<tr><td><code id="summary.mediate.mer_+3A_output">output</code></td>
<td>
<p>group-specific effects organized by effect if output = 
&quot;byeffect&quot;; group-specific effects organized by group if output =
&quot;bygroup&quot;; group-average effects reported as default.</p>
</td></tr>
<tr><td><code id="summary.mediate.mer_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
<tr><td><code id="summary.mediate.mer_+3A_x">x</code></td>
<td>
<p>output from summary.mediate.mer function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Kentaro Hirose, Princeton University, <a href="mailto:hirose@princeton.edu">hirose@princeton.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+plot.mediate.mer">plot.mediate.mer</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# **For illustration purposes a small number of simulations are used**
## Not run: 
data(jobs)
require(lme4)

# educ: mediator group
# occp: outcome group

# Varying intercept for mediator 
model.m &lt;- glmer(job_dich ~ treat + econ_hard + (1 | educ), 
             		     family = binomial(link = "probit"), data = jobs)

# Varying intercept and slope for outcome
model.y &lt;- glmer(work1 ~ treat + job_dich + econ_hard + (1 + treat | occp), 
                family = binomial(link = "probit"), data = jobs)

# Output based on mediator group
multilevel &lt;- mediate(model.m, model.y, treat = "treat", 
                      mediator = "job_dich", sims=50, group.out="educ")

# Group-average effects  
summary(multilevel)

# Group-specific effects organized by effect
summary(multilevel, output="byeffect")

# Group-specific effects organized by group
summary(multilevel, output="bygroup")

## End(Not run)

</code></pre>

<hr>
<h2 id='summary.mediations'>Summarizing Output from Multiple Mediation Analyses</h2><span id='topic+summary.mediations'></span><span id='topic+summary.mediations.order'></span><span id='topic+print.summary.mediations'></span><span id='topic+print.summary.mediations.order'></span>

<h3>Description</h3>

<p>The 'summary.mediations' function produces a summary of results from multiple
causal analyses conducted via <code><a href="#topic+mediations">mediations</a></code>.  Output is a series
of <code><a href="#topic+summary.mediate">summary.mediate</a></code> outputs for all the 
treatment/mediator/outcome combinations used in the input 'mediations' 
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mediations'
summary(object, ...)

## S3 method for class 'summary.mediations'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mediations_+3A_object">object</code></td>
<td>
<p>output from mediations function.</p>
</td></tr>
<tr><td><code id="summary.mediations_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
<tr><td><code id="summary.mediations_+3A_x">x</code></td>
<td>
<p>output from summary.mediations function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediations">mediations</a></code>, <code><a href="#topic+summary.mediate">summary.mediate</a></code>, 
<code><a href="base.html#topic+summary">summary</a></code>.
</p>

<hr>
<h2 id='summary.medsens'>Summarizing Results from Sensitivity Analysis for Causal Mediation Effects</h2><span id='topic+summary.medsens'></span><span id='topic+print.summary.medsens'></span>

<h3>Description</h3>

<p>Functions to report results from the sensitivity analysis for causal 
mediation effects via <code><a href="#topic+medsens">medsens</a></code> in a tabular form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'medsens'
summary(object, ...)

## S3 method for class 'summary.medsens'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.medsens_+3A_object">object</code></td>
<td>
<p>output from medsens function.</p>
</td></tr>
<tr><td><code id="summary.medsens_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
<tr><td><code id="summary.medsens_+3A_x">x</code></td>
<td>
<p>output from summary.medsens function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Dustin Tingley, Harvard University, 
<a href="mailto:dtingley@gov.harvard.edu">dtingley@gov.harvard.edu</a>; Teppei Yamamoto, Massachusetts Institute
of Technology, <a href="mailto:teppei@mit.edu">teppei@mit.edu</a>; Jaquilyn Waddell-Boie, Princeton 
University, <a href="mailto:jwaddell@princeton.edu">jwaddell@princeton.edu</a>; Luke Keele, Penn State 
University, <a href="mailto:ljk20@psu.edu">ljk20@psu.edu</a>; Kosuke Imai, Princeton University, 
<a href="mailto:kimai@princeton.edu">kimai@princeton.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2011). Unpacking the 
Black Box of Causality: Learning about Causal Mechanisms from Experimental 
and Observational Studies, American Political Science Review, Vol. 105, No.
4 (November), pp. 765-789.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+medsens">medsens</a></code>, <code><a href="base.html#topic+summary">summary</a></code>.
</p>

<hr>
<h2 id='summary.multimed'>Summarizing Output from Mediation Analysis with Multiple Mechanisms</h2><span id='topic+summary.multimed'></span><span id='topic+print.summary.multimed'></span>

<h3>Description</h3>

<p>Function to report results from the <code><a href="#topic+multimed">multimed</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'multimed'
summary(object, ...)

## S3 method for class 'summary.multimed'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.multimed_+3A_object">object</code></td>
<td>
<p>object of class <code>multimed</code>, typically output from the 
<code>multimed</code> funciton.</p>
</td></tr>
<tr><td><code id="summary.multimed_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
<tr><td><code id="summary.multimed_+3A_x">x</code></td>
<td>
<p>output from the summary function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K. and Yamamoto, T. (2012) Identification and Sensitivity Analysis
for Multiple Causal Mechanisms: Revisiting Evidence from Framing
Experiments, typescript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+multimed">multimed</a></code>, <code><a href="#topic+plot.multimed">plot.multimed</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Replicates Figure 3 (right column) of Imai and Yamamoto (2012)
# Note: # of bootstrap samples set low for quick illustration

data(framing)
Xnames &lt;- c("age", "educ", "gender", "income")
res &lt;- multimed("immigr", "emo", "p_harm", "treat", Xnames, 
               data = framing, sims = 10)
summary(res)
plot(res, type = "point")
plot(res, type = c("sigma", "R2-total"), tgroup = "average")

## End(Not run)

</code></pre>

<hr>
<h2 id='test.modmed'>Significance Test for Moderated Mediation</h2><span id='topic+test.modmed'></span><span id='topic+test.modmed.default'></span><span id='topic+test.modmed.mediate'></span><span id='topic+test.modmed.mediate.order'></span><span id='topic+print.test.modmed.mediate'></span><span id='topic+print.test.modmed.mediate.order'></span>

<h3>Description</h3>

<p>Function to test whether the average causal mediation effects and direct 
effects are significantly different between two moderator strata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test.modmed(object, ...)

## S3 method for class 'mediate'
test.modmed(object, covariates.1, covariates.2,
  sims = object$sims, conf.level = object$conf.level, ...)

## S3 method for class 'test.modmed.mediate'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test.modmed_+3A_object">object</code></td>
<td>
<p>output from <code>mediate</code> function.</p>
</td></tr>
<tr><td><code id="test.modmed_+3A_...">...</code></td>
<td>
<p>additional arguments.</p>
</td></tr>
<tr><td><code id="test.modmed_+3A_covariates.1">covariates.1</code></td>
<td>
<p>first set of value(s) of covariates (moderators) included
in the mediator and outcome models. See documentation for the 
<code>covariates</code> argument for the <code><a href="#topic+mediate">mediate</a></code> function.</p>
</td></tr>
<tr><td><code id="test.modmed_+3A_covariates.2">covariates.2</code></td>
<td>
<p>second set of value(s) of covariates (moderators) 
included in the mediator and outcome models.</p>
</td></tr>
<tr><td><code id="test.modmed_+3A_sims">sims</code></td>
<td>
<p>number of simulation draws the test will be based on. Defaults to
the number used in the original mediate fit.</p>
</td></tr>
<tr><td><code id="test.modmed_+3A_conf.level">conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals for 
the effect differences. By default it is set to the value used in the 
original mediate call.</p>
</td></tr>
<tr><td><code id="test.modmed_+3A_x">x</code></td>
<td>
<p>output from <code>test.modmed</code> function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function takes the original call to <code>mediate</code> and reruns
the algorithm twice with the two sets of <code>covariates</code> values. It
assumes that the objects in the environment in which the original mediate
call was made also exist in the current environment under the same variable
names, i.e., it evaluates the updated call in the current environment.
</p>


<h3>Value</h3>

<p>When applied to a <code>mediate</code> object, <code>test.modmed</code> returns 
an object of class &quot;<code>test.modmed.mediate</code>&quot;, a list composed of 
&quot;<code>htest</code>&quot; objects. See <code><a href="stats.html#topic+t.test">t.test</a></code> for more explanations of 
<code>htest</code> objects. When applied to a <code>mediate.order</code> object, the 
function returns an object of class &quot;<code>test.modmed.mediate.order</code>&quot; 
which is a list composed of &quot;<code>htest.order</code>&quot; objects.
</p>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science, 
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>, <code><a href="#topic+test.TMint">test.TMint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# **For illustration purposes a small number of simulations are used**

data(jobs)

# Fit mediator and outcome models allowing for interaction with moderator
b.int &lt;- lm(job_seek ~ treat*age + econ_hard + sex, data=jobs)
d.int &lt;- lm(depress2 ~ treat*job_seek*age + econ_hard + sex, data=jobs)

# Initial mediate fit
fit &lt;- mediate(b.int, d.int, sims=50, treat="treat", mediator="job_seek")

# Test for significance of moderated mediation
test.modmed(fit, list(age = 20), list(age = 70), sims = 100)

</code></pre>

<hr>
<h2 id='test.TMint'>Significance Test for Treatment-Mediator Interaction in Causal Mediation 
Analysis</h2><span id='topic+test.TMint'></span><span id='topic+test.TMint.default'></span><span id='topic+test.TMint.mediate'></span><span id='topic+test.TMint.mediate.order'></span><span id='topic+print.htest.order'></span>

<h3>Description</h3>

<p>Function to test whether the average causal mediation effects and direct 
effects are significantly different between the treatment and control 
contitions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test.TMint(x, ...)

## S3 method for class 'mediate'
test.TMint(x, conf.level = x$conf.level, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test.TMint_+3A_x">x</code></td>
<td>
<p>output from <code>mediate</code> function.</p>
</td></tr>
<tr><td><code id="test.TMint_+3A_...">...</code></td>
<td>
<p>additional arguments.</p>
</td></tr>
<tr><td><code id="test.TMint_+3A_conf.level">conf.level</code></td>
<td>
<p>level of the returned two-sided confidence intervals for 
the effect differences. By default it is set to the value used in the 
original mediate call.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>test.TMint</code> returns an object of class &quot;<code>htest</code>&quot; when 
applied to a <code>mediate</code> object. See <code><a href="stats.html#topic+t.test">t.test</a></code> for more 
explanations of the contents. The function returns an object of class 
&quot;<code>htest.order</code>&quot; which has its own <code>print</code> method included in this
package.
</p>


<h3>Author(s)</h3>

<p>Teppei Yamamoto, Massachusetts Institute of Technology, 
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>.
</p>


<h3>References</h3>

<p>Tingley, D., Yamamoto, T., Hirose, K., Imai, K. and Keele, L. 
(2014). &quot;mediation: R package for Causal Mediation Analysis&quot;, Journal of 
Statistical Software, Vol. 59, No. 5, pp. 1-38.
</p>
<p>Imai, K., Keele, L. and Tingley, D. (2010) A General Approach to Causal 
Mediation Analysis, Psychological Methods, Vol. 15, No. 4 (December), pp. 
309-334.
</p>
<p>Imai, K., Keele, L. and Yamamoto, T. (2010) Identification, Inference, and 
Sensitivity Analysis for Causal Mediation Effects, Statistical Science,
Vol. 25, No. 1 (February), pp. 51-71.
</p>
<p>Imai, K., Keele, L., Tingley, D. and Yamamoto, T. (2009) &quot;Causal Mediation 
Analysis Using R&quot; in Advances in Social Science Research Using R, ed. H. D.
Vinod New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mediate">mediate</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Examples with JOBS II Field Experiment

# **For illustration purposes a small number of simulations are used**

data(jobs)

# Fit mediator and outcome models allowing for treatment-mediator interaction
b &lt;- lm(job_seek ~ treat + econ_hard + sex + age, data=jobs)
d &lt;- lm(depress2 ~ treat*job_seek + econ_hard + sex + age, data=jobs)

# Test for significance of interaction
fit &lt;- mediate(b, d, sims=50, treat="treat", mediator="job_seek")
test.TMint(fit)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
