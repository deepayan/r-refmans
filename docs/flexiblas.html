<!DOCTYPE html><html><head><title>Help for package flexiblas</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {flexiblas}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#flexiblas-package'><p><span class="pkg">flexiblas</span>: FlexiBLAS API Interface for <span class="rlang"><b>R</b></span></p></a></li>
<li><a href='#flexiblas_avail'><p>Check Availability</p></a></li>
<li><a href='#flexiblas_version'><p>Get Version</p></a></li>
<li><a href='#flexiblas-backends'><p>Handle Backends</p></a></li>
<li><a href='#flexiblas-threads'><p>Get/Set Number of Threads</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'FlexiBLAS' API Interface</td>
</tr>
<tr>
<td>Version:</td>
<td>3.4.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions to switch the 'BLAS'/'LAPACK' optimized backend
    and change the number of threads without leaving the R session, which needs
    to be linked against the 'FlexiBLAS' wrapper library
    <a href="https://www.mpi-magdeburg.mpg.de/projects/flexiblas">https://www.mpi-magdeburg.mpg.de/projects/flexiblas</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>OS_type:</td>
<td>unix</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Enchufa2/r-flexiblas">https://github.com/Enchufa2/r-flexiblas</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Enchufa2/r-flexiblas/issues">https://github.com/Enchufa2/r-flexiblas/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>tinytest</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-11 09:49:21 UTC; iucar</td>
</tr>
<tr>
<td>Author:</td>
<td>Iñaki Ucar <a href="https://orcid.org/0000-0001-6403-5550"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cph, cre],
  Martin Koehler <a href="https://orcid.org/0000-0003-2338-9904"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Iñaki Ucar &lt;iucar@fedoraproject.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-11 10:00:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='flexiblas-package'><span class="pkg">flexiblas</span>: FlexiBLAS API Interface for <span class="rlang"><b>R</b></span></h2><span id='topic+flexiblas-package'></span>

<h3>Description</h3>

<p>Provides functions to switch the BLAS/LAPACK optimized backend
and change the number of threads without leaving the R session, which needs
to be linked against the FlexiBLAS wrapper library.
</p>


<h3>Author(s)</h3>

<p>Martin Koehler, Iñaki Ucar
</p>


<h3>References</h3>

<p>Koehler M., Saak J. (2020).
&quot;FlexiBLAS - A BLAS and LAPACK wrapper library with runtime exchangeable backends.&quot;
<a href="https://doi.org/10.5281/zenodo.3909214">doi:10.5281/zenodo.3909214</a>.
</p>

<hr>
<h2 id='flexiblas_avail'>Check Availability</h2><span id='topic+flexiblas_avail'></span>

<h3>Description</h3>

<p>Check whether FlexiBLAS is available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flexiblas_avail()
</code></pre>


<h3>Value</h3>

<p>A boolean.
</p>


<h3>See Also</h3>

<p><a href="#topic+flexiblas_version">flexiblas_version</a>, <a href="#topic+flexiblas-backends">flexiblas-backends</a>, <a href="#topic+flexiblas-threads">flexiblas-threads</a>
</p>

<hr>
<h2 id='flexiblas_version'>Get Version</h2><span id='topic+flexiblas_version'></span>

<h3>Description</h3>

<p>Get current version of FlexiBLAS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flexiblas_version()
</code></pre>


<h3>Value</h3>

<p>A <a href="base.html#topic+package_version">package_version</a> object.
</p>


<h3>See Also</h3>

<p><a href="#topic+flexiblas_avail">flexiblas_avail</a>, <a href="#topic+flexiblas-backends">flexiblas-backends</a>, <a href="#topic+flexiblas-threads">flexiblas-threads</a>
</p>

<hr>
<h2 id='flexiblas-backends'>Handle Backends</h2><span id='topic+flexiblas-backends'></span><span id='topic+flexiblas_current_backend'></span><span id='topic+flexiblas_list'></span><span id='topic+flexiblas_list_loaded'></span><span id='topic+flexiblas_load_backend'></span><span id='topic+flexiblas_switch'></span>

<h3>Description</h3>

<p>Get current backend, list available ones, load and switch between backends.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flexiblas_current_backend()

flexiblas_list()

flexiblas_list_loaded()

flexiblas_load_backend(name)

flexiblas_switch(n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flexiblas-backends_+3A_name">name</code></td>
<td>
<p>character vector of backend names or paths (case insensitive).</p>
</td></tr>
<tr><td><code id="flexiblas-backends_+3A_n">n</code></td>
<td>
<p>loaded backend index.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>flexiblas_current_backend</code> and <code style="white-space: pre;">&#8288;flexiblas_list*&#8288;</code> return a character
vector of backend names or paths.
</p>
<p><code>flexiblas_load_backend</code> and <code>flexiblas_switch</code> return the indices of
the loaded backends if the operation was successful, or fail otherwise.
</p>


<h3>See Also</h3>

<p><a href="#topic+flexiblas_avail">flexiblas_avail</a>, <a href="#topic+flexiblas_version">flexiblas_version</a>, <a href="#topic+flexiblas-threads">flexiblas-threads</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
n &lt;- 2000
runs &lt;- 10
ignore &lt;- "__FALLBACK__"

A &lt;- matrix(runif(n*n), nrow=n)
B &lt;- matrix(runif(n*n), nrow=n)

# load backends
backends &lt;- setdiff(flexiblas_list(), ignore)
idx &lt;- flexiblas_load_backend(backends)

# benchmark
timings &lt;- sapply(idx, function(i) {
  flexiblas_switch(i)

  # warm-up
  C &lt;- A[1:100, 1:100] %*% B[1:100, 1:100]

  unname(system.time({
    for (j in seq_len(runs))
      C &lt;- A %*% B
  })[3])
})

if (length(timings)) {
  results &lt;- data.frame(
    backend = backends,
    `timing [s]` = timings,
    `performance [GFlops]` = (2 * (n / 1000)^3) / timings,
    check.names = FALSE)

  results[order(results$performance),]
}

</code></pre>

<hr>
<h2 id='flexiblas-threads'>Get/Set Number of Threads</h2><span id='topic+flexiblas-threads'></span><span id='topic+flexiblas_get_num_threads'></span><span id='topic+flexiblas_set_num_threads'></span>

<h3>Description</h3>

<p>Get or set the number of threads for the BLAS backend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flexiblas_get_num_threads()

flexiblas_set_num_threads(n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flexiblas-threads_+3A_n">n</code></td>
<td>
<p>number of threads.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>flexiblas_get_num_threads</code> returns the number of threads.
</p>
<p><code>flexiblas_set_num_threads</code> returns nothing.
</p>


<h3>See Also</h3>

<p><a href="#topic+flexiblas_avail">flexiblas_avail</a>, <a href="#topic+flexiblas_version">flexiblas_version</a>, <a href="#topic+flexiblas-backends">flexiblas-backends</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
max_threads &lt;- 4
n &lt;- 2000
runs &lt;- 10

A &lt;- matrix(runif(n*n), nrow=n)
B &lt;- matrix(runif(n*n), nrow=n)

for (i in seq_len(max_threads)) {
  message("Set number of threads to: ", i)
  flexiblas_set_num_threads(i)

  print(system.time({
    for (j in seq_len(runs))
      C &lt;- A %*% B
  }))
}


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
