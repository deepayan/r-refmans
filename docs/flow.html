<!DOCTYPE html><html><head><title>Help for package flow</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {flow}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#flow_debug'><p>Debug With Flow Diagrams</p></a></li>
<li><a href='#flow_debugonce'><p>Deprecated</p></a></li>
<li><a href='#flow_doc'><p>Draw Flow Diagrams for an Entire Package</p></a></li>
<li><a href='#flow_draw'><p>Draw Diagram From Debugger</p></a></li>
<li><a href='#flow_embed'><p>Embed chart in roxygen doc</p></a></li>
<li><a href='#flow_test'><p>Build Report From Tests</p></a></li>
<li><a href='#flow_view'><p>View function as flow chart</p></a></li>
<li><a href='#flow_view_deps'><p>Show dependency graph of a function</p></a></li>
<li><a href='#flow_view_shiny'><p>Visualize a shiny app's dependency graph</p></a></li>
<li><a href='#flow_view_source_calls'><p>Draw diagram of source dependencies</p></a></li>
<li><a href='#flow_view_uses'><p>Show graph of callers of a function</p></a></li>
<li><a href='#flow_view_vars'><p>Draw the dependencies of variables in a function</p></a></li>
<li><a href='#flow-package'><p>flow: View and Browse Code Using Flow Diagrams</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>View and Browse Code Using Flow Diagrams</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Visualize as flow diagrams the logic of functions, expressions or 
  scripts in a static way or when running a call, visualize the dependencies between
  functions or between modules in a shiny app, and more.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/moodymudskipper/flow">https://github.com/moodymudskipper/flow</a>,
<a href="https://moodymudskipper.github.io/flow/">https://moodymudskipper.github.io/flow/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/moodymudskipper/flow/issues">https://github.com/moodymudskipper/flow/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>nomnoml, utils, htmlwidgets, rstudioapi, webshot, styler,
methods, here, lifecycle</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), covr, knitr, rmarkdown, esquisse,
tidyselect, purrr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-06 11:47:40 UTC; Antoine</td>
</tr>
<tr>
<td>Author:</td>
<td>Antoine Fabri [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Antoine Fabri &lt;antoine.fabri@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-06 12:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='flow_debug'>Debug With Flow Diagrams</h2><span id='topic+flow_debug'></span><span id='topic+flow_undebug'></span>

<h3>Description</h3>

<p>These functions are named after the base functions <code>debug()</code> and <code>undebug()</code>.
<code>flow_debug()</code> will call <code>flow_run()</code>, with the same additional arguments, on
all the following calls to <code>f()</code> until <code>flow_undebug()</code> is called.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_debug(
  f,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  swap = TRUE,
  out = NULL,
  browse = FALSE
)

flow_undebug(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_debug_+3A_f">f</code></td>
<td>
<p>function to debug</p>
</td></tr>
<tr><td><code id="flow_debug_+3A_prefix">prefix</code></td>
<td>
<p>prefix to use for special comments in our code used as block headers,
must start with <code>"#"</code>, several prefixes can be provided</p>
</td></tr>
<tr><td><code id="flow_debug_+3A_code">code</code></td>
<td>
<p>Whether to display the code in code blocks or only the header,
to be more compact, if <code>NA</code>, the code will be displayed only if no header
is defined by special comments</p>
</td></tr>
<tr><td><code id="flow_debug_+3A_narrow">narrow</code></td>
<td>
<p><code>TRUE</code> makes sure the diagram stays centered on one column
(they'll be longer but won't shift to the right)</p>
</td></tr>
<tr><td><code id="flow_debug_+3A_truncate">truncate</code></td>
<td>
<p>maximum number of characters to be printed per line</p>
</td></tr>
<tr><td><code id="flow_debug_+3A_swap">swap</code></td>
<td>
<p>whether to change <code>var &lt;- if(cond) expr</code> into
<code>if(cond) var &lt;- expr</code> so the diagram displays better</p>
</td></tr>
<tr><td><code id="flow_debug_+3A_out">out</code></td>
<td>
<p>a path to save the diagram to.
Special values &quot;html&quot;, &quot;htm&quot;, &quot;png&quot;, &quot;pdf&quot;, &quot;jpg&quot; and &quot;jpeg&quot; can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td></tr>
<tr><td><code id="flow_debug_+3A_browse">browse</code></td>
<td>
<p>whether to debug step by step (block by block),
can also be a vector of block ids, in this case <code>browser()</code> calls will be
inserted at the start of these blocks</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, unlike <code>debug()</code>, <code>flow_debug()</code> doesn't trigger a debugger but
only draw diagrams, this is consistent with <code>flow_run()</code>'s defaults. To browse
through the code, use the <code>browse</code> argument.
</p>


<h3>Value</h3>

<p>These functions return <code>NULL</code> invisibly (called for side effects)
</p>

<hr>
<h2 id='flow_debugonce'>Deprecated</h2><span id='topic+flow_debugonce'></span>

<h3>Description</h3>

<p>Deprecated
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_debugonce(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_debugonce_+3A_...">...</code></td>
<td>
<p>...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Fails with deprecation error
</p>

<hr>
<h2 id='flow_doc'>Draw Flow Diagrams for an Entire Package</h2><span id='topic+flow_doc'></span>

<h3>Description</h3>

<p>Draw Flow Diagrams for an Entire Package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_doc(
  pkg = NULL,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  swap = TRUE,
  out = NULL,
  engine = c("nomnoml", "plantuml")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_doc_+3A_pkg">pkg</code></td>
<td>
<p>package name as a string, or <code>NULL</code> to signify currently developed package.</p>
</td></tr>
<tr><td><code id="flow_doc_+3A_prefix">prefix</code></td>
<td>
<p>prefix to use for special comments in our code used as block headers,
must start with <code>"#"</code>, several prefixes can be provided</p>
</td></tr>
<tr><td><code id="flow_doc_+3A_code">code</code></td>
<td>
<p>Whether to display the code in code blocks or only the header,
to be more compact, if <code>NA</code>, the code will be displayed only if no header
is defined by special comments</p>
</td></tr>
<tr><td><code id="flow_doc_+3A_narrow">narrow</code></td>
<td>
<p><code>TRUE</code> makes sure the diagram stays centered on one column
(they'll be longer but won't shift to the right)</p>
</td></tr>
<tr><td><code id="flow_doc_+3A_truncate">truncate</code></td>
<td>
<p>maximum number of characters to be printed per line</p>
</td></tr>
<tr><td><code id="flow_doc_+3A_swap">swap</code></td>
<td>
<p>whether to change <code>var &lt;- if(cond) expr</code> into
<code>if(cond) var &lt;- expr</code> so the diagram displays better</p>
</td></tr>
<tr><td><code id="flow_doc_+3A_out">out</code></td>
<td>
<p>path to html output, if left <code>NULL</code> a temp <em>html</em>
file will be created and opened</p>
</td></tr>
<tr><td><code id="flow_doc_+3A_engine">engine</code></td>
<td>
<p>either <code>"nomnoml"</code> (default) or <code>"plantuml"</code> (experimental, brittle
mostly for reasons out of our control), if the latter, arguments <code>prefix</code>,
<code>narrow</code>, and <code>code</code> are ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>NULL</code> invisibly (called for side effects).
</p>

<hr>
<h2 id='flow_draw'>Draw Diagram From Debugger</h2><span id='topic+flow_draw'></span><span id='topic+d'></span>

<h3>Description</h3>

<p><code>flow_draw()</code> should only be used in the debugger triggered by a call
to <code>flow_run()</code>, or following a call to <code>flow_debug()</code>.
<code>d</code> is an active binding to <code>flow_draw()</code>, it means you can just type <code>d</code>
(without parentheses) instead of <code>flow_draw()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_draw()

d
</code></pre>


<h3>Details</h3>

<p><code>d</code> was designed to look like the other shortcuts detailed in <code>?browser</code>,
such as <code>f</code>, <code>c</code> etc... It differs however in that it can be overridden.
For instance if the function uses a variable <code>d</code> or that a parent environment
contains a variable <code>d</code>, <code>flow::d</code> won't be found. In that case you will
have to use <code>flow_draw()</code>.
</p>
<p>If <code>d</code> or <code>flow_draw()</code> are called outside of the debugger they will return
<code>NULL</code> silently.
</p>


<h3>Value</h3>

<p>Returns <code>NULL</code> invisibly (called for side effects)
</p>

<hr>
<h2 id='flow_embed'>Embed chart in roxygen doc</h2><span id='topic+flow_embed'></span>

<h3>Description</h3>

<p>Include a call <code>`r_flow::flow_embed(...)`</code> in your doc and a diagram will be
included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_embed(call, name, width = 1, alt = name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_embed_+3A_call">call</code></td>
<td>
<p>A call to a flow function, prefixed with <code style="white-space: pre;">&#8288;flow::&#8288;</code></p>
</td></tr>
<tr><td><code id="flow_embed_+3A_name">name</code></td>
<td>
<p>A name for the png file that will be created under 'man/figures',
without extension.</p>
</td></tr>
<tr><td><code id="flow_embed_+3A_width">width</code></td>
<td>
<p>width, relative if &lt; 1, pixels otherwise</p>
</td></tr>
<tr><td><code id="flow_embed_+3A_alt">alt</code></td>
<td>
<p>alt text</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> As with images in general the image might not be visible when viewing
temp doc with the devtools workflow.
</p>
</li>
<li><p> Don't forget to add flow to Suggests in your DESCRIPTION file.
</p>
</li>
<li><p> We don't monitor files created under 'man/figures', so if you remove a
diagram from the doc make sure to also remove it from the folder.
</p>
</li>
<li><p> We also don't overwrite created files, so we don't slow down the documentation
process, so if you want to print a different diagram for the same name remove
the file first.
</p>
</li></ul>



<h3>Value</h3>

<p>Called for side effects, should only be used in roxygen doc
</p>

<hr>
<h2 id='flow_test'>Build Report From Tests</h2><span id='topic+flow_test'></span>

<h3>Description</h3>

<p>Build a markdown report from test scripts, showing the paths taken in tested
functions, and where they fail if they do.
See also the vignette <em>&quot;Build reports to document functions and unit tests&quot;</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_test(
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  swap = TRUE,
  out = NULL,
  failed_only = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_test_+3A_prefix">prefix</code></td>
<td>
<p>prefix to use for special comments in our code used as block headers,
must start with <code>"#"</code>, several prefixes can be provided</p>
</td></tr>
<tr><td><code id="flow_test_+3A_code">code</code></td>
<td>
<p>Whether to display the code in code blocks or only the header,
to be more compact, if <code>NA</code>, the code will be displayed only if no header
is defined by special comments</p>
</td></tr>
<tr><td><code id="flow_test_+3A_narrow">narrow</code></td>
<td>
<p><code>TRUE</code> makes sure the diagram stays centered on one column
(they'll be longer but won't shift to the right)</p>
</td></tr>
<tr><td><code id="flow_test_+3A_truncate">truncate</code></td>
<td>
<p>maximum number of characters to be printed per line</p>
</td></tr>
<tr><td><code id="flow_test_+3A_swap">swap</code></td>
<td>
<p>whether to change <code>var &lt;- if(cond) expr</code> into
<code>if(cond) var &lt;- expr</code> so the diagram displays better</p>
</td></tr>
<tr><td><code id="flow_test_+3A_out">out</code></td>
<td>
<p>path to html output, if left <code>NULL</code> a temp <em>html</em>
file will be created and opened.</p>
</td></tr>
<tr><td><code id="flow_test_+3A_failed_only">failed_only</code></td>
<td>
<p>whether to restrict the report to failing tests only</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>NULL</code> invisibly (called for side effects)
</p>

<hr>
<h2 id='flow_view'>View function as flow chart</h2><span id='topic+flow_view'></span><span id='topic+flow_run'></span><span id='topic+flow_compare_runs'></span>

<h3>Description</h3>


<ul>
<li> <p><code>flow_view()</code> shows the code of a function as a flow diagram
</p>
</li>
<li> <p><code>flow_run()</code> runs a call and draws the logical path taken by the code.
</p>
</li>
<li> <p><code>flow_compare_runs()</code> shows on the same diagrams 2 calls to the same functions,
code blocks that are only touched by the <code>ref</code> call are colored green, code blocks
that are only touched by the <code>x</code> call are colored orange.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>flow_view(
  x,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  nested_fun = NULL,
  swap = TRUE,
  out = NULL,
  engine = c("nomnoml", "plantuml")
)

flow_run(
  x,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  swap = TRUE,
  out = NULL,
  browse = FALSE
)

flow_compare_runs(
  x,
  ref,
  prefix = NULL,
  code = TRUE,
  narrow = FALSE,
  truncate = NULL,
  swap = TRUE,
  out = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_view_+3A_x">x</code></td>
<td>
<p>a call, a function, or a path to a script</p>
</td></tr>
<tr><td><code id="flow_view_+3A_prefix">prefix</code></td>
<td>
<p>prefix to use for special comments in our code used as block headers,
must start with <code>"#"</code>, several prefixes can be provided</p>
</td></tr>
<tr><td><code id="flow_view_+3A_code">code</code></td>
<td>
<p>Whether to display the code in code blocks or only the header,
to be more compact, if <code>NA</code>, the code will be displayed only if no header
is defined by special comments</p>
</td></tr>
<tr><td><code id="flow_view_+3A_narrow">narrow</code></td>
<td>
<p><code>TRUE</code> makes sure the diagram stays centered on one column
(they'll be longer but won't shift to the right)</p>
</td></tr>
<tr><td><code id="flow_view_+3A_truncate">truncate</code></td>
<td>
<p>maximum number of characters to be printed per line</p>
</td></tr>
<tr><td><code id="flow_view_+3A_nested_fun">nested_fun</code></td>
<td>
<p>if not <code>NULL</code>, the index or name of the function definition found in
x that we wish to inspect</p>
</td></tr>
<tr><td><code id="flow_view_+3A_swap">swap</code></td>
<td>
<p>whether to change <code>var &lt;- if(cond) expr</code> into
<code>if(cond) var &lt;- expr</code> so the diagram displays better</p>
</td></tr>
<tr><td><code id="flow_view_+3A_out">out</code></td>
<td>
<p>a path to save the diagram to.
Special values &quot;html&quot;, &quot;htm&quot;, &quot;png&quot;, &quot;pdf&quot;, &quot;jpg&quot; and &quot;jpeg&quot; can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td></tr>
<tr><td><code id="flow_view_+3A_engine">engine</code></td>
<td>
<p>either <code>"nomnoml"</code> (default) or <code>"plantuml"</code> (experimental, brittle
mostly for reasons out of our control), if the latter, arguments <code>prefix</code>,
<code>narrow</code>, and <code>code</code> are ignored</p>
</td></tr>
<tr><td><code id="flow_view_+3A_browse">browse</code></td>
<td>
<p>whether to debug step by step (block by block),
can also be a vector of block ids, in this case <code>browser()</code> calls will be
inserted at the start of these blocks</p>
</td></tr>
<tr><td><code id="flow_view_+3A_ref">ref</code></td>
<td>
<p>the reference expression for <code>flow_compare_runs()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>On some systems the output might sometimes display the box character when using
the nomnoml engine, this is due to the system not recognizing the Braille
character <code style="white-space: pre;">&#8288;\u2800&#8288;</code>. This character is used to circumvent a shortcoming of the
nomnoml library:
lines can't start with a standard space and multiple subsequent spaces might be collapsed.
To choose another character, set the option <code>flow.indenter</code>, for instance :
<code>options(flow.indenter = "\u00b7")</code>. Setting the <code>options(flow.svg = FALSE)</code>
might also help.
</p>


<h3>Value</h3>

<p>depending on <code>out</code> :
</p>

<ul>
<li> <p><code>NULL</code> (default) : <code>flow_view()</code> and <code>flow_compare_runs()</code> return a <code>"flow_diagram"</code>
object, containing the diagram, the diagram's code and the data used to build
the code. <code>flow_run()</code> returns the output of the call.
</p>
</li>
<li><p> An output path or a file extension : the path where the file is saved
</p>
</li>
<li> <p><code>"data"</code>:  a list of 2 data frames &quot;nodes&quot; and &quot;edges&quot;
</p>
</li>
<li> <p><code>"code"</code>: A character vector of class &quot;flow_code&quot;
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>flow_view(rle)
flow_run(rle(c(1, 2, 2, 3)))
flow_compare_runs(rle(NULL), rle(c(1, 2, 2, 3)))
</code></pre>

<hr>
<h2 id='flow_view_deps'>Show dependency graph of a function</h2><span id='topic+flow_view_deps'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_view_deps(
  fun,
  max_depth = Inf,
  trim = NULL,
  promote = NULL,
  demote = NULL,
  hide = NULL,
  show_imports = c("functions", "packages", "none"),
  out = NULL,
  lines = TRUE,
  include_formals = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_view_deps_+3A_fun">fun</code></td>
<td>
<p>A function, can be of the form <code>fun</code>, <code>pkg::fun</code>, <code>pkg:::fun</code>,
if in the form <code>fun</code>, the binding should be located in a package namespace
or the global environment. It can also be a named list of functions, such as
one you'd create with <code>dplyr::lst()</code>, for instance <code>lst(fun1, pkg::fun2)</code>.</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_max_depth">max_depth</code></td>
<td>
<p>An integer, the maximum depth to display</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_trim">trim</code></td>
<td>
<p>A vector or list of function names where the recursion will stop</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_promote">promote</code></td>
<td>
<p>A vector or list of external functions to show as internal functions</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_demote">demote</code></td>
<td>
<p>A vector or list of internal functions to show as external functions</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_hide">hide</code></td>
<td>
<p>A vector or list of internal functions to completely remove from the chart</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_show_imports">show_imports</code></td>
<td>
<p>Whether to show imported &quot;functions&quot;, only &quot;packages&quot;, or &quot;none&quot;</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_out">out</code></td>
<td>
<p>a path to save the diagram to.
Special values &quot;html&quot;, &quot;htm&quot;, &quot;png&quot;, &quot;pdf&quot;, &quot;jpg&quot; and &quot;jpeg&quot; can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_lines">lines</code></td>
<td>
<p>Whether to show the number of lines of code next to the function name</p>
</td></tr>
<tr><td><code id="flow_view_deps_+3A_include_formals">include_formals</code></td>
<td>
<p>Whether to fetch dependencies in the default values of the
function's arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Exported objects are shown in blue, unexported objects are shown in yellow.
</p>
<p>Regular expressions can be used in <code>trim</code>, <code>promote</code>, <code>demote</code> and <code>hide</code>,
they will be used on function names in the form <code>pkg::fun</code> or <code>pkg:::fun</code>
where <code>pkg</code> can be any package mentioned in these arguments, the namespace
of the explored function, or any of the direct dependencies of the package.
These arguments must be named, using the name &quot;pattern&quot;. See examples below.
</p>


<h3>Value</h3>

<p><code>flow_view_deps()</code> returns a <code>"flow_diagram"</code> object by default, and the output path invisibly if <code>out</code> is not
<code>NULL</code> (called for side effects).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>flow_view_deps(here::i_am)
flow_view_deps(here::i_am, demote = "format_dr_here")
flow_view_deps(here::i_am, trim = "format_dr_here")
flow_view_deps(here::i_am, hide = "format_dr_here")
flow_view_deps(here::i_am, promote = "rprojroot::get_root_desc")
flow_view_deps(here::i_am, promote = c(pattern = ".*::g"))
flow_view_deps(here::i_am, promote = c(pattern = "rprojroot::.*"))
flow_view_deps(here::i_am, hide = c(pattern = "here:::s"))
</code></pre>

<hr>
<h2 id='flow_view_shiny'>Visualize a shiny app's dependency graph</h2><span id='topic+flow_view_shiny'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
This function displays a shiny app's module structure, assuming it is built
on top of module functions named a certain way (adjustable through the <code>pattern</code> argument) and
calling each other. If you call for instance <code>flow_view_shiny()</code> on a function that runs the app and
uses both the main server and ui functions, you'll display the full graph of server and ui modules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_view_shiny(
  fun,
  max_depth = Inf,
  trim = NULL,
  promote = NULL,
  demote = NULL,
  hide = NULL,
  show_imports = c("functions", "packages", "none"),
  out = NULL,
  lines = TRUE,
  pattern = "(_ui)|(_server)|(Ui)|(Server)|(UI)|(SERVER)"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_view_shiny_+3A_fun">fun</code></td>
<td>
<p>The function that runs the app</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_max_depth">max_depth</code></td>
<td>
<p>An integer, the maximum depth to display</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_trim">trim</code></td>
<td>
<p>A vector or list of function names where the recursion will stop</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_promote">promote</code></td>
<td>
<p>A vector or list of external functions to show as internal functions</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_demote">demote</code></td>
<td>
<p>A vector or list of internal functions to show as external functions</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_hide">hide</code></td>
<td>
<p>A vector or list of internal functions to completely remove from the chart</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_show_imports">show_imports</code></td>
<td>
<p>Whether to show imported &quot;functions&quot;, only &quot;packages&quot;, or &quot;none&quot;</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_out">out</code></td>
<td>
<p>a path to save the diagram to.
Special values &quot;html&quot;, &quot;htm&quot;, &quot;png&quot;, &quot;pdf&quot;, &quot;jpg&quot; and &quot;jpeg&quot; can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_lines">lines</code></td>
<td>
<p>Whether to show the number of lines of code next to the function name</p>
</td></tr>
<tr><td><code id="flow_view_shiny_+3A_pattern">pattern</code></td>
<td>
<p>A regular expression used to detect ui and server functions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is  wrapper around <code>flow_view_deps()</code> which demotes every object that is not
a server function, a ui function or a function calling either. What is or isn't considered as a
server or ui function depends on a regular expression provided through the <code>pattern</code>
argument. For a more general way of displaying all dependencies (not focused on modules),
use <code>flow_view_deps()</code>.
</p>


<h3>Value</h3>

<p>A flow diagram object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("esquisse", quietly = TRUE)) {
  flow_view_shiny(esquisse::esquisser, show_imports = "none")
}
</code></pre>

<hr>
<h2 id='flow_view_source_calls'>Draw diagram of source dependencies</h2><span id='topic+flow_view_source_calls'></span>

<h3>Description</h3>

<p>Assuming a project where files source each other, draw their dependency graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_view_source_calls(
  paths = ".",
  recursive = TRUE,
  basename = TRUE,
  extension = FALSE,
  smart = TRUE,
  out = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_view_source_calls_+3A_paths">paths</code></td>
<td>
<p>Paths to scripts or folders containing scripts
By default explores the working directory.</p>
</td></tr>
<tr><td><code id="flow_view_source_calls_+3A_recursive">recursive</code></td>
<td>
<p>Passed to <code>list.files()</code> when <code>paths</code> contains directories</p>
</td></tr>
<tr><td><code id="flow_view_source_calls_+3A_basename">basename</code></td>
<td>
<p>Whether to display only the base name of the script</p>
</td></tr>
<tr><td><code id="flow_view_source_calls_+3A_extension">extension</code></td>
<td>
<p>Whether to display the extension</p>
</td></tr>
<tr><td><code id="flow_view_source_calls_+3A_smart">smart</code></td>
<td>
<p>Whether to parse complex source calls for strings that look like script and
match those to files found in <code>paths</code></p>
</td></tr>
<tr><td><code id="flow_view_source_calls_+3A_out">out</code></td>
<td>
<p>a path to save the diagram to.
Special values &quot;html&quot;, &quot;htm&quot;, &quot;png&quot;, &quot;pdf&quot;, &quot;jpg&quot; and &quot;jpeg&quot; can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This evaluates the <code>file</code> argument of <code>source</code> in the global environment,
when this fails, as it might with constructs like <code>for (file in files) source(file)</code>
the unevaluated argument is printed instead between backticks. Since this messes
up the relationships in the graph, an warning is thus issued. In a case like <code style="white-space: pre;">&#8288;source(file.path(my_dir, "foo.R")&#8288;</code>
defining <code>my_dir</code> will be enough to solve the issue.
In the latter case, if <code>smart</code> is <code>TRUE</code>, the function will check in all the paths in scope
if any script is named &quot;foo.R&quot; and will consider it if a single fitting candidate is found.
</p>


<h3>Value</h3>

<p><code>flow_view_source_calls()</code> returns a <code>"flow_diagram"</code> object by default, and the output path invisibly if <code>out</code> is not
<code>NULL</code> (called for side effects). <code>flow_run()</code> returns the output of the wrapped call.
</p>

<hr>
<h2 id='flow_view_uses'>Show graph of callers of a function</h2><span id='topic+flow_view_uses'></span>

<h3>Description</h3>

<p>Experimental function that displays for a given object or function all functions
that call it directly or indirectly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_view_uses(x, pkg = NULL, out = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_view_uses_+3A_x">x</code></td>
<td>
<p>An object</p>
</td></tr>
<tr><td><code id="flow_view_uses_+3A_pkg">pkg</code></td>
<td>
<p>A package or environment to fetch callers from, by default <code>fun</code>'s environment</p>
</td></tr>
<tr><td><code id="flow_view_uses_+3A_out">out</code></td>
<td>
<p>a path to save the diagram to.
Special values &quot;html&quot;, &quot;htm&quot;, &quot;png&quot;, &quot;pdf&quot;, &quot;jpg&quot; and &quot;jpeg&quot; can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function is not very robust yet, but already useful for many usecases.
</p>


<h3>Value</h3>

<p><code>flow_view_uses()</code> returns a <code>"flow_diagram"</code> object by default, and the output path invisibly if <code>out</code> is not
<code>NULL</code> (called for side effects).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>flow_view_uses(flow_run)
</code></pre>

<hr>
<h2 id='flow_view_vars'>Draw the dependencies of variables in a function</h2><span id='topic+flow_view_vars'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This draws the dependencies between variables. This function
is useful to detect dead code and variable clusters. By default the variable
is shown a new time when it's overwritten or modified, this can be changed by
setting <code>expand</code> to <code>FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow_view_vars(
  x,
  expand = TRUE,
  refactor = c("refactored", "original"),
  out = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow_view_vars_+3A_x">x</code></td>
<td>
<p>The function, script or expression to draw</p>
</td></tr>
<tr><td><code id="flow_view_vars_+3A_expand">expand</code></td>
<td>
<p>A boolean, if <code>FALSE</code> a variable name is only shown once, else
(the default) it's repeated and suffixed with a number of <code>*</code></p>
</td></tr>
<tr><td><code id="flow_view_vars_+3A_refactor">refactor</code></td>
<td>
<p>If using 'refactor' package, whether to consider original or refactored code</p>
</td></tr>
<tr><td><code id="flow_view_vars_+3A_out">out</code></td>
<td>
<p>a path to save the diagram to.
Special values &quot;html&quot;, &quot;htm&quot;, &quot;png&quot;, &quot;pdf&quot;, &quot;jpg&quot; and &quot;jpeg&quot; can be used to
export the object to a temp file of the relevant format and open it,
if a regular path is used the format will be guessed from the extension.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Colors and lines are to be understood as follows:
</p>

<ul>
<li><p> The function is blue
</p>
</li>
<li><p> The arguments are green
</p>
</li>
<li><p> The variables starting as constants are yellow
</p>
</li>
<li><p> The dead code or pure side effect branches are orange and dashed
</p>
</li>
<li><p> dashed lines represent how variables are undirectly impacted by control flow conditions,
for instance the expression <code>if(z == 1) x &lt;- y</code> would give you a full arrow
from <code>y</code> to <code>x</code> and a dashed arrow from <code>z</code> to <code>x</code>
</p>
</li></ul>

<p><code>expand = TRUE</code> gives a sense of the chronology, and keep separate the
unrelated uses of temp variables. <code>expand = FALSE</code> is more compact and shows
you directly what variables might impact a given variable, and what variables
it impacts.
</p>
<p>This function will work best if the function doesn't draw from or assign to other
environments and doesn't use <code>assign()</code> or <code>attach()</code>. The output might
be polluted by variable names found in some lazily evaluated function arguments.
We ignore variable names found in calls to <code>quote()</code> and <code>~</code> as well as
nested function definitions, but complete robustness is probably impossible.
</p>
<p>The diagram assumes that for / while / repeat loops were at least run once,
if a value is modified in a branch of an if call (or both branches) and
<code>expand</code> is <code>TRUE</code>, the modified variable(s) will point to a new one at the
end of the <code>ìf</code> call.
</p>


<h3>Value</h3>

<p><code>flow_vars()</code> returns a <code>"flow_diagram"</code> object by default, and the output path invisibly if <code>out</code> is not
<code>NULL</code> (called for side effects).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>flow_view_vars(ave)
</code></pre>

<hr>
<h2 id='flow-package'>flow: View and Browse Code Using Flow Diagrams</h2><span id='topic+flow'></span><span id='topic+flow-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Visualize as flow diagrams the logic of functions, expressions or scripts in a static way or when running a call, visualize the dependencies between functions or between modules in a shiny app, and more.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Antoine Fabri <a href="mailto:antoine.fabri@gmail.com">antoine.fabri@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/moodymudskipper/flow">https://github.com/moodymudskipper/flow</a>
</p>
</li>
<li> <p><a href="https://moodymudskipper.github.io/flow/">https://moodymudskipper.github.io/flow/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/moodymudskipper/flow/issues">https://github.com/moodymudskipper/flow/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
