<!DOCTYPE html><html><head><title>Help for package Rraven</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Rraven}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#exp_empty_sels'><p>Export a 'Raven' selection for all sound files in a folder</p></a></li>
<li><a href='#exp_est'><p>Export wave objects of extended selection tables as sound files</p></a></li>
<li><a href='#exp_raven'><p>Export 'Raven' selections</p></a></li>
<li><a href='#extract_ts'><p>Extract time series parameters from data imported from 'Raven'</p></a></li>
<li><a href='#fix_path'><p>Modify sound file path in Raven's selection tables</p></a></li>
<li><a href='#imp_corr_mat'><p>Import 'Raven' batch correlator output</p></a></li>
<li><a href='#imp_raven'><p>Import 'Raven' selections</p></a></li>
<li><a href='#imp_syrinx'><p>Import 'Syrinx' selections</p></a></li>
<li><a href='#match_wav_case'><p>Fix the extension case of sound files</p></a></li>
<li><a href='#raven_batch_detec'><p>Run 'Raven' batch detector</p></a></li>
<li><a href='#relabel_colms'><p>Relabel columns to match the selection table format</p></a></li>
<li><a href='#run_raven'><p>Open sound files in 'Raven' sound analysis software</p></a></li>
<li><a href='#selection_files'><p>A list of 'Raven' selection tables.</p></a></li>
<li><a href='#to_sound_selection'><p>Convert Raven's selection files into sound selection files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Connecting R and 'Raven' Sound Analysis Software</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.13</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-04-20</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marcelo Araya-Salas &lt;marcelo.araya@ucr.ac.cr&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A tool to exchange data between R and 'Raven' sound analysis software (Cornell Lab of Ornithology). Functions work on data formats compatible with the R package 'warbleR'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>pbapply, warbleR, utils, stats, seewave, tuneR, NatureSounds</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.1)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/maRce10/Rraven">https://github.com/maRce10/Rraven</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/maRce10/Rraven/issues">https://github.com/maRce10/Rraven/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, vegan, dplyr, kableExtra, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-04-21 04:12:55 UTC; m</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-04-21 06:10:06 UTC</td>
</tr>
<tr>
<td>Author:</td>
<td>Marcelo Araya-Salas
    <a href="https://orcid.org/0000-0003-3594-619X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
</table>
<hr>
<h2 id='exp_empty_sels'>Export a 'Raven' selection for all sound files in a folder</h2><span id='topic+exp_empty_sels'></span>

<h3>Description</h3>

<p><code>exp_empty_sels</code> exports a 'Raven' selection data in .txt format that includes empty selections for all sound files in a folder.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exp_empty_sels(path = NULL, file.name = NULL, sound.files = NULL, pb = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exp_empty_sels_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for sound files.
If not provided (default) the function will use the current working directory.</p>
</td></tr>
<tr><td><code id="exp_empty_sels_+3A_file.name">file.name</code></td>
<td>
<p>Name of the output .txt file. If <code>NULL</code> then the folder name is used instead.</p>
</td></tr>
<tr><td><code id="exp_empty_sels_+3A_sound.files">sound.files</code></td>
<td>
<p>character vector indicating the sound files that will be included. If <code>NULL</code> (default) then all sound files in the working directory (or 'path') will be included.</p>
</td></tr>
<tr><td><code id="exp_empty_sels_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function saves a selection file in '.txt' format (that can be 
directly opened in Raven) that will display all sound files in the provided
directory (argument 'path'). Useful to simplify the making of selections from several sound files that need to be displayed simultaneously (e.g. several recordings from the same individual). The selection file is saved in the provided directory ('path').
</p>


<h3>Value</h3>

<p>The function saves a selection table in '.txt' format that can be 
directly opened in Raven.
No objects are returned in the R environment.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exp_raven">exp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load data
library(NatureSounds)
library(warbleR)
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", "lbh_selec_table"))

## Export a single selection table including multiple files
#save sound files 
tuneR::writeWave(Phae.long1, file.path(tempdir(), 
"Phae.long1.wav"), extensible = FALSE) 
tuneR::writeWave(Phae.long2, file.path(tempdir(), 
"Phae.long2.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long3, file.path(tempdir(), 
"Phae.long3.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long4, file.path(tempdir(), 
"Phae.long4.wav"), extensible = FALSE)

# export with no file name
exp_empty_sels(path = tempdir())

# export with file name
exp_empty_sels(file.name = "Phaethornis.longirostris", path = tempdir())

</code></pre>

<hr>
<h2 id='exp_est'>Export wave objects of extended selection tables as sound files</h2><span id='topic+exp_est'></span>

<h3>Description</h3>

<p><code>exp_est</code> exports wave objects of an extended selection table as sound files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exp_est(X, file.name = NULL, path = NULL, single.file = FALSE, 
selection.table = TRUE, pb = TRUE, normalize = TRUE, parallel = 1, wave.object = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exp_est_+3A_x">X</code></td>
<td>
<p>object of class 'extended_selection_table' (objects produced by <code><a href="warbleR.html#topic+selection_table">selection_table</a></code>). More details about these objects can be found on <a href="https://marce10.github.io/2018/05/15/Extended_selection_tables.html">this link</a>.</p>
</td></tr>
<tr><td><code id="exp_est_+3A_file.name">file.name</code></td>
<td>
<p>character string indicating the name of the sound file (if <code>single.file = TRUE</code>) 
and/or the selection table (if <code>selection.table = TRUE</code>). Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="exp_est_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory where sound files and/or selection table will be saved. If not provided the
function uses the current working directory. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="exp_est_+3A_single.file">single.file</code></td>
<td>
<p>Logical argument to control if all wave objects are pooled together in a 
single sound file (if <code>TRUE</code>) or each one as an individual sound file (if <code>FALSE</code>, default). If 
exporting a single sound file the files are pasted in the same sequences as in the extended selection table. Note that to create a single sound file ALL WAVE OBJECTS IN 'X&quot; MUST HAVE THE SAME SAMPLE RATE (check <code>attributes(X)$check.res$sample.rate</code>) and ideally the same bit depth (although not strictly required). If that is not the case, sample rate can be homogenize using the <code><a href="warbleR.html#topic+resample_est_waves">resample_est_waves</a></code> from the warbleR package.</p>
</td></tr>
<tr><td><code id="exp_est_+3A_selection.table">selection.table</code></td>
<td>
<p>Logical argument to determine if a Raven sound selection table ('.txt' file) is also exported. 
Default is <code>TRUE</code>. If <code>FALSE</code> then selection table is return as an object in the R environment. If exporting multiple sound files (if <code>single.file = FALSE</code>) the function still exports a single selection table (in this case a multiple sound selection table).</p>
</td></tr>
<tr><td><code id="exp_est_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar when exporting multiple sound files. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="exp_est_+3A_normalize">normalize</code></td>
<td>
<p>Logical argument to control if wave objects are individually normalized before exporting (or before being pasted together if <code>single.file = TRUE</code>). Normalization rescales amplitude values to a 16 bit dynamic range. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="exp_est_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="exp_est_+3A_wave.object">wave.object</code></td>
<td>
<p>Logical argument to control if ONLY a single wave object is returned in the R environment (TRUE) instead of a wave file in the working directory (and a selection table if <code>selection.table = TRUE</code>). Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function takes wave objects contained as attributes in extended selection 
tables and saves them as sound files in '.wav' format. A single or several sound files can be produced (see 'single.file' argument).  In addition, a Raven sound selection table can be saved along with the sound files. The exported selection table can be open in Raven for exploring/manipulating selections in 'X'.
</p>


<h3>Value</h3>

<p>Sound file(s) are saved in the provided path or current working directory. If <code>selection.table = TRUE</code> a Raven sound selection table with the data in 'X' will also be saved.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+exp_raven">exp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load example data
data(list = "lbh.est", package = "NatureSounds")

# subset to 10 selections
X &lt;- lbh.est[1:10, ]

# Export data to a single sound file
exp_est(X, file.name = "test", single.file = TRUE, path = tempdir())

# Export data to a single sound file and normalizing, no pb
exp_est(X, file.name = "test2", single.file = TRUE, normalize = TRUE, pb = FALSE, path = tempdir())

# several files
exp_est(X, single.file = FALSE, file.name = "test3", path = tempdir())

## End(Not run)
</code></pre>

<hr>
<h2 id='exp_raven'>Export 'Raven' selections</h2><span id='topic+exp_raven'></span>

<h3>Description</h3>

<p><code>exp_raven</code> exports selection tables as 'Raven' selection data in .txt format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exp_raven(X, path = NULL, file.name = NULL, khz.to.hz = TRUE, 
sound.file.path = NULL, single.file = TRUE, parallel = 1, pb = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exp_raven_+3A_x">X</code></td>
<td>
<p>Object of class data frame or <code><a href="warbleR.html#topic+selection_table">selection_table</a></code> containing columns for sound file (sound.files), selection (selec), start and end time of signals ('start' and 'end') and low and high frequency ('bottom.freq' and 'top.freq', optional). See example data 'selec_table' in the <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>) package.</p>
</td></tr>
<tr><td><code id="exp_raven_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to save the selection files.
If not provided (default) the function saves the file into the current working directory.</p>
</td></tr>
<tr><td><code id="exp_raven_+3A_file.name">file.name</code></td>
<td>
<p>Name of the output .txt file. If <code>NULL</code> then the sound file names are used instead. If multiple
selection files are generated (see 'single.file') then the sound files names are added to the provided 'file.name'. Ignored if <code>single.file = FALSE</code>.</p>
</td></tr>
<tr><td><code id="exp_raven_+3A_khz.to.hz">khz.to.hz</code></td>
<td>
<p>Logical. Controls if frequency variables should be converted from kHz (the unit used by other bioacoustic analysis R packages like <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>) to Hz (the unit used by Raven). Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="exp_raven_+3A_sound.file.path">sound.file.path</code></td>
<td>
<p>A character string indicating the path of the 
directory containing the sound file(s). Providing this information allows
to open both sound file and selection table simultaneously. This can be
done by using the 'File &gt; Open selection table' option in 'Raven' (or drag/drop the 
selection file into Raven). Default is <code>NULL</code>. This argument is required when
exporting selections from multiple sound files.</p>
</td></tr>
<tr><td><code id="exp_raven_+3A_single.file">single.file</code></td>
<td>
<p>Logical. Controls whether a single selection file (<code>TRUE</code>; default)
or a selection file for each sound file (<code>FALSE</code>, hence, only applicable
when several sound files are included in 'X') are generated. Note that
'sound.file.path' must be provided when exporting several sound files into a single selection file as the
duration of the sound files is required.</p>
</td></tr>
<tr><td><code id="exp_raven_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="exp_raven_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function exports selection tables (as the ones used in the R 
package <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>) into the 'Raven' selection file format ('.txt').
This can be useful to obtain additional Raven
measurements on existing selections by adding new measurements to the 
selection table once in Raven. Note that selection labels must be numeric and non-duplicated 
when exporting them to Raven. If that is not the case the function will
relabeled the selections and the previous selection labels will be retained in a new column ('old.selec').
</p>


<h3>Value</h3>

<p>The function saves a selection table in '.txt' format that can be 
directly opened in Raven. If several sound files are available users can either 
export them as a single selection file or as multiple selection files (one for each sound file). 
No objects are returned in the R environment.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_raven">imp_raven</a></code>; <code><a href="#topic+imp_syrinx">imp_syrinx</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load data
library(warbleR)
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", "lbh_selec_table"))

# Select data for a single sound file
st1 &lt;- lbh_selec_table[lbh_selec_table$sound.files == "Phae.long1.wav", ]

# Export data of a single sound file
exp_raven(st1, file.name = "Phaethornis 1", path = tempdir())

# Export a single selection table including multiple files
tuneR::writeWave(Phae.long1, file.path(tempdir(), 
"Phae.long1.wav"), extensible = FALSE) #save sound files 
tuneR::writeWave(Phae.long2, file.path(tempdir(), 
"Phae.long2.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long3, file.path(tempdir(), 
"Phae.long3.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long4, file.path(tempdir(), 
"Phae.long4.wav"), extensible = FALSE)

# export raven selection as single file
exp_raven(X = lbh_selec_table, file.name = "Phaethornis multiple sound files",
single.file = TRUE, sound.file.path = tempdir(), path = tempdir())

</code></pre>

<hr>
<h2 id='extract_ts'>Extract time series parameters from data imported from 'Raven'</h2><span id='topic+extract_ts'></span>

<h3>Description</h3>

<p><code>extract_ts</code> extracts time series parameters from data imported from 'Raven' bioacoustic software.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_ts(X, ts.column, equal.length = FALSE, as.time.series = FALSE, 
length.out = 30, parallel = 1, pb = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_ts_+3A_x">X</code></td>
<td>
<p>Data frame imported from Raven. It should include at least columns for: sound file names, selection labels,
a parameters encoded as a time series (e.g. several numbers separated by semicolon)</p>
</td></tr>
<tr><td><code id="extract_ts_+3A_ts.column">ts.column</code></td>
<td>
<p>Name of the column with the time series data to be extracted. 
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="extract_ts_+3A_equal.length">equal.length</code></td>
<td>
<p>Logical. Controls whether time series are kept as in the original data (most of the 
time with unequal lengths) or numbers are interpolated to equalize series length (using the <code><a href="stats.html#topic+approx">approx</a></code> function). All series will be interpolated to match the length of the longest series in the data. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="extract_ts_+3A_as.time.series">as.time.series</code></td>
<td>
<p>Logical. Controls if data is converted to the time series format (using the <code><a href="stats.html#topic+as.ts">as.ts</a></code> function). Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="extract_ts_+3A_length.out">length.out</code></td>
<td>
<p>A numeric vector of length 1 giving the number of measurements to be
interpolated (the length of the time series). default is 30. Ignored if equal.length is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="extract_ts_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="extract_ts_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function extracts parameters encoded as time series in 'Raven' selection files. The resulting data frame can be directly input into functions for time series analysis of acoustic signals as <code><a href="warbleR.html#topic+dfDTW">dfDTW</a></code>.
</p>


<h3>Value</h3>

<p>A data frame with columns for sound file name (sound.files), selection label (selec) and the time series for each selection.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_raven">imp_raven</a></code>; <code><a href="#topic+exp_raven">exp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Load data
data(selection_files)

#save 'Raven' selection tables in the temporary directory 
writeLines(selection_files[[5]], con = file.path(tempdir(), names(selection_files)[5]))

# import data to R
rvn.dat &lt;- imp_raven(all.data = TRUE) 

# Peak freq dif length
extract_ts(X = rvn.dat, ts.column = "Peak.Freq.Contour..Hz.")

# Peak freq equal length
extract_ts(X = rvn.dat, ts.column = "Peak.Freq.Contour..Hz.", equal.length = T)
 
# Peak freq equal length 10 measurements
extract_ts(X = rvn.dat, ts.column = "Peak.Freq.Contour..Hz.", 
equal.length = TRUE, length.out = 10) 

## End(Not run) 

</code></pre>

<hr>
<h2 id='fix_path'>Modify sound file path in Raven's selection tables</h2><span id='topic+fix_path'></span>

<h3>Description</h3>

<p><code>fix_path</code> modifies the path column in selection tables and sound selection tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fix_path(path = NULL, dest.path = NULL, recursive = FALSE, parallel = 1, pb = TRUE, 
new.begin.path, sound.file.col)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fix_path_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for the 'Raven' selection (text) files. 
If not provided (default) the function searches into the current working directory.</p>
</td></tr>
<tr><td><code id="fix_path_+3A_dest.path">dest.path</code></td>
<td>
<p>A character string indicating the path of the directory in which
sound selection tables will be saved. 
If not provided (default) files will be save in the current directory.</p>
</td></tr>
<tr><td><code id="fix_path_+3A_recursive">recursive</code></td>
<td>
<p>Logical. If <code>TRUE</code> the listing recurses into sub-directories.</p>
</td></tr>
<tr><td><code id="fix_path_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="fix_path_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="fix_path_+3A_new.begin.path">new.begin.path</code></td>
<td>
<p>A character string indicating the path of the directory where sound files 
would be located. This argument is required.</p>
</td></tr>
<tr><td><code id="fix_path_+3A_sound.file.col">sound.file.col</code></td>
<td>
<p>A character string with the name of the column containing the sound file names in 
the selection text files. Required.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function modifies the path field in Raven's selection tables or 
sound selection tables. This is useful when sound files have been moved to a 
different location (or computer). Note the ability to open selections and sound files
simultaneously works as long as the &quot;begin.path&quot; column is referring to the directory
containing the sound files.
</p>


<h3>Value</h3>

<p>Selection table file(s) saved in 'dest.path' or in the working 
directory (by default, which overwrites existing files).
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+to_sound_selection">to_sound_selection</a></code>; <code><a href="#topic+imp_raven">imp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
# load warbleR for sound file examples
library(NatureSounds)

#load data 
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", "selection_files"))

# save sound files
tuneR::writeWave(Phae.long1, file.path(tempdir(), "Phae.long1.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long2, file.path(tempdir(), "Phae.long2.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long3, file.path(tempdir(), "Phae.long3.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long4, file.path(tempdir(), "Phae.long4.wav"), extensible = FALSE)   
# save 'Raven' selection tables in the temporary directory
out &lt;- lapply(1:2, function(x)
writeLines(selection_files[[x]], con = file.path(tempdir(), names(selection_files)[x])))

# try drag and drop selection files into Raven (shouldn't work)

# now fix files
fix_path(path = tempdir(), 
sound.file.col = "Begin File", new.begin.path = "YOUR NEW LOCATION HERE")

# try drag and drop into Raven again (should work now)
}

</code></pre>

<hr>
<h2 id='imp_corr_mat'>Import 'Raven' batch correlator output</h2><span id='topic+imp_corr_mat'></span>

<h3>Description</h3>

<p><code>imp_corr_mat</code> imports the output of 'Raven' batch correlator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imp_corr_mat(file, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imp_corr_mat_+3A_file">file</code></td>
<td>
<p>A character string with the name of the output '.txt' file
generated by Raven.</p>
</td></tr>
<tr><td><code id="imp_corr_mat_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for the text files. 
If not provided (default) the function searches into the current working directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function imports the output of a batch correlation routine in Raven. 
Both the correlation and lag matrices contained in the output '
.txt' file are read and both waveform and spectrogram (cross-correlation) correlations can be 
imported.
</p>


<h3>Value</h3>

<p>A list with 2 matrices. The first one contains the correlation coefficients and
the second one the time lags of the peak correlations.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_raven">imp_raven</a></code>; <code><a href="#topic+exp_raven">exp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run:  
# Load data
library(NatureSounds)
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", "lbh_selec_table"))

tuneR::writeWave(Phae.long1, file.path(tempdir(), 
"Phae.long1.wav"), extensible = FALSE) #save sound files 
tuneR::writeWave(Phae.long2, file.path(tempdir(), 
"Phae.long2.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long3, file.path(tempdir(), 
"Phae.long3.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long4, file.path(tempdir(), 
"Phae.long4.wav"), extensible = FALSE)

#create new folder to put cuts
dir.create(file.path(tempdir(), "cuts"))

# cut files
cut_sels(X = lbh_selec_table, mar = 0.05, path = tempdir(),
 dest.path = file.path(tempdir(), "cuts"))

#Now run 'Raven' batch correlator un the cuts and save the output in the same folder

# Import output (change the name of the file if you used a different one)
xcorr.rav &lt;- imp_corr_mat(file = "BatchCorrOutput.txt", 
path = file.path(tempdir(), "cuts"))

# check results
  
## correlation matrix
xcorr.rav[[1]]

## time lag matrix
xcorr.rav[[2]]

## End(Not run)

</code></pre>

<hr>
<h2 id='imp_raven'>Import 'Raven' selections</h2><span id='topic+imp_raven'></span>

<h3>Description</h3>

<p><code>imp_raven</code> imports several 'Raven' selection files simultaneously. Files must be in '.txt' format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imp_raven(path = NULL, warbler.format = FALSE,  all.data = FALSE, files = NULL,
only.spectro.view = TRUE, recursive = FALSE, name.from.file = FALSE, 
ext.case = NULL, freq.cols = TRUE, waveform = FALSE, parallel = 1, pb = TRUE, 
unread = FALSE, rm.dup = FALSE,  sound.file.col = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imp_raven_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for the 'Raven' selection (text) files. 
If not provided (default) the function searches into the current working directory.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_warbler.format">warbler.format</code></td>
<td>
<p>Logical. If <code>TRUE</code> columns are renamed using the standard names for a selection table as in the package 'warbleR', frequency limit columns (high and low frequency) in 'Hz' are converted to 'kHz' (as in warbleR selection tables) and only the spectrogram view measurements are kept. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_all.data">all.data</code></td>
<td>
<p>Logical. If <code>TRUE</code> all columns in the selection files are returned, 
keeping the name columns as in the 'Raven' files. Default is <code>FALSE</code>. Columns absent in some selection files will 
be filled with NA's. This argument WILL BE DEPRECATED as it is being replaced by 'warbler.format'.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_files">files</code></td>
<td>
<p>Character vector indicating the name of selection files (in .txt format) to be imported. Optional. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_only.spectro.view">only.spectro.view</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) only the measurements in the Raven spectrogram view ('View' column) are returned. Ignored if <code>warbler.format == TRUE</code> (only spectrogram view measurements are kept).</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_recursive">recursive</code></td>
<td>
<p>Logical. If <code>TRUE</code> the listing recurses into sub-directories.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_name.from.file">name.from.file</code></td>
<td>
<p>Logical. If <code>TRUE</code> the sound file names are extracted from the selection text file name. 
It assumes that selections files contained the suffix &quot;Table.1.selections.txt&quot;, &quot;selections.txt&quot; or &quot;.txt&quot; (in that order). 
Note that by default it will assume that the extension file name is &quot;.wav&quot;. This can be control using the
argument 'ext.case'. Default is <code>FALSE</code>). Ignored if sound.file.col' is provided and/or all.data is <code>TRUE</code>). Note that
the time information for selection tables with multiple sound files won't be corrected if <code>name.from.file = TRUE</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_ext.case">ext.case</code></td>
<td>
<p>Character string of length 1 to specify whether sound file extensions are in upper or lower case. This should match the extension of the
of the .wav files from which the selection were made. It must be either 'upper' or 'lower'. Only needed when 'name.from.file' is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_freq.cols">freq.cols</code></td>
<td>
<p>Logical. If <code>TRUE</code> 'Low Freq' and 'High Freq' columns are also imported. Ignored if all.data is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_waveform">waveform</code></td>
<td>
<p>Logical to control if waveform view data should be included (this data is typically duplicated in spectrogram view data).  Default is <code>FALSE</code> (not to include it). This argument WILL BE DEPRECATED as it is being replaced by 'only.spectro.view'.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_unread">unread</code></td>
<td>
<p>Logical. If <code>TRUE</code> a list (instead of a data frame). The first element of the list contains the selections
whole data. The second and third elements are character vectors with the names of sound files that could not be read or that contain multiple sound files but no 'File Offset' column and could not be imported. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_rm.dup">rm.dup</code></td>
<td>
<p>Logical. If <code>TRUE</code> duplicated rows and columns are removed. Useful when 
selection files have been duplicated. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="imp_raven_+3A_sound.file.col">sound.file.col</code></td>
<td>
<p>A character string with the name of the column containing the sound files in 
the selection text files. Default is <code>NULL</code>. Ignored if 'name.from.file' is <code>TRUE</code> and/or all.data is <code>TRUE</code>. This argument WILL BE DEPRECATED as the function now searches for columns containing the sound file names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function import 'Raven' selection data from many files simultaneously. All selection files in the working directory or 'path' supplied will be imported (unless 'files' argument is also supplied). It has been created using Raven Pro 1.5 so selection tables created with other versions might not be read properly. Files must be in '.txt' format. Selection 
files including data from multiple recordings can also be imported, although they must contained a 'File Offset (s)' column. Selections that span across multiple sound files are not recommended as they will be assigned to the first sound file, which would produce errors for downstream analyses as those from the 'warbleR' package.
</p>


<h3>Value</h3>

<p>A single data frame with information of the selection files. If <code>unread = TRUE</code> the function returns a list of length 3 with
the selection data frame and a vector with the names of files that could not be read (see 'unread' argument).  
If 'warbler.format' argument is set to <code>TRUE</code> the data frame contains the following columns: sound.files, selec, channel,start, end, top.freq, bottom.freq and selec.file. If all.data is set to <code>TRUE</code> then all columns in the 'Raven' selection files are returned. 
If individual selection files contain information about multiple sound files the function will import the file and correct the time
parameters (start and end) only if 1) the 'File Offset (s)' is found in the selection table.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_syrinx">imp_syrinx</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# load data 
data(selection_files)

# save 'Raven' selection tables in the temporary directory 
out &lt;- lapply(1:2, function(x) 
writeLines(selection_files[[x]], con = file.path(tempdir(), names(selection_files)[x])))


# providing the name of the column with the sound file names
rvn.dat &lt;- imp_raven(sound.file.col = "Begin.File", all.data = FALSE, path = tempdir())

# View(rvn.dat)


</code></pre>

<hr>
<h2 id='imp_syrinx'>Import 'Syrinx' selections</h2><span id='topic+imp_syrinx'></span>

<h3>Description</h3>

<p><code>imp_syrinx</code> imports 'Syrinx' selection data from many files simultaneously. 
All files must have the same columns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imp_syrinx(path = NULL, all.data = FALSE, recursive = FALSE, 
exclude = FALSE, hz.to.khz = TRUE, parallel = 1, pb = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imp_syrinx_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for the text files. 
If not provided (default) the function searches into the current working directory. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="imp_syrinx_+3A_all.data">all.data</code></td>
<td>
<p>Logical. If <code>TRUE</code> all columns in text files are returned. Default is <code>FALSE</code>. Note 
that all files should contain exactly the same columns in the same order.</p>
</td></tr>
<tr><td><code id="imp_syrinx_+3A_recursive">recursive</code></td>
<td>
<p>Logical. If <code>TRUE</code> the listing recurses into sub-directories.</p>
</td></tr>
<tr><td><code id="imp_syrinx_+3A_exclude">exclude</code></td>
<td>
<p>Logical. Controls whether files that cannot be read are ignored (<code>TRUE</code>). Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="imp_syrinx_+3A_hz.to.khz">hz.to.khz</code></td>
<td>
<p>Logical. Controls if frequency variables should be converted from  Hz (the unit used by Syrinx) to kHz (the unit used by warbleR and other bioacoustic analysis packages in R). Default if <code>TRUE</code>. Ignored if all.data is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="imp_syrinx_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="imp_syrinx_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single data frame with information of the selection files. If all.data argument is set to <code>FALSE</code> the data 
frame contains the following columns: selec, start, end, and selec.file. If sound.file.col is provided the data frame
will also contain a 'sound.files' column. If all.data is set to <code>TRUE</code> then all 
columns in selection files are returned.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_raven">imp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#load data 
data(selection_files)

#save 'Raven' selection tables in the temporary directory 
writeLines(selection_files[[7]], con = file.path(tempdir(), names(selection_files)[7]))

syr.dat &lt;- imp_syrinx(all.data = FALSE)

# View(syr.dat)

#getting all the data
syr.dat &lt;- imp_syrinx(all.data = TRUE)

# View(syr.dat)

## End(Not run)

</code></pre>

<hr>
<h2 id='match_wav_case'>Fix the extension case of sound files</h2><span id='topic+match_wav_case'></span>

<h3>Description</h3>

<p><code>match_wav_case</code> fixes the extension case of sound files in a selection table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_wav_case(X, path = NULL, output = "data.frame", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="match_wav_case_+3A_x">X</code></td>
<td>
<p>Data frame containing columns for sound file (sound.files) and selection
(selec). See example data 'lbh_selec_table' in the <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>) package.</p>
</td></tr>
<tr><td><code id="match_wav_case_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for sound files. 
If not provided (default) the function searches into the current working directory.</p>
</td></tr>
<tr><td><code id="match_wav_case_+3A_output">output</code></td>
<td>
<p>Character string. Controls whether a complete data frame ('data.frame') 
or only the sound file names (&quot;names&quot;) are returned. Default is 'data.frame'.</p>
</td></tr>
<tr><td><code id="match_wav_case_+3A_verbose">verbose</code></td>
<td>
<p>Logical to control if messages are printed (<code>TRUE</code>, default).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function returns the data from the input data frame with extension file
names in the 'sound.files' column matching those of the sound files (in case there was
any mismatch). The function needs the path to the sound files to compare extension names.
</p>


<h3>Value</h3>

<p>The same data as in the input data frame but with the case of the extension file names in the 'sound.files' column matching those of the sound files themselves.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+relabel_colms">relabel_colms</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
library(warbleR)
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4", 
"lbh_selec_table"))

tuneR::writeWave(Phae.long1, file.path(tempdir(), 
"Phae.long1.wav"), extensible = FALSE) #save sound files 
tuneR::writeWave(Phae.long2, file.path(tempdir(), 
"Phae.long2.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long3, file.path(tempdir(), 
"Phae.long3.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long4, file.path(tempdir(), 
"Phae.long4.wav"), extensible = FALSE)

# change one extension
lbh_selec_table$sound.files &lt;- as.character(lbh_selec_table$sound.files)
lbh_selec_table$sound.files[1] &lt;- gsub(".wav$", ".WAV", lbh_selec_table$sound.files[1]) 
 
 # fixed extension an return data frame
 match_wav_case(X = lbh_selec_table, path = tempdir())
  
 # fixed extension an return sound file names
 match_wav_case(X = lbh_selec_table, output = "names", path = tempdir())
 }   
</code></pre>

<hr>
<h2 id='raven_batch_detec'>Run 'Raven' batch detector</h2><span id='topic+raven_batch_detec'></span>

<h3>Description</h3>

<p><code>raven_batch_detec</code> Runs 'Raven' batch detector on multiple sound files sequentially
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raven_batch_detec(raven.path = NULL, sound.files, path = NULL, 
detector.type, detector.preset = "Default",
view.preset = "Default", relabel_colms = TRUE, pb = TRUE, parallel = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raven_batch_detec_+3A_raven.path">raven.path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for the 'Raven' executable file (where 'Raven' was installed).</p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_sound.files">sound.files</code></td>
<td>
<p>character vector indicating the files that will be analyzed.
In OSX (mac) only one file at the time can be run (use loops instead!). If <code>NULL</code> (default) 
then 'Raven' will be run without opening any file.</p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for
the sound files. If not provided (default) the function searches into the current working 
directory. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_detector.type">detector.type</code></td>
<td>
<p>Character string specifying the type of detector to be called.
There are 3 options available in 'Raven': 'Amplitude Detector', 'Band 
Limited Energy Detector' and 'Band Limited Entropy Detector'. Must be provided.</p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_detector.preset">detector.preset</code></td>
<td>
<p>Character string specifying the name of the customized detector to be called.
If <code>NULL</code> (default) then the 'Default' detector for the specific detector type is used 
(see 'detector.type' argument). Custom detectors must be found in one of the default 'Raven' detector directories 
(usually within &quot;'raven.path'/Presets/Detector&quot;).</p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_view.preset">view.preset</code></td>
<td>
<p>Character string specifying the name of the window preset to be used. Not require for 'Amplitude Detector' (see 'detector.type' argument).
If <code>NULL</code> (default) then the 'Default' window preset is used.</p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_relabel_colms">relabel_colms</code></td>
<td>
<p>Logical. If  <code>TRUE</code> (default) columns are labeled to 
match the selection table format from the acoustic analysis package <code><a href="warbleR.html#topic+warbleR">warbleR</a></code></p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="raven_batch_detec_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function runs 'Raven' sound analysis software (Cornell Lab of
Ornithology), detector on  multiple sound files sequentially. 'Raven' Pro must be 
installed. Note that batch detection in 'Raven' can also take 
sound files in 'mp3', 'flac' and 'aif' format.
</p>


<h3>Value</h3>

<p>A data frame with the selections produced during the detection. See <code><a href="#topic+imp_raven">imp_raven</a></code> for more details on how selections are imported.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_raven">imp_raven</a></code>; <code><a href="#topic+imp_syrinx">imp_syrinx</a></code>; <code><a href="#topic+run_raven">run_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# here replace with path where 'Raven' is installed in your computer
raven.path &lt;- "PATH_TO_RAVEN_DIRECTORY_HERE" 

# Run detector on raven example sound files

# single sound file using 'Amplitude Detector' 
detec.res &lt;- raven_batch_detec(raven.path = raven.path, 
sound.files = "BlackCappedVireo.aif", path = file.path(raven.path, "Examples"), 
detector.type = "Amplitude Detector")

# on raven examples  2 files
detec.res &lt;- raven_batch_detec(raven.path = raven.path, 
sound.files = c("BlackCappedVireo.aif", "CanyonWren.wav"), 
path = file.path(raven.path, "Examples"), detector.type = "Amplitude Detector")

# using 'Band Limited Energy Detector' 
detec.res &lt;- raven_batch_detec(raven.path = raven.path, 
sound.files = c("BlackCappedVireo.aif", "CanyonWren.wav"), 
path = file.path(raven.path, "Examples"), detector = "Band Limited Energy Detector")

## End(Not run)

</code></pre>

<hr>
<h2 id='relabel_colms'>Relabel columns to match the selection table format</h2><span id='topic+relabel_colms'></span>

<h3>Description</h3>

<p><code> relabel_colms</code> relabels columns to match the selection table format (as in the R package <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relabel_colms(X, extra.cols.name = NULL, extra.cols.new.name = NULL, 
khz.to.hz = FALSE, hz.to.khz = FALSE, waveform = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relabel_colms_+3A_x">X</code></td>
<td>
<p>Data frame imported from Raven.</p>
</td></tr>
<tr><td><code id="relabel_colms_+3A_extra.cols.name">extra.cols.name</code></td>
<td>
<p>Character vector with the names of additional columns to be relabeled. Default is <code>NULL</code>.
'extra.cols.new.name' must also be provided.</p>
</td></tr>
<tr><td><code id="relabel_colms_+3A_extra.cols.new.name">extra.cols.new.name</code></td>
<td>
<p>Character vector with the new names for the additional columns to be relabeled. 
Default is <code>NULL</code>. 'extra.cols.name' must also be provided.</p>
</td></tr>
<tr><td><code id="relabel_colms_+3A_khz.to.hz">khz.to.hz</code></td>
<td>
<p>Logical. Controls if frequency variables ('top.freq' and 'bottom.freq') should be converted from kHz 
(the unit used by other bioacoustic analysis R packages like <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>) to Hz (the unit used by Raven). 
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="relabel_colms_+3A_hz.to.khz">hz.to.khz</code></td>
<td>
<p>Logical. Controls if frequency variables ('top.freq' and 'bottom.freq') should be converted from Hz 
(the unit used by other bioacoustic analysis R packages like Raven) to kHz (the unit used by <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>). 
Default is <code>FALSE</code>. Ignored if 'kHz.to.hz' is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="relabel_colms_+3A_waveform">waveform</code></td>
<td>
<p>Logical to control if 'waveform' related data should be included (this data is typically duplicated in 'spectrogram' data).  Default is <code>FALSE</code> (not to include it).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function relabels columns to match the selection table format to match then ones used by other bioacoustic analysis R packages like <code><a href="warbleR.html#topic+warbleR">warbleR</a></code>.
</p>


<h3>Value</h3>

<p>The function returns the input data frame with new column names for time and frequency 'coordinates' and sound files and selections.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_raven">imp_raven</a></code>; <code><a href="#topic+exp_raven">exp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load data
data(selection_files)

#save 'Raven' selection tables in the temporary directory 
writeLines(selection_files[[5]], con = file.path(tempdir(), names(selection_files)[5]))

 
#'# import data to R
rvn.dat &lt;- imp_raven(all.data = TRUE, path = tempdir()) 

names(rvn.dat)

# Select data for a single sound file
rvn.dat2 &lt;-  relabel_colms(rvn.dat)

names(rvn.dat2)

# plus 1 additional column
rvn.dat2 &lt;-  relabel_colms(rvn.dat, extra.cols.name = "selec.file", "Raven selection file")

names(rvn.dat2)

# plus 2 additional column 
rvn.dat2 &lt;- relabel_colms(rvn.dat, extra.cols.name = c("selec.file", "View"), 
c("Raven selection file", "Raven view"))
 
names(rvn.dat2)


</code></pre>

<hr>
<h2 id='run_raven'>Open sound files in 'Raven' sound analysis software</h2><span id='topic+run_raven'></span>

<h3>Description</h3>

<p><code>run_raven</code> opens several sound files in 'Raven' sound analysis software
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_raven(raven.path = NULL, sound.files = NULL, path = NULL, at.the.time = 10,
import = FALSE, redo = FALSE, view.preset = NULL, pb = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_raven_+3A_raven.path">raven.path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for the 'Raven' executable file (where 'Raven' was installed).</p>
</td></tr>
<tr><td><code id="run_raven_+3A_sound.files">sound.files</code></td>
<td>
<p>character vector indicating the files that will be analyzed. If  <code>NULL</code> (default) then 'Raven' will be run without opening any file.</p>
</td></tr>
<tr><td><code id="run_raven_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for
the sound files. If not provided (default) the function searches into the current working 
directory. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="run_raven_+3A_at.the.time">at.the.time</code></td>
<td>
<p>Numeric vector of length 1 controlling how many files will be open in
'Raven' at the same time. Note that opening too many files at once could make 'Raven' run out
of memory. You need to close 'Raven' every time the batch of files is analyzed, so the next
batch is opened. Default is 10. Not available in OSX (mac).</p>
</td></tr>
<tr><td><code id="run_raven_+3A_import">import</code></td>
<td>
<p>Logical. Controls if the selection tables generated should be returned as a 
data frame into the R environment. This only works if the selections are saved in the 
&quot;Selections&quot; folder in the 'Raven' directory. This argument calls the <code><a href="#topic+imp_raven">imp_raven</a></code>
internally. Additional arguments can be passed to <code><a href="#topic+imp_raven">imp_raven</a></code> to control the way the data is imported.</p>
</td></tr>
<tr><td><code id="run_raven_+3A_redo">redo</code></td>
<td>
<p>Logical. Controls whether only the subset of files with no 'Raven' selections (.txt file) in the 'Raven' 'selections' folder
are analyzed (if <code>FALSE</code>). Useful when resuming the analysis. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="run_raven_+3A_view.preset">view.preset</code></td>
<td>
<p>Character string defining the 'Raven' view preset to be used.
It should match exactly the name of the present in the 'Raven' folder 'Presets/Sound Window'. If not provided the default view preset is used.</p>
</td></tr>
<tr><td><code id="run_raven_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="run_raven_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code><a href="#topic+imp_raven">imp_raven</a></code> for customizing
how selections are imported (ignored if <code>import = FALSE</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function runs 'Raven' sound analysis software (Cornell Lab of
Ornithology), opening many files simultaneously. 'Raven' will still run if no
sound files are provided (i.e. <code>sound.files = NULL</code>). At the end of the
analysis the data can be automatically imported back into R using the 'import'
argument. 'Raven' Pro must be installed. Note that 'Raven' can also take sound files in 'mp3', 'flac' and
'aif' format.
</p>


<h3>Value</h3>

<p>If <code>import = TRUE</code> a data frame with the selections produced during the analysis will be return as an data frame. See <code><a href="#topic+imp_raven">imp_raven</a></code> for more details on how selections are imported.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_raven">imp_raven</a></code>; <code><a href="#topic+imp_syrinx">imp_syrinx</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# save sound files
library(NatureSounds) 
data(list = c("Phae.long1", "Phae.long2", "Phae.long3", "Phae.long4"))
tuneR::writeWave(Phae.long1, file.path(tempdir(), "Phae.long1.wav"), extensible = FALSE)
tuneR::writeWave(Phae.long2, file.path(tempdir(), "Phae.long2.wav"), extensible = FALSE)

# here replace with the path where 'Raven' is install in your computer
raven.path &lt;- "PATH_TO_RAVEN_DIRECTORY_HERE" 

# run function 
run_raven(raven.path = raven.path, sound.files = c("Phae.long1.wav", "Phae.long2.wav"),
 at.the.time = 2, import = T, name.from.file = T, ext.case = "upper", 
 all.data = TRUE, path = tempdir())  
 
#getting all the data
rav.dat &lt;- run_raven(all.data = TRUE, raven.path = raven.path)
# View(rav.dat)

## End(Not run)

</code></pre>

<hr>
<h2 id='selection_files'>A list of 'Raven' selection tables.</h2><span id='topic+selection_files'></span>

<h3>Description</h3>

<p>List of 'Raven' and 'Syrinx' selection tables containing 
<em>Phaethornis longirostris</em> (Long-billed Hermit) songs from the 
example sound files included in the <code><a href="warbleR.html#topic+warbleR">warbleR</a></code> package (times 1 to 5),
a 'Raven' correlation matrix (item 6) and one selection from cane-brake wrens 
(item 7; no sound file available).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(selection_files)
</code></pre>


<h3>Format</h3>

<p>List of 7 selection tables. The first 5 items are 'Raven' selection tables of Long billed hermit songs. The 5th table contains a multiple sound file selection 
table. The 6th item is a 'Raven' correlation matrix and the last one a table in 'Syrinx' format.
</p>


<h3>Source</h3>

<p>Marcelo Araya-Salas
</p>

<hr>
<h2 id='to_sound_selection'>Convert Raven's selection files into sound selection files</h2><span id='topic+to_sound_selection'></span>

<h3>Description</h3>

<p><code>to_sound_selection</code> converts Raven's selection files into sound selection files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_sound_selection(path = NULL, dest.path = NULL, recursive = FALSE,
 parallel = 1, pb = TRUE, sound.file.path, sound.file.col)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_sound_selection_+3A_path">path</code></td>
<td>
<p>A character string indicating the path of the directory in which to look for the 'Raven' selection (text) files. 
If not provided (default) the function searches into the current working directory.</p>
</td></tr>
<tr><td><code id="to_sound_selection_+3A_dest.path">dest.path</code></td>
<td>
<p>A character string indicating the path of the directory in which
sound selection tables will be saved. 
If not provided (default) files will be saved in directory where the original raven selections were found.</p>
</td></tr>
<tr><td><code id="to_sound_selection_+3A_recursive">recursive</code></td>
<td>
<p>Logical. If <code>TRUE</code> the listing recurses into sub-directories.</p>
</td></tr>
<tr><td><code id="to_sound_selection_+3A_parallel">parallel</code></td>
<td>
<p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing).</p>
</td></tr>
<tr><td><code id="to_sound_selection_+3A_pb">pb</code></td>
<td>
<p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="to_sound_selection_+3A_sound.file.path">sound.file.path</code></td>
<td>
<p>A character string indicating the path of the 
directory containing the sound file(s). This argument is required.</p>
</td></tr>
<tr><td><code id="to_sound_selection_+3A_sound.file.col">sound.file.col</code></td>
<td>
<p>A character string with the name of the column containing the sound file names in 
the selection text files. Required.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function converts Raven's selection tables to sound selection tables.
Sound selection table is a more convenient format as it can be open directly in Raven (or drag-and-drop) and 
will automatically open the associated sound file. Multiple files can be 
simultaneously converted. Files must be in '.txt' format. Selection 
files including data from multiple recordings can be converted only if all the 
correspondent sound files are found in the same directory. Note that no data is 
imported into the R environment.
</p>


<h3>Value</h3>

<p>Sound selection table file(s) saved in 'dest.path' or in the working 
directory.
</p>


<h3>Author(s)</h3>

<p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+imp_syrinx">imp_syrinx</a></code>; <code><a href="#topic+imp_raven">imp_raven</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{

#load data 
data(selection_files)

# save 'Raven' selection tables in the temporary directory
out &lt;- lapply(1:2, function(x)
writeLines(selection_files[[x]], con = file.path(tempdir(), names(selection_files)[x])))

# try drag and drop selection files into Raven (shouldn't work)

# now convert files
to_sound_selection(sound.file.path = tempdir(), 
sound.file.col = "Begin Path", path = tempdir())

# try drag and drop into Raven again (should work now)
}

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
