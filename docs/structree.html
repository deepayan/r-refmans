<!DOCTYPE html><html lang="en"><head><title>Help for package structree</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {structree}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CTB'><p>Achievement Test from CTB/McGraw-Hill</p></a></li>
<li><a href='#guPrenat'><p>Prenatal Care in Guatemala</p></a></li>
<li><a href='#plot.structree'><p>Plotting Results of Tree-Structured Clustering</p></a></li>
<li><a href='#rent'><p>Munich Rent Data</p></a></li>
<li><a href='#structree'><p>Tree-Structured Clustering</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tree-Structured Clustering</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.7</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-06-04</td>
</tr>
<tr>
<td>Author:</td>
<td>Moritz Berger</td>
</tr>
<tr>
<td>Depends:</td>
<td>mgcv, lme4, penalized</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Moritz Berger &lt;Moritz.Berger@imbie.uni-bonn.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Tree-structured modelling of categorical predictors (Tutz and Berger (2018), &lt;<a href="https://doi.org/10.1007%2Fs11634-017-0298-6">doi:10.1007/s11634-017-0298-6</a>&gt;) or measurement
    units (Berger and Tutz (2018), &lt;<a href="https://doi.org/10.1080%2F10618600.2017.1371030">doi:10.1080/10618600.2017.1371030</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-06-04 12:50:58 UTC; berger</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-06-05 09:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='CTB'>Achievement Test from CTB/McGraw-Hill</h2><span id='topic+CTB'></span>

<h3>Description</h3>

<p>The data set contains results of an achievement test that measures different objectives and subskills of subjects in mathematics and science. 
Inter alia, the students had to respond to 56 multiple-choice items (31 mathematics, 25 science). 
For the original description, see Section 5.6 of Chapter 5 in De Boeck and Wilson (2004).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(CTB)
</code></pre>


<h3>Format</h3>

<p>A data frame containing 1211 observations on 9 variables:
</p>
<p><b>score</b>  number of correctly solved items (metric)
</p>
<p><b>school</b>  school ID (nominal)
</p>
<p><b>size</b>  number of students in the school, in hundreds (metric)
</p>
<p><b>bachelor</b>  transformed and standardized percentage of adults with BA degree or higher in area with school zip code (metric)
</p>
<p><b>born</b>  transformed and standardized percentage of adults in the school area who were born in the state where they now reside (metric)
</p>
<p><b>mortgage</b> transformed and standardized median of the monthly mortgage in the school area (metric)
</p>
<p><b>language</b> transformed and standardized percentage of foreign language households in the school area (metric)
</p>
<p><b>type</b> type of school (1: catholic, 2: private, 3: public)
</p>
<p><b>gender</b>  gender (0: male, 1: female)</p>


<h3>References</h3>

<p>De Boeck, P. and M. Wilson (2004). Explanatory item response models: A generalized linear and nonlinear approach. Springer Verlag.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(CTB)

y &lt;- CTB$score
x &lt;- CTB$gender

hist(y)
table(x)
 
</code></pre>

<hr>
<h2 id='guPrenat'>Prenatal Care in Guatemala</h2><span id='topic+guPrenat'></span>

<h3>Description</h3>

<p>A data set derived from the National Survey of Maternal and Child Health in Guatemala in 1987. 
The data contains observations of children that were born in the 5-year period before the survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(guPrenat)
</code></pre>


<h3>Format</h3>

<p>A data frame containing 1211 observations on 9 variables:
</p>
<p><b>cluster</b>  community (nominal)
</p>
<p><b>prenat</b>  prenatal care (0: traditional, 1: modern)
</p>
<p><b>motherAge</b>  mother 25 years or older (0: no, 1: yes)
</p>
<p><b>indig</b>  mother's ethnicity (nominal)
</p>
<p><b>momEd</b>  mother's level of education (nominal)
</p>
<p><b>husEd</b> husband's level of education (nominal)
</p>
<p><b>husEmpl</b> husband's employment status (nominal)
</p>
<p><b>toilet</b> modern toilet in house (0: no, 1: yes)
</p>
<p><b>TV</b> frequency of TV usage (nominal)</p>


<h3>References</h3>

<p>Rodriguez, Germa'n and Goldman, Noreen (1995), &quot;Improved estimation procedures for multilevel
models with binary response: a case-study&quot;, Journal of the Royal Statistical Society, Series A, 164,
339-355.
</p>
<p>Douglas Bates and Martin Maechler and Ben Bolker (2014). mlmRev: Examples from Multilevel Modelling Software Review. R
package version 1.0-6. https://CRAN.R-project.org/package=mlmRev
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(guPrenat)

y &lt;- guPrenat$prenat
community &lt;- guPrenat$cluster

table(y)
hist(table(community))
 
</code></pre>

<hr>
<h2 id='plot.structree'>Plotting Results of Tree-Structured Clustering</h2><span id='topic+plot.structree'></span>

<h3>Description</h3>

<p>Takes a fitted <code>structree</code> object and plots the results of the tree component of the model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'structree'
plot(x, select = NULL, paths = FALSE,
  result = FALSE, ask = FALSE, xlab = NULL, ylab = NULL,
  main = NULL, lwd = 1, cex.txt = 1, cex.axis = 1, cex.lab = 1,
  cex.main = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.structree_+3A_x">x</code></td>
<td>
<p>Object of class <code><a href="#topic+structree">structree</a></code>.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_select">select</code></td>
<td>
<p>Elements of the tree component that are plotted; 
if <code>select</code> is not specified, by default all components are pictured in one plot.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_paths">paths</code></td>
<td>
<p>If true, the coefficient paths are plotted.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_result">result</code></td>
<td>
<p>If true, the resulting partition is displayed.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_ask">ask</code></td>
<td>
<p>If true, each element chosen by <code>select</code> is plotted seperately.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_xlab">xlab</code></td>
<td>
<p>Label of x-axis.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_ylab">ylab</code></td>
<td>
<p>Label of y-axis.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_main">main</code></td>
<td>
<p>Title of the plot.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_lwd">lwd</code></td>
<td>
<p>Linewidth.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_cex.txt">cex.txt</code></td>
<td>
<p>Size of the text.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_cex.axis">cex.axis</code></td>
<td>
<p>Size of the axis.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_cex.lab">cex.lab</code></td>
<td>
<p>Size of the labels.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_cex.main">cex.main</code></td>
<td>
<p>Size of title.</p>
</td></tr>
<tr><td><code id="plot.structree_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the function pictures the estimated trees against all splits. 
If <code>select=NULL</code> the trees for all the predictors will be plotted.
</p>


<h3>Author(s)</h3>

<p>Moritz Berger &lt;Moritz.Berger@imbie.uni-bonn.de&gt; <br /> <a href="http://www.imbie.uni-bonn.de/personen/dr-moritz-berger/">http://www.imbie.uni-bonn.de/personen/dr-moritz-berger/</a>
</p>


<h3>References</h3>

<p>Tutz, Gerhard and Berger, Moritz (2018): Tree-structured modelling of categorical predictors in regression, 
Advances in Data Analysis and Classification 12(3), 737-758.
</p>
<p>Berger, Moritz and Tutz, Gerhard (2018): Tree-structured clustering in fixed effects models, 
Journal of Computational and Graphical Statistics 27(2), 380-392.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+structree">structree</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(rent)

## Not run: 
mod &lt;- structree(nmqm~tr(bez)+tr(bj)+tr(rooms)+badkach0,data=rent,
                 family=gaussian,stop_criterion="CV")

plot(mod, paths=TRUE)

## End(Not run)


</code></pre>

<hr>
<h2 id='rent'>Munich Rent Data</h2><span id='topic+rent'></span>

<h3>Description</h3>

<p>The data set is part of the Munich rent index in 2003. It is available from the data archive 
of the Department of Statistics at the University of Munich (http://www.statistik.lmu.de/service/datenarchiv).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(rent)
</code></pre>


<h3>Format</h3>

<p>A data frame containing 2053 observations on 11 variables:
</p>
<p><b>nmqm</b>   net rent per square meter (metric)
</p>
<p><b>wfl</b>  floor space (metric)
</p>
<p><b>rooms</b>  number of rooms (ordinal)
</p>
<p><b>bj</b>  year of construction (ordinal)
</p>
<p><b>bez</b>  residential area (norminal)
</p>
<p><b>ww0</b> hot water supply (1: no, 0: yes)
</p>
<p><b>zh0</b> central heating (1: no, 0: yes)
</p>
<p><b>badkach0</b> tiled bathroom (1: no, 0: yes)
</p>
<p><b>badextra</b> supplementary equipment in bathroom (1: yes, 0: no)
</p>
<p><b>kueche</b> well equipped kitchen (1: yes, 0: no)
</p>
<p><b>quality</b> quality of residential area (ordinal)</p>


<h3>References</h3>

<p>Fahrmeir, L. and Kuenstler, R. and Pigeot, I. and Tutz, G. (2004): Statistik: der Weg zur Datenanalyse. 5. Auflage, Springer, Berlin.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(rent)

y &lt;- rent$nmqm
X &lt;- rent[,-1]

boxplot(y)
summary(X)
 
</code></pre>

<hr>
<h2 id='structree'>Tree-Structured Clustering</h2><span id='topic+structree'></span><span id='topic+print.structree'></span><span id='topic+coef.structree'></span>

<h3>Description</h3>

<p>Fusion of categories of ordinal or nominal predictors or fusion of measurement units by tree-structured clustering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>structree(formula, data, family = gaussian, stop_criterion = c("AIC",
  "BIC", "CV", "pvalue"), splits_max = NULL, fold = 5, alpha = 0.05,
  grid_value = NULL, min_border = NULL, ridge = FALSE,
  constant_covs = FALSE, trace = TRUE, plot = TRUE, k = 10,
  weights = NULL, offset = NULL, ...)

## S3 method for class 'structree'
print(x, ...)

## S3 method for class 'structree'
coef(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="structree_+3A_formula">formula</code></td>
<td>
<p>Object of class <code><a href="stats.html#topic+formula">formula</a></code>: a symbolic description of the model to be fitted. See detail.</p>
</td></tr>
<tr><td><code id="structree_+3A_data">data</code></td>
<td>
<p>Data.frame of class <code><a href="base.html#topic+data.frame">data.frame</a></code> containing the variables of the model.</p>
</td></tr>
<tr><td><code id="structree_+3A_family">family</code></td>
<td>
<p>a description of the error distribution and link function to be used in the model. 
This can be a character string naming a family function, a family function or the result of a call to a family function. 
See <code><a href="stats.html#topic+family">family</a></code> for details of family functions.</p>
</td></tr>
<tr><td><code id="structree_+3A_stop_criterion">stop_criterion</code></td>
<td>
<p>Criterion to determine the optimal number of splits in the tree component of the model; 
one out of <code>"AIC"</code>, <code>"BIC"</code>, <code>"CV"</code> and <code>"pvalue"</code>.</p>
</td></tr>
<tr><td><code id="structree_+3A_splits_max">splits_max</code></td>
<td>
<p>Maximal number of splits in the tree component.</p>
</td></tr>
<tr><td><code id="structree_+3A_fold">fold</code></td>
<td>
<p>Number of folds; only for stop criterion <code>"CV"</code>.</p>
</td></tr>
<tr><td><code id="structree_+3A_alpha">alpha</code></td>
<td>
<p>Significance level; only for stop criterion <code>"pvalue"</code>.</p>
</td></tr>
<tr><td><code id="structree_+3A_grid_value">grid_value</code></td>
<td>
<p>An optional parameter; <code>grid_value</code> is a scalar giving the minimal distance between 
two adjacent observation units that are used as candidates for splitting; only for repeated measurements.</p>
</td></tr>
<tr><td><code id="structree_+3A_min_border">min_border</code></td>
<td>
<p>An optional parameter; <code>min_border</code> is a integer giving the minimal size of the outer 
nodes of the tree; only for repeated measurements.</p>
</td></tr>
<tr><td><code id="structree_+3A_ridge">ridge</code></td>
<td>
<p>If true, a small ridge penalty is added to obtain the order of measurement units; only for repeated measurements.</p>
</td></tr>
<tr><td><code id="structree_+3A_constant_covs">constant_covs</code></td>
<td>
<p>Must be set to true, if constant covariates are available; only for repeated measurments 
(currently only available for Gaussian response).</p>
</td></tr>
<tr><td><code id="structree_+3A_trace">trace</code></td>
<td>
<p>If true, information about the estimation progress is printed.</p>
</td></tr>
<tr><td><code id="structree_+3A_plot">plot</code></td>
<td>
<p>If true, the smooth components of the model are plottet; only for categorical predictors.</p>
</td></tr>
<tr><td><code id="structree_+3A_k">k</code></td>
<td>
<p>Dimension of the B-spline basis that is used to fit smooth components. For details see <code><a href="mgcv.html#topic+s">s</a></code>;
only for categorical predictors.</p>
</td></tr>
<tr><td><code id="structree_+3A_weights">weights</code></td>
<td>
<p>An optional vector of prior weights to be used in the fitting process; see also <code><a href="stats.html#topic+glm">glm</a></code>.</p>
</td></tr>
<tr><td><code id="structree_+3A_offset">offset</code></td>
<td>
<p>An a priori known component to be included in the linear predictor during fitting; see also <code><a href="stats.html#topic+glm">glm</a></code>.</p>
</td></tr>
<tr><td><code id="structree_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="structree_+3A_x">x</code>, <code id="structree_+3A_object">object</code></td>
<td>
<p>Object of class <code>"structree"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A typical <a href="stats.html#topic+formula">formula</a> has the form <code>response ~ predictors</code>, where <code>response</code> is the name of the response variable 
and <code>predictors</code> is a series of terms that specify the predictor of the model. 
</p>
<p>For an ordinal or nominal predictors z one has to enter <code>tr(x)</code> into the formula. 
</p>
<p>For smooth components x one has to enter <code>s(x)</code> into the formula; currently not implemented for repeated measurements. 
</p>
<p>For fixed effects z of observation units u one has to enter <code>tr(z|u)</code> into the formula. 
An unit-specific intercept is specified by <code>tr(1|u)</code>.
</p>
<p>The framework only allows for categorical predictors or observations units in the tree component, but not both. 
All other predictors with a linear term are entered as usual by <code>x1+...+xp</code>.
</p>


<h3>Value</h3>

<p>Object of class <code>"structree"</code>. 
An object of class <code>"structree"</code> is a list containing the following components:
</p>
<table role = "presentation">
<tr><td><code>coefs_end</code></td>
<td>
<p>all coefficients of the estimated model</p>
</td></tr>
<tr><td><code>partitions</code></td>
<td>
<p>list of matrices containing the partitions of the predictors in the tree component including all iterations</p>
</td></tr>
<tr><td><code>beta_hat</code></td>
<td>
<p>list of matrices with the fitted coefficients in the tree component including all iterations</p>
</td></tr>
<tr><td><code>which_opt</code></td>
<td>
<p>number of the optimal model (total number of splits-1)</p>
</td></tr> 
<tr><td><code>opts</code></td>
<td>
<p>number of splits per predictor in the tree component</p>
</td></tr>
<tr><td><code>order</code></td>
<td>
<p>list of ordered split-points of the predictors in the tree component</p>
</td></tr>
<tr><td><code>tune_values</code></td>
<td>
<p>value of the stopping criterion that determine the optimal model</p>
</td></tr>
<tr><td><code>group_ID</code></td>
<td>
<p>list of the group IDs for each observations</p>
</td></tr>
<tr><td><code>coefs_group</code></td>
<td>
<p>list of coefficients of the estimated model</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>Response vector</p>
</td></tr>
<tr><td><code>DM_kov</code></td>
<td>
<p>Design matrix</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Moritz Berger &lt;Moritz.Berger@imbie.uni-bonn.de&gt; <br /> <a href="http://www.imbie.uni-bonn.de/personen/dr-moritz-berger/">http://www.imbie.uni-bonn.de/personen/dr-moritz-berger/</a>
</p>


<h3>References</h3>

<p>Tutz, Gerhard and Berger, Moritz (2018): Tree-structured modelling of categorical predictors in regression, 
Advances in Data Analysis and Classification 12(3), 737-758.
</p>
<p>Berger, Moritz and Tutz, Gerhard (2018): Tree-structured clustering in fixed effects models, 
Journal of Computational and Graphical Statistics 27(2), 380-392.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.structree">plot.structree</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(rent)

## Not run: 
mod &lt;- structree(nmqm~tr(bez)+tr(bj)+tr(rooms)+badkach0,data=rent,
                 family=gaussian,stop_criterion="CV")

print(mod)
coef(mod)

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
