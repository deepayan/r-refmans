<!DOCTYPE html><html><head><title>Help for package BayesianReasoning</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BayesianReasoning}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BayesianReasoning-package'><p>BayesianReasoning: Plot Positive and Negative Predictive Values for Medical Tests</p></a></li>
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#min_possible_prevalence'><p>Show minimum possible prevalence given the test characteristics</p></a></li>
<li><a href='#plot_cutoff'><p>plot_cutoff</p>
Create a cutoff plot, showing the healthy and sick distributions, and the
consequences of different cutoff points</a></li>
<li><a href='#PPV_diagnostic_vs_screening'><p>Plot PPV values for a diagnostic and a screening group</p></a></li>
<li><a href='#PPV_heatmap'><p>Plot PPV and NPV heatmaps</p></a></li>
<li><a href='#remove_layers_cutoff_plot'><p>remove_layers_cutoff_plot</p>
Remove layers from a cutoff plot. This is useful to show how different things
are calculated (e.g. Sensitivity)</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Plot Positive and Negative Predictive Values for Medical Tests</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-13</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gorka Navarrete &lt;gorkang@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to plot and help understand positive and negative
    predictive values (PPV and NPV), and their relationship with
    sensitivity, specificity, and prevalence. See Akobeng, A.K. (2007)
    &lt;<a href="https://doi.org/10.1111%2Fj.1651-2227.2006.00180.x">doi:10.1111/j.1651-2227.2006.00180.x</a>&gt; for a theoretical overview of
    the technical concepts and Navarrete et al. (2015) for a practical
    explanation about the importance of their understanding
    &lt;<a href="https://doi.org/10.3389%2Ffpsyg.2015.01327">doi:10.3389/fpsyg.2015.01327</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/gorkang/BayesianReasoning">https://github.com/gorkang/BayesianReasoning</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/gorkang/BayesianReasoning/issues">https://github.com/gorkang/BayesianReasoning/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr, ggforce (&ge; 0.4.0), ggplot2, ggtext, gt, magrittr,
png, reshape2, scales, stats, tibble, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>curl, httr, knitr, patchwork, purrr, rmarkdown, testthat (&ge;
3.0.0), vdiffr, webshot2</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-14 08:40:39 UTC; emrys</td>
</tr>
<tr>
<td>Author:</td>
<td>Gorka Navarrete <a href="https://orcid.org/0000-0001-7678-8656"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-14 11:33:20 UTC</td>
</tr>
</table>
<hr>
<h2 id='BayesianReasoning-package'>BayesianReasoning: Plot Positive and Negative Predictive Values for Medical Tests</h2><span id='topic+BayesianReasoning'></span><span id='topic+BayesianReasoning-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Functions to plot and help understand positive and negative predictive values (PPV and NPV), and their relationship with sensitivity, specificity, and prevalence. See Akobeng, A.K. (2007) <a href="https://doi.org/10.1111/j.1651-2227.2006.00180.x">doi:10.1111/j.1651-2227.2006.00180.x</a> for a theoretical overview of the technical concepts and Navarrete et al. (2015) for a practical explanation about the importance of their understanding <a href="https://doi.org/10.3389/fpsyg.2015.01327">doi:10.3389/fpsyg.2015.01327</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Gorka Navarrete <a href="mailto:gorkang@gmail.com">gorkang@gmail.com</a> (<a href="https://orcid.org/0000-0001-7678-8656">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/gorkang/BayesianReasoning">https://github.com/gorkang/BayesianReasoning</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/gorkang/BayesianReasoning/issues">https://github.com/gorkang/BayesianReasoning/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>Pipe operator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='min_possible_prevalence'>Show minimum possible prevalence given the test characteristics</h2><span id='topic+min_possible_prevalence'></span>

<h3>Description</h3>

<p>Given a FP and a desired PPV, what is the Minimum Prevalence of a Condition
</p>


<h3>Usage</h3>

<pre><code class='language-R'>min_possible_prevalence(Sensitivity = 95, FP_test = 1, min_PPV_desired = 90)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="min_possible_prevalence_+3A_sensitivity">Sensitivity</code></td>
<td>
<p>Sensitivity of the test: [0-100]</p>
</td></tr>
<tr><td><code id="min_possible_prevalence_+3A_fp_test">FP_test</code></td>
<td>
<p>False positive rate (1-Specificity): [0-100]</p>
</td></tr>
<tr><td><code id="min_possible_prevalence_+3A_min_ppv_desired">min_PPV_desired</code></td>
<td>
<p>Which PPV is what you consider the minimum to trust a positive result in the test: [0-100]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A description showing the minimum necessary prevalence.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example 1
min_possible_prevalence(Sensitivity = 99.9, FP_test = .1, min_PPV_desired = 70)
"To reach a PPV of 70 when using a test with 99.9 % Sensitivity and 0.1 % False Positive Rate,
you need a prevalence of at least 1 out of 429"

# Example 2
min_possible_prevalence(100, 0.1, 98)
"To reach a PPV of 98 when using a test with 100 % Sensitivity and 0.1 % False Positive Rate,
you need a prevalence of at least 1 out of 21"
</code></pre>

<hr>
<h2 id='plot_cutoff'>plot_cutoff
Create a cutoff plot, showing the healthy and sick distributions, and the 
consequences of different cutoff points</h2><span id='topic+plot_cutoff'></span>

<h3>Description</h3>

<p>plot_cutoff
Create a cutoff plot, showing the healthy and sick distributions, and the 
consequences of different cutoff points
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_cutoff(
  prevalence = 0.1,
  cutoff_point = 30,
  mean_sick = 35,
  mean_healthy = 20,
  sd_sick = 3,
  sd_healthy = 5,
  n_people = 1e+05,
  add_table = FALSE,
  output_filename = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_cutoff_+3A_prevalence">prevalence</code></td>
<td>
<p>prevalence of the disease</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_cutoff_point">cutoff_point</code></td>
<td>
<p>cutoff point to use</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_mean_sick">mean_sick</code></td>
<td>
<p>mean for the sick people distribution</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_mean_healthy">mean_healthy</code></td>
<td>
<p>mean for the healthy people distribution</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_sd_sick">sd_sick</code></td>
<td>
<p>sd for the sick people distribution</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_sd_healthy">sd_healthy</code></td>
<td>
<p>sd for the healthy people distribution</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_n_people">n_people</code></td>
<td>
<p>number of people to use</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_add_table">add_table</code></td>
<td>
<p>FALSE/TRUE: add gt table with Sensitivity, Specificity, etc.</p>
</td></tr>
<tr><td><code id="plot_cutoff_+3A_output_filename">output_filename</code></td>
<td>
<p>NULL. If a filename, will save the plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with plots and table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
plot_cutoff(prevalence = 0.2)

## End(Not run)
</code></pre>

<hr>
<h2 id='PPV_diagnostic_vs_screening'>Plot PPV values for a diagnostic and a screening group</h2><span id='topic+PPV_diagnostic_vs_screening'></span>

<h3>Description</h3>

<p>Plot PPV associated to different levels of FP and a specific Sensitivity, for two different Prevalence groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PPV_diagnostic_vs_screening(
  max_FP = 10,
  Sensitivity = 100,
  prevalence_screening_group = 100,
  prevalence_diagnostic_group = 2,
  labels_prevalence = c("Screening", "Diagnostic"),
  folder = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PPV_diagnostic_vs_screening_+3A_max_fp">max_FP</code></td>
<td>
<p>False positive rate (1-Specificity) [0-100].</p>
</td></tr>
<tr><td><code id="PPV_diagnostic_vs_screening_+3A_sensitivity">Sensitivity</code></td>
<td>
<p>Sensitivity of the test [0-100].</p>
</td></tr>
<tr><td><code id="PPV_diagnostic_vs_screening_+3A_prevalence_screening_group">prevalence_screening_group</code></td>
<td>
<p>Prevalence of the screening group, 1 out of x [1-Inf].</p>
</td></tr>
<tr><td><code id="PPV_diagnostic_vs_screening_+3A_prevalence_diagnostic_group">prevalence_diagnostic_group</code></td>
<td>
<p>Prevalence of the diagnostic group, 1 out of x [1-Inf].</p>
</td></tr>
<tr><td><code id="PPV_diagnostic_vs_screening_+3A_labels_prevalence">labels_prevalence</code></td>
<td>
<p>Labels to use for both groups.</p>
</td></tr>
<tr><td><code id="PPV_diagnostic_vs_screening_+3A_folder">folder</code></td>
<td>
<p>Where to save the plot (the filename would be automatically created using the plot parameters)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Shows a plot or, if given a folder argument, saves a .png version of the plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example 1
PPV_diagnostic_vs_screening(
  max_FP = 10, Sensitivity = 100,
  prevalence_screening_group = 1500,
  prevalence_diagnostic_group = 3
)

# Example 2. QWith custom labels
PPV_diagnostic_vs_screening(
  max_FP = 10, Sensitivity = 100,
  prevalence_screening_group = 1667,
  prevalence_diagnostic_group = 44,
  labels_prevalence = c("20 y.o.", "50 y.o.")
)
</code></pre>

<hr>
<h2 id='PPV_heatmap'>Plot PPV and NPV heatmaps</h2><span id='topic+PPV_heatmap'></span>

<h3>Description</h3>

<p>Plot heatmaps showing the PPV for a given Sensitivity and a range of Prevalences and False Positive values or NPV values for a given Specificity and a range of Prevalences and True Positive values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PPV_heatmap(
  min_Prevalence = 1,
  max_Prevalence = 1000,
  Sensitivity = NULL,
  Specificity = NULL,
  limits_Sensitivity = NULL,
  limits_Specificity = NULL,
  one_out_of = FALSE,
  overlay = "no",
  overlay_labels = "",
  overlay_extra_info = FALSE,
  overlay_position_FP = NULL,
  overlay_position_FN = NULL,
  overlay_prevalence_1 = NULL,
  overlay_prevalence_2 = NULL,
  uncertainty_prevalence = "high",
  label_title = "",
  label_subtitle = "",
  Language = "en",
  folder = "",
  PPV_NPV = "PPV",
  steps_matrix = 100,
  DEBUG = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PPV_heatmap_+3A_min_prevalence">min_Prevalence</code></td>
<td>
<p>[x] out of y prevalence of disease: [1-Inf]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_max_prevalence">max_Prevalence</code></td>
<td>
<p>x out of [y] prevalence of disease: [1-Inf]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_sensitivity">Sensitivity</code></td>
<td>
<p>Sensitivity of test: [0-100]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_specificity">Specificity</code></td>
<td>
<p>Specificity of test: [0-100]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_limits_sensitivity">limits_Sensitivity</code></td>
<td>
<p>c(min Sensitivity, max Sensitivity)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_limits_specificity">limits_Specificity</code></td>
<td>
<p>c(min Specificity, max Specificity)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_one_out_of">one_out_of</code></td>
<td>
<p>Show y scale as 1 out of x [TRUE, FALSE] FALSE by default</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_overlay">overlay</code></td>
<td>
<p>Type of overlay: [&quot;line&quot;, &quot;area&quot;]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_overlay_labels">overlay_labels</code></td>
<td>
<p>Labels for each point in the overlay. For example: c(&quot;80&quot;, &quot;70&quot;, &quot;60&quot;, &quot;50&quot;, &quot;40&quot;, &quot;30&quot;, &quot;20  y.o.&quot;)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_overlay_extra_info">overlay_extra_info</code></td>
<td>
<p>show extra info in overlay? [TRUE/FALSE]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_overlay_position_fp">overlay_position_FP</code></td>
<td>
<p>FP value (position in the x-axis) for each point in the overlay. For example: c(7, 8, 9, 12, 14, 14)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_overlay_position_fn">overlay_position_FN</code></td>
<td>
<p>FN value (position in the x-axis) for each point in the overlay. For example: c(7, 8, 9, 12, 14, 14)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_overlay_prevalence_1">overlay_prevalence_1</code></td>
<td>
<p>Prevalence value (position in the y-axis) for each point in the overlay. For example: c(1, 1, 1, 2, 1, 1)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_overlay_prevalence_2">overlay_prevalence_2</code></td>
<td>
<p>Prevalence value (position in the y-axis) for each point in the overlay. For example: c(26, 29, 44, 69, 227, 1667)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_uncertainty_prevalence">uncertainty_prevalence</code></td>
<td>
<p>How much certainty we have about the prevalence [&quot;high&quot;/&quot;low&quot;]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_label_title">label_title</code></td>
<td>
<p>Title for the plot</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_label_subtitle">label_subtitle</code></td>
<td>
<p>Subtitle for the plot</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_language">Language</code></td>
<td>
<p>Language for the plot labels: [&quot;sp&quot;, &quot;en&quot;]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_folder">folder</code></td>
<td>
<p>Where to save the plot (the filename would be automatically created using the plot parameters)</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_ppv_npv">PPV_NPV</code></td>
<td>
<p>Should show PPV or NPV [&quot;PPV&quot;, &quot;NPV&quot;]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_steps_matrix">steps_matrix</code></td>
<td>
<p>width of PPV/NPV matrix. 100 by default</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_debug">DEBUG</code></td>
<td>
<p>Shows debug warnings [TRUE/FALSE]</p>
</td></tr>
<tr><td><code id="PPV_heatmap_+3A_...">...</code></td>
<td>
<p>Other parameters. Now used to pass dpi, height and width in the Show and Save plot section</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Shows a plot or, if given a folder argument, saves a .png version of the plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>PPV_heatmap(
  min_Prevalence = 1,
  max_Prevalence = 1000,
  Sensitivity = 100,
  Specificity = 98,
  Language = "en"
)
</code></pre>

<hr>
<h2 id='remove_layers_cutoff_plot'>remove_layers_cutoff_plot
Remove layers from a cutoff plot. This is useful to show how different things
are calculated (e.g. Sensitivity)</h2><span id='topic+remove_layers_cutoff_plot'></span>

<h3>Description</h3>

<p>remove_layers_cutoff_plot
Remove layers from a cutoff plot. This is useful to show how different things
are calculated (e.g. Sensitivity)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_layers_cutoff_plot(cutoff_plot, delete_what, silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_layers_cutoff_plot_+3A_cutoff_plot">cutoff_plot</code></td>
<td>
<p>A plot_cutoff() plot</p>
</td></tr>
<tr><td><code id="remove_layers_cutoff_plot_+3A_delete_what">delete_what</code></td>
<td>
<p>Elements to delete (i.e. FP, FN, TP, TN)</p>
</td></tr>
<tr><td><code id="remove_layers_cutoff_plot_+3A_silent">silent</code></td>
<td>
<p>TRUE do not show debug info</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a cutoff plot without the elements deleted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
PLOT = plot_cutoff(prevalence = 0.2)
remove_layers_cutoff_plot(PLOT$final_plot, delete_what = c("FN", "TP")) + 
ggplot2::labs(subtitle = "Specificity = TN/(TN+FP)")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
