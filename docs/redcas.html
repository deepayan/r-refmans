<!DOCTYPE html><html lang="en"><head><title>Help for package redcas</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {redcas}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#redcas-package'>
<p>An Interface to the Computer Algebra System 'REDUCE'</p></a></li>
<li><a href='#asltx'>
<p>Convert REDUCE output to LaTeX</p></a></li>
<li><a href='#print'><p>Print a redcas.solve object</p></a></li>
<li><a href='#redcas.solve'><p>Class <code>"redcas.solve"</code></p></a></li>
<li><a href='#redClose'>
<p>function to close a REDUCE session and optionally save the log file</p></a></li>
<li><a href='#redCodeDir'>
<p>Retrieve the directory containing the REDUCE code which is part of <code>redcas</code>.</p></a></li>
<li><a href='#redDropOut'>
<p>Removes certain elements from the REDUCE output.</p></a></li>
<li><a href='#redExec'>
<p>execute REDUCE commands from R</p></a></li>
<li><a href='#redExpand'>
<p>Insert the content of a file into a vector</p></a></li>
<li><a href='#redSolve'>
<p>function to solve a system of equations using the REDUCE  <code>solve</code> operator</p></a></li>
<li><a href='#redSplitOut'>
<p>convert the vector returned by redExec into commands and command output.</p></a></li>
<li><a href='#redStart'>
<p>function to start a REDUCE session</p></a></li>
<li><a href='#showSessions'>
<p>function to list details for currently active REDUCE sessions.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), methods</td>
</tr>
<tr>
<td>Title:</td>
<td>An Interface to the Computer Algebra System 'REDUCE'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-11-05</td>
</tr>
<tr>
<td>Author:</td>
<td>Martin Gregory [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Martin Gregory &lt;mairtin.macghreagoir@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>'REDUCE' is a portable general-purpose computer algebra system supporting scalar, vector, matrix and tensor algebra, symbolic differential and integral calculus, arbitrary precision numerical calculations and output in 'LaTeX' format. 'REDUCE' is based on 'Lisp' and is available on the two dialects 'Portable Standard Lisp' ('PSL') and 'Codemist Standard Lisp' ('CSL'). The 'redcas' package provides an interface for executing arbitrary 'REDUCE' code interactively from 'R', returning output as character vectors. 'R' code and 'REDUCE' code can be interspersed. It also provides a specialized function for calling the 'REDUCE' feature for solving systems of equations, returning the output as an 'R' object designed for the purpose. A further specialized function uses 'REDUCE' features to generate 'LaTeX' output and post-processes this for direct use in 'LaTeX' documents, e.g. using 'Sweave'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>'REDUCE' &lt;http://www.reduce-algebra.com&gt;. At least
one of the 'CSL' or 'PSL' dialects must be installed in order
to use the package. Tested with 'REDUCE' releases 6860 and 6558
for both 'CSL' and 'PSL' on Linux, and 6558 and 6339 for 'CSL'
on MacOS</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>OS_type:</td>
<td>unix</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-05 16:30:11 UTC; mg</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-08 14:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='redcas-package'>
An Interface to the Computer Algebra System 'REDUCE'
</h2><span id='topic+redcas-package'></span><span id='topic+redcas'></span>

<h3>Description</h3>

<p>'REDUCE' is a portable general-purpose computer algebra system supporting scalar, vector, matrix and tensor algebra, symbolic differential and integral calculus, arbitrary precision numerical calculations and output in 'LaTeX' format. 'REDUCE' is based on 'Lisp' and is available on the two dialects 'Portable Standard Lisp' ('PSL') and 'Codemist Standard Lisp' ('CSL'). The 'redcas' package provides an interface for executing arbitrary 'REDUCE' code interactively from 'R', returning output as character vectors. 'R' code and 'REDUCE' code can be interspersed. It also provides a specialized function for calling the 'REDUCE' feature for solving systems of equations, returning the output as an 'R' object designed for the purpose. A further specialized function uses 'REDUCE' features to generate 'LaTeX' output and post-processes this for direct use in 'LaTeX' documents, e.g. using 'Sweave'.
</p>


<h3>Details</h3>

<p>The package allows you to start a REDUCE session
(<code><a href="#topic+redStart">redStart</a></code>), send one or more vectors of REDUCE commands
to the session for execution and retrieve the
output (<code><a href="#topic+redExec">redExec</a></code>), render output as LaTeX
(<code><a href="#topic+asltx">asltx</a></code>), and shut down the session and optionally return
the entire output file (<code><a href="#topic+redClose">redClose</a></code>). Output is returned as
a list of character vectors containing the command output, the commands
and the combined comands and output. <code>redcas</code> can also directly
call the REDUCE operator for solving algebraic equations
(<code><a href="#topic+redSolve">redSolve</a></code>), returning a <code><a href="#topic+redcas.solve">redcas.solve</a></code>
object.
</p>
<p>Several other functions are available: <code><a href="#topic+redExpand">redExpand</a></code> is called by
<code>redExec</code> for checking and preparing the input vector while
<code><a href="#topic+redDropOut">redDropOut</a></code> and <code><a href="#topic+redSplitOut">redSplitOut</a></code> are called by
<code>redExec</code> to format the output. All three can be called
independently of <code>redExec</code>.
</p>
<p>REDUCE uses a different terminology to R. Some translations:
</p>

<table>
<tr>
 <td style="text-align: right;">
  <b>REDUCE</b>   </td><td style="text-align: left;"> <b>R</b> </td>
</tr>
<tr>
 <td style="text-align: right;">
  command:   </td><td style="text-align: left;"> statement </td>
</tr>
<tr>
 <td style="text-align: right;">
  log: </td><td style="text-align: left;"> transcript </td>
</tr>
<tr>
 <td style="text-align: right;">
  operator (prefix):   </td><td style="text-align: left;"> function </td>
</tr>
<tr>
 <td style="text-align: right;">
  operator (infix):   </td><td style="text-align: left;"> operator </td>
</tr>
<tr>
 <td style="text-align: right;">
  procedure:   </td><td style="text-align: left;"> function </td>
</tr>
<tr>
 <td style="text-align: right;">
  switch: </td><td style="text-align: left;"> (global) option </td>
</tr>
<tr>
 <td style="text-align: right;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Martin Gregory [aut, cre]
</p>
<p>Maintainer: Martin Gregory &lt;mairtin.macghreagoir@gmail.com&gt;
</p>


<h3>References</h3>

<p>Details of the REDUCE system including extensive documentation is
available at the <a href="http://www.reduce-algebra.com/">REDUCE web site</a>. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## start a session
id &lt;- redStart()

## can only run code if session was successfully started
if (is.numeric(id)) {
   ## define vectors of REDUCE code for submission
   x1 &lt;- "solve((x+1)^2, x);"
   x2 &lt;- "b:=factorize(45056);"
   x3 &lt;- c("operator v; ",
	   "la:=-m/(v(2)^2 + v(3)^2)^(1/2) ;")

   ## execute x1 and display on the output of the commands
   y1 &lt;- redExec(id, x1)
   writeLines(y1$out)

   ## execute x2 and display first the output and then the commands
   y2 &lt;- redExec(id, x2)
   writeLines(c(y2$out, y2$cmd))

   ## execute x3 and display the log (commands and output interspersed)
   writeLines(y3 &lt;- redExec(id, x3, split=FALSE))

   ## close the session
   redClose(id)
   }
</code></pre>

<hr>
<h2 id='asltx'>
Convert REDUCE output to LaTeX
</h2><span id='topic+asltx'></span>

<h3>Description</h3>

<p>sends the name of an array or expression to the REDUCE process for
display either as is or as LaTeX using the FANCY switch. If the object
is an array, each element is printed. The LaTeX produced by REDUCE is
then post-processed to translate object names according to a map
specified by the user, to convert array arguments to indices and,
optionally, to enclose the result in a math environment specified by the
user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>asltx(id, x, usermap, mathenv="", mode="fancy", notify=0, timeout=0, debug=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="asltx_+3A_id">id</code></td>
<td>

<p>session identification returned by <code><a href="#topic+redStart">redStart</a></code>. Required.
</p>
</td></tr>
<tr><td><code id="asltx_+3A_x">x</code></td>
<td>

<p>A character vector with one element naming the object to display.
</p>
</td></tr>
<tr><td><code id="asltx_+3A_usermap">usermap</code></td>
<td>

<p>A list containing one or both of the following items:
</p>

<dl>
<dt>ident</dt><dd><p>a named character vector specifying translation of
REDUCE identifiers to LaTeX names. The element name is the REDUCE
identifier and the value the LaTeX name.</p>
</dd>  
<dt>index</dt><dd><p>a named character vector specifying the conversion of
arguments to indices. The name specifies which identifier to
process. Since this mapping is done after the identifier
mapping, you need to use the LaTeX name for any name you have
mapped. The value is a sequence of <code>^</code> and <code>_</code>
characters specifiying whether the index is contravariant
(superscript) or covariant (subscript), respectively.</p>
</dd>
</dl>

<p>This argument is optional. Default is no user-specified translation. 
</p>
</td></tr>
<tr><td><code id="asltx_+3A_mathenv">mathenv</code></td>
<td>

<p>Character. The name of a LaTeX math environment in which to enclose
an expression or each element of an array. Defaults to no
environment. This is useful for displaying the array elements in a
subordinate math environment, for example <code>\dmath*</code> within a
<code>dgroup</code> environment. 
</p>
</td></tr>
<tr><td><code id="asltx_+3A_mode">mode</code></td>
<td>

<p>Character. Whether to display <code>x</code> as LaTeX (<code>"fancy"</code>)
or not (<code>"nat"</code>). Default is <code>"fancy"</code>. <code>""</code> is
treated as <code>"nat"</code>.
</p>
</td></tr>
<tr><td><code id="asltx_+3A_notify">notify</code></td>
<td>

<p>while waiting for the REDUCE commands to complete, write a note to
the console every <code style="white-space: pre;">&#8288;notify&#8288;</code> seconds. Default is zero which
suppresses the message.
</p>
</td></tr>
<tr><td><code id="asltx_+3A_timeout">timeout</code></td>
<td>

<p>numer of seconds after which to terminate the function if it is
still waiting for output from the REDUCE process. Default is 0
which will never initiate termination.
</p>
</td></tr>
<tr><td><code id="asltx_+3A_debug">debug</code></td>
<td>
<p>Boolean. When TRUE the mappings are printed to enable
debugging since regular expressions can be tricky. Default is FALSE. 
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>asltx  uses <code>redExec</code> to display the object <code>x</code> as
desired by:
</p>

<ol>
<li><p> constructing a call to the REDUCE function <code>asltx</code> with
appropriate quoting of the arguments;
</p>
</li>
<li><p> executing this call using <a href="#topic+redExec">redExec</a> and specifying
<code>split=TRUE</code>; 
</p>
</li>
<li><p> applying a standard set of transformations to remove some
non-LaTeX markup and perform some conversions on the result. See
below;
</p>
</li>
<li><p> applying a set of transformations specified by the
<code>usermap</code> argument. 
</p>
</li></ol>



<h4>Features of REDUCE conversion to LaTeX</h4>

<p> REDUCE provides
three different methods for converting output to LaTeX, the packages
TMPRINT, RLFI and TRI. <span class="pkg">redcas</span> uses the TMPRINT package which
was designed for use with the TeXmacs editor (hence TM) and triggers
conversion using the <code>fancy</code> and <code>fancy_tex</code>
switches. TMPRINT was chosen because it can be easily applied to
fragments, supports using the <code>\frac</code> command, produces
LaTeX output and is well supported. In contrast RLFI is designed to
produce complete documents using LaTeX 2.09 syntax and does not
support the <code>\frac</code> command. TRI produces plain TeX output.
</p>
<p>TMPRINT supports
</p>

<ol>
<li><p> inserting <code>\left</code> and <code>\right</code> in nested
parentheses, braces and brackets;
</p>
</li>
<li><p> converting variables whose names are those of Greek letters
to the corresponding LaTeX command. Capitalized names are mapped
to the command for the capital. For example, <code>psi</code> is
mapped to <code>\psi</code> while <code>Psi</code> is mapped to
<code>\Psi</code>. There are two exceptions; <code>epsilon</code> and
<code>kappa</code> are mapped to <code>\varepsilon</code> and
<code>\varkappa</code>, respectively. If you need
<code>\epsilon</code> or <code>\kappa</code> you can use the
<code>usermap</code> argument;
</p>
</li>
<li><p> the following names are mapped to special symbols:
</p>

<table>
<tr>
 <td style="text-align: left;">
	infinity     </td><td style="text-align: center;"> </td><td style="text-align: left;"> \infty    </td><td style="text-align: center;"> </td><td style="text-align: left;"> union        </td><td style="text-align: center;"> </td><td style="text-align: left;"> \cup        </td>
</tr>
<tr>
 <td style="text-align: left;">
	partial!-df  </td><td style="text-align: center;"> </td><td style="text-align: left;"> \partial  </td><td style="text-align: center;"> </td><td style="text-align: left;"> member       </td><td style="text-align: center;"> </td><td style="text-align: left;"> \in         </td>
</tr>
<tr>
 <td style="text-align: left;">
	empty!-set   </td><td style="text-align: center;"> </td><td style="text-align: left;"> \emptyset </td><td style="text-align: center;"> </td><td style="text-align: left;"> and          </td><td style="text-align: center;"> </td><td style="text-align: left;"> \wedge      </td>
</tr>
<tr>
 <td style="text-align: left;">
	not          </td><td style="text-align: center;"> </td><td style="text-align: left;"> \neg      </td><td style="text-align: center;"> </td><td style="text-align: left;"> or           </td><td style="text-align: center;"> </td><td style="text-align: left;"> \vee        </td>
</tr>
<tr>
 <td style="text-align: left;">
	not          </td><td style="text-align: center;"> </td><td style="text-align: left;"> \neg      </td><td style="text-align: center;"> </td><td style="text-align: left;"> when         </td><td style="text-align: center;"> </td><td style="text-align: left;"> |            </td>
</tr>
<tr>
 <td style="text-align: left;">
	leq          </td><td style="text-align: center;"> </td><td style="text-align: left;"> \leq      </td><td style="text-align: center;"> </td><td style="text-align: left;"> !*wcomma!*   </td><td style="text-align: center;"> </td><td style="text-align: left;"> ,\,         </td>
</tr>
<tr>
 <td style="text-align: left;">
	geq          </td><td style="text-align: center;"> </td><td style="text-align: left;"> \geq      </td><td style="text-align: center;"> </td><td style="text-align: left;"> replaceby    </td><td style="text-align: center;"> </td><td style="text-align: left;"> \Rightarrow </td>
</tr>
<tr>
 <td style="text-align: left;">
	neq          </td><td style="text-align: center;"> </td><td style="text-align: left;"> \neq      </td><td style="text-align: center;"> </td><td style="text-align: left;"> !~           </td><td style="text-align: center;"> </td><td style="text-align: left;"> \forall     </td>
</tr>
<tr>
 <td style="text-align: left;">
	intersection </td><td style="text-align: center;"> </td><td style="text-align: left;"> \cap      </td><td style="text-align: center;"> </td><td style="text-align: left;">              </td><td style="text-align: center;"> </td><td style="text-align: left;">              </td>
</tr>
<tr>
 <td style="text-align: left;">
      </td>
</tr>

</table>

</li></ol>




<h4>Standard transformations</h4>

<p>Standard transformations done by <code>asltx</code> are as follows:
</p>

<ol>
<li><p> removal of markup used for interactive display in TeXmacs and
which has no correspondence with LaTeX markup;
</p>
</li>
<li><p> replacement of REDUCE assignments <code>:=</code> and <code>~:=~</code>
with a plain equals sign;
</p>
</li>
<li><p> reversing the unwanted conversion of numeric suffix to
index. The REDUCE FANCY option assumes that a numeric suffix to a
variable is a subscript index even when the variable is an array,
e.g. <code>cs1(a,b)</code> is converted to
<code>cs_{1}(a,b)</code>. <code>asltx</code> undoes this conversion. 
</p>
</li>
<li><p> removal of redundant  <code>mathrm</code> commands;
</p>
</li>
<li><p> removal of unnecessary trailing spaces from Greek capitals;
</p>
</li>
<li><p> replacement of <code>mathit{Q}</code> with <code>mathrm{Q}</code> where
<code>Q</code> is one of the Greek capitals A, B, E, Z, H, I, M, N, O,
P. i.e. those which have the same form as a Latin capital. This
transformation is required to have the same type for as the
Greek-only capitals.
</p>
</li></ol>




<h4>User transformations</h4>

<p>The <code>usermap</code> argument allows renaming variables, converting
arguments in REDUCE objects to indices and specifying whether
indices are covariant or contravariant. If a LaTeX command is used
in the map, four backslashes are required to get the single
backslash for LaTeX because the mapping is done using regular
expressions. For example suppose we have arrays <code>s</code>, <code>g</code>,
<code>kminus</code> and <code>kplus</code> in REDUCE and want the following
mapping to LaTeX
</p>

<table>
<tr>
 <td style="text-align: left;">
	REDUCE </td><td style="text-align: left;"> LaTeX </td>
</tr>
<tr>
 <td style="text-align: left;">
	s </td><td style="text-align: left;"> \Sigma </td>
</tr>
<tr>
 <td style="text-align: left;">
	g </td><td style="text-align: left;"> g </td>
</tr>
<tr>
 <td style="text-align: left;">
	kminus </td><td style="text-align: left;"> K^- </td>
</tr>
<tr>
 <td style="text-align: left;">
	kplus </td><td style="text-align: left;"> K^+ </td>
</tr>
<tr>
 <td style="text-align: left;">
      </td>
</tr>

</table>

<p>then the <code>ident</code> element of the list passed to <code>usermap</code>
would be
</p>
<pre>ident=c("s"="\\\\Sigma", kminus="K^-", kplus="K^\\+")</pre>
<p>Since we are not mapping <code>g</code> it does not need to appear here.
</p>
<p>To illustrate mapping arguments to indices, assume that  all four
arrays in the example above are two dimensional and <code>s</code> has one
subscript and one superscript, <code>g</code> and <code>kminus</code> have two
subscripts and <code>kplus</code> has two superscripts then the
<code>index</code> element will be   
</p>
<pre>index=c("\\\\Sigma"="_^", "g"="__", "K^-"="__", "K^\\+"="^^")</pre>
<p>Note that the name of the <code>index</code> elements must be the result
of applying the <code>ident</code> mapping. The names are regular
expressions so the character <code>+</code> must be escaped in the names. 
</p>



<h3>Value</h3>

<p>A list containing the following elements is returned:
</p>

<dl>
<dt>tex</dt><dd><p>the transformed LaTeX output;</p>
</dd>
<dt>out</dt><dd><p>the output of the executed commands;</p>
</dd>
<dt>cmd</dt><dd><p>the executed commands</p>
</dd>
<dt>raw</dt><dd><p>the interspersed commands and output.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Martin Gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redExec">redExec</a></code> for details of executing REDUCE code.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## start the session
s1 &lt;- redStart()

## can only run code if session was successfully started
if (is.numeric(s1)) {
   ## create the arrays
   redcode &lt;- c("array g(2,2), s(3,3), kplus(2,2), kminus(2,2) ;",
		"operator x;",
		"g(0,0) := -u^(-2);",
		"g(1,1) := (u*x(3))^2;",
		"g(2,2) := g(1,1) * (sin(x(1)))^2;",
		"s(0,0) := 0;",
		"s(1,1) := df((u*x(3))^2, x(3));",
		"s(2,2) := df(g(2,2), x(1));",
		"s(3,3) := u^2;",
		"kplus(0,0) := df(g(0,0), u);",
		"kplus(1,1) := df(g(1,1), u);",
		"kplus(2,2) := df(g(2,2), u) ;",
		"kminus(0,0) := df(g(2,2), u);",
		"kminus(1,1) := df(g(1,1), u);",
		"kminus(2,2) := df(g(0,0), u) ;",
		"on nero ;"
		)

   o2 &lt;- redExec(s1, redcode)

   ## create LaTeX output 
   writeLines(c("", asltx(s1, "g", mathenv="")[["tex"]], ""))
   writeLines(c("", asltx(s1, "s", mathenv="")[["tex"]], ""))
   writeLines(c("", asltx(s1, "kplus", mathenv="")[["tex"]], ""))
   writeLines(c("", asltx(s1, "kminus", mathenv="")[["tex"]], ""))

   ## close the session
   redClose(s1)
}
</code></pre>

<hr>
<h2 id='print'>Print a redcas.solve object</h2><span id='topic+print'></span><span id='topic+print+2Credcas.solve-method'></span>

<h3>Description</h3>

<p><code>print.redcas.solve</code> is a print method for function <code>print</code> in
package <span class="pkg">base</span>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print(x, ...) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+redcas.solve">redcas.solve</a></code> object returned by the function
<code><a href="#topic+redSolve">redSolve</a></code>.</p>
</td></tr>
<tr><td><code id="print_+3A_...">...</code></td>
<td>
<p> other arguments passed to print.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>print.redcas.solve</code> displays the equations, solutions if any and
the list of unknowns and switches. The solutions displayed are those
returned from REDUCE without any transformation to R objects.
</p>
<p>The layout depends on the length of the individual solution values and
the <code>width</code> option.  If there is sufficient space, the solutions
for each unknown are printed in separate columns on the same line, for
example with a width of 80, the output of the example below will be:
</p>
<pre>Equations:
  x+y+z = 0
  x^2 + y^2 + z^2 = 9
  x^2 + y^2 = z^2

Number of solutions: 4

Solutions:
               x               y               z
   2.12132034356               0  -2.12132034356
  -2.12132034356               0   2.12132034356
               0   2.12132034356  -2.12132034356
               0  -2.12132034356   2.12132034356

Unknowns: x,y,z
Switches:  rounded
</pre>
<p>If all values for a solution with not fit on a line, they are printed
below each other. With a width of 30, the solutions section would be
</p>
<pre>Solution 1:
x:    2.12132034356
y:                0
z:   -2.12132034356

Solution 2:
x:   -2.12132034356
y:                0
z:    2.12132034356

Solution 3:
x:                0
y:    2.12132034356
z:   -2.12132034356

Solution 4:
x:                0
y:   -2.12132034356
z:    2.12132034356
</pre>


<h3>Value</h3>

<p><code>print.redcas.solve</code> is called for its side-effect and returns NULL.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## start the session
r0 &lt;- redStart()

## can only run code if session was successfully started
if (is.numeric(r0)) {
   rsobj &lt;- redSolve(id=r0,
		     eqns=c("x+y+z = 0", "x^2 + y^2 + z^2 = 9", "x^2 + y^2 = z^2"),
		     unknowns=c("x", "y", "z"),
		     switch=c("on rounded;") )
   print(rsobj)
   redClose(r0)
}</code></pre>

<hr>
<h2 id='redcas.solve'>Class <code>"redcas.solve"</code></h2><span id='topic+redcas.solve'></span><span id='topic+redcas.solve-class'></span>

<h3>Description</h3>

<p>Contains the inputs and outputs of a call to the function
<code><a href="#topic+redSolve">redSolve</a></code> which executes the REDUCE <code>solve</code> operator
to determine solutions to a system of algebraic equations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redcas.solve(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redcas.solve_+3A_...">...</code></td>
<td>

<p>see section Slots for details.
</p>
</td></tr>
</table>


<h3>Objects from the Class</h3>

<p>Objects are created by calls to the function <code>redSolve</code> and can be
used as input to the <code><a href="#topic+print">print</a></code> method.
</p>


<h3>Slots</h3>


<dl>
<dt><code>.Data</code>:</dt><dd><p>Object of class <code>"list"</code> containing the
actual data.</p>
</dd>
<dt><code>solutions</code>:</dt><dd><p>Object of class <code>"list"</code>
containing a character vector  for each solution of the system of
equations. The character vectors have a named element for each
unknown  with the name being the unknown and the value being the
value of the unknown for the solution. This is essentially a copy
of the list returned by the REDUCE <code>solve</code> operator. </p>
</dd>
<dt><code>rsolutions</code>:</dt><dd><p>Object of class <code>"list"</code> containing a
list for each solution converted to appropriate R types where
possible. A vector will not suffice because the values of the
unknowns may be of different types: integer, real, complex or
expression. Explicit real and complex numbers are always
converted. If the REDUCE switch <code>ROUNDED</code> is off, real and
complex numbers may be expressions and may result in errors or NaN
if conversion were attempted. </p>
</dd>
<dt><code>nsolutions</code>:</dt><dd><p>Object of class <code>"numeric"</code>. The
number of solutions </p>
</dd>
<dt><code>rc</code>:</dt><dd><p>Object of class <code>"numeric"</code>. Return code from
the <code>redSolve</code> call: 0 is success and 1 failure. </p>
</dd>
<dt><code>root_of</code>:</dt><dd><p>Object of class <code>"complex"</code>. A solution
may express one or more unknowns in terms of the roots of
another equation. In this case the other equation is enclosed in
<code>root_of()</code>. This slot is a complex vector with the real part
identifying the solution contain <code>root_of()</code> and the
imaginary part the index of the unknown in that solution.</p>
</dd>
<dt><code>eqns</code>:</dt><dd><p>Object of class <code>"character"</code>. The system
of equations provided to <code>redSolve</code> </p>
</dd>
<dt><code>unknowns</code>:</dt><dd><p>Object of class <code>"character"</code>. The
unknowns provided to <code>redSolve</code> </p>
</dd>
<dt><code>switches</code>:</dt><dd><p>Object of class <code>"character"</code>. Any REDUCE
switches set prior to executing the REDUCE <code>solve</code>
function.</p>
</dd>
</dl>



<h3>Extends</h3>

<p>Class <code>"<a href="methods.html#topic+list-class">list</a>"</code>, from data part.
Class <code>"<a href="methods.html#topic+vector-class">vector</a>"</code>, by class &quot;list&quot;, distance 2.
</p>


<h3>Methods</h3>

<p>A print method, <code><a href="#topic+print">print</a></code>, is defined.
</p>


<h3>Author(s)</h3>

<p>Martin Gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redSolve">redSolve</a></code> is currently the only function using this class.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>showClass("redcas.solve")
</code></pre>

<hr>
<h2 id='redClose'>
function to close a REDUCE session and optionally save the log file
</h2><span id='topic+redClose'></span>

<h3>Description</h3>

<p><code>redClose</code> closes the connection to  the REDUCE session thereby
ending the session. If requested the log file is copied from the
temporary location to one specified by the <code>log</code> argument. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redClose(id, log)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redClose_+3A_id">id</code></td>
<td>
<p>the session identifier returned by
<code><a href="#topic+redStart">redStart</a></code>. Required with no default
</p>
</td></tr>
<tr><td><code id="redClose_+3A_log">log</code></td>
<td>
<p>the path to the location in which to save the session's log
file. Optional.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The session log returned by <code>redClose</code> includes the submit block
markers set by <code><a href="#topic+redExec">redExec</a></code>.
</p>
<p>In addition to closing the connection, redClose removes the session's
entry from the session registry.
</p>


<h3>Value</h3>

<p><code>redClose</code> returns TRUE if the session is closed, FALSE if it does
not exist.
</p>


<h3>Author(s)</h3>

<p>martin gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redStart">redStart</a></code> for creating a REDUCE session and
<code><a href="#topic+showSessions">showSessions</a></code> to display the session registry.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Open a CSL session:
s1 &lt;- redStart()
## can only run code if session was successfully started
if (is.numeric(s1)) {
   ## show session details:
   print(showSessions())
   ## close session:
   redClose(s1)
}
</code></pre>

<hr>
<h2 id='redCodeDir'>
Retrieve the directory containing the REDUCE code which is part of <code>redcas</code>. 
</h2><span id='topic+redCodeDir'></span>

<h3>Description</h3>

<p><code>redCodeDir</code> retrieves the full path to the directory containing
the REDUCE code which is part of <code>redcas</code>. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redCodeDir()
</code></pre>


<h3>Details</h3>

<p>In addition to returning the REDUCE code directory, <code>redCodedir</code>
assigns three environment variables:
</p>

<dl>
<dt>REDCODEDIR</dt><dd><p>the full path to the directory containing the REDUCE
code which is the <code>reduce</code> sub-directory of the <code>redcas</code>
package; 
</p>
</dd>
<dt>REDCAS_CODE_PATH</dt><dd><p>the full path to the program <code>redcas.red</code>
which defines REDUCE procedures used by <code>redcas</code>;
</p>
</dd>
<dt>TMPRINT_PSL_PATH</dt><dd><p>the full path to the program <code>tmprint-psl.red</code>
which makes a modified version of the REDUCE package TMPRINT which
implements LaTeX rendering for the PSL dialect. The change is minor
and is designed to ensure that the TeXmacs markup is identical to
that of CSL.
</p>
</dd>
</dl>

<p>You can use the two programs directly in REDUCE. You need only load
<code>redcas.red</code> as it loads <code>tmprint-psl.red</code> if executing in
PSL. In order to have <code>tmprint-psl.red</code> loaded, you must assign the
environment variable <code>TMPRINT_PSL_PATH</code> before starting
REDUCE. 
</p>


<h3>Value</h3>

<p><code>redCodeDir</code> returns the full path to the directory containing
the REDUCE code which is part of <code>redcas</code>.
</p>


<h3>Author(s)</h3>

<p>martin gregory
</p>


<h3>Examples</h3>

<pre><code class='language-R'>redCodeDir()
Sys.getenv("REDCAS_CODE_PATH")
Sys.getenv("TMPRINT_PSL_PATH")
</code></pre>

<hr>
<h2 id='redDropOut'>
Removes certain elements from the REDUCE output.
</h2><span id='topic+redDropOut'></span>

<h3>Description</h3>

<p>Removes blank lines or the submit block end marker from the REDUCE output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redDropOut(x, what)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redDropOut_+3A_x">x</code></td>
<td>

<p>a character vector containing REDUCE output
</p>
</td></tr>
<tr><td><code id="redDropOut_+3A_what">what</code></td>
<td>
<p>a character string describing what to
drop. <code>what='blank'</code> removes blank lines, i.e. those matching
regular expression &quot;^$&quot; while <code>what='marker'</code> removes the end
of block marker</p>
</td></tr> 
</table>


<h3>Details</h3>

<p><code>redDropOut</code> is called by <code><a href="#topic+redExec">redExec</a></code> if the option
<code>drop.blank.lines</code> is TRUE, so you generally do not need to
call it explicity. If you have forgotten to set the option, you can
use this function to remove blank lines.
</p>
<p>The purpose of <code>what='marker'</code> is to remove the end of block
marker described in the details section of <code><a href="#topic+redExec">redExec</a></code>. This
may be useful if you need to process a REDUCE transcript not produced
by <code>redcas</code>.
</p>
<p>When removing blank lines and the output is not LaTeX or the switch
NAT is on, output may be difficult to read and difficult to parse.
</p>


<h3>Value</h3>

<p>The input vector with the corresponding elements removed.
</p>


<h3>Author(s)</h3>

<p>Martin Gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redExec">redExec</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("first", "", "last")
## this will return elements 1 and 3:
redDropOut(x, "blank")
</code></pre>

<hr>
<h2 id='redExec'>
execute REDUCE commands from R
</h2><span id='topic+redExec'></span>

<h3>Description</h3>

<p>sends a vector of commands to the REDUCE process for execution and
retrieves and formats the output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redExec(id, x, split = TRUE, drop.blank.lines = FALSE, notify=0, timeout=0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redExec_+3A_id">id</code></td>
<td>

<p>session identification returned by <code><a href="#topic+redStart">redStart</a></code>. Required.
</p>
</td></tr>
<tr><td><code id="redExec_+3A_x">x</code></td>
<td>

<p>A character vector contain either the REDUCE commands to execute,
the names of REDUCE command files or a mixture of both. Required.
</p>
</td></tr>
<tr><td><code id="redExec_+3A_split">split</code></td>
<td>

<p>Logical. Should the output be split into separate vectors for echoed
commands and for output. Default TRUE.
</p>
</td></tr>
<tr><td><code id="redExec_+3A_drop.blank.lines">drop.blank.lines</code></td>
<td>

<p>Logical. Should blank lines be removed from the output? Default FALSE.
</p>
</td></tr>
<tr><td><code id="redExec_+3A_notify">notify</code></td>
<td>

<p>while waiting for the REDUCE commands to complete, write a note to
the console every <code style="white-space: pre;">&#8288;notify&#8288;</code> seconds. Default is zero which
suppresses the message.
</p>
</td></tr>
<tr><td><code id="redExec_+3A_timeout">timeout</code></td>
<td>

<p>numer of seconds after which to terminate the function if it is
still waiting for output from the REDUCE process. Default is 0
which will never initiate termination.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Before submitting the vector <code>x</code>, <code>redExec</code> modifies it as
follows:
</p>

<ul>
<li><p> inserts a &quot;;&quot; terminator at the start of <code>x</code>. This is
required to ensure that the first command in the next submit block
has a number. Numbers are required to distinguish commands from
command output;
</p>
</li>
<li><p> replaces any file names in <code>x</code> with their contents. This
means that the contents of the files are executed directly and not
via an <code>IN</code> or <code>IN_TEX</code> command. Files are specified by
preceding the filename with <code>file:</code>. A terminator is not
required and, if present, is ignored;
</p>
</li>
<li><p> appends a command to <code>x</code> in order to set an end of block
marker. This is required so that <code>redExec</code> can wait until 
all the commands submitted have been executed. This is especially
important for commands which run for a long time.
</p>
</li></ul>

<p>When reading the output from the submitted commands, <code>redExec</code>
removes the end of block command and the marker it sets. 
</p>
<p>Care must be taken when using the <code>drop.blank.lines</code> option. In
particular, if using the REDUCE <code>NAT</code> switch, which is the
default, and output is not formatted for LaTeX, it may be difficult to
read the output.
</p>
<p>If REDUCE prompts for input during a sumbit block, <code>redExec</code> will
write an informative message, return the output and close the session,
writing the log to the current directory.  This most likely happens if
you use a variable as an operator but did not declare it as such. One
way to avoid this is to turn off the switch INT which causes REDUCE to
declare any undeclared operators it encounters. If you do this, be
sure to turn on INT before you call <code>redClose</code> as otherwise the
REDUCE session will hang. You should use the code <code>on int;;</code>.
Note that both semicolons are required. Since REDUCE is run via a
pipe, INT is on by default.
</p>
<p>If the last statement (element of <code>x</code>) is missing a terminator
(semi-colon or dollar sign) <code>redExec</code> checks whether the last
non-blank, non-comment element of the input vector has a
terminator. If not it stops with an appropriate message and returns
FALSE. This reduces the likelihood that <code>redExec</code> fails to
return.  </p>


<h3>Value</h3>

<p>Like R, the REDUCE log contains both commands and outputs. If split is
TRUE a list containing the following elements is returned:
</p>

<dl>
<dt>out</dt><dd><p>the output of the executed commands;</p>
</dd>
<dt>cmd</dt><dd><p>the executed commands</p>
</dd>
<dt>raw</dt><dd><p>the interspersed commands and output.</p>
</dd>
</dl>

<p>If split is FALSE, <code>redExec</code> returns a character vector with the
output from the REDUCE commands. 
</p>


<h3>Author(s)</h3>

<p>Martin Gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redStart">redStart</a></code> for starting a REDUCE session,
<code><a href="#topic+redSplitOut">redSplitOut</a></code> and   <code><a href="#topic+redDropOut">redDropOut</a></code> for
post-processing the output if the <code>split</code> or
<code>drop.blank.lines</code> are not used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>s1 &lt;- redStart()

## can only run code if session was successfully started
if (is.numeric(s1)) {
   ## submit with neither split nor drop.blank.lines
   x1 &lt;- c("solve((x+1)^2, x);",
	   "b:=factorize(45056);",
	   "operator v; ",
	   "la:=-m/(v(2)^2 + v(3)^2)^(1/2) ;")
   writeLines("## submit with neither split nor drop.blank.lines")
   writeLines(y1 &lt;- redExec(s1, x1, split=FALSE))

   ## submit with split=TRUE and drop.blank.lines=TRUE
   writeLines("\n## submit with split=TRUE and drop.blank.lines=TRUE")
   writeLines(redExec(s1, x1, drop.blank.lines=TRUE)[["out"]])

   ## submit with file name in input
   tfile &lt;- tempfile('reduce')
   writeLines(c(paste0('write "code from ', tfile, '";'),
		"b:=factorize(54056);"),
	      tfile)
   x3 &lt;- c("la:=-m/(v(2)^2 + v(3)^2)^(1/2) ;",
	   paste0("file:",tfile))
   y3 &lt;- redExec(s1, x3, split=TRUE)
   writeLines("\n## submit with file name in input")
   writeLines("## commands")
   writeLines(y3$cmd)
   writeLines("\n## output")
   writeLines(y3$out)
   redClose(s1)
}
</code></pre>

<hr>
<h2 id='redExpand'>
Insert the content of a file into a vector
</h2><span id='topic+redExpand'></span>

<h3>Description</h3>

<p>A vector of REDUCE commands may contain the name of a file containing
REDUCE commands. <code>redExpand</code> returns a vector containing the
commands up to the element containing the file name, the contents of the
file and the elements following the file name. Multiple files may be
specified in the input vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redExpand(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redExpand_+3A_x">x</code></td>
<td>
<p>vector of commands to submit to REDUCE, possibly including
names of files of commands to submit.    
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>redExpand</code> is called by <code><a href="#topic+redExec">redExec</a></code> before submitting
commands so it is generally not necessary to call it explicitly. It
can be used if you wish do the expansion yourself. If the input vector
elements x<sub>j</sub>, x<sub>k</sub>,
where j &lt; k, 
are file references, then the output  vector will consist of
</p>

<ul>
<li> x<sub>1</sub>...x<sub>j-1</sub>
</li>
<li><p> the contents of x<sub>j</sub>
</p>
</li>
<li> x<sub>j+1</sub>...x<sub>k-1</sub>
</li>
<li><p> the contents of x<sub>k</sub>
</p>
</li>
<li> x<sub>k+1</sub>...x<sub>n</sub>
</li></ul>



<h3>Value</h3>

<p>a character vector containing the commands to submit with any file
names replaced by their contents.
</p>


<h3>Author(s)</h3>

<p>Martin Gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redExec">redExec</a></code>
</p>

<hr>
<h2 id='redSolve'>
function to solve a system of equations using the REDUCE  <code>solve</code> operator
</h2><span id='topic+redSolve'></span>

<h3>Description</h3>

<p><code>redSolve</code> generates code for the REDUCE <code>solve</code> operator,
executes it and converts the result to appropriate R
objects if possible.</p>


<h3>Usage</h3>

<pre><code class='language-R'>redSolve(id, eqns, unknowns, switches)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redSolve_+3A_id">id</code></td>
<td>
<p>the session identifier returned by
<code><a href="#topic+redStart">redStart</a></code>. Required with no default </p>
</td></tr>
<tr><td><code id="redSolve_+3A_eqns">eqns</code></td>
<td>
<p>the system of equations to be solved as character vector
with one element per equation. If equations are in the normal form
the <code>=0</code> may be omitted. Required. No default.  </p>
</td></tr>
<tr><td><code id="redSolve_+3A_unknowns">unknowns</code></td>
<td>
<p>the unknowns for the system of equations specified by
<code>eqns</code> as a character vector with one element for each
unknown. Required. No default.  </p>
</td></tr>
<tr><td><code id="redSolve_+3A_switches">switches</code></td>
<td>
<p>a character vector of switches to be applied prior to
executing <code>solve</code>. See Details below. Optional. </p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>solve</code> is a REDUCE operator for solving one or more simultaneous
algebraic equations in one or more variables, both linear and
non-linear. Equations may contain arbitrary constants which is why it is
necessary to specify the unknowns. For example, given a quadratic
equation with constants <code>a, b</code> and <code>c</code>:
</p>
<pre>
16: solve(a*x^2 + b*x + c, x);
  
                     2
    sqrt( - 4*a*c + b ) - b
{x=-------------------------,
              2*a

                         2
     - (sqrt( - 4*a*c + b ) + b)
 x=------------------------------}
                2*a
</pre>
<p>The standard solution is returned as a REDUCE list.  We can change the
order of the expression to get the usual form by using the <code>korder</code>
declaration before calling solve:
</p>
<pre>
17: korder b, a;
18: solve(a*x^2 + b*x + c, x);

          2
    sqrt(b  - 4*a*c) - b
{x=----------------------,
            2*a

              2
     - (sqrt(b  - 4*a*c) + b)
 x=---------------------------}
               2*a
</pre>
<p>If the solve operator could not find an explicit solution, it may still
be able to find one in terms of an equation for the unknown. Such a
solution is identified by specifying the subsidiary equation as the
argument of the operator <code>root_of</code>. If there are several unknowns,
each solution will be a list of equations for the unknowns. For example,
</p>
<pre>
  solve(x^7 - x^6 + x^2 = 1, x) ;
  {x=root_of(x_**6  + x_ + 1,x_,tag_1),x=1}</pre>
<p>Note that <code>redSolve</code> turns off the NAT switch as otherwise the results will
not be parsed correctly. <code>redSolve</code> will ensure that NAT is off for
the duration of its execution. Turning on the NAT switch using the
<code>switches</code> parameter results in an error.
</p>
<p>There are several switches related to <code>solve</code>, in particular
<code>cramer, multiplicities, fullroots, trigform</code> and <code>varopt</code>.
See the
<a href="http://www.reduce-algebra.com/manual/manualse44.html">REDUCE
manual section 7.17</a> for details of these and of the methods used for
solving equations.  </p>


<h3>Value</h3>

<p><code>redSolve</code> returns an object of class
<code>"<a href="#topic+redcas.solve-class">redcas.solve</a>"</code> which contains the following
elements:
</p>

<dl>
<dt>solutions</dt><dd><p>a list of the solutions as returned by
REDUCE. Each solution is a character vector.</p>
</dd>
<dt>rsolutions</dt><dd><p>a list of the solutions, where possible converted to
appropriate R objects. Because each element of a solution may be of
a different type (real, complex, string), each solution is a list
rather than a vector.</p>
</dd>
<dt>nsolutions</dt><dd><p>numeric. The number of solutions.</p>
</dd>
<dt>rc</dt><dd><p>numeric. The return code. 0 is success, 1 failure </p>
</dd>
<dt>root_of</dt><dd><p>a complex vector identifying which solutions are
presented in terms of the REDUCE <code>root_of</code> operator. A solution
may expressed one or more unknowns in terms of the roots of another
equation. In this case the other equation is enclosed in
<code>root_of()</code>. This slot is a complex vector with the real part
identifying the solution containing <code>root_of()</code> and the imaginary
part the index of the unknown in that solution. This item is
intended for use in a future release.</p>
</dd>
<dt>eqns</dt><dd><p>the vector of equations passed to <code>redSolve</code></p>
</dd>
<dt>unknowns</dt><dd><p>the vector of unknowns passed to <code>redSolve</code></p>
</dd>
<dt>switches</dt><dd><p>the vector of switches passed to <code>redSolve</code></p>
</dd>
</dl>

<p>The <code>redcas.solve</code> object may be printed using the <code>print</code> method.
</p>


<h3>Author(s)</h3>

<p>martin gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+print">print</a></code> to print a <code>redcas.solve</code> object,
<a href="http://www.reduce-algebra.com/manual/manualse44.html">REDUCE
manual section 7.17</a> for details of the REDUCE <code>solve</code> operator and
<code><a href="#topic+redStart">redStart</a></code> for creating a REDUCE session.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Open a CSL session:
s1 &lt;- redStart()

## can only run code if session was successfully started
if (is.numeric(s1)) {
   sol &lt;- redSolve(s1, eqns=c("x+3y=7", "y-x=1"), unknowns=c("x", "y"))
   print(sol)

   ## close session:
   redClose(s1)
}
</code></pre>

<hr>
<h2 id='redSplitOut'>
convert the vector returned by redExec into commands and command output.
</h2><span id='topic+redSplitOut'></span>

<h3>Description</h3>

<p>REDUCE output contains both the commands issued and the output from the
commands. Since the output is of interest, redSplitOut separates the
input vector into a list containing vectors of output, commands and the
input to <code>redSplitOut</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redSplitOut(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redSplitOut_+3A_x">x</code></td>
<td>
<p>a character vector containing REDUCE output</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Although it is possible to use the REDUCE switch ECHO to prevent display
of commands, this does not prevent display of the sequence numbers for
the commands. <code>redSplitOut</code> can be called by <code><a href="#topic+redExec">redExec</a></code> to
separate the output from the commands. It can also be used after the
call if the <code>split</code> option was not used or on an arbitrary output
file from REDUCE, for example the full output which can be retrieved by
<code><a href="#topic+redClose">redClose</a></code>.
</p>


<h3>Value</h3>

<p>A list containing three elements:
</p>
<table role = "presentation">
<tr><td><code>out</code></td>
<td>
<p>the command output</p>
</td></tr>
<tr><td><code>cmd</code></td>
<td>
<p>the commands</p>
</td></tr>
<tr><td><code>raw</code></td>
<td>
<p>the input to <code>redSplitOut</code>, i.e. the combined cmd and
out vectors.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Martin Gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redExec">redExec</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>result &lt;- c("5: ",
            "{x=-1}",
            "",
            "6: ",
            "b := {{2,12},{11,1}}",
            "",
            "7: ",
            "8: ",
            "               - m",
            "la := ---------------------",
            "                2       2",
            "       sqrt(v(3)  + v(2) )",
            "",
            "9: ",
            "",
            "10: ")
split &lt;- redSplitOut(result)
writeLines(split$out)
</code></pre>

<hr>
<h2 id='redStart'>
function to start a REDUCE session
</h2><span id='topic+redStart'></span>

<h3>Description</h3>

<p>Starts a REDUCE session using a pipe connection sending the output (log)
to a temporary file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>redStart(dialect = "csl", dirpath, options, echo=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="redStart_+3A_dialect">dialect</code></td>
<td>

<p>character. The version of lisp with which the REDUCE executable was
built. Allowed values are <code>csl</code>, the default, or <code>psl</code>.  </p>
</td></tr>
<tr><td><code id="redStart_+3A_dirpath">dirpath</code></td>
<td>

<p>character. Path to a directory containing the REDUCE
executables. Optional, see details below.</p>
</td></tr>
<tr><td><code id="redStart_+3A_options">options</code></td>
<td>

<p>character. Options for the <code>csl</code> version. See details.
</p>
</td></tr>
<tr><td><code id="redStart_+3A_echo">echo</code></td>
<td>
<p>boolean. Should the ECHO switch be turned on. Default is
FALSE to match the REDUCE default. </p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>redcas</code> finds the REDUCE executables in two different ways. The
first is the explicit specification of the path using the
<code>dirpath</code> argument passed to the <code>redStart</code> function. If this
does not contain the REDUCE executable, <code>redStart</code> stops executing
on the assumption that a specific version was intended.
</p>
<p>The second method is used if <code>dirpath</code> is not specified. This
determines the path at package load time by searching the following three
locations in turn until the executable is found:  
</p>

<ul>
<li><p>the environment variable REDUCE_EXEC exists and contains the
path to a directory containing an  executable;
</p>
</li>
<li><p>the R option <code>reduce_exec</code> exists and contains the path
to a directory containing the executable;
</p>
</li>
<li><p>the REDUCE executable is found in a directory named in the
environment variable PATH.</p>
</li></ul>

<p>This approach provides the flexibility to have a default version while
being able to call different versions explicitly.
</p>
<p>While it is possible to start a second REDUCE session without closing
the first, garbage collection closes its connection. A future release
will fix this issue.



</p>
<p><code>redStart</code> carries out the following actions:
</p>

<ul>
<li><p> creates the REDUCE session using a pipe connection and sending
the REDUCE output to a temporary file (in REDUCE terminology
referred to as a log); 
</p>
</li>
<li><p> registers the session, acquiring a session identifier
</p>
</li>
<li><p> calls <code><a href="#topic+redExec">redExec</a></code> to load the REDUCE functions which
are part of the package and to set the ECHO switch if requested.
</p>
</li>
<li><p> returns the session identifier.
</p>
</li></ul>



<h3>Value</h3>

<p>The session identifier which is an integer &gt;0 if the session started
successfully. If the session could not be started, <code>redStart</code>
terminates using <code>stop</code>. If no REDUCE executable was found returns FALSE.</p>


<h3>Author(s)</h3>

<p>martin gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+showSessions">showSessions</a></code> to list active sessions and 
<code><a href="#topic+redClose">redClose</a></code> for closing a session.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Open a CSL session:
id1 &lt;- redStart()
## can only run code if session was successfully started
if (is.numeric(id1)) {
   ## show session details:
   print(showSessions())
   ## close session:
   redClose(id1)
}
</code></pre>

<hr>
<h2 id='showSessions'>
function to list details for currently active REDUCE sessions.
</h2><span id='topic+showSessions'></span>

<h3>Description</h3>

<p>For each active REDUCE session returns the full path to the REDUCE
executable and the temporary log file, the connection identifier, the
number of code blocks executed and the number of lines read from the
log so far.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showSessions(id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="showSessions_+3A_id">id</code></td>
<td>

<p>The session id for which to display the details. May be omitted. If
none specified, display details for all sessions. The session id is
returned by <code><a href="#topic+redStart">redStart</a></code>. 
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the following columns:
</p>
<table role = "presentation">
<tr><td><code>id</code></td>
<td>
<p> integer, the session identifier;</p>
</td></tr>
<tr><td><code>pcon</code></td>
<td>
<p>integer, the input connection for the REDUCE session;</p>
</td></tr>
<tr><td><code>cmd</code></td>
<td>
<p>character, full path to the REDUCE executable;</p>
</td></tr>
<tr><td><code>logname</code></td>
<td>
<p>character, full path to the log file;</p>
</td></tr>
<tr><td><code>blockn</code></td>
<td>
<p>integer, number of blocks of REDUCE code submitted,
i.e. number of calls to any function which sends code to REDUCE,
currently <code><a href="#topic+redExec">redExec</a></code>, <code><a href="#topic+asltx">asltx</a></code> and
<code><a href="#topic+redSolve">redSolve</a></code> ;</p>
</td></tr>  
<tr><td><code>lines.read</code></td>
<td>
<p>integer, number of lines read from the log file for
the session.</p>
</td></tr> 
</table>


<h3>Author(s)</h3>

<p>martin gregory
</p>


<h3>See Also</h3>

<p><code><a href="#topic+redStart">redStart</a></code> for creating a REDUCE session and
<code><a href="#topic+redClose">redClose</a></code> for closing a session.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Open a PSL session:
id1 &lt;- redStart('psl')
## can only run code if session was successfully started
if (is.numeric(id1)) {
   ## show session details:
   print(showSessions(id1))

   ## retrieve the entire transcript up to now
   writeLines(readLines(showSessions(id1)[,'logname'], warn=FALSE))

   ## close session:
   redClose(id1)
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
