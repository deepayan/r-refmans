<!DOCTYPE html><html><head><title>Help for package googlePolylines</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {googlePolylines}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#decode'><p>Decode Polyline</p></a></li>
<li><a href='#encode'><p>Encode</p></a></li>
<li><a href='#encodeCoordinates'><p>Encode coordinates</p></a></li>
<li><a href='#geometryRow'><p>Geometry Row</p></a></li>
<li><a href='#polyline_wkt'><p>Polyline WKT</p></a></li>
<li><a href='#sfAttributes'><p>sf Attributes</p></a></li>
<li><a href='#wkt_polyline'><p>WKT Polyline</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Encoding Coordinates into 'Google' Polylines</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.4</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-09-05</td>
</tr>
<tr>
<td>Description:</td>
<td>Encodes simple feature ('sf') objects and coordinates, and decodes polylines 
    using the 'Google' polyline encoding algorithm (<a href="https://developers.google.com/maps/documentation/utilities/polylinealgorithm">https://developers.google.com/maps/documentation/utilities/polylinealgorithm</a>).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.10)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>BH, Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, rmarkdown, sf, sfheaders, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-04 22:45:03 UTC; david</td>
</tr>
<tr>
<td>Author:</td>
<td>David Cooley [aut, cre],
  Paulo Barcelos [ctb] (Author of c++ decode_polyline),
  Chris Muir [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Cooley &lt;dcooley@symbolix.com.au&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-05 11:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='decode'>Decode Polyline</h2><span id='topic+decode'></span>

<h3>Description</h3>

<p>Decodes encoded polylines into a list of data.frames.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decode(polylines)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decode_+3A_polylines">polylines</code></td>
<td>
<p>vector of encoded polyline strings</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>polylines &lt;- c(
  "ohlbDnbmhN~suq@am{tAw`qsAeyhGvkz`@fge}A",
  "ggmnDt}wmLgc`DesuQvvrLofdDorqGtzzV"
)

decode(polylines)

</code></pre>

<hr>
<h2 id='encode'>Encode</h2><span id='topic+encode'></span><span id='topic+encode.sf'></span><span id='topic+encode.data.frame'></span>

<h3>Description</h3>

<p>Encodes coordinates into an encoded polyline.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encode(obj, ...)

## S3 method for class 'sf'
encode(obj, strip = FALSE, ...)

## S3 method for class 'data.frame'
encode(obj, lon = NULL, lat = NULL, byrow = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encode_+3A_obj">obj</code></td>
<td>
<p>either an <code>sf</code> object or <code>data.frame</code></p>
</td></tr>
<tr><td><code id="encode_+3A_...">...</code></td>
<td>
<p>other parameters passed to methods</p>
</td></tr>
<tr><td><code id="encode_+3A_strip">strip</code></td>
<td>
<p>logical indicating if <code>sf</code> attributes should be stripped. 
Useful if you want to reduce the size even further, but you will lose the 
spatial attributes associated with the <code>sf</code> object</p>
</td></tr>
<tr><td><code id="encode_+3A_lon">lon</code></td>
<td>
<p>vector of longitudes</p>
</td></tr>
<tr><td><code id="encode_+3A_lat">lat</code></td>
<td>
<p>vector of latitudes</p>
</td></tr>
<tr><td><code id="encode_+3A_byrow">byrow</code></td>
<td>
<p>logical indicating if the encoding should be done for each row</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function assumes Google Web Mercator projection (WSG 84 / EPSG:3857 / EPSG:900913)
for inputs and outputs.
</p>
<p>Will work with
</p>

<ul>
<li><p><code>sf</code> and <code>sfc</code> objects directly
</p>
</li>
<li><p><code>data.frames</code> - It will attempt to find lat &amp; lon coordinates, 
or you can explicitely define them using the <code>lat</code> and <code>lon</code> arguments
</p>
</li></ul>



<h3>Value</h3>

<p><code>sfencoded</code> object
</p>


<h3>Note</h3>

<p>When an <code>sfencoded</code> object is colulmn-subset using <code>`[`</code> and 
the encoded column is retained, the attributes of the column will remain. This 
is different behaviour to standard subsetting of <code>data.frames</code>, where all 
attributes are dropped by default. See examples.
</p>
<p>When encoding an <code>sf</code> object, only the XY dimensions will be used,
the Z or M (3D and/or Measure) dimensions are dropped.
</p>


<h3>See Also</h3>

<p><a href="#topic+encodeCoordinates">encodeCoordinates</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## data.frame
df &lt;- data.frame(polygonId = c(1,1,1,1),
  lineId = c(1,1,1,1),
  lon = c(-80.190, -66.118, -64.757, -80.190),
  lat = c(26.774, 18.466, 32.321, 26.774))
  
## on a data.frame, it will attemp to find the lon &amp; lat columns
encode(df)

## use byrow = TRUE to convert each row individually
encode(df, byrow = TRUE)


## Not run: 

## sf objects
library(sf)
nc &lt;- sf::st_read(system.file("shape/nc.shp", package="sf"))

encoded &lt;- encode(nc)

## view attributes
attributes(encoded) 

## view attributes of subset object
attributes(encoded[, c("AREA", "PERIMETER", "geometry")])

## view attributes without encoded column
attributes(encoded[, c("AREA", "PERIMETER")])

## strip attributes
encodedLite &lt;- encode(nc, strip = TRUE)

attributes(encodedLite)

## view attributes of subset lite object
attributes(encodedLite[, c("AREA", "PERIMETER", "geometry")])

## view attributes without encoded column
attributes(encodedLite[, c("AREA", "PERIMETER")])

## End(Not run)

</code></pre>

<hr>
<h2 id='encodeCoordinates'>Encode coordinates</h2><span id='topic+encodeCoordinates'></span>

<h3>Description</h3>

<p>Encodes a vector of lon &amp; lat coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encodeCoordinates(lon, lat)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encodeCoordinates_+3A_lon">lon</code></td>
<td>
<p>vector of longitudes</p>
</td></tr>
<tr><td><code id="encodeCoordinates_+3A_lat">lat</code></td>
<td>
<p>vector of latitudes</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+encode">encode</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

## Grouping by polygons and lines
df &lt;- data.frame(polygonId = c(1,1,1,1,1,1,1,1,2,2,2,2),
  lineId = c(1,1,1,1,2,2,2,2,1,1,1,1),
  lon = c(-80.190, -66.118, -64.757, -80.190,  -70.579, -67.514, -66.668, -70.579, 
  -70, -49, -51, -70),
  lat = c(26.774, 18.466, 32.321, 26.774, 28.745, 29.570, 27.339, 28.745, 
  22, 23, 22, 22))


## using dplyr groups   

library(dplyr)
df %&gt;%
  group_by(polygonId, lineId) %&gt;% 
  summarise(polyline = encodeCoordinates(lon, lat))
  
## using data.table
library(data.table)
setDT(df)
df[, encodeCoordinates(lon = lon, lat = lat), by = .(polygonId, lineId)]



## End(Not run)

</code></pre>

<hr>
<h2 id='geometryRow'>Geometry Row</h2><span id='topic+geometryRow'></span>

<h3>Description</h3>

<p>Extracts specific geometry rows of an <code>sfencoded</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geometryRow(x, geometry = c("POINT", "LINESTRING", "POLYGON"), multi = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geometryRow_+3A_x">x</code></td>
<td>
<p><code>sfencoded</code> object</p>
</td></tr>
<tr><td><code id="geometryRow_+3A_geometry">geometry</code></td>
<td>
<p>the specific geometry to extract</p>
</td></tr>
<tr><td><code id="geometryRow_+3A_multi">multi</code></td>
<td>
<p>logical indicating if MULTI geometry objects are included</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the row indeces for the requested geometry
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

df &lt;- data.frame(myId = c(1,1,1,1,1,1,1,1,2,2,2,2),
	lineId = c(1,1,1,1,2,2,2,2,1,1,1,2),
	lon = c(-80.190,-66.118,-64.757,-80.190,-70.579,-67.514,-66.668,-70.579,-70,-49,-51,-70),
	lat = c(26.774, 18.466, 32.321, 26.774, 28.745, 29.570, 27.339, 28.745, 22, 23, 22, 22))

p1 &lt;- as.matrix(df[1:4, c("lon", "lat")])
p2 &lt;- as.matrix(df[5:8, c("lon", "lat")])
p3 &lt;- as.matrix(df[9:12, c("lon", "lat")])

point &lt;- sf::st_sfc(sf::st_point(x = c(df[1,"lon"], df[1,"lat"])))
multipoint &lt;- sf::st_sfc(sf::st_multipoint(x = as.matrix(df[1:2, c("lon", "lat")])))
polygon &lt;- sf::st_sfc(sf::st_polygon(x = list(p1, p2)))
linestring &lt;- sf::st_sfc(sf::st_linestring(p3))
multilinestring &lt;- sf::st_sfc(sf::st_multilinestring(list(p1, p2)))
multipolygon &lt;- sf::st_sfc(sf::st_multipolygon(x = list(list(p1, p2), list(p3))))

sf &lt;- rbind(
	st_sf(geo = polygon),
	st_sf(geo = multilinestring),
	st_sf(geo = linestring),
	st_sf(geo = point)
	)

encode(sf)

enc &lt;- encode(sf)
geometryRow(enc, "POINT")
geometryRow(enc, "LINESTRING")
geometryRow(enc, "POLYGON")


## End(Not run)

</code></pre>

<hr>
<h2 id='polyline_wkt'>Polyline WKT</h2><span id='topic+polyline_wkt'></span>

<h3>Description</h3>

<p>Converts encoded polylines into well-known text.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>polyline_wkt(obj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="polyline_wkt_+3A_obj">obj</code></td>
<td>
<p><code>sfencoded</code> object or <code>encoded_column</code> of encoded polylines</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'Polylines' refers to lat/lon coordinates encoded into strings using Google's 
polyline encoding algorithm.
</p>
<p>The function assumes Google Web Mercator projection (WSG 84 / EPSG:3857 / EPSG:900913)
for inputs and outputs.
</p>


<h3>Value</h3>

<p>well-known text representation of the encoded polylines
</p>


<h3>Note</h3>

<p>This will not work if you have specified <code>strip = TRUE</code> for <code>encode()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

library(sf)
nc &lt;- sf::st_read(system.file("shape/nc.shp", package="sf"))

## encode to polylines
enc &lt;- encode(nc)

## convert encoded lines to well-known text
wkt &lt;- polyline_wkt(enc)


## End(Not run)

</code></pre>

<hr>
<h2 id='sfAttributes'>sf Attributes</h2><span id='topic+sfAttributes'></span>

<h3>Description</h3>

<p>Retrieves the sf attributes stored on the <code>sfencoded</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sfAttributes(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sfAttributes_+3A_x">x</code></td>
<td>
<p><code>sfencoded</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list</code> of <code>sf</code> attributes
</p>

<hr>
<h2 id='wkt_polyline'>WKT Polyline</h2><span id='topic+wkt_polyline'></span>

<h3>Description</h3>

<p>Converts well-known text into encoded polylines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wkt_polyline(obj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wkt_polyline_+3A_obj">obj</code></td>
<td>
<p><code>sfencoded</code> object or <code>wkt_column</code> of well-known text</p>
</td></tr>
</table>


<h3>Details</h3>

<p>'Polylines' refers to lat/lon coordinates encoded into strings using Google's 
polyline encoding algorithm.
</p>


<h3>Value</h3>

<p>encoded polyline representation of geometries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

library(sf)
nc &lt;- sf::st_read(system.file("shape/nc.shp", package="sf"))

## encode to polylines
enc &lt;- encode(nc)

## convert encoded lines to well-known text
wkt &lt;- polyline_wkt(enc)

## convert well-known text back to polylines
enc2 &lt;- wkt_polyline(wkt)


## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
