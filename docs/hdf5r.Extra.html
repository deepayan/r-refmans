<!DOCTYPE html><html><head><title>Help for package hdf5r.Extra</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hdf5r.Extra}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#hdf5r.Extra-package'><p>hdf5r.Extra: Extensions for 'HDF5' R Interfaces</p></a></li>
<li><a href='#H5-attributs'><p>Manipulate HDF5 attributes</p></a></li>
<li><a href='#H5-dataset-info'><p>Get information of an HDF5 dataset</p></a></li>
<li><a href='#h5AbsLinkName'><p>Format an absolute path name for HDF5 link</p></a></li>
<li><a href='#h5Backup'><p>Back up contents from one HDF5 file to another</p></a></li>
<li><a href='#h5Class'><p>Get the class of an HDF5 link</p></a></li>
<li><a href='#h5Copy'><p>Copy an HDF5 link</p></a></li>
<li><a href='#h5CreateDataset'><p>Create a new empty HDF5 dataset</p></a></li>
<li><a href='#h5CreateFile'><p>Create a new HDF5 file</p></a></li>
<li><a href='#h5CreateGroup'><p>Create new HDF5 group</p></a></li>
<li><a href='#h5Delete'><p>Delete an HDF5 link</p></a></li>
<li><a href='#h5Exists'><p>Check existence of an HDF5 link</p></a></li>
<li><a href='#h5GuessDtype'><p>Guess an HDF5 Datatype</p></a></li>
<li><a href='#h5List'><p>List the contents of an HDF5 group</p></a></li>
<li><a href='#h5Move'><p>Move link in an HDF5 file</p></a></li>
<li><a href='#h5Open'><p>Open an HDF5 file, file-handler or group object</p></a></li>
<li><a href='#h5Overwrite'><p>Overwrite an existing HDF5 link</p></a></li>
<li><a href='#h5Prep'><p>Prepare an R object to be written into HDF5 file</p></a></li>
<li><a href='#h5Read'><p>Read data from an existing HDF5 link</p></a></li>
<li><a href='#h5ReadDataset'><p>Read data from an existing H5 dataset</p></a></li>
<li><a href='#h5TryOpen'><p>Automatically retry opening HDF5 file</p></a></li>
<li><a href='#h5Write'><p>Write an R object to HDF5 file</p></a></li>
<li><a href='#h5WriteDataset'><p>Write array-like data into an existing H5 dataset</p></a></li>
<li><a href='#h5WriteScalar'><p>Write a scalar into HDF5 file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Extensions for 'HDF5' R Interfaces</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-28</td>
</tr>
<tr>
<td>Description:</td>
<td>Some methods to manipulate 'HDF5' files, extending the 'hdf5r' package. Reading and writing R objects to 'HDF5' formats follow the specification of 'AnnData' <a href="https://anndata.readthedocs.io/en/latest/fileformat-prose.html">https://anndata.readthedocs.io/en/latest/fileformat-prose.html</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0), hdf5r (&ge; 1.3.8), methods, utils</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, dplyr, easy.utils, Matrix, MatrixExtra, rlang</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ycli1995/hdf5r.Extra">https://github.com/ycli1995/hdf5r.Extra</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ycli1995/hdf5r.Extra/issues">https://github.com/ycli1995/hdf5r.Extra/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-28 11:59:16 UTC; mydocker</td>
</tr>
<tr>
<td>Author:</td>
<td>Yuchen Li [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yuchen Li &lt;ycli1995@outlook.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-29 08:30:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='hdf5r.Extra-package'>hdf5r.Extra: Extensions for 'HDF5' R Interfaces</h2><span id='topic+hdf5r.Extra'></span><span id='topic+hdf5r.Extra-package'></span>

<h3>Description</h3>

<p>Some methods to manipulate 'HDF5' files, extending the 'hdf5r' package. Reading and writing R objects to 'HDF5' formats follow the specification of 'AnnData' <a href="https://anndata.readthedocs.io/en/latest/fileformat-prose.html">https://anndata.readthedocs.io/en/latest/fileformat-prose.html</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Yuchen Li <a href="mailto:ycli1995@outlook.com">ycli1995@outlook.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ycli1995/hdf5r.Extra">https://github.com/ycli1995/hdf5r.Extra</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ycli1995/hdf5r.Extra/issues">https://github.com/ycli1995/hdf5r.Extra/issues</a>
</p>
</li></ul>


<hr>
<h2 id='H5-attributs'>Manipulate HDF5 attributes</h2><span id='topic+H5-attributs'></span><span id='topic+h5Attr'></span><span id='topic+h5Attributes'></span><span id='topic+h5AttrNames'></span><span id='topic+h5DeleteAttr'></span><span id='topic+h5WriteAttr'></span><span id='topic+h5Attr.H5D'></span><span id='topic+h5Attr.H5Group'></span><span id='topic+h5Attr.H5File'></span><span id='topic+h5Attr.character'></span><span id='topic+h5AttrNames.H5D'></span><span id='topic+h5AttrNames.H5Group'></span><span id='topic+h5AttrNames.H5File'></span><span id='topic+h5AttrNames.character'></span><span id='topic+h5Attributes.H5D'></span><span id='topic+h5Attributes.H5Group'></span><span id='topic+h5Attributes.H5File'></span><span id='topic+h5Attributes.character'></span><span id='topic+h5WriteAttr.H5D'></span><span id='topic+h5WriteAttr.H5Group'></span><span id='topic+h5WriteAttr.H5File'></span><span id='topic+h5WriteAttr.character'></span><span id='topic+h5DeleteAttr.H5D'></span><span id='topic+h5DeleteAttr.H5Group'></span><span id='topic+h5DeleteAttr.H5File'></span><span id='topic+h5DeleteAttr.character'></span>

<h3>Description</h3>

<p>Functions to get, set or delete HDF5 attributes for an existing link.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Attr(x, which, ...)

h5Attributes(x, ...)

h5AttrNames(x, ...)

h5DeleteAttr(x, which, ...)

h5WriteAttr(x, which, robj, ...)

## S3 method for class 'H5D'
h5Attr(x, which, ...)

## S3 method for class 'H5Group'
h5Attr(x, which, name = NULL, ...)

## S3 method for class 'H5File'
h5Attr(x, which, name = NULL, ...)

## S3 method for class 'character'
h5Attr(x, which, name = NULL, ...)

## S3 method for class 'H5D'
h5AttrNames(x, ...)

## S3 method for class 'H5Group'
h5AttrNames(x, name = NULL, ...)

## S3 method for class 'H5File'
h5AttrNames(x, name = NULL, ...)

## S3 method for class 'character'
h5AttrNames(x, name = NULL, ...)

## S3 method for class 'H5D'
h5Attributes(x, ...)

## S3 method for class 'H5Group'
h5Attributes(x, name = NULL, ...)

## S3 method for class 'H5File'
h5Attributes(x, name = NULL, ...)

## S3 method for class 'character'
h5Attributes(x, name = NULL, ...)

## S3 method for class 'H5D'
h5WriteAttr(
  x,
  which,
  robj,
  overwrite = TRUE,
  check.scalar = TRUE,
  stype = c("utf8", "ascii7"),
  ...
)

## S3 method for class 'H5Group'
h5WriteAttr(
  x,
  which,
  robj,
  name = NULL,
  overwrite = TRUE,
  check.scalar = TRUE,
  stype = c("utf8", "ascii7"),
  ...
)

## S3 method for class 'H5File'
h5WriteAttr(
  x,
  which,
  robj,
  name = NULL,
  overwrite = TRUE,
  check.scalar = TRUE,
  stype = c("utf8", "ascii7"),
  ...
)

## S3 method for class 'character'
h5WriteAttr(
  x,
  which,
  robj,
  name = NULL,
  overwrite = TRUE,
  check.scalar = TRUE,
  stype = c("utf8", "ascii7"),
  ...
)

## S3 method for class 'H5D'
h5DeleteAttr(x, which, ...)

## S3 method for class 'H5Group'
h5DeleteAttr(x, which, name = NULL, ...)

## S3 method for class 'H5File'
h5DeleteAttr(x, which, name = NULL, ...)

## S3 method for class 'character'
h5DeleteAttr(x, which, name = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="H5-attributs_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code>, 
<code><a href="hdf5r.html#topic+H5D">H5D</a></code> or a path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="H5-attributs_+3A_which">which</code></td>
<td>
<p>Name of the HDF5 attribute</p>
</td></tr>
<tr><td><code id="H5-attributs_+3A_...">...</code></td>
<td>
<p>Arguments passed to other methods.</p>
</td></tr>
<tr><td><code id="H5-attributs_+3A_robj">robj</code></td>
<td>
<p>An R object to be written as HDF5 attribute</p>
</td></tr>
<tr><td><code id="H5-attributs_+3A_name">name</code></td>
<td>
<p>Name of an existing HDF5 sub-link. Default is NULL, which will 
use current link.</p>
</td></tr>
<tr><td><code id="H5-attributs_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether or not to overwrite the existing HDF5 attribute.</p>
</td></tr>
<tr><td><code id="H5-attributs_+3A_check.scalar">check.scalar</code></td>
<td>
<p>Whether or not to use scalar space when <code>robj</code> is a
scalar. If <code>FALSE</code>, the attribute written will be treated as an array.</p>
</td></tr>
<tr><td><code id="H5-attributs_+3A_stype">stype</code></td>
<td>
<p>Passed to <code><a href="#topic+h5GuessDtype">h5GuessDtype</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>H5Attr</code>:
</p>

<ul>
<li><p> If <code>which</code> exists in link <code>name</code>, will return an R object 
representing the attribute. If <code>which</code> doesn't exist or contains empty 
data, will return <code>NULL</code>.
</p>
</li>
<li><p> If <code>name</code> doesn't exist, will raise an error from 
<code>H5File$attr_exists_by_name()</code>.
</p>
</li></ul>

<p><code>h5AttrNames</code> will return a character vector containing all attribute 
names for the given link.
</p>
<p><code>h5Attributes</code> will return a list containing all attributes for the 
given link.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")

# Read H5 attribute
x &lt;- h5Attr(file, "encoding-version")
x &lt;- h5Attr(file, "column-order", "raw/var") ## An empty attribute
stopifnot(length(x) == 0)

h5obj &lt;- h5Open(file, "raw/var", mode = "r")
x &lt;- h5Attr(h5obj, "column-order")

# Read H5 attribute names
h5AttrNames(file)
h5AttrNames(file, "X")
h5AttrNames(h5obj)

# Read all H5 attributes
a1 &lt;- h5Attributes(file, "raw/var")
a2 &lt;- h5Attributes(h5obj)
stopifnot(identical(a1, a2))

# Write H5 attribute
tmp.file &lt;- tempfile(fileext = ".h5")
file.copy(file, tmp.file)

new_a &lt;- character()  # Can write an empty attribute
h5WriteAttr(tmp.file, "new_a", robj = new_a, name = "X")
new_a &lt;- c("a", "b")
h5WriteAttr(tmp.file, "new_a", robj = new_a, name = "X", overwrite = TRUE)
h5Attr(tmp.file, "new_a", name = "X")

# Delete H5 attribute
h5DeleteAttr(tmp.file, "new_a", name = "X")
stopifnot(length(h5Attr(tmp.file, "new_a", name = "X")) == 0)

</code></pre>

<hr>
<h2 id='H5-dataset-info'>Get information of an HDF5 dataset</h2><span id='topic+H5-dataset-info'></span><span id='topic+h5Dims'></span><span id='topic+h5MaxDims'></span><span id='topic+h5Dims.H5D'></span><span id='topic+h5Dims.H5Group'></span><span id='topic+h5Dims.H5File'></span><span id='topic+h5Dims.character'></span><span id='topic+h5MaxDims.H5D'></span><span id='topic+h5MaxDims.H5Group'></span><span id='topic+h5MaxDims.H5File'></span><span id='topic+h5MaxDims.character'></span>

<h3>Description</h3>

<p>Functions to get the information from an HDF5 dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Dims(x, ...)

h5MaxDims(x, ...)

## S3 method for class 'H5D'
h5Dims(x, ...)

## S3 method for class 'H5Group'
h5Dims(x, name, ...)

## S3 method for class 'H5File'
h5Dims(x, name, ...)

## S3 method for class 'character'
h5Dims(x, name, ...)

## S3 method for class 'H5D'
h5MaxDims(x, ...)

## S3 method for class 'H5D'
h5MaxDims(x, ...)

## S3 method for class 'H5Group'
h5MaxDims(x, name, ...)

## S3 method for class 'H5File'
h5MaxDims(x, name, ...)

## S3 method for class 'character'
h5MaxDims(x, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="H5-dataset-info_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code>, 
<code><a href="hdf5r.html#topic+H5D">H5D</a></code> or a path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="H5-dataset-info_+3A_...">...</code></td>
<td>
<p>Arguments passed to other methods.</p>
</td></tr>
<tr><td><code id="H5-dataset-info_+3A_name">name</code></td>
<td>
<p>A link in <code>file</code>. Must represent an H5D. Used when <code>x</code> 
is an <code>H5Group</code>, <code>H5File</code> or an HDF5 file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>h5Dims</code> returns the dimension of the HDF5 dataset.
</p>
<p><code>h5MaxDims</code> returns the maximal dimension of the HDF5 dataset.
</p>


<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+H5D-class">H5D-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
h5obj &lt;- h5Open(file, "X", mode = "r")

h5Dims(file, "X")
h5Dims(h5obj)

h5MaxDims(file, "X")
h5MaxDims(h5obj)

</code></pre>

<hr>
<h2 id='h5AbsLinkName'>Format an absolute path name for HDF5 link</h2><span id='topic+h5AbsLinkName'></span>

<h3>Description</h3>

<p>Format an absolute path name for HDF5 link
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5AbsLinkName(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5AbsLinkName_+3A_name">name</code></td>
<td>
<p>String representing an expected name of HDF5 link.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>name</code> contains any of &quot;&quot;, <code>NA</code> or <code>NULL</code>, will simply 
return <code>"/"</code>.
</p>


<h3>Value</h3>

<p>An update <code>name</code> starting with '/'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>h5AbsLinkName("ggg")
h5AbsLinkName("ggg/ddd")
h5AbsLinkName(NA)
h5AbsLinkName("")
h5AbsLinkName(NULL)

</code></pre>

<hr>
<h2 id='h5Backup'>Back up contents from one HDF5 file to another</h2><span id='topic+h5Backup'></span>

<h3>Description</h3>

<p>Function to back up HDF5 file, with optionally excluding specific links.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Backup(
  from.file,
  to.file = NULL,
  exclude = NULL,
  overwrite = FALSE,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Backup_+3A_from.file">from.file</code></td>
<td>
<p>The source HDF5 file.</p>
</td></tr>
<tr><td><code id="h5Backup_+3A_to.file">to.file</code></td>
<td>
<p>The target HDF5 file. Cannot be the same file as 
<code>from.file</code>. If <code>NULL</code>, will generate an R temp file.</p>
</td></tr>
<tr><td><code id="h5Backup_+3A_exclude">exclude</code></td>
<td>
<p>Names of HDF5 links not to be backed up.</p>
</td></tr>
<tr><td><code id="h5Backup_+3A_overwrite">overwrite</code></td>
<td>
<p>When the <code>to.file</code> already exists, whether or not to 
overwrite it.</p>
</td></tr>
<tr><td><code id="h5Backup_+3A_verbose">verbose</code></td>
<td>
<p>Print progress.</p>
</td></tr>
<tr><td><code id="h5Backup_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$obj_copy_from()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>When any HDF5 link is to be excluded, it will copy the rest of links from
<code>from.file</code> using <code><a href="#topic+h5Copy">h5Copy</a></code>. Otherwise, it will simply copy 
the <code>from.file</code> to the <code>to.file</code> via <code><a href="base.html#topic+file.copy">file.copy</a></code>
</p>


<h3>Value</h3>

<p>Path of the <code>to.file</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
to.file &lt;- tempfile(fileext = ".h5")

h5Backup(file, to.file, exclude = "X")

x &lt;- h5Read(file)
x2 &lt;- h5Read(to.file)
x$X &lt;- NULL # Remove 'X'
stopifnot(identical(x, x2)) # Now these two should be identical

</code></pre>

<hr>
<h2 id='h5Class'>Get the class of an HDF5 link</h2><span id='topic+h5Class'></span><span id='topic+is.H5D'></span><span id='topic+is.H5Group'></span>

<h3>Description</h3>

<p>Functions to get or check the class of an HDF5 link.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Class(file, name)

is.H5D(file, name)

is.H5Group(file, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Class_+3A_file">file</code></td>
<td>
<p>An existing HDF5 file</p>
</td></tr>
<tr><td><code id="h5Class_+3A_name">name</code></td>
<td>
<p>Name of a link in <code>file</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>h5Class</code> returns a character specifying the class of the query HDF5 
link (typically H5D, H5Group or H5File).
</p>
<p><code>is.H5D</code> and <code>is.H5Group</code> return a logical value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
h5Class(file, "X")
h5Class(file, "obs")
is.H5D(file, "X")
is.H5Group(file, "obs")

</code></pre>

<hr>
<h2 id='h5Copy'>Copy an HDF5 link</h2><span id='topic+h5Copy'></span>

<h3>Description</h3>

<p>Copy an HDF5 link from one file to another file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Copy(
  from.file,
  from.name,
  to.file,
  to.name,
  overwrite = FALSE,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Copy_+3A_from.file">from.file</code></td>
<td>
<p>The source HDF5 file.</p>
</td></tr>
<tr><td><code id="h5Copy_+3A_from.name">from.name</code></td>
<td>
<p>The source link name.</p>
</td></tr>
<tr><td><code id="h5Copy_+3A_to.file">to.file</code></td>
<td>
<p>The target HDF5 file.</p>
</td></tr>
<tr><td><code id="h5Copy_+3A_to.name">to.name</code></td>
<td>
<p>The destination HDF5 link name.</p>
</td></tr>
<tr><td><code id="h5Copy_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether or not to overwrite the existing link.</p>
</td></tr>
<tr><td><code id="h5Copy_+3A_verbose">verbose</code></td>
<td>
<p>Print progress.</p>
</td></tr>
<tr><td><code id="h5Copy_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$obj_copy_from()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>Note</h3>


<ul>
<li><p> Copying can still work even if the <code>to.file</code> is actually identical 
to the <code>from.file</code>.
</p>
</li>
<li><p> Attributes of <code>from.name</code> will be kept, while those of its parent 
H5Groups will not.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+H5File">H5File</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
to.file &lt;- tempfile(fileext = ".h5")

# Copy a link to a new file
h5Copy(file, "obs", to.file, "obs")
obs &lt;- h5Read(file, "obs")
obs2 &lt;- h5Read(to.file, "obs")
stopifnot(identical(obs, obs2))

# The parent link (H5Group) will be created automatically
h5Copy(file, "obsm/tsne", to.file, "obsm/tsne")
obsm &lt;- h5Read(to.file, "obsm")

# Copy the whole file
x &lt;- h5Read(file)
h5Copy(file, "/", to.file, "/", overwrite = TRUE)
x2 &lt;- h5Read(to.file)
stopifnot(identical(x, x2))

</code></pre>

<hr>
<h2 id='h5CreateDataset'>Create a new empty HDF5 dataset</h2><span id='topic+h5CreateDataset'></span><span id='topic+h5CreateDataset.H5Group'></span><span id='topic+h5CreateDataset.H5File'></span><span id='topic+h5CreateDataset.character'></span>

<h3>Description</h3>

<p>Create a new empty HDF5 dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5CreateDataset(x, name, ...)

## S3 method for class 'H5Group'
h5CreateDataset(
  x,
  name,
  dims,
  dtype = NULL,
  storage.mode = numeric(),
  stype = c("utf8", "ascii7"),
  maxdims = NULL,
  chunk_size = "auto",
  gzip_level = 6,
  ...
)

## S3 method for class 'H5File'
h5CreateDataset(
  x,
  name,
  dims,
  dtype = NULL,
  storage.mode = numeric(),
  stype = c("utf8", "ascii7"),
  maxdims = NULL,
  chunk_size = "auto",
  gzip_level = 6,
  ...
)

## S3 method for class 'character'
h5CreateDataset(
  x,
  name,
  dims,
  dtype = NULL,
  storage.mode = numeric(),
  stype = c("utf8", "ascii7"),
  maxdims = NULL,
  overwrite = FALSE,
  chunk_size = "auto",
  gzip_level = 6,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5CreateDataset_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> or a 
path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_name">name</code></td>
<td>
<p>Name of the new HDF5 dataset.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$create_dataset()</code>. Also see 
<code>[hdf5r:H5File-class]{H5File}</code>.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_dims">dims</code></td>
<td>
<p>Dimensions of the new dataset.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_dtype">dtype</code></td>
<td>
<p>The H5 datatype to use for the creation of the object. Must be 
an <code><a href="hdf5r.html#topic+H5T-class">H5T</a></code>. If set to <code>NULL</code>, it will be 
guessed through <code><a href="#topic+h5GuessDtype">h5GuessDtype</a></code>, according to <code>storage.mode</code>.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_storage.mode">storage.mode</code></td>
<td>
<p>Object used to guess the HDF5 datatype. Default is 
<code><a href="base.html#topic+numeric">numeric</a>()</code>.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_stype">stype</code></td>
<td>
<p>'utf8' or 'ascii7'. Passed to <code><a href="#topic+h5GuessDtype">h5GuessDtype</a></code>.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_maxdims">maxdims</code></td>
<td>
<p>The maximal dimensions of the space. Default is <code>dims</code>.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_chunk_size">chunk_size</code></td>
<td>
<p>Size of the chunk. Must have the same length as the dataset 
dimension. If <code>NULL</code>, no chunking is used. If set to <code>"auto"</code>, the 
size of each chunk will be estimated according to <code>maxdims</code> and the byte 
size of <code>dtype</code>, using <code><a href="hdf5r.html#topic+guess_chunks">guess_chunks</a></code>.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_gzip_level">gzip_level</code></td>
<td>
<p>Enable zipping at the level given here. Only if chunk_dims 
is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="h5CreateDataset_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether or not to overwrite the existing HDF5 dataset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+H5File">H5File</a></code> and <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> for the 
<code>$create_dataset()</code> methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp.file &lt;- tempfile(fileext = ".h5")
h5CreateFile(tmp.file)

m &lt;- matrix(0, 10, 5)
h5CreateDataset(tmp.file, "g1/m", dim(m))

m2 &lt;- c("a", "b", "c")
h5CreateDataset(tmp.file, "g2/m2", length(m2), storage.mode = m2)

</code></pre>

<hr>
<h2 id='h5CreateFile'>Create a new HDF5 file</h2><span id='topic+h5CreateFile'></span><span id='topic+h5CreateFile.character'></span>

<h3>Description</h3>

<p>A wrapper for <code><a href="hdf5r.html#topic+H5File">H5File</a></code><code>$new()</code>. If <code>file</code> 
exists, will only raise a warning.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5CreateFile(x, ...)

## S3 method for class 'character'
h5CreateFile(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5CreateFile_+3A_x">x</code></td>
<td>
<p>Name of the new HDF5 file.</p>
</td></tr>
<tr><td><code id="h5CreateFile_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$new()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp.file &lt;- tempfile(fileext = ".h5")
h5CreateFile(tmp.file)

</code></pre>

<hr>
<h2 id='h5CreateGroup'>Create new HDF5 group</h2><span id='topic+h5CreateGroup'></span><span id='topic+h5CreateGroup.H5Group'></span><span id='topic+h5CreateGroup.H5File'></span><span id='topic+h5CreateGroup.character'></span>

<h3>Description</h3>

<p>Create new HDF5 group
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5CreateGroup(x, name, ...)

## S3 method for class 'H5Group'
h5CreateGroup(x, name, show.warnings = TRUE, ...)

## S3 method for class 'H5File'
h5CreateGroup(x, name, show.warnings = TRUE, ...)

## S3 method for class 'character'
h5CreateGroup(x, name, show.warnings = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5CreateGroup_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> or a 
path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5CreateGroup_+3A_name">name</code></td>
<td>
<p>Name of the new HDF5 group. Can be recursive, such as &quot;g/sub_g&quot;.</p>
</td></tr>
<tr><td><code id="h5CreateGroup_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5Group$create_group()</code>.</p>
</td></tr>
<tr><td><code id="h5CreateGroup_+3A_show.warnings">show.warnings</code></td>
<td>
<p>When the group <code>name</code> already exists, whether or 
not to show warning messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+H5Group">H5Group</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp.file &lt;- tempfile(fileext = ".h5")
h5CreateFile(tmp.file)

h5CreateGroup(tmp.file, "g1")
h5CreateGroup(tmp.file, "g2/g3")

</code></pre>

<hr>
<h2 id='h5Delete'>Delete an HDF5 link</h2><span id='topic+h5Delete'></span><span id='topic+h5Delete.H5Group'></span><span id='topic+h5Delete.H5File'></span><span id='topic+h5Delete.character'></span>

<h3>Description</h3>

<p>Delete an HDF5 link
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Delete(x, name, ...)

## S3 method for class 'H5Group'
h5Delete(x, name, verbose = TRUE, ...)

## S3 method for class 'H5File'
h5Delete(x, name, verbose = TRUE, ...)

## S3 method for class 'character'
h5Delete(x, name, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Delete_+3A_x">x</code></td>
<td>
<p>An existing HDF5 file</p>
</td></tr>
<tr><td><code id="h5Delete_+3A_name">name</code></td>
<td>
<p>Name of HDF5 link to be deleted. If <code>name</code> doesn't exist, 
nothing will be done.</p>
</td></tr>
<tr><td><code id="h5Delete_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5Group$link_delete()</code></p>
</td></tr>
<tr><td><code id="h5Delete_+3A_verbose">verbose</code></td>
<td>
<p>Print progress.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
to.file &lt;- tempfile(fileext = ".h5")
file.copy(file, to.file)

h5Delete(to.file, "obs")
h5Delete(to.file, "xxxx") # Delete something not existing.

</code></pre>

<hr>
<h2 id='h5Exists'>Check existence of an HDF5 link</h2><span id='topic+h5Exists'></span><span id='topic+h5Exists.H5Group'></span><span id='topic+h5Exists.H5File'></span><span id='topic+h5Exists.character'></span>

<h3>Description</h3>

<p>Check existence of an HDF5 link
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Exists(x, name, ...)

## S3 method for class 'H5Group'
h5Exists(x, name, ...)

## S3 method for class 'H5File'
h5Exists(x, name, ...)

## S3 method for class 'character'
h5Exists(x, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Exists_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> or a 
path name of HDF5 file</p>
</td></tr>
<tr><td><code id="h5Exists_+3A_name">name</code></td>
<td>
<p>Name of HDF5 link to be checked.</p>
</td></tr>
<tr><td><code id="h5Exists_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$exists()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>If any parent directory of <code>name</code> doesn't exist, will simply 
return <code>FALSE</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
h5Exists(file, "/")
h5Exists(file, "obs")
h5Exists(file, "X")

h5fh &lt;- h5TryOpen(file, mode = "r")
h5Exists(h5fh, "obs")

h5obj &lt;- h5Open(h5fh, "obs")
h5Exists(h5obj, "groups")

</code></pre>

<hr>
<h2 id='h5GuessDtype'>Guess an HDF5 Datatype</h2><span id='topic+h5GuessDtype'></span>

<h3>Description</h3>

<p>Wrapper around <code><a href="hdf5r.html#topic+guess_nelem">hdf5r::guess_dtype</a></code>, allowing 
for the customization of string types such as utf-8 rather than defaulting to 
variable-length ASCII-encoded strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5GuessDtype(x, stype = c("utf8", "ascii7"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5GuessDtype_+3A_x">x</code></td>
<td>
<p>The object for which to guess the HDF5 datatype</p>
</td></tr>
<tr><td><code id="h5GuessDtype_+3A_stype">stype</code></td>
<td>
<p>'utf8' or 'ascii7'</p>
</td></tr>
<tr><td><code id="h5GuessDtype_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>hdf5r::guess_dtype</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="hdf5r.html#topic+H5T">H5T</a></code>
</p>


<h3>References</h3>

<p><a href="https://github.com/mojaveazure/seurat-disk/blob/163f1aade5bac38ed1e9e9c912283a7e74781610/R/zzz.R">https://github.com/mojaveazure/seurat-disk/blob/163f1aade5bac38ed1e9e9c912283a7e74781610/R/zzz.R</a>
</p>


<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+guess_nelem">guess_dtype</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>h5GuessDtype(0)
h5GuessDtype("abc")

</code></pre>

<hr>
<h2 id='h5List'>List the contents of an HDF5 group</h2><span id='topic+h5List'></span><span id='topic+h5List.H5Group'></span><span id='topic+h5List.H5File'></span><span id='topic+h5List.character'></span>

<h3>Description</h3>

<p>Function to list the contents of an HDF5 group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5List(x, ...)

## S3 method for class 'H5Group'
h5List(
  x,
  recursive = FALSE,
  full.names = FALSE,
  simplify = TRUE,
  detailed = FALSE,
  ...
)

## S3 method for class 'H5File'
h5List(
  x,
  name = "/",
  recursive = FALSE,
  full.names = FALSE,
  simplify = TRUE,
  detailed = FALSE,
  ...
)

## S3 method for class 'character'
h5List(
  x,
  name = "/",
  recursive = FALSE,
  full.names = FALSE,
  simplify = TRUE,
  detailed = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5List_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> or a 
path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5List_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to <code>$ls()</code></p>
</td></tr>
<tr><td><code id="h5List_+3A_recursive">recursive</code></td>
<td>
<p>If TRUE, the contents of the whole group hierarchy will be 
listed.</p>
</td></tr>
<tr><td><code id="h5List_+3A_full.names">full.names</code></td>
<td>
<p>Whether or not to return the absolute object path names.</p>
</td></tr>
<tr><td><code id="h5List_+3A_simplify">simplify</code></td>
<td>
<p>Whether or not to only return the object names.</p>
</td></tr>
<tr><td><code id="h5List_+3A_detailed">detailed</code></td>
<td>
<p>Whether or not to show the detailed information.</p>
</td></tr>
<tr><td><code id="h5List_+3A_name">name</code></td>
<td>
<p>A link in file. Must refer to an H5Group. Default is &quot;/&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>simplify</code>, will return a character vector specifying names of H5 
links, otherwise will return a <code>data.frame</code> to show details.
</p>


<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+H5Group">H5Group</a></code><code>$ls()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")

h5List(file)
h5List(file, "obs")
h5List(file, recursive = TRUE)
h5List(file, "obs", simplify = FALSE, recursive = TRUE)

h5g &lt;- h5Open(file, "obs", mode = "r")
h5List(h5g)

</code></pre>

<hr>
<h2 id='h5Move'>Move link in an HDF5 file</h2><span id='topic+h5Move'></span>

<h3>Description</h3>

<p>Move one HDF5 link to another position within the same file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Move(file, from.name, to.name, overwrite = FALSE, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Move_+3A_file">file</code></td>
<td>
<p>An HDF5 file.</p>
</td></tr>
<tr><td><code id="h5Move_+3A_from.name">from.name</code></td>
<td>
<p>Name of the source link.</p>
</td></tr>
<tr><td><code id="h5Move_+3A_to.name">to.name</code></td>
<td>
<p>Name of the destination link.</p>
</td></tr>
<tr><td><code id="h5Move_+3A_overwrite">overwrite</code></td>
<td>
<p>When <code>to.name</code> already exists, whether or not to 
overwrite it.</p>
</td></tr>
<tr><td><code id="h5Move_+3A_verbose">verbose</code></td>
<td>
<p>Print progress.</p>
</td></tr>
<tr><td><code id="h5Move_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$link_move_from()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+H5File">H5File</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
to.file &lt;- tempfile(fileext = ".h5")
file.copy(file, to.file)

obs &lt;- h5Read(to.file, "obs")
h5Move(to.file, "obs", "obs2")
obs2 &lt;- h5Read(to.file, "obs2")
stopifnot(identical(obs, obs2))

# Move an object to an existing link
h5Move(to.file, "obs2", "var")  # Warning
h5Move(to.file, "obs2", "var", overwrite = TRUE)

# Move a non-existing object will raise an error
try(h5Move(to.file, "obs", "obs3"))

</code></pre>

<hr>
<h2 id='h5Open'>Open an HDF5 file, file-handler or group object</h2><span id='topic+h5Open'></span><span id='topic+h5Open.H5Group'></span><span id='topic+h5Open.H5File'></span><span id='topic+h5Open.character'></span>

<h3>Description</h3>

<p>Open an HDF5 file, file-handler or group object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Open(x, name, ...)

## S3 method for class 'H5Group'
h5Open(x, name, ...)

## S3 method for class 'H5File'
h5Open(x, name, ...)

## S3 method for class 'character'
h5Open(x, name, mode = c("a", "r", "r+", "w", "w-", "x"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Open_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> or a 
path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5Open_+3A_name">name</code></td>
<td>
<p>Name of the opened HDF5 link.</p>
</td></tr>
<tr><td><code id="h5Open_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5Group$open()</code>.</p>
</td></tr>
<tr><td><code id="h5Open_+3A_mode">mode</code></td>
<td>
<p>Passed to <code><a href="#topic+h5TryOpen">h5TryOpen</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An opened <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> 
or <code><a href="hdf5r.html#topic+H5D">H5D</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
obs &lt;- h5Open(file, "obs", mode = "r")
stopifnot(inherits(obs, "H5Group"))
tsne &lt;- h5Open(file, "obsm/tsne", mode = "r")
stopifnot(inherits(tsne, "H5D"))

</code></pre>

<hr>
<h2 id='h5Overwrite'>Overwrite an existing HDF5 link</h2><span id='topic+h5Overwrite'></span>

<h3>Description</h3>

<p>Overwrite an existing HDF5 link
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Overwrite(file, name, overwrite)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Overwrite_+3A_file">file</code></td>
<td>
<p>An existing HDF5 file</p>
</td></tr>
<tr><td><code id="h5Overwrite_+3A_name">name</code></td>
<td>
<p>Name of HDF5 link to be overwritten.</p>
</td></tr>
<tr><td><code id="h5Overwrite_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether or not to overwrite <code>name</code>.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> When <code>file</code> doesn't exist, will create it.
</p>
</li>
<li><p> When the old link <code>name</code> doesn't exist, will simply return 
<code>file</code>. 
</p>
</li>
<li><p> When <code>name</code> exists and <code>overwrite</code> is <code>TRUE</code>, will copy 
the rest of HDF5 links to an updated <code>file</code> with <code><a href="#topic+h5Backup">h5Backup</a></code>. 
If <code>name</code> is &quot;/&quot;, will create a new <code>file</code> and overwrite the old one.
</p>
</li>
<li><p> When <code>name</code> exists and <code>overwrite</code> is <code>FALSE</code>, will 
raise an error.
</p>
</li></ul>



<h3>Value</h3>

<p>Path to <code>file</code> which is ready to be written.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
tmp.file &lt;- tempfile(fileext = ".h5")
file.copy(file, tmp.file)

obs &lt;- h5Read(tmp.file, "obs")

h5Overwrite(tmp.file, "layers", TRUE)
stopifnot(!h5Exists(tmp.file, "layers"))

# You can still read other links.
obs2 &lt;- h5Read(tmp.file, "obs")
stopifnot(identical(obs, obs2))

</code></pre>

<hr>
<h2 id='h5Prep'>Prepare an R object to be written into HDF5 file</h2><span id='topic+h5Prep'></span><span id='topic+h5Prep.default'></span>

<h3>Description</h3>

<p>Methods to transform a complex R object (for example, S4 object) into 
combination of base R objects, such as <code>vector</code>, <code>array</code>, 
<code>data.frame</code> or <code>list</code>, so that it can be written into HDF5 file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Prep(x, ...)

## Default S3 method:
h5Prep(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Prep_+3A_x">x</code></td>
<td>
<p>The R object to be transformed</p>
</td></tr>
<tr><td><code id="h5Prep_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to other methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In this package, <code>h5Prep</code> will return <code>x</code> itself by default. 
Extended methods can be easily added for specific S4 class.
</p>


<h3>Value</h3>

<p>An R object of converted <code>x</code>.
</p>

<hr>
<h2 id='h5Read'>Read data from an existing HDF5 link</h2><span id='topic+h5Read'></span><span id='topic+h5Read.H5Group'></span><span id='topic+h5Read.H5File'></span><span id='topic+h5Read.character'></span>

<h3>Description</h3>

<p>Function to read data from an existing HDF5 group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Read(x, name = NULL, ...)

## S3 method for class 'H5Group'
h5Read(x, name = NULL, transpose = FALSE, toS4.func = NULL, ...)

## S3 method for class 'H5File'
h5Read(x, name = NULL, transpose = FALSE, toS4.func = NULL, ...)

## S3 method for class 'character'
h5Read(x, name = NULL, transpose = FALSE, toS4.func = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Read_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> or a 
path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5Read_+3A_name">name</code></td>
<td>
<p>Name of the HDF5 link to be read.</p>
</td></tr>
<tr><td><code id="h5Read_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code><a href="#topic+h5ReadDataset">h5ReadDataset</a></code>.</p>
</td></tr>
<tr><td><code id="h5Read_+3A_transpose">transpose</code></td>
<td>
<p>Whether or not to transpose the read matrix. Only works for 
a 2-dimension array-like data.</p>
</td></tr>
<tr><td><code id="h5Read_+3A_tos4.func">toS4.func</code></td>
<td>
<p>A function to convert the read R list into an S4 object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The load R object. Currently support <code>vector</code>, <code>matrix</code>, 
<code>data.frame</code>, <code>list</code> and sparse matrix (<code>dgCMatrix</code> and 
<code>dgRMatrix</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")

# Read a matrix
x &lt;- h5Read(file, name = "X")
x &lt;- h5Read(file, name = "X", transpose = TRUE)
x &lt;- h5Read(file, name = "X", idx_list = list(1:10, 1:20))
x &lt;- h5Read(
  file, 
  name = "X", 
  idx_list = list(1:10, 1:20), 
  transpose = TRUE
)

# Read a dgCMatrix
x &lt;- h5Read(file, name = "raw/X")
x &lt;- h5Read(file, name = "raw/X", transpose = TRUE)

# Read a data.frame
x &lt;- h5Read(file, name = "obs")
x &lt;- h5Read(file, name = "raw/var") # Read a data.frame with empty column

# Read a list
x &lt;- h5Read(file)
x &lt;- h5Read(file, "raw")
x &lt;- h5Read(file, "obsm")

</code></pre>

<hr>
<h2 id='h5ReadDataset'>Read data from an existing H5 dataset</h2><span id='topic+h5ReadDataset'></span><span id='topic+h5ReadDataset.H5D'></span><span id='topic+h5ReadDataset.H5Group'></span><span id='topic+h5ReadDataset.H5File'></span><span id='topic+h5ReadDataset.character'></span>

<h3>Description</h3>

<p>Low-level helper function to read atomic R data from an existing H5 dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5ReadDataset(x, ...)

## S3 method for class 'H5D'
h5ReadDataset(x, idx_list = NULL, transpose = FALSE, ...)

## S3 method for class 'H5Group'
h5ReadDataset(x, name, idx_list = NULL, transpose = FALSE, ...)

## S3 method for class 'H5File'
h5ReadDataset(x, name, idx_list = NULL, transpose = FALSE, ...)

## S3 method for class 'character'
h5ReadDataset(x, name, transpose = FALSE, idx_list = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5ReadDataset_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code>, 
<code><a href="hdf5r.html#topic+H5D">H5D</a></code> or a path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5ReadDataset_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5D$read()</code>.</p>
</td></tr>
<tr><td><code id="h5ReadDataset_+3A_idx_list">idx_list</code></td>
<td>
<p>The indices for each dimension of <code>name</code> to subset given 
as a list. If <code>NULL</code>, the entire dataset will be read. Passed to 
<code><a href="hdf5r.html#topic+H5D-class">H5D</a></code><code>$read(args)</code>.</p>
</td></tr>
<tr><td><code id="h5ReadDataset_+3A_transpose">transpose</code></td>
<td>
<p>Whether or not to transpose the read matrix. Only works for 
a 2-dimension array-like data.</p>
</td></tr>
<tr><td><code id="h5ReadDataset_+3A_name">name</code></td>
<td>
<p>Name of the HDF5 link to be read. Must be an H5 dataset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array-like object with the data read.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")

x &lt;- h5ReadDataset(file, name = "X")
x &lt;- h5ReadDataset(file, name = "X", transpose = TRUE)
x &lt;- h5ReadDataset(file, name = "X", idx_list = list(1:10, 1:20))
x &lt;- h5ReadDataset(
  file, 
  name = "X", 
  idx_list = list(1:10, 1:20), 
  transpose = TRUE
)

</code></pre>

<hr>
<h2 id='h5TryOpen'>Automatically retry opening HDF5 file</h2><span id='topic+h5TryOpen'></span>

<h3>Description</h3>

<p>Helper function to open an HDF5 file. When the opening fails, will retry it 
until reach a timeout.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5TryOpen(
  filename,
  mode = c("a", "r", "r+", "w", "w-", "x"),
  timeout = getOption(x = "h5TryOpen.timeout", default = 0),
  interval = getOption(x = "h5TryOpen.interval", default = 0),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5TryOpen_+3A_filename">filename</code></td>
<td>
<p>An HDF5 file to open</p>
</td></tr>
<tr><td><code id="h5TryOpen_+3A_mode">mode</code></td>
<td>
<p>How to open it: 
</p>

<ul>
<li> <p><code>a</code> creates a new file or opens an existing one for read/write. 
</p>
</li>
<li> <p><code>r</code> opens an existing file for reading
</p>
</li>
<li> <p><code>r+</code> opens an existing file for read/write. 
</p>
</li>
<li> <p><code>w</code> creates a file, truncating any existing ones.
</p>
</li>
<li> <p><code>w-</code> and <code>x</code> are synonyms, creating a file and failing if it 
already exists.
</p>
</li></ul>
</td></tr>
<tr><td><code id="h5TryOpen_+3A_timeout">timeout</code></td>
<td>
<p>Positive integer. The timeout for retrying.</p>
</td></tr>
<tr><td><code id="h5TryOpen_+3A_interval">interval</code></td>
<td>
<p>Positive integer. The interval seconds of retrying.</p>
</td></tr>
<tr><td><code id="h5TryOpen_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$new()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>timeout</code> and <code>interval</code> must be positive. Otherwise no retrying, 
which is default setting.
</p>


<h3>Value</h3>

<p>When <code>file</code> is opened successfully, an <code><a href="hdf5r.html#topic+H5File">H5File</a></code> will 
be returned. Otherwise, will keep retrying. When a timeout is reached, will 
raise an error and terminate the current R session.
</p>


<h3>See Also</h3>

<p><code><a href="hdf5r.html#topic+H5File">H5File</a></code> for <code>mode</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
h5fh &lt;- h5TryOpen(file, mode = "r")
h5fh
h5fh$close_all()

</code></pre>

<hr>
<h2 id='h5Write'>Write an R object to HDF5 file</h2><span id='topic+h5Write'></span><span id='topic+h5Write.default'></span><span id='topic+h5Write.array'></span><span id='topic+h5Write.factor'></span><span id='topic+h5Write.data.frame'></span><span id='topic+h5Write.dgCMatrix'></span><span id='topic+h5Write.dgRMatrix'></span><span id='topic+h5Write.list'></span>

<h3>Description</h3>

<p>Methods to write an R object to an HDF5 file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5Write(x, file, name, ...)

## Default S3 method:
h5Write(x, file, name, overwrite = FALSE, gzip_level = 6, ...)

## S3 method for class 'array'
h5Write(
  x,
  file,
  name,
  overwrite = FALSE,
  transpose = FALSE,
  block_size = 5000L,
  gzip_level = 6,
  ...
)

## S3 method for class 'factor'
h5Write(x, file, name, overwrite = FALSE, ordered = TRUE, gzip_level = 6, ...)

## S3 method for class 'data.frame'
h5Write(x, file, name, overwrite = FALSE, gzip_level = 6, ...)

## S3 method for class 'dgCMatrix'
h5Write(
  x,
  file,
  name,
  overwrite = FALSE,
  transpose = FALSE,
  add.shape = FALSE,
  dimnames = list(),
  gzip_level = 6,
  ...
)

## S3 method for class 'dgRMatrix'
h5Write(
  x,
  file,
  name,
  overwrite = FALSE,
  transpose = FALSE,
  add.shape = FALSE,
  dimnames = list(),
  gzip_level = 6,
  ...
)

## S3 method for class 'list'
h5Write(x, file, name, overwrite = FALSE, gzip_level = 6, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5Write_+3A_x">x</code></td>
<td>
<p>An R object to be written</p>
</td></tr>
<tr><td><code id="h5Write_+3A_file">file</code></td>
<td>
<p>An existing HDF5 file</p>
</td></tr>
<tr><td><code id="h5Write_+3A_name">name</code></td>
<td>
<p>Name of the HDF5 link to be written into</p>
</td></tr>
<tr><td><code id="h5Write_+3A_...">...</code></td>
<td>
<p>Arguments passed to other methods.</p>
</td></tr>
<tr><td><code id="h5Write_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether or not to overwrite the existing HDF5 link.</p>
</td></tr>
<tr><td><code id="h5Write_+3A_gzip_level">gzip_level</code></td>
<td>
<p>Enable zipping at the level given here.</p>
</td></tr>
<tr><td><code id="h5Write_+3A_transpose">transpose</code></td>
<td>
<p>Whether or not to transpose the input matrix. Only works for 
a 2-dimension array-like object.</p>
</td></tr>
<tr><td><code id="h5Write_+3A_block_size">block_size</code></td>
<td>
<p>Default size for number of columns when <code>transpose</code> 
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="h5Write_+3A_ordered">ordered</code></td>
<td>
<p>When writing a factor, whether or not the categories are 
ordered.</p>
</td></tr>
<tr><td><code id="h5Write_+3A_add.shape">add.shape</code></td>
<td>
<p>When writing a CSC- or CSR-matrix, whether or not to also 
write the number of dimensions into an HDF5 dataset.</p>
</td></tr>
<tr><td><code id="h5Write_+3A_dimnames">dimnames</code></td>
<td>
<p>When writing a CSC- or CSR-matrix, whether or not to also 
write the dimension names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, <code>h5Write</code> will try to transform any S4 object <code>x</code> into 
combination of base R objects using <code><a href="#topic+h5Prep">h5Prep</a></code> before writting it.
</p>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>References</h3>

<p><a href="https://anndata.readthedocs.io/en/latest/fileformat-prose.html">https://anndata.readthedocs.io/en/latest/fileformat-prose.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
file &lt;- system.file("extdata", "pbmc_small.h5ad", package = "hdf5r.Extra")
tmp.file &lt;- tempfile(fileext = ".h5")
h5CreateFile(tmp.file)

# vector -----------------------
x &lt;- h5Read(file, "/raw/X/data")
h5Write(x, tmp.file, "raw/X/data")
x2 &lt;- h5Read(tmp.file, "raw/X/data")
stopifnot(identical(x, x2))



# matrix -----------------------
x &lt;- h5Read(file, "X")
h5Write(x, tmp.file, "X")
x2 &lt;- h5Read(tmp.file, "X")
stopifnot(identical(x, x2))

h5Write(x, tmp.file, "X2", transpose = TRUE)
x2 &lt;- h5Read(tmp.file, "X2")
stopifnot(identical(t(x), x2))



# data.frame -----------------------
x &lt;- h5Read(file, "obs")
h5Write(x, tmp.file, "obs")
x2 &lt;- h5Read(tmp.file, "obs")
stopifnot(identical(x, x2))

x &lt;- h5Read(file, "raw/var") # data.frame with empty column
h5Write(x, tmp.file, "raw/var")
x2 &lt;- h5Read(tmp.file, "raw/var")
stopifnot(identical(x, x2))



# dgCMatrix -----------------------
x &lt;- h5Read(file, "raw/X")
h5Write(x, tmp.file, "raw/X", overwrite = TRUE)
x2 &lt;- h5Read(tmp.file, "raw/X")
stopifnot(identical(x, x2))



# list -----------------------
x &lt;- h5Read(file)
h5Write(x, tmp.file, name = NULL, overwrite = TRUE)
x2 &lt;- h5Read(tmp.file)
stopifnot(identical(x, x2))


</code></pre>

<hr>
<h2 id='h5WriteDataset'>Write array-like data into an existing H5 dataset</h2><span id='topic+h5WriteDataset'></span><span id='topic+h5WriteDataset.H5D'></span><span id='topic+h5WriteDataset.H5Group'></span><span id='topic+h5WriteDataset.H5File'></span><span id='topic+h5WriteDataset.character'></span>

<h3>Description</h3>

<p>Low-level helper function to write atomic R data into an existing H5 dataset. 
All data written will be treated as array for HDF5.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5WriteDataset(x, robj, ...)

## S3 method for class 'H5D'
h5WriteDataset(
  x,
  robj,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)

## S3 method for class 'H5Group'
h5WriteDataset(
  x,
  robj,
  name,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)

## S3 method for class 'H5File'
h5WriteDataset(
  x,
  robj,
  name,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)

## S3 method for class 'character'
h5WriteDataset(
  x,
  robj,
  name,
  idx_list = NULL,
  transpose = FALSE,
  block_size = 5000L,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5WriteDataset_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code>, 
<code><a href="hdf5r.html#topic+H5D">H5D</a></code> or a path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5WriteDataset_+3A_robj">robj</code></td>
<td>
<p>An R array.</p>
</td></tr>
<tr><td><code id="h5WriteDataset_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5D$write()</code>.</p>
</td></tr>
<tr><td><code id="h5WriteDataset_+3A_idx_list">idx_list</code></td>
<td>
<p>The indices for each dimension of <code>name</code> to subset given 
as a list. If <code>NULL</code>, the entire dataset will be use. Passed to 
<code><a href="hdf5r.html#topic+H5D-class">H5D</a></code><code>$write(args)</code></p>
</td></tr>
<tr><td><code id="h5WriteDataset_+3A_transpose">transpose</code></td>
<td>
<p>Whether or not to transpose the input matrix. Only works for 
a 2-dimension array-like object.</p>
</td></tr>
<tr><td><code id="h5WriteDataset_+3A_block_size">block_size</code></td>
<td>
<p>Default size for number of columns to transpose in a single 
writing. Increasing block_size may speed up but at an additional memory cost.</p>
</td></tr>
<tr><td><code id="h5WriteDataset_+3A_verbose">verbose</code></td>
<td>
<p>Print progress.</p>
</td></tr>
<tr><td><code id="h5WriteDataset_+3A_name">name</code></td>
<td>
<p>Name of the HDF5 dataset to be written.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>Note</h3>

<p>If you want to write <code>robj</code> into scalar space, you should use 
<code><a href="#topic+h5WriteScalar">h5WriteScalar</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp.file &lt;- tempfile(fileext = ".h5")
h5CreateFile(tmp.file)

# Scalar (will be written into array space for HDF5) ##########
h5CreateDataset(
  tmp.file, 
  name = "test/bool", 
  dims = 1, 
  storage.mode = logical()
) # Must create the dataset first
h5WriteDataset(tmp.file, FALSE, name = "test/bool")
x &lt;- h5Read(tmp.file, name = "test/bool")
stopifnot(!x)

h5CreateDataset(tmp.file, name = "test/num", dims = 1)
h5WriteDataset(tmp.file, 100.0, name = "test/num")
x &lt;- h5Read(tmp.file, name = "test/num")
stopifnot(identical(x, 100.0))

h5CreateDataset(
  tmp.file, 
  name = "test/string", 
  dims = 1, 
  storage.mode = character()
)
h5WriteDataset(tmp.file, "ABC", name = "test/string")
x &lt;- h5Read(tmp.file, name = "test/string")
stopifnot(identical(x, "ABC"))

# Vector (1d array) ##########
x1 &lt;- rep(FALSE, 10)
h5CreateDataset(
  tmp.file, 
  name = "vec/bool", 
  dims = 10, 
  storage.mode = logical()
)
h5WriteDataset(tmp.file, x1, name = "vec/bool")
x &lt;- h5Read(tmp.file, name = "vec/bool")
stopifnot(identical(x, x1))

x1 &lt;- rep(1.1, 10)
h5CreateDataset(
  tmp.file, 
  name = "vec/num", 
  dims = 10
)
h5WriteDataset(tmp.file, x1, name = "vec/num")
x &lt;- h5Read(tmp.file, name = "vec/num")
stopifnot(identical(x, x1))

x1 &lt;- rep(2.0, 5)
h5WriteDataset(
  tmp.file, 
  x1, 
  name = "vec/num", 
  idx_list = list(c(1, 3, 5, 7, 9)) # Set each indices to be written
)
x &lt;- h5Read(tmp.file, name = "vec/num")
stopifnot(identical(x, rep(c(2.0, 1.1), 5)))

# matrix ##########
x1 &lt;- matrix(1.0, 7, 5)
h5CreateDataset(
  tmp.file, 
  name = "mat/num", 
  dims = dim(x1)
)
h5WriteDataset(
  tmp.file, 
  x1, 
  name = "mat/num"
)
x &lt;- h5Read(tmp.file, name = "mat/num")
stopifnot(identical(x, x1))

x1 &lt;- matrix(2.0, 3, 4)
h5WriteDataset(
  tmp.file, 
  x1, 
  name = "mat/num",
  idx_list = list(2:4, 1:4)
)
x &lt;- h5Read(tmp.file, name = "mat/num")
print(x)

h5WriteDataset(
  tmp.file, 
  x1, 
  name = "mat/num",
  idx_list = list(1:4, 2:4),  # idx_list must match the transposed matrix
  transpose = TRUE
)
x &lt;- h5Read(tmp.file, name = "mat/num")
print(x)

</code></pre>

<hr>
<h2 id='h5WriteScalar'>Write a scalar into HDF5 file</h2><span id='topic+h5WriteScalar'></span><span id='topic+h5WriteScalar.H5Group'></span><span id='topic+h5WriteScalar.H5File'></span><span id='topic+h5WriteScalar.character'></span>

<h3>Description</h3>

<p>Low-level helper function to write scalar R data into HDF5 dataset. Data will 
be written into scalar space instead of array space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>h5WriteScalar(x, name, robj, ...)

## S3 method for class 'H5Group'
h5WriteScalar(x, name, robj, stype = c("utf8", "ascii7"), ...)

## S3 method for class 'H5File'
h5WriteScalar(x, name, robj, ...)

## S3 method for class 'character'
h5WriteScalar(x, name, robj, overwrite = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="h5WriteScalar_+3A_x">x</code></td>
<td>
<p>An <code><a href="hdf5r.html#topic+H5File">H5File</a></code>, <code><a href="hdf5r.html#topic+H5Group">H5Group</a></code> or a 
path name of HDF5 file.</p>
</td></tr>
<tr><td><code id="h5WriteScalar_+3A_name">name</code></td>
<td>
<p>Name of an HDF5 link.</p>
</td></tr>
<tr><td><code id="h5WriteScalar_+3A_robj">robj</code></td>
<td>
<p>A scalar object.</p>
</td></tr>
<tr><td><code id="h5WriteScalar_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>H5File$create_dataset()</code>. See 
<code>link[hdf5r:H5File-class]{H5File}</code>.</p>
</td></tr>
<tr><td><code id="h5WriteScalar_+3A_stype">stype</code></td>
<td>
<p>'utf8' or 'ascii7'. Passed to <code><a href="#topic+h5GuessDtype">h5GuessDtype</a></code>.</p>
</td></tr>
<tr><td><code id="h5WriteScalar_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether or not to overwrite the existing <code>name</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This is an operation function and no return. Any failure should raise an 
error.
</p>


<h3>Note</h3>

<p>If you want to write <code>robj</code> into array space, you should use 
<code><a href="#topic+h5WriteDataset">h5WriteDataset</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp.file &lt;- tempfile(fileext = ".h5")
h5CreateFile(tmp.file)

h5WriteScalar(tmp.file,  name = "test/scalar", TRUE)
x &lt;- h5ReadDataset(tmp.file, name = "test/scalar")
stopifnot(x)

h5WriteScalar(tmp.file,  name = "test/scalar", 100.0, overwrite = TRUE)
x &lt;- h5ReadDataset(tmp.file, name = "test/scalar")
stopifnot(identical(x, 100.0))

h5WriteScalar(tmp.file,  name = "test/scalar", "ABC", overwrite = TRUE)
x &lt;- h5Read(tmp.file, name = "test/scalar")
stopifnot(identical(x, "ABC"))

h5WriteScalar(tmp.file,  name = "test/factor", factor("ABC"))
x &lt;- h5ReadDataset(tmp.file, name = "test/factor")
stopifnot(identical(x, factor("ABC")))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
