<!DOCTYPE html><html><head><title>Help for package Euclimatch</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Euclimatch}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#climatch_par'><p>Run climatch in parallel</p></a></li>
<li><a href='#climatch_plot'><p>Plot or Create SpatRaster of Climatch Data</p></a></li>
<li><a href='#climatch_sum'><p>Climatch Summary Score</p></a></li>
<li><a href='#climatch_vec'><p>Euclidean climatch scores</p></a></li>
<li><a href='#extract_clim_data'><p>Extract Climate Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Euclidean Climatch Algorithm</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>An interface for performing climate matching using the Euclidean "Climatch" algorithm. Functions provide a vector of climatch scores (0-10) for each location (i.e., grid cell) within the recipient region, the percent of climatch scores &gt;= a threshold value, and mean climatch score. Tools for parallelization and visualizations are also provided. Note that the floor function that rounds the climatch score down to the nearest integer has been removed in this implementation and the “Climatch” algorithm, also referred to as the “Climate” algorithm, is described in: Crombie, J., Brown, L., Lizzio, J., &amp; Hood, G. (2008). “Climatch user manual”. The method for the percent score is described in: Howeth, J.G., Gantz, C.A., Angermeier, P.L., Frimpong, E.A., Hoff, M.H., Keller, R.P., Mandrak, N.E., Marchetti, M.P., Olden, J.D., Romagosa, C.M., and Lodge, D.M. (2016). &lt;<a href="https://doi.org/10.1111%2Fddi.12391">doi:10.1111/ddi.12391</a>&gt;.</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/JustinHubbard/Euclimatch/issues">https://github.com/JustinHubbard/Euclimatch/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.10), foreach, doParallel, RcppParallel, terra,
RColorBrewer, grDevices</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-24 17:48:31 UTC; justi</td>
</tr>
<tr>
<td>Author:</td>
<td>Justin A. G. Hubbard
    <a href="https://orcid.org/0000-0003-1510-9546"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  D. Andrew R. Drake [aut],
  Nicholas E. Mandrak
    <a href="https://orcid.org/0000-0001-8335-9681"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Justin A. G. Hubbard &lt;justin.hubbard@mail.utoronto.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-24 21:10:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='climatch_par'>Run climatch in parallel</h2><span id='topic+climatch_par'></span>

<h3>Description</h3>

<p>Run climatch in parallel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>climatch_par(recipient,

source,

globvar,

biovar = 1:length(globvar),

ncores,

type = "perc",

threshold = 6)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="climatch_par_+3A_recipient">recipient</code></td>
<td>
<p>List of data.frames of the recipient regions</p>
</td></tr>
<tr><td><code id="climatch_par_+3A_source">source</code></td>
<td>
<p>List of dataf.rames of the source regions</p>
</td></tr>
<tr><td><code id="climatch_par_+3A_globvar">globvar</code></td>
<td>
<p>Vector of the global variance of each variable</p>
</td></tr>
<tr><td><code id="climatch_par_+3A_biovar">biovar</code></td>
<td>
<p>Vector of the columns (climate variables) to use, default all columns</p>
</td></tr>
<tr><td><code id="climatch_par_+3A_ncores">ncores</code></td>
<td>
<p>The number of cores to use in parallel</p>
</td></tr>
<tr><td><code id="climatch_par_+3A_type">type</code></td>
<td>
<p>Choose between &quot;perc&quot; (default) or &quot;mean&quot; passed to climatch_sum() and &quot;vec&quot; passes to climatch_vec()</p>
</td></tr>
<tr><td><code id="climatch_par_+3A_threshold">threshold</code></td>
<td>
<p>The climatch score (0-10) to use in calculating the percentage match, which is the number of grid cells within the recipient region with a climatch &gt;= the threshold (default is 6).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&quot;perc&quot; and &quot;mean&quot; returns data.frame of climatch within recipients (rows) for each source represented in columns, &quot;vec&quot; returns data.frame of climatch of a recipient (each column corresponds to grid cell), to sources (corresponding to rows)
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Dummy data
i1 &lt;- data.frame("clim1" = 1:10, "clim2" = 9:18) # Fake source climate data
i &lt;- list(i1, i1) # list the source dataframes
j1 &lt;- data.frame("clim1" = 11:20, "clim2" = 16:25) # Fake recipient climate data
j &lt;- list(j1, j1) # list the recipient dataframes
variance &lt;- c(60, 80) # Fake global variance

# Climate matching
climatch_par(recipient = j, source = i, globvar = variance, ncores = 1, type = "vec")
</code></pre>

<hr>
<h2 id='climatch_plot'>Plot or Create SpatRaster of Climatch Data</h2><span id='topic+climatch_plot'></span>

<h3>Description</h3>

<p>Create a plot or SpatRaster of climatch values within recipient region.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>climatch_plot(climdat,
                     recipient,
                     source = NULL,
                     climatch = NULL,
                     provide_SpatRaster = FALSE,
                     xlim = terra::ext(recipient)[1:2],
                     ylim = terra::ext(recipient)[3:4],
                     plg = list(title = "Climatch", size=1),
                     xlab = expression(paste("Longitude (",degree,")")),
                     ylab = expression(paste("Latitude (",degree, ")")),
                     ...
                     )
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="climatch_plot_+3A_climdat">climdat</code></td>
<td>
<p>A SpatRaster, RasterStack or RaterLayer of the climate data to extract.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_recipient">recipient</code></td>
<td>
<p>An object specifying location of where the recipient (i.e., target) region. Can be a SpatialPolygosDataFrame, SpatialPolygons, SpatVector.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_source">source</code></td>
<td>
<p>An object, like 'recipient', specifying the location of the source region.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_climatch">climatch</code></td>
<td>
<p>Vector of climatch values to use in creating SpatRaster of recipient.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_provide_spatraster">provide_SpatRaster</code></td>
<td>
<p>Logical. If TRUE then function returns SpatRaster object, if FALSE (default) return plot.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_xlim">xlim</code></td>
<td>
<p>Numeric, specify the limits of the x axis. Default is extent of x-axis from recipient SpatRaster.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_ylim">ylim</code></td>
<td>
<p>Numeric, specify the limits of the y axis. Default is extent of y-axis from recipient SpatRaster.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_plg">plg</code></td>
<td>
<p>A list of parameters for specifying the legend. Default is &quot;Climatch&quot; see 'plot' in 'terra' for more documentation.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_xlab">xlab</code></td>
<td>
<p>Character for x axis label.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_ylab">ylab</code></td>
<td>
<p>Character for y axis label.</p>
</td></tr>
<tr><td><code id="climatch_plot_+3A_...">...</code></td>
<td>
<p>Pass arguments to plot function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot of the climatch within the recipient region. A SpatRater if provide_SpatRaster is TRUE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>r1 &lt;- data.frame()
for(i in 1:100){r1 &lt;- rbind(r1, runif(60))}
rclim1 &lt;- terra::rast(as(r1, "matrix")) #Create the RasterLayer

# Dummy lon lat mimicking species occurrence records
spec_occ &lt;- data.frame("lon" = 1:10, "lat" = 11:20)

# Create dummy polygons
x_coor &lt;- c(1, 5,  10, 8, 3)
y_coor &lt;- c(15, 20,  27, 30, 29)
dum_coor &lt;- cbind(x_coor, y_coor)
dum_poly &lt;- terra::vect(dum_coor, type = "polygon")

# Run and plot the climatch
climatch_plot(recipient = dum_poly, source = spec_occ, climdat = rclim1, xlab = "Lon", ylab = "Lat")
</code></pre>

<hr>
<h2 id='climatch_sum'>Climatch Summary Score</h2><span id='topic+climatch_sum'></span>

<h3>Description</h3>

<p>A summarized climatch score within the recipient region to a source region. Provides the percentage of climate data points in the recipient region equal to or above a specified score (default is 6), or the mean climatch score across the whole recipient region. Note no floor function is used as in Crombie et al. (2008)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>climatch_sum(recipient, source, globvar, type = "perc", threshold = 6)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="climatch_sum_+3A_recipient">recipient</code></td>
<td>
<p>A data.frame or list of data.frames of climatic variables for the recipient region.</p>
</td></tr>
<tr><td><code id="climatch_sum_+3A_source">source</code></td>
<td>
<p>A data.frame or list of data.frames of climatic variables for the source region.</p>
</td></tr>
<tr><td><code id="climatch_sum_+3A_globvar">globvar</code></td>
<td>
<p>A vector of the global variance of each climate variable.</p>
</td></tr>
<tr><td><code id="climatch_sum_+3A_type">type</code></td>
<td>
<p>Specifies the type of summary score to use. &quot;perc&quot; (default) specifies a percent climatch score representing the number of grid cells above or equal to a given value specified with the 'thershold' argument. &quot;mean&quot; provides the mean climatch score across the recipient region.</p>
</td></tr>
<tr><td><code id="climatch_sum_+3A_threshold">threshold</code></td>
<td>
<p>The climatch score to use in calculating the percentage match, which is the number of grid cells within the recipient region with a climatch &gt;= the threshold (default is 6).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric value, vector or data.frame of the percentage of climatch scores within the recipient region(s) &gt;= a threshold value, or the mean climatch score across the region(s).
</p>


<h3>References</h3>

<p>Predicting invasiveness of species in trade: climate match, trophic guild and fecundity influence establishment and impact of non-native freshwater fishes&quot;&lt;doi:10.1111/ddi.12391&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>i &lt;- as.data.frame(matrix(runif(n=180, min=1, max=20), nrow=60)) # Fake source climate data
j &lt;- as.data.frame(matrix(runif(n=300, min=10, max=40), nrow=100)) # Fake recipient data
variance &lt;- c(600, 800, 450) # Fake global variance

climatch_sum(recipient = j, source = i, globvar = variance, type = "perc", threshold = 6)

</code></pre>

<hr>
<h2 id='climatch_vec'>Euclidean climatch scores</h2><span id='topic+climatch_vec'></span>

<h3>Description</h3>

<p>Vector of the climatch scores within the recipient region
</p>


<h3>Usage</h3>

<pre><code class='language-R'>climatch_vec(recipient, source, globvar)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="climatch_vec_+3A_recipient">recipient</code></td>
<td>
<p>A data.frame of climatic variables for the recipient region.</p>
</td></tr>
<tr><td><code id="climatch_vec_+3A_source">source</code></td>
<td>
<p>A data.frame of climatic variables for the source region.</p>
</td></tr>
<tr><td><code id="climatch_vec_+3A_globvar">globvar</code></td>
<td>
<p>A vector of the global variance of each climate variable, in the same order as the columns of source and recipient region data.frames.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of climatch scores corresponding to each grid cell within recipient region, i.e., each row in the recipient data.frame.
</p>


<h3>References</h3>

<p>Crombie, J., Brown, L., Lizzio, J., &amp; Hood, G. (2008). &quot;Climatch user manual&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>i &lt;- as.data.frame(matrix(runif(n=180, min=1, max=20), nrow=60)) # Fake source climate data
j &lt;- as.data.frame(matrix(runif(n=300, min=10, max=40), nrow=100)) # Fake recipient data
variance &lt;- c(600, 800, 450) # Fake global variance

climatch_vec(recipient = j, source = i, globvar = variance)

</code></pre>

<hr>
<h2 id='extract_clim_data'>Extract Climate Data</h2><span id='topic+extract_clim_data'></span>

<h3>Description</h3>

<p>Extracts climate data from several types of inputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_clim_data(climdat, locations, id = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extract_clim_data_+3A_climdat">climdat</code></td>
<td>
<p>A SpatRaster, RasterStack or RaterLayer of the climate data to extract.</p>
</td></tr>
<tr><td><code id="extract_clim_data_+3A_locations">locations</code></td>
<td>
<p>An object specifying location of where to extract the climate data from. Can be a SpatialPolygosDataFrame, SpatialPolygons, SpatVector, a single data.frame or a list of data.frames. If data.frame of list of data.frames, must provide only two columns with column names &quot;lon&quot; for longitude and &quot;lat&quot; for latitude.</p>
</td></tr>
<tr><td><code id="extract_clim_data_+3A_id">id</code></td>
<td>
<p>Choose to include cell numbers with climate data. 'TRUE' includes cell numbers, the default 'FALSE' does not include cell numbers. Used in the climatch_plot() function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame or list of data.frames of the extracted climate data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create fake climate data in as a SpatRaster object
r1 &lt;- data.frame()
for(i in 1:100){r1 &lt;- rbind(r1, runif(60))}
rclim1 &lt;- terra::rast(as(r1, "matrix")) #Create the RasterLayer
rclim2 &lt;- c(rclim1, rclim1) # Create the stack

# Dummy lon lat data i.e., species occurrences. Cols must be labelled "lon" and "lat"
# Cols must be labelled "lon" and "lat"
species.occurr &lt;- data.frame("lon" = 1:10, "lat" = 11:20)

# Create dummy polygons
x.coor &lt;- c(1, 5,  10, 8, 3)
y.coor &lt;- c(15, 20,  27, 30, 29)
dummy_coordinates &lt;- cbind(x.coor, y.coor)
dummy_polygon &lt;- terra::vect(dummy_coordinates, type = "polygon")
dummy_polygon2 &lt;- rbind(dummy_polygon, dummy_polygon)

# Extract the dummy data
# Extract dummy lon lat data
extract_clim_data(climdat = rclim2, locations = species.occurr)
# Extract dummy SpatVector with single polygon
extract_clim_data(climdat = rclim2, locations = dummy_polygon2)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
