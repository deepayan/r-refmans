<!DOCTYPE html><html lang="en-US"><head><title>Help for package webshot2</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {webshot2}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#webshot2-package'><p>webshot2: Take Screenshots of Web Pages</p></a></li>
<li><a href='#appshot'><p>Take a screenshot of a Shiny app</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#resize'><p>Resize an image</p></a></li>
<li><a href='#rmdshot'><p>Take a snapshot of an R Markdown document</p></a></li>
<li><a href='#shrink'><p>Shrink file size of a PNG</p></a></li>
<li><a href='#webshot'><p>Take a screenshot of a URL</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Take Screenshots of Web Pages</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Takes screenshots of web pages, including Shiny applications
    and R Markdown documents. 'webshot2' uses headless Chrome or Chromium
    as the browser back-end.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rstudio.github.io/webshot2/">https://rstudio.github.io/webshot2/</a>,
<a href="https://github.com/rstudio/webshot2">https://github.com/rstudio/webshot2</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rstudio/webshot2/issues">https://github.com/rstudio/webshot2/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>callr, chromote (&ge; 0.1.0), later, magrittr, promises</td>
</tr>
<tr>
<td>Suggests:</td>
<td>httpuv, rmarkdown, shiny</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-11 21:17:46 UTC; garrick</td>
</tr>
<tr>
<td>Author:</td>
<td>Winston Chang [aut, cre],
  Barret Schloerke <a href="https://orcid.org/0000-0001-9986-114X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Winston Chang &lt;winston@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-11 22:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='webshot2-package'>webshot2: Take Screenshots of Web Pages</h2><span id='topic+webshot2'></span><span id='topic+webshot2-package'></span>

<h3>Description</h3>

<p>Takes screenshots of web pages, including Shiny applications and R Markdown documents. 'webshot2' uses headless Chrome or Chromium as the browser back-end.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Winston Chang <a href="mailto:winston@posit.co">winston@posit.co</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Barret Schloerke <a href="mailto:barret@posit.co">barret@posit.co</a> (<a href="https://orcid.org/0000-0001-9986-114X">ORCID</a>) [contributor]
</p>
</li>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://rstudio.github.io/webshot2/">https://rstudio.github.io/webshot2/</a>
</p>
</li>
<li> <p><a href="https://github.com/rstudio/webshot2">https://github.com/rstudio/webshot2</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/rstudio/webshot2/issues">https://github.com/rstudio/webshot2/issues</a>
</p>
</li></ul>


<hr>
<h2 id='appshot'>Take a screenshot of a Shiny app</h2><span id='topic+appshot'></span><span id='topic+appshot.character'></span><span id='topic+appshot.shiny.appobj'></span>

<h3>Description</h3>

<p><code>appshot</code> performs a <code><a href="#topic+webshot">webshot</a></code> using two different methods
depending upon the object provided. If a 'character' is provided (pointing to
an app.R file or app directory) an isolated background R process is launched
to run the Shiny application. The current R process then captures the
<code><a href="#topic+webshot">webshot</a></code>. When a Shiny application object is supplied to
<code>appshot</code>, it is reversed: the Shiny application runs in the current R
process and an isolated background R process is launched to capture a
<code><a href="#topic+webshot">webshot</a></code>. The reason it is reversed in the second case has to do
with scoping: although it would be preferable to run the Shiny application in
a background process and call <code>webshot</code> from the current process, with
Shiny application objects, there are potential scoping errors when run this
way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>appshot(
  app,
  file = "webshot.png",
  ...,
  port = getOption("shiny.port"),
  envvars = NULL
)

## S3 method for class 'character'
appshot(
  app,
  file = "webshot.png",
  ...,
  port = getOption("shiny.port"),
  envvars = NULL
)

## S3 method for class 'shiny.appobj'
appshot(
  app,
  file = "webshot.png",
  ...,
  port = getOption("shiny.port"),
  envvars = NULL,
  webshot_timeout = 60
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="appshot_+3A_app">app</code></td>
<td>
<p>A Shiny app object, or a string naming an app directory.</p>
</td></tr>
<tr><td><code id="appshot_+3A_file">file</code></td>
<td>
<p>A vector of names of output files. Should end with an image file
type (<code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.webp</code>) or
<code>.pdf</code>. If several screenshots have to be taken and only one filename
is provided, then the function appends the index number of the screenshot
to the file name. For PDF output, it is just like printing the page to PDF
in a browser; <code>selector</code>, <code>cliprect</code>, <code>expand</code>, and
<code>zoom</code> will not be used for PDFs.</p>
</td></tr>
<tr><td><code id="appshot_+3A_...">...</code></td>
<td>
<p>Other arguments to pass on to <code><a href="#topic+webshot">webshot</a></code>.</p>
</td></tr>
<tr><td><code id="appshot_+3A_port">port</code></td>
<td>
<p>Port that Shiny will listen on.</p>
</td></tr>
<tr><td><code id="appshot_+3A_envvars">envvars</code></td>
<td>
<p>A named character vector or named list of environment
variables and values to set for the Shiny app's R process. These will be
unset after the process exits. This can be used to pass configuration
information to a Shiny app.</p>
</td></tr>
<tr><td><code id="appshot_+3A_webshot_timeout">webshot_timeout</code></td>
<td>
<p>The maximum number of seconds the phantom application
is allowed to run before killing the process. If a delay argument is
supplied (in <code>...</code>), the delay value is added to the timeout value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the normalized path to all screenshots taken. The
character vector will have a class of '&quot;webshot&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  appdir &lt;- system.file("examples", "01_hello", package="shiny")

  # With a Shiny directory
  appshot(appdir, "01_hello.png")

  # With a Shiny App object
  shinyapp &lt;- shiny::shinyAppDir(appdir)
  appshot(shinyapp, "01_hello_app.png")
}

</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='resize'>Resize an image</h2><span id='topic+resize'></span>

<h3>Description</h3>

<p>This does not change size of the image in pixels, nor does it affect
appearance &ndash; it is lossless compression. This requires GraphicsMagick
(recommended) or ImageMagick to be installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resize(filename, geometry)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="resize_+3A_filename">filename</code></td>
<td>
<p>Character vector containing the path of images to resize.</p>
</td></tr>
<tr><td><code id="resize_+3A_geometry">geometry</code></td>
<td>
<p>Scaling specification. Can be a percent, as in <code>"50%"</code>,
or pixel dimensions like <code>"120x120"</code>, <code>"120x"</code>, or <code>"x120"</code>.
Any valid ImageMagick geometry specification can be used. If <code>filename</code>
contains multiple images, this can be a vector to specify distinct sizes
for each image.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The 'filename' supplied but with a class value of '&quot;webshot&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # Can be chained with webshot() or appshot()
  webshot("https://www.r-project.org/", "r-small-1.png") %&gt;%
    resize("75%")

  # Generate image that is 400 pixels wide
  webshot("https://www.r-project.org/", "r-small-2.png") %&gt;%
    resize("400x")
}
</code></pre>

<hr>
<h2 id='rmdshot'>Take a snapshot of an R Markdown document</h2><span id='topic+rmdshot'></span>

<h3>Description</h3>

<p>This function can handle both static Rmd documents and Rmd documents with
<code>runtime: shiny</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmdshot(
  doc,
  file = "webshot.png",
  ...,
  delay = NULL,
  rmd_args = list(),
  port = getOption("shiny.port"),
  envvars = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmdshot_+3A_doc">doc</code></td>
<td>
<p>The path to a Rmd document.</p>
</td></tr>
<tr><td><code id="rmdshot_+3A_file">file</code></td>
<td>
<p>A vector of names of output files. Should end with an image file
type (<code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.webp</code>) or
<code>.pdf</code>. If several screenshots have to be taken and only one filename
is provided, then the function appends the index number of the screenshot
to the file name. For PDF output, it is just like printing the page to PDF
in a browser; <code>selector</code>, <code>cliprect</code>, <code>expand</code>, and
<code>zoom</code> will not be used for PDFs.</p>
</td></tr>
<tr><td><code id="rmdshot_+3A_...">...</code></td>
<td>
<p>Other arguments to pass on to <code><a href="#topic+webshot">webshot</a></code>.</p>
</td></tr>
<tr><td><code id="rmdshot_+3A_delay">delay</code></td>
<td>
<p>Time to wait before taking screenshot, in seconds. Sometimes a
longer delay is needed for all assets to display properly. If NULL (the
default), then it will use 0.2 seconds for static Rmd documents, and 3
seconds for Rmd documents with runtime:shiny.</p>
</td></tr>
<tr><td><code id="rmdshot_+3A_rmd_args">rmd_args</code></td>
<td>
<p>A list of additional arguments to pass to either
<code><a href="rmarkdown.html#topic+render">render</a></code> (for static Rmd documents) or
<code><a href="rmarkdown.html#topic+run">run</a></code> (for Rmd documents with runtime:shiny).</p>
</td></tr>
<tr><td><code id="rmdshot_+3A_port">port</code></td>
<td>
<p>Port that Shiny will listen on.</p>
</td></tr>
<tr><td><code id="rmdshot_+3A_envvars">envvars</code></td>
<td>
<p>A named character vector or named list of environment
variables and values to set for the Shiny app's R process. These will be
unset after the process exits. This can be used to pass configuration
information to a Shiny app.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the normalized path to all screenshots taken. The
character vector will have a class of '&quot;webshot&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # R Markdown file
  input_file &lt;- system.file("examples/knitr-minimal.Rmd", package = "knitr")
  rmdshot(input_file, "minimal_rmd.png")

  # Shiny R Markdown file
  input_file &lt;- system.file("examples/shiny.Rmd", package = "webshot")
  rmdshot(input_file, "shiny_rmd.png", delay = 5)
}

</code></pre>

<hr>
<h2 id='shrink'>Shrink file size of a PNG</h2><span id='topic+shrink'></span>

<h3>Description</h3>

<p>This does not change size of the image in pixels, nor does it affect
appearance &ndash; it is lossless compression. This requires the program
<code>optipng</code> to be installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shrink(filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shrink_+3A_filename">filename</code></td>
<td>
<p>Character vector containing the path of images to resize.
Must be PNG files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If other operations like resizing are performed, shrinking should occur as
the last step. Otherwise, if the resizing happens after file shrinking, it
will be as if the shrinking didn't happen at all.
</p>


<h3>Value</h3>

<p>The 'filename' supplied but with a class value of '&quot;webshot&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  webshot("https://www.r-project.org/", "r-shrink.png") %&gt;%
    shrink()
}
</code></pre>

<hr>
<h2 id='webshot'>Take a screenshot of a URL</h2><span id='topic+webshot'></span>

<h3>Description</h3>

<p>Take a screenshot of a URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>webshot(
  url = NULL,
  file = "webshot.png",
  vwidth = 992,
  vheight = 744,
  selector = NULL,
  cliprect = NULL,
  expand = NULL,
  delay = 0.2,
  zoom = 1,
  useragent = NULL,
  max_concurrent = getOption("webshot.concurrent", default = 6),
  quiet = getOption("webshot.quiet", default = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="webshot_+3A_url">url</code></td>
<td>
<p>A vector of URLs to visit. If multiple URLs are provided, it will
load and take screenshots of those web pages in parallel.</p>
</td></tr>
<tr><td><code id="webshot_+3A_file">file</code></td>
<td>
<p>A vector of names of output files. Should end with an image file
type (<code>.png</code>, <code>.jpg</code>, <code>.jpeg</code>, or <code>.webp</code>) or
<code>.pdf</code>. If several screenshots have to be taken and only one filename
is provided, then the function appends the index number of the screenshot
to the file name. For PDF output, it is just like printing the page to PDF
in a browser; <code>selector</code>, <code>cliprect</code>, <code>expand</code>, and
<code>zoom</code> will not be used for PDFs.</p>
</td></tr>
<tr><td><code id="webshot_+3A_vwidth">vwidth</code></td>
<td>
<p>Viewport width. This is the width of the browser &quot;window&quot;.</p>
</td></tr>
<tr><td><code id="webshot_+3A_vheight">vheight</code></td>
<td>
<p>Viewport height This is the height of the browser &quot;window&quot;.</p>
</td></tr>
<tr><td><code id="webshot_+3A_selector">selector</code></td>
<td>
<p>One or more CSS selectors specifying a DOM element to set the
clipping rectangle to. The screenshot will contain these DOM elements. For
a given selector, if it has more than one match, all matching elements will
be used. This option is not compatible with <code>cliprect</code>. When taking
screenshots of multiple URLs, this parameter can also be a list with same
length as <code>url</code> with each element of the list containing a vector of
CSS selectors to use for the corresponding URL.</p>
</td></tr>
<tr><td><code id="webshot_+3A_cliprect">cliprect</code></td>
<td>
<p>Clipping rectangle. If <code>cliprect</code> and <code>selector</code>
are both unspecified, the clipping rectangle will contain the entire page.
This can be the string <code>"viewport"</code>, in which case the clipping
rectangle matches the viewport size, or it can be a four-element numeric
vector specifying the left, top, width, and height. (Note that the order of
left and top is reversed from the original webshot package.) When taking
screenshots of multiple URLs, this parameter can also be a list with same
length as <code>url</code> with each element of the list being &quot;viewport&quot; or a
four-elements numeric vector. This option is not compatible with
<code>selector</code>.</p>
</td></tr>
<tr><td><code id="webshot_+3A_expand">expand</code></td>
<td>
<p>A numeric vector specifying how many pixels to expand the
clipping rectangle by. If one number, the rectangle will be expanded by
that many pixels on all sides. If four numbers, they specify the top,
right, bottom, and left, in that order. When taking screenshots of multiple
URLs, this parameter can also be a list with same length as <code>url</code> with
each element of the list containing a single number or four numbers to use
for the corresponding URL.</p>
</td></tr>
<tr><td><code id="webshot_+3A_delay">delay</code></td>
<td>
<p>Time to wait before taking screenshot, in seconds. Sometimes a
longer delay is needed for all assets to display properly.</p>
</td></tr>
<tr><td><code id="webshot_+3A_zoom">zoom</code></td>
<td>
<p>A number specifying the zoom factor. A zoom factor of 2 will
result in twice as many pixels vertically and horizontally. Note that using
2 is not exactly the same as taking a screenshot on a HiDPI (Retina)
device: it is like increasing the zoom to 200
doubling the height and width of the browser window. This differs from
using a HiDPI device because some web pages load different,
higher-resolution images when they know they will be displayed on a HiDPI
device (but using zoom will not report that there is a HiDPI device).</p>
</td></tr>
<tr><td><code id="webshot_+3A_useragent">useragent</code></td>
<td>
<p>The User-Agent header used to request the URL.</p>
</td></tr>
<tr><td><code id="webshot_+3A_max_concurrent">max_concurrent</code></td>
<td>
<p>(Currently not implemented)</p>
</td></tr>
<tr><td><code id="webshot_+3A_quiet">quiet</code></td>
<td>
<p>If 'TRUE', status updates via console messages are suppressed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the normalized path to all screenshots taken. The
character vector will have a class of '&quot;webshot&quot;'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {

# Whole web page
webshot("https://github.com/rstudio/shiny")

# Might need a delay for all assets to display
webshot("http://rstudio.github.io/leaflet", delay = 0.5)

# One can also take screenshots of several URLs with only one command.
# This is more efficient than calling 'webshot' multiple times.
webshot(c("https://github.com/rstudio/shiny",
          "http://rstudio.github.io/leaflet"),
        delay = 0.5)

# Clip to the viewport
webshot("http://rstudio.github.io/leaflet", "leaflet-viewport.png",
        cliprect = "viewport")

# Specific size
webshot("https://www.r-project.org", vwidth = 1600, vheight = 900,
        cliprect = "viewport")

# Manual clipping rectangle
webshot("http://rstudio.github.io/leaflet", "leaflet-clip.png",
        cliprect = c(200, 5, 400, 300))

# Using CSS selectors to pick out regions
webshot("http://rstudio.github.io/leaflet", "leaflet-menu.png", selector = ".list-group")
# With multiple selectors, the screenshot will contain all selected elements
webshot("http://reddit.com/", "reddit-top.png",
        selector = c("[aria-label='Home']", "input[type='search']"))

# Expand selection region
webshot("http://rstudio.github.io/leaflet", "leaflet-boxes.png",
        selector = "#installation", expand = c(10, 50, 0, 50))

# If multiple matches for a given selector, it will take a screenshot that
# contains all matching elements.
webshot("http://rstudio.github.io/leaflet", "leaflet-p.png", selector = "p")
webshot("https://github.com/rstudio/shiny/", "shiny-stats.png",
         selector = "ul.numbers-summary")

# Result can be piped to other commands like resize() and shrink()
webshot("https://www.r-project.org/", "r-small.png") %&gt;%
 resize("75%") %&gt;%
 shrink()

}

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
