<!DOCTYPE html><html><head><title>Help for package sketch</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {sketch}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#annotate_exprs'><p>Parse and annotate expressions</p></a></li>
<li><a href='#assets'><p>Process assets in headers</p></a></li>
<li><a href='#basic_deparsers'><p>A minimal list of deparsers for deparsing JavaScript</p></a></li>
<li><a href='#bundle'><p>Bundle a list of files into a single JavaScript file</p></a></li>
<li><a href='#combine_rules'><p>Combine rules for fast transpilation</p></a></li>
<li><a href='#compile_active'><p>Compile active file in 'RStudio'</p></a></li>
<li><a href='#compile_data'><p>Compile a data file into a JavaScript file</p></a></li>
<li><a href='#compile_exprs'><p>Compile R code into JavaScript code</p></a></li>
<li><a href='#compile_r'><p>Compile an R file into a JavaScript file</p></a></li>
<li><a href='#convert_src'><p>Convert an asset link into a 'shiny.tag' object</p></a></li>
<li><a href='#default_2_deparsers'><p>A list of deparsers with additional features</p></a></li>
<li><a href='#default_deparsers'><p>A list of default deparsers for deparsing JavaScript</p></a></li>
<li><a href='#default_processors'><p>A list of handlers for processing the '#!'/'#|' header</p></a></li>
<li><a href='#deparse_Family'><p>Deparsers (specialised)</p></a></li>
<li><a href='#deparse_js'><p>Expression deparsing for JavaScript</p></a></li>
<li><a href='#deparse_js_ast'><p>Deparse a compiled AST</p></a></li>
<li><a href='#dp'><p>Constructor function to combine low-level deparsers</p></a></li>
<li><a href='#eng_sketch'><p>A language engine for 'sketch'</p></a></li>
<li><a href='#flatten_filelist'><p>Flatten a list of files and directories into a list of files</p></a></li>
<li><a href='#get_dependencies'><p>Extract the content of the 'load_script' headers of a sketch R file</p></a></li>
<li><a href='#html_tags'><p>HTML templates</p></a></li>
<li><a href='#insert_sketch'><p>Insert a 'sketch' app into an R Markdown document</p></a></li>
<li><a href='#is_call'><p>Predicate for calls</p></a></li>
<li><a href='#is_Family'><p>Predicate for symbols, i.e. symbols or syntactic literals</p></a></li>
<li><a href='#is_syntactic_literal'><p>Predicate for syntactic literal</p></a></li>
<li><a href='#let-declare-const'><p>Empty functions</p></a></li>
<li><a href='#license_info'><p>License information</p></a></li>
<li><a href='#list-of-deparsers'><p>Low-level lists of deparsers</p></a></li>
<li><a href='#load_Family'><p>Header functions</p></a></li>
<li><a href='#local'><p>A helper function to enable debugger option</p></a></li>
<li><a href='#make_deparser'><p>A constructor for a &quot;typed&quot; deparser</p></a></li>
<li><a href='#make_processor'><p>Make a handle to process header</p></a></li>
<li><a href='#make_rule'><p>Make a AST transformation rule</p></a></li>
<li><a href='#parse_expr'><p>Parse R code</p></a></li>
<li><a href='#print.sketch_rule'><p>Print function for 'sketch_rule' objects</p></a></li>
<li><a href='#r-to-js-rules'><p>Mapping R operators into JavaScript operators</p></a></li>
<li><a href='#read_multilines'><p>Read one or more lines from the console for the first successful parse</p></a></li>
<li><a href='#rewrite'><p>Interface for AST rewriting</p></a></li>
<li><a href='#runShinyApp'><p>Run 'Shiny' Application</p></a></li>
<li><a href='#safeguard'><p>Perform pre-transpilation check</p></a></li>
<li><a href='#sketch-package'><p>Interactive visualisation</p></a></li>
<li><a href='#source_active'><p>Source active file in 'RStudio'</p></a></li>
<li><a href='#source_js'><p>Serve a compiled 'sketch' JavaScript file</p></a></li>
<li><a href='#source_map'><p>Convert a compiled AST into a source map</p></a></li>
<li><a href='#source_map_from_files'><p>Create a source map (.map) file</p></a></li>
<li><a href='#source_map_table'><p>Display the source map in a table</p></a></li>
<li><a href='#source_r'><p>Source a 'sketch' R file</p></a></li>
<li><a href='#split_rules'><p>Split rules for customisation</p></a></li>
<li><a href='#src'><p>Get the source link of a JavaScript library</p></a></li>
<li><a href='#test_sketch'><p>Test a sketch application</p></a></li>
<li><a href='#to_json'><p>Convert a file into a JavaScript expression</p></a></li>
<li><a href='#to_shiny_tag'><p>Load JavaScript / CSS / 'sketch' R / CSV file</p></a></li>
<li><a href='#verify_source_map'><p>Verify a source map</p></a></li>
<li><a href='#websocket'><p>Websocket for 'sketch' applications</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interactive Sketches</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.20.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates static / animated / interactive visualisations embeddable
    in R Markdown documents. It implements an R-to-JavaScript transpiler and
    enables users to write JavaScript applications using the syntax of R.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2.0)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>magrittr, rlang, purrr, rstudioapi, glue, htmltools,
base64enc, jsonlite, shiny, methods, V8</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr, knitr, rmarkdown,</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/kcf-jackson/sketch">https://github.com/kcf-jackson/sketch</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-02 11:39:32 UTC; budgie</td>
</tr>
<tr>
<td>Author:</td>
<td>Chun Fung Kwok <a href="https://orcid.org/0000-0002-0716-3879"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Kate Saunders [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Chun Fung Kwok &lt;jkwok@svi.edu.au&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-02 13:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='annotate_exprs'>Parse and annotate expressions</h2><span id='topic+annotate_exprs'></span>

<h3>Description</h3>

<p>Parse and annotate expressions with lines and columns tracking.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>annotate_exprs(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="annotate_exprs_+3A_x">x</code></td>
<td>
<p>A character string; the input to parse.</p>
</td></tr>
</table>

<hr>
<h2 id='assets'>Process assets in headers</h2><span id='topic+assets'></span>

<h3>Description</h3>

<p>Take a 'sketch' R file as input, extract and process the
resources links as provided by the user with the '#!'/'#|' header.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assets(file, ..., trace = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assets_+3A_file">file</code></td>
<td>
<p>Character string; the file path.</p>
</td></tr>
<tr><td><code id="assets_+3A_...">...</code></td>
<td>
<p>(Optional) List of processors to pass to <a href="#topic+convert_src">convert_src</a>.</p>
</td></tr>
<tr><td><code id="assets_+3A_trace">trace</code></td>
<td>
<p>TRUE or FALSE; if TRUE, assets are extracted, but not processed.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("test_files/test_RMD.R", package = "sketch")
assets(file, trace = TRUE)
assets(file, trace = FALSE)

</code></pre>

<hr>
<h2 id='basic_deparsers'>A minimal list of deparsers for deparsing JavaScript</h2><span id='topic+basic_deparsers'></span>

<h3>Description</h3>

<p>A minimal list of deparsers for deparsing JavaScript
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basic_deparsers()
</code></pre>


<h3>Note</h3>

<p>This is used as input to <a href="#topic+deparse_js">deparse_js</a>, <a href="#topic+compile_r">compile_r</a> and <a href="#topic+compile_exprs">compile_exprs</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>basic_deparsers()

</code></pre>

<hr>
<h2 id='bundle'>Bundle a list of files into a single JavaScript file</h2><span id='topic+bundle'></span>

<h3>Description</h3>

<p>Bundle a list of files into a single JavaScript file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bundle(fs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bundle_+3A_fs">fs</code></td>
<td>
<p>A character vector; a list of R or JavaScript files.
The R files will be transpiled to JavaScript before bundling.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(sketch)
js &lt;- bundle(c(src("dom"), src("io")))
cat(paste(readLines(js), collapse = "\n"))

</code></pre>

<hr>
<h2 id='combine_rules'>Combine rules for fast transpilation</h2><span id='topic+combine_rules'></span>

<h3>Description</h3>

<p>This function turns an n-pass transpilation into k-pass, where n is the
number of rules and k is the number of precedence groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine_rules(rs, group = rep(1, length(rs)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="combine_rules_+3A_rs">rs</code></td>
<td>
<p>A list of rewriting rules (each of which is an output from <a href="#topic+make_rule">make_rule</a>).</p>
</td></tr>
<tr><td><code id="combine_rules_+3A_group">group</code></td>
<td>
<p>A numeric vector; the precedence group. Rules with a higher precedence
come before the the ones with lower precedence, and they are processed by the transpiler
first. For rules with the same precedence, the natural order (in which they show up)
determines which rules get processed first.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The key insight about optimising the transpilation is that rewriting passes that
do not interfere with each other can be combined, and it saves a full traversal of the
parse tree.
</p>

<hr>
<h2 id='compile_active'>Compile active file in 'RStudio'</h2><span id='topic+compile_active'></span>

<h3>Description</h3>

<p>Compile active file in 'RStudio'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compile_active(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compile_active_+3A_...">...</code></td>
<td>
<p>Optional arguments to pass to <code>compile_r</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# At 'RStudio', opens a 'sketch' R file in the editor, then
# run the following:
compile_active()

## End(Not run)

</code></pre>

<hr>
<h2 id='compile_data'>Compile a data file into a JavaScript file</h2><span id='topic+compile_data'></span>

<h3>Description</h3>

<p>Compile a data file into a JavaScript file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compile_data(input, output = tempfile(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compile_data_+3A_input">input</code></td>
<td>
<p>A character string; the path to the input file.</p>
</td></tr>
<tr><td><code id="compile_data_+3A_output">output</code></td>
<td>
<p>A character string; the path to the output file.</p>
</td></tr>
<tr><td><code id="compile_data_+3A_...">...</code></td>
<td>
<p>Extra arguments to be passed to <a href="#topic+to_json">to_json</a>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("test_files/test_csv.csv", package = "sketch")
readLines(compile_data(file))

</code></pre>

<hr>
<h2 id='compile_exprs'>Compile R code into JavaScript code</h2><span id='topic+compile_exprs'></span>

<h3>Description</h3>

<p>Compile R code into JavaScript code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compile_exprs(x, rules = default_rules(), deparsers = default_deparsers())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compile_exprs_+3A_x">x</code></td>
<td>
<p>A character string; the expression to transpile to JS.</p>
</td></tr>
<tr><td><code id="compile_exprs_+3A_rules">rules</code></td>
<td>
<p>A list of rewriting rules. See <a href="#topic+make_rule">make_rule</a> for more detail.</p>
</td></tr>
<tr><td><code id="compile_exprs_+3A_deparsers">deparsers</code></td>
<td>
<p>A list of deparsers. See <a href="#topic+make_deparser">make_deparser</a> for more detail.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>compile_exprs("R + Cpp", list(make_rule('Cpp', 'JS')))
compile_exprs("math.add(a, b)", list(make_rule('math.add', '+')))

</code></pre>

<hr>
<h2 id='compile_r'>Compile an R file into a JavaScript file</h2><span id='topic+compile_r'></span>

<h3>Description</h3>

<p>Compile an R file into a JavaScript file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compile_r(
  input,
  output = "",
  rules = default_rules(),
  deparsers = default_deparsers()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compile_r_+3A_input">input</code></td>
<td>
<p>A character string; the input file.</p>
</td></tr>
<tr><td><code id="compile_r_+3A_output">output</code></td>
<td>
<p>A character string; the output file. When the
output is &quot;&quot;, the result is printed to the standard output.</p>
</td></tr>
<tr><td><code id="compile_r_+3A_rules">rules</code></td>
<td>
<p>A list of rewriting rules. See <a href="#topic+make_rule">make_rule</a> for more detail.</p>
</td></tr>
<tr><td><code id="compile_r_+3A_deparsers">deparsers</code></td>
<td>
<p>A list of deparsers. See <a href="#topic+make_deparser">make_deparser</a> for more detail.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string; the output file path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>file &lt;- system.file("test_files/test_source.R", package = "sketch")
readLines(file)
compile_r(input = file)

</code></pre>

<hr>
<h2 id='convert_src'>Convert an asset link into a 'shiny.tag' object</h2><span id='topic+convert_src'></span>

<h3>Description</h3>

<p>Convert an asset link into a 'shiny.tag' object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_src(x, processors = default_processors())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_src_+3A_x">x</code></td>
<td>
<p>A character string; the header line (without the prefix '#!'/'#|').</p>
</td></tr>
<tr><td><code id="convert_src_+3A_processors">processors</code></td>
<td>
<p>A list of handlers for processing the '#!'/'#|' header.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'shiny.tag' object.
</p>

<hr>
<h2 id='default_2_deparsers'>A list of deparsers with additional features</h2><span id='topic+default_2_deparsers'></span>

<h3>Description</h3>

<p>Support automatic variable declaration, automatic 'return'
and shorthand notation for the DOM module.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_2_deparsers()
</code></pre>


<h3>Note</h3>

<p>lifecycle: experimental
</p>
<p>This is used as input to <a href="#topic+compile_r">compile_r</a> and <a href="#topic+compile_exprs">compile_exprs</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>default_2_deparsers()

</code></pre>

<hr>
<h2 id='default_deparsers'>A list of default deparsers for deparsing JavaScript</h2><span id='topic+default_deparsers'></span>

<h3>Description</h3>

<p>A list of default deparsers for deparsing JavaScript
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_deparsers()
</code></pre>


<h3>Note</h3>

<p>This is used as input to <a href="#topic+compile_r">compile_r</a> and <a href="#topic+compile_exprs">compile_exprs</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>default_deparsers()

</code></pre>

<hr>
<h2 id='default_processors'>A list of handlers for processing the '#!'/'#|' header</h2><span id='topic+default_processors'></span>

<h3>Description</h3>

<p>A list of handlers for processing the '#!'/'#|' header
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_processors()
</code></pre>


<h3>Note</h3>

<p>This is used as input to <a href="#topic+assets">assets</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>default_processors()
</code></pre>

<hr>
<h2 id='deparse_Family'>Deparsers (specialised)</h2><span id='topic+deparse_Family'></span><span id='topic+deparse_sym'></span><span id='topic+deparse_NULL'></span><span id='topic+deparse_NA'></span><span id='topic+deparse_NaN'></span><span id='topic+deparse_call'></span><span id='topic+deparse_infix'></span><span id='topic+deparse_wrap'></span><span id='topic+deparse_for'></span><span id='topic+deparse_if'></span><span id='topic+deparse_while'></span><span id='topic+deparse_function'></span><span id='topic+deparse_function_with_return'></span><span id='topic+deparse_return'></span><span id='topic+deparse_assignment'></span><span id='topic+deparse_assignment_auto'></span><span id='topic+deparse_next'></span><span id='topic+deparse_try'></span><span id='topic+deparse_tryCatch'></span><span id='topic+deparse_throw'></span><span id='topic+deparse_list'></span><span id='topic+deparse_df'></span><span id='topic+deparse_df_summarise'></span><span id='topic+deparse_df_mutate'></span><span id='topic+deparse_R6Class'></span><span id='topic+deparse_new'></span><span id='topic+deparse_typeof'></span><span id='topic+deparse_export'></span><span id='topic+deparse_async_await'></span><span id='topic+deparse_let'></span><span id='topic+deparse_const'></span><span id='topic+deparse_var'></span><span id='topic+deparse_dataURI'></span><span id='topic+deparse_ifelse'></span><span id='topic+deparse_lambda'></span><span id='topic+deparse_pipe'></span><span id='topic+deparse_assignment_pipe'></span><span id='topic+deparse_raw_string'></span><span id='topic+deparse_formula'></span><span id='topic+deparse_add'></span><span id='topic+deparse_subtract'></span><span id='topic+deparse_extract'></span><span id='topic+deparse_extractAssign'></span><span id='topic+deparse_extract2'></span><span id='topic+deparse_extract2Assign'></span><span id='topic+deparse_html_tags'></span><span id='topic+deparse_d3_attr'></span><span id='topic+deparse_d3_style'></span><span id='topic+deparse_macro'></span><span id='topic+deparse_data'></span>

<h3>Description</h3>

<p>Deparsers (specialised)
</p>
<p>Deparser for NULL
</p>
<p>Deparser for NA
</p>
<p>Deparser for NaN
</p>
<p>Deparser for calls
</p>
<p>Deparser for infix operators
</p>
<p>Deparser for brackets
</p>
<p>Deparser for the 'for' keyword
</p>
<p>Deparser for the 'if' keyword
</p>
<p>Deparser for the 'while' keyword
</p>
<p>Deparser for the &quot;function&quot; keyword
</p>
<p>Deparser for the &quot;function&quot; keyword with explicit return
</p>
<p>Deparser for return
</p>
<p>Deparser for assignments
</p>
<p>Deparser for assignments (automatic variable declaration)
</p>
<p>Deparser for the &quot;next&quot; keyword
</p>
<p>Deparser for the &quot;try&quot; keyword
</p>
<p>Deparser for the &quot;tryCatch&quot; keyword
</p>
<p>Deparser for the &quot;throw&quot; keyword
</p>
<p>Deparser for the &quot;list&quot; operator
</p>
<p>Deparser for the &quot;data.frame&quot; operators
</p>
<p>Deparser for the &quot;summarise&quot; operators
</p>
<p>Deparser for the &quot;mutate&quot; operators
</p>
<p>Deparser for the &quot;R6Class&quot; function
</p>
<p>Deparser for the &quot;new&quot; operator
</p>
<p>Deparser for the &quot;typeof&quot; operator
</p>
<p>Deparser for the &quot;export&quot; operator
</p>
<p>Deparser for the &quot;&quot;async&quot; and &quot;await&quot; operators
</p>
<p>Deparser for the &quot;let&quot; operator
</p>
<p>Deparser for the &quot;const&quot; operator
</p>
<p>Deparser for the &quot;var&quot; operator
</p>
<p>Deparser for the &quot;dataURI&quot; operator
</p>
<p>Deparser for the &quot;ifelse&quot; operator
</p>
<p>Deparser for the &quot;lambda&quot; operator
</p>
<p>Deparser for the &quot;pipe&quot; operator
</p>
<p>Deparser for the &quot;assignment pipe&quot; operator
</p>
<p>Deparser for the raw string operator
</p>
<p>Deparser for formula
</p>
<p>Deparser for the &quot;add&quot; operator
</p>
<p>Deparser for the &quot;subtract&quot; operator
</p>
<p>Deparser for the &quot;extract&quot; operator
</p>
<p>Deparser for the &quot;extractAssign&quot; operator
</p>
<p>Deparser for the &quot;extract2&quot; operator
</p>
<p>Deparser for the &quot;extract2Assign&quot; operator
</p>
<p>Deparser for the HTML tags
</p>
<p>Deparser for the d3.js 'attr' function
</p>
<p>Deparser for the d3.js 'style' function
</p>
<p>Deparser for '.macro'
</p>
<p>Deparser for '.data'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deparse_sym(ast, ...)

deparse_NULL(ast, ...)

deparse_NA(ast, ...)

deparse_NaN(ast, ...)

deparse_call(ast, ...)

deparse_infix(ast, ...)

deparse_wrap(ast, ...)

deparse_for(ast, ...)

deparse_if(ast, ...)

deparse_while(ast, ...)

deparse_function(ast, ...)

deparse_function_with_return(ast, ...)

deparse_return(ast, ...)

deparse_assignment(ast, ...)

deparse_assignment_auto(ast, ...)

deparse_next(ast, ...)

deparse_try(ast, ...)

deparse_tryCatch(ast, ...)

deparse_throw(ast, ...)

deparse_list(ast, ...)

deparse_df(ast, ...)

deparse_df_summarise(ast, ...)

deparse_df_mutate(ast, ...)

deparse_R6Class(ast, ...)

deparse_new(ast, ...)

deparse_typeof(ast, ...)

deparse_export(ast, ...)

deparse_async_await(ast, ...)

deparse_let(ast, ...)

deparse_const(ast, ...)

deparse_var(ast, ...)

deparse_dataURI(ast, ...)

deparse_ifelse(ast, ...)

deparse_lambda(ast, ...)

deparse_pipe(ast, ...)

deparse_assignment_pipe(ast, ...)

deparse_raw_string(ast, ...)

deparse_formula(ast, ...)

deparse_add(ast, ...)

deparse_subtract(ast, ...)

deparse_extract(ast, ...)

deparse_extractAssign(ast, ...)

deparse_extract2(ast, ...)

deparse_extract2Assign(ast, ...)

deparse_html_tags(ast, ...)

deparse_d3_attr(ast, ...)

deparse_d3_style(ast, ...)

deparse_macro(ast, ...)

deparse_data(ast, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deparse_Family_+3A_ast">ast</code></td>
<td>
<p>A language object.</p>
</td></tr>
<tr><td><code id="deparse_Family_+3A_...">...</code></td>
<td>
<p>The contextual information to be passed on to
the next call.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string.
</p>


<h3>Note</h3>

<p>At the moment, the '.macro' / 'deparse_macro' function must be
used with the 'compile_exprs' call. This is currently an experimental
feature.
</p>
<p>At the moment, the '.data' / 'deparse_data' function must be
used with the 'compile_exprs' call. This is currently an experimental
feature.
</p>

<hr>
<h2 id='deparse_js'>Expression deparsing for JavaScript</h2><span id='topic+deparse_js'></span>

<h3>Description</h3>

<p>This is the &quot;master&quot; deparser that dispatches
the &quot;worker&quot; deparsers based on the type of the input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deparse_js(ast, deparsers)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deparse_js_+3A_ast">ast</code></td>
<td>
<p>language object.</p>
</td></tr>
<tr><td><code id="deparse_js_+3A_deparsers">deparsers</code></td>
<td>
<p>A list of &quot;typed&quot; deparsers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>expr_1 &lt;- parse_expr("R.extract(x, 3, )")
deparse_js(expr_1, basic_deparsers())
deparse_js(expr_1, default_deparsers())

expr_2 &lt;- parse_expr("R.data_frame(x = 1, y = 2)")
deparse_js(expr_2, basic_deparsers())
deparse_js(expr_2, default_deparsers())

expr_3 &lt;- parse_expr("lambda(x, x + 1)")
deparse_js(expr_3, basic_deparsers())

</code></pre>

<hr>
<h2 id='deparse_js_ast'>Deparse a compiled AST</h2><span id='topic+deparse_js_ast'></span>

<h3>Description</h3>

<p>Deparse a compiled AST
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deparse_js_ast(ast)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deparse_js_ast_+3A_ast">ast</code></td>
<td>
<p>The compiled AST. The JavaScript AST compiled from the R AST.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string. The compiled string.
</p>


<h3>Note</h3>

<p>This feature is experimental.
</p>

<hr>
<h2 id='dp'>Constructor function to combine low-level deparsers</h2><span id='topic+dp'></span>

<h3>Description</h3>

<p>Constructor function to combine low-level deparsers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dp(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dp_+3A_...">...</code></td>
<td>
<p>character strings indicating the features needed
of the deparsers. The supported features are &quot;basic&quot;, &quot;r&quot;,
&quot;auto&quot; and &quot;dom&quot; corresponding to the basic deparsers, the R
support, the automatic variable declaration and return, and
the dom shorthand notation.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>lifecycle: experimental
</p>

<hr>
<h2 id='eng_sketch'>A language engine for 'sketch'</h2><span id='topic+eng_sketch'></span>

<h3>Description</h3>

<p>This supports the use of 'sketch' code chunk in an R Markdown document.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eng_sketch(options)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eng_sketch_+3A_options">options</code></td>
<td>
<p>A list of chunk options.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># The following line makes `sketch::eng_sketch` available to `knitr::knit_engines`.
# It is usually used in the 'setup' code chunk of an R Markdown document
knitr::knit_engines$set(sketch = sketch::eng_sketch)

</code></pre>

<hr>
<h2 id='flatten_filelist'>Flatten a list of files and directories into a list of files</h2><span id='topic+flatten_filelist'></span>

<h3>Description</h3>

<p>Flatten a list of files and directories into a list of files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flatten_filelist(fs, pattern = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flatten_filelist_+3A_fs">fs</code></td>
<td>
<p>A character vector; a list of files.</p>
</td></tr>
<tr><td><code id="flatten_filelist_+3A_pattern">pattern</code></td>
<td>
<p>An optional regular expression to pass to 'list.files' for
filtering files while expanding a directory into a list of files.</p>
</td></tr>
<tr><td><code id="flatten_filelist_+3A_...">...</code></td>
<td>
<p>Additional parameters to pass to 'list.files'.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>modules_dir &lt;- system.file("modules", package = "sketch")
flatten_filelist(modules_dir)

</code></pre>

<hr>
<h2 id='get_dependencies'>Extract the content of the 'load_script' headers of a sketch R file</h2><span id='topic+get_dependencies'></span>

<h3>Description</h3>

<p>Extract the content of the 'load_script' headers of a sketch R file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dependencies(app_script, local_only = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_dependencies_+3A_app_script">app_script</code></td>
<td>
<p>A character string; the path to the sketch R file.</p>
</td></tr>
<tr><td><code id="get_dependencies_+3A_local_only">local_only</code></td>
<td>
<p>TRUE / FALSE; if TRUE, exclude the ones that are web link.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
sample_file &lt;- system.file("test_files/test_sketch.R", package = "sketch")
cat(readLines(sample_file), sep = "\n")  # Preview the file content
get_dependencies(sample_file)

</code></pre>

<hr>
<h2 id='html_tags'>HTML templates</h2><span id='topic+html_tags'></span><span id='topic+default_tags'></span><span id='topic+basic_tags'></span>

<h3>Description</h3>

<p>A list of 'shiny.tag' objects describing a HTML template. The
list must have signature / structure of a named list:
<code>[head = [shiny.tag], body = [shiny.tag]]</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_tags(local = TRUE)

basic_tags()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="html_tags_+3A_local">local</code></td>
<td>
<p>TRUE / FALSE. If TRUE, the R base module is loaded from the
local file stored in the package, otherwise, the module is served via a
content delivery network (CDN).</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>str(default_tags())

str(basic_tags())

</code></pre>

<hr>
<h2 id='insert_sketch'>Insert a 'sketch' app into an R Markdown document</h2><span id='topic+insert_sketch'></span>

<h3>Description</h3>

<p>Insert a 'sketch' app into an R Markdown document
</p>


<h3>Usage</h3>

<pre><code class='language-R'>insert_sketch(file, id, output_dir = NULL, render = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="insert_sketch_+3A_file">file</code></td>
<td>
<p>A character string; the path to the 'sketch' file.</p>
</td></tr>
<tr><td><code id="insert_sketch_+3A_id">id</code></td>
<td>
<p>A character string; an unique identifier for the 'sketch' file.
Needed only when <code>output_dir</code> is not <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="insert_sketch_+3A_output_dir">output_dir</code></td>
<td>
<p>A character string; a separate directory to save the
'sketch' app. Default to be NULL, which embeds the app in the Rmd file.</p>
</td></tr>
<tr><td><code id="insert_sketch_+3A_render">render</code></td>
<td>
<p>TRUE or FALSE; if TRUE, call <a href="htmltools.html#topic+doRenderTags">doRenderTags</a>;
if FALSE, return the 'shiny.tag' object.</p>
</td></tr>
<tr><td><code id="insert_sketch_+3A_...">...</code></td>
<td>
<p>(Optional) Other attributes to pass to iframes. Also supports
the 'rules', 'deparsers' and 'debug' options to pass to 'source_r'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An HTML string if <code>render</code> is TRUE, or a 'shiny.tag' object
if <code>render</code> is FALSE.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># In an R code chunk of an R Markdown document
file &lt;- system.file("test_files/test_RMD.R", package = "sketch")
insert_sketch(file, style = "width:500px; height:500px;", render = FALSE)

</code></pre>

<hr>
<h2 id='is_call'>Predicate for calls</h2><span id='topic+is_call'></span>

<h3>Description</h3>

<p>Predicate for calls
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_call(x, name = NULL, n = NULL, ns = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_call_+3A_x">x</code></td>
<td>
<p>An object to test. Formulas and quosures are treated
literally.</p>
</td></tr>
<tr><td><code id="is_call_+3A_name">name</code></td>
<td>
<p>An optional name that the call should match. It is
passed to <code><a href="rlang.html#topic+sym">sym()</a></code> before matching. This argument is vectorised
and you can supply a vector of names to match. In this case,
<code>is_call()</code> returns <code>TRUE</code> if at least one name matches.</p>
</td></tr>
<tr><td><code id="is_call_+3A_n">n</code></td>
<td>
<p>An optional number of arguments that the call should
match.</p>
</td></tr>
<tr><td><code id="is_call_+3A_ns">ns</code></td>
<td>
<p>The namespace of the call. If <code>NULL</code>, the namespace
doesn't participate in the pattern-matching. If an empty string
<code>""</code> and <code>x</code> is a namespaced call, <code>is_call()</code> returns
<code>FALSE</code>. If any other string, <code>is_call()</code> checks that <code>x</code> is
namespaced within <code>ns</code>.
</p>
<p>Can be a character vector of namespaces, in which case the call
has to match at least one of them, otherwise <code>is_call()</code> returns
<code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is imported from 'rlang'.
</p>

<hr>
<h2 id='is_Family'>Predicate for symbols, i.e. symbols or syntactic literals</h2><span id='topic+is_Family'></span><span id='topic+is_sym'></span><span id='topic+is_infix'></span><span id='topic+is_wrap'></span><span id='topic+is_call_for'></span><span id='topic+is_call_if'></span><span id='topic+is_call_while'></span><span id='topic+is_call_function'></span><span id='topic+is_call_return'></span><span id='topic+is_call_assignment'></span><span id='topic+is_call_assignment_auto'></span><span id='topic+is_call_break'></span><span id='topic+is_call_next'></span><span id='topic+is_call_try'></span><span id='topic+is_call_tryCatch'></span><span id='topic+is_call_throw'></span><span id='topic+is_call_list'></span><span id='topic+is_call_df'></span><span id='topic+is_call_df_summarise'></span><span id='topic+is_call_df_mutate'></span><span id='topic+is_call_R6Class'></span><span id='topic+is_call_new'></span><span id='topic+is_call_typeof'></span><span id='topic+is_call_export'></span><span id='topic+is_call_async_await'></span><span id='topic+is_call_let'></span><span id='topic+is_call_const'></span><span id='topic+is_call_var'></span><span id='topic+is_call_dataURI'></span><span id='topic+is_call_ifelse'></span><span id='topic+is_call_lambda'></span><span id='topic+is_call_pipe'></span><span id='topic+is_call_assignment_pipe'></span><span id='topic+is_call_raw_string'></span><span id='topic+is_call_formula'></span><span id='topic+is_call_add'></span><span id='topic+is_call_subtract'></span><span id='topic+is_call_extract'></span><span id='topic+is_call_extractAssign'></span><span id='topic+is_call_extract2'></span><span id='topic+is_call_extract2Assign'></span><span id='topic+is_html_tags'></span><span id='topic+is_d3_attr'></span><span id='topic+is_d3_style'></span><span id='topic+is_macro'></span><span id='topic+is_data'></span>

<h3>Description</h3>

<p>Predicate for symbols, i.e. symbols or syntactic literals
</p>
<p>Predicate for infix operators
</p>
<p>Predicate for brackets
</p>
<p>Predicate for the 'for' keyword
</p>
<p>Predicate for the 'if' keyword
</p>
<p>Predicate for the 'while' keyword
</p>
<p>Predicate for the &quot;function&quot; keyword
</p>
<p>Predicate for return
</p>
<p>Predicate for assignments
</p>
<p>Predicate for assignments
</p>
<p>Predicate for the &quot;break&quot; keyword
</p>
<p>Predicate for the &quot;next&quot; keyword
</p>
<p>Predicate for the &quot;try&quot; keyword
</p>
<p>Predicate for the &quot;tryCatch&quot; keyword
</p>
<p>Predicate for the &quot;throw&quot; keyword
</p>
<p>Predicate for the &quot;list&quot; operator
</p>
<p>Predicate for the &quot;data.frame&quot; operators
</p>
<p>Predicate for the &quot;summarise&quot; operators
</p>
<p>Predicate for the &quot;mutate&quot; operators
</p>
<p>Predicate for the &quot;R6Class&quot; function
</p>
<p>Predicate for the &quot;new&quot; operator
</p>
<p>Predicate for the &quot;typeof&quot; operator
</p>
<p>Predicate for the &quot;export&quot; operator
</p>
<p>Predicate for the &quot;async&quot; and &quot;await&quot; operators
</p>
<p>Predicate for the &quot;let&quot; operator
</p>
<p>Predicate for the &quot;const&quot; operator
</p>
<p>Predicate for the &quot;var&quot; operator
</p>
<p>Predicate for the &quot;dataURI&quot; operator
</p>
<p>Predicate for the &quot;ifelse&quot; operator
</p>
<p>Predicate for the &quot;lambda&quot; operator
</p>
<p>Predicate for the &quot;pipe&quot; operator
</p>
<p>Predicate for the &quot;assignment pipe&quot; operator
</p>
<p>Predicate for the raw string operator
</p>
<p>Predicate for formula
</p>
<p>Predicate for the &quot;add&quot; operator
</p>
<p>Predicate for the &quot;subtract&quot; operator
</p>
<p>Predicate for the &quot;extract&quot; operator
</p>
<p>Predicate for the &quot;extractAssign&quot; operator
</p>
<p>Predicate for the &quot;extract2&quot; operator
</p>
<p>Predicate for the &quot;extract2Assign&quot; operator
</p>
<p>Predicate for the HTML tags
</p>
<p>Predicate for the d3.js 'attr' function
</p>
<p>Predicate for the d3.js 'style' function
</p>
<p>Predicate for '.macro'
</p>
<p>Predicate for '.data'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_sym(ast)

is_infix(ast)

is_wrap(ast)

is_call_for(ast)

is_call_if(ast)

is_call_while(ast)

is_call_function(ast)

is_call_return(ast)

is_call_assignment(ast)

is_call_assignment_auto(ast)

is_call_break(ast)

is_call_next(ast)

is_call_try(ast)

is_call_tryCatch(ast)

is_call_throw(ast)

is_call_list(ast)

is_call_df(ast)

is_call_df_summarise(ast)

is_call_df_mutate(ast)

is_call_R6Class(ast)

is_call_new(ast)

is_call_typeof(ast)

is_call_export(ast)

is_call_async_await(ast)

is_call_let(ast)

is_call_const(ast)

is_call_var(ast)

is_call_dataURI(ast)

is_call_ifelse(ast)

is_call_lambda(ast)

is_call_pipe(ast)

is_call_assignment_pipe(ast)

is_call_raw_string(ast)

is_call_formula(ast)

is_call_add(ast)

is_call_subtract(ast)

is_call_extract(ast)

is_call_extractAssign(ast)

is_call_extract2(ast)

is_call_extract2Assign(ast)

is_html_tags(ast)

is_d3_attr(ast)

is_d3_style(ast)

is_macro(ast)

is_data(ast)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_Family_+3A_ast">ast</code></td>
<td>
<p>A language object.</p>
</td></tr>
</table>

<hr>
<h2 id='is_syntactic_literal'>Predicate for syntactic literal</h2><span id='topic+is_syntactic_literal'></span>

<h3>Description</h3>

<p>Predicate for syntactic literal
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_syntactic_literal(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_syntactic_literal_+3A_x">x</code></td>
<td>
<p>An object to test.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is imported from 'rlang'.
</p>

<hr>
<h2 id='let-declare-const'>Empty functions</h2><span id='topic+let-declare-const'></span><span id='topic+let'></span><span id='topic+declare'></span><span id='topic+const'></span>

<h3>Description</h3>

<p>These functions do nothing. It is created to ensure
the keywords 'let' and 'declare' are defined.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>let(...)

declare(...)

const(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="let-declare-const_+3A_...">...</code></td>
<td>
<p>Any arguments</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>let (x)
let (x = 1, y = 2)
declare (x1, x2, x3)

</code></pre>

<hr>
<h2 id='license_info'>License information</h2><span id='topic+license_info'></span>

<h3>Description</h3>

<p>License information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>license_info(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="license_info_+3A_x">x</code></td>
<td>
<p>A character string; name of the library / assets.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list containing the license information and
the link from which the information is extracted.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>license_info("mathjs")
license_info("p5")

</code></pre>

<hr>
<h2 id='list-of-deparsers'>Low-level lists of deparsers</h2><span id='topic+list-of-deparsers'></span><span id='topic+dp_r_support'></span><span id='topic+dp_auto'></span><span id='topic+dp_dom'></span><span id='topic+dp_d3'></span><span id='topic+dp_macro'></span>

<h3>Description</h3>

<p>Support of R functionalities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dp_r_support()

dp_auto()

dp_dom()

dp_d3()

dp_macro()
</code></pre>

<hr>
<h2 id='load_Family'>Header functions</h2><span id='topic+load_Family'></span><span id='topic+load_library'></span><span id='topic+load_script'></span><span id='topic+load_data'></span>

<h3>Description</h3>

<p>Header functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_library(package, ...)

load_script(src, ...)

load_data(x, cache = tempfile(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_Family_+3A_package">package</code></td>
<td>
<p>A character string; name of a JavaScript library.</p>
</td></tr>
<tr><td><code id="load_Family_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to header processor.</p>
</td></tr>
<tr><td><code id="load_Family_+3A_src">src</code></td>
<td>
<p>A character string; the full web/local path to a JavaScript library.</p>
</td></tr>
<tr><td><code id="load_Family_+3A_x">x</code></td>
<td>
<p>A character string; the full path to the file containing the data.</p>
</td></tr>
<tr><td><code id="load_Family_+3A_cache">cache</code></td>
<td>
<p>A character string; the full path to the cache file.</p>
</td></tr>
</table>

<hr>
<h2 id='local'>A helper function to enable debugger option</h2><span id='topic+local'></span>

<h3>Description</h3>

<p>A helper function to enable debugger option
</p>


<h3>Usage</h3>

<pre><code class='language-R'>local(x, from_local = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="local_+3A_x">x</code></td>
<td>
<p>TRUE / FALSE; whether to attach a debugging console to
the sketch application.</p>
</td></tr>
<tr><td><code id="local_+3A_from_local">from_local</code></td>
<td>
<p>TRUE / FALSE; whether to load the debugger console
from the local package. If FALSE, the console will be loaded from
a Content Delivery Network (CDN) link.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Use 'from_local=TRUE' for self-contained applications, and
'from_local=FALSE' for reduced file size.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This function is designed to be used in the configuration header, e.g.
# config(debug = local(TRUE), rules = basic_rules(), deparsers = basic_deparsers())

local(TRUE)

</code></pre>

<hr>
<h2 id='make_deparser'>A constructor for a &quot;typed&quot; deparser</h2><span id='topic+make_deparser'></span>

<h3>Description</h3>

<p>A constructor for a &quot;typed&quot; deparser
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_deparser(predicate_fun, deparse_fun)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_deparser_+3A_predicate_fun">predicate_fun</code></td>
<td>
<p>A function that takes a &quot;lang&quot; object and return a logical.</p>
</td></tr>
<tr><td><code id="make_deparser_+3A_deparse_fun">deparse_fun</code></td>
<td>
<p>A function that takes a &quot;lang&quot; object and return a character string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list; a deparser ready to be dispatched by &quot;type&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>str(make_deparser(predicate_fun = rlang::is_call, deparse_fun = deparse))

</code></pre>

<hr>
<h2 id='make_processor'>Make a handle to process header</h2><span id='topic+make_processor'></span>

<h3>Description</h3>

<p>Make a handle to process header
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_processor(pred, fun)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_processor_+3A_pred">pred</code></td>
<td>
<p>A function, taking a string and returning a logical.</p>
</td></tr>
<tr><td><code id="make_processor_+3A_fun">fun</code></td>
<td>
<p>A function, taking a string and returning a 'shiny.tag' object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A header processor / handler.
</p>

<hr>
<h2 id='make_rule'>Make a AST transformation rule</h2><span id='topic+make_rule'></span>

<h3>Description</h3>

<p>Make a AST transformation rule
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_rule(from, to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_rule_+3A_from">from</code></td>
<td>
<p>A character string.</p>
</td></tr>
<tr><td><code id="make_rule_+3A_to">to</code></td>
<td>
<p>A character string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A function that takes a language object and returns a language object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sketch)

rule_1 &lt;- make_rule("pi", "Math.PI")
expr &lt;- rlang::parse_expr("2 * (3 + pi)")

rule_1(expr)  # this works but is not the preferred usage
rewrite(expr, list(rule_1))  # this is preferred

rule_2 &lt;- make_rule("+", "Math.add")
rewrite(expr, list(rule_1, rule_2))

</code></pre>

<hr>
<h2 id='parse_expr'>Parse R code</h2><span id='topic+parse_expr'></span>

<h3>Description</h3>

<p>Parse R code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_expr(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_expr_+3A_x">x</code></td>
<td>
<p>Text containing expressions to parse_expr for
<code>parse_expr()</code> and <code>parse_exprs()</code>. Can also be an R connection,
for instance to a file. If the supplied connection is not open,
it will be automatically closed and destroyed.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function is imported from 'rlang'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>parse_expr("x &lt;- 1 + 1")

</code></pre>

<hr>
<h2 id='print.sketch_rule'>Print function for 'sketch_rule' objects</h2><span id='topic+print.sketch_rule'></span>

<h3>Description</h3>

<p>Print function for 'sketch_rule' objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'sketch_rule'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.sketch_rule_+3A_x">x</code></td>
<td>
<p>A 'sketch_rule' object.</p>
</td></tr>
<tr><td><code id="print.sketch_rule_+3A_...">...</code></td>
<td>
<p>(Unused) Optional arguments.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>library(sketch)
rule_1 &lt;- make_rule("+", "Math.add")
print(rule_1)

</code></pre>

<hr>
<h2 id='r-to-js-rules'>Mapping R operators into JavaScript operators</h2><span id='topic+r-to-js-rules'></span><span id='topic+basic_rules'></span><span id='topic+default_rules'></span>

<h3>Description</h3>

<p>Mapping R operators into JavaScript operators
</p>


<h3>Usage</h3>

<pre><code class='language-R'>basic_rules()

default_rules()
</code></pre>


<h3>Note</h3>

<p>These functions are used as inputs to <a href="#topic+compile_r">compile_r</a> and <a href="#topic+compile_exprs">compile_exprs</a>.
</p>


<h3>References</h3>

<p>R operators: <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Operators">https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Operators</a>
</p>
<p>R infix and prefix operators: <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Infix-and-prefix-operators">https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Infix-and-prefix-operators</a>
</p>
<p>JavaScript operators: <a href="https://www.w3schools.com/js/js_operators.asp">https://www.w3schools.com/js/js_operators.asp</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>basic_rules()

default_rules()

</code></pre>

<hr>
<h2 id='read_multilines'>Read one or more lines from the console for the first successful parse</h2><span id='topic+read_multilines'></span>

<h3>Description</h3>

<p><code>read_multilines</code> reads one or more lines from
the terminal (in interactive use).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_multilines(prompt = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_multilines_+3A_prompt">prompt</code></td>
<td>
<p>the string printed when prompting the user for input.
Should usually end with a space <code>" "</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function repeatedly calls <code>readline</code> until enough inputs
are provided to reach a successful parse.
</p>
<p>This can only be used in an interactive session.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# In an interactive session
read_multilines()
1 + 2  # expect immediate success

read_multilines()
1 +
2 +
3  # expect success here

## End(Not run)

</code></pre>

<hr>
<h2 id='rewrite'>Interface for AST rewriting</h2><span id='topic+rewrite'></span>

<h3>Description</h3>

<p>Interface for AST rewriting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rewrite(ast, rules)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rewrite_+3A_ast">ast</code></td>
<td>
<p>A language object.</p>
</td></tr>
<tr><td><code id="rewrite_+3A_rules">rules</code></td>
<td>
<p>A list of functions, each of which is the output from 'make_rule'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A language object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sketch)

rewrite(
  ast = rlang::parse_expr("2 * (3 + pi)"),
  rules = list(make_rule("pi", "Math.PI"))
)

rewrite(
  ast = rlang::parse_expr("2 + pi"),
  rules = list(
    make_rule("pi", "Math.PI"),
    make_rule("+", "Math.add")
  )
)

</code></pre>

<hr>
<h2 id='runShinyApp'>Run 'Shiny' Application</h2><span id='topic+runShinyApp'></span>

<h3>Description</h3>

<p>Run 'Shiny' Application
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runShinyApp()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
runShinyApp()

## End(Not run)

</code></pre>

<hr>
<h2 id='safeguard'>Perform pre-transpilation check</h2><span id='topic+safeguard'></span>

<h3>Description</h3>

<p>Perform pre-transpilation check
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safeguard(ast, rules, deparsers)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="safeguard_+3A_ast">ast</code></td>
<td>
<p>A language object.</p>
</td></tr>
<tr><td><code id="safeguard_+3A_rules">rules</code></td>
<td>
<p>A list of functions; the rewriting rules, each of which
is the output from <a href="#topic+make_rule">make_rule</a>.</p>
</td></tr>
<tr><td><code id="safeguard_+3A_deparsers">deparsers</code></td>
<td>
<p>A list of functions; the deparsers, each of which
is the output from <a href="#topic+make_deparser">make_deparser</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE when the check is complete.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Expect no warning
safeguard(parse_expr("a &lt;- 3"),
          rules = default_rules(),
          deparsers = default_deparsers())

# Expect a warning (as `max` is reserved to be a function by the transpiler)
safeguard(parse_expr("max &lt;- 3"),
          rules = default_rules(),
          deparsers = default_deparsers())

</code></pre>

<hr>
<h2 id='sketch-package'>Interactive visualisation</h2><span id='topic+sketch-package'></span><span id='topic+sketch'></span>

<h3>Description</h3>

<p>Creates interactive visualisation embeddable in R Markdown documents.
It implements an R-to-JavaScript transpiler and enables users to write JavaScript
applications using the syntax of R.
</p>

<hr>
<h2 id='source_active'>Source active file in 'RStudio'</h2><span id='topic+source_active'></span>

<h3>Description</h3>

<p>Source active file in 'RStudio'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source_active(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="source_active_+3A_...">...</code></td>
<td>
<p>Optional arguments to pass to <code>source_r</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# At 'RStudio', opens a 'sketch' R file in the editor, then
# run the following:
source_active()  # This launches the default HTML viewer.

## End(Not run)

</code></pre>

<hr>
<h2 id='source_js'>Serve a compiled 'sketch' JavaScript file</h2><span id='topic+source_js'></span>

<h3>Description</h3>

<p>Serve a compiled 'sketch' JavaScript file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source_js(file, debug = FALSE, asset_tags = default_tags(), launch_browser)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="source_js_+3A_file">file</code></td>
<td>
<p>A character string; path to the compiled JS file.</p>
</td></tr>
<tr><td><code id="source_js_+3A_debug">debug</code></td>
<td>
<p>TRUE or FALSE; if TRUE, a console for debugging is attached to your app.</p>
</td></tr>
<tr><td><code id="source_js_+3A_asset_tags">asset_tags</code></td>
<td>
<p>An optional list of 'shiny.tag' objects to be added to the html
template. The list must have signature / structure of a named list:
<code>[head = [shiny.tag], body = [shiny.tag]]</code>,
containing the <code>head</code> and <code>body</code> elements, each of which is a
list of <code>shiny.tag</code> object.</p>
</td></tr>
<tr><td><code id="source_js_+3A_launch_browser">launch_browser</code></td>
<td>
<p>A character string; &quot;viewer&quot; or &quot;browser&quot;, which
calls 'rstudioapi::viewer' and 'utils::browseURL' respectively; use
NULL to suppress display.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
file &lt;- system.file("test_files/test_source.js", package = "sketch")
# The next line launches the default HTML browser
source_js(file, debug = TRUE, launch_browser = "browser")

## End(Not run)
</code></pre>

<hr>
<h2 id='source_map'>Convert a compiled AST into a source map</h2><span id='topic+source_map'></span>

<h3>Description</h3>

<p>Convert a compiled AST into a source map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source_map(ast)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="source_map_+3A_ast">ast</code></td>
<td>
<p>The compiled AST. The JavaScript AST compiled from the R AST.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A (list of) source map.
</p>


<h3>Note</h3>

<p>This feature is experimental.
</p>

<hr>
<h2 id='source_map_from_files'>Create a source map (.map) file</h2><span id='topic+source_map_from_files'></span>

<h3>Description</h3>

<p>Create a source map (.map) file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source_map_from_files(source_file, target_file, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="source_map_from_files_+3A_source_file">source_file</code></td>
<td>
<p>A character string; the input R file.</p>
</td></tr>
<tr><td><code id="source_map_from_files_+3A_target_file">target_file</code></td>
<td>
<p>A character string; the corresponding JavaScript file.</p>
</td></tr>
<tr><td><code id="source_map_from_files_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to 'rewrite_annotated_exprs'.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This feature is experimental.
</p>

<hr>
<h2 id='source_map_table'>Display the source map in a table</h2><span id='topic+source_map_table'></span>

<h3>Description</h3>

<p>Display the source map in a table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source_map_table(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="source_map_table_+3A_x">x</code></td>
<td>
<p>A source map. The output from 'source_map'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Note</h3>

<p>This feature is experimental.
</p>

<hr>
<h2 id='source_r'>Source a 'sketch' R file</h2><span id='topic+source_r'></span>

<h3>Description</h3>

<p>This function compiles a 'sketch' R file, resolves the
dependencies and serves it in the viewer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>source_r(file, debug = FALSE, launch_browser, asset_tags = default_tags(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="source_r_+3A_file">file</code></td>
<td>
<p>A character string; path to the R file.</p>
</td></tr>
<tr><td><code id="source_r_+3A_debug">debug</code></td>
<td>
<p>TRUE or FALSE; if TRUE, a console for debugging is attached to your app.</p>
</td></tr>
<tr><td><code id="source_r_+3A_launch_browser">launch_browser</code></td>
<td>
<p>A character string; &quot;viewer&quot; or &quot;browser&quot;, which
calls 'rstudioapi::viewer' and 'utils::browseURL' respectively; use
NULL to suppress display.</p>
</td></tr>
<tr><td><code id="source_r_+3A_asset_tags">asset_tags</code></td>
<td>
<p>An optional list of 'shiny.tag' objects to be added to the html
template. The list must have signature / structure of a named list:
<code>[head = [shiny.tag], body = [shiny.tag]]</code>,</p>
</td></tr>
<tr><td><code id="source_r_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to 'compile_r'.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
file &lt;- system.file("test_files/test_source.R", package = "sketch")
# The next line launches the default HTML browser
source_r(file, debug = TRUE, launch_browser = "browser")

## End(Not run)

</code></pre>

<hr>
<h2 id='split_rules'>Split rules for customisation</h2><span id='topic+split_rules'></span>

<h3>Description</h3>

<p>This function is the left-inverse of 'combine_rules', i.e.
<code>split_rules(combine_rules(rs, group)) = rs</code> for any variable 'group'.
It is created to facilitate the addition or removal of rewriting rules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_rules(rs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_rules_+3A_rs">rs</code></td>
<td>
<p>A list of (grouped) rewriting rules. Note that a list of n rules
without grouping is a list of n groups of single rule.</p>
</td></tr>
</table>

<hr>
<h2 id='src'>Get the source link of a JavaScript library</h2><span id='topic+src'></span>

<h3>Description</h3>

<p>Get the source link of a JavaScript library
</p>


<h3>Usage</h3>

<pre><code class='language-R'>src(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="src_+3A_x">x</code></td>
<td>
<p>A character string; name of the JavaScript library</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string; the path to the library.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>src("mathjs")
src("p5")

</code></pre>

<hr>
<h2 id='test_sketch'>Test a sketch application</h2><span id='topic+test_sketch'></span>

<h3>Description</h3>

<p>Test a sketch application
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_sketch(app_script, test_script, port = 9454, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="test_sketch_+3A_app_script">app_script</code></td>
<td>
<p>A character string; the file path to the app.</p>
</td></tr>
<tr><td><code id="test_sketch_+3A_test_script">test_script</code></td>
<td>
<p>A character string; the file path to the tests.</p>
</td></tr>
<tr><td><code id="test_sketch_+3A_port">port</code></td>
<td>
<p>An integer to pass to 'websocket$new()'.</p>
</td></tr>
<tr><td><code id="test_sketch_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to <a href="#topic+source_r">source_r</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;websocket&quot; object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
app_file &lt;- system.file("test_files/test_testthat_app.R", package = "sketch")
test_file &lt;- system.file("test_files/test_testthat_test.R", package = "sketch")
# This following command will launch the default browser
res &lt;- test_sketch(app_file, test_file)

## End(Not run)
</code></pre>

<hr>
<h2 id='to_json'>Convert a file into a JavaScript expression</h2><span id='topic+to_json'></span>

<h3>Description</h3>

<p>It supports csv and json by default and lets users provide
custom handlers if other file formats are used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_json(input, as_data_frame, read_fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_json_+3A_input">input</code></td>
<td>
<p>A character string; the path to the input file.</p>
</td></tr>
<tr><td><code id="to_json_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>TRUE or FALSE; whether the data are loaded as a data-frame.</p>
</td></tr>
<tr><td><code id="to_json_+3A_read_fun">read_fun</code></td>
<td>
<p>A function to load the input file. Default settings are provided for
CSV files and JSON files. The function has to load a data file into an object that can
be handled by 'jsonlite::toJSON'. Possible choices include 'utils::read_delim',
'readr::read_csv2', etc.</p>
</td></tr>
<tr><td><code id="to_json_+3A_...">...</code></td>
<td>
<p>Extra arguments to be passed to 'read_fun'.</p>
</td></tr>
</table>

<hr>
<h2 id='to_shiny_tag'>Load JavaScript / CSS / 'sketch' R / CSV file</h2><span id='topic+to_shiny_tag'></span>

<h3>Description</h3>

<p>Load JavaScript / CSS / 'sketch' R / CSV file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_shiny_tag(src, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_shiny_tag_+3A_src">src</code></td>
<td>
<p>A character string; the link / path to the JS / CSS / R script / CSV file.</p>
</td></tr>
</table>

<hr>
<h2 id='verify_source_map'>Verify a source map</h2><span id='topic+verify_source_map'></span>

<h3>Description</h3>

<p>Verify a source map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>verify_source_map(ast, src_map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="verify_source_map_+3A_ast">ast</code></td>
<td>
<p>The compiled AST. The JavaScript AST compiled from the R AST.</p>
</td></tr>
<tr><td><code id="verify_source_map_+3A_src_map">src_map</code></td>
<td>
<p>The source map. The output from 'source_map'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame; a source map table expanded by the 'pass_test' column.
</p>


<h3>Note</h3>

<p>This feature is experimental.
</p>

<hr>
<h2 id='websocket'>Websocket for 'sketch' applications</h2><span id='topic+websocket'></span>

<h3>Description</h3>

<p>This combines the *-Server family of functions in 'httpuv'
with the transpilation functionality provided by 'sketch'.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>app</code></dt><dd><p>A list of functions that define the application.</p>
</dd>
<dt><code>server</code></dt><dd><p>A server handle to be used by 'stopServer'.</p>
</dd>
<dt><code>log</code></dt><dd><p>A character vector that keep tracks of all the commands
sent to the browser session.</p>
</dd>
<dt><code>ws</code></dt><dd><p>A WebSocket channel to handle the communication between
the R session and the browser session.</p>
</dd>
<dt><code>in_handler</code></dt><dd><p>A function to handle instructions sent by the
browser session.</p>
</dd>
<dt><code>out_handler</code></dt><dd><p>A function to handle instruction sent to the
browser session.</p>
</dd>
<dt><code>env</code></dt><dd><p>An environment to store variables temporarily.</p>
</dd>
<dt><code>port</code></dt><dd><p>An integer; the TCP port number.</p>
</dd>
<dt><code>message</code></dt><dd><p>TRUE or FALSE; whether to display a prompt when
a server is started and when it is stopped.</p>
</dd>
<dt><code>connected</code></dt><dd><p>TRUE or FALSE; whether a connection has been established.
One should ways start the WebSocket server before visiting the web page
that connects to the server.</p>
</dd>
<dt><code>started</code></dt><dd><p>TRUE or FALSE; whether a server has been started. Use
the <code>startServer</code> method to start a server.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-websocket-startServer"><code>websocket$startServer()</code></a>
</p>
</li>
<li> <p><a href="#method-websocket-stopServer"><code>websocket$stopServer()</code></a>
</p>
</li>
<li> <p><a href="#method-websocket-listServers"><code>websocket$listServers()</code></a>
</p>
</li>
<li> <p><a href="#method-websocket-stopAllServers"><code>websocket$stopAllServers()</code></a>
</p>
</li>
<li> <p><a href="#method-websocket-sketch_mode"><code>websocket$sketch_mode()</code></a>
</p>
</li>
<li> <p><a href="#method-websocket-new_app"><code>websocket$new_app()</code></a>
</p>
</li>
<li> <p><a href="#method-websocket-new"><code>websocket$new()</code></a>
</p>
</li>
<li> <p><a href="#method-websocket-clone"><code>websocket$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-websocket-startServer"></a>



<h4>Method <code>startServer()</code></h4>

<p>Start a WebSocket server
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$startServer()</pre></div>


<hr>
<a id="method-websocket-stopServer"></a>



<h4>Method <code>stopServer()</code></h4>

<p>Stop a WebSocket server
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$stopServer()</pre></div>


<hr>
<a id="method-websocket-listServers"></a>



<h4>Method <code>listServers()</code></h4>

<p>List all running WebSocket servers
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$listServers()</pre></div>


<hr>
<a id="method-websocket-stopAllServers"></a>



<h4>Method <code>stopAllServers()</code></h4>

<p>Stop all running WebSocket servers
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$stopAllServers()</pre></div>


<hr>
<a id="method-websocket-sketch_mode"></a>



<h4>Method <code>sketch_mode()</code></h4>

<p>Enter sketch mode, in which all commands go through
the transpiler before reaching the browser session.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$sketch_mode()</pre></div>


<hr>
<a id="method-websocket-new_app"></a>



<h4>Method <code>new_app()</code></h4>

<p>Create a blank HTML page with interactive access.
This function is designed for newcomers.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$new_app(
  preamble = list(library = c(), script = c(), data = c()),
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>preamble</code></dt><dd><p>(Optional) A named list; the preamble to include.
Use the name 'lib' for arguments to <code>load_library</code>, 'script'
for arguments to <code>load_script</code> and 'data' for arguments to
<code>load_data</code>. Note that the &quot;dom&quot; and &quot;websocket&quot; modules are
required and loaded by default.</p>
</dd>
<dt><code>...</code></dt><dd><p>Extra parameters to pass to <a href="#topic+source_r">source_r</a>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The (invisible) temporary file path to the app.
</p>


<hr>
<a id="method-websocket-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialise a WebSocket connection
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$new(in_handler, out_handler, message = TRUE, port = 9454)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>in_handler</code></dt><dd><p>A function to handle incoming message, default to
be <a href="base.html#topic+print">print</a> which only displays the message without
any processing.</p>
</dd>
<dt><code>out_handler</code></dt><dd><p>A function to handle outgoing message, default to
be <a href="#topic+compile_exprs">compile_exprs</a> which transpiles R commands into JavaScript
commands.</p>
</dd>
<dt><code>message</code></dt><dd><p>TRUE or FALSE; whether to display a prompt when
a server is started and when it is stopped.</p>
</dd>
<dt><code>port</code></dt><dd><p>An integer; the TCP port number.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A 'websocket' object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
# Launch a WebSocket server
ws &lt;- websocket$new()
ws$startServer()
ws$listServers()    # Check that a server is running

# Launch a 'sketch' application with WebSocket functionality
file &lt;- system.file("test_files/test_websocket.R", package = "sketch")
source_r(file, debug = TRUE)   # Launch the default browser

# Enter sketch mode to send commands to the application
ws$sketch_mode()
# Within sketch mode
print("1234")
x &lt;- 10
print(x + 1)
q()

# Back to normal mode, inspect the log and stop the server
ws$log
ws$stopServer()
ws$listServers()    # Confirm no server is running
}
</pre>
</div>


<hr>
<a id="method-websocket-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>websocket$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `websocket$new`
## ------------------------------------------------

## Not run: 
# Launch a WebSocket server
ws &lt;- websocket$new()
ws$startServer()
ws$listServers()    # Check that a server is running

# Launch a 'sketch' application with WebSocket functionality
file &lt;- system.file("test_files/test_websocket.R", package = "sketch")
source_r(file, debug = TRUE)   # Launch the default browser

# Enter sketch mode to send commands to the application
ws$sketch_mode()
# Within sketch mode
print("1234")
x &lt;- 10
print(x + 1)
q()

# Back to normal mode, inspect the log and stop the server
ws$log
ws$stopServer()
ws$listServers()    # Confirm no server is running

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
