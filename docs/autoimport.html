<!DOCTYPE html><html lang="en"><head><title>Help for package autoimport</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {autoimport}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#autoimport-package'><p>autoimport: Automatic Generation of @importFrom Tags</p></a></li>
<li><a href='#autoimport'><p>Automatically compute <code style="white-space: pre;">&#8288;@importFrom&#8288;</code> tags</p></a></li>
<li><a href='#import_review'><p>Decision management</p></a></li>
<li><a href='#update_importlist'><p>Update the <code>IMPORTLIST</code> file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Title:</td>
<td>Automatic Generation of @importFrom Tags</td>
</tr>
<tr>
<td>Description:</td>
<td>A toolbox to read all R files inside a package and
    automatically generate @importFrom 'roxygen2' tags in the right place. 
    Includes a 'shiny' application to review the changes before applying them.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/DanChaltiel/autoimport">https://github.com/DanChaltiel/autoimport</a>,
<a href="https://danchaltiel.github.io/autoimport/">https://danchaltiel.github.io/autoimport/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/DanChaltiel/autoimport/issues">https://github.com/DanChaltiel/autoimport/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, desc, diffviewer, digest, dplyr, fs, glue, purrr, readr,
rlang, shiny, stringr, tibble, tidyr, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>callr, covr, devtools, knitr, pkgload, rstudioapi, testthat
(&ge; 3.0.0), tidyverse</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-01 09:31:57 UTC; Dan</td>
</tr>
<tr>
<td>Author:</td>
<td>Dan Chaltiel <a href="https://orcid.org/0000-0003-3488-779X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dan Chaltiel &lt;dan.chaltiel@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-03 12:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='autoimport-package'>autoimport: Automatic Generation of @importFrom Tags</h2><span id='topic+autoimport-package'></span>

<h3>Description</h3>

<p>A toolbox to read all R files inside a package and automatically generate @importFrom 'roxygen2' tags in the right place. Includes a shiny application to review the changes before applying them.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dan Chaltiel <a href="mailto:dan.chaltiel@gmail.com">dan.chaltiel@gmail.com</a> (<a href="https://orcid.org/0000-0003-3488-779X">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/DanChaltiel/autoimport">https://github.com/DanChaltiel/autoimport</a>
</p>
</li>
<li> <p><a href="https://danchaltiel.github.io/autoimport/">https://danchaltiel.github.io/autoimport/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/DanChaltiel/autoimport/issues">https://github.com/DanChaltiel/autoimport/issues</a>
</p>
</li></ul>


<hr>
<h2 id='autoimport'>Automatically compute <code style="white-space: pre;">&#8288;@importFrom&#8288;</code> tags</h2><span id='topic+autoimport'></span>

<h3>Description</h3>

<p>Automatically read all <code>R</code> files and compute appropriate <code style="white-space: pre;">&#8288;@importFrom&#8288;</code> tags in the roxygen2 headers.
The tags can be added to the source files using the <code><a href="#topic+import_review">import_review()</a></code> shiny app afterward.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>autoimport(
  root = ".",
  ...,
  location = c("function", "package"),
  files = get_R_dir(root),
  namespace_file = "NAMESPACE",
  description_file = "DESCRIPTION",
  use_cache = TRUE,
  ignore_package = TRUE,
  verbose = 2
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autoimport_+3A_root">root</code></td>
<td>
<p>Path to the root of the package.</p>
</td></tr>
<tr><td><code id="autoimport_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
<tr><td><code id="autoimport_+3A_location">location</code></td>
<td>
<p>Whether to add <code style="white-space: pre;">&#8288;@importFrom&#8288;</code> dispatched above each function, or centralized at the package level.</p>
</td></tr>
<tr><td><code id="autoimport_+3A_files">files</code></td>
<td>
<p>Files to read. Default to the <code style="white-space: pre;">&#8288;R/&#8288;</code> folder.</p>
</td></tr>
<tr><td><code id="autoimport_+3A_namespace_file">namespace_file</code></td>
<td>
<p>Path to the NAMESPACE file</p>
</td></tr>
<tr><td><code id="autoimport_+3A_description_file">description_file</code></td>
<td>
<p>Path to the DESCRIPTION file</p>
</td></tr>
<tr><td><code id="autoimport_+3A_use_cache">use_cache</code></td>
<td>
<p>Whether to use the cache system. Can only be &quot;read&quot; or &quot;write&quot;.</p>
</td></tr>
<tr><td><code id="autoimport_+3A_ignore_package">ignore_package</code></td>
<td>
<p>Whether to ignore files ending with <code>-package.R</code></p>
</td></tr>
<tr><td><code id="autoimport_+3A_verbose">verbose</code></td>
<td>
<p>The higher, the more output printed. May slow the process a bit.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Mostly used for side effects. Invisibly returns a dataframe summarizing the function imports, with input arguments as attributes.
</p>


<h3>Limitations</h3>

<p>Autoimport is based on <code><a href="utils.html#topic+sourceutils">utils::getSrcref()</a></code> and share the same limits.
Therefore, some function syntaxes are not recognized and <code>autoimport</code> will try to remove their <code style="white-space: pre;">&#8288;@importFrom&#8288;</code> from individual functions:
</p>

<ul>
<li><p> Operators (<code style="white-space: pre;">&#8288;@importFrom dplyr %&gt;%&#8288;</code>, <code style="white-space: pre;">&#8288;@importFrom rlang :=&#8288;</code>, ...)
</p>
</li>
<li><p> Functions called by name (e.g. <code style="white-space: pre;">&#8288;sapply(x, my_fun))&#8288;</code>
</p>
</li>
<li><p> Functions used inside strings (e.g. <code>glue("my_fun={my_fun(x)}")</code>)
</p>
</li></ul>

<p>To keep them imported, you should either use a prefix (<code>pkg::my_fun</code>) or import them in your package-level documentation, as this file is ignored by default (with <code>ignore_package=TRUE</code>).
</p>

<hr>
<h2 id='import_review'>Decision management</h2><span id='topic+import_review'></span>

<h3>Description</h3>

<p>Opens a Shiny app that shows a visual diff of each modified file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_review(
  source_path = "R/",
  output_path = get_target_dir(),
  background = getOption("autoimport_background", FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="import_review_+3A_source_path">source_path</code></td>
<td>
<p>path to the original R files</p>
</td></tr>
<tr><td><code id="import_review_+3A_output_path">output_path</code></td>
<td>
<p>path to the updated R files</p>
</td></tr>
<tr><td><code id="import_review_+3A_background">background</code></td>
<td>
<p>whether to run the app in a background process. Default to <code>getOption("autoimport_background", FALSE)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing if <code>background==FALSE</code>, the (<a href="callr.html#topic+reexports">callr::process</a>) object if <code>background==TRUE</code>
</p>


<h3>Warning</h3>

<p>Beware that using <code>background=TRUE</code> can bloat your system with multiple R session! <br />
You should probably kill the process when you are done:
</p>
<div class="sourceCode r"><pre>p=import_review(background=TRUE)
p$kill()
</pre></div>


<h3>Source</h3>

<p>inspired by <code><a href="testthat.html#topic+snapshot_accept">testthat::snapshot_review()</a></code>
</p>

<hr>
<h2 id='update_importlist'>Update the <code>IMPORTLIST</code> file</h2><span id='topic+update_importlist'></span><span id='topic+get_importlist'></span>

<h3>Description</h3>

<p>Update the <code>IMPORTLIST</code> file, which forces the import of some packages without asking.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_importlist(imports, path = NULL)

get_importlist(path = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_importlist_+3A_imports">imports</code></td>
<td>
<p>a list of imports with <code style="white-space: pre;">&#8288;key=function&#8288;</code> and <code>value=package</code></p>
</td></tr>
<tr><td><code id="update_importlist_+3A_path">path</code></td>
<td>
<p>path to the <code>IMPORTLIST</code> file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
