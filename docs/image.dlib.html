<!DOCTYPE html><html><head><title>Help for package image.dlib</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {image.dlib}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#image_fhog'><p>HOG (Histogram Of Gradients) feature extraction</p></a></li>
<li><a href='#image_surf'><p>Find SURF points in an image</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Image Processing Functionality using the 'dlib' Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jan Wijffels &lt;jwijffels@bnosac.be&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Facility wrappers around the image processing functionality of
    'dlib'. 'Dlib' <a href="http://dlib.net">http://dlib.net</a> is a 'C++' toolkit containing machine learning
    algorithms and computer vision tools. Currently the package allows to find feature
    descriptors of digital images, in particular 'SURF' and 'HOG' descriptors.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="http://www.boost.org/LICENSE_1_0.txt">BSL-1.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bnosac/image">https://github.com/bnosac/image</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.9)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>magick, FNN</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++17</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-17 20:07:09 UTC; jwijf</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Wijffels [aut, cre, cph] (R wrapper),
  BNOSAC [cph] (R wrapper),
  Davis E. King [ctb, cph] (Main contributor of dlib - files in
    inst/dlib),
  dlib authors [ctb, cph] (see file AUTHORS)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-18 08:02:38 UTC</td>
</tr>
</table>
<hr>
<h2 id='image_fhog'>HOG (Histogram Of Gradients) feature extraction</h2><span id='topic+image_fhog'></span>

<h3>Description</h3>

<p>Gets the histogram of oriented gradients (HOG) feature descriptor
<a href="https://en.wikipedia.org/wiki/Histogram_of_oriented_gradients">https://en.wikipedia.org/wiki/Histogram_of_oriented_gradients</a> of an image.
More information on the calculation, see the reference paper or
the dlib reference <a href="http://dlib.net/dlib/image_transforms/fhog_abstract.h.html">http://dlib.net/dlib/image_transforms/fhog_abstract.h.html</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_fhog(
  x,
  cell_size = 8L,
  filter_rows_padding = 1L,
  filter_cols_padding = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="image_fhog_+3A_x">x</code></td>
<td>
<p>a 3-dimensional array of integer pixel values where the first dimension is RGB, 2nd the width of the image and the 3rd the height of the image. See the example.</p>
</td></tr>
<tr><td><code id="image_fhog_+3A_cell_size">cell_size</code></td>
<td>
<p>integer. HOG groups pixels in cells, based on which a histogram of the gradiens is computed. Give the cell size. Defaults to 8.</p>
</td></tr>
<tr><td><code id="image_fhog_+3A_filter_rows_padding">filter_rows_padding</code></td>
<td>
<p>integer indicating how many extra rows and columns of zero padding along the borders to add, for more efficient convolution code</p>
</td></tr>
<tr><td><code id="image_fhog_+3A_filter_cols_padding">filter_cols_padding</code></td>
<td>
<p>integer indicating how many extra rows and columns of zero padding along the borders to add, for more efficient convolution code</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with HOG features of the pixels mapped into HOG space. It contains:
</p>

<ul>
<li><p>hog_height: The size of the height of the image in HOG space
</p>
</li>
<li><p>hog_width: The size of the width of the image in HOG space
</p>
</li>
<li><p>hog_feature: The 31 dimensional FHOG vector, one for each pixel in HOG space. This is an array of dimension hog_height x hog_width x 31. The 31-dimensional vector describes the gradient structure within the cell.
</p>
</li>
<li><p>hog_cell_size: The HOG cell_size
</p>
</li>
<li><p>filter_rows_padding: The value of filter_rows_padding
</p>
</li>
<li><p>filter_cols_padding: The value of filter_cols_padding
</p>
</li></ul>



<h3>References</h3>

<p>Object Detection with Discriminatively Trained Part Based Models by P. Felzenszwalb, R. Girshick, D. McAllester, D. Ramanan IEEE Transactions on Pattern Analysis and Machine Intelligence, Vol. 32, No. 9, Sep. 2010
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magick)
f &lt;- system.file("extdata", "cruise_boat.png", package = "image.dlib")
x &lt;- image_read(f)
x
feats &lt;- image_data(x, channels = "rgb")
feats &lt;- as.integer(feats, transpose = FALSE)
feats &lt;- image_fhog(feats, cell_size = 8)
str(feats)

## FHOG feature vector of pixel at HOG space position 1, 1
feats$fhog[1, 1, ]
## FHOG feature vector of pixel at HOG space position 4 (height), 7 (width)
feats$fhog[4, 7, ]
</code></pre>

<hr>
<h2 id='image_surf'>Find SURF points in an image</h2><span id='topic+image_surf'></span>

<h3>Description</h3>

<p>SURF (speeded up robust features) points are blobs in a digital image
<a href="https://en.wikipedia.org/wiki/Speeded_up_robust_features">https://en.wikipedia.org/wiki/Speeded_up_robust_features</a>. The function identifies
these points in the image and also provides a numeric descriptor of each point.
</p>
<p>This SURF descriptor is used on computer vision applications like object matching (by comparing the SURF
descriptor of several images using e.g. kNN - from the rflann package) or object recognition.
The SURF feature descriptor is based on the sum of the Haar wavelet response around the point of interest.
More information on the calculation, see the reference paper.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_surf(x, max_points = 1000, detection_threshold = 30)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="image_surf_+3A_x">x</code></td>
<td>
<p>a 3-dimensional array of integer pixel values where the first dimension is RGB, 2nd the width of the image and the 3rd the height of the image. See the example.</p>
</td></tr>
<tr><td><code id="image_surf_+3A_max_points">max_points</code></td>
<td>
<p>maximum number of surf points to find</p>
</td></tr>
<tr><td><code id="image_surf_+3A_detection_threshold">detection_threshold</code></td>
<td>
<p>detection threshold (the higher, the lower the number of SURF points found)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with SURF points found and the SURF descriptor. It contains:
</p>

<ul>
<li><p>points: The number of SURF points
</p>
</li>
<li><p>x: The x location of each SURF point
</p>
</li>
<li><p>y: The y location of each SURF point
</p>
</li>
<li><p>angle: The angle of each SURF point
</p>
</li>
<li><p>pyramid_scale: The pyramid scale of each SURF point
</p>
</li>
<li><p>score: The score of each SURF point
</p>
</li>
<li><p>laplacian: The laplacian at each SURF point
</p>
</li>
<li><p>surf: The SURF descriptor which is a matrix with 64 columns describing the point
</p>
</li></ul>



<h3>References</h3>

<p>SURF: Speeded Up Robust Features By Herbert Bay, Tinne Tuytelaars, and Luc Van Gool
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magick)
f &lt;- system.file("extdata", "cruise_boat.png", package = "image.dlib")
x &lt;- image_read(f)
x
surf_blobs &lt;- image_data(x, channels = "rgb")
surf_blobs &lt;- as.integer(surf_blobs, transpose = FALSE)
surf_blobs &lt;- image_surf(surf_blobs, max_points = 10000, detection_threshold = 50)
str(surf_blobs)

library(magick)
plt &lt;- image_draw(x)
points(surf_blobs$x, surf_blobs$y, col = "red", pch = 20)
dev.off()
plt
## Not run: 
## Plot the points
"as.cimg.magick-image" &lt;- function(x){
  out &lt;- lapply(x, FUN=function(frame){
    frame &lt;- as.integer(frame[[1]])[, , 1:3] # dropping the alpha channel
    dim(frame) &lt;- append(dim(frame), 1, after = 2)
    frame
  })
  out$along &lt;- 3
  out &lt;- do.call(abind::abind, out)
  out &lt;- imager::as.cimg(out)
  out &lt;- imager::permute_axes(out, "yxzc")
  out
}
library(imager)
library(magick)
library(abind)
img &lt;- image_read(path = f)
plot(as.cimg(img), main = "SURF points")
points(surf_blobs$x, surf_blobs$y, col = "red", pch = 20)

## End(Not run)

library(magick)
img1   &lt;- image_scale(logo, "x300")
img2   &lt;- image_flip(img1)
height &lt;- image_info(img1)$height
sp1 &lt;- image_surf(image_data(img1, channels = "rgb"), max_points = 50)
sp2 &lt;- image_surf(image_data(img2, channels = "rgb"), max_points = 50)

## Match surf points and plot matches
library(FNN)
k &lt;- get.knnx(sp1$surf, sp2$surf, k = 1)
combined &lt;- image_append(c(img1, img2), stack = TRUE)
plt &lt;- image_draw(combined)
points(sp1$x, sp1$y, col = "red")
points(sp2$x, sp2$y + height, col = "blue")
for(i_from in head(order(k$nn.dist), 50)){
  i_to   &lt;- k$nn.index[i_from]
  lines(x = c(sp1$x[i_to], sp2$x[i_from]), y = c(sp1$y[i_to], sp2$y[i_from] + height), col = "red")
}
dev.off()
plt
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
