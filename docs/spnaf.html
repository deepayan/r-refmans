<!DOCTYPE html><html><head><title>Help for package spnaf</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {spnaf}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CA'><p>Sample migration data by counties in California.</p></a></li>
<li><a href='#CA_polygon'><p>Sample polygon data of California counties.</p></a></li>
<li><a href='#Gij.polygon'><p>Calculate spatial autocorrelation with OD data and corresponding polygons.</p></a></li>
<li><a href='#Networknb'><p>Calculate spatial weights for networks based on input polygons.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Spatial Network Autocorrelation for Flow Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Identify statistically significant flow clusters using the local spatial network autocorrelation statistic G_ij* 
    proposed by 'Berglund' and 'Karlström' (1999) &lt;<a href="https://doi.org/10.1007%2Fs101090050013">doi:10.1007/s101090050013</a>&gt;. 
    The metric, an extended statistic of 'Getis/Ord' G ('Getis' and 'Ord' 1992) &lt;<a href="https://doi.org/10.1111%2Fj.1538-4632.1992.tb00261.x">doi:10.1111/j.1538-4632.1992.tb00261.x</a>&gt;, 
    detects a group of flows having similar traits in terms of directionality. 
    You provide OD data and the associated polygon to get results 
    with several parameters, some of which are defined by spdep package.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, magrittr, sf, spdep, tidyr, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, tmap</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-02 07:45:17 UTC; YB</td>
</tr>
<tr>
<td>Author:</td>
<td>Youngbin Lee <a href="https://orcid.org/0000-0003-3466-6495"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Hui Jeong Ha <a href="https://orcid.org/0000-0002-5229-4528"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Sohyun Park <a href="https://orcid.org/0000-0002-1231-5662"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Kyusik Kim <a href="https://orcid.org/0000-0003-3753-3196"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Jinhyung Lee <a href="https://orcid.org/0000-0003-1859-3441"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Youngbin Lee &lt;youngbin@snu.ac.kr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-02 22:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='CA'>Sample migration data by counties in California.</h2><span id='topic+CA'></span>

<h3>Description</h3>

<p>A dataframe containing migration of CA counties with origins and destinations
from US Census
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CA
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> object with 2580 rows and 12 variables
</p>

<dl>
<dt>State.Code.of.Geography.A</dt><dd><p>Destinations' State code</p>
</dd>
<dt>FIPS.County.Code.of.Geography.A</dt><dd><p>Destinations' FIPS County code</p>
</dd>
<dt>State.U.S..Island.Area.Foreign.Region.Code.of.Geography.B</dt><dd><p>Destinations' State U.S. Island Area Foreign Region Code</p>
</dd>
<dt>FIPS.County.Code.of.Geography.B</dt><dd><p>Origins' FIPS County code</p>
</dd>
<dt>State.Name.of.Geography.A</dt><dd><p>Destinations' State name</p>
</dd>
<dt>County.Name.of.Geography.A</dt><dd><p>Destinations' County name</p>
</dd>
<dt>State.U.S..Island.Area.Foreign.Region.of.Geography.B</dt><dd><p>Origins' State U.S. Island Area Foreign Region Code</p>
</dd>
<dt>County.Name.of.Geography.B</dt><dd><p>Origins' County name</p>
</dd>
<dt>Flow.from.Geography.B.to.Geography.A</dt><dd><p>Flow count from the origin to the destination</p>
</dd>
<dt>Counterflow.from.Geography.A.to.Geography.B</dt><dd><p>Counterflow count from the destination to the origin</p>
</dd>
<dt>Net.Migration.from.Geography.B.to.Geography.A</dt><dd><p>Net migration count from the origin to the destination</p>
</dd>
<dt>Gross.Migration.between.Geography.A.and.Geography.B</dt><dd><p>Gross migration count between counties</p>
</dd>
</dl>



<h3>Source</h3>

<p>Census.gov &gt; Population &gt; Migration/Geographic Mobility &gt; Guidance for Data Users &gt; County-to-County Migration Flows
https://www.census.gov/topics/population/migration/guidance/county-to-county-migration-flows.html
</p>


<h3>Examples</h3>

<pre><code class='language-R'>CA
</code></pre>

<hr>
<h2 id='CA_polygon'>Sample polygon data of California counties.</h2><span id='topic+CA_polygon'></span>

<h3>Description</h3>

<p>A sf(simple feature) containing geometric boundaries of CA counties with their codes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CA_polygon
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code> object with 58 rows and 2 variables
</p>

<dl>
<dt>id</dt><dd><p>FIPS County code of geography</p>
</dd>
<dt>geometry</dt><dd><p>the geometry column for counties(CRS: NAD83)</p>
</dd>
</dl>


<hr>
<h2 id='Gij.polygon'>Calculate spatial autocorrelation with OD data and corresponding polygons.</h2><span id='topic+Gij.polygon'></span>

<h3>Description</h3>

<p>Calculate spatial autocorrelation with OD data and corresponding polygons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Gij.polygon(df, shape, queen = TRUE, snap = 1, method = "t", R = 1000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Gij.polygon_+3A_df">df</code></td>
<td>
<p>A data.frame that contains your Origin-Destination data. The df must consist of &quot;oid&quot; (origin id), &quot;did&quot; (destination id), &quot;n&quot; (flow weight).</p>
</td></tr>
<tr><td><code id="Gij.polygon_+3A_shape">shape</code></td>
<td>
<p>A shapefile (in a polygon type) that matches to your OD dataframe. The shape must have an &quot;id&quot; column to match your ids in df.</p>
</td></tr>
<tr><td><code id="Gij.polygon_+3A_queen">queen</code></td>
<td>
<p>A TRUE/FALSE input that is used to calculate <code>spdep</code>'s spatial contingency (Please view documents of <a href="spdep.html#topic+poly2nb">poly2nb</a> for more information).</p>
</td></tr>
<tr><td><code id="Gij.polygon_+3A_snap">snap</code></td>
<td>
<p>A parameter that is also used to calculate <code>spdep</code>'s spatial contingency (Please view documents of <a href="spdep.html#topic+poly2nb">poly2nb</a> for more information).</p>
</td></tr>
<tr><td><code id="Gij.polygon_+3A_method">method</code></td>
<td>
<p>A string value among &quot;o&quot; (origin based), &quot;d&quot; (destination based), and &quot;t&quot; (both way) which determines the way to generate Spatial Weights. The default value is &quot;t&quot;.</p>
</td></tr>
<tr><td><code id="Gij.polygon_+3A_r">R</code></td>
<td>
<p>An integer value to define how many times you want to execute bootstrapping.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is in the form of a list which includes a dataframe and a <code>sf</code> object.
Both contain Gij statistics and p-value columns merged to your input df. The geometry type of the latter is linestring.
</p>


<h3>References</h3>

<p>Berglund, S., &amp; Karlström, A. (1999). Identifying local spatial association in
flow data, Journal of Geographical Systems, 1(3), 219-236. https://doi.org/10.1007/s101090050013
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Data manipulation
CA &lt;- spnaf::CA
OD &lt;- cbind(CA$FIPS.County.Code.of.Geography.B, CA$FIPS.County.Code.of.Geography.A)
OD &lt;- cbind(OD, CA$Flow.from.Geography.B.to.Geography.A)
OD &lt;- data.frame(OD)
names(OD) &lt;- c("oid", "did", "n")
OD$n &lt;- as.numeric(OD$n)
OD &lt;- OD[order(OD[,1], OD[,2]),]
head(OD) # check the input df's format

# Load sf polygon
CA_polygon &lt;- spnaf::CA_polygon
head(CA_polygon) # it has a geometry column

# Execution of Gij.polygon with data above and given parameters

result &lt;- Gij.polygon(df = OD, shape = CA_polygon, queen = TRUE, snap = 1,
method = 't', R = 1000)


# check the results

head(result[[1]])
head(result[[2]])

</code></pre>

<hr>
<h2 id='Networknb'>Calculate spatial weights for networks based on input polygons.</h2><span id='topic+Networknb'></span>

<h3>Description</h3>

<p>Calculate spatial weights for networks based on input polygons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Networknb(shape, snap = 1, queen = TRUE, method = "t")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Networknb_+3A_shape">shape</code></td>
<td>
<p>A shapefile (in a polygon type) that matches to your OD dataframe. The shape must have an &quot;id&quot; column to match your ids in df.</p>
</td></tr>
<tr><td><code id="Networknb_+3A_snap">snap</code></td>
<td>
<p>A parameter that is also used to calculate <code>spdep</code>'s spatial contingency (Please view documents of <a href="spdep.html#topic+poly2nb">poly2nb</a> for more information).</p>
</td></tr>
<tr><td><code id="Networknb_+3A_queen">queen</code></td>
<td>
<p>A TRUE/FALSE input that is used to calculate <code>spdep</code>'s spatial contingency (Please view documents of <a href="spdep.html#topic+poly2nb">poly2nb</a> for more information).</p>
</td></tr>
<tr><td><code id="Networknb_+3A_method">method</code></td>
<td>
<p>A string value among &quot;o&quot; (origin based), &quot;d&quot; (destination based), and &quot;t&quot; (both way) which determines the way to generate Spatial Weights. The default value is &quot;t&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is in the form of a list which includes combinations of origin ids and destination ids.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Data manipulation
# Load sf polygon

CA_polygon &lt;- spnaf::CA_polygon

# Execution of Networknb with data above and given parameters

nnb &lt;- Networknb(shape = CA_polygon, queen = TRUE, snap = 1, method = 'o')


# check the results

head(nnb)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
