<!DOCTYPE html><html><head><title>Help for package refinr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {refinr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#key_collision_merge'><p>Value merging based on Key Collision</p></a></li>
<li><a href='#n_gram_merge'><p>Value merging based on ngram fingerprints</p></a></li>
<li><a href='#refinr'><p>Cluster and Merge Similar Values Within a Character Vector</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Cluster and Merge Similar Values Within a Character Vector</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.3</td>
</tr>
<tr>
<td>Description:</td>
<td>These functions take a character vector as input, identify and 
  cluster similar values, and then merge clusters together so their values 
  become identical. The functions are an implementation of the key collision 
  and ngram fingerprint algorithms from the open source tool Open Refine 
  <a href="https://openrefine.org/">https://openrefine.org/</a>. More info on key collision and ngram fingerprint 
  can be found here <a href="https://openrefine.org/docs/technical-reference/clustering-in-depth">https://openrefine.org/docs/technical-reference/clustering-in-depth</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.2)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, stringdist (&ge; 0.9.5.1), stringi</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, stringdist (&ge; 0.9.5.1)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ChrisMuir/refinr">https://github.com/ChrisMuir/refinr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ChrisMuir/refinr/issues">https://github.com/ChrisMuir/refinr/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, dplyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-12 21:47:22 UTC; chrismuir</td>
</tr>
<tr>
<td>Author:</td>
<td>Chris Muir [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Chris Muir &lt;chrismuirRVA@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-12 22:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='key_collision_merge'>Value merging based on Key Collision</h2><span id='topic+key_collision_merge'></span>

<h3>Description</h3>

<p>This function takes a character vector and makes edits and merges values
that are approximately equivalent yet not identical. It clusters values
based on the key collision method, described here
<a href="https://openrefine.org/docs/technical-reference/clustering-in-depth">https://openrefine.org/docs/technical-reference/clustering-in-depth</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>key_collision_merge(
  vect,
  ignore_strings = NULL,
  bus_suffix = TRUE,
  dict = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="key_collision_merge_+3A_vect">vect</code></td>
<td>
<p>Character vector, items to be potentially clustered and merged.</p>
</td></tr>
<tr><td><code id="key_collision_merge_+3A_ignore_strings">ignore_strings</code></td>
<td>
<p>Character vector, these strings will be ignored during
the merging of values within <code>vect</code>. Default value is NULL.</p>
</td></tr>
<tr><td><code id="key_collision_merge_+3A_bus_suffix">bus_suffix</code></td>
<td>
<p>Logical, indicating whether the merging of records should
be insensitive to common business suffixes or not. Default value is TRUE.</p>
</td></tr>
<tr><td><code id="key_collision_merge_+3A_dict">dict</code></td>
<td>
<p>Character vector, meant to act as a dictionary during the
merging process. If any items within <code>vect</code> have a match in dict,
then those items will always be edited to be identical to their match in
dict. Default value is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector with similar values merged.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("Acme Pizza, Inc.", "ACME PIZZA COMPANY", "pizza, acme llc",
       "Acme Pizza, Inc.")
key_collision_merge(vect = x)

# Use parameter "dict" to influence how clustered values are edited.
key_collision_merge(vect = x, dict = c("Nicks Pizza", "acme PIZZA inc"))

# Use parameter 'ignore_strings' to ignore specific strings during merging
# of values.
x &lt;- c("Bakersfield Highschool", "BAKERSFIELD high",
       "high school, bakersfield")
key_collision_merge(x, ignore_strings = c("high", "school", "highschool"))

</code></pre>

<hr>
<h2 id='n_gram_merge'>Value merging based on ngram fingerprints</h2><span id='topic+n_gram_merge'></span>

<h3>Description</h3>

<p>This function takes a character vector and makes edits and merges values
that are approximately equivalent yet not identical. It uses a two step
process, the first is clustering values based on their ngram fingerprint (described here
<a href="https://openrefine.org/docs/technical-reference/clustering-in-depth">https://openrefine.org/docs/technical-reference/clustering-in-depth</a>).
The second step is merging values based on approximate string matching of
the ngram fingerprints, using the [sd_lower_tri()] C function from the
package <code>stringdist</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>n_gram_merge(
  vect,
  numgram = 2,
  ignore_strings = NULL,
  bus_suffix = TRUE,
  edit_threshold = 1,
  weight = c(d = 0.33, i = 0.33, s = 1, t = 0.5),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="n_gram_merge_+3A_vect">vect</code></td>
<td>
<p>Character vector, items to be potentially clustered and merged.</p>
</td></tr>
<tr><td><code id="n_gram_merge_+3A_numgram">numgram</code></td>
<td>
<p>Numeric value, indicating the number of characters that
will occupy each ngram token. Default value is 2.</p>
</td></tr>
<tr><td><code id="n_gram_merge_+3A_ignore_strings">ignore_strings</code></td>
<td>
<p>Character vector, these strings will be ignored during
the merging of values within <code>vect</code>. Default value is NULL.</p>
</td></tr>
<tr><td><code id="n_gram_merge_+3A_bus_suffix">bus_suffix</code></td>
<td>
<p>Logical, indicating whether the merging of records should
be insensitive to common business suffixes or not. Default value is TRUE.</p>
</td></tr>
<tr><td><code id="n_gram_merge_+3A_edit_threshold">edit_threshold</code></td>
<td>
<p>Numeric value, indicating the threshold at which a
merge is performed, based on the sum of the edit values derived from
param <code>weight</code>. Default value is 1. If this parameter is
set to 0 or NA, then no approximate string matching will be done, and all
merging will be based on strings that have identical ngram fingerprints.</p>
</td></tr>
<tr><td><code id="n_gram_merge_+3A_weight">weight</code></td>
<td>
<p>Numeric vector, indicating the weights to assign to
the four edit operations (see details below), for the purpose of
approximate string matching. Default values are
c(d = 0.33, i = 0.33, s = 1, t = 0.5). This parameter gets passed along
to the <code>stringdist</code> function. Must be either
a numeric vector of length four, or NA.</p>
</td></tr>
<tr><td><code id="n_gram_merge_+3A_...">...</code></td>
<td>
<p>additional args to be passed along to the <code>stringdist</code>
function. The acceptable args are identical to those of
[stringdistmatrix()].</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The values of arg <code>weight</code> are edit distance values that
get passed to the <code>stringdist</code> edit distance function. The
param takes four arguments, each one is a specific type of edit, with
default penalty value.
</p>

<ul>
<li><p> d: deletion, default value is 0.33
</p>
</li>
<li><p> i: insertion, default value is 0.33
</p>
</li>
<li><p> s: substitution, default value is 1
</p>
</li>
<li><p> t: transposition, default value is 0.5
</p>
</li></ul>



<h3>Value</h3>

<p>Character vector with similar values merged.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("Acme Pizza, Inc.", "ACME PIZA COMPANY", "Acme Pizzazza LLC")

n_gram_merge(vect = x)

# The performance of the approximate string matching can be ajusted using
# parameters 'weight' or 'edit_threshold'
n_gram_merge(vect = x,
             weight = c(d = 0.4, i = 1, s = 1, t = 1))

# Use parameter 'ignore_strings' to ignore specific strings during merging
# of values.
x &lt;- c("Bakersfield Highschool", "BAKERSFIELD high",
       "high school, bakersfield")
n_gram_merge(vect = x, ignore_strings = c("high", "school", "highschool"))

</code></pre>

<hr>
<h2 id='refinr'>Cluster and Merge Similar Values Within a Character Vector</h2><span id='topic+refinr'></span><span id='topic+refinr-package'></span>

<h3>Description</h3>

<p>These functions take a character vector as input, identify and
cluster similar values, and then merge clusters together so their values
become identical. The functions are an implementation of the key collision
and ngram fingerprint algorithms from the open source tool Open Refine.
</p>


<h3>Documentation for Open Refine</h3>


<ul>
<li><p> Open Refine Site <a href="https://openrefine.org/">https://openrefine.org/</a>
</p>
</li>
<li><p> Details on Open Refine clustering algorithms <a href="https://openrefine.org/docs/technical-reference/clustering-in-depth">https://openrefine.org/docs/technical-reference/clustering-in-depth</a>
</p>
</li></ul>



<h3>Development links</h3>


<ul>
<li> <p><a href="https://github.com/ChrisMuir/refinr">https://github.com/ChrisMuir/refinr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ChrisMuir/refinr/issues">https://github.com/ChrisMuir/refinr/issues</a>
</p>
</li></ul>



<h3><code>refinr</code> features the following functions</h3>


<ul>
<li> <p><code><a href="#topic+key_collision_merge">key_collision_merge</a></code>
</p>
</li>
<li> <p><code><a href="#topic+n_gram_merge">n_gram_merge</a></code>
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Chris Muir <a href="mailto:chrismuirRVA@gmail.com">chrismuirRVA@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ChrisMuir/refinr">https://github.com/ChrisMuir/refinr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ChrisMuir/refinr/issues">https://github.com/ChrisMuir/refinr/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
