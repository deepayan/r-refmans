<!DOCTYPE html><html lang="en"><head><title>Help for package UpSetR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {UpSetR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#elements'><p>Element query for queries parameter</p></a></li>
<li><a href='#fromExpression'><p>Expression to UpSetR converters</p></a></li>
<li><a href='#fromList'><p>List of named vectors to UpSetR converter</p></a></li>
<li><a href='#histogram'><p>Histogram for custom plot</p></a></li>
<li><a href='#intersects'><p>Intersection query for queries parameter</p></a></li>
<li><a href='#scatter_plot'><p>Scatterplot for customplot</p></a></li>
<li><a href='#upset'><p>UpSetR Plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>A More Scalable Alternative to Venn and Euler Diagrams for
Visualizing Intersecting Sets</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-5-9</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://github.com/hms-dbmi/UpSetR">http://github.com/hms-dbmi/UpSetR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="http://github.com/hms-dbmi/UpSetR/issues">http://github.com/hms-dbmi/UpSetR/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Creates visualizations of intersecting sets using a novel matrix
    design, along with visualizations of several common set, element and attribute
    related tasks (Conway 2017) &lt;<a href="https://doi.org/10.1093%2Fbioinformatics%2Fbtx364">doi:10.1093/bioinformatics/btx364</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, gridExtra, plyr, utils, stats, methods, grDevices,
scales</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-05-09 16:34:50 UTC; jakeconway</td>
</tr>
<tr>
<td>Author:</td>
<td>Jake Conway [cre],
  Nils Gehlenborg [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jake Conway &lt;jake_conway@hms.harvard.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-05-22 23:30:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='elements'>Element query for queries parameter</h2><span id='topic+elements'></span>

<h3>Description</h3>

<p>A query paramter to visualize specific elements of interest if queries = active (in custom plots only)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>elements(func, query, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="elements_+3A_func">func</code></td>
<td>
<p>A functions provided internally</p>
</td></tr>
<tr><td><code id="elements_+3A_query">query</code></td>
<td>
<p>Input from the queries parameter assigned to the element function.</p>
</td></tr>
<tr><td><code id="elements_+3A_...">...</code></td>
<td>
<p>Additional parameters to be supplied internally</p>
</td></tr>
</table>


<h3>Note</h3>

<p>See examples section of upset function on how to use this function in the queries parameter.
</p>

<hr>
<h2 id='fromExpression'>Expression to UpSetR converters</h2><span id='topic+fromExpression'></span>

<h3>Description</h3>

<p>A function to convert an expression to a data frame compatible with UpSetR.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fromExpression(input)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fromExpression_+3A_input">input</code></td>
<td>
<p>An vector (expression) to be converted to an input compatible with UpSetR</p>
</td></tr>
</table>


<h3>Note</h3>

<p>See &quot;Basic Usage&quot; vignette for an example on how to use this function in UpSetR.
</p>

<hr>
<h2 id='fromList'>List of named vectors to UpSetR converter</h2><span id='topic+fromList'></span>

<h3>Description</h3>

<p>A function to convert a list of named vectors to a data frame compatible with UpSetR.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fromList(input)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fromList_+3A_input">input</code></td>
<td>
<p>A list of named vectors to be converted to a data frame compatible with UpSetR</p>
</td></tr>
</table>


<h3>Note</h3>

<p>See &quot;Basic Usage&quot; vignette for an example on how to use this function in UpSetR.
</p>

<hr>
<h2 id='histogram'>Histogram for custom plot</h2><span id='topic+histogram'></span>

<h3>Description</h3>

<p>A pre-made histogram that can be added to custom.plot parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>histogram(mydata, x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="histogram_+3A_mydata">mydata</code></td>
<td>
<p>A data set containing intersection data provided internally</p>
</td></tr>
<tr><td><code id="histogram_+3A_x">x</code></td>
<td>
<p>The x aesthetic of for the histogram plot</p>
</td></tr>
</table>


<h3>Note</h3>

<p>See examples section for upset function on how to use custom.plot parameter
</p>

<hr>
<h2 id='intersects'>Intersection query for queries parameter</h2><span id='topic+intersects'></span>

<h3>Description</h3>

<p>A query paramter to visualize elements contained in specific intersections
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intersects(func, query, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="intersects_+3A_func">func</code></td>
<td>
<p>A functions provided internally</p>
</td></tr>
<tr><td><code id="intersects_+3A_query">query</code></td>
<td>
<p>Input from the queries parameter assigned to the intersection function.</p>
</td></tr>
<tr><td><code id="intersects_+3A_...">...</code></td>
<td>
<p>Additional parameters to be applied internally</p>
</td></tr>
</table>


<h3>Note</h3>

<p>See examples section of upset function on how to use this function in the queries parameter.
</p>

<hr>
<h2 id='scatter_plot'>Scatterplot for customplot</h2><span id='topic+scatter_plot'></span>

<h3>Description</h3>

<p>A pre-made scatter plot that can be added to the custom.plot parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scatter_plot(mydata, x, y)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scatter_plot_+3A_mydata">mydata</code></td>
<td>
<p>A data set containing intersection data provided internally</p>
</td></tr>
<tr><td><code id="scatter_plot_+3A_x">x</code></td>
<td>
<p>The x aesthetic for the scatter plot</p>
</td></tr>
<tr><td><code id="scatter_plot_+3A_y">y</code></td>
<td>
<p>The y aesthetic for the scatter plot</p>
</td></tr>
</table>


<h3>Note</h3>

<p>See examples section for upset function on how to use custom.plot parameter.
</p>

<hr>
<h2 id='upset'>UpSetR Plot</h2><span id='topic+upset'></span>

<h3>Description</h3>

<p>Visualization of set intersections using novel UpSet matrix design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>upset(data, nsets = 5, nintersects = 40, sets = NULL,
  keep.order = F, set.metadata = NULL, intersections = NULL,
  matrix.color = "gray23", main.bar.color = "gray23",
  mainbar.y.label = "Intersection Size", mainbar.y.max = NULL,
  sets.bar.color = "gray23", sets.x.label = "Set Size",
  point.size = 2.2, line.size = 0.7, mb.ratio = c(0.7, 0.3),
  expression = NULL, att.pos = NULL, att.color = main.bar.color,
  order.by = c("freq", "degree"), decreasing = c(T, F),
  show.numbers = "yes", number.angles = 0, group.by = "degree",
  cutoff = NULL, queries = NULL, query.legend = "none",
  shade.color = "gray88", shade.alpha = 0.25, matrix.dot.alpha = 0.5,
  empty.intersections = NULL, color.pal = 1, boxplot.summary = NULL,
  attribute.plots = NULL, scale.intersections = "identity",
  scale.sets = "identity", text.scale = 1, set_size.angles = 0,
  set_size.show = FALSE, set_size.numbers_size = NULL,
  set_size.scale_max = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="upset_+3A_data">data</code></td>
<td>
<p>Data set</p>
</td></tr>
<tr><td><code id="upset_+3A_nsets">nsets</code></td>
<td>
<p>Number of sets to look at</p>
</td></tr>
<tr><td><code id="upset_+3A_nintersects">nintersects</code></td>
<td>
<p>Number of intersections to plot. If set to NA, all intersections will be plotted.</p>
</td></tr>
<tr><td><code id="upset_+3A_sets">sets</code></td>
<td>
<p>Specific sets to look at (Include as combinations. Ex: c(&quot;Name1&quot;, &quot;Name2&quot;))</p>
</td></tr>
<tr><td><code id="upset_+3A_keep.order">keep.order</code></td>
<td>
<p>Keep sets in the order entered using the sets parameter. The default is FALSE, which orders the sets by their sizes.</p>
</td></tr>
<tr><td><code id="upset_+3A_set.metadata">set.metadata</code></td>
<td>
<p>Metadata that offers insight to an attribute of the sets. Input should be a data frame where the first column is set names, and the
remaining columns are attributes of those sets. To learn how to use this parameter it is highly suggested to view the set metadata vignette. The link
can be found on the package's GitHub page.</p>
</td></tr>
<tr><td><code id="upset_+3A_intersections">intersections</code></td>
<td>
<p>Specific intersections to include in plot entered as a list of lists.
Ex: list(list(&quot;Set name1&quot;, &quot;Set name2&quot;), list(&quot;Set name1&quot;, &quot;Set name3&quot;)). If data is entered into this parameter the only data shown on the UpSet plot
will be the specific intersections listed.</p>
</td></tr>
<tr><td><code id="upset_+3A_matrix.color">matrix.color</code></td>
<td>
<p>Color of the intersection points</p>
</td></tr>
<tr><td><code id="upset_+3A_main.bar.color">main.bar.color</code></td>
<td>
<p>Color of the main bar plot</p>
</td></tr>
<tr><td><code id="upset_+3A_mainbar.y.label">mainbar.y.label</code></td>
<td>
<p>The y-axis label of the intersection size bar plot</p>
</td></tr>
<tr><td><code id="upset_+3A_mainbar.y.max">mainbar.y.max</code></td>
<td>
<p>The maximum y value of the intersection size bar plot scale. May be useful when aligning multiple UpSet plots horizontally.</p>
</td></tr>
<tr><td><code id="upset_+3A_sets.bar.color">sets.bar.color</code></td>
<td>
<p>Color of set size bar plot</p>
</td></tr>
<tr><td><code id="upset_+3A_sets.x.label">sets.x.label</code></td>
<td>
<p>The x-axis label of the set size bar plot</p>
</td></tr>
<tr><td><code id="upset_+3A_point.size">point.size</code></td>
<td>
<p>Size of points in matrix plot</p>
</td></tr>
<tr><td><code id="upset_+3A_line.size">line.size</code></td>
<td>
<p>Width of lines in matrix plot</p>
</td></tr>
<tr><td><code id="upset_+3A_mb.ratio">mb.ratio</code></td>
<td>
<p>Ratio between matrix plot and main bar plot (Keep in terms of hundredths)</p>
</td></tr>
<tr><td><code id="upset_+3A_expression">expression</code></td>
<td>
<p>Expression to subset attributes of intersection or element query data. Enter as string (Ex: &quot;ColName &gt; 3&quot;)</p>
</td></tr>
<tr><td><code id="upset_+3A_att.pos">att.pos</code></td>
<td>
<p>Position of attribute plot. If NULL or &quot;bottom&quot; the plot will be at below UpSet plot. If &quot;top&quot; it will be above UpSet plot</p>
</td></tr>
<tr><td><code id="upset_+3A_att.color">att.color</code></td>
<td>
<p>Color of attribute histogram bins or scatterplot points for unqueried data represented by main bars. Default set to color of main bars.</p>
</td></tr>
<tr><td><code id="upset_+3A_order.by">order.by</code></td>
<td>
<p>How the intersections in the matrix should be ordered by. Options include frequency (entered as &quot;freq&quot;), degree, or both in any order.</p>
</td></tr>
<tr><td><code id="upset_+3A_decreasing">decreasing</code></td>
<td>
<p>How the variables in order.by should be ordered. &quot;freq&quot; is decreasing (greatest to least) and &quot;degree&quot; is increasing (least to greatest)</p>
</td></tr>
<tr><td><code id="upset_+3A_show.numbers">show.numbers</code></td>
<td>
<p>Show numbers of intersection sizes above bars</p>
</td></tr>
<tr><td><code id="upset_+3A_number.angles">number.angles</code></td>
<td>
<p>The angle of the numbers atop the intersection size bars</p>
</td></tr>
<tr><td><code id="upset_+3A_group.by">group.by</code></td>
<td>
<p>How the data should be grouped (&quot;degree&quot; or &quot;sets&quot;)</p>
</td></tr>
<tr><td><code id="upset_+3A_cutoff">cutoff</code></td>
<td>
<p>The number of intersections from each set (to cut off at) when aggregating by sets</p>
</td></tr>
<tr><td><code id="upset_+3A_queries">queries</code></td>
<td>
<p>Unified query of intersections, elements, and custom row functions. Entered as a list that contains a list of
queries. query is the type of query being conducted. params are the parameters of the query (if any). color is the color of the points on the
plot that will represent the query. If no color is selected one will be provided automatically. active takes TRUE or FALSE, and if
TRUE, it will overlay the bars present  with the results from the query. If FALSE a tick mark will indicate the intersection size.
See examples section on how to do this.</p>
</td></tr>
<tr><td><code id="upset_+3A_query.legend">query.legend</code></td>
<td>
<p>Position query legend on top or bottom of UpSet plot</p>
</td></tr>
<tr><td><code id="upset_+3A_shade.color">shade.color</code></td>
<td>
<p>Color of row shading in matrix</p>
</td></tr>
<tr><td><code id="upset_+3A_shade.alpha">shade.alpha</code></td>
<td>
<p>Transparency of shading in matrix</p>
</td></tr>
<tr><td><code id="upset_+3A_matrix.dot.alpha">matrix.dot.alpha</code></td>
<td>
<p>Transparency of the empty intersections points in the matrix</p>
</td></tr>
<tr><td><code id="upset_+3A_empty.intersections">empty.intersections</code></td>
<td>
<p>Additionally display empty sets up to nintersects</p>
</td></tr>
<tr><td><code id="upset_+3A_color.pal">color.pal</code></td>
<td>
<p>Color palette for attribute plots</p>
</td></tr>
<tr><td><code id="upset_+3A_boxplot.summary">boxplot.summary</code></td>
<td>
<p>Boxplots representing the distribution of a selected attribute for each intersection. Select attributes by entering a character vector of attribute names (e.g. c(&quot;Name1&quot;, &quot;Name2&quot;)).
The maximum number of attributes that can be entered is 2.</p>
</td></tr>
<tr><td><code id="upset_+3A_attribute.plots">attribute.plots</code></td>
<td>
<p>Create custom ggplot using intersection data represented in the main bar plot. Prior to adding custom plots, the UpSet plot is set up in a 100 by 100 grid.
The attribute.plots parameter takes a list that contains the number of rows that should be allocated for the custom plot, and a list of plots with specified positions.
nrows is the number of rows the custom plots should take up. There is already 100 allocated for the custom plot. plots takes a list that contains a function that returns
a custom ggplot and the x and y aesthetics for the function. ncols is the number of columns that your ggplots should take up. See examples for how to add custom ggplots.</p>
</td></tr>
<tr><td><code id="upset_+3A_scale.intersections">scale.intersections</code></td>
<td>
<p>The scale to be used for the intersection sizes. Options: &quot;identity&quot;, &quot;log10&quot;, &quot;log2&quot;</p>
</td></tr>
<tr><td><code id="upset_+3A_scale.sets">scale.sets</code></td>
<td>
<p>The scale to be used for the set sizes. Options: &quot;identity&quot;, &quot;log10&quot;, &quot;log2&quot;</p>
</td></tr>
<tr><td><code id="upset_+3A_text.scale">text.scale</code></td>
<td>
<p>Numeric, value to scale the text sizes, applies to all axis labels, tick labels, and numbers above bar plot. Can be a universal scale, or a vector containing individual scales
in the following format: c(intersection size title, intersection size tick labels, set size title, set size tick labels, set names, numbers above bars)</p>
</td></tr>
<tr><td><code id="upset_+3A_set_size.angles">set_size.angles</code></td>
<td>
<p>Numeric, angle to rotate the set size plot x-axis text</p>
</td></tr>
<tr><td><code id="upset_+3A_set_size.show">set_size.show</code></td>
<td>
<p>Logical, display the set sizes on the set size bar chart</p>
</td></tr>
<tr><td><code id="upset_+3A_set_size.numbers_size">set_size.numbers_size</code></td>
<td>
<p>If set_size.show is TRUE, adjust the size of the numbers</p>
</td></tr>
<tr><td><code id="upset_+3A_set_size.scale_max">set_size.scale_max</code></td>
<td>
<p>Increase the maximum of set size scale</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Visualization of set data in the layout described by Lex and Gehlenborg in <a href="http://www.nature.com/nmeth/journal/v11/n8/abs/nmeth.3033.html">http://www.nature.com/nmeth/journal/v11/n8/abs/nmeth.3033.html</a>.
UpSet also allows for visualization of queries on intersections and elements, along with custom queries queries implemented using
Hadley Wickham's apply function. To further analyze the data contained in the intersections, the user may select additional attribute plots
to be displayed alongside the UpSet plot. The user also has the the ability to pass their own plots into the function to further analyze
data belonging to queries of interest. Most aspects of the UpSet plot are customizable, allowing the user to select the plot that best suits their style.
Depending on how the features are selected, UpSet can display between 25-65 sets and between 40-100 intersections.
</p>


<h3>Note</h3>

<p>Data set must be formatted as described on the original UpSet github page: <a href="http://github.com/VCG/upset/wiki">http://github.com/VCG/upset/wiki</a>.
</p>


<h3>References</h3>

<p>Lex et al. (2014). UpSet: Visualization of Intersecting Sets
IEEE Transactions on Visualization and Computer Graphics (Proceedings of InfoVis 2014), vol 20, pp. 1983-1992, (2014). <a href="http://people.seas.harvard.edu/~alex/papers/2014_infovis_upset.pdf">http://people.seas.harvard.edu/~alex/papers/2014_infovis_upset.pdf</a>
</p>
<p>Lex and Gehlenborg (2014). Points of view: Sets and intersections. Nature Methods 11, 779 (2014). <a href="http://www.nature.com/nmeth/journal/v11/n8/abs/nmeth.3033.html">http://www.nature.com/nmeth/journal/v11/n8/abs/nmeth.3033.html</a>
</p>


<h3>See Also</h3>

<p>Original UpSet Website: <a href="http://vcg.github.io/upset/about/">http://vcg.github.io/upset/about/</a>
</p>
<p>UpSetR github for additional examples: <a href="http://github.com/hms-dbmi/UpSetR">http://github.com/hms-dbmi/UpSetR</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>movies &lt;- read.csv( system.file("extdata", "movies.csv", package = "UpSetR"), header=TRUE, sep=";" )

require(ggplot2); require(plyr); require(gridExtra); require(grid);

between &lt;- function(row, min, max){
  newData &lt;- (row["ReleaseDate"] &lt; max) &amp; (row["ReleaseDate"] &gt; min)
}

plot1 &lt;- function(mydata, x){
  myplot &lt;- (ggplot(mydata, aes_string(x= x, fill = "color"))
            + geom_histogram() + scale_fill_identity()
            + theme(plot.margin = unit(c(0,0,0,0), "cm")))
}

plot2 &lt;- function(mydata, x, y){
  myplot &lt;- (ggplot(data = mydata, aes_string(x=x, y=y, colour = "color"), alpha = 0.5)
            + geom_point() + scale_color_identity()
            + theme_bw() + theme(plot.margin = unit(c(0,0,0,0), "cm")))
}

attributeplots &lt;- list(gridrows = 55,
                  plots = list(list(plot = plot1, x= "ReleaseDate",  queries = FALSE),
                         list(plot = plot1, x= "ReleaseDate", queries = TRUE),
                         list(plot = plot2, x = "ReleaseDate", y = "AvgRating", queries = FALSE),
                         list(plot = plot2, x = "ReleaseDate", y = "AvgRating", queries = TRUE)),
                   ncols = 3)

upset(movies, nsets = 7, nintersects = 30, mb.ratio = c(0.5, 0.5),
      order.by = c("freq", "degree"), decreasing = c(TRUE,FALSE))

upset(movies, sets = c("Drama", "Comedy", "Action", "Thriller", "Western", "Documentary"),
      queries = list(list(query = intersects, params = list("Drama", "Action")),
                list(query = between, params = list(1970, 1980), color = "red", active = TRUE)))

upset(movies, attribute.plots = attributeplots,
     queries = list(list(query = between, params = list(1920, 1940)),
                    list(query = intersects, params = list("Drama"), color= "red"),
                    list(query = elements, params = list("ReleaseDate", 1990, 1991, 1992))),
      main.bar.color = "yellow")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
