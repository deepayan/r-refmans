<!DOCTYPE html><html><head><title>Help for package choiceDes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {choiceDes}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#choiceDes-package'><p>Design Functions for Choice Studies</p></a></li>
<li><a href='#cp.scree'><p>Scree plot for tradeoff designs</p></a></li>
<li><a href='#dcm.design'><p>Optimal fractional factorial design</p></a></li>
<li><a href='#dcm.design.cand'><p>Optimal fractional factorial design</p></a></li>
<li><a href='#dcm.design.effcy'><p>INTERNAL: Calculate design efficiencies</p></a></li>
<li><a href='#dcm.design.sort'><p>INTERNAL: Append other design variables</p></a></li>
<li><a href='#optBlockC'><p>Optimal design blocking</p></a></li>
<li><a href='#optFederovC'><p>Optimal design</p></a></li>
<li><a href='#pw.eval'><p>INTERNAL: Evaluate two-way frequencies</p></a></li>
<li><a href='#tradeoff.des'><p>MaxDiff and other tradeoff designs</p></a></li>
<li><a href='#write.tab'><p>INTERNAL: Write a data frame as tab-delimited file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Design Functions for Choice Studies</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9-3</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-06-18</td>
</tr>
<tr>
<td>Author:</td>
<td>Jack Horne [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jack Horne &lt;jack@jackhorne.net&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Design functions for DCMs and other types of choice studies (including MaxDiff and other tradeoffs).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.15.2), AlgDesign</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-06-18 15:36:40 UTC; Jack</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-06-18 22:49:53 UTC</td>
</tr>
</table>
<hr>
<h2 id='choiceDes-package'>Design Functions for Choice Studies</h2><span id='topic+choiceDes-package'></span>

<h3>Description</h3>

<p>Functions to design DCMs and other types of choice 
studies (including MaxDiff and other tradeoffs)
</p>

<hr>
<h2 id='cp.scree'>Scree plot for tradeoff designs</h2><span id='topic+cp.scree'></span>

<h3>Description</h3>

<p>Line plot showing the relationship between the criterion used to assess column position
balance and the number of iterations in the column position balancing routine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cp.scree(des)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cp.scree_+3A_des">des</code></td>
<td>
<p>An <code>R</code> object containing the results from a call to <code>tradeoff.des</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Column position balancing is the most computationally intensive process in calls to <code>tradeoff.des</code>. 
The number of iterations required for this step is determined by the <code>Rc</code> argument in that function
which defaults to the larger of 1,000 or 10 <code>x</code> the number of rows in the design. Large design problems 
may require a larger number of iterations to achieve optimal column position balance. The plot generated by 
this function can help to assess whether additional <code>Rc</code> iterations would lead to better column 
position balance.
</p>
<p>See <code>tradeoff.des</code> for additional details.
</p>


<h3>Value</h3>

<p>A line plot showing the relationship between the criterion used to assess column position
balance and the number of iterations in the column position balancing routine.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>des &lt;- tradeoff.des(12, 4, 10, 9)
cp.scree(des)
</code></pre>

<hr>
<h2 id='dcm.design'>Optimal fractional factorial design</h2><span id='topic+dcm.design'></span>

<h3>Description</h3>

<p>Generate an optimal fractional factorial design given
vectors of factor lengths.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcm.design(cand, nb, sets, alts, fname=NULL, Rd=20, print=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dcm.design_+3A_cand">cand</code></td>
<td>
<p>A vector of factor lengths, or a list containing vectors of factor lengths if a
combinatorial design is needed.</p>
</td></tr>
<tr><td><code id="dcm.design_+3A_nb">nb</code></td>
<td>
<p>The number of blocks or versions in the final design.</p>
</td></tr>
<tr><td><code id="dcm.design_+3A_sets">sets</code></td>
<td>
<p>The number of choice sets in <em>each version</em> of the final design.</p>
</td></tr>
<tr><td><code id="dcm.design_+3A_alts">alts</code></td>
<td>
<p>The number of alternatives in each choice set.</p>
</td></tr>
<tr><td><code id="dcm.design_+3A_fname">fname</code></td>
<td>
<p>A character string, usually ending in &quot;.txt&quot;, indiciating the name of the file containing 
the levels-coded design.</p>
</td></tr>
<tr><td><code id="dcm.design_+3A_rd">Rd</code></td>
<td>
<p>The number of repeats used by the initial design and blocking algorithms. See arg 
<code>nRepeats</code> in <code>optFederov</code> and <code>optBlock</code> for additional details</p>
</td></tr>
<tr><td><code id="dcm.design_+3A_print">print</code></td>
<td>
<p>Boolean indicating whether there is output to the console during execution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Generates balanced and blocked choice sets from one or more specified full-factorial candidate 
set(s) using a modified Federov (1972) algorithm. See <code>optFederov</code> in <em>AlgDesign</em> (Wheeler, 2004) 
for a more complete description of the algorithm. Starting points are chosen randomly (as opposed to by 
nullification) and may be seeded using <code>set.seed</code>. The <code>D</code> criterion is used for optimization.
</p>
<p>See <code>optBlock</code> for a description of the blocking method used.
</p>
<p>If <code>fname</code> is not <code>NULL</code> a tab-delimited plain-text file is generated in the working 
directory containing the levels-coded design.
</p>
<p>Large problems will complete faster by setting <code>Rd</code> to a smaller value. However, this may come at the
expense of a more efficient design.
</p>


<h3>Value</h3>

<table>
<tr><td><code>levels</code></td>
<td>
<p>A data frame consisting of the levels-coded design with blocks stacked in order. Variables for
card, version and task are appended.</p>
</td></tr>
<tr><td><code>effects</code></td>
<td>
<p>A list of the effects-coded, blocked design and diagnostics. See <code>optBlock</code> for
additional details.</p>
</td></tr>
<tr><td><code>d.eff</code></td>
<td>
<p>A list containing <code>D</code> efficiency, the variance-covariance matrix, and parameter
standard deviations from the effects-coded design. See <code>dcm.design.effcy</code> for additional details.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Federov, V.V. (1972). <em>Theory of optimal experiments.</em> Academic Press, New York.
</p>
<p>Wheeler, R.E. (2004). <em>AlgDesign.</em> The R project for statistical computing.
(http://www.r-project.org).
</p>


<h3>See Also</h3>

<p><code>optFederov</code>, <code>optBlock</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1:
## design from a single candidate set
levs1 &lt;- c(3,3,5,4)
des &lt;- dcm.design(levs1, 10, 6, 2)

## Example 2:
## combinatorial design from more than one candidate set
levs2 &lt;- list(c(3,3), c(5,4))
des &lt;- dcm.design(levs2, 10, 6, 2)
</code></pre>

<hr>
<h2 id='dcm.design.cand'>Optimal fractional factorial design</h2><span id='topic+dcm.design.cand'></span>

<h3>Description</h3>

<p>Generate an optimal restricted fractional factorial design given
a pre-generated candidate set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcm.design.cand(cand, nb, sets, alts, fname=NULL, Rd=20, print=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dcm.design.cand_+3A_cand">cand</code></td>
<td>
<p>A data frame of columns representing factors in the design OR a tab-delimited file readable 
using <code>read.table(</code><em>filename</em><code>)</code>.<br />
If <code>cand</code> is not a data frame, an external file is assumed.</p>
</td></tr>
<tr><td><code id="dcm.design.cand_+3A_nb">nb</code></td>
<td>
<p>The number of blocks or versions in the final design.</p>
</td></tr>
<tr><td><code id="dcm.design.cand_+3A_sets">sets</code></td>
<td>
<p>The number of choice sets in <em>each version</em> of the final design.</p>
</td></tr>
<tr><td><code id="dcm.design.cand_+3A_alts">alts</code></td>
<td>
<p>The number of alternatives in each choice set.</p>
</td></tr>
<tr><td><code id="dcm.design.cand_+3A_fname">fname</code></td>
<td>
<p>A character string, usually ending in &quot;.txt&quot;, indiciating the name of the file containing 
the levels-coded design.</p>
</td></tr>
<tr><td><code id="dcm.design.cand_+3A_rd">Rd</code></td>
<td>
<p>The number of repeats used by the initial design and blocking algorithms. See arg 
<code>nRepeats</code> in <code>optFederov</code> and <code>optBlock</code> for additional details</p>
</td></tr>
<tr><td><code id="dcm.design.cand_+3A_print">print</code></td>
<td>
<p>Boolean indicating whether there is output to the console during execution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Generates balanced and blocked choice sets from a <em>pre-generated</em> candidate set. 
Typical use will involve (1) generating a full factorial candidate set (see <code>gen.factorial</code>), 
(2) manipulating levels as desired (e.g., adding restrictions) and,
(3) using the manipulated set as input into the function.
</p>
<p>Design optimization and blocking use the same algorithms as those in <code>dcm.design</code>.
</p>
<p>If <code>fname</code> is not <code>NULL</code> a tab-delimited plain-text file is generated in the working 
directory containing the levels-coded design.  
</p>


<h3>Value</h3>

<table>
<tr><td><code>levels</code></td>
<td>
<p>A data frame consisting of the levels-coded design with blocks stacked in order. Variables for
card, version and task are appended.</p>
</td></tr>
<tr><td><code>effects</code></td>
<td>
<p>A list of the effects-coded, blocked design and diagnostics. See <code>optBlock</code> for
additional details.</p>
</td></tr>
<tr><td><code>d.eff</code></td>
<td>
<p>A list containing <code>D</code> efficiency, the variance-covariance matrix, and parameter
standard deviations from the effects-coded design. See <code>dcm.design.effcy</code> for additional details.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Federov, V.V. (1972). <em>Theory of optimal experiments.</em> Academic Press, New York.
</p>
<p>Wheeler, R.E. (2004). <em>AlgDesign.</em> The R project for statistical computing.
(http://www.r-project.org).
</p>


<h3>See Also</h3>

<p><code>dcm.design</code>, <code>optFederov</code>, <code>optBlock</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## generate full factorial candidate set
cand &lt;- gen.factorial(c(3,3,4), factors="all")

## restrict the candidate set so that level 3 in the first factor 
## cannot occur with level 1 in the second factor
remove.rows &lt;- which(cand[,1] == 3 &amp; cand[,2] == 1)
cand.restr &lt;- cand[-remove.rows,]

## generate the design from the restricted candidate set
## and check that no design rows violate the restriction
des &lt;- dcm.design.cand(cand.restr, 10, 6, 2)
which(des$levels[,4] == 3 &amp; des$levels[,5] == 1)
</code></pre>

<hr>
<h2 id='dcm.design.effcy'>INTERNAL: Calculate design efficiencies</h2><span id='topic+dcm.design.effcy'></span>

<h3>Description</h3>

<p>Internal function to calculate mathematical efficiencies of designs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcm.design.effcy(des)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dcm.design.effcy_+3A_des">des</code></td>
<td>
<p>An effects-coded design to be evaluated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calculates overall <code>D</code>-efficiency, the variance-covariance matrix,
and standard deviations for each parameter from an effects coded design.
</p>
<p>Called internally by <code>dcm.design</code> and <code>dcm.design.cand</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>D</code></td>
<td>
<p>Overall <code>D</code>-efficiency: <em>det(M)</em>^<em>(</em>-1<em>/k)</em>, where <em>det(M)</em> 
is the determinant of the dispersion matrix <em>X'X</em>, and <em>k</em> is the number of 
parameters.
</p>
</td></tr>
<tr><td><code>V</code></td>
<td>
<p>Variance-covariance matrix derived from <em>M</em>.</p>
</td></tr>
<tr><td><code>s</code></td>
<td>
<p>Parameter standard deviations: <em>sqrt(diag(V))</em>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>dcm.design</code>, <code>dcm.design.cand</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>des &lt;- dcm.design(c(3,3,4,3), 10, 8, 3)$effects$design
eff &lt;- dcm.design.effcy(des)
</code></pre>

<hr>
<h2 id='dcm.design.sort'>INTERNAL: Append other design variables</h2><span id='topic+dcm.design.sort'></span>

<h3>Description</h3>

<p>Internal function to append card, version and task variables to design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcm.design.sort(design, nb, sets, alts)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dcm.design.sort_+3A_design">design</code></td>
<td>
<p>A levels-coded design generated by either <code>dcm.design</code> or<br />
<code>dcm.design.cand</code>.</p>
</td></tr>
<tr><td><code id="dcm.design.sort_+3A_nb">nb</code></td>
<td>
<p>The number of blocks or versions in the final design.</p>
</td></tr>
<tr><td><code id="dcm.design.sort_+3A_sets">sets</code></td>
<td>
<p>The number of choice sets in <em>each version</em> of the final design.</p>
</td></tr>
<tr><td><code id="dcm.design.sort_+3A_alts">alts</code></td>
<td>
<p>The number of alternatives in each choice set.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Randomizes the order of rows within each block of the design using <code>runif</code> and appends
card, version and task variables as appropriate.
</p>
<p>This function is called internally by <code>dcm.design</code> and <code>dcm.design.cand</code>.
</p>


<h3>Value</h3>

<p>A data frame containing the levels-coded design with rows randomized within block, and with card, version 
and task variables appended. 
</p>


<h3>See Also</h3>

<p><code>dcm.design</code>, <code>dcm.design.cand</code>, <code>tradeoff.des</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## INTERNAL USE ONLY
</code></pre>

<hr>
<h2 id='optBlockC'>Optimal design blocking</h2><span id='topic+optBlockC'></span>

<h3>Description</h3>

<p>INTERNAL: Simplified wrapper for blocking of experimental designs using <code>optBlock</code> in the 
<em>AlgDesign</em> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optBlockC(withinData, blocksizes, nRepeats=5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optBlockC_+3A_withindata">withinData</code></td>
<td>
<p>A matrix or data frame describing the variables. Data types allowed include: factors, 
effects-coded designs, or dummy-coded designs. Other data types will lead to errors or unbalanced designs. 
If the columns are not named, they will be assumed to have the names X1, X2, etc. The number of rows in 
<code>withinData</code> must be at least as large as the sum of the number of terms plus the number of blocks.</p>
</td></tr>
<tr><td><code id="optBlockC_+3A_blocksizes">blocksizes</code></td>
<td>
<p>A vector giving the block sizes for each block. The length of <code>blocksizes</code> specifies 
the number of blocks.</p>
</td></tr>
<tr><td><code id="optBlockC_+3A_nrepeats">nRepeats</code></td>
<td>
<p>The number of times the entire process is repeated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Simplified wrapper for <code>optBlock</code> that optimizes blocks on a pre-existing design or a set of factors using 
the <code>D</code> criterion. Does not permit whole plot factors to interact with within plot factors. See 
<code>optBlock</code> for additional details.
</p>


<h3>Value</h3>

<table>
<tr><td><code>D</code></td>
<td>
<p><em>det(M)^(1/k)</em>, where <em>det(M)</em> is the determinant of the normalized dispersion matrix 
<em>M</em>, or <em>m=X'X/N</em>, where each row of <em>X</em> has the appropriate block mean subtracted.</p>
</td></tr>
<tr><td><code>diagonality</code></td>
<td>
<p><em>|M|/P^(1/k)</em>, where <em>P</em> is the product of the diagonal elements of 
<em>M</em>.</p>
</td></tr>
<tr><td><code>Blocks</code></td>
<td>
<p>A list of blocks, labeled B1, B2, etc.</p>
</td></tr>
<tr><td><code>design</code></td>
<td>
<p>A data frame. The design with blocks in stacked order.</p>
</td></tr>
<tr><td><code>rows</code></td>
<td>
<p>Numeric row numers of the design rows corresponding to <code>withinData</code> rows.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Wheeler, R.E. (2004). optBlock. <em>AlgDesign.</em> The R project for statistical computing.
(http://www.r-project.org).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##INTERNAL USE ONLY
</code></pre>

<hr>
<h2 id='optFederovC'>Optimal design</h2><span id='topic+optFederovC'></span>

<h3>Description</h3>

<p>INTERNAL: Simplified wrapper for calculating exact algorithmic designs using Federov's exchange
algorithm. Based on <code>optFederov</code> in the <em>AlgDesign</em> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optFederovC(modelData, nTrials, nRepeats=5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optFederovC_+3A_modeldata">modelData</code></td>
<td>
<p>The candidate list. A matrix or data frame describing the variables. If a matrix is input 
and the columns are not named, they will be assigned names X1, X2, etc. Permitted data types include 
factors or levels- or effects-coded designs.</p>
</td></tr>
<tr><td><code id="optFederovC_+3A_ntrials">nTrials</code></td>
<td>
<p>The number of trials in the final design.</p>
</td></tr>
<tr><td><code id="optFederovC_+3A_nrepeats">nRepeats</code></td>
<td>
<p>The number of times the whole process is repeated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Generates exact algorithmic designs using Federov's exchange algorithm, and optimizing the <code>D</code> criterion. 
See <code>optFederov</code> for algorithmic details. A vignette is also available by typing <code>vignette("AlgDesign").</code>
</p>
<p>Input data, i.e., <code>modelData</code>, must be of a form that <code>model.matrix(~., modelData</code> results in an 
effects-coded design or candidate set.
</p>


<h3>Value</h3>

<table>
<tr><td><code>D</code></td>
<td>
<p>The <em>k</em>th root of the generalized variance: <em>det(M)^(1/k)</em>, where <em>det(M)</em> is the 
determinant of the normalized dispersion matrix, or <em>m=Z'Z/n</em>, where <em>Z=X[rows,]</em>.</p>
</td></tr>
<tr><td><code>A</code></td>
<td>
<p>The average coefficient variance: <em>trace(M')/k</em>, where <em>M'</em> is the inverse of <em>M</em>.</p>
</td></tr>
<tr><td><code>Ge</code></td>
<td>
<p>The minimax normalized variance over <em>X</em>, expressed as an efficiency with respect to the 
optimal approximate theory design. It is defined as <em>k/max(d)</em>, where <em>max(d)</em> is the 
maximum normalized variance over <em>X</em>, or the maximum of <em>x'(M')x</em>, over all rows <em>x'</em> 
of <em>X</em>.</p>
</td></tr>
<tr><td><code>Dea</code></td>
<td>
<p>A lower bound on <code>D</code> efficiency for approximate theory designs. It is equal to 
<em>exp(1-1/Ge)</em>.</p>
</td></tr>
<tr><td><code>design</code></td>
<td>
<p>The design.</p>
</td></tr>
<tr><td><code>rows</code></td>
<td>
<p>A numerical vector of the design row numbers from <code>modelData</code>.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Wheeler, R.E. (2004). optFederov. <em>AlgDesign.</em> The R project for statistical computing.
(http://www.r-project.org).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##INTERNAL USE ONLY
</code></pre>

<hr>
<h2 id='pw.eval'>INTERNAL: Evaluate two-way frequencies</h2><span id='topic+pw.eval'></span>

<h3>Description</h3>

<p>Internal function to evaluate whether the two-way (pairwise) frequencies
of items in a matrix are balanced.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pw.eval(items, shown, drows, des)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pw.eval_+3A_items">items</code></td>
<td>
<p>The total number of items shown in a tradeoff exercise.</p>
</td></tr>
<tr><td><code id="pw.eval_+3A_shown">shown</code></td>
<td>
<p>The number of items shown in each tradeoff task.</p>
</td></tr>
<tr><td><code id="pw.eval_+3A_drows">drows</code></td>
<td>
<p>The number of rows in the tradeoff design matrix.</p>
</td></tr>
<tr><td><code id="pw.eval_+3A_des">des</code></td>
<td>
<p>A matrix consisting of the levels-coded tradeoff design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Evaluates the two-way (pairwise) frequencies of items in a tradeoff design matrix
and returns those frequencies as well as the off-diagonal mean and standard deviation of the
frequencies.
</p>
<p>This function is called internally by <code>tradeoff.des</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>tbl</code></td>
<td>
<p>A matrix of the two-way frequencies (pairs of items) in the tradeoff design.</p>
</td></tr>
<tr><td><code>od.mean</code></td>
<td>
<p>The mean of the off-diagonal elements in <code>tbl</code>.</p>
</td></tr>
<tr><td><code>od.stdv</code></td>
<td>
<p>The standard deviation of the off-diagonal elements in <code>tbl</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>tradeoff.des</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## INTERNAL USE ONLY
</code></pre>

<hr>
<h2 id='tradeoff.des'>MaxDiff and other tradeoff designs</h2><span id='topic+tradeoff.des'></span>

<h3>Description</h3>

<p>Generate a design to be used for MaxDiff and related tradeoff exercises.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tradeoff.des(items, shown, vers, tasks, fname=NULL, Rd=20, Rc=NULL, print=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tradeoff.des_+3A_items">items</code></td>
<td>
<p>The total number of items in the tradeoff exercise.</p>
</td></tr>
<tr><td><code id="tradeoff.des_+3A_shown">shown</code></td>
<td>
<p>The number of items shown in each tradeoff task.</p>
</td></tr>
<tr><td><code id="tradeoff.des_+3A_vers">vers</code></td>
<td>
<p>The number of blocks or versions in the final design.</p>
</td></tr>
<tr><td><code id="tradeoff.des_+3A_tasks">tasks</code></td>
<td>
<p>The number of tradeoff tasks in <em>each version</em> of the final design.</p>
</td></tr>
<tr><td><code id="tradeoff.des_+3A_fname">fname</code></td>
<td>
<p>A character string, usually ending in &quot;.txt&quot;, indicating the name of the file containing 
the tradeoff design.</p>
</td></tr>
<tr><td><code id="tradeoff.des_+3A_rd">Rd</code></td>
<td>
<p>The number of iterations in the design and blocking processes.</p>
</td></tr>
<tr><td><code id="tradeoff.des_+3A_rc">Rc</code></td>
<td>
<p>The number of iterations in the item by column position optimization routine.</p>
</td></tr>
<tr><td><code id="tradeoff.des_+3A_print">print</code></td>
<td>
<p>Boolean indicating whether there is output to the console during execution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Replicates the functionality of Sawtooth Software MaxDiff Designer for designing MaxDiff and
related tradeoff tasks.
</p>
<p>A modified Federov (1972) algorithm is applied to a factor equal in length to the number of items to optimize 
the BIB design at <code>vers x tasks</code> rows and <code>shown</code> columns.
</p>
<p>The optimized design is evaluated for one-way frequencies (equal representation of each item across all 
versions and column positions). Designs are also optimized for two-way or pairwise balance across all tasks. 
Column position balance is the more computationally-intensive process. The number of iterations required for
this step is determined by the <code>Rc</code> argument which defaults to the larger of 1,000 or 10 <code>x</code> the 
number of rows in the design. Large design problems may require a larger number of iterations to achieve 
optimal column position balance.
</p>
<p>Once an optimal design has been found, it is blocked into versions using <code>optBlock</code> to ensure equal
representation of items <em>within</em> each version. See Wheeler (2004) for a more complete description of the
modified Federov and blocking algorithms used in optimizing these designs.
</p>
<p>If <code>fname</code> is not <code>NULL</code> a tab-delimited plain-text file is generated in the working 
directory containing the levels-coded design.
</p>


<h3>Value</h3>

<table>
<tr><td><code>design</code></td>
<td>
<p>A matrix consisting of the optimized design and additional variables for card, version and task.</p>
</td></tr>
<tr><td><code>balance</code></td>
<td>
<p>Tables of one-way item frequencies, two-way (pairwise) item frequencies, and item frequencies by 
column position. Means and standard deviations are calculated from all elements of the one-way and column
position tables, and from the off-diagonal elements of the two-way (pairwise) table.</p>
</td></tr>
<tr><td><code>Rc.crit</code></td>
<td>
<p>The criterion that is minimized to achieve column position balance is output as a vector
(<code>crit.vec</code>) along with the number of iterations executed since the last change in this criterion 
(<code>crit.stable</code>). If <code>crit.stable</code> is large or is a large proportion of the total number of iterations 
(<code>Rc</code>), the solution is stable in terms of column position balance. If <code>crit.stable</code> is small, the 
solution is likely unstable and column position balance could be improved by increasing <code>Rc</code>. See also
<code>cp.scree</code> which produces a line plot of <code>crit.vec</code> as a function of <code>Rc</code>. </p>
</td></tr>
<tr><td><code>time.elapsed</code></td>
<td>
<p>The time required for the function to execute.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Federov, V.V. (1972). <em>Theory of optimal experiments.</em> Academic Press, New York.
</p>
<p>Wheeler, R.E. (2004). <em>AlgDesign.</em> The R project for statistical computing.
(http://www.r-project.org).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example 1:
## typical MaxDiff design with 12 items
des &lt;- tradeoff.des(12, 4, 10, 9)

## Example 2:
## typical paired comparisons design with 14 items
des &lt;- tradeoff.des(14, 2, 6, 14)
</code></pre>

<hr>
<h2 id='write.tab'>INTERNAL: Write a data frame as tab-delimited file</h2><span id='topic+write.tab'></span>

<h3>Description</h3>

<p>Internal function that acts as an alias to <code>write.table</code>, appending extra
arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.tab(x, f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write.tab_+3A_x">x</code></td>
<td>
<p>A data frame object in <code>R</code>.</p>
</td></tr>
<tr><td><code id="write.tab_+3A_f">f</code></td>
<td>
<p>A character string, usually ending in &quot;*.txt&quot;, indicating the name of the file to
be generated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Writes a data frame to the file indicated by <code>f</code>, using <code>write.table</code>
and appending the following arguments: <code>row.names=FALSE</code>, <code>col.names=TRUE</code>,
<code>quote=FALSE</code>, and <code>sep="\t"</code>.
</p>
<p>Called internally by <code>dcm.design</code>, <code>dcm.design.cand</code>, and
<code>tradeoff.des</code>.
</p>


<h3>Value</h3>

<p>Does not return any value.
</p>


<h3>See Also</h3>

<p><code>dcm.design</code>, <code>dcm.design.cand</code>, <code>tradeoff.des</code></p>


<h3>Examples</h3>

<pre><code class='language-R'>## INTERNAL USE ONLY
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
