<!DOCTYPE html><html><head><title>Help for package multipanelfigure</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {multipanelfigure}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>magrittr forward-pipe operator</p></a></li>
<li><a href='#%&lt;&gt;%'><p>magrittr compound assignment pipe operator</p></a></li>
<li><a href='#assert_is_multipanelfigure'><p>Check that the input is a multipanelfigure</p></a></li>
<li><a href='#billing2016_suppfig4e'><p>Mass spectrometry intensities by stem cell type and organelle</p></a></li>
<li><a href='#billing2016_suppfig4g'><p>Mass spectrometry intensities by stem cell type</p></a></li>
<li><a href='#capture_base_plot'><p>Capture a base plot</p></a></li>
<li><a href='#fill_panel'><p>fill_panel</p></a></li>
<li><a href='#grob_dimensions'><p>Convenient Access to <code>grob</code> Dimensions</p></a></li>
<li><a href='#images'><p>Images</p></a></li>
<li><a href='#multi_panel_figure'><p>multi_panel_figure</p></a></li>
<li><a href='#multipanelfigure-deprecated'><p>Superceded objects in multipanelfigure</p></a></li>
<li><a href='#print.multipanelfigure'><p>Print a multi-panel figure</p></a></li>
<li><a href='#save_multi_panel_figure'><p>save_multi_panel_figure</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Infrastructure to Assemble Multi-Panel Figures (from Grobs)</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-11-26</td>
</tr>
<tr>
<td>Author:</td>
<td>Johannes Graumann [cre, aut],
  Richard Cotton [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Johannes Graumann &lt;johannes.graumann@uni-marburg.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools to create a layout for figures made of multiple panels, and
    to fill the panels with base, 'lattice', 'ggplot2' and 'ComplexHeatmap'
    plots, grobs, as well as content from all image formats supported by
    'ImageMagick' (accessed through 'magick').</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertive.base (&ge; 0.0-7), assertive.files (&ge; 0.0-2),
assertive.numbers (&ge; 0.0-2), ggplot2 (&ge; 2.2.1), grid,
gridGraphics (&ge; 0.3-0), gtable (&ge; 0.2.0), magick (&ge; 1.9),
magrittr (&ge; 1.5), stats, stringi (&ge; 1.2.3), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ComplexHeatmap (&ge; 1.17.1), grDevices, lattice (&ge; 0.20-35),
roxygen2 (&ge; 6.0.1), VennDiagram (&ge; 1.6.20), knitr, rmarkdown,
markdown</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-26 21:17:27 UTC; rstudio</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-27 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>magrittr forward-pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code><a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code>.
</p>

<hr>
<h2 id='+25+26lt+3B+26gt+3B+25'>magrittr compound assignment pipe operator</h2><span id='topic++25+3C+3E+25'></span>

<h3>Description</h3>

<p>See <code><a href="magrittr.html#topic++25+3C+3E+25">%&lt;&gt;%</a></code>.
</p>

<hr>
<h2 id='assert_is_multipanelfigure'>Check that the input is a multipanelfigure</h2><span id='topic+assert_is_multipanelfigure'></span>

<h3>Description</h3>

<p>Checks that the input is of class <code>multipanelfigure</code> and has the
appropriate attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_is_multipanelfigure(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="assert_is_multipanelfigure_+3A_x">x</code></td>
<td>
<p>Object to check.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>

<hr>
<h2 id='billing2016_suppfig4e'>Mass spectrometry intensities by stem cell type and organelle</h2><span id='topic+billing2016_suppfig4e'></span>

<h3>Description</h3>

<p>This data was used to create Supplementary Figure 4e of Billing 2016 (see
references).
</p>


<h3>Format</h3>

<p>A data frame with 81 rows and the following columns:
</p>

<dl>
<dt>GeneName</dt><dd><p>A factor with three levels naming genes that have interesting
properties.</p>
</dd>
<dt>Intensity</dt><dd><p>A numeric vector of positive intensities of proteins
corresponding to the genes as determined by mass spectrometry.</p>
</dd>
<dt>StemCellType</dt><dd><p>A factor with three levels indicating the type of stem
cell experimented on. &quot;ESC&quot; means embryonic stem cell; &quot;ESC-MSC&quot; means
mesenchymal stem cell derived from an embryonic stem cell; &quot;BM-MSC&quot; means
mesenchymal stem cell derived from bone marrow.</p>
</dd>
<dt>Organelle</dt><dd><p>The region of the cell experimented on. &quot;CH&quot; means
chromatin, &quot;Cyt&quot; means cytosol, &quot;Nuc&quot; means nucleus.</p>
</dd>
<dt>Replicate</dt><dd><p>An integer specifying the experimental replicate.</p>
</dd>
<dt>Experiment</dt><dd><p>The interaction of StemCellType, Organelle and Replicate.</p>
</dd>
</dl>



<h3>Details</h3>

<p>A data frame of genes corresponding to protein intensities as measured by
mass spectrometry proteomics experiments on embryonic and mesenchymal stem
cells.
</p>


<h3>References</h3>

<p>Billing AM, Ben Hamidane H, Dib SS, et al. Comprehensive transcriptomic and
proteomic characterization of human mesenchymal stem cells reveals source
specific cellular markers. Scientific Reports. 2016;6:21507.
doi:10.1038/srep21507.
</p>
<p>Article text available at:
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666</a>
</p>
<p>Supplementary figures available at:
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666/bin/srep21507-s1.pdf">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666/bin/srep21507-s1.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+billing2016_suppfig4g">billing2016_suppfig4g</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ggplot2::ggplot(billing2016_suppfig4e, ggplot2::aes(Experiment, Intensity)) +
  ggplot2::geom_bar(stat = "identity") +
  ggplot2::geom_vline(xintercept = seq(3.5, 24.5, 3), linetype = "dotted") +
  ggplot2::facet_wrap(~ GeneName) +
  ggplot2::xlab(NULL) +
  ggplot2::theme(axis.text.x = ggplot2::element_text(angle = 45, hjust = 1, size = 4))
</code></pre>

<hr>
<h2 id='billing2016_suppfig4g'>Mass spectrometry intensities by stem cell type</h2><span id='topic+billing2016_suppfig4g'></span>

<h3>Description</h3>

<p>This data was used to create Supplementary Figure 4g of Billing 2016 (see
references).
</p>


<h3>Format</h3>

<p>A matrix with 13 rows and 9 columns.  Rows represent genes, columns
represent experiments and are split by:
</p>

<ol>
<li><p>The type of stem cell experimented on. &quot;ESC&quot; means embryonic stem cell;
&quot;ESC-MSC&quot; means mesenchymal stem cell derived from an embryonic stem cell;
&quot;BM-MSC&quot; means mesenchymal stem cell derived from bone marrow.
</p>
</li>
<li><p>The experimental replicate.
</p>
</li></ol>

<p>Values in the matrix are intensities of proteins coresponding to the genes,
as measured by mass spectrometry.
</p>


<h3>Details</h3>

<p>A matrix of log base 10 protein intensities as measured by mass spectrometry
proteomics experiments on embryonic and mesenchymal stem cells.
</p>


<h3>References</h3>

<p>Billing AM, Ben Hamidane H, Dib SS, et al. Comprehensive transcriptomic and
proteomic characterization of human mesenchymal stem cells reveals source
specific cellular markers. Scientific Reports. 2016;6:21507.
doi:10.1038/srep21507.
</p>
<p>Article text available at:
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666</a>
</p>
<p>Supplementary figures available at:
<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666/bin/srep21507-s1.pdf">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4746666/bin/srep21507-s1.pdf</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+billing2016_suppfig4e">billing2016_suppfig4e</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>color_scale &lt;- grDevices::cm.colors(25)
heatmap(
  billing2016_suppfig4g,
  margins = c(12, 5), col = color_scale,
  cexRow = 0.5, cexCol = 0.4)
</code></pre>

<hr>
<h2 id='capture_base_plot'>Capture a base plot</h2><span id='topic+capture_base_plot'></span><span id='topic+capturebaseplot'></span>

<h3>Description</h3>

<p>Capture a plot drawn using base graphics as a grid <code>grob</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>capture_base_plot(expr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="capture_base_plot_+3A_expr">expr</code></td>
<td>
<p>A expression that draws a plot using base graphics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>gTree</code>.
</p>


<h3>Note</h3>

<p>A side effect of this function is that plots get drawn twice: once as
a base plot, and secondly as a grid plot.
</p>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>


<h3>See Also</h3>

<p><code><a href="gridGraphics.html#topic+grid.echo">grid.echo</a></code>, <code><a href="grid.html#topic+grid.grab">grid.grab</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- capture_base_plot(hist(rnorm(1000), seq(-4, 4, 0.2)))
grid::grid.draw(p)
# If the plot takes multiple lines to draw, then wrap the code in braces.
p2 &lt;- capture_base_plot({
  par(las = 1)
  plot(1:5)
  title("One to five")
})
grid::grid.draw(p2)
</code></pre>

<hr>
<h2 id='fill_panel'>fill_panel</h2><span id='topic+fill_panel'></span><span id='topic+addPanel'></span><span id='topic+addpanel'></span><span id='topic+add_panel'></span>

<h3>Description</h3>

<p>A convenience function adding graphical objects to a
<code><a href="gtable.html#topic+gtable">gtable</a></code> constructed by <code><a href="#topic+multi_panel_figure">multi_panel_figure</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_panel(
  figure,
  panel,
  row = "auto",
  column = "auto",
  label = NULL,
  label_just = c("right", "bottom"),
  panel_clip = c("on", "off", "inherit"),
  scaling = c("none", "stretch", "fit", "shrink"),
  allow_panel_overwriting = FALSE,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fill_panel_+3A_figure">figure</code></td>
<td>
<p>Object of classes <code>multipanelfigure</code>/
<code><a href="gtable.html#topic+gtable">gtable</a></code> as produced by <code><a href="#topic+multi_panel_figure">multi_panel_figure</a></code>
and representing the figure the panel is to be placed in.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_panel">panel</code></td>
<td>
<p>Single <code><a href="base.html#topic+character">character</a></code> object representing URL or path to a
bitmap image accessible by <code>ImageMagick</code> as used through
<code><a href="magick.html#topic+magick">magick</a></code>, a <code><a href="ComplexHeatmap.html#topic+Heatmap">Heatmap</a></code> or
<code><a href="ComplexHeatmap.html#topic+HeatmapList">HeatmapList</a></code> object, a
<code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> object , a
<code><a href="lattice.html#topic+trellis.object">trellis.object</a></code>, a <code><a href="grid.html#topic+gList">gList</a></code> object or
a <code><a href="grid.html#topic+grob">grob</a></code> object to be placed in a multipanel figure. See
'Details'.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_row">row</code></td>
<td>
<p><code><a href="base.html#topic+numeric">numeric</a></code> object of length 1 or a range, indicating the row
indeces the panel that is to be placed in the figure, or &quot;auto&quot; to
automatically pick the row (see details). May be used to define  panel
spanning (if <code>length(row) &gt; 1</code>; see examples).</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_column">column</code></td>
<td>
<p><code><a href="base.html#topic+numeric">numeric</a></code> object of length 1 or a range, indicating the
column indeces of the panel that is to be placed in the figure, or &quot;auto&quot; to
automatically pick the column (see details). May be used to define  panel
spanning (if <code>length(column) &gt; 1</code>; see examples).</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_label">label</code></td>
<td>
<p>Single <code><a href="base.html#topic+character">character</a></code> object defining the panel
label used for automated annotation.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_label_just">label_just</code></td>
<td>
<p>Justification for the label within the interpanel spacing
grob to the top-left of the panel content grob.  Passed to
<code><a href="grid.html#topic+textGrob">textGrob</a></code>.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_panel_clip">panel_clip</code></td>
<td>
<p>Should the display of panel contents be clipped at the
panel borders?  See <code><a href="grid.html#topic+viewport">viewport</a></code>.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_scaling">scaling</code></td>
<td>
<p>Only used when importing image files. Either &quot;none&quot; to
preserve the dimensions of an image, &quot;stretch&quot; to make it fit the panels,
&quot;fit&quot; to shrink or enlarge it so that it fills one dimension of the panels
while preserving the height to width ratio, or &quot;shrink which does the same
but won't enlarge it.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_allow_panel_overwriting">allow_panel_overwriting</code></td>
<td>
<p>A logical value. If <code>TRUE</code>, overwriting
panels is allowed, with a warning.  Otherwise (the default) it will cause an
error.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_verbose">verbose</code></td>
<td>
<p>A logical value. Reduces verbosity if <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="fill_panel_+3A_...">...</code></td>
<td>
<p>Additional arguments. Used to deal with deprecated arguments
<code>top_panel</code>, <code>bottom_panel</code>, <code>left_panel</code> and <code>right_panel</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently supported as panel-representing objects (<code>panel</code>) are
</p>

<ol>
<li><p>ComplexHeatmap <code><a href="ComplexHeatmap.html#topic+Heatmap">Heatmap</a></code> or
<code><a href="ComplexHeatmap.html#topic+HeatmapList">HeatmapList</a></code> objects.
</p>
</li>
<li><p>ggplot2 <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> objects.
</p>
</li>
<li><p>grid <code><a href="grid.html#topic+grob">grob</a></code>, <code><a href="grid.html#topic+gList">gList</a></code>, and
<code><a href="grid.html#topic+gTree">gTree</a></code> objects.
</p>
</li>
<li><p>lattice <code><a href="lattice.html#topic+trellis.object">trellis.object</a></code>s.
</p>
</li>
<li><p>Single <code><a href="base.html#topic+character">character</a></code> objects representing URLs or paths to
image formats accessible by <code>ImageMagick</code> as used through
<code><a href="magick.html#topic+magick">magick</a></code>, which will be read and placed into panels
as requested.</p>
</li></ol>

<p>Native resolution is determined from attributes in the file.  If the attributes are
not present, then the DPI is determined by the the
<code>multipanelfigure.defaultdpi</code> global option, or 300 if this has not been
set.
</p>
<p><span class="pkg">lattice</span>-generated <code><a href="lattice.html#topic+trellis.object">trellis.object</a></code>s are converted
to <code>grob</code>s using <code>grid.grabExpr(print(x))</code>, as are <code>Heatmap</code>
and <code>HeatmapList</code>s from <span class="pkg">ComplexHeatmap</span> - the side effects of
which with respect to plot formatting are not well studied.
</p>
<p>If the <code>row</code> argument is &quot;auto&quot;, then the first row with
a free panel is used.
If the <code>column</code> argument is &quot;auto&quot;, then the first column in the
row with a free panel is used.
</p>


<h3>Value</h3>

<p>Returns the <code><a href="gtable.html#topic+gtable">gtable</a></code> object fed to it
(<code>figure</code>) with the addition of the <code>panel</code>.
</p>


<h3>Author(s)</h3>

<p>Johannes Graumann, Richard Cotton
</p>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>


<h3>See Also</h3>

<p><code><a href="gtable.html#topic+gtable">gtable</a></code>, <code><a href="#topic+multi_panel_figure">multi_panel_figure</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # Not testing - slow grid graphics makes CRAN timing excessive
# Create the figure layout
(figure &lt;- multi_panel_figure(
  width = c(30,40,60),
  height = c(40,60,60,60),
  panel_label_type = "upper-roman"))

# Fill the top-left panel using a grob object directly
a_grob &lt;- grid::linesGrob(arrow = grid::arrow())
figure %&lt;&gt;% fill_panel(a_grob)

# Add a ggplot object directly to the top row, second column.
# The panels are chosen automatically, but you can achieve the same effect
# using column = 2
a_ggplot &lt;- ggplot2::ggplot(mtcars, ggplot2::aes(disp, mpg)) +
  ggplot2::geom_point()
figure %&lt;&gt;% fill_panel(a_ggplot)

# Bitmap images are added by passing the path to their file.
image_files &lt;- system.file("extdata", package = "multipanelfigure") %&gt;%
  dir(full.names = TRUE) %&gt;%
  setNames(basename(.))

# Add the JPEG to the top row, third column
figure %&lt;&gt;% fill_panel(image_files["rhino.jpg"], column = 3)

# Add the PNG to the second and third row, first and second column
figure %&lt;&gt;% fill_panel(
  image_files["Rlogo.png"],
  row = 2:3, column = 1:2)

# Add the TIFF to the second row, third column
figure %&lt;&gt;% fill_panel(
  image_files["unicorn.svg"],
  row = 2, column = 3)

# lattice/trellis plot objects are also added directly
Depth &lt;- lattice::equal.count(quakes$depth, number=4, overlap=0.1)
a_lattice_plot &lt;- lattice::xyplot(lat ~ long | Depth, data = quakes)
# Add the lattice plot to the third row, third column
figure %&lt;&gt;% fill_panel(
  a_lattice_plot,
  row = 3, column = 3)

# Incorporate a gList object (such as produced by VennDigram)
if(requireNamespace("VennDiagram"))
{
  a_venn_plot &lt;- VennDiagram::draw.pairwise.venn(50, 30, 20, ind = FALSE)
  # Add the Venn diagram to the fourth row, firstd column
  figure %&lt;&gt;% fill_panel(
    a_venn_plot,
    row = 4, column = 1)
}

# Incorporate a base plot figure
a_base_plot &lt;- capture_base_plot(
 heatmap(
   cor(USJudgeRatings), Rowv = FALSE, symm = TRUE, col = topo.colors(16),
   distfun = function(c) as.dist(1 - c), keep.dendro = TRUE,
   cexRow = 0.5, cexCol = 0.5))
# Add the heatmap to the fourth row, second column
figure %&lt;&gt;% fill_panel(
  a_base_plot,
  row = 4, column = 2)

# Incorporate a ComplexHeatmap figure
require(ComplexHeatmap)
mat = matrix(rnorm(80, 2), 8, 10)
mat = rbind(mat, matrix(rnorm(40, -2), 4, 10))
rownames(mat) = letters[1:12]
colnames(mat) = letters[1:10]
ht = Heatmap(mat)
a_complex_heatmap &lt;- ht + ht + ht
# Add the ComplexHeatmap to the fourth row, third column
(figure %&lt;&gt;% fill_panel(
  a_complex_heatmap,
  row = 4, column = 3))

</code></pre>

<hr>
<h2 id='grob_dimensions'>Convenient Access to <code>grob</code> Dimensions</h2><span id='topic+grob_dimensions'></span><span id='topic+figure_width'></span><span id='topic+simplegrobheight'></span><span id='topic+simplegrobwidth'></span><span id='topic+simple_grob_height'></span><span id='topic+simple_grob_width'></span><span id='topic+figure_height'></span>

<h3>Description</h3>

<p>Convenience functions extracting dimensions from
<code><a href="grid.html#topic+grob">grob</a></code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>figure_width(grob, unit_to = "mm")
figure_height(grob, unit_to = "mm")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grob_dimensions_+3A_grob">grob</code></td>
<td>
<p>A <code><a href="grid.html#topic+grob">grob</a></code> object for which dimensions are to be
retrieved.</p>
</td></tr>
<tr><td><code id="grob_dimensions_+3A_unit_to">unit_to</code></td>
<td>
<p>A single <code><a href="base.html#topic+character">character</a></code> string representing a valid
<span class="pkg">grid</span>-<code><a href="grid.html#topic+unit">unit</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Single <code><a href="base.html#topic+numeric">numeric</a></code> objects are returned.
</p>


<h3>Author(s)</h3>

<p>Johannes Graumann
</p>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>


<h3>See Also</h3>

<p><code><a href="#topic+multi_panel_figure">multi_panel_figure</a></code>, <code><a href="#topic+save_multi_panel_figure">save_multi_panel_figure</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get dimensions of a grid grob
a_circle &lt;- grid::circleGrob(x = 15, y = 30, r = 15, default.unit = "mm")
figure_height(a_circle)
figure_width(a_circle)

# Use the unit_to arg to convert units
figure_height(a_circle, unit_to = "in")
figure_width(a_circle, unit_to = "cm")

# Get dimensions of a multi-panel figure
figure &lt;- multi_panel_figure(width = 55, height = 55, rows = 2, columns = 2)
figure_height(figure)
figure_width(figure)

# ggsave defaults to measuring dimensions in inches
width &lt;- figure_width(figure, unit_to = "in")
height &lt;- figure_height(figure, unit_to = "in")
tmp_file &lt;- tempfile(fileext = ".png")
ggplot2::ggsave(
  tmp_file, gtable::gtable_show_layout(figure),
  width = width, height = height
)
 # Not testing due to use of external software
utils::browseURL(tmp_file)

</code></pre>

<hr>
<h2 id='images'>Images</h2><span id='topic+images'></span><span id='topic+rhino'></span><span id='topic+unicorn'></span>

<h3>Description</h3>

<p>A TIFF photograph of Farouq the cat in a washing machine. CC-BY-SA 4.0
Richard Cotton, 2014.
</p>


<h3>Format</h3>

<p>An image file.
</p>


<h3>Details</h3>

<p>A JPEG photograph of a greater one-horned rhinoceros (Rhinoceros unicornis)
taken in Kaziranga National Park, Assam, India. CC-BY-SA 4.0 Janette Cotton,
2016.
</p>
<p>An SVG picture of a fat, pink winged unicorn. CC-BY-SA 4.0 Sara Lendal, 2016.
</p>
<p>A PNG of the R logo. CC-BY-SA 4.0 The R Foundation, 2016.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  figure &lt;- multi_panel_figure(
    width = c(60, 40, 40), height = c(40, 40, 40)
  )
  image_files &lt;- system.file("extdata", package = "multipanelfigure") %&gt;%
    dir(full.names = TRUE) %&gt;%
    setNames(basename(.))
  figure %&gt;%
    fill_panel(image_files["farouq.tiff"]) %&gt;%
    fill_panel(image_files["unicorn.svg"], column = 2:3) %&gt;%
    fill_panel(image_files["rhino.jpg"], row = 2:3) %&gt;%
    fill_panel(image_files["Rlogo.png"], column = 2:3, row = 2:3)

## End(Not run)
</code></pre>

<hr>
<h2 id='multi_panel_figure'>multi_panel_figure</h2><span id='topic+multi_panel_figure'></span><span id='topic+multipanelfigure'></span>

<h3>Description</h3>

<p>A convenience function building <code><a href="gtable.html#topic+gtable">gtable</a></code>-based
infrastructure for the assembly of multipanel figures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_panel_figure(
  width = "auto",
  columns = NULL,
  height = "auto",
  rows = NULL,
  row_spacing = NaN,
  column_spacing = NaN,
  unit = "mm",
  figure_name = "FigureX",
  panel_label_type = c("upper-alpha", "lower-alpha", "decimal", "upper-roman",
    "lower-roman", "upper-greek", "lower-greek", "none"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multi_panel_figure_+3A_width">width</code></td>
<td>
<p><code><a href="base.html#topic+numeric">numeric</a></code> or <code>link[grid]{unit}</code> defining the
width(s) of the resulting <code><a href="gtable.html#topic+gtable">gtable</a></code> if
<code>length(width) == 1</code> or individual column widths. Units depends on
<code>unit</code> if not provided as <code><a href="grid.html#topic+unit">unit</a></code> object. The default
'<code>auto</code>' sets the parameter to the width of the currently used device.
See 'Details' for dependent and interfering parameters.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_columns">columns</code></td>
<td>
<p>Single <code><a href="base.html#topic+numeric">numeric</a></code> defining the number of columns in
the resulting <code><a href="gtable.html#topic+gtable">gtable</a></code>. See 'Details' for dependent and
interfering parameters.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_height">height</code></td>
<td>
<p><code><a href="base.html#topic+numeric">numeric</a></code> or <code>link[grid]{unit}</code> defining the
height of the resulting <code><a href="gtable.html#topic+gtable">gtable</a></code> if
<code>length(height) == 1</code> or individual row heights.nits depends on
<code>unit</code> if not provided as <code><a href="grid.html#topic+unit">unit</a></code> object. The default
'<code>auto</code>' sets the parameter to the height of the currently used device.
See 'Details' for dependent and interfering parameters.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_rows">rows</code></td>
<td>
<p>Single <code><a href="base.html#topic+numeric">numeric</a></code> defining the number of rows in
the resulting <code><a href="gtable.html#topic+gtable">gtable</a></code>. See 'Details' for dependent and
interfering parameters.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_row_spacing">row_spacing</code></td>
<td>
<p><code><a href="base.html#topic+numeric">numeric</a></code> or #' <code><a href="grid.html#topic+unit">unit</a></code>
defining the amount of white space automatically inserted between row panels.
Defaults to <code>5 mm</code> unless explicitly given, in which case the value may
depend on the <code>unit</code> parameter. Recycled to the number of rows.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_column_spacing">column_spacing</code></td>
<td>
<p><code><a href="base.html#topic+numeric">numeric</a></code> or <code><a href="grid.html#topic+unit">unit</a></code>
defining the amount of white space automatically inserted between column
panels. Defaults to <code>5 mm</code> unless explicitly given, in which case the
value may depends on the <code>unit</code> parameter. Recycled to the number of
columns.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_unit">unit</code></td>
<td>
<p>Single <code><a href="base.html#topic+character">character</a></code> object defining the unit of all
dimensions defined. Must satisfy <code>grid:::valid.units</code>.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_figure_name">figure_name</code></td>
<td>
<p>Single <code><a href="base.html#topic+character">character</a></code> object defining the name of
the resulting <code><a href="gtable.html#topic+gtable">gtable</a></code>.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_panel_label_type">panel_label_type</code></td>
<td>
<p>A string specifying the marker style for the panel labels
used for automated annotation.  Defaults to uppercase Latin letters.</p>
</td></tr>
<tr><td><code id="multi_panel_figure_+3A_...">...</code></td>
<td>
<p>Argument to accomodate deprecated arguments <code>widths</code> and
<code>heights</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code><a href="gtable.html#topic+gtable">gtable</a></code> may be constructed in two ways:
</p>

<ol>
<li><p>Based on explicit width/height definitions for individual panels.
</p>
</li>
<li><p>Based on total figure/<code><a href="gtable.html#topic+gtable">gtable</a></code> dimensions given by
<code>width</code> and <code>height</code> together with the number of <code>columns</code>
and <code>rows</code> requested.</p>
</li></ol>

<p>The function automatically inserts whitespace of width
<code>column_spacing</code> before column panels (and of height
<code>row_spacing</code> before row panels), which has to be considered
for the total dimensions of the resulting <code><a href="gtable.html#topic+gtable">gtable</a></code>. Width
of the <code><a href="gtable.html#topic+gtable">gtable</a></code> in the former case, for example may be
calculated
</p>
<p style="text-align: center;"><code class="reqn">W[total] = sum(width) + length(width) * column_spacing</code>
</p>

<p>while width of resulting panels in the latter table construction approach may
be calculated
</p>
<p style="text-align: center;"><code class="reqn">W[panel] = (width - columns * column_spacing) / columns</code>
</p>

<p><code>width</code>, <code>height</code>, <code>column_spacing</code> and
<code>row_spacing</code> may be defined numerically or as
<code><a href="grid.html#topic+unit">unit</a></code> objects.
</p>
<p>Earlier implementations used parameters <code>widhts</code> and <code>heights</code> as
synonyms for <code>width</code> and <code>height</code> with length greater than one.
These parameters have been deprecated. They continue to work, but produce
a warning.
</p>
<p>The two approaches to <code><a href="gtable.html#topic+gtable">gtable</a></code> construction require
interdepending parameter sets:
</p>

<dl>
<dt>Individual definition of panel dimensions:</dt><dd><p>Requires <code>width</code> and
<code>height</code> of lengths corresponding to the number of columns/rows
requested. Excludes the use of <code>columns</code> and <code>rows</code>.</p>
</dd>
<dt>Definition of global <code><a href="gtable.html#topic+gtable">gtable</a></code>/figure dimensions:</dt><dd>
<p>Requires <code>width</code>, <code>columns</code>, <code>height</code> and <code>rows</code> of
length 1.</p>
</dd></dl>



<h3>Value</h3>

<p>Returns an object of class <code>multipanelfigure</code> as well as
<code><a href="gtable.html#topic+gtable">gtable</a></code> object with the following additional attributes:
</p>

<dl>
<dt><code>multipanelfigure.panelsFree</code>:</dt><dd><p>A <code><a href="base.html#topic+logical">logical</a></code>
<code><a href="base.html#topic+matrix">matrix</a></code> with the dimensions of the <code><a href="gtable.html#topic+gtable">gtable</a></code>
indicating occupancy of the panels in the table.</p>
</dd>
<dt><code>multipanelfigure.panellabelsfree</code>:</dt><dd><p>A <code><a href="base.html#topic+character">character</a></code>
<code><a href="base.html#topic+vector">vector</a></code> indicative of the <code>panel_labels</code> still available.</p>
</dd>
<dt><code>multipanelfigure.unit</code>:</dt><dd><p>A single <code><a href="base.html#topic+character">character</a></code>
object storing the corresponding value given during object creation.</p>
</dd></dl>



<h3>Author(s)</h3>

<p>Johannes Graumann
</p>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fill_panel">fill_panel</a></code> for more examples of filling panels
<code><a href="#topic+figure_width">figure_width</a></code> for inspecting figure dimensions
<code><a href="#topic+capture_base_plot">capture_base_plot</a></code> for including plots created using base graphics
<code><a href="gtable.html#topic+gtable">gtable</a></code> for the underlying structure of a figure
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Figure construction based on the dimensions of the current device
figure1 &lt;- multi_panel_figure(
   columns = 2,
   rows = 2,
   figure_name = "figure1")

# With no panels, printing shows the layout
figure1

# Figure construction based on overall dimensions
figure2 &lt;- multi_panel_figure(
   width = 100,
   columns = 4,
   height = 90,
   rows = 6,
   figure_name = "figure2")

# Still no panels ...
figure2

# Figure construction based on individual panel dimensions
(figure3 &lt;- multi_panel_figure(
   width = c(40,30),
   height = c(40,60),
   row_spacing = c(5, 1),
   column_spacing = c(0, 10),
   figure_name = "figure3"))

# A more involved example including filling and printing to device ...
# Make a simple ggplot object to fill panels
ggp &lt;- ggplot2::ggplot(mtcars, ggplot2::aes(wt, mpg)) +
  ggplot2::geom_point()
# Fill panels
# ggplots and lattice plot objects are added directly
# The default position is the top-left panel
figure3 &lt;- fill_panel(figure3, ggp)
# Raster images are added by passing the path to their file
jpg &lt;- system.file("extdata/rhino.jpg", package = "multipanelfigure")
figure3 &lt;- fill_panel(figure3, jpg, column = 2)
# Plots can take up multiple panels
figure3 &lt;- fill_panel(figure3, ggp, row = 2, column = 1:2)
# Plot to appropriately sized png device
tmpFile &lt;- tempfile(fileext = ".png")
ggplot2::ggsave(
  tmpFile, figure3,
  width = figure_width(figure3, "in"),
  height = figure_height(figure3, "in"))
message(
  paste0("Now have a look at '",tmpFile,"' - nicely sized PNG output."))
\donttest{ # Not testing due to use of external software
utils::browseURL(tmpFile)
}

## End(Not run)
</code></pre>

<hr>
<h2 id='multipanelfigure-deprecated'>Superceded objects in multipanelfigure</h2><span id='topic+multipanelfigure-deprecated'></span>

<h3>Description</h3>

<p>Functions that are no longer used or have been superceded by
functions with underscore-separated names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addPanel( figure, ... )

capturebaseplot( ... )

multipanelfigure( ... )

simplegrobheight( ... )

simplegrobwidth( ... )
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multipanelfigure-deprecated_+3A_figure">figure</code></td>
<td>
<p>Object of classes <code>multipanelfigure</code>/<code><a href="gtable.html#topic+gtable">gtable</a></code>
as produced by <code><a href="#topic+multi_panel_figure">multi_panel_figure</a></code> and representing the figure the
panel is to be placed in.</p>
</td></tr>
<tr><td><code id="multipanelfigure-deprecated_+3A_...">...</code></td>
<td>
<p>Arguments to functions you shouldn't use.</p>
</td></tr>
</table>

<hr>
<h2 id='print.multipanelfigure'>Print a multi-panel figure</h2><span id='topic+print.multipanelfigure'></span>

<h3>Description</h3>

<p>Prints and object of class <code>multipanelfigure</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'multipanelfigure'
print(x, newpage = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.multipanelfigure_+3A_x">x</code></td>
<td>
<p>An object of class <code>multipanelfigure</code>.</p>
</td></tr>
<tr><td><code id="print.multipanelfigure_+3A_newpage">newpage</code></td>
<td>
<p>Logical. If <code>TRUE</code>, a new device page is opened before
drawing.</p>
</td></tr>
<tr><td><code id="print.multipanelfigure_+3A_...">...</code></td>
<td>
<p>Passed from other print methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input <code>x</code> is invisibly returned, but the method is mostly
invoked for the side effect of printing the plot to the current device.
</p>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- lattice::xyplot(dist ~ speed, cars)
figure &lt;- multi_panel_figure(
  width = 100, height = 100,
  rows = 1, columns = 1
)
# With no panels, printing shows the layout
print(figure)
figure &lt;- fill_panel(figure, p)
# After a panel is added, printing shows the plot.
print(figure) # shows plot
</code></pre>

<hr>
<h2 id='save_multi_panel_figure'>save_multi_panel_figure</h2><span id='topic+save_multi_panel_figure'></span>

<h3>Description</h3>

<p>A convenience function wrapping <code><a href="ggplot2.html#topic+ggsave">ggsave</a></code>
from <span class="pkg">ggplot2</span> for easy saving of <code><a href="gtable.html#topic+gtable">gtable</a></code> objects
constructed by <code><a href="#topic+multi_panel_figure">multi_panel_figure</a></code> taking into account the
table's dimensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_multi_panel_figure(figure, filename, dpi = 300, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_multi_panel_figure_+3A_figure">figure</code></td>
<td>
<p>Object of classes <code>multipanelfigure</code>/
<code><a href="gtable.html#topic+gtable">gtable</a></code> as produced by <code><a href="#topic+multi_panel_figure">multi_panel_figure</a></code>.</p>
</td></tr>
<tr><td><code id="save_multi_panel_figure_+3A_filename">filename</code></td>
<td>
<p>Single <code><a href="base.html#topic+character">character</a></code> object representing file
name/path to create on disk.</p>
</td></tr>
<tr><td><code id="save_multi_panel_figure_+3A_dpi">dpi</code></td>
<td>
<p>Single <code><a href="base.html#topic+numeric">numeric</a></code> indicating the plot resolution.
Applies only to raster output types.</p>
</td></tr>
<tr><td><code id="save_multi_panel_figure_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="ggplot2.html#topic+ggsave">ggsave</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot dimensions are determined using
<code><a href="#topic+figure_height">figure_height</a></code> and <code><a href="#topic+figure_width">figure_width</a></code>.
</p>
<p>The Device type to use is guessed from the <code>filename</code> extension.
Currently supported are &quot;eps&quot;, &quot;ps&quot;, &quot;tex&quot; (pictex), &quot;pdf&quot;, &quot;jpeg&quot;, &quot;tiff&quot;,
&quot;png&quot;, &quot;bmp&quot;, &quot;svg&quot; or &quot;wmf&quot; (windows only).
</p>


<h3>Author(s)</h3>

<p>Johannes Graumann
</p>


<h3>References</h3>

<p>Graumann, J., and Cotton, R.J. (2018). multipanelfigure: Simple
Assembly of Multiple Plots and Images into a Compound Figure. Journal of
Statistical Software 84. doi: 10.18637/jss.v084.c03
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+ggsave">ggsave</a></code>, <code><a href="#topic+figure_width">figure_width</a></code>,
<code><a href="#topic+figure_height">figure_height</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create the figure layout
(figure &lt;- multi_panel_figure(
  width = c(30,40,60),
  height = c(40,60,60,60),
  panel_label_type = "upper-roman"))

# Fill the top-left panel using a grob object directly
a_grob &lt;- grid::linesGrob(arrow = grid::arrow())
figure %&lt;&gt;% fill_panel(a_grob)

## Not run: 
# Save the figure
figure %&gt;%
  save_multi_panel_figure(
    filename = paste0(
    tempfile(),
    ".png"))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
