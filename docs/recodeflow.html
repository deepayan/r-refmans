<!DOCTYPE html><html><head><title>Help for package recodeflow</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {recodeflow}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_data_field_children_for_start_var'><p>Add DataField child nodes for start variable.</p></a></li>
<li><a href='#attach_apply_nodes'><p>Attach Apply nodes to a parent node.</p></a></li>
<li><a href='#attach_cat_value_nodes_for_start_var'><p>Attach categorical value nodes to DataField node for start variable.</p></a></li>
<li><a href='#attach_cont_value_nodes_for_start_var'><p>Attach continuous Value nodes for start variable.</p></a></li>
<li><a href='#attach_derived_field_child_nodes'><p>Attach child nodes to DerivedField node.</p></a></li>
<li><a href='#attach_range_value_nodes'><p>Attach Value nodes to DataField node. Used when 'recFrom' has a value range.</p></a></li>
<li><a href='#build_data_field_for_start_var'><p>Build DataField node for start variable.</p></a></li>
<li><a href='#build_data_field_for_var'><p>Build DataField node for variable.</p></a></li>
<li><a href='#build_derived_field_node'><p>Build DerivedField node.</p></a></li>
<li><a href='#build_derived_field_value_node'><p>Build Value node for DerivedField node.</p></a></li>
<li><a href='#build_missing_const_node'><p>Build Constant node for a missing value for a variable.</p></a></li>
<li><a href='#build_numeric_derived_field_apply_node'><p>Build Apply node with singleton numeric for DerivedField node.</p></a></li>
<li><a href='#build_ranged_derived_field_apply_node'><p>Build Apply node with interval nodes for DerivedField node.</p></a></li>
<li><a href='#build_trans_dict'><p>Build a TransformationDictionary node.</p></a></li>
<li><a href='#build_variable_field_ref_node'><p>Build FieldRef node for variable.</p></a></li>
<li><a href='#compare_value_based_on_interval'><p>Compare Value Based On Interval</p></a></li>
<li><a href='#create_id_row'><p>ID role creation</p></a></li>
<li><a href='#create_label_list_element'><p>Create label list element</p></a></li>
<li><a href='#example_der_fun'><p>example_der_fun caluclates chol*bili</p></a></li>
<li><a href='#format_recoded_value'><p>Recode NA formatting</p></a></li>
<li><a href='#get_data_variable_name'><p>Get Data Variable Name</p></a></li>
<li><a href='#get_margin_closure'><p>Get closure type for a margin.</p></a></li>
<li><a href='#get_margins'><p>Extract margins from character vector.</p></a></li>
<li><a href='#get_start_var_name'><p>Get variable name from variableStart using database name.</p></a></li>
<li><a href='#get_var_details_row_indices'><p>Get all variable details row indices for a variable.</p></a></li>
<li><a href='#get_var_details_rows'><p>Get all variable details rows for a variable and database combination.</p></a></li>
<li><a href='#get_var_sheet_row'><p>Get variable row from variable sheet.</p></a></li>
<li><a href='#get_variable_type_data_type'><p>Get data type for variable type.</p></a></li>
<li><a href='#is_equal'><p>Checks whether two values are equal including NA</p></a></li>
<li><a href='#is_left_open'><p>Extract margins from character vector.</p></a></li>
<li><a href='#is_numeric'><p>Check if a character object can be converted to a number.</p></a></li>
<li><a href='#is_rec_from_range'><p>Check if recFrom is a range for a variable details row.</p></a></li>
<li><a href='#is_right_open'><p>Extract margins from character vector.</p></a></li>
<li><a href='#label_data'><p>label_data</p></a></li>
<li><a href='#rec_with_table'><p>Recode with Table</p></a></li>
<li><a href='#recode_columns'><p>recode_columns</p></a></li>
<li><a href='#recode_to_pmml'><p>Creates a PMML document from variable and variable details sheets for specified database.</p></a></li>
<li><a href='#select_vars_by_role'><p>Vars selected by role</p></a></li>
<li><a href='#set_data_labels'><p>Set Data Labels</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Interface Functions for PMML Creation, and Data Recoding</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rostyslav Vyuha &lt;rvyuha@toh.ca&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains functions to interface with variables and variable details sheets, including recoding variables and converting them to PMML.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>XML (&ge; 3.98-1.11), sjlabelled, stringr, tidyr, haven, dplyr,
magrittr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Big-Life-Lab/recodeflow">https://github.com/Big-Life-Lab/recodeflow</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Big-Life-Lab/recodeflow/issues">https://github.com/Big-Life-Lab/recodeflow/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.1.0), survival</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-08 12:36:36 UTC; Rusty</td>
</tr>
<tr>
<td>Author:</td>
<td>Yulric Sequeira [aut],
  Luke Bailey [aut],
  Rostyslav Vyuha [aut, cre],
  The Ottawa Hospital [cph],
  Doug Manuel <a href="https://orcid.org/0000-0003-0912-0845"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-09 07:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_data_field_children_for_start_var'>Add DataField child nodes for start variable.</h2><span id='topic+add_data_field_children_for_start_var'></span>

<h3>Description</h3>

<p>Add DataField child nodes for start variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_data_field_children_for_start_var(data_field, var_details_rows)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_data_field_children_for_start_var_+3A_data_field">data_field</code></td>
<td>
<p>DataField node to attach child nodes.</p>
</td></tr>
<tr><td><code id="add_data_field_children_for_start_var_+3A_var_details_rows">var_details_rows</code></td>
<td>
<p>Variable details rows associated with current variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated DataField node.
</p>

<hr>
<h2 id='attach_apply_nodes'>Attach Apply nodes to a parent node.</h2><span id='topic+attach_apply_nodes'></span>

<h3>Description</h3>

<p>Attach Apply nodes to a parent node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attach_apply_nodes(var_details_rows, parent_node, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attach_apply_nodes_+3A_var_details_rows">var_details_rows</code></td>
<td>
<p>Variable details rows associated with a variable.</p>
</td></tr>
<tr><td><code id="attach_apply_nodes_+3A_parent_node">parent_node</code></td>
<td>
<p>An XML node.</p>
</td></tr>
<tr><td><code id="attach_apply_nodes_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated parent node.
</p>

<hr>
<h2 id='attach_cat_value_nodes_for_start_var'>Attach categorical value nodes to DataField node for start variable.</h2><span id='topic+attach_cat_value_nodes_for_start_var'></span>

<h3>Description</h3>

<p>Attach categorical value nodes to DataField node for start variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attach_cat_value_nodes_for_start_var(var_details_row, data_field)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attach_cat_value_nodes_for_start_var_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
<tr><td><code id="attach_cat_value_nodes_for_start_var_+3A_data_field">data_field</code></td>
<td>
<p>DataField node to attach Value nodes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated DataField node.
</p>

<hr>
<h2 id='attach_cont_value_nodes_for_start_var'>Attach continuous Value nodes for start variable.</h2><span id='topic+attach_cont_value_nodes_for_start_var'></span>

<h3>Description</h3>

<p>Attach continuous Value nodes for start variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attach_cont_value_nodes_for_start_var(var_details_row, data_field)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attach_cont_value_nodes_for_start_var_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
<tr><td><code id="attach_cont_value_nodes_for_start_var_+3A_data_field">data_field</code></td>
<td>
<p>DataField node to attach Value nodes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated DataField node.
</p>

<hr>
<h2 id='attach_derived_field_child_nodes'>Attach child nodes to DerivedField node.</h2><span id='topic+attach_derived_field_child_nodes'></span>

<h3>Description</h3>

<p>Attach child nodes to DerivedField node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attach_derived_field_child_nodes(
  derived_field_node,
  var_details_sheet,
  var_name,
  db_name
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attach_derived_field_child_nodes_+3A_derived_field_node">derived_field_node</code></td>
<td>
<p>DerivedField node to attach child nodes.</p>
</td></tr>
<tr><td><code id="attach_derived_field_child_nodes_+3A_var_details_sheet">var_details_sheet</code></td>
<td>
<p>Variable details sheet data frame.</p>
</td></tr>
<tr><td><code id="attach_derived_field_child_nodes_+3A_var_name">var_name</code></td>
<td>
<p>Variable name.</p>
</td></tr>
<tr><td><code id="attach_derived_field_child_nodes_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated DerivedField node.
</p>

<hr>
<h2 id='attach_range_value_nodes'>Attach Value nodes to DataField node. Used when 'recFrom' has a value range.</h2><span id='topic+attach_range_value_nodes'></span>

<h3>Description</h3>

<p>Attach Value nodes to DataField node. Used when 'recFrom' has a value range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>attach_range_value_nodes(var_details_row, data_field)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="attach_range_value_nodes_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
<tr><td><code id="attach_range_value_nodes_+3A_data_field">data_field</code></td>
<td>
<p>DataField node to attach Value nodes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Updated DataField node.
</p>

<hr>
<h2 id='build_data_field_for_start_var'>Build DataField node for start variable.</h2><span id='topic+build_data_field_for_start_var'></span>

<h3>Description</h3>

<p>Build DataField node for start variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_data_field_for_start_var(var_name, var_details_rows)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_data_field_for_start_var_+3A_var_name">var_name</code></td>
<td>
<p>Variable name.</p>
</td></tr>
<tr><td><code id="build_data_field_for_start_var_+3A_var_details_rows">var_details_rows</code></td>
<td>
<p>All variable details rows for the 'var_name' variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>DataField node with optype and dataType according to 'fromType'.
</p>

<hr>
<h2 id='build_data_field_for_var'>Build DataField node for variable.</h2><span id='topic+build_data_field_for_var'></span>

<h3>Description</h3>

<p>Build DataField node for variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_data_field_for_var(var_name, vars_sheet)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_data_field_for_var_+3A_var_name">var_name</code></td>
<td>
<p>Variable name.</p>
</td></tr>
<tr><td><code id="build_data_field_for_var_+3A_vars_sheet">vars_sheet</code></td>
<td>
<p>Variable sheet data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>DataField node for variable.
</p>

<hr>
<h2 id='build_derived_field_node'>Build DerivedField node.</h2><span id='topic+build_derived_field_node'></span>

<h3>Description</h3>

<p>Build DerivedField node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_derived_field_node(vars_sheet, var_details_sheet, var_name, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_derived_field_node_+3A_vars_sheet">vars_sheet</code></td>
<td>
<p>Variables sheet data frame.</p>
</td></tr>
<tr><td><code id="build_derived_field_node_+3A_var_details_sheet">var_details_sheet</code></td>
<td>
<p>Variable details sheet data frame.</p>
</td></tr>
<tr><td><code id="build_derived_field_node_+3A_var_name">var_name</code></td>
<td>
<p>Variable name.</p>
</td></tr>
<tr><td><code id="build_derived_field_node_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>DerivedField node.
</p>

<hr>
<h2 id='build_derived_field_value_node'>Build Value node for DerivedField node.</h2><span id='topic+build_derived_field_value_node'></span>

<h3>Description</h3>

<p>Build Value node for DerivedField node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_derived_field_value_node(var_details_row)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_derived_field_value_node_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Value node.
</p>

<hr>
<h2 id='build_missing_const_node'>Build Constant node for a missing value for a variable.</h2><span id='topic+build_missing_const_node'></span>

<h3>Description</h3>

<p>Build Constant node for a missing value for a variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_missing_const_node(var_details_row)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_missing_const_node_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Constant node.
</p>

<hr>
<h2 id='build_numeric_derived_field_apply_node'>Build Apply node with singleton numeric for DerivedField node.</h2><span id='topic+build_numeric_derived_field_apply_node'></span>

<h3>Description</h3>

<p>Build Apply node with singleton numeric for DerivedField node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_numeric_derived_field_apply_node(var_details_row, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_numeric_derived_field_apply_node_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
<tr><td><code id="build_numeric_derived_field_apply_node_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Apply node for DerivedField node.
</p>

<hr>
<h2 id='build_ranged_derived_field_apply_node'>Build Apply node with interval nodes for DerivedField node.</h2><span id='topic+build_ranged_derived_field_apply_node'></span>

<h3>Description</h3>

<p>Build Apply node with interval nodes for DerivedField node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_ranged_derived_field_apply_node(var_details_row, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_ranged_derived_field_apply_node_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
<tr><td><code id="build_ranged_derived_field_apply_node_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Apply node with intervals for DerivedField node.
</p>

<hr>
<h2 id='build_trans_dict'>Build a TransformationDictionary node.</h2><span id='topic+build_trans_dict'></span>

<h3>Description</h3>

<p>Build a TransformationDictionary node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_trans_dict(vars_sheet, var_details_sheet, var_names, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_trans_dict_+3A_vars_sheet">vars_sheet</code></td>
<td>
<p>Variable sheet data frame.</p>
</td></tr>
<tr><td><code id="build_trans_dict_+3A_var_details_sheet">var_details_sheet</code></td>
<td>
<p>Variable details sheet data frame.</p>
</td></tr>
<tr><td><code id="build_trans_dict_+3A_var_names">var_names</code></td>
<td>
<p>Vector of variable names.</p>
</td></tr>
<tr><td><code id="build_trans_dict_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TransformationDictionary node.
</p>

<hr>
<h2 id='build_variable_field_ref_node'>Build FieldRef node for variable.</h2><span id='topic+build_variable_field_ref_node'></span>

<h3>Description</h3>

<p>Build FieldRef node for variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_variable_field_ref_node(var_details_row, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_variable_field_ref_node_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
<tr><td><code id="build_variable_field_ref_node_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>FieldRef node.
</p>

<hr>
<h2 id='compare_value_based_on_interval'>Compare Value Based On Interval</h2><span id='topic+compare_value_based_on_interval'></span>

<h3>Description</h3>

<p>Compare values on the scientific notation interval
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_value_based_on_interval(
  left_boundary,
  right_boundary,
  data,
  compare_columns,
  interval
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_value_based_on_interval_+3A_left_boundary">left_boundary</code></td>
<td>
<p>the min value</p>
</td></tr>
<tr><td><code id="compare_value_based_on_interval_+3A_right_boundary">right_boundary</code></td>
<td>
<p>the max value</p>
</td></tr>
<tr><td><code id="compare_value_based_on_interval_+3A_data">data</code></td>
<td>
<p>the data that contains values being compared</p>
</td></tr>
<tr><td><code id="compare_value_based_on_interval_+3A_compare_columns">compare_columns</code></td>
<td>
<p>The columns inside data being checked</p>
</td></tr>
<tr><td><code id="compare_value_based_on_interval_+3A_interval">interval</code></td>
<td>
<p>The scientific notation interval</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a boolean vector containing true for rows where the
comparison is true
</p>

<hr>
<h2 id='create_id_row'>ID role creation</h2><span id='topic+create_id_row'></span>

<h3>Description</h3>

<p>Creates ID row for rec_with_table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_id_row(data, id_role_name, database_name, variables)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_id_row_+3A_data">data</code></td>
<td>
<p>the data that the ID role row is created for</p>
</td></tr>
<tr><td><code id="create_id_row_+3A_id_role_name">id_role_name</code></td>
<td>
<p>name for the role that ID is created from</p>
</td></tr>
<tr><td><code id="create_id_row_+3A_database_name">database_name</code></td>
<td>
<p>the name of the database</p>
</td></tr>
<tr><td><code id="create_id_row_+3A_variables">variables</code></td>
<td>
<p>variables sheet containing variable information</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data with the ID row attached
</p>

<hr>
<h2 id='create_label_list_element'>Create label list element</h2><span id='topic+create_label_list_element'></span>

<h3>Description</h3>

<p>A data labeling utility function for creating individual variable labels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_label_list_element(variable_rows)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_label_list_element_+3A_variable_rows">variable_rows</code></td>
<td>
<p>all variable details rows containing 1 variable information</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list containing labels for the passed variable
</p>

<hr>
<h2 id='example_der_fun'>example_der_fun caluclates chol*bili</h2><span id='topic+example_der_fun'></span>

<h3>Description</h3>

<p>example_der_fun caluclates chol*bili
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_der_fun(chol, bili)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="example_der_fun_+3A_chol">chol</code></td>
<td>
<p>the row value for chol</p>
</td></tr>
<tr><td><code id="example_der_fun_+3A_bili">bili</code></td>
<td>
<p>the row value for bili</p>
</td></tr>
</table>

<hr>
<h2 id='format_recoded_value'>Recode NA formatting</h2><span id='topic+format_recoded_value'></span>

<h3>Description</h3>

<p>Recodes the NA depending on the var type
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_recoded_value(cell_value, var_type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_recoded_value_+3A_cell_value">cell_value</code></td>
<td>
<p>The value inside the recTo column</p>
</td></tr>
<tr><td><code id="format_recoded_value_+3A_var_type">var_type</code></td>
<td>
<p>the toType of a variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an appropriately coded tagged NA
</p>

<hr>
<h2 id='get_data_variable_name'>Get Data Variable Name</h2><span id='topic+get_data_variable_name'></span>

<h3>Description</h3>

<p>Retrieves the name of the column inside data to
use for calculations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_data_variable_name(
  data_name,
  data,
  row_being_checked,
  variable_being_checked
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_data_variable_name_+3A_data_name">data_name</code></td>
<td>
<p>name of the database being checked</p>
</td></tr>
<tr><td><code id="get_data_variable_name_+3A_data">data</code></td>
<td>
<p>database being checked</p>
</td></tr>
<tr><td><code id="get_data_variable_name_+3A_row_being_checked">row_being_checked</code></td>
<td>
<p>the row from variable details that contains
information on this variable</p>
</td></tr>
<tr><td><code id="get_data_variable_name_+3A_variable_being_checked">variable_being_checked</code></td>
<td>
<p>the name of the recoded variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the data equivalent of variable_being_checked
</p>

<hr>
<h2 id='get_margin_closure'>Get closure type for a margin.</h2><span id='topic+get_margin_closure'></span>

<h3>Description</h3>

<p>Get closure type for a margin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_margin_closure(chars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_margin_closure_+3A_chars">chars</code></td>
<td>
<p>Character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Closure type.
</p>

<hr>
<h2 id='get_margins'>Extract margins from character vector.</h2><span id='topic+get_margins'></span>

<h3>Description</h3>

<p>Extract margins from character vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_margins(chars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_margins_+3A_chars">chars</code></td>
<td>
<p>Character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Margins as character vector.
</p>

<hr>
<h2 id='get_start_var_name'>Get variable name from variableStart using database name.</h2><span id='topic+get_start_var_name'></span>

<h3>Description</h3>

<p>Get variable name from variableStart using database name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_start_var_name(var_details_row, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_start_var_name_+3A_var_details_row">var_details_row</code></td>
<td>
<p>A variable details row.</p>
</td></tr>
<tr><td><code id="get_start_var_name_+3A_db_name">db_name</code></td>
<td>
<p>Name of database to extract from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character The name of the start variable.
</p>

<hr>
<h2 id='get_var_details_row_indices'>Get all variable details row indices for a variable.</h2><span id='topic+get_var_details_row_indices'></span>

<h3>Description</h3>

<p>Get all variable details row indices for a variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_var_details_row_indices(var_details_sheet, var_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_var_details_row_indices_+3A_var_details_sheet">var_details_sheet</code></td>
<td>
<p>A data frame representing a variable details sheet.</p>
</td></tr>
<tr><td><code id="get_var_details_row_indices_+3A_var_name">var_name</code></td>
<td>
<p>Variable name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All variable details row indices for a variable.
</p>

<hr>
<h2 id='get_var_details_rows'>Get all variable details rows for a variable and database combination.</h2><span id='topic+get_var_details_rows'></span>

<h3>Description</h3>

<p>Get all variable details rows for a variable and database combination.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_var_details_rows(var_details_sheet, var_name, db_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_var_details_rows_+3A_var_details_sheet">var_details_sheet</code></td>
<td>
<p>A data frame representing a variable details sheet.</p>
</td></tr>
<tr><td><code id="get_var_details_rows_+3A_var_name">var_name</code></td>
<td>
<p>Variable name.</p>
</td></tr>
<tr><td><code id="get_var_details_rows_+3A_db_name">db_name</code></td>
<td>
<p>Database name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All variable details rows for the variable and database combination.
</p>

<hr>
<h2 id='get_var_sheet_row'>Get variable row from variable sheet.</h2><span id='topic+get_var_sheet_row'></span>

<h3>Description</h3>

<p>Get variable row from variable sheet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_var_sheet_row(var_name, vars_sheet)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_var_sheet_row_+3A_var_name">var_name</code></td>
<td>
<p>Variable name.</p>
</td></tr>
<tr><td><code id="get_var_sheet_row_+3A_vars_sheet">vars_sheet</code></td>
<td>
<p>Variable sheet data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Variable row.
</p>

<hr>
<h2 id='get_variable_type_data_type'>Get data type for variable type.</h2><span id='topic+get_variable_type_data_type'></span>

<h3>Description</h3>

<p>Get data type for variable type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_variable_type_data_type(var_details_rows, var_type, is_start_var)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_variable_type_data_type_+3A_var_details_rows">var_details_rows</code></td>
<td>
<p>All variable details rows for the variable.</p>
</td></tr>
<tr><td><code id="get_variable_type_data_type_+3A_var_type">var_type</code></td>
<td>
<p>Variable type</p>
</td></tr>
<tr><td><code id="get_variable_type_data_type_+3A_is_start_var">is_start_var</code></td>
<td>
<p>boolean if the passed variable is variable start</p>
</td></tr>
</table>


<h3>Value</h3>

<p>'var_type' data type.
</p>

<hr>
<h2 id='is_equal'>Checks whether two values are equal including NA</h2><span id='topic+is_equal'></span>

<h3>Description</h3>

<p>Compared to the base &quot;==&quot; operator in R, this function returns
true if the two values are NA
whereas the base &quot;==&quot; operator returns NA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_equal(v1, v2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_equal_+3A_v1">v1</code></td>
<td>
<p>variable 1</p>
</td></tr>
<tr><td><code id="is_equal_+3A_v2">v2</code></td>
<td>
<p>variable 2</p>
</td></tr>
</table>


<h3>Value</h3>

<p>boolean value of whether or not v1 and v2 are equal
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_equal(1,2)
# FALSE

is_equal(1,1)
# TRUE

1==NA
# NA

is_equal(1,NA)
# FALSE

NA==NA
# NA

is_equal(NA,NA)
# TRUE
</code></pre>

<hr>
<h2 id='is_left_open'>Extract margins from character vector.</h2><span id='topic+is_left_open'></span>

<h3>Description</h3>

<p>Extract margins from character vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_left_open(chars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_left_open_+3A_chars">chars</code></td>
<td>
<p>Character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Whether the left endpoint of an interval is open.
</p>

<hr>
<h2 id='is_numeric'>Check if a character object can be converted to a number.</h2><span id='topic+is_numeric'></span>

<h3>Description</h3>

<p>Check if a character object can be converted to a number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_numeric(chars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_numeric_+3A_chars">chars</code></td>
<td>
<p>Character object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Whether 'chars' can be converted to a numeric value.
</p>

<hr>
<h2 id='is_rec_from_range'>Check if recFrom is a range for a variable details row.</h2><span id='topic+is_rec_from_range'></span>

<h3>Description</h3>

<p>Check if recFrom is a range for a variable details row.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_rec_from_range(var_details_row)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_rec_from_range_+3A_var_details_row">var_details_row</code></td>
<td>
<p>Variable details sheet row.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Whether recFrom is a range.
</p>

<hr>
<h2 id='is_right_open'>Extract margins from character vector.</h2><span id='topic+is_right_open'></span>

<h3>Description</h3>

<p>Extract margins from character vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_right_open(chars)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_right_open_+3A_chars">chars</code></td>
<td>
<p>Character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Whether the right endpoint of an interval is open.
</p>

<hr>
<h2 id='label_data'>label_data</h2><span id='topic+label_data'></span>

<h3>Description</h3>

<p>Attaches labels to the data_to_label to preserve metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_data(label_list, data_to_label)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_data_+3A_label_list">label_list</code></td>
<td>
<p>the label list object that contains extracted labels
from variable details</p>
</td></tr>
<tr><td><code id="label_data_+3A_data_to_label">data_to_label</code></td>
<td>
<p>The data that is to be labeled</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns labeled data
</p>

<hr>
<h2 id='rec_with_table'>Recode with Table</h2><span id='topic+rec_with_table'></span>

<h3>Description</h3>

<p>Creates new variables by recoding variables in a dataset using the rules
specified in a variables details sheet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rec_with_table(
  data,
  variables = NULL,
  database_name = NULL,
  variable_details = NULL,
  else_value = NA,
  append_to_data = FALSE,
  log = FALSE,
  notes = TRUE,
  var_labels = NULL,
  custom_function_path = NULL,
  attach_data_name = FALSE,
  id_role_name = NULL,
  name_of_environment_to_load = NULL,
  append_non_db_columns = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rec_with_table_+3A_data">data</code></td>
<td>
<p>A dataframe containing the variables to be recoded.
Can also be a named list of dataframes.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_variables">variables</code></td>
<td>
<p>Character vector containing the names of the new variables
to recode to or a dataframe containing a variables sheet.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_database_name">database_name</code></td>
<td>
<p>A String containing the name of the database containing
the original variables which should match up with a database from the
databaseStart column in the variables details sheet. Should be a character
vector if data is a named list where each vector item matches a name in the
data list and also matches with a value in the databaseStart column of a
variable details sheet.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_variable_details">variable_details</code></td>
<td>
<p>A dataframe containing the specifications
for recoding.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_else_value">else_value</code></td>
<td>
<p>Value (string, number, integer, logical or NA) that is used
to replace any values that are outside the specified ranges
(no rules for recoding).</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_append_to_data">append_to_data</code></td>
<td>
<p>Logical, if <code>TRUE</code> (default), the newly
created variables will be appended to the original dataset.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_log">log</code></td>
<td>
<p>Logical, if <code>FALSE</code> (default), a log containing information
about the recoding will not be printed.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_notes">notes</code></td>
<td>
<p>Logical, if <code>FALSE</code> (default), will not print the
content inside the 'Note&ldquo; column of the variable being recoded.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_var_labels">var_labels</code></td>
<td>
<p>labels vector to attach to variables in variables</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_custom_function_path">custom_function_path</code></td>
<td>
<p>string containing the path to the file
containing functions to run for derived variables. This file will be sourced
and its functions loaded into the R environment.</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_attach_data_name">attach_data_name</code></td>
<td>
<p>logical to attach name of database to end table</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_id_role_name">id_role_name</code></td>
<td>
<p>name for the role to be used to generate id column</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_name_of_environment_to_load">name_of_environment_to_load</code></td>
<td>
<p>Name of package to load variables and
variable_details from</p>
</td></tr>
<tr><td><code id="rec_with_table_+3A_append_non_db_columns">append_non_db_columns</code></td>
<td>
<p>boolean determening if data not present in
this cycle should be appended as NA</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <a href="https://github.com/Big-Life-Lab/recodeflow/blob/master/inst/extdata/PBC-variableDetails.csv">variable_details</a>
dataframe needs the following columns:
</p>

<dl>
<dt>variable</dt><dd><p>Name of the new variable created. The name of the new
variable can be the same as the original variable if it does not change
the original variable definition</p>
</dd>
<dt>toType</dt><dd><p>type the new variable
<em>cat = categorical, cont = continuous</em></p>
</dd>
<dt>databaseStart</dt><dd><p>Names of the databases that the original variable can
come from. Each database name should be seperated by a comma. For eg.,
&quot;cchs2001_p, cchs2003_p,cchs2005_p,cchs2007_p&quot;</p>
</dd>
<dt>variableStart</dt><dd><p>Names of the original variables within each database
specified in the databaseStart column. For eg. ,
&quot;cchs2001_p::RACA_6A,cchs2003_p::RACC_6A,ADL_01&quot;. The final variable
specified is the name of the variable for all other databases specified in
databaseStart but not in this column. For eg., ADL_01 would be the original
variable name in the cchs2005_p and cchs2007_p databases.</p>
</dd>
<dt>fromType</dt><dd><p>variable type of start variable.
<em>cat = categorical or factor variable</em>
<em>cont = continuous variable (real number or integer)</em></p>
</dd>
<dt>recTo</dt><dd><p>Value to recode to</p>
</dd>
<dt>recFrom</dt><dd><p>Value/range being recoded from</p>
</dd>
</dl>

<p>Each row in the <em>variables details</em> sheet encodes the rule for recoding
value(s) of the original variable to a category in the new variable. The
categories of the new variable are encoded in the <em>recTo</em> column
and the value(s) of the original variable that recode to this new value
are encoded in the <em>recFrom</em> column. These recode columns follow a
syntax similar to the <em>sjmisc::rec()</em> function. Whereas in the
<em>sjmisc::rec()</em> function the recoding rules are in one string,
in the variables details sheet they are encoded over multiple rows and
columns (recFrom an recTo). For eg., a recoding rule in the sjmisc function
would like like &quot;1=2;2=3&quot; whereas in the variables details sheet this would
be encoded over two rows with recFrom and recTo values of the first row
being 1 and 2 and similarly for the second row it would be 2 and 3.
The rules for describing recoding pairs are shown below:
</p>

<dl>
<dt>recode pairs</dt><dd><p>Each recode pair is a row</p>
</dd>
<dt>multiple values</dt><dd><p>Multiple values from the old variable that should
be recoded into a new category of the new variable should be separated
with a comma. e.g.,
<em>recFrom = &quot;1,2&quot;; recTo = 1</em></p>
</dd></dl>
<p> will recode values of 1 and 2 in the
original variable to 1 in the new variable
</p>
<dl>
<dt>value range</dt><dd><p>A value range is indicated by a colon, e.g.
<em>recFrom= &quot;1:4&quot;; recTo = 1</em> will recode all values from 1to4 into 1</p>
</dd>
<dt><em>min</em> and <em>max</em></dt><dd><p>minimum and maximum values
are indicated by <em>min</em> (or <em>lo</em>) and <em>max</em> (or <em>hi</em>),
e.g. <em>recFrom = &quot;min:4&quot;; recTo = 1</em> will recode all values from the
minimum value of the original variable to 4 into 1</p>
</dd>
<dt><em>&quot;else&quot;</em></dt><dd><p>All other values, which have not been specified yet,
are indicated by <em>else</em>, e.g. <em>recFrom = &quot;else&quot;; recTo = NA</em>
will recode all other values (not specified in other rows) of the
original variable to &quot;NA&quot;)</p>
</dd>
<dt><em>&quot;copy&quot;</em></dt><dd><p>the <em>else</em> token can be combined with
<em>copy</em>, indicating that all remaining, not yet recoded values should
stay the same (are copied from the original value), e.g.
<em>recFrom = &quot;else&quot;; recTo = &quot;copy&quot;</em></p>
</dd>
<dt><em>NA</em>'s</dt><dd><p><em>NA</em> values are allowed both for the original
and the new variable, e.g.
<em>recFrom &quot;NA&quot;; recTo = 1. or &quot;recFrom = &quot;3:5&quot;; recTo = &quot;NA&quot;</em>
(recodes all NA into 1,
and all values from 3 to 5 into NA in the new variable)</p>
</dd>
</dl>



<h3>Value</h3>

<p>a dataframe that is recoded according to rules in variable_details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>var_details &lt;-
  data.frame(
    "variable" = c("time", rep("status", times = 3), rep("trt", times = 2),
    "age", rep("sex", times = 2), rep("ascites", times = 2),
    rep("hepato", times = 2), rep("spiders", times = 2),
    rep("edema", times = 3),
    "bili", "chol", "albumin", "copper", "alk.phos", "ast",
    "trig", "platelet", "protime", rep("stage", times = 4)),
    "dummyVariable" = c("NA", "status0", "status1","status2", "trt1","trt2"
    ,"NA","sexM","sexF", "ascites0", "ascites1","hepato0","hepato1","
    spiders0","spiders1","edema0.0","edema0.5","edema1.0",
    rep("NA",times = 9), "stage1", "stage2","stage3","stage4"),
    "toType" = c("cont", rep("cat", times = 3), rep("cat", times = 2),
    "cont", rep("cat", times = 2), rep("cat", times = 2),
    rep("cat", times = 2),rep("cat", times = 2), rep("cat", times = 3),
    rep("cont", times = 9), rep("cat", times = 4)),
    "databaseStart" = rep("tester1, tester2", times = 31),
    "variableStart" = c("[time]", rep("[status]", times = 3), rep("[trt]",
    times = 2), "[age]", rep("[sex]", times = 2), rep("[ascites]",
    times = 2), rep("[hepato]", times = 2), rep("[spiders]", times = 2),
    rep("[edema]", times = 3), "[bili]", "[chol]", "[albumin]", "[copper]",
    "[alk.phos]", "[ast]", "[trig]", "[platelet]", "[protime]",
    rep("[stage]", times = 4)), "fromType" = c("cont", rep("cat", times = 3),
    rep("cat", times = 2), "cont", rep("cat", times = 2),
    rep("cat", times = 2), rep("cat", times = 2),rep("cat", times = 2),
    rep("cat", times = 3), rep("cont", times = 9), rep("cat", times = 4)),
    "recTo" = c("copy", "0", "1","2", "1","2","copy","m","f", "0", "1","0",
    "1","0","1","0.0","0.5","1.0",rep("copy",times = 9), "1", "2","3","4"),
    "catLabel" = c("", "status 0", "status 1","status 2", "trt 1","trt 2","",
    "sex m","sex f", "ascites 0", "ascites 1","hepato 0","hepato 1",
    "spiders 0","spiders 1","edema 0.0","edema 0.5","edema 1.0",
    rep("",times = 9), "stage 1", "stage 2","stage 3","stage 4"),
    "catLabelLong" = c("", "status 0", "status 1","status 2", "trt 1",
    "trt 2","","sex m","sex f", "ascites 0", "ascites 1","hepato 0","
    hepato 1","spiders 0","spiders 1","edema 0.0","edema 0.5","edema 1.0",
    rep("",times = 9), "stage 1", "stage 2","stage 3","stage 4"),
    "recFrom" = c("else", "0", "1","2", "1","2","else","m","f", "0", "1","0",
    "1","0","1","0.0","0.5","1.0",rep("else",times = 9), "1", "2","3","4"),
    "catStartLabel" = c("", "status 0", "status 1","status 2", "trt 1",
    "trt 2","","sex m","sex f", "ascites 0", "ascites 1","hepato 0",
    "hepato 1","spiders 0","spiders 1","edema 0.0","edema 0.5","edema 1.0",
    rep("",times = 9), "stage 1", "stage 2","stage 3","stage 4"),
    "variableStartShortLabel" = c("time", rep("status", times = 3),
    rep("trt", times = 2), "age", rep("sex", times = 2),
    rep("ascites", times = 2), rep("hepato", times = 2),
    rep("spiders", times = 2), rep("edema", times = 3), "bili", "chol",
    "albumin", "copper", "alk.phos", "ast", "trig", "platelet", "protime",
    rep("stage", times = 4)),
    "variableStartLabel" = c("time", rep("status", times = 3),
    rep("trt", times = 2), "age", rep("sex", times = 2),
    rep("ascites", times = 2), rep("hepato", times = 2),
    rep("spiders", times = 2), rep("edema", times = 3), "bili", "chol",
    "albumin", "copper", "alk.phos", "ast", "trig", "platelet", "protime",
    rep("stage", times = 4)),
    "units" = rep("NA", times = 31),
    "notes" = rep("This is sample survival pbc data", times = 31)
  )
var_sheet &lt;-
  data.frame(
    "variable" = c("time","status","trt", "age","sex","ascites","hepato",
    "spiders", "edema", "bili", "chol", "albumin", "copper", "alk.phos",
    "ast", "trig", "platelet", "protime", "stage"),
    "label" = c("time","status","trt", "age","sex","ascites","hepato",
    "spiders", "edema", "bili", "chol", "albumin", "copper", "alk.phos",
    "ast", "trig", "platelet", "protime", "stage"),
    "labelLong" = c("time","status","trt", "age","sex","ascites","hepato",
    "spiders", "edema", "bili", "chol", "albumin", "copper", "alk.phos",
    "ast", "trig", "platelet", "protime", "stage"),
    "section" = rep("tester", times=19),
    "subject" = rep("tester",times = 19),
    "variableType" = c("cont", "cat", "cat", "cont","cat", "cat", "cat",
    "cat", "cat", rep("cont", times = 9), "cat"),
    "databaseStart" = rep("tester1, tester2", times = 19),
    "units" = rep("NA", times = 19),
    "variableStart" = c("[time]","[status]", "[trt]", "[age]", "[sex]",
    "[ascites]","[hepato]","[spiders]","[edema]", "[bili]", "[chol]",
    "[albumin]", "[copper]", "[alk.phos]", "[ast]", "[trig]", "[platelet]",
    "[protime]","[stage]")
  )
library(survival)
tester1 &lt;- survival::pbc[1:209,]
tester2 &lt;- survival::pbc[210:418,]
db_name1 &lt;- "tester1"
db_name2 &lt;- "tester2"

rec_sample1 &lt;- rec_with_table(data = tester1,
variables = var_sheet,
variable_details = var_details,
database_name = db_name1)

rec_sample2 &lt;- rec_with_table(data = tester2,
variables = var_sheet,
variable_details = var_details,
database_name = db_name2)

</code></pre>

<hr>
<h2 id='recode_columns'>recode_columns</h2><span id='topic+recode_columns'></span>

<h3>Description</h3>

<p>Recodes columns from passed row and returns just table with those columns
and same rows as the data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recode_columns(
  data,
  variables_details_rows_to_process,
  data_name,
  log,
  print_note,
  else_default
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recode_columns_+3A_data">data</code></td>
<td>
<p>The source database</p>
</td></tr>
<tr><td><code id="recode_columns_+3A_variables_details_rows_to_process">variables_details_rows_to_process</code></td>
<td>
<p>rows from variable details that are applicable
to this DB</p>
</td></tr>
<tr><td><code id="recode_columns_+3A_data_name">data_name</code></td>
<td>
<p>Name of the database being passed</p>
</td></tr>
<tr><td><code id="recode_columns_+3A_log">log</code></td>
<td>
<p>The option of printing log</p>
</td></tr>
<tr><td><code id="recode_columns_+3A_print_note">print_note</code></td>
<td>
<p>the option of printing the note columns</p>
</td></tr>
<tr><td><code id="recode_columns_+3A_else_default">else_default</code></td>
<td>
<p>default else value to use if no else is present</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns recoded and labeled data
</p>

<hr>
<h2 id='recode_to_pmml'>Creates a PMML document from variable and variable details sheets for specified database.</h2><span id='topic+recode_to_pmml'></span>

<h3>Description</h3>

<p>Creates a PMML document from variable and variable details sheets for specified database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recode_to_pmml(var_details_sheet, vars_sheet, db_name, vars_to_convert = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recode_to_pmml_+3A_var_details_sheet">var_details_sheet</code></td>
<td>
<p>A data frame representing a variable details sheet.</p>
</td></tr>
<tr><td><code id="recode_to_pmml_+3A_vars_sheet">vars_sheet</code></td>
<td>
<p>A data frame representing a variables sheet.</p>
</td></tr>
<tr><td><code id="recode_to_pmml_+3A_db_name">db_name</code></td>
<td>
<p>A string containing the name of the database that holds
the start variables. Should match up with one of the databases in the
databaseStart column.</p>
</td></tr>
<tr><td><code id="recode_to_pmml_+3A_vars_to_convert">vars_to_convert</code></td>
<td>
<p>A vector of strings containing the names of variables
from the variable column in the variable details sheet that should be
converted to PMML. Passing in an empty vector will convert all the variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A PMML document.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>var_details_sheet &lt;-
data.frame(
 "variable" = rep(c("A", "B", "C"), each = 3),
 "dummyVariable" = c("AY", "AN", "ANA", "BY", "BN", "BNA", "CY", "CN", "CNA"),
 "toType" = rep("cat", times = 9),
 "databaseStart" = rep("tester", times = 9),
 "variableStart" = rep(
   c("tester::startA", "tester::startB", "tester::startC"),
   each = 3
 ),
 "fromType" = rep("cat", times = 9),
 "recTo" = rep(c("1", "2", "NA::a"), times = 3),
 "numValidCat" = rep("2", times = 9),
 "catLabel" = rep(c("Yes", "No", "Not answered"), times = 3),
 "catLabelLong" = rep(c("Yes", "No", "Not answered"), times =
                        3),
 "recFrom" = rep(c("1", "2", "9"), times = 3),
 "catStartLabel" = rep(c("Yes", "No", "Not answered"), times =
                         3),
 "variableStartShortLabel" = rep(c("Group A", "Group B", "Group C"), each =
                                   3),
 "variableStartLabel" = rep(c("Group A", "Group B", "Group C"), each =
                              3),
 "units" = rep("NA", times = 9),
 "notes" = rep("This is not real data", times = 9)
)
vars_sheet &lt;-
 data.frame(
   "variable" = c("A", "B", "C"),
   "label" = c("Group A", "Group B", "Group C"),
   "labelLong" = c("Group A", "Group B", "Group C"),
   "section" = rep("tester", times=3),
   "subject" = rep("tester",times = 3),
   "variableType" = rep("Categorical", times=3),
   "databaseStart" = rep("tester", times = 3),
   "units" = rep("NA", times = 3),
   "variableStart" = c("tester::startA", "tester::startB", "tester::startC")
 )
db_name &lt;- "tester"
vars &lt;- c("A", "B", "C")

actual_pmml &lt;- recode_to_pmml(
var_details_sheet,
vars_sheet,
db_name,
vars
)

</code></pre>

<hr>
<h2 id='select_vars_by_role'>Vars selected by role</h2><span id='topic+select_vars_by_role'></span>

<h3>Description</h3>

<p>Selects variables from variables sheet based on passed roles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_vars_by_role(roles, variables)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_vars_by_role_+3A_roles">roles</code></td>
<td>
<p>a vector containing a single or multiple roles to match by</p>
</td></tr>
<tr><td><code id="select_vars_by_role_+3A_variables">variables</code></td>
<td>
<p>the variables sheet containing variable info</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector containing the variable names that match the passed roles
</p>

<hr>
<h2 id='set_data_labels'>Set Data Labels</h2><span id='topic+set_data_labels'></span>

<h3>Description</h3>

<p>sets labels for passed database, Uses the names of final
variables in variable_details/variables_sheet as well as the labels contained
in the passed dataframes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_data_labels(data_to_label, variable_details, variables_sheet = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_data_labels_+3A_data_to_label">data_to_label</code></td>
<td>
<p>newly transformed dataset</p>
</td></tr>
<tr><td><code id="set_data_labels_+3A_variable_details">variable_details</code></td>
<td>
<p>variable_details.csv</p>
</td></tr>
<tr><td><code id="set_data_labels_+3A_variables_sheet">variables_sheet</code></td>
<td>
<p>variables.csv</p>
</td></tr>
</table>


<h3>Value</h3>

<p>labeled data_to_label
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
