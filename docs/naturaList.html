<!DOCTYPE html><html><head><title>Help for package naturaList</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {naturaList}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#A.setosa'><p>Occurrence records of Alsophila setosa downloaded from Global Biodiversity</p>
Information Facility (GBIF).</a></li>
<li><a href='#abrev.pttn'><p>Internal function of naturaList - Return abbreviation collapsed</p></a></li>
<li><a href='#BR'><p>Brazil boundary</p></a></li>
<li><a href='#check.spec'><p>Internal function of naturaList - Manual check of ambiguity in specialist's</p>
name</a></li>
<li><a href='#classify_occ'><p>Classify occurrence records in levels of confidence in species identification</p></a></li>
<li><a href='#clean_eval'><p>Evaluate the cleaning of occurrences records</p></a></li>
<li><a href='#create_spec_df'><p>Create specialist data frame from character vector</p></a></li>
<li><a href='#cyathea.br'><p>Occurrence records of Cyathea species in Brazil downloaded from Global Biodiversity</p>
Information Facility (GBIF).</a></li>
<li><a href='#define_env_space'><p>Define environmental space for species occurrence</p></a></li>
<li><a href='#env_grid_filter'><p>Filter occurrences in environmental space</p></a></li>
<li><a href='#func.det.by.esp'><p>Internal function of naturaList - Detect if a string has a specialist name</p></a></li>
<li><a href='#get_det_names'><p>Get the names in the 'identified.by' column</p></a></li>
<li><a href='#grid_filter'><p>Filter the occurrence with most confidence in species identification inside</p>
grid cells</a></li>
<li><a href='#has.det.ID'><p>Internal function of naturaList - Identifies if a occurrence has a name for</p>
the identifier of the specimen</a></li>
<li><a href='#make.polygon'><p>Internal function of naturaList - Create SpatialPolygons from a list of coordinates</p></a></li>
<li><a href='#map_module'><p>Check the occurrence records in a interactive map module</p></a></li>
<li><a href='#pol.coords'><p>Internal function of naturaList - Get coordinates from polygons created in leaflet</p>
map</a></li>
<li><a href='#pttn.all.specialist'><p>Internal function of naturaList - Return specialists names in a collapsed</p>
string</a></li>
<li><a href='#r.temp.prec'><p>Raster of temperature and precipitation</p></a></li>
<li><a href='#reduce.df'><p>Internal function of naturaList - reduce data.frame of occurrence for a minimal</p>
column length</a></li>
<li><a href='#rm.coord.dup'><p>Internal function of naturaList - Remove duplicate occurrence</p></a></li>
<li><a href='#spec_names_ex'><p>Example of specialist names with accent marks</p></a></li>
<li><a href='#specialist.conference'><p>Internal function of naturaList - Confirm if an occurrence record was identified by</p>
a specialist without ambiguity</a></li>
<li><a href='#speciaLists'><p>Specialists of ferns and lycophytes of Brazil</p></a></li>
<li><a href='#verify.specialist'><p>Internal function of naturaList - Verify if a string has unambiguous specialist</p>
name</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Classify Occurrences by Confidence Levels in the Species ID</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Classify occurrence records based on confidence
    levels of species identification. In addition, implement tools to filter
    occurrences inside grid cells and to manually check for possibles errors with 
	an interactive shiny application.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>shiny, shinyWidgets, dplyr, stringr, sp, raster,
shinydashboard, leaflet, leaflet.extras, tidytext, magrittr,
vegan, fasterize, sf, htmltools, methods, rlang, tm, stringi</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0), rnaturalearth, lwgeom,
shinyLP</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/avrodrigues/naturaList">https://github.com/avrodrigues/naturaList</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/avrodrigues/naturaList/issues">https://github.com/avrodrigues/naturaList/issues</a></td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-06 07:59:04 UTC; rodriart</td>
</tr>
<tr>
<td>Author:</td>
<td>Arthur Vinicius Rodrigues
    <a href="https://orcid.org/0000-0003-2656-558X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Gabriel Nakamura <a href="https://orcid.org/0000-0002-5144-5312"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Leandro Duarte <a href="https://orcid.org/0000-0003-1771-0407"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arthur Vinicius Rodrigues &lt;rodrigues.arthur.v@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-06 08:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='A.setosa'>Occurrence records of Alsophila setosa downloaded from Global Biodiversity
Information Facility (GBIF).</h2><span id='topic+A.setosa'></span>

<h3>Description</h3>

<p>A GBIF raw dataset containing 508 occurrence records for the tree fern
Alsophila setosa.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>A.setosa
</code></pre>


<h3>Format</h3>

<p>A data frame with 508 rows and 45 variables
</p>


<h3>Source</h3>

<p>GBIF.org (08 July 2019) GBIF Occurrence Download <a href="https://doi.org/10.15468/dl.6jesg0">doi:10.15468/dl.6jesg0</a>
</p>

<hr>
<h2 id='abrev.pttn'>Internal function of naturaList - Return abbreviation collapsed</h2><span id='topic+abrev.pttn'></span>

<h3>Description</h3>

<p>Return collapsed abbreviation for a specific line of specialist data frame.
It is used as pattern in grep function inside
<a href="#topic+classify_occ">classify_occ</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>abrev.pttn(df, line)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="abrev.pttn_+3A_df">df</code></td>
<td>
<p>spec data frame provided in <a href="#topic+classify_occ">classify_occ</a></p>
</td></tr>
<tr><td><code id="abrev.pttn_+3A_line">line</code></td>
<td>
<p>specifies the line of the data frame to be collapsed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with two elements in regex format:
</p>
<table>
<tr><td><code>[[1]]</code></td>
<td>
<p>the abbreviation of the first name;</p>
</td></tr>
<tr><td><code>[[2]]</code></td>
<td>
<p>regex pattern with all names and abbreviations.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+classify_occ">classify_occ</a>
</p>

<hr>
<h2 id='BR'>Brazil boundary</h2><span id='topic+BR'></span>

<h3>Description</h3>

<p>A spatial polygon with the Brazil boundaries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BR
</code></pre>


<h3>Format</h3>

<p>A 'SpatialPolygonsDataFrame' with 1 feature
</p>

<hr>
<h2 id='check.spec'>Internal function of naturaList - Manual check of ambiguity in specialist's
name</h2><span id='topic+check.spec'></span>

<h3>Description</h3>

<p>Creates interaction with user in which the user check if a string with the
identifier of a specimen has a specialist name. It solves ambiguity in classify
an occurrence as identified by a specialist. It is used inside
<a href="#topic+classify_occ">classify_occ</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check.spec(class.occ, crit.levels, identified.by)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check.spec_+3A_class.occ">class.occ</code></td>
<td>
<p>internal data frame with observation classified according
<a href="#topic+classify_occ">classify_occ</a> criteria</p>
</td></tr>
<tr><td><code id="check.spec_+3A_crit.levels">crit.levels</code></td>
<td>
<p>crit.levels choose by user in <a href="#topic+classify_occ">classify_occ</a></p>
</td></tr>
<tr><td><code id="check.spec_+3A_identified.by">identified.by</code></td>
<td>
<p>same as identified.by argument in <a href="#topic+classify_occ">classify_occ</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector with 'naturaList_levels&quot; ID.
</p>

<hr>
<h2 id='classify_occ'>Classify occurrence records in levels of confidence in species identification</h2><span id='topic+classify_occ'></span>

<h3>Description</h3>

<p>Classifies occurrence records in levels of confidence in species
identification
</p>


<h3>Usage</h3>

<pre><code class='language-R'>classify_occ(
  occ,
  spec = NULL,
  na.rm.coords = TRUE,
  crit.levels = c("det_by_spec", "not_spec_name", "image", "sci_collection", "field_obs",
    "no_criteria_met"),
  ignore.det.names = NULL,
  spec.ambiguity = "not.spec",
  institution.code = "institutionCode",
  collection.code = "collectionCode",
  catalog.number = "catalogNumber",
  year = "year",
  date.identified = "dateIdentified",
  species = "species",
  identified.by = "identifiedBy",
  decimal.latitude = "decimalLatitude",
  decimal.longitude = "decimalLongitude",
  basis.of.record = "basisOfRecord",
  media.type = "mediaType",
  occurrence.id = "occurrenceID",
  institution.source,
  year.event,
  scientific.name,
  determined.by,
  latitude,
  longitude,
  basis.of.rec,
  occ.id
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="classify_occ_+3A_occ">occ</code></td>
<td>
<p>data frame with occurrence records information.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_spec">spec</code></td>
<td>
<p>data frame with specialists' names. See details.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_na.rm.coords">na.rm.coords</code></td>
<td>
<p>logical. If <code>TRUE</code>, remove occurrences with <code>NA</code>
in <code>decimal.latitude</code> or <code>decimal.longitude</code></p>
</td></tr>
<tr><td><code id="classify_occ_+3A_crit.levels">crit.levels</code></td>
<td>
<p>character. Vector with levels of confidence in decreasing
order. The criteria allowed are <code>det_by_spec</code>, <code>not_spec_name</code>,
<code>image</code>, <code>sci_collection</code>, <code>field_obs</code>, <code>no_criteria_met</code>.
See details.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_ignore.det.names">ignore.det.names</code></td>
<td>
<p>character vector indicating strings in
<code>identified.by</code> that should be ignored as a taxonomist. See details.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_spec.ambiguity">spec.ambiguity</code></td>
<td>
<p>character. Indicates how to deal with ambiguity in
specialists names. <code>not.spec</code> solve ambiguity by classifying the
identification as done by a non-specialist;<code>is.spec</code> assumes the
identification was done by a specialist; <code>manual.check</code> enables the
user to manually check all ambiguous names. Default is <code>not.spec</code>.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_institution.code">institution.code</code></td>
<td>
<p>column name of <code>occ</code> with the name (or acronym)
in use by the institution having custody of the object(s) or information
referred to in the record.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_collection.code">collection.code</code></td>
<td>
<p>column name of <code>occ</code> with The name, acronym,
code, or initials identifying the collection or data set from which the
record was derived.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_catalog.number">catalog.number</code></td>
<td>
<p>column name of <code>occ</code> with an identifier
(preferably unique) for the record within the data set or collection.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_year">year</code></td>
<td>
<p>Column name of <code>occ</code> the four-digit year in which the
Event occurred, according to the Common Era Calendar.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_date.identified">date.identified</code></td>
<td>
<p>Column name of <code>occ</code> with the date on which the
subject was determined as representing the Taxon.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_species">species</code></td>
<td>
<p>column name of <code>occ</code> with the species names.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_identified.by">identified.by</code></td>
<td>
<p>column name of <code>occ</code> with the name of who
determined the species.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_decimal.latitude">decimal.latitude</code></td>
<td>
<p>column name of <code>occ</code> latitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_decimal.longitude">decimal.longitude</code></td>
<td>
<p>column name of <code>occ</code> longitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_basis.of.record">basis.of.record</code></td>
<td>
<p>column name with the specific nature of the data
record. See details.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_media.type">media.type</code></td>
<td>
<p>column name of <code>occ</code> with the media type of recording.
See details.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_occurrence.id">occurrence.id</code></td>
<td>
<p>column name of <code>occ</code> with link or code for the
occurrence record. See in
<a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID">Darwin Core Format</a></p>
</td></tr>
<tr><td><code id="classify_occ_+3A_institution.source">institution.source</code></td>
<td>
<p>deprecated, use <code>institution.code</code> instead.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_year.event">year.event</code></td>
<td>
<p>deprecated, use <code>year</code> instead.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_scientific.name">scientific.name</code></td>
<td>
<p>deprecated, use <code>species</code> instead.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_determined.by">determined.by</code></td>
<td>
<p>deprecated, use <code>identified.by</code> instead</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_latitude">latitude</code></td>
<td>
<p>deprecated, use <code>decimal.latitude</code> instead</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_longitude">longitude</code></td>
<td>
<p>deprecated, use <code>decimal.longitude</code> instead</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_basis.of.rec">basis.of.rec</code></td>
<td>
<p>deprecated, use <code>basis.of.record</code> instead.</p>
</td></tr>
<tr><td><code id="classify_occ_+3A_occ.id">occ.id</code></td>
<td>
<p>deprecated, use <code>occurrence.id</code> instead</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>spec</code> data frame must have columns separating <code>LastName</code>,
<code>Name</code> and <code>Abbrev</code>. See <a href="#topic+create_spec_df">create_spec_df</a>
function for a easy way to produce this data frame.
</p>
<p>When <code>ignore.det.name = NULL</code> (default), the function ignores
strings with <code>"RRC ID Flag", "NA", "", "-" and "_".</code> When a character
vector is provided, the function adds the default strings to the provided
character vector and ignore all these strings as being a name of a taxonomist.
</p>
<p>The function classifies the occurrence records in six levels of
confidence in species identification. The six levels are:
</p>

<ul>
<li> <p><code>det_by_spec</code> - when the identification was made by a specialists
which is present in the list of specialists provided in the <code>spec</code>
argument;
</p>
</li>
<li> <p><code>not_spec_name</code> - when the identification was made by a name who is
not a specialist name provide in <code>spec</code>;
</p>
</li>
<li> <p><code>image</code> - the occurrence have not name of a identifier, but present
an image associated;
</p>
</li>
<li> <p><code>sci_collection</code> - the occurrence have not name of a identifier,
but preserved in a scientific collection;
</p>
</li>
<li> <p><code>field_obs</code> - the occurrence have not name of a identifier,
but it was identified in field observation;
</p>
</li>
<li><p><code>no_criteria_met</code> - no other criteria was met.
</p>
</li></ul>

<p>The (decreasing) order of the levels in the character vector determines the
classification level order.
</p>
<p><code>basis.of.record</code> is a character vector with one of the following
types of record: <code>PRESERVED_SPECIMEN</code>, <code>PreservedSpecimen</code>,
<code>HUMAN_OBSERVATION</code> or <code>HumanObservation</code>, as in GBIF data
'basisOfRecord'.
</p>
<p><code>media.type</code> uses the same pattern as GBIF mediaType column,
indicating the existence of an associated image with <code>stillImage</code>.
</p>


<h3>Value</h3>

<p>The <code>occ</code> data frame plus the classification of each record
in a new column, named <code>naturaList_levels</code>.
</p>


<h3>Author(s)</h3>

<p>Arthur V. Rodrigues
</p>


<h3>See Also</h3>

<p><code><a href="#topic+speciaLists">speciaLists</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("A.setosa")
data("speciaLists")
occ.class &lt;- classify_occ(A.setosa, speciaLists)


</code></pre>

<hr>
<h2 id='clean_eval'>Evaluate the cleaning of occurrences records</h2><span id='topic+clean_eval'></span>

<h3>Description</h3>

<p>This function compare the area occupied by
a species before and after pass through the cleaning procedure according to
the chosen level of filter.
The comparison can be made by measuring area in the geographical and in the
environmental space
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_eval(
  occ.cl,
  geo.space,
  env.space = NULL,
  level.filter = c("1_det_by_spec"),
  r,
  species = "species",
  decimal.longitude = "decimalLongitude",
  decimal.latitude = "decimalLatitude",
  scientific.name,
  longitude,
  latitude
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_eval_+3A_occ.cl">occ.cl</code></td>
<td>
<p>data frame with occurrence records information already
classified by <code><a href="#topic+classify_occ">classify_occ</a></code> function.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_geo.space">geo.space</code></td>
<td>
<p>a SpatialPolygons* or sf object defining the geographical
space</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_env.space">env.space</code></td>
<td>
<p>a SpatialPolygons* or sf object defining the environmental
space. Use the <code><a href="#topic+define_env_space">define_env_space</a></code> for create this object.
By default <code>env.space = NULL</code>, hence do not evaluate the cleaning
in the environmental space.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_level.filter">level.filter</code></td>
<td>
<p>a character vector including the levels in
'naturaList_levels' column which filter the occurrence data set.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_r">r</code></td>
<td>
<p>a raster with 2 layers representing the environmental variables. If
<code>env.space = NULL</code>, it could be a single layer raster, from which
the cell size and extent are extracted to produce the composition matrix.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_species">species</code></td>
<td>
<p>column name of <code>occ.cl</code> with the species names.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_decimal.longitude">decimal.longitude</code></td>
<td>
<p>column name of <code>occ.cl</code> longitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_decimal.latitude">decimal.latitude</code></td>
<td>
<p>column name of <code>occ.cl</code> latitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_scientific.name">scientific.name</code></td>
<td>
<p>deprecated, use <code>species</code> instead.</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_longitude">longitude</code></td>
<td>
<p>deprecated, use <code>decimal.longitude</code> instead</p>
</td></tr>
<tr><td><code id="clean_eval_+3A_latitude">latitude</code></td>
<td>
<p>deprecated, use <code>decimal.latitude</code> instead</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list in which:
</p>
<p><code>area</code> data frame remaining area after cleaning proportional to the area
before cleaning. The values vary from 0 to 1. Column named <code>r.geo.area</code>
is the remaining area for all species in the geographic space and the
<code>r.env.area</code> in the environmental space.
</p>
<p><code>comp</code> data frame with composition of species in sites (cells from raster
layers) before cleaning (<code>comp$comp$BC</code>) and after cleaning
(<code>comp$comp$AC</code>). The number of rows is equal the number of cells in
<code>r</code>, and number of columns is equal to the number of species in the
<code>occ.cl</code>.
</p>
<p><code>rich</code> data frame with a single column with the richness of each site
</p>
<p><code>site.coords</code> data frame with site's coordinates. It facilitates to built
raster layers from results using <code><a href="raster.html#topic+rasterFromXYZ">rasterFromXYZ</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+define_env_space">define_env_space</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

library(sp)
library(raster)


data("speciaLists") # list of specialists
data("cyathea.br") # occurrence dataset


# classify
occ.cl &lt;- classify_occ(cyathea.br, speciaLists)

# delimit the geographic space
# land area
data("BR")


# Transform occurrence data in SpatialPointsDataFrame
spdf.occ.cl &lt;- sp::SpatialPoints(occ.cl[, c("decimalLongitude", "decimalLatitude")])


# load climate data
data("r.temp.prec") # mean temperature and annual precipitation
df.temp.prec &lt;- raster::as.data.frame(r.temp.prec)

### Define the environmental space for analysis
# this function will create a boundary of available environmental space,
# analogous to the continent boundary in the geographical space
env.space &lt;- define_env_space(df.temp.prec, buffer.size = 0.05)

# filter by year to be consistent with the environmental data
occ.class.1970 &lt;-  occ.cl %&gt;%
  dplyr::filter(year &gt;= 1970)

### run the evaluation
cl.eval &lt;- clean_eval(occ.class.1970,
                      env.space = env.space,
                      geo.space = BR,
                      r = r.temp.prec)

#area results
head(cl.eval$area)


### richness maps
## it makes sense if there are more than one species
rich.before.clean &lt;- raster::rasterFromXYZ(cbind(cl.eval$site.coords,
                                                 cl.eval$rich$rich.BC))
rich.after.clean &lt;- raster::rasterFromXYZ(cbind(cl.eval$site.coords,
                                                cl.eval$rich$rich.AC))

raster::plot(rich.before.clean)
raster::plot(rich.after.clean)

### species area map
comp.bc &lt;- as.data.frame(cl.eval$comp$comp.BC)
comp.ac &lt;- as.data.frame(cl.eval$comp$comp.AC)

c.villosa.bc &lt;- raster::rasterFromXYZ(cbind(cl.eval$site.coords,
                                            comp.bc$`Cyathea villosa`))
c.villosa.ac &lt;- raster::rasterFromXYZ(cbind(cl.eval$site.coords,
                                            comp.ac$`Cyathea villosa`))

raster::plot(c.villosa.bc)
raster::plot(c.villosa.ac)

## End(Not run)

</code></pre>

<hr>
<h2 id='create_spec_df'>Create specialist data frame from character vector</h2><span id='topic+create_spec_df'></span>

<h3>Description</h3>

<p>Creates a specialist data frame ready for use in
<code><a href="#topic+classify_occ">classify_occ</a></code>
from a character vector containing the specialists names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_spec_df(spec.char)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_spec_df_+3A_spec.char">spec.char</code></td>
<td>
<p>a character vector with specialist names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame. Columns split the names, surname and abbreviation for
the names. If the full name contain any special character, such as accent marks,
two lines for that name will be provided, with and without the special characters.
See examples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example using Latin accent marks
data(spec_names_ex)

spec_names_ex
create_spec_df(spec_names_ex)

</code></pre>

<hr>
<h2 id='cyathea.br'>Occurrence records of Cyathea species in Brazil downloaded from Global Biodiversity
Information Facility (GBIF).</h2><span id='topic+cyathea.br'></span>

<h3>Description</h3>

<p>A filtered GBIF dataset containing 3851 occurrence records for the fern species
from the genus Cyathea in Brazil. We filtered the data after download from GBIF
to ensure all occurrences records are from Brazil.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cyathea.br
</code></pre>


<h3>Format</h3>

<p>A data frame with 3851 rows and 50 variables
</p>


<h3>Source</h3>

<p>GBIF.org (07 March 2021) GBIF Occurrence Download <a href="https://doi.org/10.15468/dl.qrhynv">doi:10.15468/dl.qrhynv</a>
</p>

<hr>
<h2 id='define_env_space'>Define environmental space for species occurrence</h2><span id='topic+define_env_space'></span>

<h3>Description</h3>

<p>Based on two continuous environmental variables, it defines a
bi-dimensional environmental space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_env_space(env, buffer.size, plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_env_space_+3A_env">env</code></td>
<td>
<p>matrix or data frame with two columns containing two
environmental variables. The variables must be numeric, even for data frames.</p>
</td></tr>
<tr><td><code id="define_env_space_+3A_buffer.size">buffer.size</code></td>
<td>
<p>numeric value indicating a buffer size around each point
which will delimit the environmental geographical border for the occurrence
point. See details.</p>
</td></tr>
<tr><td><code id="define_env_space_+3A_plot">plot</code></td>
<td>
<p>logical. whether to plot the polygon. Default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The environmental variables are standardized by range, which turns
the range of each environmental variable from 0 to 1. Then, it is delimited
a buffer of size equal to <code>buffer.size</code> around each point in this
space and a polygon is draw to link these buffers. The function returns the
polygon needed to link all points, and the area of the polygon indicates
the environmental space based in the variables used.
</p>


<h3>Value</h3>

<p>An object of sfc_POLYGON class
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library("raster")

# load climate data
data("r.temp.prec")
env.data &lt;- raster::as.data.frame(r.temp.prec)

define_env_space(env.data, 0.05)

## End(Not run)






</code></pre>

<hr>
<h2 id='env_grid_filter'>Filter occurrences in environmental space</h2><span id='topic+env_grid_filter'></span>

<h3>Description</h3>

<p>Filter the occurrence with the most realible species identification in the
environmental space. This function is based in the function envSample
provided by Varela et al. (2014) and were adapted to the naturaList package to
select the occurrence with the most realible species identification in each
environmental grid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>env_grid_filter(
  occ.cl,
  env.data,
  grid.res,
  institution.code = "institutionCode",
  collection.code = "collectionCode",
  catalog.number = "catalogNumber",
  year = "year",
  date.identified = "dateIdentified",
  species = "species",
  identified.by = "identifiedBy",
  decimal.latitude = "decimalLatitude",
  decimal.longitude = "decimalLongitude",
  basis.of.record = "basisOfRecord",
  media.type = "mediaType",
  occurrence.id = "occurrenceID"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="env_grid_filter_+3A_occ.cl">occ.cl</code></td>
<td>
<p>data frame with occurrence records information already
classified by <code><a href="#topic+classify_occ">classify_occ</a></code> function.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_env.data">env.data</code></td>
<td>
<p>data frame with rows for occurrence observation and columns for
each environmental variable</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_grid.res">grid.res</code></td>
<td>
<p>numeric vector. Each value represents the width of each bin
in the scale of the environmental variable. The order in this vector is
assumed to be the same order in the of the variables in the <code>env.data</code>
data frame.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_institution.code">institution.code</code></td>
<td>
<p>column name of <code>occ.cl</code> with the name (or acronym)
in use by the institution having custody of the object(s) or information
referred to in the record.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_collection.code">collection.code</code></td>
<td>
<p>column name of <code>occ.cl</code> with The name, acronym,
code, or initials identifying the collection or data set from which the
record was derived.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_catalog.number">catalog.number</code></td>
<td>
<p>column name of <code>occ.cl</code> with an identifier
(preferably unique) for the record within the data set or collection.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_year">year</code></td>
<td>
<p>Column name of <code>occ.cl</code> the four-digit year in which the
Event occurred, according to the Common Era Calendar.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_date.identified">date.identified</code></td>
<td>
<p>Column name of <code>occ.cl</code> with the date on which the
subject was determined as representing the Taxon.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_species">species</code></td>
<td>
<p>column name of <code>occ</code> with the species names.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_identified.by">identified.by</code></td>
<td>
<p>column name of <code>occ.cl</code> with the name of who
determined the species.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_decimal.latitude">decimal.latitude</code></td>
<td>
<p>column name of <code>occ.cl</code> latitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_decimal.longitude">decimal.longitude</code></td>
<td>
<p>column name of <code>occ.cl</code> longitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_basis.of.record">basis.of.record</code></td>
<td>
<p>column name with the specific nature of the data
record. See details.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_media.type">media.type</code></td>
<td>
<p>column name of <code>occ.cl</code> with the media type of recording.
See details.</p>
</td></tr>
<tr><td><code id="env_grid_filter_+3A_occurrence.id">occurrence.id</code></td>
<td>
<p>column name of <code>occ</code> with link or code for the
occurrence record. See in
<a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID">Darwin Core Format</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with the same columns of <code>occ.cl</code>.
</p>


<h3>References</h3>

<p>Varela et al. (2014). Environmental filters reduce the effects
of sampling bias and improve predictions of ecological niche models.
*Ecography*. 37(11) 1084-1091.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+classify_occ">classify_occ</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
library(naturaList)
library(tidyverse)

data("cyathea.br")
data("speciaLists")
data("r.temp.prec")

occ &lt;- cyathea.br %&gt;%
  filter(species == "Cyathea atrovirens")

occ.cl &lt;- classify_occ(occ, speciaLists, spec.ambiguity = "is.spec")

# temperature and precipitaion data
env.data &lt;- raster::extract(
  r.temp.prec,
  occ.cl[,c("decimalLongitude", "decimalLatitude")]
) %&gt;% as.data.frame()

# the bins for temperature has 5 degrees each and for precipitation has 100 mm each
grid.res &lt;- c(5, 100)

occ.filtered &lt;- env_grid_filter(
  occ.cl,
  env.data,
  grid.res
)


## End(Not run)

</code></pre>

<hr>
<h2 id='func.det.by.esp'>Internal function of naturaList - Detect if a string has a specialist name</h2><span id='topic+func.det.by.esp'></span>

<h3>Description</h3>

<p>Detect if a string with identifiers name has a specialist name. It is used inside
<a href="#topic+classify_occ">classify_occ</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func.det.by.esp(sp.df, i, specialist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func.det.by.esp_+3A_sp.df">sp.df</code></td>
<td>
<p>reduced version of occurrence data frame provided
in <a href="#topic+classify_occ">classify_occ</a></p>
</td></tr>
<tr><td><code id="func.det.by.esp_+3A_i">i</code></td>
<td>
<p>row number of specialist data frame</p>
</td></tr>
<tr><td><code id="func.det.by.esp_+3A_specialist">specialist</code></td>
<td>
<p>specialist data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integer with the row numbers of the <code>sp.df</code> data frame which was
identified by the specialist name in row <code>i</code>.
</p>

<hr>
<h2 id='get_det_names'>Get the names in the 'identified.by' column</h2><span id='topic+get_det_names'></span>

<h3>Description</h3>

<p>This function facilitates the search for non-taxonomist strings in the
'identified.by' column of occurrence records data set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_det_names(
  occ,
  identified.by = "identifiedBy",
  freq = FALSE,
  decreasing = TRUE,
  determined.by
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_det_names_+3A_occ">occ</code></td>
<td>
<p>data frame with occurrence records information.</p>
</td></tr>
<tr><td><code id="get_det_names_+3A_identified.by">identified.by</code></td>
<td>
<p>column name of <code>occ</code> with the name of who
determined the species.</p>
</td></tr>
<tr><td><code id="get_det_names_+3A_freq">freq</code></td>
<td>
<p>logical. If <code>TRUE</code> output contain the number of times each
string is repeated in the <code>identified.by</code> column. Default = <code>FALSE</code></p>
</td></tr>
<tr><td><code id="get_det_names_+3A_decreasing">decreasing</code></td>
<td>
<p>logical. sort strings in decreasing order of frequency.
Default = <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_det_names_+3A_determined.by">determined.by</code></td>
<td>
<p>deprecated, use <code>identified.by</code> instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector containing the strings in <code>identified.by</code>
column of <code>occ</code>. If <code>freq = TRUE</code> it return a data frame with
two columns: 'strings' and 'frequency'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("A.setosa")
get_det_names(A.setosa, freq = TRUE)

</code></pre>

<hr>
<h2 id='grid_filter'>Filter the occurrence with most confidence in species identification inside
grid cells</h2><span id='topic+grid_filter'></span>

<h3>Description</h3>

<p>In each grid cell it selects the occurrence with the highest confidence level
in species identification made by <code><a href="#topic+classify_occ">classify_occ</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grid_filter(
  occ.cl,
  grid.resolution = c(0.5, 0.5),
  r = NULL,
  institution.code = "institutionCode",
  collection.code = "collectionCode",
  catalog.number = "catalogNumber",
  year = "year",
  date.identified = "dateIdentified",
  species = "species",
  identified.by = "identifiedBy",
  decimal.latitude = "decimalLatitude",
  decimal.longitude = "decimalLongitude",
  basis.of.record = "basisOfRecord",
  media.type = "mediaType",
  occurrence.id = "occurrenceID",
  institution.source,
  year.event,
  scientific.name,
  determined.by,
  latitude,
  longitude,
  basis.of.rec,
  occ.id
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grid_filter_+3A_occ.cl">occ.cl</code></td>
<td>
<p>data frame with occurrence records information already
classified by <code><a href="#topic+classify_occ">classify_occ</a></code> function.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_grid.resolution">grid.resolution</code></td>
<td>
<p>numeric vector with width and height of grid cell in
decimal degrees.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_r">r</code></td>
<td>
<p>raster from which the grid cell resolution is derived.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_institution.code">institution.code</code></td>
<td>
<p>column name of <code>occ.cl</code> with the name (or acronym)
in use by the institution having custody of the object(s) or information
referred to in the record.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_collection.code">collection.code</code></td>
<td>
<p>column name of <code>occ.cl</code> with The name, acronym,
code, or initials identifying the collection or data set from which the
record was derived.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_catalog.number">catalog.number</code></td>
<td>
<p>column name of <code>occ.cl</code> with an identifier
(preferably unique) for the record within the data set or collection.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_year">year</code></td>
<td>
<p>Column name of <code>occ.cl</code> the four-digit year in which the
Event occurred, according to the Common Era Calendar.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_date.identified">date.identified</code></td>
<td>
<p>Column name of <code>occ.cl</code> with the date on which the
subject was determined as representing the Taxon.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_species">species</code></td>
<td>
<p>column name of <code>occ</code> with the species names.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_identified.by">identified.by</code></td>
<td>
<p>column name of <code>occ.cl</code> with the name of who
determined the species.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_decimal.latitude">decimal.latitude</code></td>
<td>
<p>column name of <code>occ.cl</code> latitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_decimal.longitude">decimal.longitude</code></td>
<td>
<p>column name of <code>occ.cl</code> longitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_basis.of.record">basis.of.record</code></td>
<td>
<p>column name with the specific nature of the data
record. See details.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_media.type">media.type</code></td>
<td>
<p>column name of <code>occ.cl</code> with the media type of recording.
See details.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_occurrence.id">occurrence.id</code></td>
<td>
<p>column name of <code>occ</code> with link or code for the
occurrence record. See in
<a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID">Darwin Core Format</a></p>
</td></tr>
<tr><td><code id="grid_filter_+3A_institution.source">institution.source</code></td>
<td>
<p>deprecated, use <code>institution.code</code> instead.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_year.event">year.event</code></td>
<td>
<p>deprecated, use <code>year</code> instead.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_scientific.name">scientific.name</code></td>
<td>
<p>deprecated, use <code>species</code> instead.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_determined.by">determined.by</code></td>
<td>
<p>deprecated, use <code>identified.by</code> instead</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_latitude">latitude</code></td>
<td>
<p>deprecated, use <code>decimal.latitude</code> instead</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_longitude">longitude</code></td>
<td>
<p>deprecated, use <code>decimal.longitude</code> instead</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_basis.of.rec">basis.of.rec</code></td>
<td>
<p>deprecated, use <code>basis.of.record</code> instead.</p>
</td></tr>
<tr><td><code id="grid_filter_+3A_occ.id">occ.id</code></td>
<td>
<p>deprecated, use <code>occurrence.id</code> instead</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with the same columns of <code>occ.cl</code>.
</p>


<h3>Author(s)</h3>

<p>Arthur V. Rodrigues
</p>


<h3>See Also</h3>

<p><code><a href="#topic+classify_occ">classify_occ</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

data("A.setosa")
data("speciaLists")

occ.class &lt;- classify_occ(A.setosa, speciaLists)
occ.grid &lt;- grid_filter(occ.class)


## End(Not run)




</code></pre>

<hr>
<h2 id='has.det.ID'>Internal function of naturaList - Identifies if a occurrence has a name for
the identifier of the specimen</h2><span id='topic+has.det.ID'></span>

<h3>Description</h3>

<p>Identifies if a occurrence has a name for the identifier of the specimen.
It is used inside <a href="#topic+classify_occ">classify_occ</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has.det.ID(sp.df, ignore.det.names = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="has.det.ID_+3A_sp.df">sp.df</code></td>
<td>
<p>reduced version of occurrence data frame provided in
<a href="#topic+classify_occ">classify_occ</a></p>
</td></tr>
<tr><td><code id="has.det.ID_+3A_ignore.det.names">ignore.det.names</code></td>
<td>
<p>ignore.det.names character vector indicating
strings in the identified.by column that should be ignored as a
taxonomist. See <a href="#topic+classify_occ">classify_occ</a>.
</p>
<p>@return an integer vector indicating the rows which have 'identified by' ID</p>
</td></tr>
</table>

<hr>
<h2 id='make.polygon'>Internal function of naturaList - Create SpatialPolygons from a list of coordinates</h2><span id='topic+make.polygon'></span>

<h3>Description</h3>

<p>Create SpatialPolygons from a list of coordinates. It is used in <a href="#topic+map_module">map_module</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.polygon(df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.polygon_+3A_df">df</code></td>
<td>
<p>a data frame provided by <a href="#topic+pol.coords">pol.coords</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>SpatialPolygon</code> object
</p>

<hr>
<h2 id='map_module'>Check the occurrence records in a interactive map module</h2><span id='topic+map_module'></span>

<h3>Description</h3>

<p>Allows to delete occurrence records and to select occurrence points by
classification levels or by drawing spatial polygons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_module(
  occ.cl,
  action = "clean",
  institution.code = "institutionCode",
  collection.code = "collectionCode",
  catalog.number = "catalogNumber",
  year = "year",
  date.identified = "dateIdentified",
  species = "species",
  identified.by = "identifiedBy",
  decimal.latitude = "decimalLatitude",
  decimal.longitude = "decimalLongitude",
  basis.of.record = "basisOfRecord",
  media.type = "mediaType",
  occurrence.id = "occurrenceID",
  institution.source,
  year.event,
  scientific.name,
  determined.by,
  latitude,
  longitude,
  basis.of.rec,
  occ.id
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_module_+3A_occ.cl">occ.cl</code></td>
<td>
<p>Data frame with occurrence records information already
classified by <code><a href="#topic+classify_occ">classify_occ</a></code> function.</p>
</td></tr>
<tr><td><code id="map_module_+3A_action">action</code></td>
<td>
<p>a string with '&quot;clean&quot;' or '&quot;flag&quot;' which defines the action
of 'map_module' function with the occurrence dataset. Default is '&quot;clean&quot;'.
If the string is '&quot;clean&quot;' the dataset returned only the occurrences records
selected by the user. If the string is '&quot;flag&quot;', a column named
'map_module_flag' is added in the output dataset, with tags 'selected' and
'deleted', following the choices of the user in the application.</p>
</td></tr>
<tr><td><code id="map_module_+3A_institution.code">institution.code</code></td>
<td>
<p>column name of <code>occ</code> with the name (or acronym)
in use by the institution having custody of the object(s) or information
referred to in the record.</p>
</td></tr>
<tr><td><code id="map_module_+3A_collection.code">collection.code</code></td>
<td>
<p>column name of <code>occ</code> with The name, acronym,
code, or initials identifying the collection or data set from which the
record was derived.</p>
</td></tr>
<tr><td><code id="map_module_+3A_catalog.number">catalog.number</code></td>
<td>
<p>column name of <code>occ</code> with an identifier
(preferably unique) for the record within the data set or collection.</p>
</td></tr>
<tr><td><code id="map_module_+3A_year">year</code></td>
<td>
<p>Column name of <code>occ</code> the four-digit year in which the
Event occurred, according to the Common Era Calendar.</p>
</td></tr>
<tr><td><code id="map_module_+3A_date.identified">date.identified</code></td>
<td>
<p>Column name of <code>occ</code> with the date on which the
subject was determined as representing the Taxon.</p>
</td></tr>
<tr><td><code id="map_module_+3A_species">species</code></td>
<td>
<p>column name of <code>occ</code> with the species names.</p>
</td></tr>
<tr><td><code id="map_module_+3A_identified.by">identified.by</code></td>
<td>
<p>column name of <code>occ</code> with the name of who
determined the species.</p>
</td></tr>
<tr><td><code id="map_module_+3A_decimal.latitude">decimal.latitude</code></td>
<td>
<p>column name of <code>occ</code> latitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="map_module_+3A_decimal.longitude">decimal.longitude</code></td>
<td>
<p>column name of <code>occ</code> longitude in decimal
degrees.</p>
</td></tr>
<tr><td><code id="map_module_+3A_basis.of.record">basis.of.record</code></td>
<td>
<p>column name with the specific nature of the data
record. See details.</p>
</td></tr>
<tr><td><code id="map_module_+3A_media.type">media.type</code></td>
<td>
<p>column name of <code>occ</code> with the media type of recording.
See details.</p>
</td></tr>
<tr><td><code id="map_module_+3A_occurrence.id">occurrence.id</code></td>
<td>
<p>column name of <code>occ</code> with link or code for the
occurrence record. See in
<a href="https://dwc.tdwg.org/terms/#dwc:occurrenceID">Darwin Core Format</a></p>
</td></tr>
<tr><td><code id="map_module_+3A_institution.source">institution.source</code></td>
<td>
<p>deprecated, use <code>institution.code</code> instead.</p>
</td></tr>
<tr><td><code id="map_module_+3A_year.event">year.event</code></td>
<td>
<p>deprecated, use <code>year</code> instead.</p>
</td></tr>
<tr><td><code id="map_module_+3A_scientific.name">scientific.name</code></td>
<td>
<p>deprecated, use <code>species</code> instead.</p>
</td></tr>
<tr><td><code id="map_module_+3A_determined.by">determined.by</code></td>
<td>
<p>deprecated, use <code>identified.by</code> instead</p>
</td></tr>
<tr><td><code id="map_module_+3A_latitude">latitude</code></td>
<td>
<p>deprecated, use <code>decimal.latitude</code> instead</p>
</td></tr>
<tr><td><code id="map_module_+3A_longitude">longitude</code></td>
<td>
<p>deprecated, use <code>decimal.longitude</code> instead</p>
</td></tr>
<tr><td><code id="map_module_+3A_basis.of.rec">basis.of.rec</code></td>
<td>
<p>deprecated, use <code>basis.of.record</code> instead.</p>
</td></tr>
<tr><td><code id="map_module_+3A_occ.id">occ.id</code></td>
<td>
<p>deprecated, use <code>occurrence.id</code> instead</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with the same columns of <code>occ.cl</code>.
</p>


<h3>Author(s)</h3>

<p>Arthur V. Rodrigues
</p>


<h3>See Also</h3>

<p><code><a href="#topic+classify_occ">classify_occ</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data("A.setosa")
data("speciaLists")

occ.class &lt;- classify_occ(A.setosa, speciaLists)
occ.selected &lt;- map_module(occ.class)
occ.selected


## End(Not run)

</code></pre>

<hr>
<h2 id='pol.coords'>Internal function of naturaList - Get coordinates from polygons created in leaflet
map</h2><span id='topic+pol.coords'></span>

<h3>Description</h3>

<p>Get coordinates from polygons created in leaflet map. It is used in
<a href="#topic+map_module">map_module</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pol.coords(input.polig)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pol.coords_+3A_input.polig">input.polig</code></td>
<td>
<p>an interactive polygon from leaflet map.
<code>input$map_draw_all_features$features[[i]]</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the coordinates
</p>

<hr>
<h2 id='pttn.all.specialist'>Internal function of naturaList - Return specialists names in a collapsed
string</h2><span id='topic+pttn.all.specialist'></span>

<h3>Description</h3>

<p>Return specialists names in a collapsed string to be used in the internal
function <a href="#topic+specialist.conference">specialist.conference</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pttn.all.specialist(specialist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pttn.all.specialist_+3A_specialist">specialist</code></td>
<td>
<p>specialist data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character. A regex pattern for the specialist full name
</p>

<hr>
<h2 id='r.temp.prec'>Raster of temperature and precipitation</h2><span id='topic+r.temp.prec'></span>

<h3>Description</h3>

<p>Raster of Annual Mean Temperature (bio1) and Total Annual Precipitation (bio2).
Layers were downloaded from worldclim database and cropped to the extent of
<code>cyathea_br</code> with a buffer of 100 km.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>r.temp.prec
</code></pre>


<h3>Format</h3>

<p>A raster with two layers
</p>

<hr>
<h2 id='reduce.df'>Internal function of naturaList - reduce data.frame of occurrence for a minimal
column length</h2><span id='topic+reduce.df'></span>

<h3>Description</h3>

<p>Reduce columns of occurrence data.frame required by
<a href="#topic+classify_occ">classify_occ</a> to facilitate internal operation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduce.df(
  df,
  institution.code = "institutionCode",
  collection.code = "collectionCode",
  catalog.number = "catalogNumber",
  year = "year",
  date.identified = "dateIdentified",
  species = "species",
  identified.by = "identifiedBy",
  decimal.latitude = "decimalLatitude",
  decimal.longitude = "decimalLongitude",
  basis.of.record = "basisOfRecord",
  media.type = "mediaType",
  occurrence.id = "occurrenceID",
  na.rm.coords = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reduce.df_+3A_df">df</code></td>
<td>
<p>occurrence data frame provided in <a href="#topic+classify_occ">classify_occ</a></p>
</td></tr>
<tr><td><code id="reduce.df_+3A_institution.code">institution.code</code></td>
<td>
<p>institution.code = &quot;institutionCode&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_collection.code">collection.code</code></td>
<td>
<p>collection.code = &quot;collectionCode&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_catalog.number">catalog.number</code></td>
<td>
<p>catalog.number = &quot;catalogNumber&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_year">year</code></td>
<td>
<p>year = &quot;year&quot;,</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_date.identified">date.identified</code></td>
<td>
<p>date.identified = &quot;dateIdentified&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_species">species</code></td>
<td>
<p>species = &quot;species&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_identified.by">identified.by</code></td>
<td>
<p>identified.by = &quot;identifiedBy&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_decimal.latitude">decimal.latitude</code></td>
<td>
<p>decimal.latitude = &quot;decimalLatitude&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_decimal.longitude">decimal.longitude</code></td>
<td>
<p>decimal.longitude = &quot;decimalLongitude&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_basis.of.record">basis.of.record</code></td>
<td>
<p>basis.of.record = &quot;basisOfRecord&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_media.type">media.type</code></td>
<td>
<p>media.type = &quot;mediaType&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_occurrence.id">occurrence.id</code></td>
<td>
<p>occ.id = &quot;occurrenceID&quot;</p>
</td></tr>
<tr><td><code id="reduce.df_+3A_na.rm.coords">na.rm.coords</code></td>
<td>
<p>na.rm.coords = TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with only the columns required for the <code>naturaList</code>
package
</p>


<h3>See Also</h3>

<p><a href="#topic+classify_occ">classify_occ</a>
</p>

<hr>
<h2 id='rm.coord.dup'>Internal function of naturaList - Remove duplicate occurrence</h2><span id='topic+rm.coord.dup'></span>

<h3>Description</h3>

<p>Remove duplicated occurrence based on coordinates. It is used in
<a href="#topic+grid_filter">grid_filter</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm.coord.dup(x, decimal.latitude, decimal.longitude)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rm.coord.dup_+3A_x">x</code></td>
<td>
<p>data frame with filtered occurrences</p>
</td></tr>
<tr><td><code id="rm.coord.dup_+3A_decimal.latitude">decimal.latitude</code></td>
<td>
<p>name of column with decimal.latitude</p>
</td></tr>
<tr><td><code id="rm.coord.dup_+3A_decimal.longitude">decimal.longitude</code></td>
<td>
<p>name of column with decimal.longitude</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with occurrence records
</p>

<hr>
<h2 id='spec_names_ex'>Example of specialist names with accent marks</h2><span id='topic+spec_names_ex'></span>

<h3>Description</h3>

<p>Example of specialist names with accent marks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spec_names_ex
</code></pre>


<h3>Format</h3>

<p>character
</p>

<hr>
<h2 id='specialist.conference'>Internal function of naturaList - Confirm if an occurrence record was identified by
a specialist without ambiguity</h2><span id='topic+specialist.conference'></span>

<h3>Description</h3>

<p>Confirm if an occurrence record was identified by
a specialist without ambiguity. It is used inside
<a href="#topic+classify_occ">classify_occ</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>specialist.conference(pt.df, specialist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="specialist.conference_+3A_pt.df">pt.df</code></td>
<td>
<p>a line of the reduced version of the occurrence data frame</p>
</td></tr>
<tr><td><code id="specialist.conference_+3A_specialist">specialist</code></td>
<td>
<p>specialist data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character with naturaList level code <code>"1_det_by_spec"</code> or
<code>"1_det_by_spec_verify"</code>
</p>

<hr>
<h2 id='speciaLists'>Specialists of ferns and lycophytes of Brazil</h2><span id='topic+speciaLists'></span>

<h3>Description</h3>

<p>A dataset containing the specialists of ferns and lycophytes of Brazil formatted
to be used by <code>naturaList</code> package. This data serves as a format example for <code>spec</code> argument in
<code><a href="#topic+classify_occ">classify_occ</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>speciaLists
</code></pre>


<h3>Format</h3>

<p>A data frame with 27 rows and 8 columns:
</p>

<dl>
<dt>LastName</dt><dd><p>Last name of the specialist.</p>
</dd>
<dt>Name1</dt><dd><p>Columns with the names of specialist. Could be repeated as
long as needed. In this data Name* was repeated three times.</p>
</dd>
<dt>Name2</dt><dd><p>Columns with the names of specialist.</p>
</dd>
<dt>Name3</dt><dd><p>Columns with the names of specialist.</p>
</dd>
<dt>Name4</dt><dd><p>Columns with the names of specialist.</p>
</dd>
<dt>Abbrev1</dt><dd><p>Columns with the abbreviation (one character) of the names of
specialists. Could be repeated as long as needed. In this data Abbrev*
was repeated three times.</p>
</dd>
<dt>Abbrev2</dt><dd><p>Columns with the abbreviation (one character) of the names of
specialists.</p>
</dd>
<dt>Abbrev3</dt><dd><p>Columns with the abbreviation (one character) of the names of
specialists.</p>
</dd>
</dl>



<h3>Source</h3>

<p>The specialists names was derived from the authors of paper:
<a href="https://doi.org/10.1590/2175-7860201566410">doi:10.1590/2175-7860201566410</a>
</p>

<hr>
<h2 id='verify.specialist'>Internal function of naturaList - Verify if a string has unambiguous specialist
name</h2><span id='topic+verify.specialist'></span>

<h3>Description</h3>

<p>Based on pattern generated by <a href="#topic+pttn.all.specialist">pttn.all.specialist</a> it
verifies if a string has unambiguous specialist name. It is used in internal
function <a href="#topic+specialist.conference">specialist.conference</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>verify.specialist(pattern, string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="verify.specialist_+3A_pattern">pattern</code></td>
<td>
<p>a pattern from <a href="#topic+pttn.all.specialist">pttn.all.specialist</a> function</p>
</td></tr>
<tr><td><code id="verify.specialist_+3A_string">string</code></td>
<td>
<p>string with the name of who identified the specimen</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character. <code>""</code> or <code>"_verify"</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
