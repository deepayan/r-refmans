<!DOCTYPE html><html><head><title>Help for package SelectionBias</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SelectionBias}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SelectionBias-package'><p>SelectionBias: Calculates Bounds for the Selection Bias for Binary Treatment and Outcome Variables</p></a></li>
<li><a href='#AFbound'><p>Assumption-free bound</p></a></li>
<li><a href='#CAFbound'><p>Counterfactual assumption-free bound</p></a></li>
<li><a href='#GAFbound'><p>Generalized assumption-free bound</p></a></li>
<li><a href='#sensitivityparametersM'><p>Sensitivity parameters for the Smith and VanderWeele bound and the GAF bound</p></a></li>
<li><a href='#SVbound'><p>Smith and VanderWeele bound</p></a></li>
<li><a href='#SVboundparametersM'><p>Sensitivity parameters for the Smith and VanderWeele bound</p></a></li>
<li><a href='#SVboundsharp'><p>Check if the Smith and VanderWeele bound in the subpopulation is sharp</p></a></li>
<li><a href='#zika_learner'><p>Simulated data set emulating a zika outbreak in Brazil</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Calculates Bounds for the Selection Bias for Binary Treatment
and Outcome Variables</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Computes bounds and sensitivity parameters as part of sensitivity 
    analysis for selection bias. Different bounds are provided: the SV (Smith 
    and VanderWeele), AF (assumption-free) bound, GAF (generalized 
    AF), and CAF (counterfactual AF) bounds. The calculation of the sensitivity 
    parameters for the SV and GAF bounds assume an additional dependence 
    structure in form of a generalized M-structure. The bounds can be
    calculated for any structure as long as the necessary assumptions hold. See 
    Smith and VanderWeele (2019) &lt;<a href="https://doi.org/10.1097%2FEDE.0000000000001032">doi:10.1097/EDE.0000000000001032</a>&gt;, 
    Zetterstrom and Waernbaum (2022) &lt;<a href="https://doi.org/10.1515%2Fem-2022-0108">doi:10.1515/em-2022-0108</a>&gt; and
    Zetterstrom (2024) &lt;<a href="https://doi.org/10.1515%2Fem-2023-0033">doi:10.1515/em-2023-0033</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>arm, lifecycle, stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, table1, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/stizet/SelectionBias">https://github.com/stizet/SelectionBias</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/stizet/SelectionBias/issues">https://github.com/stizet/SelectionBias/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-27 07:52:54 UTC; stize216</td>
</tr>
<tr>
<td>Author:</td>
<td>Stina Zetterstrom <a href="https://orcid.org/0000-0003-0730-9425"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Ingeborg Waernbaum
    <a href="https://orcid.org/0000-0002-4457-5311"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Stina Zetterstrom &lt;stina.zetterstrom@statistics.uu.se&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-27 13:00:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='SelectionBias-package'>SelectionBias: Calculates Bounds for the Selection Bias for Binary Treatment and Outcome Variables</h2><span id='topic+SelectionBias'></span><span id='topic+SelectionBias-package'></span>

<h3>Description</h3>

<p>Computes bounds and sensitivity parameters as part of sensitivity analysis for selection bias. Different bounds are provided: the SV (Smith and VanderWeele), AF (assumption-free) bound, GAF (generalized AF), and CAF (counterfactual AF) bounds. The calculation of the sensitivity parameters for the SV and GAF bounds assume an additional dependence structure in form of a generalized M-structure. The bounds can be calculated for any structure as long as the necessary assumptions hold. See Smith and VanderWeele (2019) <a href="https://doi.org/10.1097/EDE.0000000000001032">doi:10.1097/EDE.0000000000001032</a>, Zetterstrom and Waernbaum (2022) <a href="https://doi.org/10.1515/em-2022-0108">doi:10.1515/em-2022-0108</a> and Zetterstrom (2024) <a href="https://doi.org/10.1515/em-2023-0033">doi:10.1515/em-2023-0033</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Stina Zetterstrom <a href="mailto:stina.zetterstrom@statistics.uu.se">stina.zetterstrom@statistics.uu.se</a> (<a href="https://orcid.org/0000-0003-0730-9425">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Ingeborg Waernbaum <a href="mailto:ingeborg.waernbaum@statistics.uu.se">ingeborg.waernbaum@statistics.uu.se</a> (<a href="https://orcid.org/0000-0002-4457-5311">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/stizet/SelectionBias">https://github.com/stizet/SelectionBias</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/stizet/SelectionBias/issues">https://github.com/stizet/SelectionBias/issues</a>
</p>
</li></ul>


<hr>
<h2 id='AFbound'>Assumption-free bound</h2><span id='topic+AFbound'></span>

<h3>Description</h3>

<p><code>AFbound()</code> returns a list with the AF upper and lower bounds.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AFbound(whichEst, outcome, treatment, selection = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AFbound_+3A_whichest">whichEst</code></td>
<td>
<p>Input string. Defining the causal estimand of interest.
Available options are as follows. (1) Relative risk in the total
population: &quot;RR_tot&quot;, (2) Risk difference in the total population:
&quot;RD_tot&quot;, (3) Relative risk in the subpopulation: &quot;RR_sub&quot;, (4) Risk
difference in the subpopulation: &quot;RD_sub&quot;.</p>
</td></tr>
<tr><td><code id="AFbound_+3A_outcome">outcome</code></td>
<td>
<p>Input vector. A binary outcome variable. Either the data
vector (length&gt;=3) or two conditional outcome probabilities with
P(Y=1|T=1,I_s=1) and P(Y=1|T=0,I_s=1) as first and second element.</p>
</td></tr>
<tr><td><code id="AFbound_+3A_treatment">treatment</code></td>
<td>
<p>Input vector. A binary treatment variable. Either the data
vector (length&gt;=3) or two conditional treatment probabilities with
P(T=1|I_s=1) and P(T=0|I_s=1) as first and second element.</p>
</td></tr>
<tr><td><code id="AFbound_+3A_selection">selection</code></td>
<td>
<p>Input vector or input scalar. A binary selection variable or
a selection probability. Can be omitted for subpopulation estimands.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the upper and lower AF bounds.
</p>


<h3>References</h3>

<p>Zetterstrom, Stina and Waernbaum, Ingeborg. &quot;Selection bias and
multiple inclusion criteria in observational studies&quot; Epidemiologic
Methods 11, no. 1 (2022): 20220108.
</p>
<p>Zetterstrom, Stina. &quot;Bounds for selection bias using outcome
probabilities&quot; Epidemiologic Methods 13, no. 1 (2024): 20230033
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example with selection indicator variable.
y = c(0, 0, 0, 0, 1, 1, 1, 1)
tr = c(0, 0, 1, 1, 0, 0, 1, 1)
sel = c(0, 1, 0, 1, 0, 1, 0, 1)
AFbound(whichEst = "RR_tot", outcome = y, treatment = tr, selection = sel)

# Example with selection probability.
selprob = mean(sel)
AFbound(whichEst = "RR_tot", outcome = y[sel==1], treatment = tr[sel==1],
 selection = selprob)

# Example with simulated data.
n = 1000
tr = rbinom(n, 1, 0.5)
y = rbinom(n, 1, 0.2 + 0.05 * tr)
sel = rbinom(n, 1, 0.4 + 0.1 * tr + 0.3 * y)
AFbound(whichEst = "RD_tot", outcome = y, treatment = tr, selection = sel)

</code></pre>

<hr>
<h2 id='CAFbound'>Counterfactual assumption-free bound</h2><span id='topic+CAFbound'></span>

<h3>Description</h3>

<p><code>CAFbound()</code> returns a list with the CAF upper and lower bounds. The
sensitivity parameters are inserted directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CAFbound(whichEst, M, m, outcome, treatment, selection = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CAFbound_+3A_whichest">whichEst</code></td>
<td>
<p>Input string. Defining the causal estimand of interest.
Available options are as follows. (1) Relative risk in the total
population: &quot;RR_tot&quot;, (2) Risk difference in the total population:
&quot;RD_tot&quot;, (3) Relative risk in the subpopulation: &quot;RR_sub&quot;, (4) Risk
difference in the subpopulation: &quot;RD_sub&quot;.</p>
</td></tr>
<tr><td><code id="CAFbound_+3A_m">M</code></td>
<td>
<p>Input value. Sensitivity parameter. Must be between 0 and 1 and
larger than m.</p>
</td></tr>
<tr><td><code id="CAFbound_+3A_m">m</code></td>
<td>
<p>Input value. Sensitivity parameter. Must be between 0 and 1 and
smaller than M.</p>
</td></tr>
<tr><td><code id="CAFbound_+3A_outcome">outcome</code></td>
<td>
<p>Input vector. A binary outcome variable. Either the data
vector (length&gt;=3) or two conditional outcome probabilities with
P(Y=1|T=1,I_s=1) and P(Y=1|T=0,I_s=1) as first and second element.</p>
</td></tr>
<tr><td><code id="CAFbound_+3A_treatment">treatment</code></td>
<td>
<p>Input vector. A binary treatment variable. Either the data
vector (length&gt;=3) or two conditional treatment probabilities with
P(T=1|I_s=1) and P(T=0|I_s=1) as first and second element.</p>
</td></tr>
<tr><td><code id="CAFbound_+3A_selection">selection</code></td>
<td>
<p>Input vector or input scalar. A binary selection variable or
a selection probability. Can be omitted for subpopulation estimands.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the upper and lower CAF bounds.
</p>


<h3>References</h3>

<p>Zetterstrom, Stina. &quot;Bounds for selection bias using outcome
probabilities&quot; Epidemiologic Methods 13, no. 1 (2024): 20230033
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example with selection indicator variable.
y = c(0, 0, 0, 0, 1, 1, 1, 1)
tr = c(0, 0, 1, 1, 0, 0, 1, 1)
sel = c(0, 1, 0, 1, 0, 1, 0, 1)
Mt = 0.8
mt = 0.2
CAFbound(whichEst = "RR_tot", M = Mt, m = mt, outcome = y, treatment = tr,
 selection = sel)

# Example with selection probability.
selprob = mean(sel)
CAFbound(whichEst = "RR_tot", M = Mt, m = mt, outcome = y[sel==1],
 treatment = tr[sel==1], selection = selprob)

# Example with subpopulation and no selection variable or probability.
Ms = 0.7
ms = 0.1
CAFbound(whichEst = "RR_sub", M = Ms, m = ms, outcome = y, treatment = tr)

# Example with simulated data.
n = 1000
tr = rbinom(n, 1, 0.5)
y = rbinom(n, 1, 0.2 + 0.05 * tr)
sel = rbinom(n, 1, 0.4 + 0.1 * tr + 0.3 * y)
Mt = 0.5
mt = 0.05
CAFbound(whichEst = "RD_tot", M = Mt, m = mt, outcome = y, treatment = tr,
 selection = sel)

</code></pre>

<hr>
<h2 id='GAFbound'>Generalized assumption-free bound</h2><span id='topic+GAFbound'></span>

<h3>Description</h3>

<p><code>GAFbound()</code> returns a list with the GAF upper and lower bounds. The
sensitivity parameters can be inserted directly or as output from
<code>sensitivityparametersM()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GAFbound(whichEst, M, m, outcome, treatment, selection = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="GAFbound_+3A_whichest">whichEst</code></td>
<td>
<p>Input string. Defining the causal estimand of interest.
Available options are as follows. (1) Relative risk in the total
population: &quot;RR_tot&quot;, (2) Risk difference in the total population:
&quot;RD_tot&quot;, (3) Relative risk in the subpopulation: &quot;RR_sub&quot;, (4) Risk
difference in the subpopulation: &quot;RD_sub&quot;.</p>
</td></tr>
<tr><td><code id="GAFbound_+3A_m">M</code></td>
<td>
<p>Input value. Sensitivity parameter. Must be between 0 and 1, larger
than m and larger than max_t P(Y=1|T=t,I_s=1).</p>
</td></tr>
<tr><td><code id="GAFbound_+3A_m">m</code></td>
<td>
<p>Input value. Sensitivity parameter. Must be between 0 and 1, smaller
than M and smaller than min_t P(Y=1|T=t,I_s=1).</p>
</td></tr>
<tr><td><code id="GAFbound_+3A_outcome">outcome</code></td>
<td>
<p>Input vector. A binary outcome variable. Either the data
vector (length&gt;=3) or two conditional outcome probabilities with
P(Y=1|T=1,I_s=1) and P(Y=1|T=0,I_s=1) as first and second element.</p>
</td></tr>
<tr><td><code id="GAFbound_+3A_treatment">treatment</code></td>
<td>
<p>Input vector. A binary treatment variable. Either the data
vector (length&gt;=3) or two conditional treatment probabilities with
P(T=1|I_s=1) and P(T=0|I_s=1) as first and second element.</p>
</td></tr>
<tr><td><code id="GAFbound_+3A_selection">selection</code></td>
<td>
<p>Input vector or input scalar. A binary selection variable or
a selection probability. Can be omitted for subpopulation estimands.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the upper and lower GAF bounds.
</p>


<h3>References</h3>

<p>Zetterstrom, Stina. &quot;Bounds for selection bias using outcome
probabilities&quot; Epidemiologic Methods 13, no. 1 (2024): 20230033
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example with selection indicator variable.
y = c(0, 0, 0, 0, 1, 1, 1, 1)
tr = c(0, 0, 1, 1, 0, 0, 1, 1)
sel = c(0, 1, 0, 1, 0, 1, 0, 1)
Mt = 0.8
mt = 0.2
GAFbound(whichEst = "RR_tot", M = Mt, m = mt, outcome = y, treatment = tr,
 selection = sel)

# Example with selection probability.
selprob = mean(sel)
GAFbound(whichEst = "RR_tot", M = Mt, m = mt, outcome = y[sel==1],
 treatment = tr[sel==1], selection = selprob)

# Example with subpopulation and no selection variable or probability.
Ms = 0.7
ms = 0.1
GAFbound(whichEst = "RR_sub", M = Ms, m = ms, outcome = y, treatment = tr)

# Example with simulated data.
n = 1000
tr = rbinom(n, 1, 0.5)
y = rbinom(n, 1, 0.2 + 0.05 * tr)
sel = rbinom(n, 1, 0.4 + 0.1 * tr + 0.3 * y)
Mt = 0.5
mt = 0.05
GAFbound(whichEst = "RD_tot", M = Mt, m = mt, outcome = y, treatment = tr,
 selection = sel)

</code></pre>

<hr>
<h2 id='sensitivityparametersM'>Sensitivity parameters for the Smith and VanderWeele bound and the GAF bound</h2><span id='topic+sensitivityparametersM'></span>

<h3>Description</h3>

<p><code>sensitivityparametersM()</code> returns a list with the sensitivity parameters
and an indicator if bias is negative and the treatment coding is reversed
for an assumed model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sensitivityparametersM(
  whichEst,
  whichBound,
  Vval,
  Uval,
  Tcoef,
  Ycoef,
  Scoef,
  Mmodel,
  pY1_T1_S1,
  pY1_T0_S1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sensitivityparametersM_+3A_whichest">whichEst</code></td>
<td>
<p>Input string. Defining the causal estimand of interest.
Available options are as follows. (1) Relative risk in the total
population: &quot;RR_tot&quot;, (2) Risk difference in the total population:
&quot;RD_tot&quot;, (3) Relative risk in the subpopulation: &quot;RR_sub&quot;, (4) Risk
difference in the subpopulation: &quot;RD_sub&quot;.</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_whichbound">whichBound</code></td>
<td>
<p>Input string. Defining the bound of interest.
Available options are as follows. (1) SV bound: &quot;SV&quot;, (2) GAF bound: &quot;GAF&quot;.</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_vval">Vval</code></td>
<td>
<p>Input matrix. The first column is the values of the categories of
V. The second column is the probabilities of the categories of V. If V is
continuous, use a fine grid of values and probabilities.</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_uval">Uval</code></td>
<td>
<p>Input matrix. The first column is the values of the categories of
U. The second column is the probabilities of the categories of U. If U is
continuous, use a fine grid of values and probabilities.</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_tcoef">Tcoef</code></td>
<td>
<p>Input vector. Two numerical elements. The first element is the
intercept in the model for the treatment. The second element is the slope
in the model for the treatment.</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_ycoef">Ycoef</code></td>
<td>
<p>Input vector. Three numerical elements. The first element is the
intercept in the model for the outcome. The second element is the slope for
T in the model for the outcome. The third element is the slope for U in the
model for the outcome.</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_scoef">Scoef</code></td>
<td>
<p>Input matrix. Numerical matrix of size K by 4, where K is the
number of selection variables. Each row is the coefficients for one
selection variable. The first column is the intercepts in the models for
the selection variables. The second column is the slopes for V in the
models for the selection variables. The third column is the slopes for U in
the models for the selection variables. The fourth column is the slopes for
T in the models for the selection variables.</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_mmodel">Mmodel</code></td>
<td>
<p>Input string. Defining the models for the variables in the M
structure. If &quot;P&quot;, the probit model is used. If &quot;L&quot;, the logit model is</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_py1_t1_s1">pY1_T1_S1</code></td>
<td>
<p>Input scalar. The observed probability P(Y=1|T=1,I_S=1).</p>
</td></tr>
<tr><td><code id="sensitivityparametersM_+3A_py1_t0_s1">pY1_T0_S1</code></td>
<td>
<p>Input scalar. The observed probability P(Y=1|T=0,I_S=1).
used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the sensitivity parameters and, for the SV bound,
an indicator if the treatment has been reversed.
</p>


<h3>References</h3>

<p>Smith, Louisa H., and Tyler J. VanderWeele. &quot;Bounding bias due
to selection.&quot; Epidemiology (Cambridge, Mass.) 30.4 (2019): 509.
</p>
<p>Zetterstrom, Stina and Waernbaum, Ingeborg. &quot;Selection bias and multiple
inclusion criteria in observational studies&quot; Epidemiologic Methods 11, no.
1 (2022): 20220108.
</p>
<p>Zetterstrom, Stina. &quot;Bounds for selection bias using outcome probabilities&quot;
Epidemiologic Methods 13, no. 1 (2024): 20230033
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Examples with no selection bias.
V = matrix(c(1, 0, 0.1, 0.9), ncol = 2)
U = matrix(c(1, 0, 0.1, 0.9), ncol = 2)
Tr = c(0, 1)
Y = c(0, 0, 1)
S = matrix(c(1, 0, 0, 0, 1, 0, 0, 0), nrow = 2, byrow = TRUE)
probT1 = 0.534
probT0 = 0.534
sensitivityparametersM(whichEst = "RR_tot", whichBound = "SV", Vval = V,
 Uval = U, Tcoef = Tr, Ycoef = Y, Scoef = S, Mmodel = "P",
 pY1_T1_S1 = probT1, pY1_T0_S1 = probT0)

sensitivityparametersM(whichEst = "RR_tot", whichBound = "GAF", Vval = V,
 Uval = U, Tcoef = Tr, Ycoef = Y, Scoef = S, Mmodel = "P",
 pY1_T1_S1 = probT1, pY1_T0_S1 = probT0)


# Examples with selection bias. DGP from the zika example.
V = matrix(c(1, 0, 0.85, 0.15), ncol = 2)
U = matrix(c(1, 0, 0.5, 0.5), ncol = 2)
Tr = c(-6.2, 1.75)
Y = c(-5.2, 5.0, -1.0)
S = matrix(c(1.2, 2.2, 0.0, 0.5, 2.0, -2.75, -4.0, 0.0), ncol = 4)
probT1 = 0.286
probT0 = 0.004
sensitivityparametersM(whichEst = "RR_sub", whichBound = "SV", Vval = V,
 Uval = U, Tcoef = Tr, Ycoef = Y, Scoef = S, Mmodel = "L",
 pY1_T1_S1 = probT1, pY1_T0_S1 = probT0)

sensitivityparametersM(whichEst = "RR_sub", whichBound = "GAF", Vval = V,
 Uval = U, Tcoef = Tr, Ycoef = Y, Scoef = S, Mmodel = "L",
 pY1_T1_S1 = probT1, pY1_T0_S1 = probT0)


</code></pre>

<hr>
<h2 id='SVbound'>Smith and VanderWeele bound</h2><span id='topic+SVbound'></span>

<h3>Description</h3>

<p><code>SVbound()</code> returns a list with the SV bound. All sensitivity parameters for
the population of interest must be set to numbers, and the rest can be left
as <code>NULL</code>. The sensitivity parameters can be inserted directly or as output
from <code>sensitivityparametersM()</code>. If the causal estimand is expected to be
larger than the observational estimand, the recoding of the treatment has to
be done manually.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SVbound(
  whichEst,
  pY1_T1_S1,
  pY1_T0_S1,
  RR_UY_T1 = NULL,
  RR_UY_T0 = NULL,
  RR_SU_T1 = NULL,
  RR_SU_T0 = NULL,
  RR_UY_S1 = NULL,
  RR_TU_S1 = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SVbound_+3A_whichest">whichEst</code></td>
<td>
<p>Input string. Defining the causal estimand of interest.
Available options are as follows. (1) Relative risk in the total
population: &quot;RR_tot&quot;, (2) Risk difference in the total population:
&quot;RD_tot&quot;, (3) Relative risk in the subpopulation: &quot;RR_sub&quot;, (4) Risk
difference in the subpopulation: &quot;RD_sub&quot;.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_py1_t1_s1">pY1_T1_S1</code></td>
<td>
<p>Input value. The probability P(Y=1|T=1,I_S=1). Must be
between 0 and 1.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_py1_t0_s1">pY1_T0_S1</code></td>
<td>
<p>Input value. The probability P(Y=1|T=0,I_S=1). Must be
between 0 and 1.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_rr_uy_t1">RR_UY_T1</code></td>
<td>
<p>Input value. The sensitivity parameter RR_UY|T=1. Must be
greater than or equal to 1. Used in the bounds for the total population.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_rr_uy_t0">RR_UY_T0</code></td>
<td>
<p>Input value. The sensitivity parameter RR_UY|T=0. Must be
greater than or equal to 1. Used in the bounds for the total population.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_rr_su_t1">RR_SU_T1</code></td>
<td>
<p>Input value. The sensitivity parameter RR_SU|T=1. Must be
greater than or equal to 1. Used in the bounds for the total population.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_rr_su_t0">RR_SU_T0</code></td>
<td>
<p>Input value. The sensitivity parameter RR_SU|T=0. Must be
greater than or equal to 1. Used in the bounds for the total population.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_rr_uy_s1">RR_UY_S1</code></td>
<td>
<p>Input value. The sensitivity parameter RR_UY|S=1. Must be
greater than or equal to 1. Used in the bounds for the subpopulation.</p>
</td></tr>
<tr><td><code id="SVbound_+3A_rr_tu_s1">RR_TU_S1</code></td>
<td>
<p>Input value. The sensitivity parameter RR_TU|S=1. Must be
greater than or equal to 1. Used in the bounds for the subpopulation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the Smith and VanderWeele bound.
</p>


<h3>References</h3>

<p>Smith, Louisa H., and Tyler J. VanderWeele. &quot;Bounding bias due
to selection.&quot; Epidemiology (Cambridge, Mass.) 30.4 (2019): 509.
</p>
<p>Zetterstrom, Stina and Waernbaum, Ingeborg. &quot;Selection bias and multiple
inclusion criteria in observational studies&quot; Epidemiologic Methods 11, no.
1 (2022): 20220108.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example for relative risk in the total population.
SVbound(whichEst = "RR_tot", pY1_T1_S1 = 0.05, pY1_T0_S1 = 0.01,
 RR_UY_T1 = 2, RR_UY_T0 = 2, RR_SU_T1 = 1.7, RR_SU_T0 = 1.5)

# Example for risk difference in the total population.
SVbound(whichEst = "RD_tot", pY1_T1_S1 = 0.05, pY1_T0_S1 = 0.01,
 RR_UY_T1 = 2, RR_UY_T0 = 2, RR_SU_T1 = 1.7, RR_SU_T0 = 1.5)

# Example for relative risk in the subpopulation.
SVbound(whichEst = "RR_sub", pY1_T1_S1 = 0.05, pY1_T0_S1 = 0.01,
 RR_UY_S1 = 2.71, RR_TU_S1 = 2.33)

# Example for risk difference in the subpopulation.
SVbound(whichEst = "RD_sub", pY1_T1_S1 = 0.05, pY1_T0_S1 = 0.01,
 RR_UY_S1 = 2.71, RR_TU_S1 = 2.33)

</code></pre>

<hr>
<h2 id='SVboundparametersM'>Sensitivity parameters for the Smith and VanderWeele bound</h2><span id='topic+SVboundparametersM'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
<code>SVboundparametersM()</code> has been deprecated and is replaced by
<code>sensitivityparametersM()</code>.
</p>
<p><code>SVboundparametersM()</code> returns a list with the sensitivity parameters and an
indicator if the bias is negative and the treatment coding is reversed for an
assumed model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SVboundparametersM(
  whichEst,
  Vval,
  Uval,
  Tcoef,
  Ycoef,
  Scoef,
  Mmodel,
  pY1_T1_S1,
  pY1_T0_S1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SVboundparametersM_+3A_whichest">whichEst</code></td>
<td>
<p>Input string. Defining the causal estimand of interest.
Available options are as follows. (1) Relative risk in the total
population: &quot;RR_tot&quot;, (2) Risk difference in the total population:
&quot;RD_tot&quot;, (3) Relative risk in the subpopulation: &quot;RR_sub&quot;, (4) Risk
difference in the subpopulation: &quot;RD_sub&quot;.</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_vval">Vval</code></td>
<td>
<p>Input matrix. The first column is the values of the categories of
V. The second column is the probabilities of the categories of V. If V is
continuous, use a fine grid of values and probabilities.</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_uval">Uval</code></td>
<td>
<p>Input matrix. The first column is the values of the categories of
U. The second column is the probabilities of the categories of U. If U is
continuous, use a fine grid of values and probabilities.</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_tcoef">Tcoef</code></td>
<td>
<p>Input vector. Two numerical elements. The first element is the
intercept in the model for the treatment. The second element is the slope
in the model for the treatment.</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_ycoef">Ycoef</code></td>
<td>
<p>Input vector. Three numerical elements. The first element is the
intercept in the model for the outcome. The second element is the slope for
T in the model for the outcome. The third element is the slope for U in the
model for the outcome.</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_scoef">Scoef</code></td>
<td>
<p>Input matrix. Numerical matrix of size K by 4, where K is the
number of selection variables. Each row is the coefficients for one
selection variable. The first column is the intercepts in the models for
the selection variables. The second column is the slopes for V in the
models for the selection variables. The third column is the slopes for U in
the models for the selection variables. The fourth column is the slopes for
T in the models for the selection variables.</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_mmodel">Mmodel</code></td>
<td>
<p>Input string. Defining the models for the variables in the M
structure. If &quot;P&quot;, the probit model is used. If &quot;L&quot;, the logit model is</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_py1_t1_s1">pY1_T1_S1</code></td>
<td>
<p>Input scalar. The observed probability P(Y=1|T=1,I_S=1).</p>
</td></tr>
<tr><td><code id="SVboundparametersM_+3A_py1_t0_s1">pY1_T0_S1</code></td>
<td>
<p>Input scalar. The observed probability P(Y=1|T=0,I_S=1).
used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the sensitivity parameters and an indicator if the
treatment has been reversed.
</p>


<h3>References</h3>

<p>Smith, Louisa H., and Tyler J. VanderWeele. &quot;Bounding bias due
to selection.&quot; Epidemiology (Cambridge, Mass.) 30.4 (2019): 509.
</p>
<p>Zetterstrom, Stina and Waernbaum, Ingeborg. &quot;Selection bias and multiple
inclusion criteria in observational studies&quot; Epidemiologic Methods 11, no.
1 (2022): 20220108.
</p>

<hr>
<h2 id='SVboundsharp'>Check if the Smith and VanderWeele bound in the subpopulation is sharp</h2><span id='topic+SVboundsharp'></span>

<h3>Description</h3>

<p><code>SVboundsharp()</code> returns a string that indicates if the SV bound is sharp or
if it's inconclusive. If the bias is negative, the recoding of the treatment
has to be done manually.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SVboundsharp(BF_U, pY1_T0_S1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SVboundsharp_+3A_bf_u">BF_U</code></td>
<td>
<p>Input scalar. The bounding factor for the SV bounds in the
subpopulation. Must be equal to or above 1. Can be inserted directly or as
output from <code>sensitivityparametersM()</code>.</p>
</td></tr>
<tr><td><code id="SVboundsharp_+3A_py1_t0_s1">pY1_T0_S1</code></td>
<td>
<p>Input scalar. The probability P(Y=1|T=0,I_S=1).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string stating if the SV bound is sharp or inconclusive.
</p>


<h3>References</h3>

<p>Smith, Louisa H., and Tyler J. VanderWeele. &quot;Bounding bias due
to selection.&quot; Epidemiology (Cambridge, Mass.) 30.4 (2019): 509.
</p>
<p>Zetterstrom, Stina, and Ingeborg Waernbaum. &quot;SelectionBias: An R Package
for Bounding Selection Bias.&quot; arXiv preprint arXiv:2302.06518 (2023).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Example where the SV bound is sharp.
SVboundsharp(BF_U = 1.56, pY1_T0_S1 = 0.33)

# Example where the SV bound is inconclusive.
SVboundsharp(BF_U = 2, pY1_T0_S1 = 0.8)

</code></pre>

<hr>
<h2 id='zika_learner'>Simulated data set emulating a zika outbreak in Brazil</h2><span id='topic+zika_learner'></span>

<h3>Description</h3>

<p>The data set is simulated to mimic real data. For the data generating
process, see the vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(zika_learner)
</code></pre>


<h3>Format</h3>

<p>A data frame with 5,000 observations on the following 7 binary
variables:
</p>

<dl>
<dt>mic_ceph</dt><dd><p>Indication if the baby has microcephaly (1=microcephaly, 0=not microcephaly)</p>
</dd>
<dt>zika</dt><dd><p>Indication if the mother is infected by zika (1=infected, 0=not infected)</p>
</dd>
<dt>urban</dt><dd><p>Indication of the living area of the subject (1=urban, 0=rural)</p>
</dd>
<dt>SES</dt><dd><p>Indication of the socioeconomic status of the subject (1=high, 0=low)</p>
</dd>
<dt>birth</dt><dd><p>First selection variable. Indication if the baby is born (1=birth, 0=terminated birth)</p>
</dd>
<dt>hospital</dt><dd><p>Second selection variable. Indication if the delivery is in a public hospital (1=public, 0=private)</p>
</dd>
<dt>sel_ind</dt><dd><p>Selection indicator variable. Indication if the subject is included in the study (1=included, 0=not included)</p>
</dd>
</dl>



<h3>Details</h3>

<p>The data set is created to use in examples of selection bias. A
similar example has previously been used in articles that construct bounds
for selection bias (Smith and VanderWeele, 2019; Zetterstrom and Waernbaum,
2022).
</p>


<h3>References</h3>

<p>de Araújo, Thalia Velho Barreto, et al. &quot;Association between
microcephaly, Zika virus infection, and other risk factors in Brazil: final
report of a case-control study.&quot; The Lancet infectious diseases 18.3
(2018): 328-336.
</p>
<p>de Oliveira, Wanderson Kleber, et al. &quot;Infection-related microcephaly after
the 2015 and 2016 Zika virus outbreaks in Brazil: a surveillance-based
analysis.&quot; The Lancet 390.10097 (2017): 861-870.
</p>
<p>Ali, Sofia, et al. &quot;Environmental and social change drive the explosive
emergence of Zika virus in the Americas.&quot; PLoS neglected tropical diseases
11.2 (2017): e0005135.
</p>
<p>Lebov, Jill F., et al. &quot;International prospective observational cohort
study of Zika in infants and pregnancy (ZIP study): study protocol.&quot; BMC
Pregnancy and Childbirth 19.1 (2019): 1-10.
</p>
<p>Malta, Monica, et al. &quot;Abortion in Brazil: the case for women's rights,
lives, and choices.&quot; The Lancet Public Health 4.11 (2019): e552.
</p>
<p>Smith, Louisa H., and Tyler J. VanderWeele. &quot;Bounding bias due to
selection.&quot; Epidemiology (Cambridge, Mass.) 30.4 (2019): 509.
</p>
<p>Zetterstrom, Stina and Waernbaum, Ingeborg. &quot;Selection bias and multiple
inclusion criteria in observational studies&quot; Epidemiologic Methods 11, no.
1 (2022): 20220108.
</p>
<p>https://data.worldbank.org/indicator/SP.URB.TOTL.IN.ZS?locations=BR
</p>
<p>https://agenciabrasil.ebc.com.br/en/geral/noticia/2020-12/number-births-registered-brazil-down-2019
</p>
<p>https://www.angloinfo.com/how-to/brazil/healthcare/health-system
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
