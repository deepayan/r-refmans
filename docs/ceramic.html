<!DOCTYPE html><html lang="en-US"><head><title>Help for package ceramic</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ceramic}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ceramic-package'><p>ceramic: Download Online Imagery Tiles</p></a></li>
<li><a href='#cc_location'><p>Obtain tiled imagery by location query</p></a></li>
<li><a href='#ceramic_cache'><p>Ceramic file cache</p></a></li>
<li><a href='#ceramic_tiles'><p>Tile files</p></a></li>
<li><a href='#cities'><p>Cities locations</p></a></li>
<li><a href='#clear_ceramic_cache'><p>Clear ceramic cache</p></a></li>
<li><a href='#get_api_key'><p>Get API key for Mapbox service</p></a></li>
<li><a href='#get_tiles'><p>Download imagery tiles</p></a></li>
<li><a href='#get-tiles-constrained'><p>Get tiles with specific constraints</p></a></li>
<li><a href='#mercator_tile_extent'><p>Tile extent</p></a></li>
<li><a href='#plot_tiles'><p>Plot slippy map tiles</p></a></li>
<li><a href='#unpack_rgb'><p>Unpack Mapbox terrain-RGB</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Download Online Imagery Tiles</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.5</td>
</tr>
<tr>
<td>Description:</td>
<td>Download imagery tiles to a standard cache and load the data into raster objects. 
 Facilities for 'AWS' terrain <a href="https://registry.opendata.aws/terrain-tiles/">https://registry.opendata.aws/terrain-tiles/</a> terrain and 'Mapbox' 
 <a href="https://www.mapbox.com/">https://www.mapbox.com/</a> servers are provided. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), terra</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>curl, dplyr, fs (&ge; 1.3.0), glue, graphics, purrr, rappdirs,
rlang, sp, slippymath (&ge; 0.3.0), stats, tibble, utils,
crsmeta, vapour, stringr, wk</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://hypertidy.github.io/ceramic/">https://hypertidy.github.io/ceramic/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/hypertidy/ceramic/issues">https://github.com/hypertidy/ceramic/issues</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-27 02:59:07 UTC; mdsumner</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Sumner <a href="https://orcid.org/0000-0002-2471-7511"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Miles McBain <a href="https://orcid.org/0000-0003-2865-2548"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Ben Raymond [ctb] (regex wizardry)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Sumner &lt;mdsumner@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-27 06:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ceramic-package'>ceramic: Download Online Imagery Tiles</h2><span id='topic+ceramic-package'></span><span id='topic+ceramic'></span>

<h3>Description</h3>

<p>Download imagery tiles to a standard cache and load the data into raster objects. Facilities for 'AWS' terrain <a href="https://registry.opendata.aws/terrain-tiles/">https://registry.opendata.aws/terrain-tiles/</a> terrain and 'Mapbox' <a href="https://www.mapbox.com/">https://www.mapbox.com/</a> servers are provided.
</p>
<p>The ceramic package provides tools to download  raster tiles from online servers.
</p>


<h3>Details</h3>

<p>Any process that can trigger downloads will first check the <code><a href="#topic+ceramic_cache">ceramic_cache()</a></code> in case the tile already exists.
</p>
<p>It can also load raster data from online servers to obtain imagery, but we let GDAL manage that.
</p>
<p>If you want to deal with the tiles downloaded directly, see <code><a href="#topic+ceramic_tiles">ceramic_tiles()</a></code>.
</p>
<p>The main functions are for downloading tiles and each accepts a spatial
object for the first argument, alternatively a raster extent, or location:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+get_tiles">get_tiles</a></code></td><td style="text-align: left;"> Download tiles for a given service for an extent and resolution</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+get_tiles_buffer">get_tiles_buffer</a></code></td><td style="text-align: left;"> Download tiles based on location and buffer (width, height) in metres</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+get_tiles_dim">get_tiles_dim</a></code></td><td style="text-align: left;"> Download tiles based on extent and output dimension in pixels</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+get_tiles_zoom">get_tiles_zoom</a></code></td><td style="text-align: left;"> Download tiles base on extent and zoom level </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Two helper functions will load imagery into a raster object:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+cc_location">cc_location</a></code></td><td style="text-align: left;"> Download tiles and build a raster object of imagery</td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+cc_elevation">cc_elevation</a></code></td><td style="text-align: left;"> Download tiles and build a raster object of elevation data</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Administration functions for handling the file cache and required API key for on online service:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+get_api_key">get_api_key</a></code></td><td style="text-align: left;"> Return the stored key for online API, or NULL </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ceramic_cache">ceramic_cache</a></code></td><td style="text-align: left;"> Report the location of the tile cache </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+clear_ceramic_cache">clear_ceramic_cache</a></code></td><td style="text-align: left;"> Delete all files in the tile cache (use with caution!) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Other functions that are either rarely used or considered subject to change:
</p>

<table>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ceramic_tiles">ceramic_tiles</a></code></td><td style="text-align: left;"> Find particular tiles from the cache </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+mercator_tile_extent">mercator_tile_extent</a></code></td><td style="text-align: left;"> Abstract raster-extent form of the spherical Mercator tile system, expressed in tile-index and zoom </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+plot_tiles">plot_tiles</a></code></td><td style="text-align: left;"> Plot the tiles from <code><a href="#topic+ceramic_tiles">ceramic_tiles</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+tiles_to_polygon">tiles_to_polygon</a></code></td><td style="text-align: left;"> Convert <code><a href="#topic+ceramic_tiles">ceramic_tiles</a></code> to simple features format </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+cc_heard">cc_heard</a></code></td><td style="text-align: left;"> Specific location hardcoded form of <code><a href="#topic+cc_location">cc_location</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+cc_kingston">cc_kingston</a></code></td><td style="text-align: left;"> Specific location hardcoded form of <code><a href="#topic+cc_location">cc_location</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+cc_macquarie">cc_macquarie</a></code></td><td style="text-align: left;"> Specific location hardcoded form of <code><a href="#topic+cc_location">cc_location</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Michael Sumner <a href="mailto:mdsumner@gmail.com">mdsumner@gmail.com</a> (<a href="https://orcid.org/0000-0002-2471-7511">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Miles McBain (<a href="https://orcid.org/0000-0003-2865-2548">ORCID</a>) [contributor]
</p>
</li>
<li><p> Ben Raymond (regex wizardry) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://hypertidy.github.io/ceramic/">https://hypertidy.github.io/ceramic/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/hypertidy/ceramic/issues">https://github.com/hypertidy/ceramic/issues</a>
</p>
</li></ul>


<hr>
<h2 id='cc_location'>Obtain tiled imagery by location query</h2><span id='topic+cc_location'></span><span id='topic+cc_elevation'></span><span id='topic+cc_macquarie'></span><span id='topic+cc_davis'></span><span id='topic+cc_mawson'></span><span id='topic+cc_casey'></span><span id='topic+cc_heard'></span><span id='topic+cc_kingston'></span>

<h3>Description</h3>

<p>Obtain imagery or elevation data by location query. The first argument
<code>loc</code> may be a spatial object (sp, raster, sf) or a 2-column matrix with a single
longitude and latitude value. Use <code>buffer</code> to define a width and height to pad
around the raw longitude and latitude in metres. If <code>loc</code> has an extent, then
<code>buffer</code> is ignored.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cc_location(
  loc = NULL,
  buffer = 5000,
  type = "mapbox.satellite",
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)

cc_macquarie(
  loc = c(158.93835, -54.49871),
  buffer = 5000,
  type = "mapbox.satellite",
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)

cc_davis(
  loc = c(77 + 58/60 + 3/3600, -(68 + 34/60 + 36/3600)),
  buffer = 5000,
  type = "mapbox.satellite",
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)

cc_mawson(
  loc = c(62 + 52/60 + 27/3600, -(67 + 36/60 + 12/3600)),
  buffer = 5000,
  type = "mapbox.satellite",
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)

cc_casey(
  loc = cbind(110 + 31/60 + 36/3600, -(66 + 16/60 + 57/3600)),
  buffer = 5000,
  type = "mapbox.satellite",
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)

cc_heard(
  loc = c(73 + 30/60 + 30/3600, -(53 + 0 + 0/3600)),
  buffer = 5000,
  type = "mapbox.satellite",
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)

cc_kingston(
  loc = c(147.2901, -42.98682),
  buffer = 5000,
  type = "mapbox.satellite",
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)

cc_elevation(
  loc = NULL,
  buffer = 5000,
  type = NULL,
  ...,
  zoom = NULL,
  max_tiles = NULL,
  debug = FALSE,
  dimension = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cc_location_+3A_loc">loc</code></td>
<td>
<p>a longitude, latitude pair of coordinates, or a spatial object</p>
</td></tr>
<tr><td><code id="cc_location_+3A_buffer">buffer</code></td>
<td>
<p>with in metres to extend around the location, ignored if 'loc' is a spatial object with extent</p>
</td></tr>
<tr><td><code id="cc_location_+3A_type">type</code></td>
<td>
<p>character string of provider imagery type (see Details)</p>
</td></tr>
<tr><td><code id="cc_location_+3A_...">...</code></td>
<td>
<p>deprecated arguments that <em>used_to_be</em> passed to internal function now ignored since v 0.8.0 (see <code><a href="#topic+get_tiles">get_tiles()</a></code>)</p>
</td></tr>
<tr><td><code id="cc_location_+3A_zoom">zoom</code></td>
<td>
<p>deprecated (use <code>dimension</code>)</p>
</td></tr>
<tr><td><code id="cc_location_+3A_max_tiles">max_tiles</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="cc_location_+3A_debug">debug</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="cc_location_+3A_dimension">dimension</code></td>
<td>
<p>one or two numbers, used to determine the number of pixels width, height - set one to zero to let GDAL figure it out, or leave as NULL to get something suitable</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>cc_elevation</code> does extra work to unpack the DEM tiles from the RGB format.
</p>
<p>Available types are 'elevation-tiles-prod' for AWS elevation tiles, and 'mapbox.satellite',
and 'mapbox.terrain-rgb', 'tasmap' or one of 'tasmap_street' (TTSA), 'tasmap_aerialphoto2020', 'tasmap_aerialphoto2021', 'tasmap_aerialphoto2022',
'tasmap_aerialphoto2023', 'tasmap_esgismapbookpublic', 'tasmap_hillshadegrey', 'tasmap_hillshade', 'tasmap_orthophoto',
'tasmap_simplebasemap', 'tasmap_tasmap100k', 'tasmap_tasmap250k', 'tasmap_tasmap25k', 'tasmap_tasmap500k', 'tasmap_tasmapraster', 'tasmap_topographicgrayscale', 'tasmap_topographic'.
</p>
<p>Note that arguments <code>max_tiles</code> and <code>zoom</code> are mutually exclusive. One or both must be <code>NULL</code>. If
both are NULL then <code>max_tiles = 16L</code>.
</p>


<h3>Value</h3>

<p>A <code><a href="terra.html#topic+rast">terra::rast()</a></code> object, either with three layers (Red, Green, Blue) or with
a single layer in the case of <code><a href="#topic+cc_elevation">cc_elevation()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (!is.null(get_api_key())) {

 img &lt;- cc_location(cbind(147, -42), buffer = 1e5)

 ## this source does not need the Mapbox API, but we won't run the example unless it's set
 dem &lt;- cc_kingston(buffer = 1e4, type = "elevation-tiles-prod")
 terra::plot(dem, col = grey(seq(0, 1, length = 94)))

 ## Mapbox imagery
 ## Not run: 
 im &lt;- cc_macquarie()
 plotRGB(im)
 
## End(Not run)
 }
</code></pre>

<hr>
<h2 id='ceramic_cache'>Ceramic file cache</h2><span id='topic+ceramic_cache'></span>

<h3>Description</h3>

<p>File system location where ceramic stores its cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ceramic_cache(force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ceramic_cache_+3A_force">force</code></td>
<td>
<p>set to <code>TRUE</code> to create the location without asking the user</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If allowed, the cache will be created at <code>file.path(rappdirs::user_cache_dir(), ".ceramic")</code>,
which corresponds to '~/.cache/.ceramic' for a given user.
</p>
<p>If the file cache location does not exist, the user will be asked in interactive mode
for permission. For non-interactive mode use the <code>force</code> argument.
</p>
<p>It is not currently possible to customize the cache location. To clear the cache (completely)
see <code>clear_ceramic_cache()</code>.
</p>


<h3>Value</h3>

<p>A character vector, the file path location of the cache.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
 ceramic_cache()
}
</code></pre>

<hr>
<h2 id='ceramic_tiles'>Tile files</h2><span id='topic+ceramic_tiles'></span>

<h3>Description</h3>

<p>Find existing files in the cache. Various options can be controlled, this is
liable to change pending generalization across providers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ceramic_tiles(
  zoom = NULL,
  type = "mapbox.satellite",
  source = "api.mapbox.com",
  glob = NULL,
  regexp = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ceramic_tiles_+3A_zoom">zoom</code></td>
<td>
<p>zoom level</p>
</td></tr>
<tr><td><code id="ceramic_tiles_+3A_type">type</code></td>
<td>
<p>imagery type</p>
</td></tr>
<tr><td><code id="ceramic_tiles_+3A_source">source</code></td>
<td>
<p>imagery source</p>
</td></tr>
<tr><td><code id="ceramic_tiles_+3A_glob">glob</code></td>
<td>
<p>see <code>fs::dir_ls</code></p>
</td></tr>
<tr><td><code id="ceramic_tiles_+3A_regexp">regexp</code></td>
<td>
<p>see <code>fs::dir_ls</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of tile file paths with tile index, zoom, type, version,
source and spatial extent.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive() &amp;&amp; !is.null(get_api_key())) {
 tiles &lt;- ceramic_tiles(zoom = 0)
}
</code></pre>

<hr>
<h2 id='cities'>Cities locations</h2><span id='topic+cities'></span>

<h3>Description</h3>

<p>Dataset from package maps.
</p>


<h3>Details</h3>

<p>Data frame with columns &quot;name&quot;        &quot;country.etc&quot; &quot;pop&quot;         &quot;lat&quot;         &quot;long&quot;        &quot;capital&quot;.
</p>

<hr>
<h2 id='clear_ceramic_cache'>Clear ceramic cache</h2><span id='topic+clear_ceramic_cache'></span>

<h3>Description</h3>

<p>Delete all downloaded files in the <code><a href="#topic+ceramic_cache">ceramic_cache()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_ceramic_cache(clobber = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clear_ceramic_cache_+3A_clobber">clobber</code></td>
<td>
<p>set to <code>TRUE</code> to avoid checks and delete files</p>
</td></tr>
<tr><td><code id="clear_ceramic_cache_+3A_...">...</code></td>
<td>
<p>reserved for future arguments, currently ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function is called for its side effect, but also returns the file paths as a
character vector whether deleted or not, or NULL if the user cancels.
</p>

<hr>
<h2 id='get_api_key'>Get API key for Mapbox service</h2><span id='topic+get_api_key'></span>

<h3>Description</h3>

<p>Mapbox tile providers require an API key. Other providers may not need a key and so this is ignored.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_api_key(api = "mapbox", ..., silent = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_api_key_+3A_api">api</code></td>
<td>
<p>character string denoting which service (&quot;mapbox&quot; only)</p>
</td></tr>
<tr><td><code id="get_api_key_+3A_...">...</code></td>
<td>
<p>currently ignored</p>
</td></tr>
<tr><td><code id="get_api_key_+3A_silent">silent</code></td>
<td>
<p>run in completely silent mode, default is to provide a warning</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <a href="https://CRAN.r-project.org/package=mapdeck/">mapdeck package</a> has a more comprehensive tool for
setting the Mapbox API key, if this is in use ceramic will find it first and use it.
</p>
<p>To set your Mapbox API key obtain a key from <a href="https://account.mapbox.com/access-tokens/">https://account.mapbox.com/access-tokens/</a>
</p>
<pre>
1) Run this to set for the session 'Sys.setenv(MAPBOX_API_KEY=&lt;yourkey&gt;)'

OR,

2) To set permanently store 'MAPBOX_API_KEY=&lt;yourkey&gt;' in '~/.Renviron'.
</pre>
<p>There is a fairly liberal allowance for the actual name of the environment variable, any of
'MAPBOX_API_KEY', 'MAPBOX_API_TOKEN', 'MAPBOX_KEY', 'MAPBOX_TOKEN', or 'MAPBOX' will work (and they are
sought in that order).
</p>
<p>If no key is available, <code>NULL</code> is returned, with a warning.
</p>


<h3>Value</h3>

<p>The stored API key value, see Details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_api_key()
</code></pre>

<hr>
<h2 id='get_tiles'>Download imagery tiles</h2><span id='topic+get_tiles'></span><span id='topic+read_tiles'></span>

<h3>Description</h3>

<p>Obtain imagery or elevation tiles by location query. The first argument
<code>loc</code> may be a spatial object (sp, raster, sf) or a 2-column matrix with a single
longitude and latitude value. Use <code>buffer</code> to define a width and height to pad
around the raw longitude and latitude in metres. If <code>loc</code> has an extent, then
<code>buffer</code> is ignored.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_tiles(
  x,
  buffer,
  type = "mapbox.satellite",
  crop_to_buffer = TRUE,
  format = NULL,
  ...,
  zoom = NULL,
  debug = FALSE,
  max_tiles = NULL,
  base_url = NULL,
  verbose = TRUE,
  filename = ""
)

get_tiles(
  x,
  buffer,
  type = "mapbox.satellite",
  crop_to_buffer = TRUE,
  format = NULL,
  ...,
  zoom = NULL,
  debug = FALSE,
  max_tiles = NULL,
  base_url = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_tiles_+3A_x">x</code></td>
<td>
<p>a longitude, latitude pair of coordinates, or a spatial object</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_buffer">buffer</code></td>
<td>
<p>width in metres to extend around the location, ignored if 'x' is a spatial object with extent</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_type">type</code></td>
<td>
<p>character string of provider imagery type (see Details)</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_crop_to_buffer">crop_to_buffer</code></td>
<td>
<p>crop to the user extent, used for creation of output objects (otherwise is padded tile extent)</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_format">format</code></td>
<td>
<p>tile format to use, defaults to &quot;jpg&quot; for Mapbox satellite imagery and &quot;png&quot; otherwise</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_...">...</code></td>
<td>
<p>arguments passed to internal function, specifically <code>base_url</code> (see Details)</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_zoom">zoom</code></td>
<td>
<p>desired zoom for tiles, use with caution - if <code>NULL</code> is chosen automatically</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_debug">debug</code></td>
<td>
<p>optionally avoid actual download, but print out what would be downloaded in non-debug mode</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_max_tiles">max_tiles</code></td>
<td>
<p>maximum number of tiles - if <code>NULL</code> is set by zoom constraints</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_base_url">base_url</code></td>
<td>
<p>tile provider URL expert use only</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_verbose">verbose</code></td>
<td>
<p>report messages or suppress them</p>
</td></tr>
<tr><td><code id="get_tiles_+3A_filename">filename</code></td>
<td>
<p>purely for <code><a href="#topic+read_tiles">read_tiles()</a></code> this is passed down to the the terra package function 'merge'</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_tiles()</code> may be run with no arguments, and will download (and report on) the default
tile source at zoom 0. Arguments <code>type</code>, <code>zoom</code> (or <code>max_tiles</code>), <code>format</code> may be used
without setting <code>loc</code> or <code>buffer</code> and the entire world extent will be used. Please use with caution!
There is no maximum on what will be downloaded, but it can be interrupted at any time.
</p>
<p>Use <code>debug = TRUE</code> to avoid download and simply report on what would be done.
</p>
<p>Available types are 'elevation-tiles-prod' for AWS elevation tiles, and 'mapbox.satellite',
'mapbox.terrain-rgb'.  (The RGB terrain values are not unpacked.)
</p>
<p>Function <code>read_tiles()</code> will match what <code>get_tiles()</code> does and actually build a raster object.
</p>


<h3>Value</h3>

<p>A list with files downloaded in character vector, a data frame of the tile indices,
the zoom level used and the extent in xmin,xmax,ymin,ymax form.
</p>


<h3>See Also</h3>

<p>get_tiles_zoom get_tiles_dim get_tiles_buffer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (!is.null(get_api_key())) {
   tile_info &lt;- get_tiles(ext(146, 147, -43, -42), type = "mapbox.satellite", zoom = 5)
}
</code></pre>

<hr>
<h2 id='get-tiles-constrained'>Get tiles with specific constraints</h2><span id='topic+get-tiles-constrained'></span><span id='topic+get_tiles_zoom'></span><span id='topic+get_tiles_dim'></span><span id='topic+get_tiles_buffer'></span>

<h3>Description</h3>

<p>Get tiles by zoom, by overall dimension, or by buffer on a single point.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_tiles_zoom(x, zoom = 0, ..., format = "png")

get_tiles_dim(x, dim = c(512, 512), ..., format = "png")

get_tiles_buffer(x, buffer = NULL, ..., max_tiles = 9, format = "png")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get-tiles-constrained_+3A_x">x</code></td>
<td>
<p>a spatial object with an extent</p>
</td></tr>
<tr><td><code id="get-tiles-constrained_+3A_zoom">zoom</code></td>
<td>
<p>desired zoom for tiles, use with caution - cannot be unset in <code>get_tiles_zoom</code></p>
</td></tr>
<tr><td><code id="get-tiles-constrained_+3A_...">...</code></td>
<td>
<p>passed to <code>get_tiles()</code></p>
</td></tr>
<tr><td><code id="get-tiles-constrained_+3A_format">format</code></td>
<td>
<p>defaults to &quot;png&quot;, also available is &quot;jpg&quot;</p>
</td></tr>
<tr><td><code id="get-tiles-constrained_+3A_dim">dim</code></td>
<td>
<p>for <code>get_tiles_dim</code> the overall maximum dimensions of the image (padded out to tile size of 256x256)</p>
</td></tr>
<tr><td><code id="get-tiles-constrained_+3A_buffer">buffer</code></td>
<td>
<p>width in metres to extend around the location, ignored if 'x' is a spatial object with extent</p>
</td></tr>
<tr><td><code id="get-tiles-constrained_+3A_max_tiles">max_tiles</code></td>
<td>
<p>maximum number of tiles - if <code>NULL</code> is set by zoom constraints</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each function expects an extent in longitude latitude or a spatial object with extent as the first argument.
</p>
<p><code>get_tiles_zoom()</code> requires a zoom value, defaulting to 0
</p>
<p><code>get_tiles_dim()</code> requires a dim value, default to <code>c(512, 512)</code>, a set of 4 tiles
</p>
<p><code>get_tiles_buffer()</code> requires a single location (longitude, latitude) and a buffer in metres
</p>


<h3>Value</h3>

<p>A list with files downloaded in character vector, a data frame of the tile indices,
the zoom level used and the extent in xmin,xmax,ymin,ymax form.
</p>


<h3>See Also</h3>

<p>get_tiles
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (!is.null(get_api_key())) {
 ex &lt;- ext(146, 147, -43, -42)
 tile_infoz &lt;- get_tiles_zoom(ex,  zoom = 1)

 tile_infod &lt;- get_tiles_dim(ex,  dim = c(256, 256))

 tile_infob &lt;- get_tiles_buffer(cbind(146.5, -42.5), buffer = 5000)
}
</code></pre>

<hr>
<h2 id='mercator_tile_extent'>Tile extent</h2><span id='topic+mercator_tile_extent'></span>

<h3>Description</h3>

<p>Calculate tile extent for a given x, y tile at a zoom level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mercator_tile_extent(tile_x, tile_y, zoom, tile_size = 256)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mercator_tile_extent_+3A_tile_x">tile_x</code></td>
<td>
<p>x coordinate of tile</p>
</td></tr>
<tr><td><code id="mercator_tile_extent_+3A_tile_y">tile_y</code></td>
<td>
<p>y coordinate of tile</p>
</td></tr>
<tr><td><code id="mercator_tile_extent_+3A_zoom">zoom</code></td>
<td>
<p>zoo level</p>
</td></tr>
<tr><td><code id="mercator_tile_extent_+3A_tile_size">tile_size</code></td>
<td>
<p>tile dimensions (assumed square, i.e. 256x256)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently only spherical Mercator is supported.
</p>


<h3>Value</h3>

<p>A numeric vector of the spatial extent, in 'xmin', 'xmax', 'ymin', 'ymax' form.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mercator_tile_extent(2, 4, zoom = 10)

global &lt;- mercator_tile_extent(0, 0, zoom = 0)
plot(NA, xlim = global[c("xmin", "xmax")], ylim = global[c("ymin", "ymax")])
rect_plot &lt;- function(x) rect(x["xmin"], x["ymin"], x["xmax"], x["ymax"])
rect_plot(mercator_tile_extent(1, 1, zoom = 2))
rect_plot(mercator_tile_extent(2, 1, zoom = 2))
rect_plot(mercator_tile_extent(1, 2, zoom = 2))

rect_plot(mercator_tile_extent(1, 1, zoom = 4))
rect_plot(mercator_tile_extent(2, 1, zoom = 4))
rect_plot(mercator_tile_extent(1, 2, zoom = 4))
</code></pre>

<hr>
<h2 id='plot_tiles'>Plot slippy map tiles</h2><span id='topic+plot_tiles'></span><span id='topic+tiles_to_polygon'></span>

<h3>Description</h3>

<p>Create a new plot of tile rectangles, or add to an existing plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_tiles(
  x,
  ...,
  add = FALSE,
  label = TRUE,
  cex = 0.6,
  add_coast = TRUE,
  include_zoom = TRUE
)

tiles_to_polygon(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_tiles_+3A_x">x</code></td>
<td>
<p>tiles as create by <code>ceramic_tiles()</code></p>
</td></tr>
<tr><td><code id="plot_tiles_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>graphics::rect()</code></p>
</td></tr>
<tr><td><code id="plot_tiles_+3A_add">add</code></td>
<td>
<p>add to an existing plot?</p>
</td></tr>
<tr><td><code id="plot_tiles_+3A_label">label</code></td>
<td>
<p>include text label?</p>
</td></tr>
<tr><td><code id="plot_tiles_+3A_cex">cex</code></td>
<td>
<p>relative size of text label if drawn (see <code>text()</code>)</p>
</td></tr>
<tr><td><code id="plot_tiles_+3A_add_coast">add_coast</code></td>
<td>
<p>include a basic coastline on the plot?</p>
</td></tr>
<tr><td><code id="plot_tiles_+3A_include_zoom">include_zoom</code></td>
<td>
<p>include zoom level with text label if drawn?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The extent ('xmin', 'xmax', 'ymin', 'ymax') is used directly to draw the tiles so must be in the
native Mercator coordinate system used by most tile servers.
</p>


<h3>Value</h3>

<p><code><a href="#topic+plot_tiles">plot_tiles()</a></code> is called for its side-effect, a plot, and returns <code>NULL</code> invisibly.
<a href="#topic+tiles_to_polygon">tiles_to_polygon</a> returns a wk rct vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (!is.null(get_api_key())) {
  get_tiles_zoom(zoom = 1)
  tiles &lt;- ceramic_tiles(zoom = 1)
  plot_tiles(tiles)
}
</code></pre>

<hr>
<h2 id='unpack_rgb'>Unpack Mapbox terrain-RGB</h2><span id='topic+unpack_rgb'></span>

<h3>Description</h3>

<p>Mapbox terrain-rgb stores global elevation packed into Byte integers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unpack_rgb(x, filename = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="unpack_rgb_+3A_x">x</code></td>
<td>
<p>three layer raster object</p>
</td></tr>
<tr><td><code id="unpack_rgb_+3A_filename">filename</code></td>
<td>
<p>optional, filename to store the output</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function unpacks the three layers of a raster to give floating point elevation data.
</p>


<h3>Value</h3>

<p>terra rast object with one numeric layer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive() &amp;&amp; !is.null(get_api_key())) {
unpack_rgb(read_tiles(type = "mapbox.terrain-rgb"))
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
