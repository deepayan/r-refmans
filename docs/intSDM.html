<!DOCTYPE html><html><head><title>Help for package intSDM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {intSDM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#formatStructured'><p>formatStructured: Function to add structured data into the workflow.</p></a></li>
<li><a href='#generateAbsences'><p>Function to generate absences for data that comes from checklist data.</p></a></li>
<li><a href='#obtainArea'><p>obtainArea: Function to obtain a boundry for a specified country.</p></a></li>
<li><a href='#obtainCovariate'><p>obtainCovariate: Function to obtain a covariate later for a specified country.</p></a></li>
<li><a href='#obtainGBIF'><p>obtainGBIF: Function to obtain occurrence data from GBIF.</p></a></li>
<li><a href='#sdmWorkflow'><p><code>sdmWorkflow</code>: Function to compile the reproducible workflow.</p></a></li>
<li><a href='#species_model'><p>R6 class for creating a <code>species_model</code> object.</p></a></li>
<li><a href='#startWorkflow'><p><code>startWorkflow</code>: function to commence the integrated species distribution model workflow.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Reproducible Integrated Species Distribution Models Across
Norway using 'INLA'</td>
</tr>
<tr>
<td>Description:</td>
<td>Integration of disparate datasets is needed in order to make efficient use of all available data and thereby address the issues currently threatening biodiversity.
   Data integration is a powerful modeling framework which allows us to combine these datasets together into a single model, yet retain the strengths of each individual dataset.
   We therefore introduce the package, 'intSDM': an R package designed to help ecologists develop a reproducible workflow of integrated species distribution models, using data both provided from the user as well as data obtained freely online.
   An introduction to data integration methods is discussed in Issac, Jarzyna, Keil, Dambly, Boersch-Supan, Browning, Freeman, Golding, Guillera-Arroita, Henrys, Jarvis, Lahoz-Monfort, Pagel, Pescott, Schmucki, Simmonds and O’Hara (2020) &lt;<a href="https://doi.org/10.1016%2Fj.tree.2019.08.006">doi:10.1016/j.tree.2019.08.006</a>&gt;.</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5), ggplot2, terra, sf, stats, PointedSDMs, methods</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, geodata, inlabru (&ge; 2.3.1), giscoR, blockCV, rgbif,
tidyterra</td>
</tr>
<tr>
<td>Suggests:</td>
<td>viridis, INLA (&ge; 21.08.31), ggpolypath, R.utils, lwgeom,
spatstat, RColorBrewer, knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Additional_repositories:</td>
<td><a href="https://inla.r-inla-download.org/R/testing/">https://inla.r-inla-download.org/R/testing/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-20 07:58:49 UTC; philism</td>
</tr>
<tr>
<td>Author:</td>
<td>Philip Mostert [aut, cre],
  Angeline Bruls [aut],
  Ragnhild {Bjørkås} [aut],
  Wouter Koch [aut],
  Ellen Martin [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Philip Mostert &lt;philip.s.mostert@ntnu.no&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-20 09:00:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='formatStructured'>formatStructured: Function to add structured data into the workflow.</h2><span id='topic+formatStructured'></span>

<h3>Description</h3>

<p>Function used to format structure data into a coherent framework.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formatStructured(dataOCC, type, varsOld, varsNew, projection, boundary)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="formatStructured_+3A_dataocc">dataOCC</code></td>
<td>
<p>The species occurrence data. May be either a <code>SpatialPointsDataFrame</code>, <code>sf</code> or <code>data.frame</code> object.</p>
</td></tr>
<tr><td><code id="formatStructured_+3A_type">type</code></td>
<td>
<p>The type of observation model for the data. May be either: <code>PO</code>, <code>PA</code> or <code>Counts</code>.</p>
</td></tr>
<tr><td><code id="formatStructured_+3A_varsold">varsOld</code></td>
<td>
<p>The names of the old variables in the model which need to be converted to something new.</p>
</td></tr>
<tr><td><code id="formatStructured_+3A_varsnew">varsNew</code></td>
<td>
<p>The name of the new variables in the model which will be used in the full model.</p>
</td></tr>
<tr><td><code id="formatStructured_+3A_projection">projection</code></td>
<td>
<p>The CRS object to add to the species occurrence data.</p>
</td></tr>
<tr><td><code id="formatStructured_+3A_boundary">boundary</code></td>
<td>
<p>An sf object of the boundary of the study area, used to check if the data points are over the region.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>sf</code> object containing the locations of the species.
</p>

<hr>
<h2 id='generateAbsences'>Function to generate absences for data that comes from checklist data.</h2><span id='topic+generateAbsences'></span>

<h3>Description</h3>

<p>Function used to generate absences for data coming from lists. This function takes all the sampling locations from all the species obtained from a given dataset, and generates an absence if a species does not occur at a given location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateAbsences(dataList, datasetName, speciesName, responseName, Projection)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateAbsences_+3A_datalist">dataList</code></td>
<td>
<p>A List of data objects for the dataset.</p>
</td></tr>
<tr><td><code id="generateAbsences_+3A_datasetname">datasetName</code></td>
<td>
<p>The name of the dataset.</p>
</td></tr>
<tr><td><code id="generateAbsences_+3A_speciesname">speciesName</code></td>
<td>
<p>The name of the species variable name.</p>
</td></tr>
<tr><td><code id="generateAbsences_+3A_responsename">responseName</code></td>
<td>
<p>The name of the response variable name.</p>
</td></tr>
<tr><td><code id="generateAbsences_+3A_projection">Projection</code></td>
<td>
<p>Coordinate reference system used.</p>
</td></tr>
</table>

<hr>
<h2 id='obtainArea'>obtainArea: Function to obtain a boundry for a specified country.</h2><span id='topic+obtainArea'></span>

<h3>Description</h3>

<p>Function to obtain a <code>sf</code> boundary object around a specified country.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>obtainArea(names, projection, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="obtainArea_+3A_names">names</code></td>
<td>
<p>A vector of names of countries used in the analysis.</p>
</td></tr>
<tr><td><code id="obtainArea_+3A_projection">projection</code></td>
<td>
<p>Coordinate reference system used.</p>
</td></tr>
<tr><td><code id="obtainArea_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <a href="giscoR.html#topic+gisco_get_countries">gisco_get_countries</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>sf</code> object of the boundary of the specified country.
</p>

<hr>
<h2 id='obtainCovariate'>obtainCovariate: Function to obtain a covariate later for a specified country.</h2><span id='topic+obtainCovariate'></span>

<h3>Description</h3>

<p>Function to obtain covariate layers from <em>WorldClim</em> around a specified area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>obtainCovariate(covariates, res, projection, path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="obtainCovariate_+3A_covariates">covariates</code></td>
<td>
<p>A vector of covariate names to obtain.</p>
</td></tr>
<tr><td><code id="obtainCovariate_+3A_res">res</code></td>
<td>
<p>Resolution of the worldclim variable. Valid options are: <code>10</code>, <code>5</code>, <code>2.5</code> or <code>0.5</code> (minutes of a degree).</p>
</td></tr>
<tr><td><code id="obtainCovariate_+3A_projection">projection</code></td>
<td>
<p>Coordinate reference system to use in analysis.</p>
</td></tr>
<tr><td><code id="obtainCovariate_+3A_path">path</code></td>
<td>
<p>The path where the covariate will be saved.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>spatialRaster</code> object of the covariates across the specified area.
</p>

<hr>
<h2 id='obtainGBIF'>obtainGBIF: Function to obtain occurrence data from GBIF.</h2><span id='topic+obtainGBIF'></span>

<h3>Description</h3>

<p>Function used to obtain species observations from <em>GBIF</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>obtainGBIF(query, geometry, projection, datasettype, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="obtainGBIF_+3A_query">query</code></td>
<td>
<p>The scientific name of the species for which observations need to be obtained.</p>
</td></tr>
<tr><td><code id="obtainGBIF_+3A_geometry">geometry</code></td>
<td>
<p>An <code>sf</code> object surrounding the study area where observations need to be obtained.</p>
</td></tr>
<tr><td><code id="obtainGBIF_+3A_projection">projection</code></td>
<td>
<p>The coordinate reference system used for the observations and geometry.</p>
</td></tr>
<tr><td><code id="obtainGBIF_+3A_datasettype">datasettype</code></td>
<td>
<p>The type of dataset that is obtained from <em>GBIF</em>. Can be one of: <code>PO</code>, <code>PA</code>, <code>Counts</code>.</p>
</td></tr>
<tr><td><code id="obtainGBIF_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to <a href="rgbif.html#topic+occ_download">occ_download</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>sf</code> object containing the locations and other relevant information of the species obtained from <em>GBIF</em>.
</p>

<hr>
<h2 id='sdmWorkflow'><code>sdmWorkflow</code>: Function to compile the reproducible workflow.</h2><span id='topic+sdmWorkflow'></span>

<h3>Description</h3>

<p>This function is used to compile the reproducible workflow from the <code>R6</code> object created with <code>startFunction</code>. Depending on what was specified before, this function will estimate the integrated species distribution model, perform cross-validation, create predictions from the model and plot these predictions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sdmWorkflow(Workflow = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sdmWorkflow_+3A_workflow">Workflow</code></td>
<td>
<p>The <code>R6</code> object created from <code>startWorkflow</code>. This object should contain all the data and model information required to estimate and specify the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The return of the function depends on the argument <code>Save</code> from the <code>startWorkflow</code> function. If this argument is <code>FALSE</code> then the objects will be saved to the specidfied directory. If this argument is <code>TRUE</code> then a list of different outcomes from the workflow will be returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
if (requireNamespace('INLA')) {

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$addArea(countryName = 'Sweden')

workflow$addGBIF(datasetName = 'exampleGBIF',
                 datasetType = 'PA',
                 limit = 10000,
                 coordinateUncertaintyInMeters = '0,50')
workflow$addMesh(cutoff = 20000,
                 max.edge=c(60000, 80000),
                 offset= 100000)
workflow$workflowOutput('Model')

Model &lt;- sdmWorkflow(workflow)

}

## End(Not run)
</code></pre>

<hr>
<h2 id='species_model'>R6 class for creating a <code>species_model</code> object.</h2><span id='topic+species_model'></span>

<h3>Description</h3>

<p>An object containing the data, covariates  and other relevant information to be used in the reproducible workflow. The function <a href="#topic+startWorkflow">startWorkflow</a> acts as a wrapper in creating one of these objects. This object has additional slot functions within, which allow for further specification and customization of the reproducible workflow.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-species_model-new"><code>species_model$new()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-print"><code>species_model$print()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-plot"><code>species_model$plot()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-addStructured"><code>species_model$addStructured()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-addMesh"><code>species_model$addMesh()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-addGBIF"><code>species_model$addGBIF()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-addCovariates"><code>species_model$addCovariates()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-addArea"><code>species_model$addArea()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-crossValidation"><code>species_model$crossValidation()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-modelOptions"><code>species_model$modelOptions()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-specifySpatial"><code>species_model$specifySpatial()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-biasFields"><code>species_model$biasFields()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-workflowOutput"><code>species_model$workflowOutput()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-obtainMeta"><code>species_model$obtainMeta()</code></a>
</p>
</li>
<li> <p><a href="#method-species_model-clone"><code>species_model$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-species_model-new"></a>



<h4>Method <code>new()</code></h4>

<p>initialize the species_model object.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$new(
  Countries,
  Species,
  nameProject,
  Save,
  Directory,
  Projection,
  Quiet = TRUE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Countries</code></dt><dd><p>Name of the countries to include in the workflow.</p>
</dd>
<dt><code>Species</code></dt><dd><p>Name of the species to include in the workflow.</p>
</dd>
<dt><code>nameProject</code></dt><dd><p>Name of the project for the workflow.</p>
</dd>
<dt><code>Save</code></dt><dd><p>Logical argument indicating if the model outputs should be saved.</p>
</dd>
<dt><code>Directory</code></dt><dd><p>Directory where the model outputs should be saved.</p>
</dd>
<dt><code>Projection</code></dt><dd><p>The coordinate reference system used in the workflow.</p>
</dd>
<dt><code>Quiet</code></dt><dd><p>Logical variable indicating if the workflow should provide messages throughout the estimation procedure.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-species_model-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints the datasets, their data type and the number of observations, as well as the marks and their respective families.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Not used.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

workflow$print()
</pre>
</div>


<hr>
<a id="method-species_model-plot"></a>



<h4>Method <code>plot()</code></h4>

<p>Makes a plot of the features used in the integrated model.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$plot(
  Mesh = FALSE,
  Boundary = TRUE,
  Species = FALSE,
  Covariates = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Mesh</code></dt><dd><p>Add the mesh to the plot.</p>
</dd>
<dt><code>Boundary</code></dt><dd><p>Add the boundary to the plot.</p>
</dd>
<dt><code>Species</code></dt><dd><p>Add the species location data to the plot.</p>
</dd>
<dt><code>Covariates</code></dt><dd><p>Add the spatial covariates to the plot.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A ggplot object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Germany')
workflow$plot(Boundary = TRUE)
}
</pre>
</div>


<hr>
<a id="method-species_model-addStructured"></a>



<h4>Method <code>addStructured()</code></h4>

<p>The function is used to convert structured datasets into a framework which is usable by the model. The three types of structured data allowed by this function are present absence (PA), present only (PO) and counts/abundance datasets, which are controlled using the <code>datasetType</code> argument. The other arguments of this function are used to specify the appropriate variable (such as response name, trial name, species name and coordinate name) names in these datasets.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$addStructured(
  dataStructured,
  datasetType,
  responseName,
  trialsName,
  datasetName = NULL,
  speciesName,
  coordinateNames,
  generateAbsences = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataStructured</code></dt><dd><p>The dataset used in the model. Must be either a <code>data.frame</code>, <code>sf</code> or <code>SpatialPoints*</code> object, or a <code>list</code> containing multiples of these classes.</p>
</dd>
<dt><code>datasetType</code></dt><dd><p>A vector which gives the type of dataset. Must be either <code>'count'</code>, <code>'PO'</code> or <code>'PA'</code>.</p>
</dd>
<dt><code>responseName</code></dt><dd><p>Name of the response variable in the dataset. If <code>dataType</code> is <code>'PO'</code>, then this argument may be missing.</p>
</dd>
<dt><code>trialsName</code></dt><dd><p>Name of the trial name variable in the <code>PA</code> datasets.</p>
</dd>
<dt><code>datasetName</code></dt><dd><p>An optional argument to create a new name for the dataset. Must be the same length as <code>dataStructured</code> if that is provided as a <code>list</code>.</p>
</dd>
<dt><code>speciesName</code></dt><dd><p>Name of the species variable name in the datasets.</p>
</dd>
<dt><code>coordinateNames</code></dt><dd><p>Names of the coordinate vector in the dataset.</p>
</dd>
<dt><code>generateAbsences</code></dt><dd><p>Generates absences for <code>'PA'</code> data. This is done by combining all the sampling locations for all the species, and creating an absence where a given species does not occur.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')

#Generate random species
speciesData &lt;- data.frame(X = runif(1000, 12, 24),
                          Y = runif(1000, 56, 68),
               Response = sample(c(0,1), 1000, replace = TRUE),
               Name = 'Fraxinus_excelsior')
workflow$addStructured(dataStructured = speciesData, datasetType = 'PA',
                       datasetName = 'xx', responseName = 'Response',
                       speciesName = 'Name', coordinateNames = c('X', 'Y'))
                       }
</pre>
</div>


<hr>
<a id="method-species_model-addMesh"></a>



<h4>Method <code>addMesh()</code></h4>

<p>Function to add an <code>inla.mesh</code> object to the workflow. The user may either add their own mesh to the workflow, or use the arguments of this function to help create one.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$addMesh(Object, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Object</code></dt><dd><p>An <code>inla.mesh</code> object to add to the workflow.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments to pass to <code>INLA</code>'s <code>inla.mesh.2d</code>. Use <code>?inla.mesh.2d</code> to find out more about the different arguments.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>if (requireNamespace('INLA')) {
\dontrun{
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')
workflow$addMesh(cutoff = 20000,
                 max.edge=c(60000, 80000),
                 offset= 100000)

}
}
</pre>
</div>


<hr>
<a id="method-species_model-addGBIF"></a>



<h4>Method <code>addGBIF()</code></h4>

<p>Function to add species occurrence records from GBIF (using the <code>rgbif</code> package) to the reproducible workflow. The arguments for this function are used to either filter the GBIF records, or to specify the characteristics of the observation model.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$addGBIF(
  Species = "All",
  datasetName = NULL,
  datasetType = "PO",
  responseCounts = "individualCount",
  responsePA = "occurrenceStatus",
  removeDuplicates = FALSE,
  generateAbsences = FALSE,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Species</code></dt><dd><p>The names of the species to include in the workflow (initially specified using <a href="#topic+startWorkflow">startWorkflow</a>). Defaults to <code>All</code>, which will find occurrence records for all specie specified in <a href="#topic+startWorkflow">startWorkflow</a>.</p>
</dd>
<dt><code>datasetName</code></dt><dd><p>The name to give the dataset obtained from GBIF. Cannot be <code>NULL</code>.</p>
</dd>
<dt><code>datasetType</code></dt><dd><p>The data type of the dataset. Defaults to <code>PO</code>, but may also be <code>PA</code> or <code>Counts</code>.</p>
</dd>
<dt><code>responseCounts</code></dt><dd><p>Name of the response variable for the counts data. Defaults to the standard Darwin core value <code>individualCounts</code>.</p>
</dd>
<dt><code>responsePA</code></dt><dd><p>Name of the response variable for the PA data. Defaults to the standard Darwin core value <code>occurrenceStatus</code>.</p>
</dd>
<dt><code>removeDuplicates</code></dt><dd><p>Argument used to remove duplicate observations for a species across datasets. May take a long time if there are many observations obtained across multiple datasets. Defaults to <code>FALSE</code>.</p>
</dd>
<dt><code>generateAbsences</code></dt><dd><p>Generates absences for <code>'PA'</code> data. This is done by combining all the sampling locations for all the species, and creating an absence where a given species does not occur.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments to specify the <a href="rgbif.html#topic+occ_data">occ_data</a> function from <code>rgbif</code>. See <code>?occ_data</code> for more details.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$addArea(countryName = 'Sweden')

workflow$addGBIF(datasetName = 'exampleGBIF',
                 datasetType = 'PA',
                 limit = 10000,
                 coordinateUncertaintyInMeters = '0,50')
}
</pre>
</div>


<hr>
<a id="method-species_model-addCovariates"></a>



<h4>Method <code>addCovariates()</code></h4>

<p>Function to add spatial covariates to the workflow. The covariates may either be specified by the user, or they may come from worldClim obtained with the <code>geodata</code> package.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$addCovariates(
  Object = NULL,
  worldClim = NULL,
  res = 2.5,
  Months = "All",
  Function = "mean",
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Object</code></dt><dd><p>A object of class: <code>spatRaster</code>, <code>SpatialPixelsDataFrame</code> or <code>raster</code> containing covariate information across the area. Note that this function will check if the covariates span the boundary area, so it may be preferable to add your own boundary using <code>`.$addArea`</code> if this argument is specified.</p>
</dd>
<dt><code>worldClim</code></dt><dd><p>Name of the worldClim to include in the model. See <code>?worldclim_country</code> from the <code>geodata</code> package for more information.</p>
</dd>
<dt><code>res</code></dt><dd><p>Resolution of the worldclim variable. Valid options are: <code>10</code>, <code>5</code>, <code>2.5</code> or <code>0.5</code> (minutes of a degree).</p>
</dd>
<dt><code>Months</code></dt><dd><p>The months to include the covariate for. Defaults to <code>All</code> which includes covariate layers for all months.</p>
</dd>
<dt><code>Function</code></dt><dd><p>The function to aggregate the temporal data into one layer. Defaults to <code>mean</code>.</p>
</dd>
<dt><code>...</code></dt><dd><p>Not used.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
if (requireNamespace('INLA')) {

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')
workflow$addCovariates(worldClim = 'tavg', res = '10')

}
}
</pre>
</div>


<hr>
<a id="method-species_model-addArea"></a>



<h4>Method <code>addArea()</code></h4>

<p>Function to add a boundary around the study area. This function allows the user to either add their own boundary object, or obtain a country's boundary using <a href="giscoR.html#topic+gisco_get_countries">gisco_get_countries</a> from the <code>giscoR</code> package.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$addArea(Object = NULL, countryName = NULL, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Object</code></dt><dd><p>A <code>sf</code> or <code>SpatialPolygons</code> object of the boundary surrounding the study area.</p>
</dd>
<dt><code>countryName</code></dt><dd><p>Name of the countries to obtain a boundary for. This argument will then use the <a href="giscoR.html#topic+gisco_get_countries">gisco_get_countries</a> function from the <code>giscoR</code> package to obtain a boundary.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments passed to <a href="giscoR.html#topic+gisco_get_countries">gisco_get_countries</a>.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')
}
</pre>
</div>


<hr>
<a id="method-species_model-crossValidation"></a>



<h4>Method <code>crossValidation()</code></h4>

<p>Function to add a spatial cross validation method to the workflow.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$crossValidation(
  Method,
  blockOptions = list(k = 5, rows_cols = c(4, 4), plot = FALSE, seed = NULL)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Method</code></dt><dd><p>The spatial cross-validation methods to use in the workflow. May be at least one of <code>spatialBlock</code> or <code>Loo</code> (leave-one-out). See the <code>PointedSDMs</code> package for more details.</p>
</dd>
<dt><code>blockOptions</code></dt><dd><p>A list of options to specify the spatial block cross-validation. Must be a named list with arguments specified for: <code>k</code>, <code>rows_cols</code>, <code>plot</code>, <code>seed</code>. See <code>blockCV::cv_spatial</code> for more information.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

workflow$crossValidation(Method = 'Loo')
</pre>
</div>


<hr>
<a id="method-species_model-modelOptions"></a>



<h4>Method <code>modelOptions()</code></h4>

<p>Function to specify model options for the <code>INLA</code> and <code>PointedSDMs</code> parts of the model.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$modelOptions(ISDM = list(), INLA = list())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>ISDM</code></dt><dd><p>Arguments to specify in <a href="PointedSDMs.html#topic+intModel">intModel</a> from the <code>PointedSDMs</code> function. This argument needs to be a named list of the following options: <code>pointCovariates</code>, <code>pointsIntercept</code>, <code>pointsSpatial</code> or <code>copyModel</code>. See <code>?intModel</code> for more details.</p>
</dd>
<dt><code>INLA</code></dt><dd><p>Options to specify in <a href="INLA.html#topic+INLA">INLA</a> from the <code>inla</code> function. See <code>?inla</code> for more details.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

workflow$modelOptions(INLA = list(control.inla=list(int.strategy = 'eb')),
                      ISDM = list(pointsIntercept = FALSE))
</pre>
</div>


<hr>
<a id="method-species_model-specifySpatial"></a>



<h4>Method <code>specifySpatial()</code></h4>

<p>Function to specify pc priors for the shared random field in the model. See <code>?INLA::inla.spde2.pcmatern</code> for more details.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$specifySpatial(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>Arguments passed on to <a href="INLA.html#topic+inla.spde2.pcmatern">inla.spde2.pcmatern</a>.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
if (requireNamespace('INLA')) {
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')
workflow$addMesh(cutoff = 20000,
                 max.edge=c(60000, 80000),
                 offset= 100000)
workflow$specifySpatial(prior.range = c(200000, 0.05),
                        prior.sigma = c(5, 0.1))
}
}
</pre>
</div>


<hr>
<a id="method-species_model-biasFields"></a>



<h4>Method <code>biasFields()</code></h4>

<p>Function to add bias fields to the model.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$biasFields(datasetName, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>datasetName</code></dt><dd><p>Name of the dataset to add a bias field to.</p>
</dd>
<dt><code>...</code></dt><dd><p>Additional arguments passed on to <a href="INLA.html#topic+inla.spde2.pcmatern">inla.spde2.pcmatern</a> to customize the priors for the pc matern for the bias fields.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
if(requireNamespace('INLA')) {

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$addArea(countryName = 'Sweden')

workflow$addGBIF(datasetName = 'exampleGBIF',
                 datasetType = 'PA',
                 limit = 10000,
                 coordinateUncertaintyInMeters = '0,50')
workflow$biasFields(datasetName = 'exampleGBIF')
}
}
</pre>
</div>


<hr>
<a id="method-species_model-workflowOutput"></a>



<h4>Method <code>workflowOutput()</code></h4>

<p>Function to specify the workflow output from the model. This argument must be at least one of: <code>'Model'</code>, <code>'Prediction'</code>, <code>'Richness'</code>, <code>'Maps'</code> and <code>'Cross-validation'</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$workflowOutput(Output)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Output</code></dt><dd><p>The names of the outputs to give in the workflow. Must be at least one of: <code>'Model'</code>, <code>'Prediction'</code>, <code>'Richness'</code>, <code>'Maps'</code> and <code>'Cross-validation'</code>.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$workflowOutput('Predictions')
</pre>
</div>


<hr>
<a id="method-species_model-obtainMeta"></a>



<h4>Method <code>obtainMeta()</code></h4>

<p>Obtain metadata from the workflow.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$obtainMeta(Number = TRUE, Citations = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>Number</code></dt><dd><p>Print the number of observations per dataset. Defaults to <code>TRUE</code>.</p>
</dd>
<dt><code>Citations</code></dt><dd><p>Print the citations for the GBIF obtained datasets. Defaults to <code>TRUE</code>.</p>
</dd>
</dl>

</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$addArea(countryName = 'Sweden')

workflow$addGBIF(datasetName = 'exampleGBIF',
                 datasetType = 'PA',
                 limit = 10000,
                 coordinateUncertaintyInMeters = '0,50')
workflow$obtainMeta()
}
</pre>
</div>


<hr>
<a id="method-species_model-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>species_model$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `species_model$print`
## ------------------------------------------------

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

workflow$print()

## ------------------------------------------------
## Method `species_model$plot`
## ------------------------------------------------

## Not run: 
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Germany')
workflow$plot(Boundary = TRUE)

## End(Not run)

## ------------------------------------------------
## Method `species_model$addStructured`
## ------------------------------------------------

## Not run: 
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')

#Generate random species
speciesData &lt;- data.frame(X = runif(1000, 12, 24),
                          Y = runif(1000, 56, 68),
               Response = sample(c(0,1), 1000, replace = TRUE),
               Name = 'Fraxinus_excelsior')
workflow$addStructured(dataStructured = speciesData, datasetType = 'PA',
                       datasetName = 'xx', responseName = 'Response',
                       speciesName = 'Name', coordinateNames = c('X', 'Y'))
                       
## End(Not run)

## ------------------------------------------------
## Method `species_model$addMesh`
## ------------------------------------------------

if (requireNamespace('INLA')) {
## Not run: 
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')
workflow$addMesh(cutoff = 20000,
                 max.edge=c(60000, 80000),
                 offset= 100000)


## End(Not run)
}

## ------------------------------------------------
## Method `species_model$addGBIF`
## ------------------------------------------------

## Not run: 
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$addArea(countryName = 'Sweden')

workflow$addGBIF(datasetName = 'exampleGBIF',
                 datasetType = 'PA',
                 limit = 10000,
                 coordinateUncertaintyInMeters = '0,50')

## End(Not run)

## ------------------------------------------------
## Method `species_model$addCovariates`
## ------------------------------------------------

## Not run: 
if (requireNamespace('INLA')) {

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')
workflow$addCovariates(worldClim = 'tavg', res = '10')

}

## End(Not run)

## ------------------------------------------------
## Method `species_model$addArea`
## ------------------------------------------------

## Not run: 
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')

## End(Not run)

## ------------------------------------------------
## Method `species_model$crossValidation`
## ------------------------------------------------

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

workflow$crossValidation(Method = 'Loo')

## ------------------------------------------------
## Method `species_model$modelOptions`
## ------------------------------------------------

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

workflow$modelOptions(INLA = list(control.inla=list(int.strategy = 'eb')),
                      ISDM = list(pointsIntercept = FALSE))

## ------------------------------------------------
## Method `species_model$specifySpatial`
## ------------------------------------------------

## Not run: 
if (requireNamespace('INLA')) {
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))

#Add boundary
workflow$addArea(countryName = 'Sweden')
workflow$addMesh(cutoff = 20000,
                 max.edge=c(60000, 80000),
                 offset= 100000)
workflow$specifySpatial(prior.range = c(200000, 0.05),
                        prior.sigma = c(5, 0.1))
}

## End(Not run)

## ------------------------------------------------
## Method `species_model$biasFields`
## ------------------------------------------------

## Not run: 
if(requireNamespace('INLA')) {

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$addArea(countryName = 'Sweden')

workflow$addGBIF(datasetName = 'exampleGBIF',
                 datasetType = 'PA',
                 limit = 10000,
                 coordinateUncertaintyInMeters = '0,50')
workflow$biasFields(datasetName = 'exampleGBIF')
}

## End(Not run)

## ------------------------------------------------
## Method `species_model$workflowOutput`
## ------------------------------------------------

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$workflowOutput('Predictions')

## ------------------------------------------------
## Method `species_model$obtainMeta`
## ------------------------------------------------

## Not run: 
workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = '+proj=longlat +ellps=WGS84',
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
workflow$addArea(countryName = 'Sweden')

workflow$addGBIF(datasetName = 'exampleGBIF',
                 datasetType = 'PA',
                 limit = 10000,
                 coordinateUncertaintyInMeters = '0,50')
workflow$obtainMeta()

## End(Not run)
</code></pre>

<hr>
<h2 id='startWorkflow'><code>startWorkflow</code>: function to commence the integrated species distribution model workflow.</h2><span id='topic+startWorkflow'></span>

<h3>Description</h3>

<p>Function to initialize the reproducible workflow using integrated species distribution models. The arguments for this function are used to specify which species and countries are to be studied, as well as how the results of the model should be saved (either as an R object or saved to some directory). This function outputs an <code>R6</code> object with additional slot functions to help further customize the model specification. See <code>?species_model</code> for more details on these functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>startWorkflow(
  Countries,
  Species,
  Projection,
  Save = TRUE,
  saveOptions = list(projectDirectory = NULL, projectName = NULL),
  Quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="startWorkflow_+3A_countries">Countries</code></td>
<td>
<p>A vector of country names to complete the analysis over. If missing, a boundary object (of class <code>Spatial</code> or <code>sf</code>) has to be added to the model using <code>.$addArea</code> before any analysis is completed.</p>
</td></tr>
<tr><td><code id="startWorkflow_+3A_species">Species</code></td>
<td>
<p>A vector of Species names (scientific) to include in the analysis. Names should be given carefully since the names provided will be used to obtain <em>GBIF</em> observations.</p>
</td></tr>
<tr><td><code id="startWorkflow_+3A_projection">Projection</code></td>
<td>
<p>The coordinate reference system used in the workflow.</p>
</td></tr>
<tr><td><code id="startWorkflow_+3A_save">Save</code></td>
<td>
<p>Logical argument indicating if the model objects and outputs should be saved as .rds files. Defaults to <code>TRUE</code>. If <code>FALSE</code> then the output of the workflow will be a list of objects at each step of the workflow.</p>
</td></tr>
<tr><td><code id="startWorkflow_+3A_saveoptions">saveOptions</code></td>
<td>
<p>A list containing two items: <code>projectDirectory</code> indicating where the objects should be saved (defaults to <code>NULL</code>), and <code>projectName</code> which indicates the name for the folder in the relevant directory. The latter argument is required, regardless of the value given to <code>Save</code>.</p>
</td></tr>
<tr><td><code id="startWorkflow_+3A_quiet">Quiet</code></td>
<td>
<p>Logical argument indicating if the workflow should provide the user messages during the setup and estimation process. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An R6 object of class <code>species_model</code>. This object contains a collection of slot functions to assist the user in customizing their workflow.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##Start a workflow without saving objects

workflow &lt;- startWorkflow(Species = 'Fraxinus excelsior',
                          Projection = "+proj=longlat +ellps=WGS84",
                          Save = FALSE,
                          saveOptions = list(projectName = 'example'))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
