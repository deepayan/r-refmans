<!DOCTYPE html><html><head><title>Help for package ifaTools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ifaTools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addExploratoryFactors'><p>Adds exploratory factors to a single factor model</p></a></li>
<li><a href='#iccPlot'><p>Plot expected and observed table from SitemFit</p></a></li>
<li><a href='#itemModelExplorer'><p>A Shiny app to experiment with item models</p></a></li>
<li><a href='#itemResponseMap'><p>Create item response map table</p></a></li>
<li><a href='#modelBuilder'><p>A Shiny app for building IFA models</p></a></li>
<li><a href='#plotInformation'><p>Plot item information in the latent distribution</p></a></li>
<li><a href='#replicateModelBy'><p>Replicate a model for each group of data</p></a></li>
<li><a href='#SitemPlot'><p>Plot expected and observed table from SitemFit</p></a></li>
<li><a href='#uniquenessPrior'><p>Uniqueness prior to assist in item factor analysis</p></a></li>
<li><a href='#univariatePrior'><p>Univariate priors commonly used in IFA models</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Date:</td>
<td>2022-01-19</td>
</tr>
<tr>
<td>Title:</td>
<td>Toolkit for Item Factor Analysis with 'OpenMx'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.23</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools, tutorials, and demos of Item Factor Analysis using 'OpenMx'.
    This software is described in Pritikin &amp; Falk (2020) &lt;<a href="https://doi.org/10.1177%2F0146621620929431">doi:10.1177/0146621620929431</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, roxygen2, knitr (&ge; 1.8), gridExtra, plyr, xtable</td>
</tr>
<tr>
<td>Depends:</td>
<td>shiny (&ge; 0.10), ggplot2, reshape2, rpf (&ge; 0.48), OpenMx (&ge;
2.3.1), R (&ge; 2.14.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jpritikin/ifaTools">https://github.com/jpritikin/ifaTools</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-19 21:06:57 UTC; joshua</td>
</tr>
<tr>
<td>Author:</td>
<td>Joshua N. Pritikin [cre, aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joshua N. Pritikin &lt;jpritikin@pobox.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-19 22:12:42 UTC</td>
</tr>
</table>
<hr>
<h2 id='addExploratoryFactors'>Adds exploratory factors to a single factor model</h2><span id='topic+addExploratoryFactors'></span>

<h3>Description</h3>

<p>Adds exploratory factors to a single factor model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addExploratoryFactors(model, toAdd, ..., addUniquenessPrior = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addExploratoryFactors_+3A_model">model</code></td>
<td>
<p>a single factor (possibly multigroup) model</p>
</td></tr>
<tr><td><code id="addExploratoryFactors_+3A_toadd">toAdd</code></td>
<td>
<p>the number of factors to add</p>
</td></tr>
<tr><td><code id="addExploratoryFactors_+3A_...">...</code></td>
<td>
<p>Not used.  Forces remaining arguments to be specified by name.</p>
</td></tr>
<tr><td><code id="addExploratoryFactors_+3A_adduniquenessprior">addUniquenessPrior</code></td>
<td>
<p>whether to add a uniqueness prior to the model (default TRUE)</p>
</td></tr>
</table>

<hr>
<h2 id='iccPlot'>Plot expected and observed table from SitemFit</h2><span id='topic+iccPlot'></span>

<h3>Description</h3>

<p>WARNING: This function is under development. The API may change in a future release.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iccPlot(grp, itemName, ..., width = 3, dataBins = 11, basis = c(1), factor = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="iccPlot_+3A_grp">grp</code></td>
<td>
<p>an IFA group</p>
</td></tr>
<tr><td><code id="iccPlot_+3A_itemname">itemName</code></td>
<td>
<p>name of item to plot</p>
</td></tr>
<tr><td><code id="iccPlot_+3A_...">...</code></td>
<td>
<p>Not used.  Forces remaining arguments to be specified by name.</p>
</td></tr>
<tr><td><code id="iccPlot_+3A_width">width</code></td>
<td>
<p>sets the x axis to [-width,width]</p>
</td></tr>
<tr><td><code id="iccPlot_+3A_databins">dataBins</code></td>
<td>
<p>number of partitions for the latent scores</p>
</td></tr>
<tr><td><code id="iccPlot_+3A_basis">basis</code></td>
<td>
<p>the basis vector in the latent space</p>
</td></tr>
<tr><td><code id="iccPlot_+3A_factor">factor</code></td>
<td>
<p>the score to use (TODO: should be a function of the basis vector?)</p>
</td></tr>
</table>

<hr>
<h2 id='itemModelExplorer'>A Shiny app to experiment with item models</h2><span id='topic+itemModelExplorer'></span>

<h3>Description</h3>

<p>A Shiny app to experiment with item models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>itemModelExplorer()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
itemModelExplorer()  # will launch a browser in RStudio

## End(Not run)
</code></pre>

<hr>
<h2 id='itemResponseMap'>Create item response map table</h2><span id='topic+itemResponseMap'></span>

<h3>Description</h3>

<p>Categories are placed at the mean score of the examinees who picked
that category.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>itemResponseMap(grp, ..., factor = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="itemResponseMap_+3A_grp">grp</code></td>
<td>
<p>an IFA group</p>
</td></tr>
<tr><td><code id="itemResponseMap_+3A_...">...</code></td>
<td>
<p>Not used.  Forces remaining arguments to be specified by name.</p>
</td></tr>
<tr><td><code id="itemResponseMap_+3A_factor">factor</code></td>
<td>
<p>which factor to plot (defaults to 1)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame of the raw data backing the plot. Item outcomes
without any observations are omitted.
</p>

<hr>
<h2 id='modelBuilder'>A Shiny app for building IFA models</h2><span id='topic+modelBuilder'></span>

<h3>Description</h3>

<p>A Shiny app for building IFA models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modelBuilder()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
modelBuilder()  # will launch a browser in RStudio

## End(Not run)
</code></pre>

<hr>
<h2 id='plotInformation'>Plot item information in the latent distribution</h2><span id='topic+plotInformation'></span>

<h3>Description</h3>

<p>For multidimensional items, you will need to supply a basis
vector. This vector is normalized to unit length.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotInformation(grp, ..., width = 3, showTotal = FALSE, basis = c(1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotInformation_+3A_grp">grp</code></td>
<td>
<p>an IFA group</p>
</td></tr>
<tr><td><code id="plotInformation_+3A_...">...</code></td>
<td>
<p>Not used.  Forces remaining arguments to be specified by name.</p>
</td></tr>
<tr><td><code id="plotInformation_+3A_width">width</code></td>
<td>
<p>the plot will span from -width to width</p>
</td></tr>
<tr><td><code id="plotInformation_+3A_showtotal">showTotal</code></td>
<td>
<p>whether to plot the total item information</p>
</td></tr>
<tr><td><code id="plotInformation_+3A_basis">basis</code></td>
<td>
<p>the basis vector (for multidimensional items)</p>
</td></tr>
</table>

<hr>
<h2 id='replicateModelBy'>Replicate a model for each group of data</h2><span id='topic+replicateModelBy'></span>

<h3>Description</h3>

<p>The reference group is fixed to a zero mean and identity covariance matrix.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replicateModelBy(
  tmpl,
  fullData,
  mMat,
  covMat,
  ...,
  splitCol = "population",
  refGroup = "general",
  split = TRUE,
  compressData = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replicateModelBy_+3A_tmpl">tmpl</code></td>
<td>
<p>an OpenMx model</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_fulldata">fullData</code></td>
<td>
<p>the complete data including the column indicating group membership</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_mmat">mMat</code></td>
<td>
<p>an MxMatrix for latent means</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_covmat">covMat</code></td>
<td>
<p>an MxMatrix for latent covariance</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_...">...</code></td>
<td>
<p>Not used.  Forces remaining arguments to be specified by name.</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_splitcol">splitCol</code></td>
<td>
<p>the name of the column used to indicate group membership</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_refgroup">refGroup</code></td>
<td>
<p>the name of the reference group</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_split">split</code></td>
<td>
<p>whether to split the data (defaults to TRUE)</p>
</td></tr>
<tr><td><code id="replicateModelBy_+3A_compressdata">compressData</code></td>
<td>
<p>whether to apply compressDataFrame (defaults to TRUE)</p>
</td></tr>
</table>

<hr>
<h2 id='SitemPlot'>Plot expected and observed table from SitemFit</h2><span id='topic+SitemPlot'></span>

<h3>Description</h3>

<p>Plot expected and observed table from SitemFit
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SitemPlot(sout, itemName, ..., showSampleSize = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SitemPlot_+3A_sout">sout</code></td>
<td>
<p>output from SitemFit</p>
</td></tr>
<tr><td><code id="SitemPlot_+3A_itemname">itemName</code></td>
<td>
<p>name of item to plot</p>
</td></tr>
<tr><td><code id="SitemPlot_+3A_...">...</code></td>
<td>
<p>Not used.  Forces remaining arguments to be specified by name.</p>
</td></tr>
<tr><td><code id="SitemPlot_+3A_showsamplesize">showSampleSize</code></td>
<td>
<p>whether to show the sample size at the top of the plot</p>
</td></tr>
</table>

<hr>
<h2 id='uniquenessPrior'>Uniqueness prior to assist in item factor analysis</h2><span id='topic+uniquenessPrior'></span>

<h3>Description</h3>

<p>To prevent Heywood cases, Bock, Gibbons, &amp; Muraki (1988)
suggested a beta prior on the uniqueness (Equations 43-46).
The analytic gradient and Hessian are
included for quick optimization using Newton-Raphson.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uniquenessPrior(model, numFactors, strength = 0.1, name = "uniquenessPrior")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uniquenessPrior_+3A_model">model</code></td>
<td>
<p>an mxModel</p>
</td></tr>
<tr><td><code id="uniquenessPrior_+3A_numfactors">numFactors</code></td>
<td>
<p>the number of factors.
All items are assumed to have the same number of factors.</p>
</td></tr>
<tr><td><code id="uniquenessPrior_+3A_strength">strength</code></td>
<td>
<p>the strength of the prior</p>
</td></tr>
<tr><td><code id="uniquenessPrior_+3A_name">name</code></td>
<td>
<p>the name of the mxModel that is returned</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To reproduce these derivatives in maxima for the case
of 2 slopes (<code>c</code> and <code>d</code>), use the following code:
</p>
<p><code>f(c,d) := -p*log(1-(c^2 / (c^2+d^2+1) + (d^2 / (c^2+d^2+1))));</code>
</p>
<p><code>diff(f(c,d), d),radcan;</code>
</p>
<p><code>diff(diff(f(c,d), d),d),radcan;</code>
</p>
<p>The general pattern is given in Bock, Gibbons, &amp; Muraki.
</p>


<h3>Value</h3>

<p>an mxModel that evaluates to the prior density in deviance units
</p>


<h3>References</h3>

<p>Bock, R. D., Gibbons, R., &amp; Muraki, E. (1988). Full-information item factor analysis.
<em>Applied Psychological Measurement, 12</em>(3), 261-280.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>numItems &lt;- 6
spec &lt;- list()
spec[1:numItems] &lt;- list(rpf.drm(factors=2))
names(spec) &lt;- paste0("i", 1:numItems)
item &lt;- mxMatrix(name="item", free=TRUE,
                 values=mxSimplify2Array(lapply(spec, rpf.rparam)))
item$labels[1:2,] &lt;- paste0('p',1:(numItems * 2))
data &lt;- rpf.sample(100, spec, item$values)  # use a larger sample size
m1 &lt;- mxModel(model="m1", item,
              mxData(observed=data, type="raw"),
              mxExpectationBA81(spec),
              mxFitFunctionML())
up &lt;- uniquenessPrior(m1, 2)
container &lt;- mxModel("container", m1, up,
                     mxFitFunctionMultigroup(c("m1", "uniquenessPrior")),
                     mxComputeSequence(list(
                       mxComputeOnce('fitfunction', c('fit','gradient')),
                       mxComputeReportDeriv())))
container &lt;- mxRun(container)
container$output$fit
container$output$gradient
</code></pre>

<hr>
<h2 id='univariatePrior'>Univariate priors commonly used in IFA models</h2><span id='topic+univariatePrior'></span>

<h3>Description</h3>

<p>The returned model evaluates to the fit of the priors in deviance
(-2 log likelihood) units. The analytic gradient and Hessian are
included for quick optimization using Newton-Raphson.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>univariatePrior(type, labels, mode, strength = NULL, name = "univariatePrior")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="univariatePrior_+3A_type">type</code></td>
<td>
<p>one of c(&quot;lnorm&quot;,&quot;beta&quot;,&quot;logit-norm&quot;)</p>
</td></tr>
<tr><td><code id="univariatePrior_+3A_labels">labels</code></td>
<td>
<p>a vector of parameters to which to apply the prior density</p>
</td></tr>
<tr><td><code id="univariatePrior_+3A_mode">mode</code></td>
<td>
<p>the mode of the prior density</p>
</td></tr>
<tr><td><code id="univariatePrior_+3A_strength">strength</code></td>
<td>
<p>a prior-specific strength (optional)</p>
</td></tr>
<tr><td><code id="univariatePrior_+3A_name">name</code></td>
<td>
<p>the name of the mxModel returned</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Priors of type 'beta' and 'logit-norm' are commonly used for the
lower asymptote parameter of the 3PL model. Both of these priors
assume that the parameter is in logit units. The 'lnorm' prior
can be used for slope parameters.
</p>


<h3>Value</h3>

<p>an mxModel that evaluates to the prior density in deviance units
</p>


<h3>Examples</h3>

<pre><code class='language-R'>model &lt;- univariatePrior("logit-norm", "x1", -1)
model$priorParam$values[1,1] &lt;- -.6
model &lt;- mxRun(model)
model$output$fit
model$output$gradient
model$output$hessian
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
