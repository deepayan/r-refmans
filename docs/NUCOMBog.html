<!DOCTYPE html><html lang="en"><head><title>Help for package NUCOMBog</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {NUCOMBog}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#NUCOMBog'><p>NUCOMBog</p></a></li>
<li><a href='#copytestdata'><p>Function to copy test data to user specified folder</p></a></li>
<li><a href='#getData'><p>Function to retrieve data from the monthly output file created by NUCOMBog</p></a></li>
<li><a href='#runNUCOM'><p>Run NUCOMBog</p></a></li>
<li><a href='#runparallelNUCOM'><p>Run parallel NUCOM</p></a></li>
<li><a href='#setupNUCOM'><p>make setupNUCOM</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>NUtrient Cycling and COMpetition Model Undisturbed Open Bog
Ecosystems in a Temperate to Sub-Boreal Climate</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.4.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2018-05-20</td>
</tr>
<tr>
<td>Description:</td>
<td>Modelling the vegetation, carbon, nitrogen and water dynamics of undisturbed open bog ecosystems in a temperate to sub-boreal climate. The executable of the model can downloaded from <a href="https://github.com/jeroenpullens/NUCOMBog">https://github.com/jeroenpullens/NUCOMBog</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0), snowfall</td>
</tr>
<tr>
<td>Suggests:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>J.W.M. Pullens &lt;jeroenpullens@gmail.com&gt;</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jeroenpullens/NUCOMBog/">https://github.com/jeroenpullens/NUCOMBog/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jeroenpullens/NUCOMBog/issues">https://github.com/jeroenpullens/NUCOMBog/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-05-20 15:06:25 UTC; Jeroen</td>
</tr>
<tr>
<td>Author:</td>
<td>J.W.M. Pullens [aut, cre],
  R. Silveyra Gonzalez [aut],
  M. Bagnara [aut],
  F. Hartig [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-05-20 15:19:34 UTC</td>
</tr>
</table>
<hr>
<h2 id='NUCOMBog'>NUCOMBog</h2><span id='topic+NUCOMBog'></span><span id='topic+NUCOMBog-package'></span>

<h3>Description</h3>

<p>The NUCOMBog R package provides an interface to the NUCOMBog model in R.
</p>
<p>The package simulates the dynamics of five plant functional types (PFTs): graminoids, ericaceous shrubs and three groups of <em>Sphagnum</em> mosses (lawn, hollow and hummock mosses) on a monthly time step. The R package also calculates the monthly heterotrophic respiration and therefore the net ecosystem exchange can be calculated.
The package provides a user-friendly tool that allows simulating peatlands over years/decades, under different management strategies and climate change scenarios.
</p>
<p>For details on how to use the package, go to the help files of the functions.
</p>
<p>This work was supported by a STSM grant to JWM Pullens from COST Action FP1304 (Profound, <a href="http://cost-profound.eu/site/">http://cost-profound.eu/site/</a>)
</p>


<h3>Author(s)</h3>

<p>JWM Pullens
</p>


<h3>Source</h3>

<p>The executable and the source code of the model can downloaded from <a href="https://github.com/jeroenpullens/NUCOMBog">https://github.com/jeroenpullens/NUCOMBog</a>.
</p>

<hr>
<h2 id='copytestdata'>Function to copy test data to user specified folder</h2><span id='topic+copytestdata'></span>

<h3>Description</h3>

<p>This function copies the test data from the R package to a user-defined folder. This is necesarry since the model does not read the data from R.
</p>
<p>The model needs to be run in a seperate folder and the executable can be downloaded from the provided URL. The executable needs to be copied to the folder where the data is located. The folder structure should be maintained.
</p>
<p>If the specified folder does not exist, the function will create it at the user defined loaction. If the packages are installed on default path, then the package_folder argument can be kept empty. If not, the user has to provide the path where the R package is installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copytestdata(new_folder,package_folder=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="copytestdata_+3A_new_folder">new_folder</code></td>
<td>
<p>Folder to where the data needs to be copied</p>
</td></tr>
<tr><td><code id="copytestdata_+3A_package_folder">package_folder</code></td>
<td>
<p>Folder where the R package is installed, if this is not specified during installation leave this empty.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>JWM Pullens
</p>


<h3>Source</h3>

<p>The executable and the source code of the model can downloaded from <a href="https://github.com/jeroenpullens/NUCOMBog">https://github.com/jeroenpullens/NUCOMBog</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 for Windows:
   copytestdata(new_folder="C:/testdata/",package_folder=NULL)

 for Linux:
   copytestdata(new_folder="~/testdata/",package_folder=NULL)

## End(Not run)
</code></pre>

<hr>
<h2 id='getData'>Function to retrieve data from the monthly output file created by NUCOMBog</h2><span id='topic+getData'></span>

<h3>Description</h3>

<p>This function returns the data from the monthly output file created by NUCOMBog.
</p>
<p>The original model provides net primary production (NPP) as an output, the model has been modified to provide autotrophic respiration aswell. In this way the net ecosystem exchange (NEE) can be calculated, since NEE = NPP - autotrophic respiration. The micrometeorological sign convention is used in this model, e.g. a negative value for NEE means carbon uptake. All fluxes are in gram carbon per square meter per month (gC m-2 month-1).
The model gives water table depth (WTD) in meters and positive values mean below ground level.
</p>
<p>The possible outputs of the model are Net Primary Production (NPP), Net Ecosystem Exchange (NEE), heterotrohpic respiration (hetero_resp) and water table depth (WTD). The desired output needs to be specified in the setup_NUCOM function.
</p>
<p>The getData function is integrated in all runnucom functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getData(setup, startval = startval)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getData_+3A_setup">setup</code></td>
<td>
<p>setup_structure described in setupNUCOM</p>
</td></tr>
<tr><td><code id="getData_+3A_startval">startval</code></td>
<td>
<p>From which row does the output need to be loaded. Default is 1, has to be setup in the setupNUCOM function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>JWM Pullens
</p>


<h3>Source</h3>

<p>The executable and the source code of the model can downloaded from <a href="https://github.com/jeroenpullens/NUCOMBog">https://github.com/jeroenpullens/NUCOMBog</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getData(setup=test_setup_singlecore)

## End(Not run)
</code></pre>

<hr>
<h2 id='runNUCOM'>Run NUCOMBog</h2><span id='topic+runNUCOM'></span>

<h3>Description</h3>

<p>Code to run NUCOMBog on a single core.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runNUCOM(setup, parameters = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="runNUCOM_+3A_setup">setup</code></td>
<td>
<p>The setup structure created by setup_NUCOM function needs to be inserted here, for more information see the setup_NUCOM function help, by typing &quot;?NUCOMBog::setup_NUCOM&quot;.</p>
</td></tr>
<tr><td><code id="runNUCOM_+3A_parameters">parameters</code></td>
<td>
<p>The parameters which are used in the model. If no parameter values are given the default values will be used. The parameters have to have the format of a dataframe with colum names: &quot;names&quot; and &quot;values&quot;.
See example data available via the testcopydata function. The default parameters are from Heijmans et al. 2008.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>JWM Pullens
</p>


<h3>Source</h3>

<p>The executable of the model can downloaded from <a href="https://github.com/jeroenpullens/NUCOMBog">https://github.com/jeroenpullens/NUCOMBog</a>
</p>


<h3>References</h3>

<p>Heijmans, M., Mauquoy, D., van Geel, B., and Berendse, F. (2008). Long-term effects of climate change on vegetation and carbon dynamics in peat bogs. Journal of Vegetation Science, 19(3)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
names&lt;-c("CO2ref","gram_Beta","eric_MaxGr")
initialParameters &lt;- c(380,0.5,65)
initialParameters&lt;-data.frame(names,initialParameters)
names(initialParameters)&lt;-c("names","values")

runNUCOM(setup = test_setup_singlecore,parameters=initialParameters)

## with predefined parameters:
runnucom(setup = test_setup_singlecore,parameters=NULL)

## End(Not run)
</code></pre>

<hr>
<h2 id='runparallelNUCOM'>Run parallel NUCOM</h2><span id='topic+runparallelNUCOM'></span>

<h3>Description</h3>

<p>Code to run NUCOMBog parallel on multiple cores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runparallelNUCOM(setup, clustertype, numCores = 1, parameters)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="runparallelNUCOM_+3A_setup">setup</code></td>
<td>
<p>The setup needs to be made before by running the setup_NUCOM function.</p>
</td></tr>
<tr><td><code id="runparallelNUCOM_+3A_clustertype">clustertype</code></td>
<td>
<p>Clustertype: The model has only been tested on SOCK cluster, which is the set to default.</p>
</td></tr>
<tr><td><code id="runparallelNUCOM_+3A_numcores">numCores</code></td>
<td>
<p>Number of Cores on which are model needs to be run (NOTE: Non-parallel runs can only be run on 1 core). Default is 1.</p>
</td></tr>
<tr><td><code id="runparallelNUCOM_+3A_parameters">parameters</code></td>
<td>
<p>The parameters which are used in the model. If no parameter values are given the default values will be used. The parameters have to have the format of a dataframe with colum names: &quot;names&quot; and &quot;values&quot;. The default parameters are from Heijmans et al. 2008.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>JWM Pullens
</p>


<h3>Source</h3>

<p>The executable and the source code of the model can downloaded from <a href="https://github.com/jeroenpullens/NUCOMBog">https://github.com/jeroenpullens/NUCOMBog</a>.
</p>


<h3>References</h3>

<p>Heijmans, M., Mauquoy, D., van Geel, B., and Berendse, F. (2008). Long-term effects of climate change on vegetation and carbon dynamics in peat bogs. Journal of Vegetation Science, 19(3)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
!!the variable "test_setup" is from the function setupNUCOM, see the help for more information!!

parallel&lt;-runparallelNUCOM(setup = test_setup,
                            clustertype = "SOCK",
                            numCores = 1,
                            parameters=initialParameters)

## End(Not run)
</code></pre>

<hr>
<h2 id='setupNUCOM'>make setupNUCOM</h2><span id='topic+setupNUCOM'></span>

<h3>Description</h3>

<p>Code to make the setup structure needed run the model.
</p>
<p>The data used in the example is stored in the package and can be copied to a user specified location via the copytestdata function of this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setupNUCOM(mainDir, climate, environment, inival, start, end, type,
  numFolders = 1, parallel = F, separate = F, startval = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setupNUCOM_+3A_maindir">mainDir</code></td>
<td>
<p>Working directory</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_climate">climate</code></td>
<td>
<p>climate input (monthly) format: year, month, air temperature, precipitation, potential evapotranspiration (tab seperated). The potential evapotranspiration needs to be calcluated by using the Penman open water evapotranspiration.</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_environment">environment</code></td>
<td>
<p>environment input (yearly) format: year, atmospheric co2 values, nitrogen deposition</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_inival">inival</code></td>
<td>
<p>initial values of biomass</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_start">start</code></td>
<td>
<p>year in which the simulation starts</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_end">end</code></td>
<td>
<p>year in which the simulation ends</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_type">type</code></td>
<td>
<p>Which output is needed? For more information see the help of the getData function.</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_numfolders">numFolders</code></td>
<td>
<p>The amount of folders that needs to be created (in case of parallel computing)</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_parallel">parallel</code></td>
<td>
<p>Run the model on parallel cores? TRUE/FALSE, default is FALSE.</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_separate">separate</code></td>
<td>
<p>Does the model needs to be run for all parameters seperate? Default is FALSE</p>
</td></tr>
<tr><td><code id="setupNUCOM_+3A_startval">startval</code></td>
<td>
<p>From which row does the output need to be loaded. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with paths and filenames and parameter values which can be implemented in the runnucom and the runnucomParallel function.
</p>


<h3>Author(s)</h3>

<p>JWM Pullens
</p>


<h3>Source</h3>

<p>The executable and the source code of the model can downloaded from <a href="https://github.com/jeroenpullens/NUCOMBog">https://github.com/jeroenpullens/NUCOMBog</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#Define complete file path in setup
for LINUX: ~/home/...../data/ ! pay attention to the last "/"
for Windows_ C://..//data// ! pay attention to the last "//"

##Single core setup:
test_setup_singlecore &lt;- setupNUCOM(mainDir="/home/jeroen/NUCOMBog_data/",
                                     climate="ClimLVMhis.txt",
                                     environment="EnvLVMhis.txt",
                                     inival="inivalLVMhis.txt",
                                     start=1766,
                                     end=1999,
                                     type=c("NEE","WTD"),
                                     parallel=F)

## Multi core setup:
names&lt;-c("CO2ref","gram_Beta","eric_MaxGr")

nparvector&lt;-50
initialParameters &lt;- matrix(runif(n=length(names)*nparvector,
                   min=c(300,0.1,40),
                   max=c(500,1,80)),
                   nrow=length(names))
initialParameters&lt;-data.frame(names,initialParameters)
names(initialParameters)&lt;-c("names",rep("values",nparvector))
initialParameters$names&lt;-as.character(initialParameters$names)

test_setup &lt;- setupNUCOM(mainDir="/home/jeroen/NUCOMBog_data/",
                          climate="ClimLVMhis.txt",
                          environment="EnvLVMhis.txt",
                          inival="inivalLVMhis.txt",
                          start=1766,
                          end=1999,
                          type=c("NEE","WTD"),
                          parallel=T,
                          numFolders=nparvector,
                          separate=F,
                          startval=1)


## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
