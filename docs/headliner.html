<!DOCTYPE html><html><head><title>Help for package headliner</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {headliner}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_article'><p>Append a/an to word</p></a></li>
<li><a href='#add_date_columns'><p>Add columns with date calculations based on reference date</p></a></li>
<li><a href='#add_headline_column'><p>Add column of headlines</p></a></li>
<li><a href='#compare_conditions'><p>Compare two conditions within a data frame</p></a></li>
<li><a href='#compare_values'><p>Compare two values and get talking points</p></a></li>
<li><a href='#demo_data'><p>Small data set referencing the current date</p></a></li>
<li><a href='#headline'><p>Compose phrases that describe differences in the data</p></a></li>
<li><a href='#pixar_films'><p>This data comes from <a href="https://github.com/erictleung/pixarfilms/"><code>pixarfilms</code></a></p>
package by Eric Leung (2022)</a></li>
<li><a href='#plural_phrasing'><p>List of values to use when change is plural (or singular)</p></a></li>
<li><a href='#trend_terms'><p>Phrases for direction of difference</p></a></li>
<li><a href='#view_list'><p>Compact view of list values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Compose Sentences to Describe Comparisons</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Create dynamic, data-driven text. Given two values, a list of 
    talking points is generated and can be combined using string
    interpolation. Based on the 'glue' package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rjake.github.io/headliner/">https://rjake.github.io/headliner/</a>,
<a href="https://github.com/rjake/headliner/">https://github.com/rjake/headliner/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/rjake/headliner/issues/">https://github.com/rjake/headliner/issues/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, glue, lubridate, purrr, rlang, tibble, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, knitr, nycflights13, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-12-20 02:40:35 UTC; foxtr</td>
</tr>
<tr>
<td>Author:</td>
<td>Jake Riley [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jake Riley &lt;rjake@sas.upenn.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-12-20 04:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_article'>Append a/an to word</h2><span id='topic+add_article'></span>

<h3>Description</h3>

<p>Append a/an to word
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_article(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_article_+3A_x">x</code></td>
<td>
<p>string or numeric value</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses crude logic to append 'a' or 'an' to numbers and phrases.
</p>

<ul>
<li><p> words that start with aeiou
</p>
</li>
<li><p> negative numbers always start with 'a', ex: 'a -3' or 'a -8'
</p>
</li>
<li><p> decimals always start with 'a' ex: 0.4 is usually pronounced
'a zero point four' or 'a point four'
</p>
</li>
<li><p> numbers starting with 8 are always 'an'
</p>
</li>
<li><p> if the integer that comes after thousand or million is 11 or 18 then 'an'
</p>

<ul>
<li><p> 18,000 becomes 18 and that becomes 'an 18'
</p>
</li></ul>

</li>
<li><p> if the integer that comes after thousand or million is in
1, 10, 12, 13, 14, 15, 16, 17, 19 then 'a'
</p>

<ul>
<li><p> 15,500 becomes 15 and that becomes 'a 15'
</p>
</li></ul>

</li>
<li><p> otherwise 'a'
</p>
</li></ul>



<h3>Value</h3>

<p>Returns a vector the same length as the input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>add_article("increase")

add_article("decrease")

add_article(c(1, 8, 10, 11, 18, 20, 80))

add_article(18123)

stats::setNames(
  add_article(1.8 * 10^(1:7)),
  prettyNum(1.8 * 10^(1:7), big.mark = ",")
)

</code></pre>

<hr>
<h2 id='add_date_columns'>Add columns with date calculations based on reference date</h2><span id='topic+add_date_columns'></span>

<h3>Description</h3>

<p>Using a reference date (defaults to current date), columns are
appended to the data set describing the number of days, weeks, months,
quarters, calendar years and fiscal years since the reference date. If
the new columns share names with an existing column, the function will show
a warning.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_date_columns(
  df,
  date_col,
  ref_date = Sys.Date(),
  fiscal_year_offset = 6,
  week_start = 1,
  drop = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_date_columns_+3A_df">df</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="add_date_columns_+3A_date_col">date_col</code></td>
<td>
<p>column with class of 'date'</p>
</td></tr>
<tr><td><code id="add_date_columns_+3A_ref_date">ref_date</code></td>
<td>
<p>reference date for calculations, defaults to current date</p>
</td></tr>
<tr><td><code id="add_date_columns_+3A_fiscal_year_offset">fiscal_year_offset</code></td>
<td>
<p>the number of months to offset date, if fiscal
year ends in June, use 6</p>
</td></tr>
<tr><td><code id="add_date_columns_+3A_week_start">week_start</code></td>
<td>
<p>integer for start of week where Monday = 1 and Sunday = 7</p>
</td></tr>
<tr><td><code id="add_date_columns_+3A_drop">drop</code></td>
<td>
<p>some of the generated fields may match the input data frame. When
TRUE, the original columns will be removed and replaced with the new field
of the same name. Otherwise, columns with the same name will be appended with
a '1'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with columns appended to describe
date distances from a reference date.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_data() |&gt;
  add_date_columns(date_col = date)

# if columns overlap, you will see a warning
demo_data() |&gt;
  dplyr::mutate(week = 1) |&gt;
  add_date_columns(date_col = date)

# to drop the old column and keep the new column use `drop = TRUE`
demo_data() |&gt;
  dplyr::mutate(week = 1) |&gt;
  add_date_columns(date_col = date, drop = TRUE)
</code></pre>

<hr>
<h2 id='add_headline_column'>Add column of headlines</h2><span id='topic+add_headline_column'></span>

<h3>Description</h3>

<p>This works similar to <code>headline()</code> but acts on and returns a
data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_headline_column(
  df,
  x,
  y,
  headline = "{trend} of {delta} ({orig_values})",
  ...,
  .name = "headline",
  if_match = "There was no difference",
  trend_phrases = headliner::trend_terms(),
  plural_phrases = NULL,
  orig_values = "{x} vs. {y}",
  n_decimal = 1,
  round_all = TRUE,
  multiplier = 1,
  return_cols = .name
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_headline_column_+3A_df">df</code></td>
<td>
<p>data frame, must be a single row</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_x">x</code></td>
<td>
<p>a numeric value to compare to the reference value of 'y'</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_y">y</code></td>
<td>
<p>a numeric value to act as a control for the 'x' value</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_headline">headline</code></td>
<td>
<p>a string to format the final output. Uses
<code><a href="glue.html#topic+glue">glue</a></code> syntax</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="glue.html#topic+glue_data">glue_data</a></code></p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_.name">.name</code></td>
<td>
<p>string value for the name of the new column to create</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_if_match">if_match</code></td>
<td>
<p>string to display if numbers match, uses
<code><a href="glue.html#topic+glue">glue</a></code> syntax</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_trend_phrases">trend_phrases</code></td>
<td>
<p>list of values to use for when x is more than y
or x is less than y. You can pass it just
<code><a href="#topic+trend_terms">trend_terms</a></code> (the default) and call the result with
<code>"...{trend}..."</code> or pass is a named list (see examples)</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_plural_phrases">plural_phrases</code></td>
<td>
<p>named list of values to use when difference (delta) is
singular (delta = 1) or plural (delta != 1)</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_orig_values">orig_values</code></td>
<td>
<p>a string using <code><a href="glue.html#topic+glue">glue</a></code> syntax.
example: <code style="white-space: pre;">&#8288;({x} vs {y})&#8288;</code></p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_n_decimal">n_decimal</code></td>
<td>
<p>numeric value to limit the number of decimal places in
the returned values.</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_round_all">round_all</code></td>
<td>
<p>logical value to indicate if all values should be rounded.
When FALSE, the values will return with no modification. When TRUE (default)
all values will be round to the length specified by 'n_decimal'.</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_multiplier">multiplier</code></td>
<td>
<p>number indicating the scaling factor. When multiplier = 1
(default), 0.25 will return 0.25. When multiplier = 100, 0.25 will return 25.</p>
</td></tr>
<tr><td><code id="add_headline_column_+3A_return_cols">return_cols</code></td>
<td>
<p>arguments that can be passed to
<code><a href="dplyr.html#topic+select">select</a></code>, ex: c(&quot;a&quot;, &quot;b&quot;),
<code><a href="dplyr.html#topic+starts_with">starts_with</a></code>, etc.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>What is nice about this function is you can return some of the
&quot;talking points&quot; used in the headline calculation. For example, if you want
to find the most extreme headlines, you can use
<code>add_headline_column(..., return_cols = delta)</code> This will bring back a
<code>headline</code> column as well as the <code>delta</code> talking point (the absolute
difference between <code>x</code> and <code>y</code>). With this result, you can sort in descending
order and filter for the biggest difference.
</p>


<h3>Value</h3>

<p>Returns the original data frame with columns appended.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# You can use 'add_headline_column()' to reference values in an existing data set.
# Here is an example comparing the box office sales of different Pixar films
head(pixar_films) |&gt;
  dplyr::select(film, bo_domestic, bo_intl) |&gt;
  add_headline_column(
    x = bo_domestic,
    y = bo_intl,
    headline = "{film} was ${delta}M higher {trend} (${x}M vs ${y}M)",
    trend_phrases = trend_terms(more = "domestically", less = "internationally")
  ) |&gt;
  knitr::kable("pandoc")

# You can also use 'return_cols' to return any and all "talking points".
# You can use tidyselect helpers like 'starts_with("delta")' or
# 'everything()'. In this example, I returned the 'raw_delta' &amp; 'trend' columns
# and then identified the records at the extremes
pixar_films |&gt;
  dplyr::select(film, bo_domestic, bo_intl) |&gt;
  add_headline_column(
    x = bo_domestic,
    y = bo_intl,
    headline = "${delta}M {trend} (${x}M vs ${y}M)",
    trend_phrases = trend_terms(more = "higher", less = "lower"),
    return_cols = c(raw_delta, trend)
  ) |&gt;
  dplyr::filter(raw_delta %in% range(raw_delta)) |&gt;
  knitr::kable("pandoc")

</code></pre>

<hr>
<h2 id='compare_conditions'>Compare two conditions within a data frame</h2><span id='topic+compare_conditions'></span>

<h3>Description</h3>

<p>Using logic that <code><a href="dplyr.html#topic+filter">filter</a></code> can interpret,
<code>compare_conditions()</code> will summarize the data aggregating condition <code>x</code> and
condition <code>y</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_conditions(df, x, y, .cols = everything(), .fns = lst(mean))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_conditions_+3A_df">df</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="compare_conditions_+3A_x">x</code></td>
<td>
<p>condition for comparison, same criteria you would use in
'dplyr::filter', used in contrast to the reference group 'y'</p>
</td></tr>
<tr><td><code id="compare_conditions_+3A_y">y</code></td>
<td>
<p>condition for comparison, same criteria you would use in
'dplyr::filter', used in contrast to the reference group 'x'</p>
</td></tr>
<tr><td><code id="compare_conditions_+3A_.cols">.cols</code></td>
<td>
<p>columns to use in comparison</p>
</td></tr>
<tr><td><code id="compare_conditions_+3A_.fns">.fns</code></td>
<td>
<p>named list of the functions to use, ex:
list(avg = mean, sd = sd) 'purrr' style phrases are also supported like
list(mean = ~mean(.x, na.rm = TRUE), sd = sd) and dplyr::lst(mean, sd) will
create a list(mean = mean, sd = sd)</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>compare_conditions()</code> passes its arguments to
<code><a href="dplyr.html#topic+across">across</a></code>. The <code>.cols</code> and <code>.fns</code> work the same. For
clarity, it is helpful to use the <code><a href="dplyr.html#topic+lst">lst</a></code> function for the
<code>.fns</code> parameter. Using
<code>compare_conditions(..., .cols = my_var, .fns = lst(mean, sd))</code> will return
the values <code>mean_my_var_x</code>, <code>mean_my_var_y</code>, <code>sd_my_var_x</code> and <code>sd_my_var_x</code>
</p>


<h3>Value</h3>

<p>Returns a data frame that is either 1 row, or if grouped,
1 row per group.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# compare_conditions works similar to dplyr::across()
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    .cols = rotten_tomatoes
  )


# because data frames are just fancy lists, you pass the result to headline_list()
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    .cols = rotten_tomatoes
  ) |&gt;
 headline_list("a difference of {delta} points")


 # you can return multiple objects to compare
 # 'view_List()' is a helper to see list objects in a compact way
 pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    .cols = c(rotten_tomatoes, metacritic),
    .fns = dplyr::lst(mean, sd)
  ) |&gt;
  view_list()


# you can use any of the `tidyselect` helpers
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    .cols = dplyr::starts_with("bo_")
  )


# if you want to compare x to the overall average, use y = TRUE
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = TRUE,
    .cols = rotten_tomatoes
  )


# to get the # of observations use length() instead of n()
# note: don't pass the parentheses
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    .cols = rotten_tomatoes, # can put anything here really
    .fns = list(n = length)
  )


# you can also use purrr-style lambdas
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    .cols = rotten_tomatoes,
    .fns = list(avg = ~ sum(.x) / length(.x))
  )

# you can compare categorical data with functions like dplyr::n_distinct()
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    .cols = film,
    .fns = list(distinct = dplyr::n_distinct)
  )
</code></pre>

<hr>
<h2 id='compare_values'>Compare two values and get talking points</h2><span id='topic+compare_values'></span>

<h3>Description</h3>

<p>A function to create &quot;talking points&quot; that
describes the difference between two values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_values(
  x,
  y,
  trend_phrases = headliner::trend_terms(),
  orig_values = "{x} vs. {y}",
  plural_phrases = NULL,
  n_decimal = 1,
  round_all = TRUE,
  multiplier = 1,
  check_rounding = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_values_+3A_x">x</code></td>
<td>
<p>a numeric value to compare to the reference value of 'y'</p>
</td></tr>
<tr><td><code id="compare_values_+3A_y">y</code></td>
<td>
<p>a numeric value to act as a control for the 'x' value</p>
</td></tr>
<tr><td><code id="compare_values_+3A_trend_phrases">trend_phrases</code></td>
<td>
<p>list of values to use for when x is more than y
or x is less than y. You can pass it just
<code><a href="#topic+trend_terms">trend_terms</a></code> (the default) and call the result with
<code>"...{trend}..."</code> or pass is a named list (see examples)</p>
</td></tr>
<tr><td><code id="compare_values_+3A_orig_values">orig_values</code></td>
<td>
<p>a string using <code><a href="glue.html#topic+glue">glue</a></code> syntax.
example: <code style="white-space: pre;">&#8288;({x} vs {y})&#8288;</code></p>
</td></tr>
<tr><td><code id="compare_values_+3A_plural_phrases">plural_phrases</code></td>
<td>
<p>named list of values to use when difference (delta) is
singular (delta = 1) or plural (delta != 1)</p>
</td></tr>
<tr><td><code id="compare_values_+3A_n_decimal">n_decimal</code></td>
<td>
<p>numeric value to limit the number of decimal places in
the returned values.</p>
</td></tr>
<tr><td><code id="compare_values_+3A_round_all">round_all</code></td>
<td>
<p>logical value to indicate if all values should be rounded.
When FALSE, the values will return with no modification. When TRUE (default)
all values will be round to the length specified by 'n_decimal'.</p>
</td></tr>
<tr><td><code id="compare_values_+3A_multiplier">multiplier</code></td>
<td>
<p>number indicating the scaling factor. When multiplier = 1
(default), 0.25 will return 0.25. When multiplier = 100, 0.25 will return 25.</p>
</td></tr>
<tr><td><code id="compare_values_+3A_check_rounding">check_rounding</code></td>
<td>
<p>when TRUE (default) inputs will be checked to confirm if
a difference of zero may be due to rounding. Ex: 0.16 and 0.24 with
'n_decimal = 1' will both return 0.2. Because this will show no difference,
a message will be displayed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given <code>compare_values(x = 8, y = 10)</code> the following items will be returned
in the list:</p>

<table>
<tr>
 <td style="text-align: left;">
   item </td><td style="text-align: left;"> value </td><td style="text-align: left;"> description </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>x</code> </td><td style="text-align: left;"> 2 </td><td style="text-align: left;"> original <code>x</code> value to compare against <code>y</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>y</code> </td><td style="text-align: left;"> 10 </td><td style="text-align: left;"> original <code>y</code> value </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>delta</code> </td><td style="text-align: left;"> 8 </td><td style="text-align: left;"> absolute difference between <code>x</code> &amp; <code>y</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>delta_p</code> </td><td style="text-align: left;"> 80 </td><td style="text-align: left;"> % difference between <code>x</code> &amp; <code>y</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>article_delta</code> </td><td style="text-align: left;"> "an 8" </td><td style="text-align: left;"> <code>delta</code> with the article included </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>article_delta_p</code> </td><td style="text-align: left;"> "an 80" </td><td style="text-align: left;"> <code>delta_p</code> with the article included </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>raw_delta</code> </td><td style="text-align: left;"> -8 </td><td style="text-align: left;"> true difference between <code>x</code> &amp; <code>y</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>raw_delta_p</code> </td><td style="text-align: left;"> -80 </td><td style="text-align: left;"> true % difference between <code>x</code> &amp; <code>y</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>article_raw_delta</code> </td><td style="text-align: left;"> "a -8" </td><td style="text-align: left;"> <code>raw_delta</code> with the article </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>article_raw_delta_p</code> </td><td style="text-align: left;"> "a -80" </td><td style="text-align: left;"> <code>raw_delta_p</code> with the article </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>sign</code> </td><td style="text-align: left;"> -1 </td><td style="text-align: left;"> the direction, 1 (increase), -1 (decrease), or 0 (no change) </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>orig_values</code> </td><td style="text-align: left;"> "2 vs. 10" </td><td style="text-align: left;"> shorthand for <code style="white-space: pre;">&#8288;{x} vs {y}&#8288;</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <code>trend</code> </td><td style="text-align: left;"> "decrease" </td><td style="text-align: left;"> influenced by the values in <code>trend_phrases</code> argument </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p><code>compare_values()</code> returns a list object that can be used with
<code><a href="glue.html#topic+glue">glue</a></code> syntax
</p>


<h3>See Also</h3>

<p><code><a href="#topic+headline">headline()</a></code>, <code><a href="#topic+trend_terms">trend_terms()</a></code>, <code><a href="#topic+plural_phrasing">plural_phrasing()</a></code> and <code><a href="#topic+view_list">view_list()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the values can be manually entered

compare_values(10, 8) |&gt; head(2)
# percent difference (10-8)/8
compare_values(10, 8)$delta_p

# trend_phrases returns an object called trend if nothing is passed
compare_values(10, 8)$trend

# or if one argument is passed using trend_terms()
compare_values(10, 8, trend_phrases = trend_terms(more = "higher"))$trend

# if a named list is used, the objects are called by their names
compare_values(
  10, 8,
  trend_phrases = list(
    more = trend_terms(),
    higher = trend_terms("higher", "lower")
  )
)$higher

# a phrase about the comparison can be edited by providing glue syntax
# 'c' = the 'compare' value, 'r' = 'reference'
compare_values(10, 8, orig_values = "{x} to {y} people")$orig_values

# you can also adjust the rounding, although the default is 1
compare_values(0.1234, 0.4321)$orig_values
compare_values(0.1234, 0.4321, n_decimal = 3)$orig_values
# or add a multiplier
compare_values(0.1234, 0.4321, multiplier = 100)$orig_values
</code></pre>

<hr>
<h2 id='demo_data'>Small data set referencing the current date</h2><span id='topic+demo_data'></span>

<h3>Description</h3>

<p>Small data set referencing the current date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demo_data(n = 10, by = "-2 month")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="demo_data_+3A_n">n</code></td>
<td>
<p>number of rows to return</p>
</td></tr>
<tr><td><code id="demo_data_+3A_by">by</code></td>
<td>
<p>string indicating the unit of time between dates in
<code>seq.Date(..., by = )</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame of size <code>n</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_data()

demo_data(n = 8, by = "1 day")
</code></pre>

<hr>
<h2 id='headline'>Compose phrases that describe differences in the data</h2><span id='topic+headline'></span><span id='topic+headline_list'></span>

<h3>Description</h3>

<p>Given two values, <code>headline()</code> will use
<code><a href="glue.html#topic+glue">glue</a></code> syntax to string together &quot;talking points&quot;.
For example <code>headline(8, 10)</code> will describe a difference of 2 and can be
expressed as
<code>headline(8, 10, headline = "changed by {delta} ({raw_delta_p}%)")</code>. This
returns &quot;changed by 2 (-20%)&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>headline(
  x,
  y,
  headline = "{trend} of {delta} ({orig_values})",
  ...,
  if_match = "There was no difference",
  trend_phrases = headliner::trend_terms(),
  plural_phrases = NULL,
  orig_values = "{x} vs. {y}",
  n_decimal = 1,
  round_all = TRUE,
  multiplier = 1,
  return_data = FALSE
)

headline_list(
  l,
  headline = "{trend} of {delta} ({orig_values})",
  x,
  y,
  ...,
  if_match = "There was no difference.",
  trend_phrases = headliner::trend_terms(),
  plural_phrases = NULL,
  orig_values = "{x} vs. {y}",
  n_decimal = 1,
  round_all = TRUE,
  multiplier = 1,
  return_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="headline_+3A_x">x</code></td>
<td>
<p>a numeric value to compare to the reference value of 'y'</p>
</td></tr>
<tr><td><code id="headline_+3A_y">y</code></td>
<td>
<p>a numeric value to act as a control for the 'x' value</p>
</td></tr>
<tr><td><code id="headline_+3A_headline">headline</code></td>
<td>
<p>a string to format the final output. Uses
<code><a href="glue.html#topic+glue">glue</a></code> syntax</p>
</td></tr>
<tr><td><code id="headline_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="glue.html#topic+glue_data">glue_data</a></code></p>
</td></tr>
<tr><td><code id="headline_+3A_if_match">if_match</code></td>
<td>
<p>string to display if numbers match, uses
<code><a href="glue.html#topic+glue">glue</a></code> syntax</p>
</td></tr>
<tr><td><code id="headline_+3A_trend_phrases">trend_phrases</code></td>
<td>
<p>list of values to use for when x is more than y
or x is less than y. You can pass it just
<code><a href="#topic+trend_terms">trend_terms</a></code> (the default) and call the result with
<code>"...{trend}..."</code> or pass is a named list (see examples)</p>
</td></tr>
<tr><td><code id="headline_+3A_plural_phrases">plural_phrases</code></td>
<td>
<p>named list of values to use when difference (delta) is
singular (delta = 1) or plural (delta != 1)</p>
</td></tr>
<tr><td><code id="headline_+3A_orig_values">orig_values</code></td>
<td>
<p>a string using <code><a href="glue.html#topic+glue">glue</a></code> syntax.
example: <code style="white-space: pre;">&#8288;({x} vs {y})&#8288;</code></p>
</td></tr>
<tr><td><code id="headline_+3A_n_decimal">n_decimal</code></td>
<td>
<p>numeric value to limit the number of decimal places in
the returned values.</p>
</td></tr>
<tr><td><code id="headline_+3A_round_all">round_all</code></td>
<td>
<p>logical value to indicate if all values should be rounded.
When FALSE, the values will return with no modification. When TRUE (default)
all values will be round to the length specified by 'n_decimal'.</p>
</td></tr>
<tr><td><code id="headline_+3A_multiplier">multiplier</code></td>
<td>
<p>number indicating the scaling factor. When multiplier = 1
(default), 0.25 will return 0.25. When multiplier = 100, 0.25 will return 25.</p>
</td></tr>
<tr><td><code id="headline_+3A_return_data">return_data</code></td>
<td>
<p>logical to indicate whether function should return the
talking points used to compose the headline</p>
</td></tr>
<tr><td><code id="headline_+3A_l">l</code></td>
<td>
<p>a list with values to compare, if named, can call by name</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>headline()</code> relies heavily on <code><a href="glue.html#topic+glue_data">glue_data</a></code>.
Objects can be combined into a headline using the following search path:
If given
</p>
<div class="sourceCode r"><pre>delta &lt;- 123
headline(1, 3, delta = "abc")
</pre></div>
<div class="sourceCode"><pre>## decrease of abc (1 vs. 3)
</pre></div>
<p><code>delta</code> is one of the &quot;talking points&quot; from <code>compare_values()</code> and would
usually return &quot;2&quot; but because we passed the named variable
<code>delta = "none"</code>, <code>headline()</code> (really  <code><a href="glue.html#topic+glue_data">glue_data</a></code>)
will look first at the named variables, then at the result of
<code>compare_values()</code> then in the global environment. So in the example above,
the output will return <code>"decrease of xxxxxx (1 vs. 3)"</code>
</p>


<h3>Value</h3>

<p>Returns a character vector the same length as the input,
</p>


<h3>See Also</h3>

<p><code><a href="#topic+compare_values">compare_values()</a></code>, <code><a href="#topic+trend_terms">trend_terms()</a></code>, and <code><a href="#topic+add_article">add_article()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># values can be manually entered, some headlines are provided by default
headline(10, 8)
headline(8, 10)
headline(1:3, 3:1)

# most likely you'll edit the headline by hand
headline(
  x = 10,
  y = 8,
  headline = "There was a ${delta} {trend} vs last year"
)

# you can also adjust the phrasing of higher/lower values
headline(
  x = 10,
  y = 8,
  headline = "Group A was {trend} by {delta_p}%.",
  trend_phrases = trend_terms(more = "higher", less = "lower")
 )

# a phrase about the comparion can be edited by providing glue syntax
# 'c' = the 'compare' value, 'r' = 'reference'
headline(10, 8, orig_values = "{x} to {y} people")

# you can also add phrases for when the difference = 1 or not
headline(
  x = 10,
  y = 8,
  plural_phrases = list(
    were = plural_phrasing(single = "was", multi = "were"),
    people = plural_phrasing(single = "person", multi = "people")
  ),
  headline = "there {were} {delta} {people}"
)

# you can also adjust the rounding, the default is 1
headline(0.1234, 0.4321)
headline(0.1234, 0.4321, n_decimal = 3)
# or use a multiplier
headline(0.1234, 0.4321, multiplier = 100)

# there are many components you can assemble
headline(
  x = 16,
  y = 8,
  headline = "there was {article_delta_p}% {trend}, \\
  {add_article(trend)} of {delta} ({orig_values})"
)


# compare_conditions() produces a one-row data frame that can be
# passed to headline_list()
pixar_films |&gt;
  compare_conditions(
    x = (rating == "G"),
    y = (rating == "PG"),
    rotten_tomatoes
  ) |&gt;
  headline_list(
    headline = "On average, G-rated films score {delta} points {trend} than \\
    PG films on Rotten Tomatoes",
    trend_phrases = trend_terms(more = "higher", less = "lower")
  )

# if you have more than 2 list items, you can specify them by name
list(
  x = 1,
  y = 2,
  z = 3
 ) |&gt;
  headline_list(
    x = x,
    y = z
  )
</code></pre>

<hr>
<h2 id='pixar_films'>This data comes from <a href="https://github.com/erictleung/pixarfilms/"><code>pixarfilms</code></a>
package by Eric Leung (2022)</h2><span id='topic+pixar_films'></span>

<h3>Description</h3>

<p>The data has box office sales, audience ratings, and release dates for each Pixar film
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pixar_films
</code></pre>


<h3>Format</h3>

<p>A tibble with 22 rows and 10 columns:
</p>

<dl>
<dt>order</dt><dd><p>order of release</p>
</dd>
<dt>film</dt><dd><p>name of film</p>
</dd>
<dt>release_date</dt><dd><p>date film premiered</p>
</dd>
<dt>year</dt><dd><p>the year the film premiered</p>
</dd>
<dt>run_time</dt><dd><p>film length in minutes</p>
</dd>
<dt>film_rating</dt><dd><p>rating based on Motion Picture Association (MPA) film
rating system</p>
</dd>
<dt>rotten_tomatoes</dt><dd><p>score from the American review-aggregation website
Rotten Tomatoes; scored out of 100</p>
</dd>
<dt>metacritic</dt><dd><p>score from Metacritic where scores are weighted average
of reviews; scored out of 100</p>
</dd>
<dt>bo_domestic</dt><dd><p>box office gross amount in U.S. dollars (millions) for
U.S. and Canada</p>
</dd>
<dt>bo_intl</dt><dd><p>box office gross amount in U.S. dollars (millions) for other
territories</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>pixar_films

library(ggplot2)

headline(
  x = min(pixar_films$run_time),
  y = max(pixar_films$run_time),
  headline =
    "The shortest film was {delta} minutes less than the longest film ({orig_values} minutes)"
)

ggplot(pixar_films, aes(bo_intl, rating)) +
  geom_boxplot() +
  xlim(0, NA) +
  labs(title = "International Box Office by MPA Rating")


ggplot(pixar_films, aes(release_date, run_time)) +
  geom_line() +
  geom_point() +
  ylim(0, NA) +
  labs(title = "Film runtimes by release date")


ggplot(pixar_films, aes(y = reorder(film, rotten_tomatoes))) +
  geom_linerange(aes(xmin = rotten_tomatoes, xmax = metacritic), size = 2, color = "grey85") +
  geom_point(aes(x = rotten_tomatoes, color = "rotten_tomatoes")) +
  geom_point(aes(x = metacritic, color = "metacritic")) +
  scale_color_manual(values = c("steelblue1", "coral2")) +
  theme_minimal(base_size = 9) +
  labs(
    title = "Rotten Tomatoes vs Metacritic by film",
    color = NULL,
    y = NULL,
    x = "Audience Score"
  )

</code></pre>

<hr>
<h2 id='plural_phrasing'>List of values to use when change is plural (or singular)</h2><span id='topic+plural_phrasing'></span>

<h3>Description</h3>

<p><code>plural_phrasing()</code> returns a list object describing the value
to use when display when <code>x - y</code> is 1 (single) or not one (multiple or
fraction). This helps write &quot;1 person&quot; vs &quot;2 people&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plural_phrasing(single, multi)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plural_phrasing_+3A_single">single</code></td>
<td>
<p>string to use when delta = 1</p>
</td></tr>
<tr><td><code id="plural_phrasing_+3A_multi">multi</code></td>
<td>
<p>string to use when delta &gt; 1</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>plural_phrasing()</code> will primarily be used in <code>headline()</code> and
passed along to <code>compare_conditions()</code>. Similar to <code>trend_terms()</code>.
Plural phrases can be passed in a list. See examples below.
</p>


<h3>Value</h3>

<p>Returns a list object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plural_phrasing(single = "person", multi = "people")

headline(
  x = 1:2,
  y = 0,
  headline = "a difference of {delta} {people}",
  plural_phrases = list(people = plural_phrasing("person", "people"))
)


# a complex example passing multiple trends and plural phrases
headline(
  35, 30,
  headline =
    "We had {an_increase} of {delta} {people}.
    That is {delta} {more} {employees} \\
    than the same time last year ({orig_values}).",
  trend_phrases = list(
    an_increase = trend_terms("an increase", "a decrease"),
    more = trend_terms("more", "less")
  ),
  plural_phrases =
    list(
      people = plural_phrasing("person", "people"),
      employees = plural_phrasing("employee", "employees")
    )
)
</code></pre>

<hr>
<h2 id='trend_terms'>Phrases for direction of difference</h2><span id='topic+trend_terms'></span>

<h3>Description</h3>

<p><code>trend_terms()</code> returns a list object describing the values to
display when <code>x</code> is greater than <code>y</code> or <code>x</code> is less than <code>y</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trend_terms(more = "increase", less = "decrease")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trend_terms_+3A_more">more</code></td>
<td>
<p>string to use when x &gt; y</p>
</td></tr>
<tr><td><code id="trend_terms_+3A_less">less</code></td>
<td>
<p>string to use when x &lt; y</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>trend_terms()</code> will primarily be used in <code>headline()</code> and passed
along to <code>compare_conditions()</code>. Similar to <code>plural_phrasing()</code> Trend terms
can be passed in a list. See examples below.
</p>


<h3>Value</h3>

<p>Returns a list object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+compare_values">compare_values()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
headline(
  x = c(9, 11),
  y = 10,
  headline = "{trend} by {delta_p}%",
  trend_phrases = trend_terms("higher", "lower")
)

# a complex example passing multiple trends and plural phrases
headline(
  35, 30,
  headline =
    "We had {an_increase} of {delta} {people}.
    That is {delta} {more} {employees} \\
    than the same time last year ({orig_values}).",
  trend_phrases = list(
    an_increase = trend_terms("an increase", "a decrease"),
    more = trend_terms("more", "less")
  ),
  plural_phrases =
    list(
      people = plural_phrasing("person", "people"),
      employees = plural_phrasing("employee", "employees")
    )
)
</code></pre>

<hr>
<h2 id='view_list'>Compact view of list values</h2><span id='topic+view_list'></span>

<h3>Description</h3>

<p>Compact view of list values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_list(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_list_+3A_x">x</code></td>
<td>
<p>a vector or list to be transposed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame to display a list or vector vertically.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+compare_values">compare_values()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>compare_values(10, 8) |&gt;
  view_list()

add_article(c(1,8,10, 11, 18)) |&gt;
  view_list()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
