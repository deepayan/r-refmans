<!DOCTYPE html><html><head><title>Help for package starsTileServer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {starsTileServer}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#starsTileServer'><p>A R6 class that extends plumber to function as a tile server</p></a></li>
<li><a href='#targetGrid'><p>Function to calculate a stars grid based on the x,y,z attributes that represents the coordinates of the map tile</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>A Dynamic Tile Server for R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Makes it possible to serve map tiles for web maps (e.g. leaflet) based on a function or a stars object without having to render them in advance. This enables parallelization of the rendering, separating the data source and visualization location and to provide web services.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://bartk.gitlab.io/starsTileServer">https://bartk.gitlab.io/starsTileServer</a>,
<a href="https://gitlab.com/bartk/starsTileServer">https://gitlab.com/bartk/starsTileServer</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.com/bartk/starsTileServer/-/issues">https://gitlab.com/bartk/starsTileServer/-/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, leaflet.extras, webshot, mapview, callr,
magick, shiny, dplyr, magrittr, abind, testthat (&ge; 3.0.0),
withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>R6, leaflet, plumber, png, rlang, sf, stars, units, assertthat</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-22 21:27:52 UTC; bart</td>
</tr>
<tr>
<td>Author:</td>
<td>Bart Kranstauber <a href="https://orcid.org/0000-0001-8303-780X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bart Kranstauber &lt;b.kranstauber@uva.nl&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-22 21:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='starsTileServer'>A R6 class that extends plumber to function as a tile server</h2><span id='topic+starsTileServer'></span>

<h3>Description</h3>

<p>Creates a tile server based on the R6 class <code>plumber::Plumber</code>.
In can be created both with a <code>stars</code> grid as well as a function or list of functions.
The main methods are <code>run</code> and <code>new</code>.
</p>


<h3>Super classes</h3>

<p><code><a href="plumber.html#topic+Hookable">plumber::Hookable</a></code> -&gt; <code><a href="plumber.html#topic+Plumber">plumber::Plumber</a></code> -&gt; <code>starsTileServer</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-starsTileServer-new"><code>starsTileServer$new()</code></a>
</p>
</li>
<li> <p><a href="#method-starsTileServer-add_tile_endpoint"><code>starsTileServer$add_tile_endpoint()</code></a>
</p>
</li>
<li> <p><a href="#method-starsTileServer-get_grid"><code>starsTileServer$get_grid()</code></a>
</p>
</li>
<li> <p><a href="#method-starsTileServer-get_attributes"><code>starsTileServer$get_attributes()</code></a>
</p>
</li>
<li> <p><a href="#method-starsTileServer-get_dimensions"><code>starsTileServer$get_dimensions()</code></a>
</p>
</li>
<li> <p><a href="#method-starsTileServer-get_dimension_values_chr"><code>starsTileServer$get_dimension_values_chr()</code></a>
</p>
</li>
<li> <p><a href="#method-starsTileServer-get_non_spatial_dimensions"><code>starsTileServer$get_non_spatial_dimensions()</code></a>
</p>
</li>
<li> <p><a href="#method-starsTileServer-clone"><code>starsTileServer$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Hookable" data-id="registerHooks"><a href='../../plumber/html/Hookable.html#method-Hookable-registerHooks'><code>plumber::Hookable$registerHooks()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="addAssets"><a href='../../plumber/html/Plumber.html#method-Plumber-addAssets'><code>plumber::Plumber$addAssets()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="addEndpoint"><a href='../../plumber/html/Plumber.html#method-Plumber-addEndpoint'><code>plumber::Plumber$addEndpoint()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="addFilter"><a href='../../plumber/html/Plumber.html#method-Plumber-addFilter'><code>plumber::Plumber$addFilter()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="addGlobalProcessor"><a href='../../plumber/html/Plumber.html#method-Plumber-addGlobalProcessor'><code>plumber::Plumber$addGlobalProcessor()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="call"><a href='../../plumber/html/Plumber.html#method-Plumber-call'><code>plumber::Plumber$call()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="filter"><a href='../../plumber/html/Plumber.html#method-Plumber-filter'><code>plumber::Plumber$filter()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="getApiSpec"><a href='../../plumber/html/Plumber.html#method-Plumber-getApiSpec'><code>plumber::Plumber$getApiSpec()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="getDebug"><a href='../../plumber/html/Plumber.html#method-Plumber-getDebug'><code>plumber::Plumber$getDebug()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="handle"><a href='../../plumber/html/Plumber.html#method-Plumber-handle'><code>plumber::Plumber$handle()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="mount"><a href='../../plumber/html/Plumber.html#method-Plumber-mount'><code>plumber::Plumber$mount()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="onHeaders"><a href='../../plumber/html/Plumber.html#method-Plumber-onHeaders'><code>plumber::Plumber$onHeaders()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="onWSOpen"><a href='../../plumber/html/Plumber.html#method-Plumber-onWSOpen'><code>plumber::Plumber$onWSOpen()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="openAPIFile"><a href='../../plumber/html/Plumber.html#method-Plumber-openAPIFile'><code>plumber::Plumber$openAPIFile()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="print"><a href='../../plumber/html/Plumber.html#method-Plumber-print'><code>plumber::Plumber$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="registerHook"><a href='../../plumber/html/Plumber.html#method-Plumber-registerHook'><code>plumber::Plumber$registerHook()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="removeHandle"><a href='../../plumber/html/Plumber.html#method-Plumber-removeHandle'><code>plumber::Plumber$removeHandle()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="route"><a href='../../plumber/html/Plumber.html#method-Plumber-route'><code>plumber::Plumber$route()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="run"><a href='../../plumber/html/Plumber.html#method-Plumber-run'><code>plumber::Plumber$run()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="serve"><a href='../../plumber/html/Plumber.html#method-Plumber-serve'><code>plumber::Plumber$serve()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="set404Handler"><a href='../../plumber/html/Plumber.html#method-Plumber-set404Handler'><code>plumber::Plumber$set404Handler()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="setApiSpec"><a href='../../plumber/html/Plumber.html#method-Plumber-setApiSpec'><code>plumber::Plumber$setApiSpec()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="setDebug"><a href='../../plumber/html/Plumber.html#method-Plumber-setDebug'><code>plumber::Plumber$setDebug()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="setDocs"><a href='../../plumber/html/Plumber.html#method-Plumber-setDocs'><code>plumber::Plumber$setDocs()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="setDocsCallback"><a href='../../plumber/html/Plumber.html#method-Plumber-setDocsCallback'><code>plumber::Plumber$setDocsCallback()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="setErrorHandler"><a href='../../plumber/html/Plumber.html#method-Plumber-setErrorHandler'><code>plumber::Plumber$setErrorHandler()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="setParsers"><a href='../../plumber/html/Plumber.html#method-Plumber-setParsers'><code>plumber::Plumber$setParsers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="setSerializer"><a href='../../plumber/html/Plumber.html#method-Plumber-setSerializer'><code>plumber::Plumber$setSerializer()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="swaggerFile"><a href='../../plumber/html/Plumber.html#method-Plumber-swaggerFile'><code>plumber::Plumber$swaggerFile()</code></a></span></li>
<li><span class="pkg-link" data-pkg="plumber" data-topic="Plumber" data-id="unmount"><a href='../../plumber/html/Plumber.html#method-Plumber-unmount'><code>plumber::Plumber$unmount()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-starsTileServer-new"></a>



<h4>Method <code>new()</code></h4>

<p>This method is used to initialize a new tile server
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$new(grid, colorFun = NULL, tileSize = 256, ...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>grid</code></dt><dd><p>Either a stars grid, a path pointing towards a gridded file, a function or a list of named functions</p>
</dd>
<dt><code>colorFun</code></dt><dd><p>a color function to use for coloring the map tiles, the function needs to be the same format as <code><a href="leaflet.html#topic+colorNumeric">leaflet::colorNumeric()</a></code>. It is important to specify a color function as it is important to keep the range of the color scale similar between tiles, therefore the minimum and maximum needs to be fixed. It can also be a list of color functions.</p>
</dd>
<dt><code>tileSize</code></dt><dd><p>The size of the tile (generally 256 pixels, and not tested with other sizes)</p>
</dd>
<dt><code>...</code></dt><dd><p>Arguments passed on to the <a href="plumber.html#topic+Plumber">plumber::Plumber</a>, most important is the <code>port</code> number.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>If <code>grid</code> is a function it should take a stars grid as the first argument and return the grid with the same topology with values attached.
Any other arguments to the function will be part of the API and will be passed to the function as characters.
</p>



<h5>Returns</h5>

<p>An <code>starsTileServer</code> object.
</p>


<hr>
<a id="method-starsTileServer-add_tile_endpoint"></a>



<h4>Method <code>add_tile_endpoint()</code></h4>

<p>Add three endpoints to the tile server, to return both the tiles and the color scale used.
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$add_tile_endpoint(prefix, handlerFun, colorFun, params)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>prefix</code></dt><dd><p>the name to be used by the server for this tile server</p>
</dd>
<dt><code>handlerFun</code></dt><dd><p>The function that handles the api request and returns the grid</p>
</dd>
<dt><code>colorFun</code></dt><dd><p>The color function to use for example <code><a href="leaflet.html#topic+colorNumeric">leaflet::colorNumeric()</a></code></p>
</dd>
<dt><code>params</code></dt><dd><p>parameters passed on to the <code>new</code> method of <a href="plumber.html#topic+PlumberEndpoint">plumber::PlumberEndpoint</a></p>
</dd>
</dl>

</div>


<hr>
<a id="method-starsTileServer-get_grid"></a>



<h4>Method <code>get_grid()</code></h4>

<p>return the grid used to initialize the function
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$get_grid()</pre></div>


<hr>
<a id="method-starsTileServer-get_attributes"></a>



<h4>Method <code>get_attributes()</code></h4>

<p>return the attributes of the stars grid
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$get_attributes()</pre></div>


<hr>
<a id="method-starsTileServer-get_dimensions"></a>



<h4>Method <code>get_dimensions()</code></h4>

<p>return the names of the dimensions of the grid
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$get_dimensions()</pre></div>


<hr>
<a id="method-starsTileServer-get_dimension_values_chr"></a>



<h4>Method <code>get_dimension_values_chr()</code></h4>

<p>return the values of a dimension as a character
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$get_dimension_values_chr(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>the name of the dimension</p>
</dd>
</dl>

</div>


<hr>
<a id="method-starsTileServer-get_non_spatial_dimensions"></a>



<h4>Method <code>get_non_spatial_dimensions()</code></h4>

<p>return all non spatial dimensions
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$get_non_spatial_dimensions()</pre></div>


<hr>
<a id="method-starsTileServer-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>starsTileServer$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- matrix(1:20, nrow = 5, ncol = 4)
dim(m) &lt;- c(x = 5, y = 4) # named dim
(s &lt;- stars::st_as_stars(m))
sf::st_crs(s) &lt;- 4326
starsTileServer$new(s)
# Working directly from a file
grid &lt;- system.file("tif/L7_ETMs.tif", package = "stars")
starsTileServer$new(grid)
## Not run: 
starsTileServer$new(s)$run()

## End(Not run)
</code></pre>

<hr>
<h2 id='targetGrid'>Function to calculate a stars grid based on the x,y,z attributes that represents the coordinates of the map tile</h2><span id='topic+targetGrid'></span>

<h3>Description</h3>

<p>Function to calculate a stars grid based on the x,y,z attributes that represents the coordinates of the map tile
</p>


<h3>Usage</h3>

<pre><code class='language-R'>targetGrid(x, y, z, tileSize = 256L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="targetGrid_+3A_x">x</code></td>
<td>
<p>The location of the tile in the x dimension</p>
</td></tr>
<tr><td><code id="targetGrid_+3A_y">y</code></td>
<td>
<p>The location of the tile in the y dimension</p>
</td></tr>
<tr><td><code id="targetGrid_+3A_z">z</code></td>
<td>
<p>The zoom level</p>
</td></tr>
<tr><td><code id="targetGrid_+3A_tilesize">tileSize</code></td>
<td>
<p>The size of the tile generally 256 pixels</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is mostly useful for testing purpose.
</p>


<h3>Value</h3>

<p>A stars grid with all values being zero with the dimensions matching those required for the tile specified
</p>


<h3>Examples</h3>

<pre><code class='language-R'>targetGrid(4, 2, 4)
targetGrid(4, 2, 4, 128)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
