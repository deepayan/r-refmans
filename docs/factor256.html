<!DOCTYPE html><html lang="en"><head><title>Help for package factor256</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {factor256}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#count_by256'><p>Aggregating helpers</p></a></li>
<li><a href='#factor256'><p>Factors of fewer than 256 elements</p></a></li>
<li><a href='#interlace256'><p>Interlace raw vectors</p></a></li>
<li><a href='#setkeyv256'><p><code>setkey</code> for raw columns</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Use Raw Vectors to Minimize Memory Consumption of Factors</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Uses raw vectors to minimize memory consumption of categorical 
    variables with fewer than 256 unique values. Useful for analysis of large
    datasets involving variables such as age, years, states, countries, or
    education levels.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>data.table, tinytest</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-17 05:59:45 UTC; hughp</td>
</tr>
<tr>
<td>Author:</td>
<td>Hugh Parsonage [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hugh Parsonage &lt;hugh.parsonage@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-17 08:50:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='count_by256'>Aggregating helpers</h2><span id='topic+count_by256'></span>

<h3>Description</h3>

<p>Aggregating helpers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>count_by256(DT, by = NULL, count_col = "N")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="count_by256_+3A_dt">DT</code></td>
<td>
<p>A <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="count_by256_+3A_by">by</code></td>
<td>
<p>(string) A column of <code>DT</code>, the count of which is desired.</p>
</td></tr>
<tr><td><code id="count_by256_+3A_count_col">count_col</code></td>
<td>
<p>(string) The name of the column in the result containing
the counts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For:
</p>

<dl>
<dt><code>count_by256</code></dt><dd><p>A tally of <code>by</code>.</p>
</dd>
</dl>


<hr>
<h2 id='factor256'>Factors of fewer than 256 elements</h2><span id='topic+factor256'></span><span id='topic+recompose256'></span><span id='topic+relevel256'></span><span id='topic+levels.factor256'></span><span id='topic+is.factor256'></span><span id='topic+isntSorted256'></span><span id='topic+as_factor'></span><span id='topic+factor256_in'></span><span id='topic+factor256_notin'></span><span id='topic+factor256_ein'></span><span id='topic+factor256_enotin'></span><span id='topic+tabulate256'></span><span id='topic+rank256'></span><span id='topic+order256'></span><span id='topic+unique256'></span><span id='topic+tabulate256_levels'></span>

<h3>Description</h3>

<p>Whereas base R's factors are based on 32-bit integer vectors,
<code>factor256</code> uses 8-bit raw vectors to minimize its memory footprint.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>factor256(x, levels = NULL)

recompose256(f)

relevel256(x, levels)

## S3 method for class 'factor256'
levels(x)

is.factor256(x)

isntSorted256(x, strictly = FALSE)

as_factor(x)

factor256_in(x, tbl)

factor256_notin(x, tbl)

factor256_ein(x, tbl)

factor256_enotin(x, tbl)

tabulate256(f)

rank256(x)

order256(x)

unique256(x)

tabulate256_levels(x, nmax = NULL, dotInterval = 65535L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="factor256_+3A_x">x</code></td>
<td>
<p>An atomic vector with fewer than 256 unique elements.</p>
</td></tr>
<tr><td><code id="factor256_+3A_levels">levels</code></td>
<td>
<p>An optional character vector of or representing the unique values of <code>x</code>.</p>
</td></tr>
<tr><td><code id="factor256_+3A_f">f</code></td>
<td>
<p>A raw vector of class <code>factor256</code>.</p>
</td></tr>
<tr><td><code id="factor256_+3A_strictly">strictly</code></td>
<td>
<p>If <code>TRUE</code> then if <code>x[i] == x[j]</code> and <code>i != j</code>
then <code>x</code> is not sorted.</p>
</td></tr>
<tr><td><code id="factor256_+3A_tbl">tbl</code></td>
<td>
<p>The table of values to lookup in <code>f</code>. May be a <code>factor256</code>
class but will be implicitly converted based on the levels of <code>f</code>.</p>
</td></tr>
<tr><td><code id="factor256_+3A_nmax">nmax</code>, <code id="factor256_+3A_dotinterval">dotInterval</code></td>
<td>
<p>(<code>tabulate256_levels</code> only). Every <code>dotInterval</code>
iterations through <code>x</code> check number of unique elements detected so far. If any count exceeds
<code>nmax</code> the rest of the vector is ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>factor256</code> is a class based on raw vectors.
Values in <code>x</code> absent from <code>levels</code> are mapped to <code>00</code>.
</p>
<p>In the following list, <code>o</code> is the result.
</p>

<dl>
<dt><code>factor256</code></dt><dd><p>A raw vector of class <code>factor256</code>.</p>
</dd>
<dt><code>recompose256</code></dt><dd><p>is the inverse operation.</p>
</dd>
<dt><code>factor256_e?(not)?in</code></dt><dd><p>A logical vector the same length of <code>f</code>, <code>o[i] = TRUE</code> if
<code>f[i]</code> is among the values of <code>tbl</code> when converted to <code>factor256</code>.
<code>_notin</code> is the negation. The <code>factor256_e</code> variants will error if
none of the values of <code>tbl</code> are present in <code>f</code>.</p>
</dd>
<dt><code>tabulate256</code></dt><dd><p>Takes a raw vector and counts the number of times
each element occurs within it. It is always length-256; if an element is absent
it will have value zero in the output.</p>
</dd>
<dt><code>tabulate256_levels</code></dt><dd><p>Similar to <code>tabulate256</code> but with optional arguments <code>nmax</code>,
<code>dotInterval</code>.</p>
</dd>
<dt><code>as_factor</code></dt><dd><p>Converts from <code>factor256</code> to <code>factor</code>.</p>
</dd>
<dt><code>order256</code></dt><dd><p>Same as <code>order</code> but supports raw vectors. <code>order256(x)</code></p>
</dd>
<dt><code>rank256</code></dt><dd><p>Same as <code>rank</code> with <code>ties.method = "first"</code> but supports raw vectors.</p>
</dd>
<dt><code>unique256</code></dt><dd><p>Unique elements of.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>f10 &lt;- factor256(1:10)

fletters &lt;- factor256(rep(letters, 1:26))
head(factor256_in(fletters, "g"))
head(tabulate256(fletters))
head(recompose256(fletters))

gletters &lt;- factor256(rep(letters, 1:26), levels = letters[1:25])
tail(tabulate256(gletters))
tabulate256_levels(gletters, nmax = 5L, dotInterval = 1L)


</code></pre>

<hr>
<h2 id='interlace256'>Interlace raw vectors</h2><span id='topic+interlace256'></span><span id='topic+deinterlace256'></span><span id='topic+interlace256_columns'></span><span id='topic+deinterlace256_columns'></span>

<h3>Description</h3>

<p>Some processes do not accept raw vectors so it can be
necessary to convert our vectors to integers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interlace256(w, x, y = NULL, z = NULL)

deinterlace256(u)

interlace256_columns(DT, new_colnames = 1L)

deinterlace256_columns(DT, new_colnames = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interlace256_+3A_w">w</code>, <code id="interlace256_+3A_x">x</code>, <code id="interlace256_+3A_y">y</code>, <code id="interlace256_+3A_z">z</code></td>
<td>
<p>Raw vectors. A vector may be <code>NULL</code> if fewer than four
vectors need to be compressed.</p>
</td></tr>
<tr><td><code id="interlace256_+3A_u">u</code></td>
<td>
<p>An integer vector.</p>
</td></tr>
<tr><td><code id="interlace256_+3A_dt">DT</code></td>
<td>
<p>A <code>data.frame</code> containing raw vectors to be interlaced.</p>
</td></tr>
<tr><td><code id="interlace256_+3A_new_colnames">new_colnames</code></td>
<td>
<p>A mechanism for producing the new columns. Currently only
<code>1L</code> is implemented, the default mechanism.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>interlace256</code> Return an integer vector, compressing raw vectors.
<code>deinterlace256</code> is the inverse operation, returning a list of four raw vectors.
</p>

<hr>
<h2 id='setkeyv256'><code>setkey</code> for raw columns</h2><span id='topic+setkeyv256'></span>

<h3>Description</h3>

<p><code>setkey</code> for raw columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setkeyv256(DT, cols)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setkeyv256_+3A_dt">DT</code></td>
<td>
<p>A <code>data.table</code>.</p>
</td></tr>
<tr><td><code id="setkeyv256_+3A_cols">cols</code></td>
<td>
<p>Column names as in <code>data.table::setkeyv</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Same as <code>data.table::setkeyv</code> except that raw <code>cols</code> will be
converted to factors (as <code>data.table</code> does not allow raw keys).
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
