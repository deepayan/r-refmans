<!DOCTYPE html><html><head><title>Help for package tmt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tmt}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#tmt-package'><p>tmt: Estimation of the Rasch Model for Multistage Tests</p></a></li>
<li><a href='#tmt_gmc'><p>Function for the Graphical Model Check</p></a></li>
<li><a href='#tmt_lrtest'><p>Computation of Andersen's Likelihood-Ratio Test</p></a></li>
<li><a href='#tmt_mstdesign'><p>Function to Translate the <code>mstdesign</code> Syntax</p></a></li>
<li><a href='#tmt_msttemplate'><p>Function to create a template for the multistage design used in tmt</p></a></li>
<li><a href='#tmt_rm'><p>Estimation (CML) ot the Rasch model with or without multistage designs.</p></a></li>
<li><a href='#tmt_sim'><p>Function for the Simulation of Multistage-Designs</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimation of the Rasch Model for Multistage Tests</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.4-0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-05-02</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Steinfeld <a href="https://orcid.org/0000-0001-9853-8260"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [cre, aut],
  Alexander Robitzsch
    <a href="https://orcid.org/0000-0002-8226-3132"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jan Steinfeld &lt;jan.d.steinfeld@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jansteinfeld.github.io/tmt/">https://jansteinfeld.github.io/tmt/</a>,
<a href="https://github.com/jansteinfeld/tmt">https://github.com/jansteinfeld/tmt</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jansteinfeld/tmt/issues">https://github.com/jansteinfeld/tmt/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Provides conditional maximum likelihood (CML) item parameter estimation of both sequential and cumulative deterministic multistage designs (Zwitser &amp; Maris, 2015, &lt;<a href="https://doi.org/10.1007%2Fs11336-013-9369-6">doi:10.1007/s11336-013-9369-6</a>&gt;) and probabilistic sequential and cumulative multistage designs (Steinfeld &amp; Robitzsch, 2021, &lt;<a href="https://doi.org/10.31234%2Fosf.io%2Few27f">doi:10.31234/osf.io/ew27f</a>&gt;). Supports CML item parameter estimation of conventional linear designs and additional functions for the likelihood ratio test (Andersen, 1973, &lt;<a href="https://doi.org/10.1007%2FBF02291180">doi:10.1007/BF02291180</a>&gt;) as well as functions for simulating various types of multistage designs.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Suggests:</td>
<td>roxygen2, eRm, knitr, prettydoc, psychotools, testthat,
rmarkdown, dexterMST</td>
</tr>
<tr>
<td>Imports:</td>
<td>parallel, ggplot2, Rcpp (&ge; 0.12.0), stats, rlang</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-03 13:10:18 UTC; jansteinfeld</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-03 15:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='tmt-package'>tmt: Estimation of the Rasch Model for Multistage Tests</h2><span id='topic+tmt'></span><span id='topic+tmt-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides conditional maximum likelihood (CML) item parameter estimation of both sequential and cumulative deterministic multistage designs (Zwitser &amp; Maris, 2015, <a href="https://doi.org/10.1007/s11336-013-9369-6">doi:10.1007/s11336-013-9369-6</a>) and probabilistic sequential and cumulative multistage designs (Steinfeld &amp; Robitzsch, 2021, <a href="https://doi.org/10.31234/osf.io/ew27f">doi:10.31234/osf.io/ew27f</a>). Supports CML item parameter estimation of conventional linear designs and additional functions for the likelihood ratio test (Andersen, 1973, <a href="https://doi.org/10.1007/BF02291180">doi:10.1007/BF02291180</a>) as well as functions for simulating various types of multistage designs.
</p>


<h3>Details</h3>

<p>In multistage tests different groups of items (modules) are presented to persons depending on their response behavior to previous item groups. Multistage testing is thus a simple form of adaptive testing. If data is collected on the basis of such a multistage design and the items are estimated using the Conditional Maximum Likelihood (CML) method, Glas (1989) &lt;doi:10.3102/10769986013001045&gt; has shown, that the item parameters are biased. Zwitser and Maris (2015) &lt;doi:10.1007/s11336-013-9369-6&gt; showed in their work, that taking the applied multistage design in consideration and including it in the estimation of the item parameters, the estimation of item parameters is not biased using the CML method. Their proposed solution is implemented in our package. MST designs with a probabilistic instead of a deterministic routing rule (see, e.g. Chen, Yamamoto, &amp; von Davier, 2014 &lt;doi:10.1201/b16858&gt;) are not estimated with this method, therefore the proposed solouting is again modified by Steinfeld and Robitzsch (2021) &lt;doi:10.31234/osf.io/ew27f&gt; which is also integrated into this package.
</p>
<p>An application example can be found in the vignette by using the following command in the R console <code>vignette("introduction_to_tmt")</code>
</p>


<h3>logo</h3>




<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jan Steinfeld <a href="mailto:jan.d.steinfeld@gmail.com">jan.d.steinfeld@gmail.com</a> (<a href="https://orcid.org/0000-0001-9853-8260">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Alexander Robitzsch <a href="mailto:robitzsch@leibniz-ipn.de">robitzsch@leibniz-ipn.de</a> (<a href="https://orcid.org/0000-0002-8226-3132">ORCID</a>)
</p>
</li></ul>



<h3>References</h3>


<ul>
<li><p> Andersen, E. B. (1973). A goodness of fit test for the Rasch model. <em>Psychometrika</em>, 38(1), 123-140.
</p>
</li>
<li><p> Baker, F. B., &amp; Harwell, M. R. (1996). Computing elementary symmetric functions and their derivatives:
A didactic. <em>Applied Psychological Measurement</em>, 20(2), 169-192. Chicago
</p>
</li>
<li><p> Baker, F. B., &amp; Kim, S. H. (2004). <em>Item response theory: Parameter estimation techniques</em>. CRC Press.
</p>
</li>
<li><p> Chen, H., Yamamoto, K., &amp; von Davier, M. (2014). Controlling multistage testing exposure rates in international large-scale assessments. 
In A. Yan, A. A. von Davier, &amp; C. Lewis (Eds.), <em>Computerized Multistage Testing: Theory and Applications</em> (pp. 391-409). 
New York: CRC Press. https://doi.org/10.1201/b16858
</p>
</li>
<li><p> Fischer, G. H., &amp; Molenaar, I. W. (Eds.). (2012). <em>Rasch models: Foundations, recent developments, and applications</em>. 
Springer Science &amp; Business Media.
</p>
</li>
<li><p> Formann, A. K. (1986). A note on the computation of the second-order derivatives of the elementary symmetric 
functions in the Rasch model. <em>Psychometrika</em>, 51(2), 335-339.
</p>
</li>
<li><p> Glas, C.A.W. (1988). The Rasch model and multistage testing. <em>Journal of Educational Statistics</em>, 13(1), 45-52.
</p>
</li>
<li><p> Glas, C.A.W. (2016). Maximum-Likelihood Estimation. In van der Linden, W.J. (Ed.), <em>Handbook of Item Response Theory: 
Volume two: Statistical tools.</em> (pp. 197 - 236). New York: CRC Press.
</p>
</li>
<li><p> Rasch, G. (1960). <em>Probabalistic models for some intelligence and attainment tests.</em> Danmarks
paedagogiske institut.
</p>
</li>
<li><p> Steinfeld, J., &amp; Robitzsch, A. (accepted). Conditional maximum likelihood estimation in probability-based multistage designs. 
<em>Behaviormetrika, xx</em>(x), xxx-xxx. 
</p>
</li>
<li><p> Steinfeld, J., Robitzsch, A. (2023). Estimating item parameters in multistage designs with the tmt package in R. 
<em>Quantitative and Computational Methods in Behavioral Science, 3</em>, e10087. https://doi.org/10.5964/qcmb.10087
</p>
</li>
<li><p> Steinfeld, J., &amp; Robitzsch, A. (2021). Item parameter estimation in multistage designs: A comparison of different estimation approaches for the Rasch model. 
<em>Psych, 3</em>(3), 279-307. https://doi.org/10.3390/psych3030022
</p>
</li>
<li><p> Verhelst, N.D., Glas, C.A.W. und van der Sluis, A. (1984). Estimation Problems in the Rasch-Model:
The Basic Symmetric Functions. <em>Computational Statistics Quatarly</em>, 1(3), 245-262.
</p>
</li>
<li><p> Zwitser, R. J., &amp; Maris, G. (2015). Conditional statistical inference with multistage testing designs.
<em>Psychometrika</em>, 80(1), 65-84.
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://jansteinfeld.github.io/tmt/">https://jansteinfeld.github.io/tmt/</a>
</p>
</li>
<li> <p><a href="https://github.com/jansteinfeld/tmt">https://github.com/jansteinfeld/tmt</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/jansteinfeld/tmt/issues">https://github.com/jansteinfeld/tmt/issues</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>tmt:::tmt_ascii()
##  _             _   
## | |_ _ __ ___ | |_ 
## | __| '_ ` _ \| __|
## | |_| | | | | | |_ 
##  \__|_| |_| |_|\__|

</code></pre>

<hr>
<h2 id='tmt_gmc'>Function for the Graphical Model Check</h2><span id='topic+tmt_gmc'></span>

<h3>Description</h3>

<p>This function performs a so-called graphical model check on the basis of the previously performed Likelihood Ratio Test [tmt::tmt_lrttest()]. The estimated item parameters of the two groups are plotted against each other. There is the possibility in this function to highlight items, to be excluded items from the plot, and to produce confidence-ellipses if desired.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tmt_gmc(
  object,
  title = "graphical model check",
  xaxis = NULL,
  yaxis = NULL,
  lim = NULL,
  ellipse = FALSE,
  drop = NULL,
  alpha = 0.05,
  legendtitle = "split criteria",
  info = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tmt_gmc_+3A_object">object</code></td>
<td>
<p>object of the function [tmt::tmt_lrttest()]</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_title">title</code></td>
<td>
<p>of the plot</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_xaxis">xaxis</code></td>
<td>
<p>description of the x-axis</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_yaxis">yaxis</code></td>
<td>
<p>description of the y-axis</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_lim">lim</code></td>
<td>
<p>of the plot</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_ellipse">ellipse</code></td>
<td>
<p>should confidence-ellipse be plotted</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_drop">drop</code></td>
<td>
<p>which items should be excluded from the plot</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_alpha">alpha</code></td>
<td>
<p>which alpha should be used for the ellipse</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_legendtitle">legendtitle</code></td>
<td>
<p>Title of the Legend</p>
</td></tr>
<tr><td><code id="tmt_gmc_+3A_info">info</code></td>
<td>
<p>vector with further information for the Plot with names of submitted items</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Steinfeld
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#############################################################################
# Example of Graphical Model Check
#############################################################################
items &lt;- seq(-3,3,length.out = 16)
names(items) &lt;- paste0("i",1:16)
persons = 500
dat &lt;- tmt:::sim.rm(theta = persons, b = items, seed = 1234)
dat.rm &lt;- tmt_rm(dat)
dat.lrt &lt;- tmt_lrtest(dat.rm, split = "median")

info &lt;- rep(c("group_a","group_b"),each = 8)
names(info) &lt;- paste0("i",1:16)

drop &lt;- c("i1","i18")

#library(ggplot2)
plot &lt;- tmt_gmc(object = dat.lrt, 
	ellipse = TRUE, 
	info = info,
	drop = drop,
	title = "graphical model check",
	alpha = 0.05,
	legendtitle = "split criteria")

</code></pre>

<hr>
<h2 id='tmt_lrtest'>Computation of Andersen's Likelihood-Ratio Test</h2><span id='topic+tmt_lrtest'></span>

<h3>Description</h3>

<p>This function applies the Likelihood Ratio Test of Andersen. Note that all persons with raw score equal to &quot;median&quot; are assigned to the lower group in cases of a median split. Is is also allowed to split after &quot;mean&quot; or submit any dichotomous vector as split criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tmt_lrtest(object, split = "median", cores = NULL, se = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tmt_lrtest_+3A_object">object</code></td>
<td>
<p>it is necessary to submit an object of the function <code>mst</code> or <code>nmst</code></p>
</td></tr>
<tr><td><code id="tmt_lrtest_+3A_split">split</code></td>
<td>
<p>default is the split criteria &quot;median&quot; of the raw score, optional are &quot;mean&quot; or any dichotomous vector</p>
</td></tr>
<tr><td><code id="tmt_lrtest_+3A_cores">cores</code></td>
<td>
<p>submit integer of cores you would like to apply</p>
</td></tr>
<tr><td><code id="tmt_lrtest_+3A_se">se</code></td>
<td>
<p>logical: if true, the standard error is estimated</p>
</td></tr>
<tr><td><code id="tmt_lrtest_+3A_...">...</code></td>
<td>
<p>further arguments for the <code>tmt_rm</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with following entries
</p>
<table>
<tr><td><code>data_orig</code></td>
<td>
<p>Submitted data frame with item responses</p>
</td></tr>
<tr><td><code>betapars_subgroup</code></td>
<td>
<p>List of item parameters (difficulty) for each subgroup</p>
</td></tr>
<tr><td><code>se.beta_subgroup</code></td>
<td>
<p>List of standard errors of the estimated item parameters</p>
</td></tr>
<tr><td><code>model</code></td>
<td>
<p>Used model ((mst) for Rasch model with multistage design)</p>
</td></tr>
<tr><td><code>LRvalue</code></td>
<td>
<p>LR-value</p>
</td></tr>
<tr><td><code>df</code></td>
<td>
<p>Degrees of freedoms for the test statistic</p>
</td></tr>
<tr><td><code>pvalue</code></td>
<td>
<p>P-value of the likelihood ratio test</p>
</td></tr>
<tr><td><code>loglik_subgroup</code></td>
<td>
<p>Log-likelihoods for the subgroups</p>
</td></tr>
<tr><td><code>split_subgroup</code></td>
<td>
<p>List of split vector for each subgroup</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>Submitted arguments for the function (matched call)</p>
</td></tr>
<tr><td><code>fitobj</code></td>
<td>
<p>List of objects from subgroup estimation</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Steinfeld
</p>


<h3>References</h3>


<ul>
<li><p> Andersen, E. B. (1973). A goodness of fit test for the Rasch model. <em>Psychometrika</em>, 38(1), 123-140.
</p>
</li>
<li><p> Fischer, G. H., &amp; Molenaar, I. W. (Eds.). (2012). <em>Rasch models: Foundations, recent developments, and applications</em>. 
Springer Science &amp; Business Media.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+tmt_rm">tmt_rm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example for tmt_lrtest
#############################################################################
# Example Rasch model and Likelihood Ratio Test
#############################################################################
dat &lt;- tmt:::sim.rm(theta = 100, b = 10, seed = 1111)
dat.rm &lt;- tmt_rm(dat = dat)
dat.lrt &lt;- tmt_lrtest(dat.rm)
summary(dat.lrt)
</code></pre>

<hr>
<h2 id='tmt_mstdesign'>Function to Translate the <code>mstdesign</code> Syntax</h2><span id='topic+tmt_mstdesign'></span>

<h3>Description</h3>

<p>This function translates the specified multistage design for different purposes and functions used in this package. It is possible to apply this function on deterministic as well as probabilistic multistage designs with either sequential or cumulative routing. A detailed instruciton of the application can be found in the package vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tmt_mstdesign(
  mstdesign,
  options = c("design", "simulation", "modules", "items")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tmt_mstdesign_+3A_mstdesign">mstdesign</code></td>
<td>
<p>definition of desired multistage design</p>
</td></tr>
<tr><td><code id="tmt_mstdesign_+3A_options">options</code></td>
<td>
<p>vector of required output. 'modules' = Matrix with the classification of modules and items. ' simulation' = list of all stages. 'design' = matrix of all branches. 'items' vector of all Items.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with following entries
</p>
<table>
<tr><td><code>modules</code></td>
<td>
<p>Matrix which contains each module with its corresponding items</p>
</td></tr>
<tr><td><code>simulation</code></td>
<td>
<p>List of the multistage design. Each element within the list contains a matrix for each stage</p>
</td></tr>
<tr><td><code>design</code></td>
<td>
<p>Matrix of all possible branches</p>
</td></tr>
<tr><td><code>items</code></td>
<td>
<p>Vector of item names</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Steinfeld
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example for tmt_mstdesign
## Not run: 
###################################
# Example-1
###################################
  mstdesign &lt;- "
    B1 =~ c(i1, i2, i3, i4, i5)
    B2 =~ c(i6, i7, i8, i9, i10)
    B3 =~ c(i11, i12, i13, i14, i15)
    B4 =~ c(i16, i17, i18, i19, i20)
    B5 =~ c(i21, i22, i23, i24, i25)
    B6 =~ c(i26, i27, i28, i29, i30)

    # define branches
    b1 := B4(0,2) + B2(0,2) + B1(0,5)
    b2 := B4(0,2) + B2(3,5) + B3(0,5)
    b3 := B4(3,5) + B5(0,2) + B3(0,5)
    b4 := B4(3,5) + B5(3,5) + B6(0,5)
  "
# ---------------------------
# for simulation purposes 
tmt_mstdesign(mstdesign, options = "simulation")$simulation

# ---------------------------
# summary of the submitted design
tmt_mstdesign(mstdesign, options = "design")$design

# ---------------------------
# matrix of all modules with the containing items
tmt_mstdesign(mstdesign, options = "modules")$modules

# ---------------------------
# vector of all items
tmt_mstdesign(mstdesign, options = "items")$items

# ---------------------------
# list of all four elements
tmt_mstdesign(mstdesign, options = c("design", "simulation", "modules", "items"))

## End(Not run)

###################################
# Example-2 
###################################
mstdesign &lt;- "
      B1 =~ paste0('i',1:5)
      B2 =~ paste0('i',6:10)
      B3 =~ paste0('i',11:15)
      B4 =~ paste0('i',16:20)
      B5 =~ paste0('i',21:25)
      B6 =~ paste0('i',26:30)

      # define branches
      b1 := B4(0,2) + B2(0,2) + B1
      b2 := B4(0,2) + B2(3,5) + B3
      b3 := B4(3,5) + B5(0,2) + B3
      b4 := B4(3,5) + B5(3,5) + B6
    "
designelements &lt;- tmt_mstdesign(mstdesign, 
    options = c("design", "simulation", "modules", "items"))
</code></pre>

<hr>
<h2 id='tmt_msttemplate'>Function to create a template for the multistage design used in tmt</h2><span id='topic+tmt_msttemplate'></span>

<h3>Description</h3>

<p>This function creates a template for the definition of multistage designs as required by the estimation function (in multistage design cases). The defines multistage design is then handed over to the function<code>tmt_mstdesign</code>. Essentially, these are the modules, rules and path sections. In the formula-based notation, it is also possible to state additional conditions (constraints) that can be found in the data and are reflected in the multistage design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tmt_msttemplate(formula = NULL, full = TRUE, eval = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tmt_msttemplate_+3A_formula">formula</code></td>
<td>
<p>formula for the desired template of a multistage design. If formula is leaved empty, a matrix as MST design template is generated.</p>
</td></tr>
<tr><td><code id="tmt_msttemplate_+3A_full">full</code></td>
<td>
<p>logical if the modules and rules sections should also be created</p>
</td></tr>
<tr><td><code id="tmt_msttemplate_+3A_eval">eval</code></td>
<td>
<p>logical should the text input be evaluated (e.g. 3:6 = c(3, 4, 5, 6))</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Steinfeld
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#############################################################################
# create simple template
#############################################################################
formula = "start(start) += S1(B1,B2,B3) += S2(B4,B5,B6,B7)"
tmt_msttemplate(formula, full = TRUE, eval = TRUE)
tmt_msttemplate(formula, full = TRUE, eval = FALSE)

#############################################################################
# create complex template
#############################################################################

formula = "nativ(no,yes) ~ education(low,medium,heigh) ~ 
            CBM(3:6) += S1(B1,B2,B3) += S2(B4,B5,B6,B7)"
tmt_msttemplate(formula, full = TRUE, eval = TRUE)
tmt_msttemplate(formula, full = TRUE, eval = FALSE)

#############################################################################
# create template for the input as matrix
#############################################################################
tmt_msttemplate()
</code></pre>

<hr>
<h2 id='tmt_rm'>Estimation (CML) ot the Rasch model with or without multistage designs.</h2><span id='topic+tmt_rm'></span>

<h3>Description</h3>

<p>The <code>tmt_rm</code> function estimates the Rasch model. If the data are collected based on a multistage design (see Zwitser and Maris, 2015) the specific multistage design <code>mstdesign</code> has to be submitted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tmt_rm(
  dat,
  mstdesign = NULL,
  weights = NULL,
  start = NULL,
  sum0 = TRUE,
  se = TRUE,
  optimization = "nlminb",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tmt_rm_+3A_dat">dat</code></td>
<td>
<p>a matrix of dichotomous (0/1) data or a list of the function <code>tmt_designsim</code></p>
</td></tr>
<tr><td><code id="tmt_rm_+3A_mstdesign">mstdesign</code></td>
<td>
<p>Model for the multistage design, if CML estimation without multistage designs is required, than leave the default value</p>
</td></tr>
<tr><td><code id="tmt_rm_+3A_weights">weights</code></td>
<td>
<p>is optional for the weights of cases</p>
</td></tr>
<tr><td><code id="tmt_rm_+3A_start">start</code></td>
<td>
<p>Vector of start values. If no vector is provided, the start values will be automatic generated</p>
</td></tr>
<tr><td><code id="tmt_rm_+3A_sum0">sum0</code></td>
<td>
<p>logical: If the item parameters should be normed to 'sum = 0' as recommended by Glas (2016, p. 208). Otherwise sum0=FALSE</p>
</td></tr>
<tr><td><code id="tmt_rm_+3A_se">se</code></td>
<td>
<p>logical: should the standard error should be estimated?</p>
</td></tr>
<tr><td><code id="tmt_rm_+3A_optimization">optimization</code></td>
<td>
<p>character: Per default 'nlminb' is used but 'optim' is also supported.</p>
</td></tr>
<tr><td><code id="tmt_rm_+3A_...">...</code></td>
<td>
<p>optional further arguments for optim and nlminb use control = list() with arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>According to Glas (1988) &lt;doi:10.3102/10769986013001045&gt; CML estimation of item parameters is biased if the data is collected in multistage designs and this design is not considered. Zwitser and Maris (2015) &lt;doi:10.1007/s11336-013-9369-6&gt; propose to use an additional design matrix to fragment the elementary symmetric function. Their approach is implemented in this package. MST designs with a probabilistic instead of a deterministic routing rule (see, e.g. Chen, Yamamoto, &amp; von Davier, 2014 &lt;doi:10.1201/b16858&gt;) are not estimated with this method, therefore the proposed solouting is again modified by Steinfeld and Robitzsch (2021) &lt;doi:10.31234/osf.io/ew27f&gt; which is also integrated into this package.
</p>


<h3>Value</h3>

<p>List with following entries
</p>
<table>
<tr><td><code>betapar</code></td>
<td>
<p>Estimated item difficulty parameters (if sum0=FALSE, than the first item is set to 0)</p>
</td></tr>
<tr><td><code>se.beta</code></td>
<td>
<p>Standard errors of the estimated item parameters</p>
</td></tr>
<tr><td><code>loglik</code></td>
<td>
<p>Conditional log-likelihood of the model</p>
</td></tr>
<tr><td><code>df</code></td>
<td>
<p>Number of estimated parameters</p>
</td></tr>
<tr><td><code>N</code></td>
<td>
<p>Number of Persons</p>
</td></tr>
<tr><td><code>I</code></td>
<td>
<p>Number of items</p>
</td></tr>
<tr><td><code>data_orig</code></td>
<td>
<p>Submitted data frame with item responses</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>Used data frame with item responses</p>
</td></tr>
<tr><td><code>desmat</code></td>
<td>
<p>Design matrix</p>
</td></tr>
<tr><td><code>convergence</code></td>
<td>
<p>Convergence criterion</p>
</td></tr>
<tr><td><code>iterations</code></td>
<td>
<p>Number of iterations</p>
</td></tr>
<tr><td><code>hessian</code></td>
<td>
<p>Hessian-Matrix</p>
</td></tr>
<tr><td><code>model</code></td>
<td>
<p>Used model ((mst) for Rasch model with multistage design)</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>Submitted arguments for the function (matched call)</p>
</td></tr>
<tr><td><code>designelements</code></td>
<td>
<p>If the multistage version is requested, the preprocessed design is returned, otherwise NULL</p>
</td></tr>
<tr><td><code>mstdesign</code></td>
<td>
<p>If the multistage version is requested, the submitted design is returned, otherwise NULL</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Steinfeld
</p>


<h3>References</h3>


<ul>
<li><p> Baker, F. B., &amp; Harwell, M. R. (1996). Computing elementary symmetric functions and their derivatives:
A didactic. <em>Applied Psychological Measurement, 20</em>(2), 169-192.
</p>
</li>
<li><p> Baker, F. B., &amp; Kim, S. H. (2004). <em>Item response theory: Parameter estimation techniques</em>. CRC Press.
</p>
</li>
<li><p> Chen, H., Yamamoto, K., &amp; von Davier, M. (2014). Controlling multistage testing exposure rates in international large-scale assessments. 
In A. Yan, A. A. von Davier, &amp; C. Lewis (Eds.), <em>Computerized Multistage Testing: Theory and Applications</em> (pp. 391-409). 
New York: CRC Press. https://doi.org/10.1201/b16858
</p>
</li>
<li><p> Fischer, G. H., &amp; Molenaar, I. W. (Eds.). (2012). <em>Rasch models: Foundations, recent developments, and applications</em>. 
Springer Science &amp; Business Media.
</p>
</li>
<li><p> Formann, A. K. (1986). A note on the computation of the second-order derivatives of the elementary symmetric 
functions in the Rasch model. <em>Psychometrika, 51</em>(2), 335-339.
</p>
</li>
<li><p> Glas, C.A.W. (1988). The Rasch model and multistage testing. <em>Journal of Educational Statistics, 13</em>(1), 45-52.
</p>
</li>
<li><p> Glas, C.A.W. (2016). Maximum-Likelihood Estimation. In van der Linden, W.J. (Ed.), <em>Handbook of Item Response Theory: Volume two: Statistical tools.</em> (pp. 197 - 236). New York: CRC Press.
</p>
</li>
<li><p> Rasch, G. (1960). <em>Probabalistic models for some intelligence and attainment tests.</em> Danmarks
paedagogiske institut.
</p>
</li>
<li><p> Steinfeld, J., &amp; Robitzsch, A. (accepted). Conditional maximum likelihood estimation in probability-based multistage designs. 
<em>Behaviormetrika, xx</em>(x), xxx-xxx. 
</p>
</li>
<li><p> Steinfeld, J., Robitzsch, A. (2023). Estimating item parameters in multistage designs with the tmt package in R. 
<em>Quantitative and Computational Methods in Behavioral Science, 3</em>, e10087. https://doi.org/10.5964/qcmb.10087
</p>
</li>
<li><p> Steinfeld, J., &amp; Robitzsch, A. (2021). Item parameter estimation in multistage designs: A comparison of different estimation approaches for the Rasch model. 
<em>Psych, 3</em>(3), 279-307. https://doi.org/10.3390/psych3030022
</p>
</li>
<li><p> Verhelst, N.D., Glas, C.A.W., &amp; van der Sluis, A. (1984). Estimation Problems in the Rasch-Model:
The Basic Symmetric Functions. <em>Computational Statistics Quarterly, 1</em>(3), 245-262.
</p>
</li>
<li><p> Zwitser, R. J., &amp; Maris, G. (2015). Conditional statistical inference with multistage testing designs.
<em>Psychometrika, 80</em>(1), 65-84.
</p>
</li></ul>



<h3>See Also</h3>

<p><a href="#topic+tmt_lrtest">tmt_lrtest</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example for tmt_rm
#############################################################################
# Example-1 simple Rasch model 
#############################################################################
dat &lt;- tmt:::sim.rm(theta = 100, b = 10, seed = 1111)
dat.rm &lt;- tmt_rm(dat = dat)
summary(dat.rm)

#############################################################################
# Example-1 for multistage-design
#############################################################################
mstdesign &lt;- "
  M1 =~ c(i1, i2, i3, i4, i5)
  M2 =~ c(i6, i7, i8, i9, i10)
  M3 =~ c(i11, i12, i13, i14, i15)

  # define path
  p1 := M2(0,2) + M1
  p2 := M2(3,5) + M3
"

items &lt;- seq(-1,1,length.out = 15)
names(items) &lt;- paste0("i",1:15)
persons = 1000

dat &lt;- tmt_sim(mstdesign = mstdesign, 
  items = items, persons = persons)
dat.rm &lt;- tmt_rm(dat = dat, mstdesign = mstdesign)
summary(dat.rm)

## Not run: 
  ############################################################################
  # Example-2 simple Rasch model 
  ############################################################################
  dat &lt;- tmt:::sim.rm(theta = 100, b = 10, seed = 1111)
  dat.rm &lt;- tmt_rm(dat = dat)
  summary(dat.rm)

  ############################################################################
  # Example-2 for multistage-design
  ############################################################################
  # also using 'paste' is possible
  mstdesign &lt;- "
    M1 =~ paste0('i',1:5)
    M2 =~ paste0('i',6:10)
    M3 =~ paste0('i',11:15)
    M4 =~ paste0('i',16:20)
    M5 =~ paste0('i',21:25)
    M6 =~ paste0('i',26:30)

    # define path
    p1 := M4(0,2) + M2(0,2) + M1
    p2 := M4(0,2) + M2(3,5) + M3
    p3 := M4(3,5) + M5(0,2) + M3
    p4 := M4(3,5) + M5(3,5) + M6
  "
  items &lt;- seq(-1,1,length.out = 30)
  names(items) &lt;- paste0("i",1:30)
  persons = 1000
  dat &lt;- tmt_sim(mstdesign = mstdesign, 
    items = items, persons = persons)
  dat.rm &lt;- tmt_rm(dat = dat, mstdesign = mstdesign)
  summary(dat.rm)

    ############################################################################
  # Example-3 for cumulative multistage-design
  ############################################################################
  # also using 'paste' is possible
  mstdesign &lt;- "
    M1  =~ paste0('i',21:30)
    M2  =~ paste0('i',11:20)
    M3  =~ paste0('i', 1:10)
    M4  =~ paste0('i',31:40)
    M5  =~ paste0('i',41:50)
    M6  =~ paste0('i',51:60)
    
    # define path
    p1 := M1(0, 5) += M2( 0,10) += M3
    p2 := M1(0, 5) += M2(11,15) += M4
    p3 := M1(6,10) += M5( 6,15) += M4
    p4 := M1(6,10) += M5(16,20) += M6
    "
  items &lt;- seq(-1,1,length.out = 60)
  names(items) &lt;- paste0("i",1:60)
  persons = 1000
  dat &lt;- tmt_sim(mstdesign = mstdesign, 
    items = items, persons = persons)
  dat.rm &lt;- tmt_rm(dat = dat, mstdesign = mstdesign)
  summary(dat.rm)


## End(Not run)
</code></pre>

<hr>
<h2 id='tmt_sim'>Function for the Simulation of Multistage-Designs</h2><span id='topic+tmt_sim'></span>

<h3>Description</h3>

<p>This function simulates data according to the specified and submitted multistage design. The persons are drawn from a standard normal distribution if the amount of persons are specified. As an additional argument, a seed can also be set. If requested, it is also possible to submit a vector ore list of person parameters to specify different person distributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tmt_sim(
  mstdesign = NULL,
  items = NULL,
  persons = NULL,
  preconditions = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tmt_sim_+3A_mstdesign">mstdesign</code></td>
<td>
<p>definition of desired multistage design</p>
</td></tr>
<tr><td><code id="tmt_sim_+3A_items">items</code></td>
<td>
<p>vector of difficulty parameters for each items</p>
</td></tr>
<tr><td><code id="tmt_sim_+3A_persons">persons</code></td>
<td>
<p>amount of persons per starting module</p>
</td></tr>
<tr><td><code id="tmt_sim_+3A_preconditions">preconditions</code></td>
<td>
<p>definition of preconditions can optionally be specified. In the case of probabilistic routing preconditions such as a pre-test, which are taken into account in the MST design. For the specification the correlation with the true person parameter have to be specified. The submitted correlation is adjusted in the function according to Demirtas and Yavuz (2015; &lt;doi:10.1080/10543406.2014.920868&gt;) It is also possible to submit your own vector with integers for the preconditions.</p>
</td></tr>
<tr><td><code id="tmt_sim_+3A_...">...</code></td>
<td>
<p>further optional arguments like setting a <code>seed</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with following entries
</p>
<table>
<tr><td><code>data</code></td>
<td>
<p>Matrix with item responses</p>
</td></tr>
<tr><td><code>data_mst</code></td>
<td>
<p>Data frame with item responses and additional a vector of used modules per person</p>
</td></tr>
<tr><td><code>persons</code></td>
<td>
<p>Generated and used person parameters</p>
</td></tr>
<tr><td><code>mstdesign</code></td>
<td>
<p>Submitted multistage design</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Jan Steinfeld
</p>


<h3>References</h3>


<ul>
<li><p> Demirtas, H., &amp; Yavuz, Y. (2015). Concurrent Generation of Ordinal and Normal Data. <em>Journal of Biopharmaceutical Statistics</em>, 25(4), 635-650. https://doi.org/10.1080/10543406.2014.920868
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#############################################################################
# translate multistage model 1
#############################################################################
 mstdesign &lt;- "
	 M1 =~ c(i1, i2, i3, i4, i5)
	 M2 =~ c(i6, i7, i8, i9, i10)
	 M3 =~ c(i11, i12, i13, i14, i15)

	 # define branches
	 p1 := M2(0,2) + M1
	 p2 := M2(3,5) + M3
 "
items &lt;- seq(-3,3,length.out = 15)
names(items) &lt;- paste0("i", seq(items))

data_1 &lt;- tmt_sim(mstdesign = mstdesign, 
    items = items, 
    persons = 500, 
    seed = 1111)

#############################################################################
# translate multistage model 2
#############################################################################
mstdesign &lt;- "
    M1 =~ c(i1, i2, i3, i4, i5)
    M2 =~ c(i6, i7, i8, i9, i10)
    M3 =~ c(i11, i12, i13, i14, i15)
    M4 =~ c(i16, i17, i18, i19, i20)
    M5 =~ c(i21, i22, i23, i24, i25)
    M6 =~ c(i26, i27, i28, i29, i30)

    # define branches
    p1 := M4(0,2) + M2(0,2) + M1
    p2 := M4(0,2) + M2(3,5) + M3
    p3 := M4(3,5) + M5(0,2) + M3
    p4 := M4(3,5) + M5(3,5) + M6
  "

items &lt;- seq(-3,3,length.out = 30)
names(items) &lt;- paste0("i", seq(items))

data_2 &lt;- tmt_sim(mstdesign = mstdesign, 
    items = items, 
    persons = 500,
    seed = 1111)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
