<!DOCTYPE html><html><head><title>Help for package ecan</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ecan}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#cluster'><p>Helper function for clustering methods</p></a></li>
<li><a href='#d'><p>Calculating diversity</p></a></li>
<li><a href='#df2table'><p>Convert data.frame and table to each other.</p></a></li>
<li><a href='#draw_layer_construction'><p>Draw layer construction plot</p></a></li>
<li><a href='#gen_example'><p>Generate vegetation example</p></a></li>
<li><a href='#ind_val'><p>Helper function for Indicator Species Analysis</p></a></li>
<li><a href='#is_one2multi'><p>Check cols one-to-one, or one-to-multi in data.frame</p></a></li>
<li><a href='#ordination'><p>Helper function for ordination methods</p></a></li>
<li><a href='#pad2longest'><p>Pad a string to the longest width of the strings.</p></a></li>
<li><a href='#read_biss'><p>Read data from BiSS (Biodiversity Investigation Support System) to data frame.</p></a></li>
<li><a href='#shdi'><p>Helper function for calculating diversity</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Ecological Analysis and Visualization</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Support ecological analyses such as ordination and clustering. 
    Contains consistent and easy wrapper functions of 'stat', 'vegan', and 
    'labdsv' packages, and visualisation functions of ordination and clustering.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/matutosi/ecan">https://github.com/matutosi/ecan</a>
<a href="https://github.com/matutosi/ecan/tree/develop">https://github.com/matutosi/ecan/tree/develop</a> (devel)</td>
</tr>
<tr>
<td>Imports:</td>
<td>MASS, cluster, dendextend, dplyr, ggplot2, jsonlite, labdsv,
magrittr, purrr, rlang, stringr, tibble, tidyr, vegan</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggdendro, knitr, rmarkdown, testthat (&ge; 3.0.0),</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-07-07 07:51:29 UTC; matutosi</td>
</tr>
<tr>
<td>Author:</td>
<td>Toshikazu Matsumura [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Toshikazu Matsumura &lt;matutosi@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-07-07 12:20:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='cluster'>Helper function for clustering methods</h2><span id='topic+cluster'></span><span id='topic+distance'></span><span id='topic+cls_add_group'></span><span id='topic+cls_color'></span>

<h3>Description</h3>

<p>Helper function for clustering methods
</p>
<p>Helper function for calculate distance
</p>
<p>Add group names to hclust labels.
</p>
<p>Add colors to dendrogram
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cluster(x, c_method, d_method)

distance(x, d_method)

cls_add_group(cls, df, indiv, group, pad = TRUE)

cls_color(cls, df, indiv, group)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cluster_+3A_x">x</code></td>
<td>
<p>A community data matrix.
rownames: stands.
colnames: species.</p>
</td></tr>
<tr><td><code id="cluster_+3A_c_method">c_method</code></td>
<td>
<p>A string of clustering method.
&quot;ward.D&quot;, &quot;ward.D2&quot;, &quot;single&quot;, &quot;complete&quot;,
&quot;average&quot; (= UPGMA), &quot;mcquitty&quot; (= WPGMA),
&quot;median&quot; (= WPGMC), &quot;centroid&quot; (= UPGMC), or
&quot;diana&quot;.</p>
</td></tr>
<tr><td><code id="cluster_+3A_d_method">d_method</code></td>
<td>
<p>A string of distance method.
&quot;correlation&quot;, &quot;manhattan&quot;, &quot;euclidean&quot;, &quot;canberra&quot;,
&quot;clark&quot;, &quot;bray&quot;, &quot;kulczynski&quot;, &quot;jaccard&quot;, &quot;gower&quot;,
&quot;altGower&quot;, &quot;morisita&quot;, &quot;horn&quot;, &quot;mountford&quot;, &quot;raup&quot;,
&quot;binomial&quot;, &quot;chao&quot;, &quot;cao&quot;, &quot;mahalanobis&quot;, &quot;chisq&quot;,
&quot;chord&quot;, &quot;aitchison&quot;, or &quot;robust.aitchison&quot;.</p>
</td></tr>
<tr><td><code id="cluster_+3A_cls">cls</code></td>
<td>
<p>A result of cluster or dendrogram.</p>
</td></tr>
<tr><td><code id="cluster_+3A_df">df</code></td>
<td>
<p>A data.frame to be added into ord scores</p>
</td></tr>
<tr><td><code id="cluster_+3A_indiv">indiv</code>, <code id="cluster_+3A_group">group</code></td>
<td>
<p>A string to specify individual and group name of column in df.</p>
</td></tr>
<tr><td><code id="cluster_+3A_pad">pad</code></td>
<td>
<p>A logical to specify padding strings.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>cluster() returns result of clustering.
$clustering_method: c_method
$distance_method:   d_method
</p>
<p>distance() returns distance matrix.
</p>
<div class="sourceCode"><pre>    Inputing cls return a color vector, 
            inputing dend return a dend with color.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr)
df &lt;- 
  tibble::tibble(
  stand = paste0("ST_", c("A", "A", "A", "B", "B", "C", "C", "C", "C")),
species = paste0("sp_", c("a", "e", "d", "e", "b", "e", "d", "b", "a")),
  abundance = c(3, 3, 1, 9, 5, 4, 3, 3, 1))
cls &lt;- 
  df2table(df) %&gt;%
  cluster(c_method = "average", d_method = "bray")
library(ggdendro)
# show standard cluster
ggdendro::ggdendrogram(cls)

# show cluster with group
data(dune, package = "vegan")
data(dune.env, package = "vegan")
cls &lt;- 
  cluster(dune, c_method = "average", d_method = "bray")
df &lt;- tibble::rownames_to_column(dune.env, "stand")
cls &lt;- cls_add_group(cls, df, indiv = "stand", group = "Use")
ggdendro::ggdendrogram(cls)


</code></pre>

<hr>
<h2 id='d'>Calculating diversity</h2><span id='topic+d'></span><span id='topic+h'></span>

<h3>Description</h3>

<p>Calculating diversity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>d(x)

h(x, base = exp(1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="d_+3A_x">x</code>, <code id="d_+3A_base">base</code></td>
<td>
<p>A numeric vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector.
</p>

<hr>
<h2 id='df2table'>Convert data.frame and table to each other.</h2><span id='topic+df2table'></span><span id='topic+table2df'></span><span id='topic+dist2df'></span>

<h3>Description</h3>

<p>Convert data.frame and table to each other.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>df2table(df, st = "stand", sp = "species", ab = "abundance")

table2df(tbl, st = "stand", sp = "species", ab = "abundance")

dist2df(dist)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="df2table_+3A_df">df</code></td>
<td>
<p>A data.frame.</p>
</td></tr>
<tr><td><code id="df2table_+3A_st">st</code>, <code id="df2table_+3A_sp">sp</code>, <code id="df2table_+3A_ab">ab</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="df2table_+3A_tbl">tbl</code></td>
<td>
<p>A table. community matrix.
rownames: stands.
colnames: species.</p>
</td></tr>
<tr><td><code id="df2table_+3A_dist">dist</code></td>
<td>
<p>A distance table.</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>df2table() return table, 
table2df() return data.frame,
dist2df() return data.frame.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>tibble::tibble(
   st = paste0("st_", rep(1:2, times = 2)), 
   sp = paste0("sp_", rep(1:2, each = 2)), 
   ab = runif(4)) %&gt;%
  dplyr::bind_rows(., .) %&gt;%
  print() %&gt;%
  df2table("st", "sp", "ab")

</code></pre>

<hr>
<h2 id='draw_layer_construction'>Draw layer construction plot</h2><span id='topic+draw_layer_construction'></span><span id='topic+add_mid_p_bin_w'></span><span id='topic+mid_point'></span><span id='topic+bin_width'></span>

<h3>Description</h3>

<p>Draw layer construction plot
</p>
<p>Add mid point and bin width of layer heights.
</p>
<p>Compute mid point of layer heights.
</p>
<p>Compute bin width of layer heights.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>draw_layer_construction(
  df,
  stand = "stand",
  height = "height",
  cover = "cover",
  group = "",
  ...
)

add_mid_p_bin_w(df, height = "height")

mid_point(x)

bin_width(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="draw_layer_construction_+3A_df">df</code></td>
<td>
<p>A dataframe including columns: stand, layer height and cover.
Optional column: stand group.</p>
</td></tr>
<tr><td><code id="draw_layer_construction_+3A_stand">stand</code>, <code id="draw_layer_construction_+3A_height">height</code>, <code id="draw_layer_construction_+3A_cover">cover</code>, <code id="draw_layer_construction_+3A_group">group</code></td>
<td>
<p>A string to specify stand, height, cover, group column.</p>
</td></tr>
<tr><td><code id="draw_layer_construction_+3A_...">...</code></td>
<td>
<p>Extra arguments for geom_bar().</p>
</td></tr>
<tr><td><code id="draw_layer_construction_+3A_x">x</code></td>
<td>
<p>A numeric vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>draw_layer_construction() returns gg object,
add_mid_p_bin_w() returns dataframe including mid_point and
bin_width columns.
mid_point() and bin_width() return a numeric vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
n &lt;- 10
height_max &lt;- 20
ly_list    &lt;- c("B", "S", "K")
st_list    &lt;- LETTERS[1]
sp_list    &lt;- letters[1:9]
st_group   &lt;- NULL
sp_group   &lt;- rep(letters[24:26], 3)
cover_list &lt;- 2^(0:4)
df &lt;- gen_example(n = n, use_layer = TRUE,
                  height_max = height_max, ly_list = ly_list,
                  st_list  = st_list,  sp_list  = sp_list,
                  st_group = st_group, sp_group = sp_group,
                  cover_list = cover_list)

# select stand and summarise by sp_group
df %&gt;%
  dplyr::group_by(height, sp_group) %&gt;%
  dplyr::summarise(cover = sum(cover), .groups = "drop") %&gt;%
  draw_layer_construction(group = "sp_group", colour = "white")

</code></pre>

<hr>
<h2 id='gen_example'>Generate vegetation example</h2><span id='topic+gen_example'></span>

<h3>Description</h3>

<p>Stand, species, and cover are basic.
Layer, height, st_group, are sp_group optional.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gen_example(
  n = 300,
  use_layer = TRUE,
  height_max = 20,
  ly_list = "",
  st_list = LETTERS[1:9],
  sp_list = letters[1:9],
  st_group = NULL,
  sp_group = NULL,
  cover_list = 2^(0:6)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gen_example_+3A_n">n</code></td>
<td>
<p>A numeric to generate no of occurrences.</p>
</td></tr>
<tr><td><code id="gen_example_+3A_use_layer">use_layer</code></td>
<td>
<p>A logical. If FALSE, height_max and ly_list
will be omitted.</p>
</td></tr>
<tr><td><code id="gen_example_+3A_height_max">height_max</code></td>
<td>
<p>A numeric. The highest layer of samples.</p>
</td></tr>
<tr><td><code id="gen_example_+3A_ly_list">ly_list</code>, <code id="gen_example_+3A_st_list">st_list</code>, <code id="gen_example_+3A_sp_list">sp_list</code>, <code id="gen_example_+3A_st_group">st_group</code>, <code id="gen_example_+3A_sp_group">sp_group</code></td>
<td>
<p>A string vector.
st_group and sp_group are optional (default is NULL).
Length of st_list and sp_list should be the same
as st_group and sp_group, respectively.</p>
</td></tr>
<tr><td><code id="gen_example_+3A_cover_list">cover_list</code></td>
<td>
<p>A numeric vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with columns: stand, layer, species, cover,
st_group and sp_group.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>n &lt;- 300
height_max &lt;- 20
ly_list    &lt;- c("B1", "B2", "S1", "S2", "K")
st_list    &lt;- LETTERS[1:9]
sp_list    &lt;- letters[1:9]
st_group   &lt;- rep(LETTERS[24:26], 3)
sp_group   &lt;- rep(letters[24:26], 3)
cover_list &lt;- 2^(0:6)
gen_example(n = n, use_layer = TRUE,
            height_max = height_max, ly_list = ly_list, 
            st_list  = st_list,  sp_list  = sp_list,
            st_group = st_group, sp_group = sp_group,
            cover_list = cover_list)

</code></pre>

<hr>
<h2 id='ind_val'>Helper function for Indicator Species Analysis</h2><span id='topic+ind_val'></span>

<h3>Description</h3>

<p>Calculating diversity indices such as species richness (s),
Shannon's H' (h), Simpson' D (d), Simpson's inverse D (i).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ind_val(
  df,
  stand = NULL,
  species = NULL,
  abundance = NULL,
  group = NULL,
  row_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ind_val_+3A_df">df</code></td>
<td>
<p>A data.frame, which has three cols: stand, species, abundance.
Community matrix should be converted using table2df().</p>
</td></tr>
<tr><td><code id="ind_val_+3A_stand">stand</code>, <code id="ind_val_+3A_species">species</code>, <code id="ind_val_+3A_abundance">abundance</code></td>
<td>
<p>A text to specify each column.
If NULL, 1st, 2nd, 3rd column will be used.</p>
</td></tr>
<tr><td><code id="ind_val_+3A_group">group</code></td>
<td>
<p>A text to specify group column.</p>
</td></tr>
<tr><td><code id="ind_val_+3A_row_data">row_data</code></td>
<td>
<p>A logical.
TRUE: return row result data of labdsv::indval().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr)
library(tibble)
data(dune, package = "vegan")
data(dune.env, package = "vegan")
df &lt;- 
  dune %&gt;%
  table2df(st = "stand", sp = "species", ab = "cover") %&gt;%
  dplyr::left_join(tibble::rownames_to_column(dune.env, "stand"))
ind_val(df, abundance = "cover", group = "Moisture")


</code></pre>

<hr>
<h2 id='is_one2multi'>Check cols one-to-one, or one-to-multi in data.frame</h2><span id='topic+is_one2multi'></span><span id='topic+is_one2one'></span><span id='topic+is_multi2multi'></span><span id='topic+cols_one2multi'></span><span id='topic+select_one2multi'></span><span id='topic+unique_length'></span>

<h3>Description</h3>

<p>Check cols one-to-one, or one-to-multi in data.frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_one2multi(df, col_1, col_2)

is_one2one(df, col_1, col_2)

is_multi2multi(df, col_1, col_2)

cols_one2multi(df, col, inculde_self = TRUE)

select_one2multi(df, col, inculde_self = TRUE)

unique_length(df, col_1, col_2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_one2multi_+3A_df">df</code></td>
<td>
<p>A data.frame</p>
</td></tr>
<tr><td><code id="is_one2multi_+3A_col">col</code>, <code id="is_one2multi_+3A_col_1">col_1</code>, <code id="is_one2multi_+3A_col_2">col_2</code></td>
<td>
<p>A string to specify a colname.</p>
</td></tr>
<tr><td><code id="is_one2multi_+3A_inculde_self">inculde_self</code></td>
<td>
<p>A logical.
If TRUE, return value including input col.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>is_one2multi(), is_one2one(), is_multi2multi()  return a logical.
cols_one2multi() returns strings of colnames
that has one2multi relation to input col.
unique_length() returns a list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- tibble::tibble(
  x     = rep(letters[1:6], each = 1),
  x_grp = rep(letters[1:3], each = 2),
  y     = rep(LETTERS[1:3], each = 2),
  y_grp = rep(LETTERS[1:3], each = 2),
  z      = rep(LETTERS[1:3], each = 2),
  z_grp  = rep(LETTERS[1:3], times = 2))

unique_length(df, "x", "x_grp")

is_one2one(df, "x", "x_grp")
is_one2one(df, "y", "y_grp")
is_one2one(df, "z", "z_grp")

</code></pre>

<hr>
<h2 id='ordination'>Helper function for ordination methods</h2><span id='topic+ordination'></span><span id='topic+ord_plot'></span><span id='topic+ord_add_group'></span><span id='topic+ord_extract_score'></span>

<h3>Description</h3>

<p>Helper function for ordination methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ordination(tbl, o_method, d_method = NULL, ...)

ord_plot(ord, score = "st_scores", x = 1, y = 2)

ord_add_group(ord, score = "st_scores", df, indiv, group)

ord_extract_score(ord, score = "st_scores", row_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ordination_+3A_tbl">tbl</code></td>
<td>
<p>A community data matrix.
rownames: stands.
colnames: species.</p>
</td></tr>
<tr><td><code id="ordination_+3A_o_method">o_method</code></td>
<td>
<p>A string of ordination method.
&quot;pca&quot;, &quot;ca&quot;, &quot;dca&quot;, &quot;pcoa&quot;, or &quot;nmds&quot;.
&quot;fspa&quot; is removed, because package dave was archived.</p>
</td></tr>
<tr><td><code id="ordination_+3A_d_method">d_method</code></td>
<td>
<p>A string of distance method.
&quot;correlation&quot;, &quot;manhattan&quot;, &quot;euclidean&quot;, &quot;canberra&quot;,
&quot;clark&quot;, &quot;bray&quot;, &quot;kulczynski&quot;, &quot;jaccard&quot;, &quot;gower&quot;,
&quot;altGower&quot;, &quot;morisita&quot;, &quot;horn&quot;, &quot;mountford&quot;, &quot;raup&quot;,
&quot;binomial&quot;, &quot;chao&quot;, &quot;cao&quot;, &quot;mahalanobis&quot;, &quot;chisq&quot;,
&quot;chord&quot;, &quot;aitchison&quot;, or &quot;robust.aitchison&quot;.</p>
</td></tr>
<tr><td><code id="ordination_+3A_...">...</code></td>
<td>
<p>Other parameters for PCA.</p>
</td></tr>
<tr><td><code id="ordination_+3A_ord">ord</code></td>
<td>
<p>A result of ordination().</p>
</td></tr>
<tr><td><code id="ordination_+3A_score">score</code></td>
<td>
<p>A string to specify score for plot.
&quot;st_scores&quot; means stands and &quot;sp_scores&quot; species.</p>
</td></tr>
<tr><td><code id="ordination_+3A_x">x</code>, <code id="ordination_+3A_y">y</code></td>
<td>
<p>A column number for x and y axis.</p>
</td></tr>
<tr><td><code id="ordination_+3A_df">df</code></td>
<td>
<p>A data.frame to be added into ord scores</p>
</td></tr>
<tr><td><code id="ordination_+3A_indiv">indiv</code>, <code id="ordination_+3A_group">group</code>, <code id="ordination_+3A_row_name">row_name</code></td>
<td>
<p>A string to specify indiv, group, row_name column in df.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ordination() returns result of ordination.
$st_scores:         scores for stand.
$sp_scores:         scores for species.
$eig_val:           eigen value for stand.
$results_raw:       results of original ordination function.
$ordination_method: o_method.
$distance_method:   d_method.
ord_plot() returns ggplot2 object.
ord_extract_score() extracts stand or species scores
from ordination result.
ord_add_group() adds group data.frame into ordination scores.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(ggplot2)
library(vegan)
data(dune)
data(dune.env)

df &lt;- 
  table2df(dune) %&gt;%
  dplyr::left_join(tibble::rownames_to_column(dune.env, "stand"))
sp_dammy &lt;- 
 tibble::tibble("species" = colnames(dune), 
                "dammy_1" = stringr::str_sub(colnames(dune), 1, 1),
                "dammy_6" = stringr::str_sub(colnames(dune), 6, 6))
df &lt;- dplyr::left_join(df, sp_dammy)

ord_dca &lt;- ordination(dune, o_method = "dca")
ord_pca &lt;- 
  df %&gt;%
  df2table() %&gt;%
  ordination(o_method = "pca")

ord_dca_st &lt;- 
  ord_extract_score(ord_dca, score = "st_scores")
ord_pca_sp &lt;- 
  ord_add_group(ord_pca, 
  score = "sp_scores", df, indiv = "species", group = "dammy_1")


</code></pre>

<hr>
<h2 id='pad2longest'>Pad a string to the longest width of the strings.</h2><span id='topic+pad2longest'></span>

<h3>Description</h3>

<p>Pad a string to the longest width of the strings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pad2longest(string, side = "right", pad = " ")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pad2longest_+3A_string">string</code></td>
<td>
<p>Strings.</p>
</td></tr>
<tr><td><code id="pad2longest_+3A_side">side</code></td>
<td>
<p>Side on which padding character is added (left, right or both).</p>
</td></tr>
<tr><td><code id="pad2longest_+3A_pad">pad</code></td>
<td>
<p>Single padding character (default is spaces).</p>
</td></tr>
</table>


<h3>Value</h3>

<div class="sourceCode"><pre>    Strings.
</pre></div>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("a", "ab", "abc")
pad2longest(x, side = "right", pad = " ")

</code></pre>

<hr>
<h2 id='read_biss'>Read data from BiSS (Biodiversity Investigation Support System) to data frame.</h2><span id='topic+read_biss'></span>

<h3>Description</h3>

<p>BiSS data is formatted as JSON.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_biss(txt, join = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_biss_+3A_txt">txt</code></td>
<td>
<p>A JSON string, URL or file.</p>
</td></tr>
<tr><td><code id="read_biss_+3A_join">join</code></td>
<td>
<p>A logical. TRUE: join plot and occurrence, FALSE: do not join.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
# path &lt;- "set file path"
path &lt;- "https://raw.githubusercontent.com/matutosi/biodiv/main/man/example.json"
read_biss(path)

</code></pre>

<hr>
<h2 id='shdi'>Helper function for calculating diversity</h2><span id='topic+shdi'></span>

<h3>Description</h3>

<p>Calculating diversity indices such as species richness (s),
Shannon's H' (h), Simpson' D (d), Simpson's inverse D (i).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shdi(df, stand = NULL, species = NULL, abundance = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shdi_+3A_df">df</code></td>
<td>
<p>A data.frame, which has three cols: stand, species, abundance.
Community matrix should be converted using table2df().</p>
</td></tr>
<tr><td><code id="shdi_+3A_stand">stand</code>, <code id="shdi_+3A_species">species</code>, <code id="shdi_+3A_abundance">abundance</code></td>
<td>
<p>A text to specify each column.
If NULL, 1st, 2nd, 3rd column will be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
Including species richness (s), Shannon's H' (h),
Simpson' D (d), Simpson's inverse D (i).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dune, package = "vegan")
df &lt;- table2df(dune)
shdi(df)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
