<!DOCTYPE html><html><head><title>Help for package cleangeo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cleangeo}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cleangeo'><p>Clean Geometries from Spatial Objects</p></a></li>
<li><a href='#clgeo_Clean'><p>clgeo_Clean</p></a></li>
<li><a href='#clgeo_CleanByPolygonation.Polygon'><p>clgeo_CleanByPolygonation.Polygon</p></a></li>
<li><a href='#clgeo_CleanByPolygonation.Polygons'><p>clgeo_CleanByPolygonation.Polygons</p></a></li>
<li><a href='#clgeo_CleanByPolygonation.SpatialPolygons'><p>clgeo_CleanByPolygonation.SpatialPolygons</p></a></li>
<li><a href='#clgeo_CollectionReport'><p>clgeo_CollectionReport</p></a></li>
<li><a href='#clgeo_GeometryReport'><p>clgeo_GeometryReport</p></a></li>
<li><a href='#clgeo_IsValid'><p>clgeo_IsValid</p></a></li>
<li><a href='#clgeo_SummaryReport'><p>clgeo_SummaryReport</p></a></li>
<li><a href='#clgeo_SuspiciousFeatures'><p>clgeo_SuspiciousFeatures</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.3-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-09-01</td>
</tr>
<tr>
<td>Title:</td>
<td>Cleaning Geometries from Spatial Objects</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Emmanuel Blondel &lt;emmanuel.blondel1@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.15)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, sp, sf</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, markdown, pbapply</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Provides a set of utility tools to inspect spatial objects, facilitate
  handling and reporting of topology errors and geometry validity issue with sp objects.
  Finally, it provides a geometry cleaner that will fix all geometry problems,
  and eliminate (at least reduce) the likelihood of having issues when doing
  spatial data processing.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/eblondel/cleangeo">https://github.com/eblondel/cleangeo</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/eblondel/cleangeo/issues">https://github.com/eblondel/cleangeo/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-01 08:56:34 UTC; emman</td>
</tr>
<tr>
<td>Author:</td>
<td>Emmanuel Blondel <a href="https://orcid.org/0000-0002-5870-5762"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-01 09:10:19 UTC</td>
</tr>
</table>
<hr>
<h2 id='cleangeo'>Clean Geometries from Spatial Objects</h2><span id='topic+cleangeo'></span><span id='topic+cleangeo-package'></span>

<h3>Description</h3>

<p>cleangeo provides a set of utility tools to inspect spatial objects, facilitate handling and 
reporting of topology errors and geometry validity issues.  Finally, it provides a geometry 
cleaner that will fix all geometry problems, and  eliminate (at least reduce) the likelihood 
of having issues when doing spatial data processing.
</p>


<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>

<hr>
<h2 id='clgeo_Clean'>clgeo_Clean</h2><span id='topic+clgeo_Clean'></span>

<h3>Description</h3>

<p>Function to clean a spatial data collection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_Clean(sp, errors.only = NULL, strategy = "SF", verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_Clean_+3A_sp">sp</code></td>
<td>
<p>object extending the <code><a href="sp.html#topic+Spatial-class">Spatial-class</a></code>
as defined in <span class="pkg">sp</span></p>
</td></tr>
<tr><td><code id="clgeo_Clean_+3A_errors.only">errors.only</code></td>
<td>
<p>an object of class <code>vector</code> giving the types of errors
for which the output should bounded. Default value is NULL (<em>i.e.</em> the output
will include features for which both errors and errors were raised.).</p>
</td></tr>
<tr><td><code id="clgeo_Clean_+3A_strategy">strategy</code></td>
<td>
<p>advanced strategy to clean geometries. Default is &quot;SF&quot;,
alternate values are &quot;POLYGONATION, &quot;BUFFER&quot; (old methods).</p>
</td></tr>
<tr><td><code id="clgeo_Clean_+3A_verbose">verbose</code></td>
<td>
<p>Indicates wether the clean logs have to be printed. Default 
value is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object extending the <code><a href="sp.html#topic+Spatial-class">Spatial-class</a></code>
as defined in <span class="pkg">sp</span>, with cleaned geometries.
</p>


<h3>Note</h3>

<p>About cleaning strategy:
The polygonation method is a tentative alternate method to triangulation to clean
geometries and to the classical often used 'buffer' approach. In the polygonation
method, triangulation is skipped and a re-polygonation intuitive algorithm is 
applied to rebuild the source invalid geometry into one or more valid polygonal
geometries.
With the progress done on validating geometries, especially with <span class="pkg">sf</span>, the default
method in cleangeo has now been switched to the use of <code>sf::st_make_valid</code>
</p>


<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 require(sf)
 file &lt;- system.file("extdata", "example.shp", package = "cleangeo")
 sf &lt;- sf::st_read(file)
 sp &lt;- as(sf, "Spatial")
 
 sp.clean &lt;- clgeo_Clean(sp)
 report.clean &lt;- clgeo_CollectionReport(sp.clean)
 clgeo_SummaryReport(report.clean)


</code></pre>

<hr>
<h2 id='clgeo_CleanByPolygonation.Polygon'>clgeo_CleanByPolygonation.Polygon</h2><span id='topic+clgeo_CleanByPolygonation.Polygon'></span>

<h3>Description</h3>

<p>Function to clean a <code><a href="sp.html#topic+Polygon-class">Polygon-class</a></code> object by polygonation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_CleanByPolygonation.Polygon(p, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_CleanByPolygonation.Polygon_+3A_p">p</code></td>
<td>
<p>object of class <code><a href="sp.html#topic+Polygon-class">Polygon-class</a></code> as defined in <span class="pkg">sp</span></p>
</td></tr>
<tr><td><code id="clgeo_CleanByPolygonation.Polygon_+3A_verbose">verbose</code></td>
<td>
<p>Indicates wether the clean logs have to be printed. Default value is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of objects of class <code><a href="sp.html#topic+Polygon-class">Polygon-class</a></code> as defined in <span class="pkg">sp</span>,
with cleaned geometries.
</p>


<h3>Note</h3>

<p>The polygonation method is a tentative alternate method to triangulation to clean
geometries. In this method, triangulation is skipped and a re-polygonation algorithm is
applied.
</p>


<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>

<hr>
<h2 id='clgeo_CleanByPolygonation.Polygons'>clgeo_CleanByPolygonation.Polygons</h2><span id='topic+clgeo_CleanByPolygonation.Polygons'></span>

<h3>Description</h3>

<p>Function to clean a <code><a href="sp.html#topic+Polygons">Polygons</a></code> object by polygonation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_CleanByPolygonation.Polygons(p, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_CleanByPolygonation.Polygons_+3A_p">p</code></td>
<td>
<p>object of class <code><a href="sp.html#topic+Polygons-class">Polygons-class</a></code> as defined in <span class="pkg">sp</span></p>
</td></tr>
<tr><td><code id="clgeo_CleanByPolygonation.Polygons_+3A_verbose">verbose</code></td>
<td>
<p>Indicates wether the clean logs have to be printed. Default value is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code><a href="sp.html#topic+Polygons-class">Polygons-class</a></code> as defined in <span class="pkg">sp</span>,
with cleaned geometries.
</p>


<h3>Note</h3>

<p>The polygonation method is a tentative alternate method to triangulation to clean
geometries. In this method, triangulation is skipped and a re-polygonation algorithm is
applied.
</p>


<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>

<hr>
<h2 id='clgeo_CleanByPolygonation.SpatialPolygons'>clgeo_CleanByPolygonation.SpatialPolygons</h2><span id='topic+clgeo_CleanByPolygonation.SpatialPolygons'></span><span id='topic+clgeo_CleanByTriangulation'></span>

<h3>Description</h3>

<p>Function to clean a <code><a href="sp.html#topic+SpatialPolygons">SpatialPolygons</a></code> object by polygonation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_CleanByPolygonation.SpatialPolygons(sp, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_CleanByPolygonation.SpatialPolygons_+3A_sp">sp</code></td>
<td>
<p>object extending the <code><a href="sp.html#topic+Spatial-class">Spatial-class</a></code> as defined in <span class="pkg">sp</span></p>
</td></tr>
<tr><td><code id="clgeo_CleanByPolygonation.SpatialPolygons_+3A_verbose">verbose</code></td>
<td>
<p>Indicates wether the clean logs have to be printed. Default value is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object extending the <code><a href="sp.html#topic+Spatial-class">Spatial-class</a></code> as defined in <span class="pkg">sp</span>,
with cleaned geometries.
</p>


<h3>Note</h3>

<p>The polygonation method is a tentative alternate method to triangulation to clean
geometries. In this method, triangulation is skipped and a re-polygonation algorithm is
applied.
</p>


<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>

<hr>
<h2 id='clgeo_CollectionReport'>clgeo_CollectionReport</h2><span id='topic+clgeo_CollectionReport'></span>

<h3>Description</h3>

<p>Function to get a spatial data collection validation report. The function outputs
a <code>data.frame</code> binding all geometry validity reports, each one produced by 
<code><a href="#topic+clgeo_GeometryReport">clgeo_GeometryReport</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_CollectionReport(sp)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_CollectionReport_+3A_sp">sp</code></td>
<td>
<p>object extending the <code><a href="sp.html#topic+Spatial-class">Spatial-class</a></code> as defined in <span class="pkg">sp</span></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>data.frame</code> with the following columns:
</p>

<ul>
<li> <p><em>type</em> eventual <span class="pkg">rgeos</span> issue
</p>
</li>
<li> <p><em>valid</em> geometry validity status (according to OGC specifications)
</p>
</li>
<li> <p><em>issue_type</em> type of geometry issue
</p>
</li>
<li> <p><em>error_msg</em> catched message when error raised about geometry
</p>
</li>
<li> <p><em>warning_msg</em> catched message when warning raised about geometry
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clgeo_GeometryReport">clgeo_GeometryReport</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> require(sf)
 file &lt;- system.file("extdata", "example.shp", package = "cleangeo")
 sf &lt;- sf::st_read(file)
 sp &lt;- as(sf, "Spatial")
 
 report &lt;- clgeo_CollectionReport(sp)

</code></pre>

<hr>
<h2 id='clgeo_GeometryReport'>clgeo_GeometryReport</h2><span id='topic+clgeo_GeometryReport'></span><span id='topic+clgeo_Geometry'></span>

<h3>Description</h3>

<p>Function to get a geometry validation report: The report informs on the following:
</p>

<ul>
<li> <p><em>type</em> eventual <span class="pkg">rgeos</span> issue
</p>
</li>
<li> <p><em>valid</em> geometry validity status (according to OGC specifications)
</p>
</li>
<li> <p><em>issue_type</em> type of geometry issue
</p>
</li>
<li> <p><em>msg</em> catched message when error raised about geometry
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>clgeo_GeometryReport(spgeom)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_GeometryReport_+3A_spgeom">spgeom</code></td>
<td>
<p>object extending the <code><a href="sp.html#topic+Spatial-class">Spatial-class</a></code> as defined in <span class="pkg">sp</span></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>list</code> giving the following:
</p>

<ul>
<li> <p><em>type</em> eventual <span class="pkg">rgeos</span> issue
</p>
</li>
<li> <p><em>valid</em> geometry validity status (according to OGC specifications)
</p>
</li>
<li> <p><em>issue_type</em> type of geometry issue
</p>
</li>
<li> <p><em>msg</em> catched message when warning raised about geometry
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>

<hr>
<h2 id='clgeo_IsValid'>clgeo_IsValid</h2><span id='topic+clgeo_IsValid'></span>

<h3>Description</h3>

<p>Wrapper method to try performing rgeos::gIsValid call and catch eventual 
warnings or errors (in particular GEOS exceptions).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_IsValid(sp, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_IsValid_+3A_sp">sp</code></td>
<td>
<p>object extending the <code><a href="sp.html#topic+Spatial-class">Spatial-class</a></code> as defined in <span class="pkg">sp</span></p>
</td></tr>
<tr><td><code id="clgeo_IsValid_+3A_verbose">verbose</code></td>
<td>
<p>object of class &quot;logical&quot;. Default value is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &quot;logical&quot;. TRUE if valid, FALSE otherwise
</p>


<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 require(sf)
 file &lt;- system.file("extdata", "example.shp", package = "cleangeo")
 sf &lt;- sf::st_read(file)
 sp &lt;- as(sf, "Spatial")
 clgeo_IsValid(sp)


</code></pre>

<hr>
<h2 id='clgeo_SummaryReport'>clgeo_SummaryReport</h2><span id='topic+clgeo_SummaryReport'></span>

<h3>Description</h3>

<p>Function to get summary of a spatial data collection report returned by 
<code><a href="#topic+clgeo_CollectionReport">clgeo_CollectionReport</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_SummaryReport(report)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_SummaryReport_+3A_report">report</code></td>
<td>
<p>a report object as returned by<code><a href="#topic+clgeo_CollectionReport">clgeo_CollectionReport</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>table</code> giving the report summary. The summary
gives the counting by value for each of the report columns:
</p>

<ul>
<li> <p><em>type</em> eventual geometry issue
</p>
</li>
<li> <p><em>valid</em> geometry validity status (according to OGC specifications)
</p>
</li>
<li> <p><em>issue_type</em> type of geometry issue
</p>
</li>
<li> <p><em>msg</em> catched message when error raised about geometry
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clgeo_CollectionReport">clgeo_CollectionReport</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> require(sf)
 file &lt;- system.file("extdata", "example.shp", package = "cleangeo")
 sf &lt;- sf::st_read(file)
 sp &lt;- as(sf, "Spatial")
 
 report &lt;- clgeo_CollectionReport(sp)
 clgeo_SummaryReport(report)
 
</code></pre>

<hr>
<h2 id='clgeo_SuspiciousFeatures'>clgeo_SuspiciousFeatures</h2><span id='topic+clgeo_SuspiciousFeatures'></span>

<h3>Description</h3>

<p>Function to get the list of index of suspicious geometries within a spatial data
collection, given a spatial data collection report returned by  the function 
<code><a href="#topic+clgeo_CollectionReport">clgeo_CollectionReport</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clgeo_SuspiciousFeatures(report, errors.only = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clgeo_SuspiciousFeatures_+3A_report">report</code></td>
<td>
<p>a report object as returned by<code><a href="#topic+clgeo_CollectionReport">clgeo_CollectionReport</a></code>
for which the output should bounded. Default value is NULL (<em>i.e.</em> the output
will include features for which both errors and errors were raised.).</p>
</td></tr>
<tr><td><code id="clgeo_SuspiciousFeatures_+3A_errors.only">errors.only</code></td>
<td>
<p>an object of class <code>vector</code> giving the types of errors
for which the output should bounded. Default value is NULL (<em>i.e.</em> the output
will include features for which both errors and errors were raised.).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>vector</code> giving the numeric indexes of spatial
objects tagged as suspicious (<em>i.e.</em> that are not valid acccording to OGC
specifications)
</p>


<h3>Author(s)</h3>

<p>Emmanuel Blondel <a href="mailto:emmanuel.blondel1@gmail.com">emmanuel.blondel1@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clgeo_CollectionReport">clgeo_CollectionReport</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> require(sf)
 file &lt;- system.file("extdata", "example.shp", package = "cleangeo")
 sf &lt;- sf::st_read(file)
 sp &lt;- as(sf, "Spatial")
 
 report &lt;- clgeo_CollectionReport(sp)
 nv &lt;- clgeo_SuspiciousFeatures(report)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
