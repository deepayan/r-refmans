<!DOCTYPE html><html lang="en"><head><title>Help for package superpc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {superpc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#superpc.cv'>
<p>Cross-validation for supervised principal components</p></a></li>
<li><a href='#superpc.decorrelate'>
<p>Decorrelate features  with respect to competing predictors</p></a></li>
<li><a href='#superpc.fit.to.outcome'>
<p>Fit predictive model using outcome of supervised principal components</p></a></li>
<li><a href='#superpc.listfeatures'>
<p>Return a list of the important predictors</p></a></li>
<li><a href='#superpc.lrtest.curv'>
<p>Compute values of likelihood ratio test  from supervised  principal components fit</p></a></li>
<li><a href='#superpc.news'><p>Display the <span class="pkg">superpc</span> Package News</p></a></li>
<li><a href='#superpc.plot.lrtest'>
<p>Plot likelhiood ratio test statistics</p></a></li>
<li><a href='#superpc.plotcv'>
<p>Plot output from superpc.cv</p></a></li>
<li><a href='#superpc.plotred.lrtest'>
<p>Plot likelihood ratio test statistics from supervised principal components predictor</p></a></li>
<li><a href='#superpc.predict'>
<p>Form principal components predictor from a trained superpc object</p></a></li>
<li><a href='#superpc.predict.red'>
<p>Feature selection for supervised principal components</p></a></li>
<li><a href='#superpc.predict.red.cv'>
<p>Cross-validation of feature selection for supervised principal components</p></a></li>
<li><a href='#superpc.predictionplot'>
<p>Plot outcome predictions from superpc</p></a></li>
<li><a href='#superpc.rainbowplot'>
<p>Make rainbow plot of superpc and compeiting predictors</p></a></li>
<li><a href='#superpc.train'>
<p>Prediction by supervised principal components</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Supervised Principal Components</td>
</tr>
<tr>
<td>Version:</td>
<td>1.12</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-10-19</td>
</tr>
<tr>
<td>Author:</td>
<td>Eric Bair [aut],
  Jean-Eudes Dazard [cre, ctb],
  Rob Tibshirani [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jean-Eudes Dazard &lt;jean-eudes.dazard@case.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Does prediction in the case of a censored survival outcome, or a regression outcome, using the "supervised principal component" approach. 'Superpc' is especially useful for high-dimensional data when the number of features p dominates the number of samples n (p &gt;&gt; n paradigm), as generated, for instance, by high-throughput technologies.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, stats, graphics, grDevices</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://www-stat.stanford.edu/~tibs/superpc">http://www-stat.stanford.edu/~tibs/superpc</a>,
<a href="https://github.com/jedazard/superpc">https://github.com/jedazard/superpc</a></td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-10-19 22:10:03 UTC</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a> | file LICENSE</td>
</tr>
<tr>
<td>Archs:</td>
<td>i386, x64</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-10-19 18:31:57 UTC; JE D</td>
</tr>
</table>
<hr>
<h2 id='superpc.cv'>
Cross-validation for supervised principal components
</h2><span id='topic+superpc.cv'></span>

<h3>Description</h3>

<p>This function uses a form of cross-validation to estimate 
the optimal feature threshold in supervised principal components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.cv(fit,
               data, 
               n.threshold=20,
               n.fold=NULL,
               folds=NULL,
               n.components=3, 
               min.features=5, 
               max.features=nrow(data$x),
               compute.fullcv= TRUE,
               compute.preval=TRUE, 
               xl.mode=c("regular","firsttime","onetime","lasttime"), 
               xl.time=NULL,
               xl.prevfit=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.cv_+3A_fit">fit</code></td>
<td>
<p> Object returned by superpc.train </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_data">data</code></td>
<td>
<p> Data object of form described in superpc.train documentation </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_n.threshold">n.threshold</code></td>
<td>
<p>Number of thresholds to consider. Default 20.</p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_n.fold">n.fold</code></td>
<td>
<p> Number of cross-validation folds. default is around 10 
(program pick a convenient value based on the sample size </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_folds">folds</code></td>
<td>
<p>List of indices  of cross-validation folds (optional)   </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_n.components">n.components</code></td>
<td>
<p> Number of cross-validation components to use: 1,2 or 3. </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_min.features">min.features</code></td>
<td>
<p> Minimum number of features to include 
in determining range for threshold. 
Default 5.</p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_max.features">max.features</code></td>
<td>
<p> Maximum number of features to include 
in determining range for threshold.
Default is total number of features in the dataset  </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_compute.fullcv">compute.fullcv</code></td>
<td>
<p> Should full cross-validation  be done? </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_compute.preval">compute.preval</code></td>
<td>
<p> Should full pre-validation  be done? </p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_xl.mode">xl.mode</code></td>
<td>
<p>Used by Excel interface only</p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_xl.time">xl.time</code></td>
<td>
<p>Used by Excel interface only</p>
</td></tr>
<tr><td><code id="superpc.cv_+3A_xl.prevfit">xl.prevfit</code></td>
<td>
<p>Used by Excel interface only</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses a form of cross-validation to estimate the optimal feature threshold in supervised principal components. 
To avoid prolems with fitting Cox models to samll validation datastes, 
it uses the &quot;pre-validation&quot; approach of Tibshirani and Efron (2002)
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>threshold</code></td>
<td>
<p>Vector of thresholds considered</p>
</td></tr>
<tr><td><code>nonzero</code></td>
<td>
<p>Number of features exceeding each value of the threshold</p>
</td></tr>
<tr><td><code>scor.preval</code></td>
<td>
<p>Likelihood ratio scores from pre-validation</p>
</td></tr>
<tr><td><code>scor</code></td>
<td>
<p>Full CV scores</p>
</td></tr>
<tr><td><code>folds</code></td>
<td>
<p>Indices of CV folds used</p>
</td></tr>
<tr><td><code>featurescores.folds</code></td>
<td>
<p>Feature scores for each fold</p>
</td></tr>
<tr><td><code>v.preval</code></td>
<td>
<p>The pre-validated predictors</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>problem type</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>calling sequence</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
aa &lt;- superpc.cv(a, data)

## End(Not run)
</code></pre>

<hr>
<h2 id='superpc.decorrelate'>
Decorrelate features  with respect to competing predictors
</h2><span id='topic+superpc.decorrelate'></span>

<h3>Description</h3>

<p>Fits a linear model to the  features as a function of some competing predictors.
Replaces the features by the residual from this fit.
These &quot;decorrelated&quot; features are then used in the superpc model building process, to
explicitly look for predictors that are independent of the competing predictors.
Useful for example, when the competing predictors are clinical predictors like stage, grade etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.decorrelate(x, 
                        competing.predictors) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.decorrelate_+3A_x">x</code></td>
<td>
<p> matrix of features. Different features  in different  rows, one observation per column</p>
</td></tr>
<tr><td><code id="superpc.decorrelate_+3A_competing.predictors">competing.predictors</code></td>
<td>
<p>List of one or more competing predictors.  Discrete predictors should be factors</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns lm (linear model) fit of rows of x on compeiting predictors.
</p>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
competing.predictors &lt;- list(pred1=rnorm(30), 
                             pred2=as.factor(sample(c(1,2), 
                                             replace=TRUE, 
                                             size=30)))

#decorrelate x. Remember to decorrelate test data in the same way, before making predictions.
foo &lt;- superpc.decorrelate(x, competing.predictors)
xnew &lt;- t(foo$res)

#now use xnew in superpc
data &lt;- list(x=xnew, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
a &lt;- superpc.train(data, type="survival")

#etc. 
</code></pre>

<hr>
<h2 id='superpc.fit.to.outcome'>
Fit predictive model using outcome of supervised principal components
</h2><span id='topic+superpc.fit.to.outcome'></span>

<h3>Description</h3>

<p>Fit predictive model using outcome of supervised principal components, 
via either coxph (for surival data) or lm (for regression data)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.fit.to.outcome(fit, 
                           data.test, 
                           score, 
                           competing.predictors=NULL, 
                           print=TRUE, 
                           iter.max=5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.fit.to.outcome_+3A_fit">fit</code></td>
<td>
<p>Object returned by superpc.train.</p>
</td></tr>
<tr><td><code id="superpc.fit.to.outcome_+3A_data.test">data.test</code></td>
<td>
<p>Data object for prediction. Same form as data object documented in superpc.train.</p>
</td></tr>  
<tr><td><code id="superpc.fit.to.outcome_+3A_score">score</code></td>
<td>
<p>Supervised principal component score, from superpc.predict.</p>
</td></tr>
<tr><td><code id="superpc.fit.to.outcome_+3A_competing.predictors">competing.predictors</code></td>
<td>
<p>Optional - a list of competing predictors to be included in the model.</p>
</td></tr>
<tr><td><code id="superpc.fit.to.outcome_+3A_print">print</code></td>
<td>
<p>Should a summary of the fit be printed? Default TRUE.</p>
</td></tr>
<tr><td><code id="superpc.fit.to.outcome_+3A_iter.max">iter.max</code></td>
<td>
<p>Max number of iterations used in predictive model fit. Default 5. Currently only relevant for Cox PH model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns summary of coxph or lm fit.
</p>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
fit &lt;- superpc.predict(a, 
                       data, 
                       data.test, 
                       threshold=1.0, 
                       n.components=1, 
                       prediction.type="continuous")
superpc.fit.to.outcome(a, 
                       data, 
                       fit$v.pred)
</code></pre>

<hr>
<h2 id='superpc.listfeatures'>
Return a list of the important predictors
</h2><span id='topic+superpc.listfeatures'></span>

<h3>Description</h3>

<p>Return a list of the important predictor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.listfeatures(data, 
                         train.obj, 
                         fit.red, 
                         fitred.cv=NULL,
                         num.features=NULL, 
                         component.number=1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.listfeatures_+3A_data">data</code></td>
<td>
<p>Data object </p>
</td></tr>
<tr><td><code id="superpc.listfeatures_+3A_train.obj">train.obj</code></td>
<td>
<p>Object returned by superpc.train</p>
</td></tr>
<tr><td><code id="superpc.listfeatures_+3A_fit.red">fit.red</code></td>
<td>
<p>Object returned by superpc.predict.red, applied to training set</p>
</td></tr>
<tr><td><code id="superpc.listfeatures_+3A_fitred.cv">fitred.cv</code></td>
<td>
<p>(Optional) object returned by superpc.predict.red.cv</p>
</td></tr>
<tr><td><code id="superpc.listfeatures_+3A_num.features">num.features</code></td>
<td>
<p>Number of features to list. Default is all features.</p>
</td></tr>
<tr><td><code id="superpc.listfeatures_+3A_component.number">component.number</code></td>
<td>
<p>Number of principal component (1,2, or 3) used to determine feature importance scores</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns matrix of features and their importance scores, in order
of decreasing absolute value of importance score. The importance score
is the correlation of the reduced predictor and the full supervised PC
predictor. It also lists the raw score- for survival data, this is the Cox score
for that feature; for regression, it is the standardized regression coefficient.
If fitred.cv is supplied,  the function also reports the average rank of the gene in the
cross-validation folds, and the proportion of times  that the gene is chosen
(at the given threshold) in the cross-validation folds.
</p>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
fit.red &lt;- superpc.predict.red(a, 
                               data, 
                               data.test, 
                               .6)
superpc.listfeatures(data, 
                     a,  
                     fit.red, 
                     num.features=10)
</code></pre>

<hr>
<h2 id='superpc.lrtest.curv'>
Compute values of likelihood ratio test  from supervised  principal components fit
</h2><span id='topic+superpc.lrtest.curv'></span>

<h3>Description</h3>

<p>Compute values of likelihood ratio test from supervised principal components fit 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.lrtest.curv(object, 
                        data, 
                        newdata, 
                        n.components=1, 
                        threshold=NULL, 
                        n.threshold=20)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.lrtest.curv_+3A_object">object</code></td>
<td>
<p> Object returned by superpc.train.</p>
</td></tr>
<tr><td><code id="superpc.lrtest.curv_+3A_data">data</code></td>
<td>
<p> List of training data, of form described in superpc.train documentation.</p>
</td></tr>
<tr><td><code id="superpc.lrtest.curv_+3A_newdata">newdata</code></td>
<td>
<p> List of test data; same form as training data.</p>
</td></tr>
<tr><td><code id="superpc.lrtest.curv_+3A_n.components">n.components</code></td>
<td>
<p> Number of principal components to compute. Should be 1,2 or 3.</p>
</td></tr>
<tr><td><code id="superpc.lrtest.curv_+3A_threshold">threshold</code></td>
<td>
<p> Set of thresholds for scores; 
default is n.threshold values equally spaced over the range of the feature scores.</p>
</td></tr>
<tr><td><code id="superpc.lrtest.curv_+3A_n.threshold">n.threshold</code></td>
<td>
<p> Number of thresholds to use; default 20. Should be 1,2 or 3.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>lrtest</code></td>
<td>
<p>Values of likelihood ratio test statistic</p>
</td></tr>
<tr><td><code>comp2</code></td>
<td>
<p>Description of 'comp2'</p>
</td></tr>
<tr><td><code>threshold</code></td>
<td>
<p> Thresholds used</p>
</td></tr>
<tr><td><code>num.features</code></td>
<td>
<p>Number of features exceeding threshold</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>Type of outcome variable</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>calling sequence</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
aa &lt;- superpc.lrtest.curv(a, data, data.test)
#superpc.plot.lrtest(aa)
</code></pre>

<hr>
<h2 id='superpc.news'>Display the <span class="pkg">superpc</span> Package News</h2><span id='topic+superpc.news'></span>

<h3>Description</h3>

<p>Function to display the log file <code>NEWS</code> of updates of the <span class="pkg">superpc</span> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.news(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.news_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>Note</h3>

<p>End-user function. 
</p>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>


<hr>
<h2 id='superpc.plot.lrtest'>
Plot likelhiood ratio test statistics
</h2><span id='topic+superpc.plot.lrtest'></span>

<h3>Description</h3>

<p>Plot likelhiood ratio test statistics from output of superpc.predict
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.plot.lrtest(object.lrtestcurv, 
                        call.win.metafile=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.plot.lrtest_+3A_object.lrtestcurv">object.lrtestcurv</code></td>
<td>
<p>Output from superpc.lrtest.curv</p>
</td></tr>
<tr><td><code id="superpc.plot.lrtest_+3A_call.win.metafile">call.win.metafile</code></td>
<td>
<p>For use by PAM Excel interface</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
bb &lt;- superpc.lrtest.curv(a, 
                          data, 
                          data.test)
superpc.plot.lrtest(bb)
</code></pre>

<hr>
<h2 id='superpc.plotcv'>
Plot output from superpc.cv
</h2><span id='topic+superpc.plotcv'></span>

<h3>Description</h3>

<p>Plots pre-validation results from plotcv, to aid in choosing best threshold
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.plotcv(object, 
                   cv.type=c("full","preval"),
                   smooth=TRUE, 
                   smooth.df=10, 
                   call.win.metafile=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.plotcv_+3A_object">object</code></td>
<td>
<p>Object returned by superpc.cv.</p>
</td></tr>
<tr><td><code id="superpc.plotcv_+3A_cv.type">cv.type</code></td>
<td>
<p>Type of cross-validation used - 
&quot;full&quot; (Default; this is &quot;standard&quot; cross-validation; recommended) and &quot;preval&quot;- pre-validation.</p>
</td></tr>
<tr><td><code id="superpc.plotcv_+3A_smooth">smooth</code></td>
<td>
<p> Should plot be smoothed?  Only relevant to &quot;preval&quot;. Default FALSE.</p>
</td></tr>
<tr><td><code id="superpc.plotcv_+3A_smooth.df">smooth.df</code></td>
<td>
<p>Degrees of freedom for smooth.spline, default 10.
If NULL, then degrees of freedom is estimated by cross-validation.</p>
</td></tr>
<tr><td><code id="superpc.plotcv_+3A_call.win.metafile">call.win.metafile</code></td>
<td>
<p>Ignore: for use by PAM Excel program.</p>
</td></tr>
<tr><td><code id="superpc.plotcv_+3A_...">...</code></td>
<td>
<p>Additional plotting args to be passed to matplot.</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
aa &lt;- superpc.cv(a,data)

superpc.plotcv(aa)

## End(Not run)
</code></pre>

<hr>
<h2 id='superpc.plotred.lrtest'>
Plot likelihood ratio test statistics from supervised principal components predictor
</h2><span id='topic+superpc.plotred.lrtest'></span>

<h3>Description</h3>

<p>Plot likelihood ratio test statistics from supervised principal components predictor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.plotred.lrtest(object.lrtestred, 
                           call.win.metafile=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.plotred.lrtest_+3A_object.lrtestred">object.lrtestred</code></td>
<td>
<p>Output from either superpc.predict.red or superpc.predict.redcv</p>
</td></tr>
<tr><td><code id="superpc.plotred.lrtest_+3A_call.win.metafile">call.win.metafile</code></td>
<td>
<p>Used only by PAM Excel interface call to function</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
aa &lt;- superpc.cv(a, data)
fit.red &lt;- superpc.predict.red(a, 
                               data, 
                               data.test, 
                               .6)
fit.redcv &lt;- superpc.predict.red.cv(fit.red, 
                                    aa, 
                                    data, 
                                    .6)
superpc.plotred.lrtest(fit.redcv)

## End(Not run)
</code></pre>

<hr>
<h2 id='superpc.predict'>
Form principal components predictor from a trained superpc object
</h2><span id='topic+superpc.predict'></span>

<h3>Description</h3>

<p>Computes supervised principal components, using scores from &quot;object&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.predict(object, 
                    data, 
                    newdata, 
                    threshold, 
                    n.components=3, 
                    prediction.type=c("continuous","discrete","nonzero"), 
                    n.class=2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.predict_+3A_object">object</code></td>
<td>
<p> Obect returned by superpc.train </p>
</td></tr>
<tr><td><code id="superpc.predict_+3A_data">data</code></td>
<td>
<p> List of training data, of form described in superpc.train documentation, </p>
</td></tr>
<tr><td><code id="superpc.predict_+3A_newdata">newdata</code></td>
<td>
<p> List of test data; same form as training data </p>
</td></tr>
<tr><td><code id="superpc.predict_+3A_threshold">threshold</code></td>
<td>
<p> Threshold for scores: features with abs(score) &gt; threshold are retained. </p>
</td></tr>
<tr><td><code id="superpc.predict_+3A_n.components">n.components</code></td>
<td>
<p> Number of principal components to compute. Should be 1,2 or 3. </p>
</td></tr>
<tr><td><code id="superpc.predict_+3A_prediction.type">prediction.type</code></td>
<td>
<p> &quot;continuous&quot; for raw principal component(s);
&quot;discrete&quot; for principal component categorized in equal bins;
&quot;nonzero&quot; for indices of features that pass the threshold </p>
</td></tr>
<tr><td><code id="superpc.predict_+3A_n.class">n.class</code></td>
<td>
<p> Number of classes into which predictor is binned (for prediction.type=&quot;discrete&quot; </p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>v.pred</code></td>
<td>
<p>Supervised principal componients predictor</p>
</td></tr>
<tr><td><code>u</code></td>
<td>
<p>U matrix from svd of feature matrix x</p>
</td></tr>
<tr><td><code>d</code></td>
<td>
<p>singual values  from svd of feature matrix x</p>
</td></tr>
<tr><td><code>which.features</code></td>
<td>
<p>Indices of features exceeding threshold</p>
</td></tr>
<tr><td><code>n.components</code></td>
<td>
<p>Number of supervised  principal components requested</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>calling sequence</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
fit &lt;- superpc.predict(a, 
                       data, 
                       data.test, 
                       threshold=1.0, 
                       n.components=1)
plot(fit$v.pred, ytest)
</code></pre>

<hr>
<h2 id='superpc.predict.red'>
Feature selection for supervised principal components
</h2><span id='topic+superpc.predict.red'></span>

<h3>Description</h3>

 
<p>Forms reduced models to approximate the supervised principal component predictor.</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.predict.red(fit, 
                        data, 
                        data.test, 
                        threshold, 
                        n.components=3, 
                        n.shrinkage=20, 
                        shrinkages=NULL,
                        compute.lrtest=TRUE,
                        sign.wt="both",
                        prediction.type=c("continuous", "discrete"), 
                        n.class=2)
                        
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.predict.red_+3A_fit">fit</code></td>
<td>
<p> Object returned by superpc.train</p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_data">data</code></td>
<td>
<p> Training data object, of form described in superpc.train dcoumentation </p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_data.test">data.test</code></td>
<td>
<p> Test data object; same form as train  </p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_threshold">threshold</code></td>
<td>
<p> Feature score threshold; usually estimated from superpc.cv</p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_n.components">n.components</code></td>
<td>
<p> Number of principal components to  examine;
should equal 1,2, etc up to the number of components used in training </p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_n.shrinkage">n.shrinkage</code></td>
<td>
<p> Number of shrinkage values to consider. Default 20. </p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_shrinkages">shrinkages</code></td>
<td>
<p> Shrinkage values to consider. Default NULL. </p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_compute.lrtest">compute.lrtest</code></td>
<td>
<p> Should the likelihood ratio test be computed? Default TRUE </p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_sign.wt">sign.wt</code></td>
<td>
<p>Signs of feature weights allowed: &quot;both&quot;, &quot;pos&quot;, or &quot;neg&quot;</p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_prediction.type">prediction.type</code></td>
<td>
<p>Type of prediction: &quot;continuous&quot; (Default) or &quot;discrete&quot;. 
In the latter, superprc score is divided into n.class groups</p>
</td></tr>
<tr><td><code id="superpc.predict.red_+3A_n.class">n.class</code></td>
<td>
<p>Number of groups for discrete predictor. Default 2. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>Soft-thresholding by each of the  &quot;shrinkages&quot;  values is applied to the PC loadings.
This reduce the number of features used in the model.
The reduced predictor is then used  in place of the supervised PC predictor.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>shrinkages</code></td>
<td>
<p> Shrinkage values used </p>
</td></tr>
<tr><td><code>lrtest.reduced</code></td>
<td>
<p> Likelihood ratio tests for reduced models </p>
</td></tr>
<tr><td><code>num.features</code></td>
<td>
<p> Number of features used in each reduced model </p>
</td></tr>
<tr><td><code>feature.list</code></td>
<td>
<p> List of features used in each reduced model </p>
</td></tr>
<tr><td><code>coef</code></td>
<td>
<p>Least squares coefficients for each reduced model</p>
</td></tr> 
<tr><td><code>import</code></td>
<td>
<p>Importance scores for features</p>
</td></tr>
<tr><td><code>wt</code></td>
<td>
<p>Weight for each feature, in constructing the reduced predictor</p>
</td></tr>
<tr><td><code>v.test</code></td>
<td>
<p>Outcome predictor from reduced models. 
Array of n.shrinkage by (number of test observations) </p>
</td></tr>
<tr><td><code>v.test.1df</code></td>
<td>
<p>Outcome combined  predictor from reduced models. 
Array of n.shrinkage by (number of test observations) </p>
</td></tr>
<tr><td><code>n.components</code></td>
<td>
<p> Number of principal components used</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>Type of outcome</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>calling sequence</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x,
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
fit.red &lt;- superpc.predict.red(a,
                               data, 
                               data.test, 
                               threshold=.6)
superpc.plotred.lrtest(fit.red)
</code></pre>

<hr>
<h2 id='superpc.predict.red.cv'>
Cross-validation of feature selection for supervised principal components
</h2><span id='topic+superpc.predict.red.cv'></span>

<h3>Description</h3>

<p>Applies superpc.predict.red to cross-validation folds generates in superpc.cv.
Uses the output to evaluate reduced models, and compare them to the
full supervised principal components predictor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.predict.red.cv(fitred, 
                           fitcv, 
                           data, 
                           threshold, 
                           sign.wt="both")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.predict.red.cv_+3A_fitred">fitred</code></td>
<td>
<p> Output of superpc.predict.red</p>
</td></tr>
<tr><td><code id="superpc.predict.red.cv_+3A_fitcv">fitcv</code></td>
<td>
<p> Output of superpc.cv </p>
</td></tr>
<tr><td><code id="superpc.predict.red.cv_+3A_data">data</code></td>
<td>
<p> Training data object </p>
</td></tr>
<tr><td><code id="superpc.predict.red.cv_+3A_threshold">threshold</code></td>
<td>
<p>Feature score threshold; usually estimated from superpc.cv</p>
</td></tr>
<tr><td><code id="superpc.predict.red.cv_+3A_sign.wt">sign.wt</code></td>
<td>
<p>Signs of feature weights allowed: &quot;both&quot;, &quot;pos&quot;, or &quot;neg&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>lrtest.reduced</code></td>
<td>
<p> Likelihood ratio tests for reduced models </p>
</td></tr>
<tr><td><code>components</code></td>
<td>
<p>Number of supervised  principal components used</p>
</td></tr>
<tr><td><code>v.preval.red</code></td>
<td>
<p>Outcome predictor from reduced models.
Array of num.reduced.models by (number of test observations)</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>Type of outcome</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>calling sequence</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*20), ncol=20)
y &lt;- 10 + svd(x[1:10,])$v[,1] + .1*rnorm(20)
ytest &lt;- 10 + svd(x[1:10,])$v[,1] + .1*rnorm(20)
censoring.status &lt;- sample(c(rep(1,15), rep(0,5)))
censoring.status.test &lt;- sample(c(rep(1,15), rep(0,5)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x,
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
aa &lt;- superpc.cv(a, data)
fit.red &lt;- superpc.predict.red(a,
                               data, 
                               data.test, 
                               threshold=.6)
fit.redcv &lt;- superpc.predict.red.cv(fit.red, 
                                    aa, 
                                    data, 
                                    threshold=.6)

## End(Not run)
</code></pre>

<hr>
<h2 id='superpc.predictionplot'>
Plot outcome predictions from superpc
</h2><span id='topic+superpc.predictionplot'></span>

<h3>Description</h3>

<p>Plots outcome predictions from superpc
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.predictionplot(train.obj, 
                           data, 
                           data.test,
                           threshold, 
                           n.components=3,
                           n.class=2, 
                           shrinkage=NULL, 
                           call.win.metafile=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.predictionplot_+3A_train.obj">train.obj</code></td>
<td>
<p> Object returned by superpc.train </p>
</td></tr>
<tr><td><code id="superpc.predictionplot_+3A_data">data</code></td>
<td>
<p> List of training data, of form described in superpc.train documentation</p>
</td></tr>
<tr><td><code id="superpc.predictionplot_+3A_data.test">data.test</code></td>
<td>
<p> List of test data; same form as training data </p>
</td></tr>
<tr><td><code id="superpc.predictionplot_+3A_threshold">threshold</code></td>
<td>
<p> Threshold for scores: features with abs(score) &gt; threshold are retained. </p>
</td></tr>
<tr><td><code id="superpc.predictionplot_+3A_n.components">n.components</code></td>
<td>
<p> Number of principal components to compute. Should be 1,2 or 3. </p>
</td></tr>
<tr><td><code id="superpc.predictionplot_+3A_n.class">n.class</code></td>
<td>
<p>Number of classes for survival stratification. 
Only applicable for survival data. Default 2.</p>
</td></tr>
<tr><td><code id="superpc.predictionplot_+3A_shrinkage">shrinkage</code></td>
<td>
<p>Shrinkage to be applied to feature loadings. Default is NULL, meaning no shrinkage</p>
</td></tr>
<tr><td><code id="superpc.predictionplot_+3A_call.win.metafile">call.win.metafile</code></td>
<td>
<p>Used only by Excel interface call to function</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
superpc.predictionplot(a, 
                       data, 
                       data.test, 
                       threshold=1)
</code></pre>

<hr>
<h2 id='superpc.rainbowplot'>
Make rainbow plot of superpc and compeiting predictors
</h2><span id='topic+superpc.rainbowplot'></span>

<h3>Description</h3>

<p>Makes a heatmap display of outcome predictions from superpc, 
along with expected survival time, and  values of competing predictors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.rainbowplot(data, 
                        pred, 
                        sample.labels,
                        competing.predictors,
                        call.win.metafile=FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.rainbowplot_+3A_data">data</code></td>
<td>
<p> List of (test) data, of form described in superpc.train documentation</p>
</td></tr>
<tr><td><code id="superpc.rainbowplot_+3A_pred">pred</code></td>
<td>
<p>Superpc score from superpc.predict or  superpc.predict.red</p>
</td></tr>
<tr><td><code id="superpc.rainbowplot_+3A_sample.labels">sample.labels</code></td>
<td>
<p>Vector of sample labels of test data</p>
</td></tr>
<tr><td><code id="superpc.rainbowplot_+3A_competing.predictors">competing.predictors</code></td>
<td>
<p>List of competing predictors to be plotted</p>
</td></tr>
<tr><td><code id="superpc.rainbowplot_+3A_call.win.metafile">call.win.metafile</code></td>
<td>
<p>Used only by Excel interface call to function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Any censored survival times are estimated by E(T|T &gt; C), where $C$ is the observed censoring time 
and the Kaplan-Meier estimate from the training set is used to estimate the expectation.
</p>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
ytest &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))
censoring.status.test &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
competing.predictors.test &lt;- list(pred1=rnorm(30), 
                                  pred2=as.factor(sample(c(1,2),
                                                  replace=TRUE,
                                                  size=30)))
                                                  
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)
data.test &lt;- list(x=x, 
                  y=ytest, 
                  censoring.status=censoring.status.test, 
                  featurenames=featurenames)
sample.labels &lt;- paste("te", as.character(1:20), sep="")

a &lt;- superpc.train(data, type="survival")
pred &lt;- superpc.predict(a, 
                        data, 
                        data.test, 
                        threshold=.25, 
                        n.components=1)$v.pred
superpc.rainbowplot(data, 
                    pred, 
                    sample.labels, 
                    competing.predictors=competing.predictors.test)
</code></pre>

<hr>
<h2 id='superpc.train'>
Prediction by supervised principal components
</h2><span id='topic+superpc.train'></span>

<h3>Description</h3>

<p>Does prediction of a quantitative regression or survival outcome, 
by the supervised principal components method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>    superpc.train(data, 
                  type=c("survival", "regression"), 
                  s0.perc=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="superpc.train_+3A_data">data</code></td>
<td>
<p> Data object with components x- p by n matrix of features,
one observation per column; y- n-vector of outcome measurements;
censoring.status- n-vector of censoring censoring.status 
(1= died or event occurred, 0=survived, or event was censored), 
needed for a censored survival outcome</p>
</td></tr>
<tr><td><code id="superpc.train_+3A_type">type</code></td>
<td>
<p>Problem type: 
&quot;survival&quot; for censored survival outcome, or 
&quot;regression&quot; for simple quantitative outcome</p>
</td></tr>
<tr><td><code id="superpc.train_+3A_s0.perc">s0.perc</code></td>
<td>
<p>Factor for denominator of score statistic, between 0 and 1: 
the percentile of standard deviation values added to the denominator. 
Default is 0.5 (the median)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Compute wald scores for each feature (gene), for later use in superpc.predict and superpc.cv
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>feature.scores</code></td>
<td>
<p>Score for each feature (gene)</p>
</td></tr>
<tr><td><code>type</code></td>
<td>
<p>problem type</p>
</td></tr>
<tr><td><code>s0.perc</code></td>
<td>
<p>Factor for denominator of score statistic</p>
</td></tr>
<tr><td><code>call</code></td>
<td>
<p>calling sequence</p>
</td></tr>
</table>


<h3>Author(s)</h3>


<ul>
<li><p> &quot;Eric Bair, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>
</li>
<li><p> &quot;Rob Tibshirani, Ph.D.&quot;
</p>
</li></ul>

<p>Maintainer: &quot;Jean-Eudes Dazard, Ph.D.&quot;
</p>


<h3>References</h3>


<ul>
<li><p> E. Bair and R. Tibshirani (2004).
&quot;<em>Semi-supervised methods to predict patient survival from gene expression data</em>.&quot;
PLoS Biol, 2(4):e108.
</p>
</li>
<li><p> E. Bair, T. Hastie, D. Paul, and R. Tibshirani (2006).
&quot;<em>Prediction by supervised principal components</em>.&quot;
J. Am. Stat. Assoc., 101(473):119-137.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>set.seed(332)

#generate some data
x &lt;- matrix(rnorm(50*30), ncol=30)
y &lt;- 10 + svd(x[1:50,])$v[,1] + .1*rnorm(30)
censoring.status &lt;- sample(c(rep(1,20), rep(0,10)))

featurenames &lt;- paste("feature", as.character(1:50), sep="")
data &lt;- list(x=x, 
             y=y, 
             censoring.status=censoring.status, 
             featurenames=featurenames)

a &lt;- superpc.train(data, type="survival")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
