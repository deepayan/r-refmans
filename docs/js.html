<!DOCTYPE html><html lang="en"><head><title>Help for package js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {js}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#coffee_compile'><p>Coffee Script</p></a></li>
<li><a href='#esprima'><p>JavaScrip Syntax Tree</p></a></li>
<li><a href='#js_eval'><p>Evaluate JavaScript</p></a></li>
<li><a href='#js_typeof'><p>Get the type of a JavaScript object</p></a></li>
<li><a href='#js_validate_script'><p>Validate JavaScript</p></a></li>
<li><a href='#jshint'><p>Static analysis tool for JavaScript</p></a></li>
<li><a href='#uglify'><p>Compress and Reformat JavaScript Code</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools for Working with JavaScript in R</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of utilities for working with JavaScript syntax in R.
    Includes tools to parse, tokenize, compile, validate, reformat, optimize 
    and analyze JavaScript code.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jeroen.r-universe.dev/js">https://jeroen.r-universe.dev/js</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jeroen/js/issues">https://github.com/jeroen/js/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>V8 (&ge; 0.5)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-03 14:12:57 UTC; jeroen</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeroen Ooms <a href="https://orcid.org/0000-0002-4035-0289"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeroen Ooms &lt;jeroenooms@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-04 12:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='coffee_compile'>Coffee Script</h2><span id='topic+coffee_compile'></span><span id='topic+coffee'></span>

<h3>Description</h3>

<p>Compiles coffee script into JavaScript.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coffee_compile(code, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coffee_compile_+3A_code">code</code></td>
<td>
<p>a string with JavaScript code</p>
</td></tr>
<tr><td><code id="coffee_compile_+3A_...">...</code></td>
<td>
<p>additional options passed to the compiler</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Hello world
coffee_compile("square = (x) -&gt; x * x")
coffee_compile("square = (x) -&gt; x * x", bare = TRUE)

# Simple script
demo &lt;- readLines(system.file("example/demo.coffee", package = "js"))
js &lt;- coffee_compile(demo)
cat(js)
cat(uglify_optimize(js))
</code></pre>

<hr>
<h2 id='esprima'>JavaScrip Syntax Tree</h2><span id='topic+esprima'></span><span id='topic+esprima_tokenize'></span><span id='topic+esprima_parse'></span>

<h3>Description</h3>

<p><a href="https://www.npmjs.com/package/esprima">Esprima</a> is a high performance, standard-compliant
ECMAScript parser. It has full support for ECMAScript 2017 and returns a sensible syntax tree
format as standardized by ESTree project.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>esprima_tokenize(text, range = FALSE, loc = FALSE, comment = FALSE)

esprima_parse(text, jsx = FALSE, range = FALSE, loc = FALSE,
  tolerant = FALSE, tokens = FALSE, comment = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="esprima_+3A_text">text</code></td>
<td>
<p>a character vector with JavaScript code</p>
</td></tr>
<tr><td><code id="esprima_+3A_range">range</code></td>
<td>
<p>Annotate each token with its zero-based start and end location</p>
</td></tr>
<tr><td><code id="esprima_+3A_loc">loc</code></td>
<td>
<p>Annotate each token with its column and row-based location</p>
</td></tr>
<tr><td><code id="esprima_+3A_comment">comment</code></td>
<td>
<p>Include every line and block comment in the output</p>
</td></tr>
<tr><td><code id="esprima_+3A_jsx">jsx</code></td>
<td>
<p>Support JSX syntax</p>
</td></tr>
<tr><td><code id="esprima_+3A_tolerant">tolerant</code></td>
<td>
<p>Tolerate a few cases of syntax errors</p>
</td></tr>
<tr><td><code id="esprima_+3A_tokens">tokens</code></td>
<td>
<p>Collect every token</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>esprima_tokenize</code> function returns a data frame with JavaScript tokens. The
<code>esprima_parse</code> function returns the Syntax Tree in JSON format. This can be parsed to R
using e.g. <code>jsonlite::fromJSON</code>.
</p>


<h3>References</h3>

<p>Esprima documentation: <a href="http://esprima.readthedocs.io/en/4.0/">http://esprima.readthedocs.io/en/4.0/</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>code &lt;- "function test(x, y){ x = x || 1; y = y || 1; return x*y;}"
esprima_tokenize(code)
esprima_parse(code)
</code></pre>

<hr>
<h2 id='js_eval'>Evaluate JavaScript</h2><span id='topic+js_eval'></span>

<h3>Description</h3>

<p>Evaluate a piece of JavaScript code in a disposable context.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>js_eval(text)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="js_eval_+3A_text">text</code></td>
<td>
<p>JavaScript code</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Stateless evaluation
js_eval("(function() {return 'foo'})()")

# Use V8 for stateful evaluation
ct &lt;- V8::new_context()
ct$eval("var foo = 123")
ct$get("foo")
</code></pre>

<hr>
<h2 id='js_typeof'>Get the type of a JavaScript object</h2><span id='topic+js_typeof'></span>

<h3>Description</h3>

<p>JavaScript wrapper to <code>typeof</code> to test if a piece of JavaScript code is
syntactically valid, and the type of object it evaluates to. Useful to
verify that a piece of JavaScript code contains a proper function/object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>js_typeof(text)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="js_typeof_+3A_text">text</code></td>
<td>
<p>JavaScript code</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>js_typeof("function(x){return x+1}")
js_typeof("(function() {return 'foo'})()")
js_typeof("{foo : 123, bar : true}")
</code></pre>

<hr>
<h2 id='js_validate_script'>Validate JavaScript</h2><span id='topic+js_validate_script'></span>

<h3>Description</h3>

<p>Simple wrapper for <code>ct$validate</code> in V8.
Tests if code constitutes a syntactically valid JS script.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>js_validate_script(text, error = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="js_validate_script_+3A_text">text</code></td>
<td>
<p>character vector with JavaScript code</p>
</td></tr>
<tr><td><code id="js_validate_script_+3A_error">error</code></td>
<td>
<p>raise error on invalid code</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>js_validate_script("function foo(x){2*x}") #TRUE
js_validate_script("foo = function(x){2*x}") #TRUE

# Anonymous functions in global scope are invalid
js_validate_script("function(x){2*x}", error = FALSE) #FALSE

# Use ! or () to check anonymous function syntax
js_validate_script("!function(x){2*x}") #TRUE
js_validate_script("(function(x){2*x})") #TRUE
</code></pre>

<hr>
<h2 id='jshint'>Static analysis tool for JavaScript</h2><span id='topic+jshint'></span>

<h3>Description</h3>

<p>JSHint is a community-driven tool to detect errors and potential problems in JavaScript code.
It is very flexible so you can easily adjust it to your particular coding guidelines and
the environment you expect your code to execute in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jshint(text, ..., globals = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="jshint_+3A_text">text</code></td>
<td>
<p>a string of JavaScript code</p>
</td></tr>
<tr><td><code id="jshint_+3A_...">...</code></td>
<td>
<p>additional jshint <a href="https://jshint.com/docs/options/">configuration options</a></p>
</td></tr>
<tr><td><code id="jshint_+3A_globals">globals</code></td>
<td>
<p>a white list of global variables that are not formally defined in the source code</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame where each row represents a jshint error or <code>NULL</code> if there were no errors
</p>


<h3>Examples</h3>

<pre><code class='language-R'>code = "var foo = 123"
jshint(code)
jshint(code, asi = TRUE)
</code></pre>

<hr>
<h2 id='uglify'>Compress and Reformat JavaScript Code</h2><span id='topic+uglify'></span><span id='topic+uglify_reformat'></span><span id='topic+uglify_optimize'></span><span id='topic+uglify_files'></span>

<h3>Description</h3>

<p><a href="https://www.npmjs.com/package/uglify-js">UglifyJS</a> is a JavaScript
compressor/minifier written in JavaScript. It also contains tools that allow one
to automate working with JavaScript code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uglify_reformat(text, beautify = FALSE, ...)

uglify_optimize(text, ...)

uglify_files(files, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="uglify_+3A_text">text</code></td>
<td>
<p>a character vector with JavaScript code</p>
</td></tr>
<tr><td><code id="uglify_+3A_beautify">beautify</code></td>
<td>
<p>prettify (instead of minify) code</p>
</td></tr>
<tr><td><code id="uglify_+3A_files">files</code></td>
<td>
<p>a character vector of filenames</p>
</td></tr>
<tr><td><code id="uglify_+3A_...">...</code></td>
<td>
<p>additional arguments for the <a href="https://lisperator.net/uglifyjs/compress">optimizer</a>
or <a href="https://lisperator.net/uglifyjs/codegen">generator</a>.</p>
</td></tr>
</table>


<h3>References</h3>

<p>UglifyJS2 Documentation: <a href="https://lisperator.net/uglifyjs/">https://lisperator.net/uglifyjs/</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>code &lt;- "function test(x, y){ x = x || 1; y = y || 1; return x*y;}"
cat(uglify_optimize(code))
cat(uglify_reformat(code, beautify = TRUE, indent_level = 2))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
