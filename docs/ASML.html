<!DOCTYPE html><html lang="en-US"><head><title>Help for package ASML</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ASML}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ASpredict'><p>Predicting the KPI value for the algorithms</p></a></li>
<li><a href='#ASpredict.as_train'><p>Predicting the KPI value for the algorithms</p></a></li>
<li><a href='#AStrain'><p>Training models for posterior selection of algorithms</p></a></li>
<li><a href='#AStrain.as_data'><p>Training models for posterior selection of algorithms</p></a></li>
<li><a href='#boxplots'><p>Boxplots</p></a></li>
<li><a href='#boxplots.as_data'><p>Boxplots</p></a></li>
<li><a href='#branching'><p>Branching point selection in Polynomial Optimization</p></a></li>
<li><a href='#branchingsmall'><p>Branching point selection in Polynomial Optimization</p></a></li>
<li><a href='#figure_comparison'><p>Figure comparison</p></a></li>
<li><a href='#figure_comparison.as_data'><p>Figure Comparison</p></a></li>
<li><a href='#KPI_summary_table'><p>KPI summary table</p></a></li>
<li><a href='#KPI_table'><p>KPI table</p></a></li>
<li><a href='#ml'><p>Machine learning process</p></a></li>
<li><a href='#partition_and_normalize'><p>Partition and Normalize</p></a></li>
<li><a href='#plot.as_data'><p>Plot</p></a></li>
<li><a href='#ranking'><p>Ranking</p></a></li>
<li><a href='#ranking.as_data'><p>Ranking Plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Algorithm Portfolio Selection with Machine Learning</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>A wrapper for machine learning (ML) methods to select among a portfolio of algorithms based on the value of a key performance indicator (KPI). A number of features is used to adjust a model to predict the value of the KPI for each algorithm, then, for a new value of the features the KPI is estimated and the algorithm with the best one is chosen. To learn it can use the regression methods in 'caret' package or a custom function defined by the user. Several graphics available to analyze the results obtained. This library has been used in Ghaddar et al. (2023) &lt;<a href="https://doi.org/10.1287%2Fijoc.2022.0090">doi:10.1287/ijoc.2022.0090</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>caret, ggplot2, dplyr, purrr, tibble, tidyr, reshape2,
Polychrome, scales, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>snow</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-18 13:01:46 UTC; brais</td>
</tr>
<tr>
<td>Author:</td>
<td>Brais González-Rodríguez
    <a href="https://orcid.org/0000-0001-5276-2320"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Ignacio Gómez-Casares
    <a href="https://orcid.org/0000-0003-0420-7319"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Beatriz Pateiro-López
    <a href="https://orcid.org/0000-0002-7714-1835"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Julio González-Díaz
    <a href="https://orcid.org/0000-0002-4667-4348"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  María Caseiro-Arias [ctb],
  Antonio Fariña-Elorza [ctb],
  Manuel Timiraos-López [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brais González-Rodríguez &lt;brais.gonzalez.rodriguez@uvigo.gal&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-19 14:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='ASpredict'>Predicting the KPI value for the algorithms</h2><span id='topic+ASpredict'></span>

<h3>Description</h3>

<p>For each algorithm, the output (KPI) is predicted using the models trained with <code>AStrain()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ASpredict(training_object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ASpredict_+3A_training_object">training_object</code></td>
<td>
<p>list of class <code>as_train</code>.</p>
</td></tr>
<tr><td><code id="ASpredict_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame, result of the respective ASpredict method.
</p>

<hr>
<h2 id='ASpredict.as_train'>Predicting the KPI value for the algorithms</h2><span id='topic+ASpredict.as_train'></span>

<h3>Description</h3>

<p>For each algorithm, the output (KPI) is predicted using the models traing with <code>AStrain()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'as_train'
ASpredict(training_object, newdata = NULL, f = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ASpredict.as_train_+3A_training_object">training_object</code></td>
<td>
<p>list of class <code>as_train</code>.</p>
</td></tr>
<tr><td><code id="ASpredict.as_train_+3A_newdata">newdata</code></td>
<td>
<p>dataframe with the new data to predict. If not present, predictions are computed using the training data.</p>
</td></tr>
<tr><td><code id="ASpredict.as_train_+3A_f">f</code></td>
<td>
<p>function to use for the predictions. If NULL, <code>caret</code>'s function will be used.</p>
</td></tr>
<tr><td><code id="ASpredict.as_train_+3A_...">...</code></td>
<td>
<p>arguments passed to the predict function f when f is not NULL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>ASpredict()</code> uses the prediction function from <code>caret</code> to compute (for each of the models trained) the predictions for the new data provided by the user.
If the user used a custom function in <code>AStrain()</code> (given by parameter <code>f</code>), <code>caret</code>'s default prediction function might not work, and the user might have to provide a custom function for <code>ASpredict()</code> as well.
Additionally, this custom prediction function allows to pass additional arguments, something that <code>caret</code>'s default prediction function does not.
The object return by the train function used in <code>AStrain()</code> (<code>caret</code>'s or a custom one) is the one passed to the custom <code>f</code> function defined by the user. This <code>f</code> function must return a vector with the predictions.
</p>


<h3>Value</h3>

<p>A data frame with the predictions for each instance (rows), corresponding to each algorithm (columns). In case f is specified, some actions might be needed to get the predictions from the returned value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(branchingsmall)
data_object &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y, test_size = 0.3,
family_column = 1, split_by_family = TRUE)
training &lt;- AStrain(data_object, method = "glm")
predictions &lt;- ASpredict(training, newdata = data_object$x.test)
qrf_q_predict &lt;- function(modelFit, newdata, what = 0.5, submodels = NULL) {
  out &lt;- predict(modelFit, newdata, what = what)
  if (is.matrix(out))
    out &lt;- out[, 1]
  out
}
custom_predictions &lt;- ASpredict(training, newdata = data_object$x.test, f = "qrf_q_predict",
what = 0.25)
</code></pre>

<hr>
<h2 id='AStrain'>Training models for posterior selection of algorithms</h2><span id='topic+AStrain'></span>

<h3>Description</h3>

<p>For each algorithm (column) in the data, a model is trained to later predict the output (KPI) for that algorithm (using function <code>ASpredict()</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AStrain(data_object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AStrain_+3A_data_object">data_object</code></td>
<td>
<p>an object.</p>
</td></tr>
<tr><td><code id="AStrain_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list, result of the respective AStrain method.
</p>

<hr>
<h2 id='AStrain.as_data'>Training models for posterior selection of algorithms</h2><span id='topic+AStrain.as_data'></span>

<h3>Description</h3>

<p>For each algorithm (column) in the data, a model is trained to later predict the output (KPI) for that algorithm (using function <code>ASpredict()</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'as_data'
AStrain(data_object, method = NULL, parallel = FALSE, f = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AStrain.as_data_+3A_data_object">data_object</code></td>
<td>
<p>object of class <code>as_data</code>.</p>
</td></tr>
<tr><td><code id="AStrain.as_data_+3A_method">method</code></td>
<td>
<p>name of the model to be used. The user can choose from any of the models provided by <code>caret</code>. See <a href="http://topepo.github.io/caret/train-models-by-tag.html">http://topepo.github.io/caret/train-models-by-tag.html</a> for more information about the models supported.</p>
</td></tr>
<tr><td><code id="AStrain.as_data_+3A_parallel">parallel</code></td>
<td>
<p>boolean to control whether to parallelise the training or not (paralellization is handled by library snow).</p>
</td></tr>
<tr><td><code id="AStrain.as_data_+3A_f">f</code></td>
<td>
<p>function we want to use to train the models. If NULL, <code>caret</code>'s function will be used.</p>
</td></tr>
<tr><td><code id="AStrain.as_data_+3A_...">...</code></td>
<td>
<p>arguments passed to the caret train function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list is returned of class <code>as_train</code> containing the trained models, one for each of the algorithms.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(branchingsmall)
data_object &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y, test_size = 0.3,
family_column = 1, split_by_family = TRUE)
training &lt;- AStrain(data_object, method = "glm")
custom_function &lt;- function(x, y) {
  glm.fit(x, y)
}
custom_training &lt;- AStrain(data_object, f = "custom_function")
</code></pre>

<hr>
<h2 id='boxplots'>Boxplots</h2><span id='topic+boxplots'></span>

<h3>Description</h3>

<p>Generates boxplots for an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boxplots(data_object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="boxplots_+3A_data_object">data_object</code></td>
<td>
<p>an object.</p>
</td></tr>
<tr><td><code id="boxplots_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object, result of the respective boxplots method.
</p>

<hr>
<h2 id='boxplots.as_data'>Boxplots</h2><span id='topic+boxplots.as_data'></span>

<h3>Description</h3>

<p>Represents a boxplot for each of the algorithms to compare their performance according to the response variable (KPI). When available, it also includes a box plot for the &quot;ML&quot; algorithm generated from the predictions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'as_data'
boxplots(
  data_object,
  main = "Boxplot Comparison",
  labels = NULL,
  test = TRUE,
  predictions = NULL,
  by_families = FALSE,
  color_list = NULL,
  ml_color = NULL,
  ordered_option_names = NULL,
  xlab = "Strategy",
  ylab = "KPI",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="boxplots.as_data_+3A_data_object">data_object</code></td>
<td>
<p>object of class <code>as_data</code>.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_main">main</code></td>
<td>
<p>an overall title for the plot.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_labels">labels</code></td>
<td>
<p>character vector with the labels for each of the algorithms. If NULL, the y names of the <code>data_object</code> names will be used.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_test">test</code></td>
<td>
<p>flag that indicates whether the function should use test data or training data.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_predictions">predictions</code></td>
<td>
<p>a data frame with the predicted KPI for each algorithm (columns) and for each instance (rows). If NULL, the plot won't include a ML column.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_by_families">by_families</code></td>
<td>
<p>boolean indicating whether the function should represent data by families or not. The family information must be included in the <code>data_object</code> parameter.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_color_list">color_list</code></td>
<td>
<p>list with the colors for the plots. If NULL, or insufficient number of colors, the colors will be generated automatically.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_ml_color">ml_color</code></td>
<td>
<p>color por the ML boxplot. If NULL, it will be generated automatically.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_ordered_option_names">ordered_option_names</code></td>
<td>
<p>vector with the name of the columns of <code>data_object</code> y variable in the correct order.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_xlab">xlab</code></td>
<td>
<p>a label for the x axis.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_ylab">ylab</code></td>
<td>
<p>a label for the y axis.</p>
</td></tr>
<tr><td><code id="boxplots.as_data_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object representing the boxplots of instance-normalized KPI for each algorithm across instances.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(branchingsmall)
data &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y)
training &lt;- AStrain(data, method = "glm")
predict_test &lt;- ASpredict(training, newdata = data$x.test)
boxplots(data, predictions = predict_test)
</code></pre>

<hr>
<h2 id='branching'>Branching point selection in Polynomial Optimization</h2><span id='topic+branching'></span>

<h3>Description</h3>

<p>Data from Ghaddar et al. (2023) used to select among several branching criteria for an RLT-based algorithm. Includes features for the instances and KPI values for the different branching criteria for executions lasting 1 hour.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>branching
</code></pre>


<h3>Format</h3>

<p>A list with x (features) and y (KPIs) data.frames.
</p>


<h3>Source</h3>

<p>Ghaddar, B., Gómez-Casares, I., González-Díaz, J., González-Rodríguez, B., Pateiro-López, B., &amp; Rodríguez-Ballesteros, S. (2023). Learning for Spatial Branching: An Algorithm Selection Approach. INFORMS Journal on Computing.
</p>

<hr>
<h2 id='branchingsmall'>Branching point selection in Polynomial Optimization</h2><span id='topic+branchingsmall'></span>

<h3>Description</h3>

<p>Data from Ghaddar et al. (2023) used to select among several branching criteria for an RLT-based algorithm. Includes features for the instances and KPI values for the different branching criteria for executions lasting 10 minutes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>branchingsmall
</code></pre>


<h3>Format</h3>

<p>A list with x (features) and y (KPIs) data.frames.
</p>


<h3>Source</h3>

<p>Ghaddar, B., Gómez-Casares, I., González-Díaz, J., González-Rodríguez, B., Pateiro-López, B., &amp; Rodríguez-Ballesteros, S. (2023). Learning for Spatial Branching: An Algorithm Selection Approach. INFORMS Journal on Computing.
</p>

<hr>
<h2 id='figure_comparison'>Figure comparison</h2><span id='topic+figure_comparison'></span>

<h3>Description</h3>

<p>Generates figure comparison plot for an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>figure_comparison(data_object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="figure_comparison_+3A_data_object">data_object</code></td>
<td>
<p>an object</p>
</td></tr>
<tr><td><code id="figure_comparison_+3A_...">...</code></td>
<td>
<p>other parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object, result of the respective figure_comparison method.
</p>

<hr>
<h2 id='figure_comparison.as_data'>Figure Comparison</h2><span id='topic+figure_comparison.as_data'></span>

<h3>Description</h3>

<p>Represents a bar plot with the percentage of times each algorithm is selected by ML compared with the optimal selection (according to the response variable or KPI).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'as_data'
figure_comparison(
  data_object,
  ties = "different_data_points",
  main = "Option Comparison",
  labels = NULL,
  mllabel = NULL,
  test = TRUE,
  predictions,
  by_families = FALSE,
  stacked = TRUE,
  color_list = NULL,
  legend = TRUE,
  ordered_option_names = NULL,
  xlab = "Criteria",
  ylab = "Instances (%)",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="figure_comparison.as_data_+3A_data_object">data_object</code></td>
<td>
<p>object of class <code>as_data</code>.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_ties">ties</code></td>
<td>
<p>How to deal with ties. Must be one of:
</p>

<ul>
<li><p> &quot;different_data_points&quot;: Tied algorithms in the optimal selection are all counted as different data points (increasing the total number of x values and therefore giving all of the tied algorithms the same weight).
</p>
</li>
<li><p> &quot;ml_if_optimal&quot;: For tied algorithms, the one selected by ML is chosen if it corresponds to the optimal one. Otherwise, the same as in option <code>different_data_points</code> is done.
</p>
</li>
<li><p> &quot;ml_selection&quot;: For tied algorithms, the one prefered by the ML is chosen.
</p>
</li></ul>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_main">main</code></td>
<td>
<p>an overall title for the plot.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_labels">labels</code></td>
<td>
<p>character vector with the labels for each of the algorithms. If NULL, the y names of the <code>data_object</code> names will be used.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_mllabel">mllabel</code></td>
<td>
<p>character vector with the labels for the Optimal and ML bars. If NULL, default names will be used.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_test">test</code></td>
<td>
<p>flag that indicates whether the function should use test data or training data.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_predictions">predictions</code></td>
<td>
<p>a data frame with the predicted KPI for each algorithm (columns) and for each instance (rows).</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_by_families">by_families</code></td>
<td>
<p>boolean indicating whether the function should represent data by families or not. The family information must be included in the <code>data_object</code> parameter.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_stacked">stacked</code></td>
<td>
<p>boolean to choose between bar plot and stacked bar plot.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_color_list">color_list</code></td>
<td>
<p>list with the colors for the plots. If NULL, or insufficient number of colors, the colors will be generated automatically.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_legend">legend</code></td>
<td>
<p>boolean to activate or deactivate the legend in the plot.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_ordered_option_names">ordered_option_names</code></td>
<td>
<p>vector with the name of the columns of data_object y variable in the correct order.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_xlab">xlab</code></td>
<td>
<p>a label for the x axis.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_ylab">ylab</code></td>
<td>
<p>a label for the y axis.</p>
</td></tr>
<tr><td><code id="figure_comparison.as_data_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object representing the bar plot with the percentage of times each algorithm is selected by ML compared with the optimal selection (according to the response variable or KPI).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(branchingsmall)
data &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y)
training &lt;- AStrain(data, method = "glm")
predict_test &lt;- ASpredict(training, newdata = data$x.test)
figure_comparison(data, predictions = predict_test)
</code></pre>

<hr>
<h2 id='KPI_summary_table'>KPI summary table</h2><span id='topic+KPI_summary_table'></span><span id='topic+KPI_summary_table.as_data'></span>

<h3>Description</h3>

<p>Generates a summary table with the values of the KPI.
</p>
<p>Function that generates a summary table of the KPI values. Optimal is the value of the KPI when choosing the best option for each instance. It's the best that we could do with respect to that KPI. Best is the value of the KPI for the best option overall according to the KPI. ML is the value of the KPI choosing for each instance the option selected by the learning.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KPI_summary_table(data_object, ...)

## S3 method for class 'as_data'
KPI_summary_table(
  data_object,
  predictions = NULL,
  test = TRUE,
  normalized = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="KPI_summary_table_+3A_data_object">data_object</code></td>
<td>
<p>an object of class <code>as_data</code>.</p>
</td></tr>
<tr><td><code id="KPI_summary_table_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="KPI_summary_table_+3A_predictions">predictions</code></td>
<td>
<p>a data frame with the predicted KPI for each algorithm (columns) and for each instance (rows). If NULL, the table won't include a ML column.</p>
</td></tr>
<tr><td><code id="KPI_summary_table_+3A_test">test</code></td>
<td>
<p>flag that indicates whether the function should use test data or training data.</p>
</td></tr>
<tr><td><code id="KPI_summary_table_+3A_normalized">normalized</code></td>
<td>
<p>whether to use the original values of the KPI or the normalized ones used for the learning.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table, result of the respective KPI_summary_table method.
</p>
<p>A table with the statistics of the pace.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(branchingsmall)
data_object &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y, test_size = 0.3,
family_column = 1, split_by_family = TRUE)
training &lt;- AStrain(data_object, method = "glm")
predictions &lt;- ASpredict(training, newdata = data_object$x.test)
KPI_summary_table(data_object, predictions = predictions)
</code></pre>

<hr>
<h2 id='KPI_table'>KPI table</h2><span id='topic+KPI_table'></span><span id='topic+KPI_table.as_data'></span>

<h3>Description</h3>

<p>Generates a table with the values of the KPI.
</p>
<p>Function that generates a table with the values of the KPI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KPI_table(data_object, ...)

## S3 method for class 'as_data'
KPI_table(data_object, predictions = NULL, test = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="KPI_table_+3A_data_object">data_object</code></td>
<td>
<p>an object of class <code>as_data</code>.</p>
</td></tr>
<tr><td><code id="KPI_table_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
<tr><td><code id="KPI_table_+3A_predictions">predictions</code></td>
<td>
<p>a data frame with the predicted KPI for each algorithm (columns) and for each instance (rows). If NULL, the table won't include a ML column.</p>
</td></tr>
<tr><td><code id="KPI_table_+3A_test">test</code></td>
<td>
<p>flag that indicates whether the function should use test data or training data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table, result of the respective KPI_table method.
</p>
<p>A table with the statistics of the pace.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(branchingsmall)
data_object &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y, test_size = 0.3,
family_column = 1, split_by_family = TRUE)
training &lt;- AStrain(data_object, method = "glm")
predictions &lt;- ASpredict(training, newdata = data_object$x.test)
KPI_table(data_object, predictions = predictions)
</code></pre>

<hr>
<h2 id='ml'>Machine learning process</h2><span id='topic+ml'></span>

<h3>Description</h3>

<p>Function that proceses input data, trains the machine learning models, makes a prediction and plots the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ml(
  x,
  y,
  x.test = NULL,
  y.test = NULL,
  family_column = NULL,
  split_by_family = FALSE,
  predict = TRUE,
  test_size = 0.25,
  better_smaller = TRUE,
  method = "ranger",
  test = TRUE,
  color_list = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ml_+3A_x">x</code></td>
<td>
<p>dataframe with the instances (rows) and its features (columns). It may also include a column with the family data.</p>
</td></tr>
<tr><td><code id="ml_+3A_y">y</code></td>
<td>
<p>dataframe with the instances (rows) and the corresponding output (KPI) for each algorithm (columns).</p>
</td></tr>
<tr><td><code id="ml_+3A_x.test">x.test</code></td>
<td>
<p>dataframe with the test features. It may also include a column with the family data. If NULL, the algorithm will split x into training and test sets.</p>
</td></tr>
<tr><td><code id="ml_+3A_y.test">y.test</code></td>
<td>
<p>dataframe with the test outputs. If NULL, the algorithm will split y into training and test sets.</p>
</td></tr>
<tr><td><code id="ml_+3A_family_column">family_column</code></td>
<td>
<p>column number of x where each instance family is indicated. If given, aditional options for the training and set test splitting and the graphics are enabled.</p>
</td></tr>
<tr><td><code id="ml_+3A_split_by_family">split_by_family</code></td>
<td>
<p>boolean indicating if we want to split sets keeping family proportions in case x.test and y.test are NULL. This option requires that option <code>family_column</code> is different from NULL</p>
</td></tr>
<tr><td><code id="ml_+3A_predict">predict</code></td>
<td>
<p>boolean indicating if predictions will be made or not. If FALSE plots will use training data only and no ML column will be displayed.</p>
</td></tr>
<tr><td><code id="ml_+3A_test_size">test_size</code></td>
<td>
<p>float with the segmentation proportion for the test dataframe. It must be a value between 0 and 1.</p>
</td></tr>
<tr><td><code id="ml_+3A_better_smaller">better_smaller</code></td>
<td>
<p>boolean that indicates wether the output (KPI) is better if smaller (TRUE) or larger (FALSE).</p>
</td></tr>
<tr><td><code id="ml_+3A_method">method</code></td>
<td>
<p>name of the model to be used. The user can choose from any of the models provided by <code>caret</code>. See <a href="http://topepo.github.io/caret/train-models-by-tag.html">http://topepo.github.io/caret/train-models-by-tag.html</a> for more information about the models supported.</p>
</td></tr>
<tr><td><code id="ml_+3A_test">test</code></td>
<td>
<p>boolean indicating whether the predictions will be made with the test set or the training set.</p>
</td></tr>
<tr><td><code id="ml_+3A_color_list">color_list</code></td>
<td>
<p>list with the colors for the plots. If NULL or insufficient number of colors, the colors will be generated automatically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the data and plots generated, including:
</p>

<ul>
<li> <p><code>data_obj</code> An <code>as_data</code> object with the processed data from <code>partition_and_normalize()</code> function.
</p>
</li>
<li> <p><code>training</code> An <code>as_train</code> object with the trainings from the <code>AStrain()</code> function.
</p>
</li>
<li> <p><code>predictions</code> A data frame with the predictions from the <code>ASpredict()</code> function, if the predict param is TRUE.
</p>
</li>
<li> <p><code>table</code> A table with the summary of the output data.
</p>
</li>
<li> <p><code>boxplot</code>, <code>ranking_plot</code>, <code>figure_comparison</code>, <code>optml_figure_comparison</code> and <code>optmlall_figure_comparison</code> with the corresponding plots.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
data(branchingsmall)
machine_learning &lt;- ml(branchingsmall$x, branchingsmall$y, test_size = 0.3,
family_column = 1, split_by_family = TRUE, method = "glm")

</code></pre>

<hr>
<h2 id='partition_and_normalize'>Partition and Normalize</h2><span id='topic+partition_and_normalize'></span>

<h3>Description</h3>

<p>Function that processes the input data splitting it into training and test sets and normalizes the outputs depending on the best instance performance. The user can bypass the partition into training and test set by passing the parameters <code>x.test</code> and <code>y.test</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>partition_and_normalize(
  x,
  y,
  x.test = NULL,
  y.test = NULL,
  family_column = NULL,
  split_by_family = FALSE,
  test_size = 0.3,
  better_smaller = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="partition_and_normalize_+3A_x">x</code></td>
<td>
<p>dataframe with the instances (rows) and its features (columns). It may also include a column with the family data.</p>
</td></tr>
<tr><td><code id="partition_and_normalize_+3A_y">y</code></td>
<td>
<p>dataframe with the instances (rows) and the corresponding output (KPI) for each algorithm (columns).</p>
</td></tr>
<tr><td><code id="partition_and_normalize_+3A_x.test">x.test</code></td>
<td>
<p>dataframe with the test features. It may also include a column with the family data. If NULL the algorithm will split x into training and test sets.</p>
</td></tr>
<tr><td><code id="partition_and_normalize_+3A_y.test">y.test</code></td>
<td>
<p>dataframe with the test outputs. If NULL the algorithm will y into training and test sets.</p>
</td></tr>
<tr><td><code id="partition_and_normalize_+3A_family_column">family_column</code></td>
<td>
<p>column number of x where each instance family is indicated. If given, aditional options for the training and set test splitting and the graphics are enabled.</p>
</td></tr>
<tr><td><code id="partition_and_normalize_+3A_split_by_family">split_by_family</code></td>
<td>
<p>boolean indicating if we want to split sets keeping family proportions in case x.test and y.test are NULL. This option requires that option <code>family_column</code> is different from NULL.</p>
</td></tr>
<tr><td><code id="partition_and_normalize_+3A_test_size">test_size</code></td>
<td>
<p>float with the segmentation proportion for the test dataframe. It must be a value between 0 and 1. Only needed when <code>x.test</code> and <code>y.test</code> are NULL.</p>
</td></tr>
<tr><td><code id="partition_and_normalize_+3A_better_smaller">better_smaller</code></td>
<td>
<p>boolean that indicates wether the output (KPI) is better if smaller (TRUE) or larger (FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list is returned of class <code>as_data</code> containing:
</p>

<ul>
<li> <p><code>x.train</code> A data frame with the training features.
</p>
</li>
<li> <p><code>y.train</code> A data frame with the training output.
</p>
</li>
<li> <p><code>x.test</code> A data frame with the test features.
</p>
</li>
<li> <p><code>y.test</code> A data frame with the test output.
</p>
</li>
<li> <p><code>y.train.original</code> A vector with the original training output (without normalizing).
</p>
</li>
<li> <p><code>y.test.original</code> A vector with the original test output (without normalizing).
</p>
</li>
<li> <p><code>families.train</code> A data frame with the families of the training data.
</p>
</li>
<li> <p><code>families.test</code> A data frame with the families of the test data.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>data(branching)
data_obj &lt;- partition_and_normalize(branching$x, branching$y, test_size = 0.3,
family_column = 1, split_by_family = TRUE)

</code></pre>

<hr>
<h2 id='plot.as_data'>Plot</h2><span id='topic+plot.as_data'></span>

<h3>Description</h3>

<p>For an object of class <code>as_data</code>, function that makes several plots, including the following: a boxplot, a ranking plot and comparisons between the different options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'as_data'
plot(
  x,
  labels = NULL,
  test = TRUE,
  predictions = NULL,
  by_families = FALSE,
  stacked = TRUE,
  legend = TRUE,
  color_list = NULL,
  ml_color = NULL,
  path = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.as_data_+3A_x">x</code></td>
<td>
<p>object of class <code>as_data</code>.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_labels">labels</code></td>
<td>
<p>character vector with the labels for each of the algorithms. If NULL, the y names of the <code>data_object</code> names will be used.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_test">test</code></td>
<td>
<p>flag that indicates whether the function should use test data or training data.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_predictions">predictions</code></td>
<td>
<p>a data frame with the predicted KPI for each algorithm (columns) and for each instance (rows). If NULL, the plot won't include a ML column.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_by_families">by_families</code></td>
<td>
<p>boolean indicating whether the function should represent data by families or not. The family information must be included in the <code>data_object</code> parameter.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_stacked">stacked</code></td>
<td>
<p>boolean to choose between bar plot and stacked bar plot.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_legend">legend</code></td>
<td>
<p>boolean to activate or deactivate the legend in the plot.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_color_list">color_list</code></td>
<td>
<p>list with the colors for the plots. If NULL, or insufficient number of colors, the colors will be generated automatically.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_ml_color">ml_color</code></td>
<td>
<p>color por the ML boxplot. If NULL, it will be generated automatically.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_path">path</code></td>
<td>
<p>path where plots will be saved. If NULL they won't be saved.</p>
</td></tr>
<tr><td><code id="plot.as_data_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with <code>boxplot</code>, <code>ranking</code>, <code>fig_comp</code>, <code>optml_fig_comp</code> and <code>optmlall_fig_comp</code> plots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(branchingsmall)
data &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y)
training &lt;- AStrain(data, method = "glm")
predict_test &lt;- ASpredict(training, newdata = data$x.test)
plot(data, predictions = predict_test)

</code></pre>

<hr>
<h2 id='ranking'>Ranking</h2><span id='topic+ranking'></span>

<h3>Description</h3>

<p>Generates ranking plot for an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ranking(data_object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ranking_+3A_data_object">data_object</code></td>
<td>
<p>an object</p>
</td></tr>
<tr><td><code id="ranking_+3A_...">...</code></td>
<td>
<p>other parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object, result of the respective ranking method.
</p>

<hr>
<h2 id='ranking.as_data'>Ranking Plot</h2><span id='topic+ranking.as_data'></span>

<h3>Description</h3>

<p>After ranking the algorithms for each instance, represents for each of the algorithms, a bar with the percentage of times it was in each of the ranking positions. The number inside is the mean value of the normalized response variable (KPI) for the problems for which the algorithm was in that ranking position. The option <code>predictions</code> allows to control if the &quot;ML&quot; algorithm is added to the plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'as_data'
ranking(
  data_object,
  main = "Ranking",
  labels = NULL,
  test = TRUE,
  predictions = NULL,
  by_families = FALSE,
  ordered_option_names = NULL,
  xlab = "",
  ylab = "",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ranking.as_data_+3A_data_object">data_object</code></td>
<td>
<p>object of class <code>as_data</code>.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_main">main</code></td>
<td>
<p>an overall title for the plot.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_labels">labels</code></td>
<td>
<p>character vector with the labels for each of the algorithms. If NULL, the y names of the <code>data_object</code> names will be used.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_test">test</code></td>
<td>
<p>flag that indicates whether the function should use test data or training data.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_predictions">predictions</code></td>
<td>
<p>a data frame with the predicted KPI for each algorithm (columns) and for each instance (rows). If NULL, the plot won't include a ML column.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_by_families">by_families</code></td>
<td>
<p>boolean indicating whether the function should represent data by families or not. The family information must be included in the <code>data_object</code> parameter.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_ordered_option_names">ordered_option_names</code></td>
<td>
<p>vector with the name of the columns of data_object y variable in the correct order.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_xlab">xlab</code></td>
<td>
<p>a label for the x axis.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_ylab">ylab</code></td>
<td>
<p>a label for the y axis.</p>
</td></tr>
<tr><td><code id="ranking.as_data_+3A_...">...</code></td>
<td>
<p>other parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object representing the ranking of algorithms based on the instance-normalized KPI.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(branchingsmall)
data &lt;- partition_and_normalize(branchingsmall$x, branchingsmall$y)
training &lt;- AStrain(data, method = "glm")
predict_test &lt;- ASpredict(training, newdata = data$x.test)
ranking(data, predictions = predict_test)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
