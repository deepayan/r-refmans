<!DOCTYPE html><html lang="en"><head><title>Help for package cthist</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cthist}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cthist-package'><p>cthist: Clinical Trial Registry History</p></a></li>
<li><a href='#clinicaltrials_gov_dates'><p>Download a table of dates on which a ClinicalTrials.gov registry</p>
entry was updated</a></li>
<li><a href='#clinicaltrials_gov_download'><p>Mass-download registry entry historical versions from</p>
ClinicalTrials.gov</a></li>
<li><a href='#clinicaltrials_gov_version'><p>Download a registry entry version from ClinicalTrials.gov</p></a></li>
<li><a href='#extract_publications'><p>Takes a data frame of the type provided by</p>
<code>clinicaltrials_gov_download()</code> and returns a new data frame
containing one row per publication of the publication type
specified indexed on ClinicalTrials.gov for every version of the
clinical trial record provided.</a></li>
<li><a href='#overall_status_lengths'><p>Interpret downloaded version histories to determine how long in</p>
days a trial had any given overall status</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Clinical Trial Registry History</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.11</td>
</tr>
<tr>
<td>Description:</td>
<td>Retrieves historical versions of clinical trial registry
    entries from <a href="https://ClinicalTrials.gov">https://ClinicalTrials.gov</a>. Package functionality
    and implementation for v 1.0.0 is documented in Carlisle (2022)
    &lt;<a href="https://doi.org/10.1371%2Fjournal.pone.0270909">doi:10.1371/journal.pone.0270909</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bgcarlisle/cthist">https://github.com/bgcarlisle/cthist</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bgcarlisle/cthist/issues">https://github.com/bgcarlisle/cthist/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, dplyr, httr, jsonlite, lubridate, magrittr, readr,
rlang, stringr, tibble, purrr, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-17 15:06:07 UTC; researchfairy</td>
</tr>
<tr>
<td>Author:</td>
<td>Benjamin Gregory Carlisle
    <a href="https://orcid.org/0000-0001-8975-0649"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Benjamin Gregory Carlisle &lt;murph@bgcarlisle.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-17 16:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cthist-package'>cthist: Clinical Trial Registry History</h2><span id='topic+cthist'></span><span id='topic+cthist-package'></span>

<h3>Description</h3>

<p>Retrieves historical versions of clinical trial registry entries from <a href="https://ClinicalTrials.gov">https://ClinicalTrials.gov</a>. Package functionality and implementation for v 1.0.0 is documented in Carlisle (2022) <a href="https://doi.org/10.1371/journal.pone.0270909">doi:10.1371/journal.pone.0270909</a>.
</p>


<h3>Details</h3>

<p>This package provides 4 functions for mass-downloading and
interpreting historical clinical trial registry entry data from
ClinicalTrials.gov
</p>
<div class="sourceCode"><pre>The functions for downloading clinical trial registry data from
DRKS that were provided in versions 1.0.0 to 1.3.0 have been
deprecated due to the re-writing of drks.de in a manner that
broke the previous implementation of web-scraping
</pre></div>
<p>clinicaltrials_gov_dates() downloads the dates on which
clinical trial registry entries were updated from
ClinicalTrials.gov
</p>
<p>clinicaltrials_gov_version() downloads a specified
historical version of a clinical trial registry entry from
ClinicalTrials.gov
</p>
<p>clinicaltrials_gov_download() mass-downloads clinical
trial registry entry versions for one or many trials on
ClinicalTrials.gov
</p>
<p>extract_publications() interprets a data frame provided by
clinicaltrials_gov_download() and provides a new data frame
with one row per publication of the type specified indexed by
ClinicalTrials.gov per clinical trial registry history version.
</p>
<p>overall_status_lengths() interprets a data frame provided
by clinicaltrials_gov_download() or clinicaltrials_gov_dates()
and provides a new data frame that indicates how many days were
spent in each overall status.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Benjamin Gregory Carlisle <a href="mailto:murph@bgcarlisle.com">murph@bgcarlisle.com</a> (<a href="https://orcid.org/0000-0001-8975-0649">ORCID</a>)
</p>


<h3>References</h3>

<p>Carlisle, BG. Analysis of clinical trial registry entry
histories using the novel R package cthist. medRxiv, 2022. doi:
10.1101/2022.01.20.22269538
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/bgcarlisle/cthist">https://github.com/bgcarlisle/cthist</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/bgcarlisle/cthist/issues">https://github.com/bgcarlisle/cthist/issues</a>
</p>
</li></ul>


<hr>
<h2 id='clinicaltrials_gov_dates'>Download a table of dates on which a ClinicalTrials.gov registry
entry was updated</h2><span id='topic+clinicaltrials_gov_dates'></span>

<h3>Description</h3>

<p>Download a table of dates on which a ClinicalTrials.gov registry
entry was updated
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clinicaltrials_gov_dates(nctids, status_change_only = FALSE, quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clinicaltrials_gov_dates_+3A_nctids">nctids</code></td>
<td>
<p>A list of well-formed NCT numbers,
e.g. c(&quot;NCT00942747&quot;, &quot;NCT03281616&quot;). (A capitalized &quot;NCT&quot;
followed by eight numerals with no spaces or hyphens.)</p>
</td></tr>
<tr><td><code id="clinicaltrials_gov_dates_+3A_status_change_only">status_change_only</code></td>
<td>
<p>If TRUE, returns only the dates marked
with a Recruitment Status change, default FALSE.</p>
</td></tr>
<tr><td><code id="clinicaltrials_gov_dates_+3A_quiet">quiet</code></td>
<td>
<p>A boolean TRUE or FALSE. If TRUE, no messages will be
printed during download. TRUE by default, messages printed for
every registry entry downloaded showing progress.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table with three columns: the version number (starting
from 0), the ISO-8601 formatted date on which there were
clinical trial history version updates, and the trial's overall
status on that date.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

versions &lt;- clinicaltrials_gov_dates("NCT00942747")


</code></pre>

<hr>
<h2 id='clinicaltrials_gov_download'>Mass-download registry entry historical versions from
ClinicalTrials.gov</h2><span id='topic+clinicaltrials_gov_download'></span>

<h3>Description</h3>

<p>This function will download all ClinicalTrials.gov registry records
for the NCT numbers specified. Rather than transcribing NCT numbers
by hand, it is recommended that you conduct a search for trials of
interest using the ClinicalTrials.gov web front-end and download
the result as a comma-separated value (CSV) file. The CSV can be
read in to memory as a data frame and the <code style="white-space: pre;">&#8288;NCT Number&#8288;</code> column can
be passed directly to the function as the <code>nctids</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clinicaltrials_gov_download(
  nctids,
  output_filename = NA,
  quiet = FALSE,
  earliest = FALSE,
  latest = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clinicaltrials_gov_download_+3A_nctids">nctids</code></td>
<td>
<p>A list of well-formed NCT numbers,
e.g. c(&quot;NCT00942747&quot;, &quot;NCT03281616&quot;).</p>
</td></tr>
<tr><td><code id="clinicaltrials_gov_download_+3A_output_filename">output_filename</code></td>
<td>
<p>A character string for a filename into which
the data frame will be written as a CSV,
e.g. &quot;historical_versions.csv&quot;. If no output filename is
provided, the data frame of downloaded historical versions will
be returned by the function as a data frame.</p>
</td></tr>
<tr><td><code id="clinicaltrials_gov_download_+3A_quiet">quiet</code></td>
<td>
<p>A boolean TRUE or FALSE. If TRUE, no messages will be
printed during download. FALSE by default, messages printed for
every version downloaded showing progress.</p>
</td></tr>
<tr><td><code id="clinicaltrials_gov_download_+3A_earliest">earliest</code></td>
<td>
<p>A boolean TRUE or FALSE. If TRUE, only the earliest
version of the registry entry will be downloaded, if FALSE, all
versions will be downloaded. FALSE by default. Can be combined
with latest.</p>
</td></tr>
<tr><td><code id="clinicaltrials_gov_download_+3A_latest">latest</code></td>
<td>
<p>A boolean TRUE or FALSE. If TRUE, only the latest
version of the registry entry will be downloaded, if FALSE, all
versions will be downloaded. FALSE by default. Can be combined
with earliest.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If an output filename is specified, on successful
completion, this function returns TRUE and otherwise returns
FALSE. If an output filename is not specified, on successful
completion, this function returns a data frame containing the
historical versions of the clinical trial that have been
retrieved, and in case of error returns FALSE. After
unsuccessful completion with an output filename specified, if
the function is called again with the same NCT numbers and
output filename, the function will check the output file for
errors or incompletely downloaded registry entries, remove them
and try to download the historical versions that are still
needed, while preserving the ones that have already been
downloaded correctly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

filename &lt;- tempfile()
clinicaltrials_gov_download(c("NCT00942747",
    "NCT03281616"), filename)



hv &lt;- clinicaltrials_gov_download("NCT00942747")

</code></pre>

<hr>
<h2 id='clinicaltrials_gov_version'>Download a registry entry version from ClinicalTrials.gov</h2><span id='topic+clinicaltrials_gov_version'></span>

<h3>Description</h3>

<p>Download a registry entry version from ClinicalTrials.gov
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clinicaltrials_gov_version(nctid, versionno = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clinicaltrials_gov_version_+3A_nctid">nctid</code></td>
<td>
<p>A character string including a well-formed
ClinicalTrials.gov NCT Number, e.g. &quot;NCT00942747&quot;. (A
capitalized &quot;NCT&quot; followed by eight numerals with no spaces or
hyphens.)</p>
</td></tr>
<tr><td><code id="clinicaltrials_gov_version_+3A_versionno">versionno</code></td>
<td>
<p>An integer version number, e.g. 3, where 0 is the
earliest version of the trial in question, 1 is the next most
recent, etc. (Please note that this differs from the convention
used in cthist v. &lt;= 1.4.2, in which 1 is the earliest version
of the trial in question.) If no version number is specified,
the first version will be downloaded. If -1 (negative one) is
specified, the latest version will be downloaded.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the overall status, enrolment, start
date, start date precision (month or day) primary completion
date, primary completion date precision (month or day), primary
completion date type, minimum age, maximum age, sex, accepts
healthy volunteers, inclusion/exclusion criteria, outcome
measures, overall contacts, central contacts, responsible
party, lead sponsor, collaborators, locations, reason why the
trial stopped (if provided), whether results are posted,
references data, organization identifiers and other secondary
trial identifiers.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

version &lt;- clinicaltrials_gov_version("NCT00942747", 1)

</code></pre>

<hr>
<h2 id='extract_publications'>Takes a data frame of the type provided by
<code>clinicaltrials_gov_download()</code> and returns a new data frame
containing one row per publication of the publication type
specified indexed on ClinicalTrials.gov for every version of the
clinical trial record provided.</h2><span id='topic+extract_publications'></span>

<h3>Description</h3>

<p>This function does not connect to ClinicalTrials.gov, and only
interprets data that has already been downloaded by expanding the
nested JSON-encoded data in the <code>references</code> column provided by
<code>clinicaltrial_gov_version</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_publications(df, types = c("RESULT", "BACKGROUND", "DERIVED"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_publications_+3A_df">df</code></td>
<td>
<p>A data frame containing at least the following columns:
<code>nctid</code>, <code>version_number</code>, <code>total_versions</code>, <code>version_date</code>,
and <code>references</code>. The <code>references</code> column should contain a
nested JSON-encoded table with three columns: <code>pmid</code>, <code>type</code>
and <code>citation</code>. This data frame can be generated by the use of
<code>clinicaltrials_gov_download</code>.</p>
</td></tr>
<tr><td><code id="extract_publications_+3A_types">types</code></td>
<td>
<p>A list of types to be returned or a character string
if only one type specified, e.g. &quot;RESULT&quot; or c(&quot;RESULT&quot;,
&quot;BACKGROUND&quot;). Allowed types: &quot;RESULT&quot;, &quot;BACKGROUND&quot;,
&quot;DERIVED&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with all the original columns, as well as an
additional three columns: <code>pmid</code>, <code>type</code> and <code>citation</code>. The
new data frame will have one row per publication.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

hv &lt;- clinicaltrials_gov_download("NCT00942747", latest=TRUE)
extract_publications(hv)

</code></pre>

<hr>
<h2 id='overall_status_lengths'>Interpret downloaded version histories to determine how long in
days a trial had any given overall status</h2><span id='topic+overall_status_lengths'></span>

<h3>Description</h3>

<p>This function takes a data frame of the type produced by
<code>clinicaltrials_gov_download()</code> or <code>clinicaltrials_gov_dates()</code> and
interprets it to determine, for each clinical trial registry entry,
how many days were spent in each overall status (e.g. &quot;RECRUITING&quot;,
&quot;ACTIVE, NOT RECRUITING&quot;, etc.); upper and lower date bounds can
also be applied, to allow for returning only those dates that fall
within a time range of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>overall_status_lengths(
  historical_versions,
  start_date = NA,
  end_date = NA,
  carry_forward_last_status = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="overall_status_lengths_+3A_historical_versions">historical_versions</code></td>
<td>
<p>A data frame of the type produced by
<code>clinicaltrials_gov_download()</code> or
<code>clinicaltrials_gov_dates()</code>. Must include a row for every
historical version, with the <code>nctid</code> column specifying the
clinical trial registry entry, the <code>overall_status</code> column
indicating the status of the trial, and the <code>version_date</code>
column indicating the date on which the registry entry was
updated. Other columns optional.</p>
</td></tr>
<tr><td><code id="overall_status_lengths_+3A_start_date">start_date</code></td>
<td>
<p>A date or character string in YYYY-MM-DD format
specifying a date. If specified, only the length of time that
is after the given start date will be counted.</p>
</td></tr>
<tr><td><code id="overall_status_lengths_+3A_end_date">end_date</code></td>
<td>
<p>A date or character string in YYYY-MM-DD format
specifying a date. If specified, only the length of time that
is before the given end date will be counted.</p>
</td></tr>
<tr><td><code id="overall_status_lengths_+3A_carry_forward_last_status">carry_forward_last_status</code></td>
<td>
<p>Boolean TRUE or FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with two columns: <code>nctid</code>, which contains all
the distinct NCT numbers from the historical_versions data
frame provided, and <code>days</code>, which contains the number of
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
