<!DOCTYPE html><html lang="en-US"><head><title>Help for package datacutr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {datacutr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#datacutr-package'><p>datacutr: SDTM Datacut</p></a></li>
<li><a href='#apply_cut'><p>Applies the datacut based on the datacut flagging variables</p></a></li>
<li><a href='#create_dcut'><p>Create Datacut Dataset (DCUT)</p></a></li>
<li><a href='#datacutr_ae'><p>Adverse Events SDTMv Dataset</p></a></li>
<li><a href='#datacutr_dm'><p>Demographics SDTMv Dataset</p></a></li>
<li><a href='#datacutr_ds'><p>Disposition SDTMv Dataset</p></a></li>
<li><a href='#datacutr_fa'><p>Findings About Events or Interventions SDTMv Dataset</p></a></li>
<li><a href='#datacutr_lb'><p>Laboratory Test Results SDTMv Dataset</p></a></li>
<li><a href='#datacutr_sc'><p>Subject Characteristics SDTMv Dataset</p></a></li>
<li><a href='#datacutr_ts'><p>Trial Summary SDTMv Dataset</p></a></li>
<li><a href='#date_cut'><p>xxSTDTC or xxDTC Cut</p></a></li>
<li><a href='#drop_temp_vars'><p>Drops Temporary Variables From a Dataset</p></a></li>
<li><a href='#impute_dcutdtc'><p>Imputes Partial Date/Time Data Cutoff Variable (DCUTDTC)</p></a></li>
<li><a href='#impute_sdtm'><p>Imputes Partial Date/Time SDTMv Variables</p></a></li>
<li><a href='#process_cut'><p>Wrapper function to prepare and apply the datacut of SDTMv datasets</p></a></li>
<li><a href='#pt_cut'><p>Patient Cut</p></a></li>
<li><a href='#read_out'><p>Function to generate datacut summary file</p></a></li>
<li><a href='#special_dm_cut'><p>Special DM Cut to reset Death variable information past cut date</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>SDTM Datacut</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Supports the process of applying a cut to Standard Data Tabulation Model (SDTM),
    as part of the analysis of specific points in time of the data, normally as part of 
    investigation into clinical trials. The functions support different approaches of
    cutting to the different domains of SDTM normally observed.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pharmaverse/datacutr/issues">https://github.com/pharmaverse/datacutr/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pharmaverse.github.io/datacutr/">https://pharmaverse.github.io/datacutr/</a>,
<a href="https://github.com/pharmaverse/datacutr">https://github.com/pharmaverse/datacutr</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>admiraldev (&ge; 0.3.0), assertthat (&ge; 0.2.1), dplyr (&ge;
1.0.5), lubridate (&ge; 1.7.4), magrittr (&ge; 1.5), purrr (&ge;
0.3.3), stringr (&ge; 1.4.0), rlang (&ge; 0.4.4), tibble (&ge;
3.0.0), reactable (&ge; 0.4.4)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, lintr, pkgdown, testthat, knitr, methods,
rmarkdown, roxygen2, spelling, styler, usethis, covr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-03 08:54:27 UTC; barnett1</td>
</tr>
<tr>
<td>Author:</td>
<td>Tim Barnett [cph, aut, cre],
  Nathan Rees [aut],
  Alana Harris [aut],
  Cara Andrews [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tim Barnett &lt;timothy.barnett@roche.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-03 09:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='datacutr-package'>datacutr: SDTM Datacut</h2><span id='topic+datacutr'></span><span id='topic+datacutr-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Supports the process of applying a cut to Standard Data Tabulation Model (SDTM), as part of the analysis of specific points in time of the data, normally as part of investigation into clinical trials. The functions support different approaches of cutting to the different domains of SDTM normally observed.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Tim Barnett <a href="mailto:timothy.barnett@roche.com">timothy.barnett@roche.com</a> [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Nathan Rees <a href="mailto:nathan.rees@roche.com">nathan.rees@roche.com</a>
</p>
</li>
<li><p> Alana Harris <a href="mailto:alana.harris@roche.com">alana.harris@roche.com</a>
</p>
</li>
<li><p> Cara Andrews <a href="mailto:cara.andrews@roche.com">cara.andrews@roche.com</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pharmaverse.github.io/datacutr/">https://pharmaverse.github.io/datacutr/</a>
</p>
</li>
<li> <p><a href="https://github.com/pharmaverse/datacutr">https://github.com/pharmaverse/datacutr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pharmaverse/datacutr/issues">https://github.com/pharmaverse/datacutr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='apply_cut'>Applies the datacut based on the datacut flagging variables</h2><span id='topic+apply_cut'></span>

<h3>Description</h3>

<p>Removes any records where the datacut flagging variable, usually called
DCUT_TEMP_REMOVE, is marked as &quot;Y&quot;. Also, sets the death related variables in DM
(DTHDTC and DTHFL) to missing if the death after datacut flagging variable, usually
called DCUT_TEMP_DTHCHANGE, is marked as &quot;Y&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_cut(dsin, dcutvar, dthchangevar)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="apply_cut_+3A_dsin">dsin</code></td>
<td>
<p>Name of input dataframe</p>
</td></tr>
<tr><td><code id="apply_cut_+3A_dcutvar">dcutvar</code></td>
<td>
<p>Name of datacut flagging variable created by <code>pt_cut</code> and <code>date_cut</code> functions -
usually called DCUT_TEMP_REMOVE.</p>
</td></tr>
<tr><td><code id="apply_cut_+3A_dthchangevar">dthchangevar</code></td>
<td>
<p>Name of death after datacut flagging variable created by <code>special_dm_cut</code>
function - usually called DCUT_TEMP_DTHCHANGE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the input dataframe, excluding any rows in which <code>dcutvar</code> is flagged as &quot;Y&quot;.
DTHDTC and DTHFL are set to missing for any records where <code>dthchangevar</code> is flagged as &quot;Y&quot;. Any
variables with the &quot;DCUT_TEMP&quot; prefix are removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ae &lt;- data.frame(
  USUBJID = c("UXYZ123a", "UXYZ123b", "UXYZ123c", "UXYZ123d"),
  DCUT_TEMP_REMOVE = c("Y", "", "NA", NA)
)
ae_final &lt;- apply_cut(dsin = ae, dcutvar = DCUT_TEMP_REMOVE, dthchangevar = DCUT_TEMP_DTHCHANGE)

dm &lt;- data.frame(
  USUBJID = c("UXYZ123a", "UXYZ123b", "UXYZ123b"),
  DTHDTC = c("2014-10-20", "2014-10-21", "2013-09-08"),
  DTHFL = c("Y", "Y", "Y"),
  DCUT_TEMP_REMOVE = c(NA, NA, "Y"),
  DCUT_TEMP_DTHCHANGE = c(NA, "Y", "")
)
dm_final &lt;- apply_cut(dsin = dm, dcutvar = DCUT_TEMP_REMOVE, dthchangevar = DCUT_TEMP_DTHCHANGE)
</code></pre>

<hr>
<h2 id='create_dcut'>Create Datacut Dataset (DCUT)</h2><span id='topic+create_dcut'></span>

<h3>Description</h3>

<p>After filtering the input DS dataset (based on the given filter condition), any
records where the SDTMv date/time variable is on or before the datacut date/time (after
imputations) will be returned in the output datacut dataset (DCUT). Note that <code>ds_date_var</code>
and <code>cut_date</code> inputs must be in ISO 8601 format (YYYY-MM-DDThh:mm:ss) and will be imputed
using the <code>impute_sdtm()</code> and <code>impute_dcutdtc()</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_dcut(dataset_ds, ds_date_var, filter, cut_date, cut_description)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_dcut_+3A_dataset_ds">dataset_ds</code></td>
<td>
<p>Input DS SDTMv dataset</p>
</td></tr>
<tr><td><code id="create_dcut_+3A_ds_date_var">ds_date_var</code></td>
<td>
<p>Character date/time variable in the DS SDTMv to be compared against the
datacut date</p>
</td></tr>
<tr><td><code id="create_dcut_+3A_filter">filter</code></td>
<td>
<p>Condition to filter patients in DS, should give 1 row per patient</p>
</td></tr>
<tr><td><code id="create_dcut_+3A_cut_date">cut_date</code></td>
<td>
<p>Datacut date/time, e.g. &quot;2022-10-22&quot;, or NA if no date cut is to be applied</p>
</td></tr>
<tr><td><code id="create_dcut_+3A_cut_description">cut_description</code></td>
<td>
<p>Datacut date/time description, e.g. &quot;Clinical Cut Off Date&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Datacut dataset containing the variables <code>USUBJID</code>, <code>DCUTDTC</code>, <code>DCUTDTM</code> and
<code>DCUTDESC</code>.
</p>


<h3>Author(s)</h3>

<p>Alana Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ds &lt;- tibble::tribble(
  ~USUBJID, ~DSSEQ, ~DSDECOD, ~DSSTDTC,
  "subject1", 1, "INFORMED CONSENT", "2020-06-23",
  "subject1", 2, "RANDOMIZATION", "2020-08-22",
  "subject1", 3, "WITHDRAWAL BY SUBJECT", "2020-05-01",
  "subject2", 1, "INFORMED CONSENT", "2020-07-13",
  "subject3", 1, "INFORMED CONSENT", "2020-06-03",
  "subject4", 1, "INFORMED CONSENT", "2021-01-01",
  "subject4", 2, "RANDOMIZATION", "2023-01-01"
)

dcut &lt;- create_dcut(
  dataset_ds = ds,
  ds_date_var = DSSTDTC,
  filter = DSDECOD == "RANDOMIZATION",
  cut_date = "2022-01-01",
  cut_description = "Clinical Cutoff Date"
)
</code></pre>

<hr>
<h2 id='datacutr_ae'>Adverse Events SDTMv Dataset</h2><span id='topic+datacutr_ae'></span>

<h3>Description</h3>

<p>An example Adverse Events (AE) SDTMv domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datacutr_ae
</code></pre>


<h3>Format</h3>

<p>A dataset with 5 rows and 3 variables:
</p>

<dl>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>AETERM</dt><dd><p>Reported Term for the Adverse Event</p>
</dd>
<dt>AESTDTC</dt><dd><p>Start Date/Time of Adverse Event</p>
</dd>
</dl>


<hr>
<h2 id='datacutr_dm'>Demographics SDTMv Dataset</h2><span id='topic+datacutr_dm'></span>

<h3>Description</h3>

<p>An example Demographics (DM) SDTMv domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datacutr_dm
</code></pre>


<h3>Format</h3>

<p>A dataset with 5 rows and 3 variables:
</p>

<dl>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>DTHFL</dt><dd><p>Subject Death Flag</p>
</dd>
<dt>DTHDTC</dt><dd><p>Date/Time of Death</p>
</dd>
</dl>


<hr>
<h2 id='datacutr_ds'>Disposition SDTMv Dataset</h2><span id='topic+datacutr_ds'></span>

<h3>Description</h3>

<p>An example Disposition (DS) SDTMv domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datacutr_ds
</code></pre>


<h3>Format</h3>

<p>A dataset with 5 rows and 3 variables:
</p>

<dl>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>DSDECOD</dt><dd><p>Standardized Disposition Term</p>
</dd>
<dt>DSSTDTC</dt><dd><p>Start Date/Time of Disposition Event</p>
</dd>
</dl>


<hr>
<h2 id='datacutr_fa'>Findings About Events or Interventions SDTMv Dataset</h2><span id='topic+datacutr_fa'></span>

<h3>Description</h3>

<p>An example Findings About Events or Interventions (FA) SDTMv domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datacutr_fa
</code></pre>


<h3>Format</h3>

<p>A dataset with 5 rows and 4 variables:
</p>

<dl>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>FAORRES</dt><dd><p>Result or Finding in Original Units</p>
</dd>
<dt>FADTC</dt><dd><p>Date/Time of Collection</p>
</dd>
<dt>FASTDTC</dt><dd><p>Start Date/Time of Observation</p>
</dd>
</dl>


<hr>
<h2 id='datacutr_lb'>Laboratory Test Results SDTMv Dataset</h2><span id='topic+datacutr_lb'></span>

<h3>Description</h3>

<p>An example Laboratory Test Results (LB) SDTMv domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datacutr_lb
</code></pre>


<h3>Format</h3>

<p>A dataset with 5 rows and 3 variables:
</p>

<dl>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>LBORRES</dt><dd><p>Result or Finding in Original Units</p>
</dd>
<dt>LBDTC</dt><dd><p>Date/Time of Specimen Collection</p>
</dd>
</dl>


<hr>
<h2 id='datacutr_sc'>Subject Characteristics SDTMv Dataset</h2><span id='topic+datacutr_sc'></span>

<h3>Description</h3>

<p>An example Subject Characteristics (SC) SDTMv domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datacutr_sc
</code></pre>


<h3>Format</h3>

<p>A dataset with 5 rows and 2 variables:
</p>

<dl>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>SCORRES</dt><dd><p>Result or Finding in Original Units</p>
</dd>
</dl>


<hr>
<h2 id='datacutr_ts'>Trial Summary SDTMv Dataset</h2><span id='topic+datacutr_ts'></span>

<h3>Description</h3>

<p>An example Trial Summary (TS) SDTMv domain.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datacutr_ts
</code></pre>


<h3>Format</h3>

<p>A dataset with 5 rows and 2 variables:
</p>

<dl>
<dt>USUBJID</dt><dd><p>Unique Subject Identifier</p>
</dd>
<dt>TSVAL</dt><dd><p>Parameter Value</p>
</dd>
</dl>


<hr>
<h2 id='date_cut'>xxSTDTC or xxDTC Cut</h2><span id='topic+date_cut'></span>

<h3>Description</h3>

<p>Use to apply a datacut to either an xxSTDTC or xxDTC SDTM date variable. The datacut date from
the datacut dataset is merged on to the input SDTMv dataset and renamed to <code>TEMP_DCUT_DCUTDTM</code>.
A flag <code>TEMP_DCUT_REMOVE</code> is added to the dataset to indicate the observations that would be
removed when the cut is applied.
Note that this function applies a patient level datacut at the same time (using the <code>pt_cut()</code>
function), and also imputes dates in the specified SDTMv dataset (using the <code>impute_sdtm()</code>
function).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_cut(dataset_sdtm, sdtm_date_var, dataset_cut, cut_var)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_cut_+3A_dataset_sdtm">dataset_sdtm</code></td>
<td>
<p>Input SDTMv dataset</p>
</td></tr>
<tr><td><code id="date_cut_+3A_sdtm_date_var">sdtm_date_var</code></td>
<td>
<p>Input date variable found in the <code>dataset_sdtmv</code> dataset</p>
</td></tr>
<tr><td><code id="date_cut_+3A_dataset_cut">dataset_cut</code></td>
<td>
<p>Input datacut dataset</p>
</td></tr>
<tr><td><code id="date_cut_+3A_cut_var">cut_var</code></td>
<td>
<p>Datacut date variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Input dataset plus a flag <code>TEMP_DCUT_REMOVE</code> to indicate which observations would be
dropped when a datacut is applied
</p>


<h3>Author(s)</h3>

<p>Alana Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(lubridate)
dcut &lt;- tibble::tribble(
  ~USUBJID, ~DCUTDTM, ~DCUTDTC,
  "subject1", ymd_hms("2020-10-11T23:59:59"), "2020-10-11T23:59:59",
  "subject2", ymd_hms("2020-10-11T23:59:59"), "2020-10-11T23:59:59",
  "subject4", ymd_hms("2020-10-11T23:59:59"), "2020-10-11T23:59:59"
)

ae &lt;- tibble::tribble(
  ~USUBJID, ~AESEQ, ~AESTDTC,
  "subject1", 1, "2020-01-02T00:00:00",
  "subject1", 2, "2020-08-31T00:00:00",
  "subject1", 3, "2020-10-10T00:00:00",
  "subject2", 2, "2020-02-20T00:00:00",
  "subject3", 1, "2020-03-02T00:00:00",
  "subject4", 1, "2020-11-02T00:00:00",
  "subject4", 2, ""
)

ae_out &lt;- date_cut(
  dataset_sdtm = ae,
  sdtm_date_var = AESTDTC,
  dataset_cut = dcut,
  cut_var = DCUTDTM
)
</code></pre>

<hr>
<h2 id='drop_temp_vars'>Drops Temporary Variables From a Dataset</h2><span id='topic+drop_temp_vars'></span>

<h3>Description</h3>

<p>Drops all the temporary variables (variables beginning with TEMP_) from the input
dataset. Also allows the user to specify whether or not to drop the temporary variables needed
throughout multiple steps of the datacut process (variables beginning with DCUT_TEMP_).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop_temp_vars(dsin, drop_dcut_temp = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="drop_temp_vars_+3A_dsin">dsin</code></td>
<td>
<p>Name of input dataframe</p>
</td></tr>
<tr><td><code id="drop_temp_vars_+3A_drop_dcut_temp">drop_dcut_temp</code></td>
<td>
<p>Whether or not to drop variables beginning with DCUT_TEMP_ (TRUE/FALSE).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The other functions within this package use <code>drop_temp_vars</code> with the <code>drop_dcut_temp</code>
argument set to FALSE so that the variables needed across multiple steps of the process are
kept. The final datacut takes place in the <code>apply_cut</code> function, at which point <code>drop_temp_vars</code>
is used with the <code>drop_dcut_temp</code> argument set to TRUE, so that all temporary variables are
dropped.
</p>


<h3>Value</h3>

<p>Returns the input dataframe, excluding the temporary variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ae &lt;- tibble::tribble(
  ~USUBJID, ~AESEQ, ~TEMP_FLAG, ~DCUT_TEMP_REMOVE,
  "subject1", 1, "Y", NA,
  "subject1", 2, "Y", NA,
  "subject1", 3, NA, "Y",
  "subject2", 2, "Y", NA,
  "subject3", 1, NA, "Y",
  "subject4", 1, NA, "Y"
)
drop_temp_vars(dsin = ae) # Drops temp_ and dcut_temp_ variables
drop_temp_vars(dsin = ae, drop_dcut_temp = TRUE) # Drops temp_ and dcut_temp_ variables
drop_temp_vars(dsin = ae, drop_dcut_temp = FALSE) # Drops temp_ variables

</code></pre>

<hr>
<h2 id='impute_dcutdtc'>Imputes Partial Date/Time Data Cutoff Variable (DCUTDTC)</h2><span id='topic+impute_dcutdtc'></span>

<h3>Description</h3>

<p>Imputes partial date/time data cutoff variable (DCUTDTC), as required by the
datacut process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impute_dcutdtc(dsin, varin, varout)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="impute_dcutdtc_+3A_dsin">dsin</code></td>
<td>
<p>Name of input data cut dataframe (i.e; DCUT)</p>
</td></tr>
<tr><td><code id="impute_dcutdtc_+3A_varin">varin</code></td>
<td>
<p>Name of input data cutoff variable (i.e; DCUTDTC) which must be in ISO 8601
extended format (YYYY-MM-DDThh:mm:ss). All values of the data cutoff variable must be at
least a complete date, or NA.</p>
</td></tr>
<tr><td><code id="impute_dcutdtc_+3A_varout">varout</code></td>
<td>
<p>Name of imputed output variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the input data cut dataframe, with the additional of one extra variable (varout)
in POSIXct datetime format, which is the imputed version of varin.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dcut &lt;- data.frame(
  USUBJID = rep(c("UXYZ123a"), 7),
  DCUTDTC = c(
    "2022-06-23", "2022-06-23T16", "2022-06-23T16:57", "2022-06-23T16:57:30",
    "2022-06-23T16:57:30.123", "2022-06-23T16:-:30", "2022-06-23T-:57:30"
  )
)
dcut_final &lt;- impute_dcutdtc(dsin = dcut, varin = DCUTDTC, varout = DCUTDTM)

</code></pre>

<hr>
<h2 id='impute_sdtm'>Imputes Partial Date/Time SDTMv Variables</h2><span id='topic+impute_sdtm'></span>

<h3>Description</h3>

<p>Imputes partial date/time SDTMv variables, as required by the datacut process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>impute_sdtm(dsin, varin, varout)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="impute_sdtm_+3A_dsin">dsin</code></td>
<td>
<p>Name of input SDTMv dataframe</p>
</td></tr>
<tr><td><code id="impute_sdtm_+3A_varin">varin</code></td>
<td>
<p>Name of input SDTMv character date/time variable, which must be in ISO 8601
extended format (YYYY-MM-DDThh:mm:ss). The use of date/time intervals are not permitted.</p>
</td></tr>
<tr><td><code id="impute_sdtm_+3A_varout">varout</code></td>
<td>
<p>Name of imputed output variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the input SDTMv dataframe, with the addition of one extra variable (varout) in
POSIXct datetime format, which is the imputed version of varin.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ex &lt;- data.frame(
  USUBJID = rep(c("UXYZ123a"), 13),
  EXSTDTC = c(
    "", "2022", "2022-06", "2022-06-23", "2022-06-23T16", "2022-06-23T16:57",
    "2022-06-23T16:57:30", "2022-06-23T16:57:30.123", "2022-06-23T16:-:30",
    "2022-06-23T-:57:30", "2022-06--T16:57:30", "2022---23T16:57:30", "--06-23T16:57:30"
  )
)
ex_imputed &lt;- impute_sdtm(dsin = ex, varin = EXSTDTC, varout = DCUT_TEMP_EXSTDTC)

</code></pre>

<hr>
<h2 id='process_cut'>Wrapper function to prepare and apply the datacut of SDTMv datasets</h2><span id='topic+process_cut'></span>

<h3>Description</h3>

<p>Applies the selected type of datacut on each SDTMv dataset based on the chosen
SDTMv date variable, and outputs the resulting cut datasets, as well as the datacut dataset,
as a list. It provides an option to perform a &quot;special&quot; cut on the demography (dm) domain
in which any deaths occurring after the datacut date are removed. It also provides an option
to produce a .html file that summarizes the changes applied to the data during the cut, where
you can inspect the records that have been removed and/or modified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_cut(
  source_sdtm_data,
  patient_cut_v = NULL,
  date_cut_m = NULL,
  no_cut_v = NULL,
  dataset_cut,
  cut_var,
  special_dm = TRUE,
  read_out = FALSE,
  out_path = "."
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_cut_+3A_source_sdtm_data">source_sdtm_data</code></td>
<td>
<p>A list of uncut SDTMv dataframes</p>
</td></tr>
<tr><td><code id="process_cut_+3A_patient_cut_v">patient_cut_v</code></td>
<td>
<p>A vector of quoted SDTMv domain names in which a patient cut should be
applied. To be left blank if a patient cut should not be performed on any domains.</p>
</td></tr>
<tr><td><code id="process_cut_+3A_date_cut_m">date_cut_m</code></td>
<td>
<p>A 2 column matrix, where the first column is the quoted SDTMv domain names in
which a date cut should be applied and the second column is the quoted SDTMv date variables used
to carry out the date cut for each SDTMv domain. To be left blank if a date cut should not be
performed on any domains.</p>
</td></tr>
<tr><td><code id="process_cut_+3A_no_cut_v">no_cut_v</code></td>
<td>
<p>A vector of quoted SDTMv domain names in which no cut should be applied. To be
left blank if no domains are to remain exactly as source.</p>
</td></tr>
<tr><td><code id="process_cut_+3A_dataset_cut">dataset_cut</code></td>
<td>
<p>Input datacut dataset, e.g. dcut</p>
</td></tr>
<tr><td><code id="process_cut_+3A_cut_var">cut_var</code></td>
<td>
<p>Datacut date variable within the dataset_cut dataset, e.g. DCUTDTM</p>
</td></tr>
<tr><td><code id="process_cut_+3A_special_dm">special_dm</code></td>
<td>
<p>A logical input indicating whether the <code style="white-space: pre;">&#8288;special dm cut&#8288;</code> should be performed.
Note that, if TRUE, dm should not be included in <code>patient_cut_v</code>, <code>date_cut_m</code> or <code>no_cut_v</code>
inputs.</p>
</td></tr>
<tr><td><code id="process_cut_+3A_read_out">read_out</code></td>
<td>
<p>A logical input indicating whether a summary file for the datacut should be
produced. If <code>TRUE</code>, a .html file will be returned containing a summary of the cut and
records removed. Default set to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="process_cut_+3A_out_path">out_path</code></td>
<td>
<p>A character vector of file save path for the summary file if <code>read_out = TRUE</code>;
the default corresponds to the working directory, <code>getwd()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list of all input SDTMv datasets, plus the datacut dataset, after
performing the selected datacut on each SDTMv domain.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dcut &lt;- data.frame(
  USUBJID = c("a", "b"),
  DCUTDTC = c("2022-02-17", "2022-02-17")
)
dcut &lt;- impute_dcutdtc(dcut, DCUTDTC, DCUTDTM)
sc &lt;- data.frame(USUBJID = c("a", "a", "b", "c"))
ts &lt;- data.frame(USUBJID = c("a", "a", "b", "c"))
ae &lt;- data.frame(
  USUBJID = c("a", "a", "b", "c"),
  AESTDTC = c("2022-02-16", "2022-02-18", "2022-02-16", "2022-02-16")
)
source_data &lt;- list(sc = sc, ae = ae, ts = ts)

cut_data &lt;- process_cut(
  source_sdtm_data = source_data,
  patient_cut_v = c("sc"),
  date_cut_m = rbind(c("ae", "AESTDTC")),
  no_cut_v = c("ts"),
  dataset_cut = dcut,
  cut_var = DCUTDTM,
  special_dm = FALSE
)

</code></pre>

<hr>
<h2 id='pt_cut'>Patient Cut</h2><span id='topic+pt_cut'></span>

<h3>Description</h3>

<p>Use to apply a patient cut to an SDTMv dataset (i.e. subset SDTMv observations on patients
included in the dataset_cut input dataset)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pt_cut(dataset_sdtm, dataset_cut)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pt_cut_+3A_dataset_sdtm">dataset_sdtm</code></td>
<td>
<p>Input SDTMv dataset</p>
</td></tr>
<tr><td><code id="pt_cut_+3A_dataset_cut">dataset_cut</code></td>
<td>
<p>Input datacut dataset, e.g. dcut</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Input dataset plus a flag <code>DCUT_TEMP_REMOVE</code> to indicate which observations would be
dropped when a patient level datacut is applied
</p>


<h3>Author(s)</h3>

<p>Alana Harris
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(lubridate)
dcut &lt;- tibble::tribble(
  ~USUBJID, ~DCUTDTM,
  "subject1", ymd_hms("2020-10-11T23:59:59"),
  "subject2", ymd_hms("2020-10-11T23:59:59"),
  "subject4", ymd_hms("2020-10-11T23:59:59")
)

ae &lt;- tibble::tribble(
  ~USUBJID, ~AESEQ, ~AESTDTC,
  "subject1", 1, "2020-01-02T00:00:00",
  "subject1", 2, "2020-08-31T00:00:00",
  "subject1", 3, "2020-10-10T00:00:00",
  "subject2", 2, "2020-02-20T00:00:00",
  "subject3", 1, "2020-03-02T00:00:00",
  "subject4", 1, "2020-11-02T00:00:00"
)

ae_out &lt;- pt_cut(
  dataset_sdtm = ae,
  dataset_cut = dcut
)
</code></pre>

<hr>
<h2 id='read_out'>Function to generate datacut summary file</h2><span id='topic+read_out'></span>

<h3>Description</h3>

<p>Produces a .html file summarizing the changes applied to data during a data cut.
The file will contain an overview for the change in number of records for each dataset, the types
of cut applied and the opportunity to inspect the removed records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_out(
  dcut = NULL,
  patient_cut_data = NULL,
  date_cut_data = NULL,
  dm_cut = NULL,
  no_cut_list = NULL,
  out_path = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_out_+3A_dcut">dcut</code></td>
<td>
<p>The output datacut dataset (DCUT), created via the <code>create_dcut()</code> function,
containing the variable DCUTDTC.</p>
</td></tr>
<tr><td><code id="read_out_+3A_patient_cut_data">patient_cut_data</code></td>
<td>
<p>A list of quoted SDTMv domain names in which a patient cut has been.
applied (via the <code>pt_cut()</code> function). To be left blank if a patient cut has not been performed
on any domains.</p>
</td></tr>
<tr><td><code id="read_out_+3A_date_cut_data">date_cut_data</code></td>
<td>
<p>A list of quoted SDTMv domain names in which a date cut has been applied.
(via the <code>date_cut()</code> function). To be left blank if a date cut has not been performed on any
domains.</p>
</td></tr>
<tr><td><code id="read_out_+3A_dm_cut">dm_cut</code></td>
<td>
<p>The output dataset, created via the <code>special_dm_cut()</code> function, containing
the variables DCUT_TEMP_REMOVE and DCUT_TEMP_DTHCHANGE.</p>
</td></tr>
<tr><td><code id="read_out_+3A_no_cut_list">no_cut_list</code></td>
<td>
<p>List of of quoted SDTMv domain names in which no cut should be applied. To be
left blank if no domains are to remain exactly as source.</p>
</td></tr>
<tr><td><code id="read_out_+3A_out_path">out_path</code></td>
<td>
<p>A character vector of file save path for the summary file;
the default corresponds to a temporary directory, <code>tempdir()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a .html file summarizing the changes made to data during a datacut.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dcut &lt;- tibble::tribble(
  ~USUBJID, ~DCUTDTM, ~DCUTDTC,
  "subject1", lubridate::ymd_hms("2020-10-11T23:59:59"), "2020-10-11T23:59:59",
  "subject2", lubridate::ymd_hms("2020-10-11T23:59:59"), "2020-10-11T23:59:59",
  "subject4", lubridate::ymd_hms("2020-10-11T23:59:59"), "2020-10-11T23:59:59"
)

ae &lt;- tibble::tribble(
  ~USUBJID, ~AESEQ, ~AESTDTC,
  "subject1", 1, "2020-01-02T00:00:00",
  "subject1", 2, "2020-08-31T00:00:00",
  "subject1", 3, "2020-10-10T00:00:00",
  "subject2", 2, "2020-02-20T00:00:00",
  "subject3", 1, "2020-03-02T00:00:00",
  "subject4", 1, "2020-11-02T00:00:00",
  "subject4", 2, ""
)

dm &lt;- tibble::tribble(
  ~USUBJID, ~DTHDTC, ~DTHFL,
  "subject1", "2020-10-11", "Y",
  "subject2", "2020-10-12", "Y",
)

dt_ae &lt;- date_cut(
  dataset_sdtm = ae,
  sdtm_date_var = AESTDTC,
  dataset_cut = dcut,
  cut_var = DCUTDTM
)

pt_ae &lt;- pt_cut(
  dataset_sdtm = ae,
  dataset_cut = dcut
)

dm_cut &lt;- special_dm_cut(
  dataset_dm = dm,
  dataset_cut = dcut,
  cut_var = DCUTDTM
)

read_out(dcut, patient_cut_data = list(ae = pt_ae), date_cut_data = list(ae = dt_ae), dm_cut)

## End(Not run)
</code></pre>

<hr>
<h2 id='special_dm_cut'>Special DM Cut to reset Death variable information past cut date</h2><span id='topic+special_dm_cut'></span>

<h3>Description</h3>

<p>Applies patient cut if patient not in source DCUT, as well as
clearing death information within DM if death occurred after datacut date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>special_dm_cut(dataset_dm, dataset_cut, cut_var = DCUTDTM)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="special_dm_cut_+3A_dataset_dm">dataset_dm</code></td>
<td>
<p>Input DM SDTMv dataset</p>
</td></tr>
<tr><td><code id="special_dm_cut_+3A_dataset_cut">dataset_cut</code></td>
<td>
<p>Input datacut dataset</p>
</td></tr>
<tr><td><code id="special_dm_cut_+3A_cut_var">cut_var</code></td>
<td>
<p>Datacut date variable found in the <code>dataset_cut</code> dataset, default is <code>DCUTDTM</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Input dataset plus a flag <code>DCUT_TEMP_REMOVE</code> to indicate which observations would be
dropped when a datacut is applied, and a flag <code>DCUT_TEMP_DTHCHANGE</code> to indicate which
observations have death occurring after data cut date for clearing
</p>


<h3>Author(s)</h3>

<p>Tim Barnett
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dcut &lt;- tibble::tribble(
  ~USUBJID, ~DCUTDTC, ~DCUTDTM,
  "01-701-1015", "2014-10-20T23:59:59", lubridate::ymd_hms("2014-10-20T23:59:59"),
  "01-701-1023", "2014-10-20T23:59:59", lubridate::ymd_hms("2014-10-20T23:59:59")
)

dm &lt;- tibble::tribble(
  ~USUBJID, ~DTHDTC, ~DTHFL,
  "01-701-1015", "2014-10-20", "Y",
  "01-701-1023", "2014-10-21", "Y",
)

special_dm_cut(
  dataset_dm = dm,
  dataset_cut = dcut,
  cut_var = DCUTDTM
)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
