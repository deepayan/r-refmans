<!DOCTYPE html><html><head><title>Help for package teal.slice</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {teal.slice}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#calls_combine_by'><p>Compose predicates</p></a></li>
<li><a href='#check_simple_name'><p>Test whether variable name can be used within <code style="white-space: pre;">&#8288;Show R Code&#8288;</code></p></a></li>
<li><a href='#choices_labeled'><p>Set &quot;<code style="white-space: pre;">&#8288;&lt;choice&gt;:&lt;label&gt;&#8288;</code>&quot; type of names</p></a></li>
<li><a href='#ChoicesFilterState'><p><code>FilterState</code> object for categorical data</p></a></li>
<li><a href='#coalesce_r'><p>Recursively coalesce list elements.</p></a></li>
<li><a href='#countBar'><p>Progress bar with label</p></a></li>
<li><a href='#countBars'><p>Progress bars with labels</p></a></li>
<li><a href='#data_choices_labeled'><p>Returns a <code>choices_labeled</code> object</p></a></li>
<li><a href='#DataframeFilteredDataset'><p>The <code>DataframeFilteredDataset</code> <code>R6</code> class</p></a></li>
<li><a href='#DateFilterState'><p><code>FilterState</code> object for <code>Date</code> data</p></a></li>
<li><a href='#DatetimeFilterState'><p><code>FilterState</code> object for date time data</p></a></li>
<li><a href='#DefaultFilteredDataset'><p><code>DefaultFilteredDataset</code> <code>R6</code> class</p></a></li>
<li><a href='#DFFilterStates'><p><code>FilterStates</code> subclass for data frames</p></a></li>
<li><a href='#EmptyFilterState'><p><code>FilterState</code> object for empty variables</p></a></li>
<li><a href='#eval_expr_with_msg'><p>Evaluate expression with meaningful message</p></a></li>
<li><a href='#fetch_bs_color'><p>Get hex code of the current Bootstrap theme color.</p></a></li>
<li><a href='#filter_state_api'><p>Managing <code>FilteredData</code> states</p></a></li>
<li><a href='#FilteredData'><p>Class to encapsulate filtered datasets</p></a></li>
<li><a href='#FilteredDataset'><p><code>FilteredDataset</code> <code>R6</code> class</p></a></li>
<li><a href='#FilterPanelAPI'><p>Class to encapsulate the API of the filter panel of a teal app</p></a></li>
<li><a href='#FilterState'><p><code>FilterState</code> abstract class</p></a></li>
<li><a href='#FilterStateExpr'><p><code>FilterStateExpr</code> <code>R6</code> class</p></a></li>
<li><a href='#FilterStates'><p><code>FilterStates</code> <code>R6</code> class</p></a></li>
<li><a href='#format_time'><p>Format <code>POSIXt</code> for storage</p></a></li>
<li><a href='#get_default_slice_id'><p>Default <code>teal_slice</code> id</p></a></li>
<li><a href='#get_filter_expr'><p>Gets filter expression for multiple <code>datanames</code> taking into account its order.</p></a></li>
<li><a href='#get_supported_filter_varnames'><p>Gets supported filterable variable names</p></a></li>
<li><a href='#include_css_files'><p>Include <code>CSS</code> files from <code style="white-space: pre;">&#8288;/inst/css/&#8288;</code> package directory to application header</p></a></li>
<li><a href='#include_js_files'><p>Include <code>JS</code> files from <code style="white-space: pre;">&#8288;/inst/js/&#8288;</code> package directory to application header</p></a></li>
<li><a href='#init_filter_state'><p>Initialize <code>FilterState</code></p></a></li>
<li><a href='#init_filter_state_expr'><p>Initialize a <code>FilterStateExpr</code> object</p></a></li>
<li><a href='#init_filter_states'><p>Initialize <code>FilterStates</code> object</p></a></li>
<li><a href='#init_filtered_data'><p>Initialize <code>FilteredData</code></p></a></li>
<li><a href='#init_filtered_dataset'><p>Initialize <code>FilteredDataset</code></p></a></li>
<li><a href='#jsonify'><p>Convert a list to a justified <code>JSON</code> string</p></a></li>
<li><a href='#justify_json'><p>Justify colons in <code>JSON</code> string</p></a></li>
<li><a href='#LogicalFilterState'><p><code>FilterState</code> object for logical data</p></a></li>
<li><a href='#MAEFilteredDataset'><p><code>MAEFilteredDataset</code> <code>R6</code> class</p></a></li>
<li><a href='#MAEFilterStates'><p><code>FilterStates</code> subclass for <code>MultiAssayExperiment</code>s</p></a></li>
<li><a href='#make_c_call'><p>Build concatenating call</p></a></li>
<li><a href='#make_count_text'><p>Build count text</p></a></li>
<li><a href='#MatrixFilterStates'><p><code>FilterStates</code> subclass for matrices</p></a></li>
<li><a href='#RangeFilterState'><p><code>FilterState</code> object for numeric data</p></a></li>
<li><a href='#SEFilterStates'><p><code>FilterStates</code> subclass for <code>SummarizedExperiment</code>s</p></a></li>
<li><a href='#setdiff_teal_slices'><p><code>setdiff</code> method for <code>teal_slices</code></p></a></li>
<li><a href='#teal_slice'><p>Specify single filter</p></a></li>
<li><a href='#teal_slices'><p>Complete filter specification</p></a></li>
<li><a href='#teal.slice-package'><p><code>teal.slice</code>: Interactive Exploration of Clinical Trials Data</p></a></li>
<li><a href='#to_json'><p>Converts a list to a <code>JSON</code> string</p></a></li>
<li><a href='#toggle_button'><p>Toggle button properties.</p></a></li>
<li><a href='#topological_sort'><p>Topological graph sort</p></a></li>
<li><a href='#trim_lines_json'><p>Trim lines in <code>JSON</code> string</p></a></li>
<li><a href='#variable_types'><p>Get classes of selected columns from dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Filter Module for 'teal' Applications</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-31</td>
</tr>
<tr>
<td>Description:</td>
<td>Data filtering module for 'teal' applications.  Allows for
    interactive filtering of data stored in 'data.frame' and
    'MultiAssayExperiment' objects. Also displays filtered and unfiltered
    observation counts.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://insightsengineering.github.io/teal.slice/">https://insightsengineering.github.io/teal.slice/</a>,
<a href="https://github.com/insightsengineering/teal.slice/">https://github.com/insightsengineering/teal.slice/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/insightsengineering/teal.slice/issues">https://github.com/insightsengineering/teal.slice/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>bslib (&ge; 0.4.0), checkmate (&ge; 2.1.0), dplyr (&ge; 1.0.5),
grDevices, htmltools (&ge; 0.5.4), jsonlite, lifecycle (&ge;
0.2.0), logger (&ge; 0.2.0), methods, plotly (&ge; 4.9.2.2), R6 (&ge;
2.2.0), shiny (&ge; 1.6.0), shinycssloaders (&ge; 1.0.0), shinyjs,
shinyWidgets (&ge; 0.6.2), teal.data (&ge; 0.4.0), teal.logger (&ge;
0.1.1), teal.widgets (&ge; 0.4.0), utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.42), MultiAssayExperiment, SummarizedExperiment,
testthat (&ge; 3.1.5), withr (&ge; 2.1.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>lifecycle</td>
</tr>
<tr>
<td>Config/Needs/verdepcheck:</td>
<td>rstudio/shiny, rstudio/bslib, mllg/checkmate,
tidyverse/dplyr, rstudio/htmltools, jeroen/jsonlite,
r-lib/lifecycle, daroczig/logger, plotly/plotly, r-lib/R6,
daattali/shinycssloaders, daattali/shinyjs,
dreamRs/shinyWidgets, insightsengineering/teal.data,
insightsengineering/teal.logger,
insightsengineering/teal.widgets, yihui/knitr,
bioc::MultiAssayExperiment, bioc::SummarizedExperiment,
r-lib/testthat, r-lib/withr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>insightsengineering/nesttemplate</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-05 19:41:21 UTC; unardid</td>
</tr>
<tr>
<td>Author:</td>
<td>Dawid Kaledkowski <a href="https://orcid.org/0000-0001-9533-457X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Pawel Rucki [aut],
  Aleksander Chlebowski
    <a href="https://orcid.org/0000-0001-5018-6294"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Andre Verissimo <a href="https://orcid.org/0000-0002-2212-339X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Kartikeya Kirar [aut],
  Marcin Kosinski [aut],
  Chendi Liao [rev],
  Dony Unardi [rev],
  Andrew Bates [aut],
  Mahmoud Hallal [aut],
  Nikolas Burkoff [aut],
  Maciej Nasinski [aut],
  Konrad Pagacz [aut],
  Junlue Zhao [aut],
  F. Hoffmann-La Roche AG [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dawid Kaledkowski &lt;dawid.kaledkowski@roche.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-06 17:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='calls_combine_by'>Compose predicates</h2><span id='topic+calls_combine_by'></span>

<h3>Description</h3>

<p>Combines calls with a logical operator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calls_combine_by(calls, operator)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calls_combine_by_+3A_calls">calls</code></td>
<td>
<p>(<code>list</code>)
containing calls (or symbols) to be combined by <code>operator</code></p>
</td></tr>
<tr><td><code id="calls_combine_by_+3A_operator">operator</code></td>
<td>
<p>(<code>character(1)</code>)
infix operator to use in predicate composition, <em>e.g.</em> <code>"&amp;"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to combine logical predicates produced by <code>FilterState</code> objects
to build a complete subset expression.
</p>


<h3>Value</h3>

<p>A <code>call</code> where elements of <code>calls</code> are composed with <code>operator</code> or <code>NULL</code> if <code>calls</code> is an empty list.
</p>

<hr>
<h2 id='check_simple_name'>Test whether variable name can be used within <code style="white-space: pre;">&#8288;Show R Code&#8288;</code></h2><span id='topic+check_simple_name'></span>

<h3>Description</h3>

<p>Variable names containing spaces are problematic and must be wrapped in backticks.
Also, they should not start with a number as <code>R</code> may silently make it valid by changing it.
Therefore, we only allow alphanumeric characters with underscores.
The first character of the <code>name</code> must be an alphabetic character and can be followed by alphanumeric characters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_simple_name(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_simple_name_+3A_name">name</code></td>
<td>
<p>(<code>character</code>) vector of names to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>NULL</code> or raises error.
</p>

<hr>
<h2 id='choices_labeled'>Set &quot;<code style="white-space: pre;">&#8288;&lt;choice&gt;:&lt;label&gt;&#8288;</code>&quot; type of names</h2><span id='topic+choices_labeled'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>This is often useful for as it marks up the drop-down boxes for <code><a href="shiny.html#topic+selectInput">shiny::selectInput()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>choices_labeled(choices, labels, subset = NULL, types = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="choices_labeled_+3A_choices">choices</code></td>
<td>
<p>(<code>character</code> or <code>numeric</code> or <code>logical</code>) vector</p>
</td></tr>
<tr><td><code id="choices_labeled_+3A_labels">labels</code></td>
<td>
<p>(<code>character</code>) vector containing labels to be applied to <code>choices</code>. If <code>NA</code> then
&quot;Label Missing&quot; will be used.</p>
</td></tr>
<tr><td><code id="choices_labeled_+3A_subset">subset</code></td>
<td>
<p>a vector that is a subset of <code>choices</code>. This is useful if
only a few variables need to be named. If this argument is used, the returned vector will
match its order.</p>
</td></tr>
<tr><td><code id="choices_labeled_+3A_types">types</code></td>
<td>
<p>vector containing the types of the columns.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If either <code>choices</code> or <code>labels</code> are factors, they are coerced to character.
Duplicated elements from <code>choices</code> get removed.
</p>


<h3>Value</h3>

<p>A named character vector.
</p>

<hr>
<h2 id='ChoicesFilterState'><code>FilterState</code> object for categorical data</h2><span id='topic+ChoicesFilterState'></span>

<h3>Description</h3>

<p>Manages choosing elements from a set.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterState">teal.slice::FilterState</a></code> -&gt; <code>ChoicesFilterState</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-ChoicesFilterState-new"><code>ChoicesFilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-ChoicesFilterState-get_call"><code>ChoicesFilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-ChoicesFilterState-clone"><code>ChoicesFilterState$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="destroy_observers"><a href='../../teal.slice/html/FilterState.html#method-FilterState-destroy_observers'><code>teal.slice::FilterState$destroy_observers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="format"><a href='../../teal.slice/html/FilterState.html#method-FilterState-format'><code>teal.slice::FilterState$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="get_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-get_state'><code>teal.slice::FilterState$get_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="print"><a href='../../teal.slice/html/FilterState.html#method-FilterState-print'><code>teal.slice::FilterState$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="server"><a href='../../teal.slice/html/FilterState.html#method-FilterState-server'><code>teal.slice::FilterState$server()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="set_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-set_state'><code>teal.slice::FilterState$set_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="ui"><a href='../../teal.slice/html/FilterState.html#method-FilterState-ui'><code>teal.slice::FilterState$ui()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-ChoicesFilterState-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterState</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChoicesFilterState$new(
  x,
  x_reactive = reactive(NULL),
  slice,
  extract_type = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>character</code>)
variable to be filtered.</p>
</dd>
<dt><code>x_reactive</code></dt><dd><p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
<dt><code>extract_type</code></dt><dd><p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>ChoicesFilterState</code>, invisibly.
</p>


<hr>
<a id="method-ChoicesFilterState-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Returns reproducible condition call for current selection.
For this class returned call looks like
<code style="white-space: pre;">&#8288;&lt;varname&gt; %in% c(&lt;values selected&gt;)&#8288;</code> with optional <code style="white-space: pre;">&#8288;is.na(&lt;varname&gt;)&#8288;</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChoicesFilterState$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>) name of data set; defaults to <code>private$get_dataname()</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>call</code> or <code>NULL</code>
</p>


<hr>
<a id="method-ChoicesFilterState-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>ChoicesFilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='coalesce_r'>Recursively coalesce list elements.</h2><span id='topic+coalesce_r'></span>

<h3>Description</h3>

<p>Returns first element of list that it not <code>NULL</code>, recursively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coalesce_r(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coalesce_r_+3A_x">x</code></td>
<td>
<p>(<code>list</code>), either of atomic vectors or of named lists</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Given a list of atomic vectors, the first non-null element is returned.
Given a list of lists, for all <code>names</code> found in all elements of the list
the first non-null element of a given name is returned.
</p>
<p>This function is used internally in <code>c.teal_slices</code> to manage <code>teal_slices</code> attributes.
</p>


<h3>Value</h3>

<p>Either an atomic vector of length 1 or a (potentially nested) list.
</p>

<hr>
<h2 id='countBar'>Progress bar with label</h2><span id='topic+countBar'></span><span id='topic+updateCountBar'></span><span id='topic+updateCountText'></span>

<h3>Description</h3>

<p><code>shiny</code> element displaying a progress bar and observation count.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>countBar(inputId, label, countmax, countnow = NULL, counttotal = countmax)

updateCountBar(
  session = getDefaultReactiveDomain(),
  inputId,
  label,
  countmax,
  countnow = NULL,
  counttotal
)

updateCountText(
  session = getDefaultReactiveDomain(),
  inputId,
  label,
  countmax,
  countnow
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="countBar_+3A_inputid">inputId</code></td>
<td>
<p>(<code>character(1)</code>) <code>shiny</code> id of the parent element (e.g. a check-box group input).</p>
</td></tr>
<tr><td><code id="countBar_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>) Text to display followed by counts.</p>
</td></tr>
<tr><td><code id="countBar_+3A_countmax">countmax</code></td>
<td>
<p>(<code>numeric(1)</code>) Maximum count for a single element.</p>
</td></tr>
<tr><td><code id="countBar_+3A_countnow">countnow</code></td>
<td>
<p>(<code>numeric(1)</code>) Current count for a single element.</p>
</td></tr>
<tr><td><code id="countBar_+3A_counttotal">counttotal</code></td>
<td>
<p>(<code>numeric(1)</code>) Sum total of maximum counts of all elements, see <code>Details</code>.</p>
</td></tr>
<tr><td><code id="countBar_+3A_session">session</code></td>
<td>
<p>(<code>session</code>) <code>shiny</code> <code>session</code> object passed to function given to <code>shinyServer</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A progress bar is created to visualize the number of counts in a variable, with filling and a text label.
</p>

<ul>
<li><p> progress bar width is derived as a fraction of the container width: <code>style = "width: &lt;countmax&gt; / &lt;counttotal&gt;%"</code>,
</p>
</li>
<li><p> progress bar is filled up to the fraction <code style="white-space: pre;">&#8288;&lt;countnow&gt; / &lt;countmax&gt;&#8288;</code>,
</p>
</li>
<li><p> text label is obtained by <code style="white-space: pre;">&#8288;&lt;label&gt; (&lt;countnow&gt; / &lt;countmax&gt;)&#8288;</code>.
</p>
</li></ul>



<h3>Value</h3>

<p><code>shiny.tag</code> object with a progress bar and a label.
</p>

<hr>
<h2 id='countBars'>Progress bars with labels</h2><span id='topic+countBars'></span><span id='topic+updateCountBars'></span>

<h3>Description</h3>

<p><code>shiny</code> element displaying a series of progress bars and observation counts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>countBars(inputId, choices, countsmax, countsnow = NULL)

updateCountBars(
  session = getDefaultReactiveDomain(),
  inputId,
  choices,
  countsmax,
  countsnow = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="countBars_+3A_inputid">inputId</code></td>
<td>
<p>(<code>character(1)</code>) <code>shiny</code> id of the parent element (e.g. a check-box group input).</p>
</td></tr>
<tr><td><code id="countBars_+3A_choices">choices</code></td>
<td>
<p>(<code>vector</code>) Available values. Used to determine label text.</p>
</td></tr>
<tr><td><code id="countBars_+3A_countsmax">countsmax</code></td>
<td>
<p>(<code>numeric</code>) Maximum counts of each element. Must be the same length <code>choices</code>.</p>
</td></tr>
<tr><td><code id="countBars_+3A_countsnow">countsnow</code></td>
<td>
<p>(<code>numeric</code>) Current counts of each element. Must be the same length <code>choices</code>.</p>
</td></tr>
<tr><td><code id="countBars_+3A_session">session</code></td>
<td>
<p>(<code>session</code>) <code>shiny</code> <code>session</code> object passed to function given to <code>shinyServer</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of <code>shiny.tag</code>s.
</p>
<p>Creates a number of progress bar elements, one for each value of <code>choices</code>.
The widths of all progress bars add up to the full width of the container.
Each progress bar has a text label that contains the name of the value and the number of counts.
</p>
<p>If the filter panel is used with <code>count_type = "all"</code>, the progress bars will be filled
according to the number of counts remaining in the current selection and the label will show
both the current and the total number of counts.
</p>
<p>Each child element can have a unique <code>id</code> attribute to be used independently.
</p>

<hr>
<h2 id='data_choices_labeled'>Returns a <code>choices_labeled</code> object</h2><span id='topic+data_choices_labeled'></span>

<h3>Description</h3>

<p>Returns a <code>choices_labeled</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_choices_labeled(
  data,
  choices,
  varlabels = teal.data::col_labels(data, fill = TRUE),
  keys = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data_choices_labeled_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code> or <code>DFrame</code> or <code>list</code>)
where labels can be taken from in case when <code>varlabels</code> is not specified.
<code>data</code> must be specified if <code>varlabels</code> is not specified.</p>
</td></tr>
<tr><td><code id="data_choices_labeled_+3A_choices">choices</code></td>
<td>
<p>(<code>character</code>)
the vector of chosen variables</p>
</td></tr>
<tr><td><code id="data_choices_labeled_+3A_varlabels">varlabels</code></td>
<td>
<p>(<code>character</code>)
the labels of variables in data</p>
</td></tr>
<tr><td><code id="data_choices_labeled_+3A_keys">keys</code></td>
<td>
<p>(<code>character</code>)
the names of the key columns in data</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character(0)</code> if choices are empty; a <code>choices_labeled</code> object otherwise
</p>

<hr>
<h2 id='DataframeFilteredDataset'>The <code>DataframeFilteredDataset</code> <code>R6</code> class</h2><span id='topic+DataframeFilteredDataset'></span>

<h3>Description</h3>

<p>The <code>DataframeFilteredDataset</code> <code>R6</code> class
</p>
<p>The <code>DataframeFilteredDataset</code> <code>R6</code> class
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilteredDataset">teal.slice::FilteredDataset</a></code> -&gt; <code>DataframeFilteredDataset</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DataframeFilteredDataset-new"><code>DataframeFilteredDataset$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-get_call"><code>DataframeFilteredDataset$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-set_filter_state"><code>DataframeFilteredDataset$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-remove_filter_state"><code>DataframeFilteredDataset$remove_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-ui_add"><code>DataframeFilteredDataset$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-get_filter_overview"><code>DataframeFilteredDataset$get_filter_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-DataframeFilteredDataset-clone"><code>DataframeFilteredDataset$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="clear_filter_states"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-clear_filter_states'><code>teal.slice::FilteredDataset$clear_filter_states()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="format"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-format'><code>teal.slice::FilteredDataset$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataname"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataname'><code>teal.slice::FilteredDataset$get_dataname()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset'><code>teal.slice::FilteredDataset$get_dataset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset_label"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset_label'><code>teal.slice::FilteredDataset$get_dataset_label()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_filter_count"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_filter_count'><code>teal.slice::FilteredDataset$get_filter_count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_filter_state"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_filter_state'><code>teal.slice::FilteredDataset$get_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_keys"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_keys'><code>teal.slice::FilteredDataset$get_keys()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="print"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-print'><code>teal.slice::FilteredDataset$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_active"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_active'><code>teal.slice::FilteredDataset$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_add"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_add'><code>teal.slice::FilteredDataset$srv_add()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="ui_active"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-ui_active'><code>teal.slice::FilteredDataset$ui_active()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DataframeFilteredDataset-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initializes this <code>DataframeFilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$new(
  dataset,
  dataname,
  keys = character(0),
  parent_name = character(0),
  parent = NULL,
  join_keys = character(0),
  label = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataset</code></dt><dd><p>(<code>data.frame</code>)
single <code>data.frame</code> for which filters are rendered.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
syntactically valid name given to the dataset.</p>
</dd>
<dt><code>keys</code></dt><dd><p>(<code>character</code>)
optional vector of primary key column names.</p>
</dd>
<dt><code>parent_name</code></dt><dd><p>(<code>character(1)</code>)
name of the parent dataset.</p>
</dd>
<dt><code>parent</code></dt><dd><p>(<code>reactive</code>)
that returns a filtered <code>data.frame</code> from other <code>FilteredDataset</code> named <code>parent_name</code>.
Passing <code>parent</code> results in a <code>reactive</code> link that causes re-filtering of this <code>dataset</code>
based on the changes in <code>parent</code>.</p>
</dd>
<dt><code>join_keys</code></dt><dd><p>(<code>character</code>)
vector of names of columns in this dataset to join with <code>parent</code> dataset.
If column names in the parent do not match these, they should be given as the names of this vector.</p>
</dd>
<dt><code>label</code></dt><dd><p>(<code>character(1)</code>)
label to describe the dataset.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>DataframeFilteredDataset</code>, invisibly.
</p>


<hr>
<a id="method-DataframeFilteredDataset-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Gets the subset expression.
</p>
<p>This function returns subset expressions equivalent to selected items
within each of <code>filter_states</code>. Configuration of the expressions is constant and
depends on <code>filter_states</code> type and order which are set during initialization.
This class contains single <code>FilterStates</code> which contains single <code>state_list</code>
and all <code>FilterState</code> objects apply to one argument (<code>...</code>) in a <code>dplyr::filter</code> call.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$get_call(sid = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>sid</code></dt><dd><p>(<code>character</code>)
when specified, the method returns code containing conditions calls of
<code>FilterState</code> objects with <code>sid</code> different to that of this <code>sid</code> argument.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Either a <code>list</code> of length 1 containing a filter <code>call</code>, or <code>NULL</code>.
</p>


<hr>
<a id="method-DataframeFilteredDataset-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>

<p>Set filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DataframeFilteredDataset-remove_filter_state"></a>



<h4>Method <code>remove_filter_state()</code></h4>

<p>Remove one or more <code>FilterState</code> form a <code>FilteredDataset</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$remove_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)
specifying <code>FilterState</code> objects to remove;
<code>teal_slice</code>s may contain only <code>dataname</code> and <code>varname</code>, other elements are ignored</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DataframeFilteredDataset-ui_add"></a>



<h4>Method <code>ui_add()</code></h4>

<p>UI module to add filter variable for this dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-DataframeFilteredDataset-get_filter_overview"></a>



<h4>Method <code>get_filter_overview()</code></h4>

<p>Creates row for filter overview in the form of <br />
<code>dataname -- observations (remaining/total)</code> - data.frame
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$get_filter_overview()</pre></div>



<h5>Returns</h5>

<p>A <code>data.frame</code>.
</p>


<hr>
<a id="method-DataframeFilteredDataset-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DataframeFilteredDataset$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='DateFilterState'><code>FilterState</code> object for <code>Date</code> data</h2><span id='topic+DateFilterState'></span>

<h3>Description</h3>

<p>Manages choosing a range of <code>Date</code>s.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterState">teal.slice::FilterState</a></code> -&gt; <code>DateFilterState</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DateFilterState-new"><code>DateFilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DateFilterState-get_call"><code>DateFilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-DateFilterState-clone"><code>DateFilterState$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="destroy_observers"><a href='../../teal.slice/html/FilterState.html#method-FilterState-destroy_observers'><code>teal.slice::FilterState$destroy_observers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="format"><a href='../../teal.slice/html/FilterState.html#method-FilterState-format'><code>teal.slice::FilterState$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="get_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-get_state'><code>teal.slice::FilterState$get_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="print"><a href='../../teal.slice/html/FilterState.html#method-FilterState-print'><code>teal.slice::FilterState$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="server"><a href='../../teal.slice/html/FilterState.html#method-FilterState-server'><code>teal.slice::FilterState$server()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="set_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-set_state'><code>teal.slice::FilterState$set_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="ui"><a href='../../teal.slice/html/FilterState.html#method-FilterState-ui'><code>teal.slice::FilterState$ui()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DateFilterState-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterState</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>DateFilterState$new(
  x,
  x_reactive = reactive(NULL),
  slice,
  extract_type = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>Date</code>)
variable to be filtered.</p>
</dd>
<dt><code>x_reactive</code></dt><dd><p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
<dt><code>extract_type</code></dt><dd><p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>DateFilterState</code>, invisibly.
</p>


<hr>
<a id="method-DateFilterState-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Returns reproducible condition call for current selection.
For this class returned call looks like
<code style="white-space: pre;">&#8288;&lt;varname&gt; &gt;= &lt;min value&gt; &amp; &lt;varname&gt; &lt;= &lt;max value&gt;&#8288;</code> with optional <code style="white-space: pre;">&#8288;is.na(&lt;varname&gt;)&#8288;</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>DateFilterState$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>) containing possibly prefixed name of data set</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>call</code> or <code>NULL</code>
</p>


<hr>
<a id="method-DateFilterState-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DateFilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='DatetimeFilterState'><code>FilterState</code> object for date time data</h2><span id='topic+DatetimeFilterState'></span>

<h3>Description</h3>

<p>Manages choosing a range of date-times.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterState">teal.slice::FilterState</a></code> -&gt; <code>DatetimeFilterState</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DatetimeFilterState-new"><code>DatetimeFilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DatetimeFilterState-get_call"><code>DatetimeFilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-DatetimeFilterState-clone"><code>DatetimeFilterState$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="destroy_observers"><a href='../../teal.slice/html/FilterState.html#method-FilterState-destroy_observers'><code>teal.slice::FilterState$destroy_observers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="format"><a href='../../teal.slice/html/FilterState.html#method-FilterState-format'><code>teal.slice::FilterState$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="get_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-get_state'><code>teal.slice::FilterState$get_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="print"><a href='../../teal.slice/html/FilterState.html#method-FilterState-print'><code>teal.slice::FilterState$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="server"><a href='../../teal.slice/html/FilterState.html#method-FilterState-server'><code>teal.slice::FilterState$server()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="set_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-set_state'><code>teal.slice::FilterState$set_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="ui"><a href='../../teal.slice/html/FilterState.html#method-FilterState-ui'><code>teal.slice::FilterState$ui()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DatetimeFilterState-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterState</code> object. This class
has an extra field, <code>private$timezone</code>, which is set to <code>Sys.timezone()</code> by
default. However, in case when using this module in <code>teal</code> app, one needs
timezone of the app user. App user timezone is taken from <code>session$userData$timezone</code>
and is set only if object is initialized in <code>shiny</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>DatetimeFilterState$new(
  x,
  x_reactive = reactive(NULL),
  extract_type = character(0),
  slice
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>POSIXct</code> or <code>POSIXlt</code>)
variable to be filtered.</p>
</dd>
<dt><code>x_reactive</code></dt><dd><p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>extract_type</code></dt><dd><p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</dd>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>DatetimeFilterState</code>, invisibly.
</p>


<hr>
<a id="method-DatetimeFilterState-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Returns reproducible condition call for current selection.
For this class returned call looks like
<code style="white-space: pre;">&#8288;&lt;varname&gt; &gt;= as.POSIXct(&lt;min&gt;) &amp; &lt;varname&gt; &lt;= &lt;max&gt;)&#8288;</code> with optional <code style="white-space: pre;">&#8288;is.na(&lt;varname&gt;)&#8288;</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>DatetimeFilterState$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>name of data set; defaults to <code>private$get_dataname()</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>call</code>
</p>


<hr>
<a id="method-DatetimeFilterState-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DatetimeFilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='DefaultFilteredDataset'><code>DefaultFilteredDataset</code> <code>R6</code> class</h2><span id='topic+DefaultFilteredDataset'></span>

<h3>Description</h3>

<p>Stores any object as inert entity. Filtering is not supported.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilteredDataset">teal.slice::FilteredDataset</a></code> -&gt; <code>DefaultFilteredDataset</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DefaultFilteredDataset-new"><code>DefaultFilteredDataset$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-format"><code>DefaultFilteredDataset$format()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-get_call"><code>DefaultFilteredDataset$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-get_filter_state"><code>DefaultFilteredDataset$get_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-set_filter_state"><code>DefaultFilteredDataset$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-clear_filter_states"><code>DefaultFilteredDataset$clear_filter_states()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-get_filter_overview"><code>DefaultFilteredDataset$get_filter_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-ui_active"><code>DefaultFilteredDataset$ui_active()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-ui_add"><code>DefaultFilteredDataset$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-DefaultFilteredDataset-clone"><code>DefaultFilteredDataset$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataname"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataname'><code>teal.slice::FilteredDataset$get_dataname()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset'><code>teal.slice::FilteredDataset$get_dataset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset_label"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset_label'><code>teal.slice::FilteredDataset$get_dataset_label()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_filter_count"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_filter_count'><code>teal.slice::FilteredDataset$get_filter_count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_keys"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_keys'><code>teal.slice::FilteredDataset$get_keys()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="print"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-print'><code>teal.slice::FilteredDataset$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_active"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_active'><code>teal.slice::FilteredDataset$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_add"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_add'><code>teal.slice::FilteredDataset$srv_add()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DefaultFilteredDataset-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initializes this <code>DefaultFilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$new(dataset, dataname, label = character(0))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataset</code></dt><dd><p>any type of object; will not be filtered.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
syntactically valid name given to the dataset.</p>
</dd>
<dt><code>label</code></dt><dd><p>(<code>character(1)</code>)
label to describe the dataset.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>DefaultFilteredDataset</code>, invisibly.
</p>


<hr>
<a id="method-DefaultFilteredDataset-format"></a>



<h4>Method <code>format()</code></h4>

<p>Returns a formatted string representing this <code>DefaultFilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$format(show_all, trim_lines = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>show_all</code></dt><dd><p>(<code>logical(1)</code>) for method consistency, ignored.</p>
</dd>
<dt><code>trim_lines</code></dt><dd><p>(<code>logical(1)</code>) flag specifying whether to trim lines if class names are too long.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The formatted string.
</p>


<hr>
<a id="method-DefaultFilteredDataset-get_call"></a>



<h4>Method <code>get_call()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$get_call(sid)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>sid</code></dt><dd><p>(<code>character(1)</code>) for method consistency, ignored.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DefaultFilteredDataset-get_filter_state"></a>



<h4>Method <code>get_filter_state()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$get_filter_state()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DefaultFilteredDataset-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>) for method consistency, ignored.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DefaultFilteredDataset-clear_filter_states"></a>



<h4>Method <code>clear_filter_states()</code></h4>



<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$clear_filter_states(force)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>force</code></dt><dd><p>(<code>logical(1)</code>) for method consistency, ignored.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-DefaultFilteredDataset-get_filter_overview"></a>



<h4>Method <code>get_filter_overview()</code></h4>

<p>Creates row for filter overview in the form of <br />
<code>dataname</code> - unsupported data class
</p>


<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$get_filter_overview()</pre></div>



<h5>Returns</h5>

<p>A <code>data.frame</code>.
</p>


<hr>
<a id="method-DefaultFilteredDataset-ui_active"></a>



<h4>Method <code>ui_active()</code></h4>

<p>Overwrites parent method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$ui_active(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Blank UI module that would list active filter states for this dataset.
</p>



<h5>Returns</h5>

<p>An empty <code>div</code>.
</p>


<hr>
<a id="method-DefaultFilteredDataset-ui_add"></a>



<h4>Method <code>ui_add()</code></h4>

<p>Overwrites parent method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Blank UI module that would list active filter states for this dataset.
</p>



<h5>Returns</h5>

<p>An empty <code>div</code>.
</p>


<hr>
<a id="method-DefaultFilteredDataset-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DefaultFilteredDataset$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='DFFilterStates'><code>FilterStates</code> subclass for data frames</h2><span id='topic+DFFilterStates'></span>

<h3>Description</h3>

<p>Handles filter states in a <code>data.frame</code>.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterStates">teal.slice::FilterStates</a></code> -&gt; <code>DFFilterStates</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-DFFilterStates-new"><code>DFFilterStates$new()</code></a>
</p>
</li>
<li> <p><a href="#method-DFFilterStates-clone"><code>DFFilterStates$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="clear_filter_states"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-clear_filter_states'><code>teal.slice::FilterStates$clear_filter_states()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="format"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-format'><code>teal.slice::FilterStates$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_call"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_call'><code>teal.slice::FilterStates$get_call()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_filter_state'><code>teal.slice::FilterStates$get_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="print"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-print'><code>teal.slice::FilterStates$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="remove_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-remove_filter_state'><code>teal.slice::FilterStates$remove_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="set_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-set_filter_state'><code>teal.slice::FilterStates$set_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="srv_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-srv_active'><code>teal.slice::FilterStates$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="srv_add"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-srv_add'><code>teal.slice::FilterStates$srv_add()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="ui_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-ui_active'><code>teal.slice::FilterStates$ui_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="ui_add"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-ui_add'><code>teal.slice::FilterStates$ui_add()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-DFFilterStates-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initializes <code>DFFilterStates</code> object by setting <code>dataname</code>
and initializing <code>state_list</code> (<code>shiny::reactiveVal</code>).
This class contains a single <code>state_list</code> with no specified name,
which means that when calling the subset function associated with this class
(<code>dplyr::filter</code>), a list of conditions is passed to unnamed arguments (<code>...</code>).
</p>


<h5>Usage</h5>

<div class="r"><pre>DFFilterStates$new(
  data,
  data_reactive = function(sid = "") NULL,
  dataname,
  datalabel = NULL,
  keys = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>(<code>data.frame</code>)
the <code>R</code> object which <code>dplyr::filter</code> function will be applied on.</p>
</dd>
<dt><code>data_reactive</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function(sid)&#8288;</code>)
should return a <code>data.frame</code> object or <code>NULL</code>.
This object is needed for the <code>FilterState</code> counts being updated on a change in filters.
If function returns <code>NULL</code> then filtered counts are not shown.
Function has to have <code>sid</code> argument being a character.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character</code>)
name of the data used in the <em>subset expression</em>.
Passed to the function argument attached to this <code>FilterStates</code>.</p>
</dd>
<dt><code>datalabel</code></dt><dd><p>(<code>character(1)</code>)
optional text label.</p>
</dd>
<dt><code>keys</code></dt><dd><p>(<code>character</code>)
key column names.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-DFFilterStates-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>DFFilterStates$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='EmptyFilterState'><code>FilterState</code> object for empty variables</h2><span id='topic+EmptyFilterState'></span>

<h3>Description</h3>

<p><code>FilterState</code> subclass representing an empty variable.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterState">teal.slice::FilterState</a></code> -&gt; <code>EmptyFilterState</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-EmptyFilterState-new"><code>EmptyFilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-EmptyFilterState-get_call"><code>EmptyFilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-EmptyFilterState-clone"><code>EmptyFilterState$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="destroy_observers"><a href='../../teal.slice/html/FilterState.html#method-FilterState-destroy_observers'><code>teal.slice::FilterState$destroy_observers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="format"><a href='../../teal.slice/html/FilterState.html#method-FilterState-format'><code>teal.slice::FilterState$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="get_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-get_state'><code>teal.slice::FilterState$get_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="print"><a href='../../teal.slice/html/FilterState.html#method-FilterState-print'><code>teal.slice::FilterState$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="server"><a href='../../teal.slice/html/FilterState.html#method-FilterState-server'><code>teal.slice::FilterState$server()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="set_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-set_state'><code>teal.slice::FilterState$set_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="ui"><a href='../../teal.slice/html/FilterState.html#method-FilterState-ui'><code>teal.slice::FilterState$ui()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-EmptyFilterState-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize <code>EmptyFilterState</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>EmptyFilterState$new(
  x,
  x_reactive = reactive(NULL),
  extract_type = character(0),
  slice
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>vector</code>)
variable to be filtered,</p>
</dd>
<dt><code>x_reactive</code></dt><dd><p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>extract_type</code></dt><dd><p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</dd>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>EmptyFilterState</code>, invisibly.
</p>


<hr>
<a id="method-EmptyFilterState-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Returns reproducible condition call for current selection relevant for selected variable type.
Uses internal reactive values, hence must be called in reactive or isolated context.
</p>


<h5>Usage</h5>

<div class="r"><pre>EmptyFilterState$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>name of data set; defaults to <code>private$get_dataname()</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>logical(1)</code>
</p>


<hr>
<a id="method-EmptyFilterState-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>EmptyFilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='eval_expr_with_msg'>Evaluate expression with meaningful message</h2><span id='topic+eval_expr_with_msg'></span>

<h3>Description</h3>

<p>Method created for the <code>FilteredData</code> object to execute filter call with
meaningful message. After evaluation used environment should contain
all necessary bindings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eval_expr_with_msg(expr, env)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eval_expr_with_msg_+3A_expr">expr</code></td>
<td>
<p>(<code>language</code>)</p>
</td></tr>
<tr><td><code id="eval_expr_with_msg_+3A_env">env</code></td>
<td>
<p>(<code>environment</code>) where expression is evaluated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code>, invisibly.
</p>

<hr>
<h2 id='fetch_bs_color'>Get hex code of the current Bootstrap theme color.</h2><span id='topic+fetch_bs_color'></span>

<h3>Description</h3>

<p>Determines the color specification for the currently active Bootstrap color theme and returns one queried color.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetch_bs_color(color, alpha = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetch_bs_color_+3A_color">color</code></td>
<td>
<p>(<code>character(1)</code>) naming one of the available theme colors</p>
</td></tr>
<tr><td><code id="fetch_bs_color_+3A_alpha">alpha</code></td>
<td>
<p>either a <code>numeric(1)</code> or <code>character(1)</code> specifying transparency
in the range of <code>0-1</code> or a hexadecimal value <code>00-ff</code>, respectively;
set to NULL to omit adding the alpha channel</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named <code>character(1)</code> containing a hexadecimal color representation.
</p>

<hr>
<h2 id='filter_state_api'>Managing <code>FilteredData</code> states</h2><span id='topic+filter_state_api'></span><span id='topic+set_filter_state'></span><span id='topic+get_filter_state'></span><span id='topic+remove_filter_state'></span><span id='topic+clear_filter_states'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Set, get and remove filter states of <code>FilteredData</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_filter_state(datasets, filter)

get_filter_state(datasets)

remove_filter_state(datasets, filter)

clear_filter_states(datasets, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_state_api_+3A_datasets">datasets</code></td>
<td>
<p>(<code>FilteredData</code>)
object to store filter state and filtered datasets, shared across modules
</p>
<p>see <code><a href="#topic+FilteredData">FilteredData</a></code> for details</p>
</td></tr>
<tr><td><code id="filter_state_api_+3A_filter">filter</code></td>
<td>
<p>(<code>teal_slices</code>)
specify filters in place on app start-up</p>
</td></tr>
<tr><td><code id="filter_state_api_+3A_force">force</code></td>
<td>
<p>(<code>logical(1)</code>)
flag specifying whether to include anchored filter states.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code style="white-space: pre;">&#8288;set_*&#8288;</code>, <code style="white-space: pre;">&#8288;remove_*&#8288;</code> and <code>clear_filter_state</code> return <code>NULL</code> invisibly
</p>
</li>
<li> <p><code>get_filter_state</code> returns a named <code>teal_slices</code> object
containing a <code>teal_slice</code> for every existing <code>FilterState</code>
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+teal_slice">teal_slice</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datasets &lt;- init_filtered_data(list(iris = iris, mtcars = mtcars))
fs &lt;- teal_slices(
  teal_slice(dataname = "iris", varname = "Species", selected = c("setosa", "versicolor")),
  teal_slice(dataname = "iris", varname = "Sepal.Length", selected = c(5.1, 6.4)),
  teal_slice(dataname = "mtcars", varname = "gear", selected = c(4, 5)),
  teal_slice(dataname = "mtcars", varname = "carb", selected = c(4, 10))
)

# set initial filter state
set_filter_state(datasets, filter = fs)

# get filter state
get_filter_state(datasets)

# modify filter state
set_filter_state(
  datasets,
  teal_slices(
    teal_slice(dataname = "iris", varname = "Species", selected = "setosa", keep_na = TRUE)
  )
)

# remove specific filters
remove_filter_state(
  datasets,
  teal_slices(
    teal_slice(dataname = "iris", varname = "Species"),
    teal_slice(dataname = "mtcars", varname = "gear"),
    teal_slice(dataname = "mtcars", varname = "carb")
  )
)

# remove all states
clear_filter_states(datasets)


if (requireNamespace("MultiAssayExperiment", quietly = TRUE)) {
  # Requires MultiAssayExperiment from Bioconductor
  data(miniACC, package = "MultiAssayExperiment")

  datasets &lt;- init_filtered_data(list(mae = miniACC))
  fs &lt;- teal_slices(
    teal_slice(
      dataname = "mae", varname = "years_to_birth", selected = c(30, 50),
      keep_na = TRUE, keep_inf = FALSE
    ),
    teal_slice(
      dataname = "mae", varname = "vital_status", selected = "1",
      keep_na = FALSE
    ),
    teal_slice(
      dataname = "mae", varname = "gender", selected = "female",
      keep_na = TRUE
    ),
    teal_slice(
      dataname = "mae", varname = "ARRAY_TYPE", selected = "",
      keep_na = TRUE, experiment = "RPPAArray", arg = "subset"
    )
  )

  # set initial filter state
  set_filter_state(datasets, filter = fs)

  # get filter state
  get_filter_state(datasets)

  # modify filter state
  set_filter_state(
    datasets,
    teal_slices(
      teal_slice(dataname = "mae", varname = "years_to_birth", selected = c(40, 60))
    )
  )

  # remove specific filters
  remove_filter_state(
    datasets,
    teal_slices(
      teal_slice(dataname = "mae", varname = "years_to_birth"),
      teal_slice(dataname = "mae", varname = "vital_status")
    )
  )

  # remove all states
  clear_filter_states(datasets)
}

</code></pre>

<hr>
<h2 id='FilteredData'>Class to encapsulate filtered datasets</h2><span id='topic+FilteredData'></span>

<h3>Description</h3>

<p>Manages filtering of all datasets in the application or module.
</p>


<h3>Details</h3>

<p>The main purpose of this class is to provide a collection of reactive datasets,
each dataset having a filter state that determines how it is filtered.
</p>
<p>For each dataset, <code>get_filter_expr</code> returns the call to filter the dataset according
to the filter state. The data itself can be obtained through <code>get_data</code>.
</p>
<p>The datasets are filtered lazily, i.e. only when requested / needed in a <code>shiny</code> app.
</p>
<p>By design, any <code>dataname</code> set through <code>set_dataset</code> cannot be removed because
other code may already depend on it. As a workaround, the underlying
data can be set to <code>NULL</code>.
</p>
<p>The class currently supports variables of the following types within datasets:
</p>

<ul>
<li> <p><code>choices</code>: variable of type <code>factor</code>, e.g. <code>ADSL$COUNTRY</code>, <code>iris$Species</code>
zero or more options can be selected, when the variable is a factor
</p>
</li>
<li> <p><code>logical</code>: variable of type <code>logical</code>, e.g. <code>ADSL$TRT_FLAG</code>
exactly one option must be selected, <code>TRUE</code> or <code>FALSE</code>
</p>
</li>
<li> <p><code>ranges</code>: variable of type <code>numeric</code>, e.g. <code>ADSL$AGE</code>, <code>iris$Sepal.Length</code>
numerical range, a range within this range can be selected
</p>
</li>
<li> <p><code>dates</code>: variable of type <code>Date</code>, <code>POSIXlt</code>
Other variables cannot be used for filtering the data in this class.
</p>
</li></ul>

<p>Common arguments are:
</p>

<ol>
<li> <p><code>filtered</code>: whether to return a filtered result or not
</p>
</li>
<li> <p><code>dataname</code>: the name of one of the datasets in this <code>FilteredData</code> object
</p>
</li>
<li> <p><code>varname</code>: one of the columns in a dataset
</p>
</li></ol>



<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FilteredData-new"><code>FilteredData$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-datanames"><code>FilteredData$datanames()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_datalabel"><code>FilteredData$get_datalabel()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-set_available_teal_slices"><code>FilteredData$set_available_teal_slices()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_available_teal_slices"><code>FilteredData$get_available_teal_slices()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_call"><code>FilteredData$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_data"><code>FilteredData$get_data()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_join_keys"><code>FilteredData$get_join_keys()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_filter_overview"><code>FilteredData$get_filter_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_keys"><code>FilteredData$get_keys()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-set_dataset"><code>FilteredData$set_dataset()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-set_join_keys"><code>FilteredData$set_join_keys()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-get_filter_state"><code>FilteredData$get_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-format"><code>FilteredData$format()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-print"><code>FilteredData$print()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-set_filter_state"><code>FilteredData$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-remove_filter_state"><code>FilteredData$remove_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-clear_filter_states"><code>FilteredData$clear_filter_states()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-ui_filter_panel"><code>FilteredData$ui_filter_panel()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-srv_filter_panel"><code>FilteredData$srv_filter_panel()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-ui_active"><code>FilteredData$ui_active()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-srv_active"><code>FilteredData$srv_active()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-ui_add"><code>FilteredData$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-srv_add"><code>FilteredData$srv_add()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-ui_overview"><code>FilteredData$ui_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-srv_overview"><code>FilteredData$srv_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredData-clone"><code>FilteredData$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-FilteredData-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilteredData</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$new(data_objects, join_keys = teal.data::join_keys())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data_objects</code></dt><dd><p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>)
List of data objects.
Names of the list will be used as <code>dataname</code> for respective datasets.</p>
</dd>
<dt><code>join_keys</code></dt><dd><p>(<code>join_keys</code>) optional joining keys, see <code><a href="teal.data.html#topic+join_keys">teal.data::join_keys()</a></code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilteredData-datanames"></a>



<h4>Method <code>datanames()</code></h4>

<p>Gets <code>datanames</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$datanames()</pre></div>



<h5>Details</h5>

<p>The <code>datanames</code> are returned in the order in which they must be evaluated (in case of dependencies).
</p>



<h5>Returns</h5>

<p>Character vector.
</p>


<hr>
<a id="method-FilteredData-get_datalabel"></a>



<h4>Method <code>get_datalabel()</code></h4>

<p>Gets data label for the dataset.
Useful to display in <code style="white-space: pre;">&#8288;Show R Code&#8288;</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_datalabel(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>) name of the dataset</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Character string.
</p>


<hr>
<a id="method-FilteredData-set_available_teal_slices"></a>



<h4>Method <code>set_available_teal_slices()</code></h4>

<p>Set list of external filter states available for activation.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$set_available_teal_slices(x)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>reactive</code>)
should return <code>teal_slices</code></p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>Unlike adding new filter from the column, these filters can come with some prespecified settings.
<code>teal_slices</code> are wrapped in a <code>reactive</code> so they can be updated from elsewhere in the app.
Filters passed in <code>x</code> are limited to those that can be set for this <code>FilteredData</code> object,
i.e. they have the correct <code>dataname</code> and <code>varname</code> (waived <code>teal_slice_fixed</code> as they do not have <code>varname</code>).
List is accessible in <code>ui/srv_active</code> through <code>ui/srv_available_filters</code>.
</p>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilteredData-get_available_teal_slices"></a>



<h4>Method <code>get_available_teal_slices()</code></h4>

<p>Get list of filter states available for this object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_available_teal_slices()</pre></div>



<h5>Details</h5>

<p>All <code>teal_slice</code> objects that have been created since the beginning of the app session
are stored in one <code>teal_slices</code> object. This returns a subset of that <code>teal_slices</code>,
describing filter states that can be set for this object.
</p>



<h5>Returns</h5>

<p><code>reactive</code> that returns <code>teal_slices</code>.
</p>


<hr>
<a id="method-FilteredData-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Gets a <code>call</code> to filter the dataset according to the filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>) name of the dataset</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p>It returns a <code>call</code> to filter the dataset only, assuming the
other (filtered) datasets it depends on are available.
</p>
<p>Together with <code>self$datanames()</code> which returns the datasets in the correct
evaluation order, this generates the whole filter code, see the function
<code>FilteredData$get_filter_code</code>.
</p>
<p>For the return type, note that <code>rlang::is_expression</code> returns <code>TRUE</code> on the
return type, both for base <code>R</code> expressions and calls (single expression,
capturing a function call).
</p>
<p>The filtered dataset has the name given by <code>self$filtered_dataname(dataname)</code>
</p>
<p>This can be used for the <code style="white-space: pre;">&#8288;Show R Code&#8288;</code> generation.
</p>



<h5>Returns</h5>

<p>A list of <code>call</code>s.
</p>


<hr>
<a id="method-FilteredData-get_data"></a>



<h4>Method <code>get_data()</code></h4>

<p>Gets filtered or unfiltered dataset.
</p>
<p>For <code>filtered = FALSE</code>, the original data set with <code>set_data</code> is returned including all attributes.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_data(dataname, filtered = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>) name of the dataset.</p>
</dd>
<dt><code>filtered</code></dt><dd><p>(<code>logical(1)</code>) whether to return a filtered or unfiltered dataset.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A data object, a <code>data.frame</code> or a <code>MultiAssayExperiment</code>.
</p>


<hr>
<a id="method-FilteredData-get_join_keys"></a>



<h4>Method <code>get_join_keys()</code></h4>

<p>Get join keys between two datasets.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_join_keys()</pre></div>



<h5>Returns</h5>

<p><code>join_keys</code>
</p>


<hr>
<a id="method-FilteredData-get_filter_overview"></a>



<h4>Method <code>get_filter_overview()</code></h4>

<p>Creates filter overview table to be displayed in the application.
One row is created per dataset, according to the <code>get_filter_overview</code> methods
of the contained <code>FilteredDataset</code> objects.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_filter_overview(datanames)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>datanames</code></dt><dd><p>(<code>character</code>) vector of dataset names.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A <code>data.frame</code> listing the numbers of observations in all datasets.
</p>


<hr>
<a id="method-FilteredData-get_keys"></a>



<h4>Method <code>get_keys()</code></h4>

<p>Get keys for the dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_keys(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>) name of the dataset.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Character vector of key column names.
</p>


<hr>
<a id="method-FilteredData-set_dataset"></a>



<h4>Method <code>set_dataset()</code></h4>

<p>Adds a dataset to this <code>FilteredData</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$set_dataset(data, dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>(<code>data.frame</code> or <code>MultiAssayExperiment</code>)
data to be filtered.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
the name of the <code>dataset</code> to be added to this object.</p>
</dd>
</dl>

</div>



<h5>Details</h5>

<p><code>set_dataset</code> creates a <code>FilteredDataset</code> object which keeps <code>dataset</code> for the filtering purpose.
If this data has a parent specified in the <code>join_keys</code> object stored in <code>private$join_keys</code>
then created <code>FilteredDataset</code> (child) gets linked with other <code>FilteredDataset</code> (parent).
&quot;Child&quot; dataset return filtered data then dependent on the reactive filtered data of the
&quot;parent&quot;. See more in documentation of <code>parent</code> argument in <code>DataframeFilteredDataset</code> constructor.
</p>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>


<hr>
<a id="method-FilteredData-set_join_keys"></a>



<h4>Method <code>set_join_keys()</code></h4>

<p>Set the <code>join_keys</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$set_join_keys(join_keys)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>join_keys</code></dt><dd><p>(<code>join_keys</code>), see <code><a href="teal.data.html#topic+join_keys">teal.data::join_keys()</a></code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>


<hr>
<a id="method-FilteredData-get_filter_state"></a>



<h4>Method <code>get_filter_state()</code></h4>

<p>Gets states of all contained <code>FilterState</code> objects.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$get_filter_state()</pre></div>



<h5>Returns</h5>

<p>A <code>teal_slices</code> object.
</p>


<hr>
<a id="method-FilteredData-format"></a>



<h4>Method <code>format()</code></h4>

<p>Returns a formatted string representing this <code>FilteredData</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$format(show_all = FALSE, trim_lines = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>show_all</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code>.</p>
</dd>
<dt><code>trim_lines</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>character(1)</code> the formatted string.
</p>


<hr>
<a id="method-FilteredData-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints this <code>FilteredData</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>additional arguments passed to <code>format</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilteredData-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>

<p>Sets active filter states.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilteredData-remove_filter_state"></a>



<h4>Method <code>remove_filter_state()</code></h4>

<p>Removes one or more <code>FilterState</code> from a <code>FilteredData</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$remove_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)
specifying <code>FilterState</code> objects to remove;
<code>teal_slice</code>s may contain only <code>dataname</code> and <code>varname</code>, other elements are ignored.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilteredData-clear_filter_states"></a>



<h4>Method <code>clear_filter_states()</code></h4>

<p>Remove all <code>FilterStates</code> of a <code>FilteredDataset</code> or all <code>FilterStates</code> of a <code>FilteredData</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$clear_filter_states(datanames = self$datanames(), force = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>datanames</code></dt><dd><p>(<code>character</code>)
names of datasets for which to remove all filter states.
Defaults to all datasets in this <code>FilteredData</code> object.</p>
</dd>
<dt><code>force</code></dt><dd><p>(<code>logical(1)</code>)
flag specifying whether to include anchored filter states.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilteredData-ui_filter_panel"></a>



<h4>Method <code>ui_filter_panel()</code></h4>

<p>top-level <code>shiny</code> module for the filter panel in the <code>teal</code> app.
Contains 1) filter overview panel, 2) filter active panel, and 3) add filters panel.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$ui_filter_panel(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-FilteredData-srv_filter_panel"></a>



<h4>Method <code>srv_filter_panel()</code></h4>

<p>Server function for filter panel.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$srv_filter_panel(id, active_datanames = self$datanames)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
<dt><code>active_datanames</code></dt><dd><p>(<code>function</code> or <code>reactive</code>)
returning <code>datanames</code> that should be shown on the filter panel.
Must be a subset of the <code>datanames</code> in this <code>FilteredData</code>.
If the function returns <code>NULL</code> (as opposed to <code>character(0)</code>),
the filter panel will be hidden.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilteredData-ui_active"></a>



<h4>Method <code>ui_active()</code></h4>

<p>Server module responsible for displaying active filters.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$ui_active(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-FilteredData-srv_active"></a>



<h4>Method <code>srv_active()</code></h4>

<p>Server module responsible for displaying active filters.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$srv_active(id, active_datanames = self$datanames)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
<dt><code>active_datanames</code></dt><dd><p>(<code>reactive</code>)
defining subset of <code>self$datanames()</code> to be displayed.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilteredData-ui_add"></a>



<h4>Method <code>ui_add()</code></h4>

<p>Server module responsible for displaying drop-downs with variables to add a filter.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-FilteredData-srv_add"></a>



<h4>Method <code>srv_add()</code></h4>

<p>Server module responsible for displaying drop-downs with variables to add a filter.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$srv_add(id, active_datanames = reactive(self$datanames()))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
<dt><code>active_datanames</code></dt><dd><p>(<code>reactive</code>)
defining subset of <code>self$datanames()</code> to be displayed.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilteredData-ui_overview"></a>



<h4>Method <code>ui_overview()</code></h4>

<p>Creates the UI definition for the module showing counts for each dataset
contrasting the filtered to the full unfiltered dataset.
</p>
<p>Per dataset, it displays
the number of rows/observations in each dataset,
the number of unique subjects.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$ui_overview(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilteredData-srv_overview"></a>



<h4>Method <code>srv_overview()</code></h4>

<p>Server function to display the number of records in the filtered and unfiltered
data.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$srv_overview(id, active_datanames = self$datanames)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
<dt><code>active_datanames</code></dt><dd><p>(<code>reactive</code>)
returning <code>datanames</code> that should be shown on the filter panel,
must be a subset of the <code>datanames</code> argument provided to <code>ui_filter_panel</code>;
if the function returns <code>NULL</code> (as opposed to <code>character(0)</code>), the filter
panel will be hidden.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilteredData-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredData$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='FilteredDataset'><code>FilteredDataset</code> <code>R6</code> class</h2><span id='topic+FilteredDataset'></span>

<h3>Description</h3>

<p><code>FilteredDataset</code> is a class which renders/controls <code>FilterStates</code>(s)
Each <code>FilteredDataset</code> contains <code>filter_states</code> field - a <code>list</code> which contains one
(<code>data.frame</code>) or multiple (<code>MultiAssayExperiment</code>) <code>FilterStates</code> objects.
Each <code>FilterStates</code> is responsible for one filter/subset expression applied for specific
components of the dataset.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FilteredDataset-new"><code>FilteredDataset$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-format"><code>FilteredDataset$format()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-print"><code>FilteredDataset$print()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-clear_filter_states"><code>FilteredDataset$clear_filter_states()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_call"><code>FilteredDataset$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_filter_state"><code>FilteredDataset$get_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-set_filter_state"><code>FilteredDataset$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_filter_count"><code>FilteredDataset$get_filter_count()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_dataname"><code>FilteredDataset$get_dataname()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_dataset"><code>FilteredDataset$get_dataset()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_filter_overview"><code>FilteredDataset$get_filter_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_keys"><code>FilteredDataset$get_keys()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-get_dataset_label"><code>FilteredDataset$get_dataset_label()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-ui_active"><code>FilteredDataset$ui_active()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-srv_active"><code>FilteredDataset$srv_active()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-ui_add"><code>FilteredDataset$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-srv_add"><code>FilteredDataset$srv_add()</code></a>
</p>
</li>
<li> <p><a href="#method-FilteredDataset-clone"><code>FilteredDataset$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-FilteredDataset-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initializes this <code>FilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$new(
  dataset,
  dataname,
  keys = character(0),
  label = attr(dataset, "label")
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataset</code></dt><dd><p>any object</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
syntactically valid name given to the dataset.</p>
</dd>
<dt><code>keys</code></dt><dd><p>(<code>character</code>)
optional vector of primary key column names.</p>
</dd>
<dt><code>label</code></dt><dd><p>(<code>character(1)</code>)
label to describe the dataset.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>FilteredDataset</code>, invisibly.
</p>


<hr>
<a id="method-FilteredDataset-format"></a>



<h4>Method <code>format()</code></h4>

<p>Returns a formatted string representing this <code>FilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$format(show_all = FALSE, trim_lines = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>show_all</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code>.</p>
</dd>
<dt><code>trim_lines</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The formatted character string.
</p>


<hr>
<a id="method-FilteredDataset-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints this <code>FilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>additional arguments passed to <code>format</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilteredDataset-clear_filter_states"></a>



<h4>Method <code>clear_filter_states()</code></h4>

<p>Removes all filter items applied to this dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$clear_filter_states(force = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>force</code></dt><dd><p>(<code>logical(1)</code>)
flag specifying whether to include anchored filter states.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilteredDataset-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Gets a filter expression.
</p>
<p>This function returns filter calls equivalent to selected items
within each of <code>filter_states</code>. Configuration of the calls is constant and
depends on <code>filter_states</code> type and order which are set during initialization.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_call(sid = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>sid</code></dt><dd><p>(<code>character</code>)
when specified, the method returns code containing conditions calls of
<code>FilterState</code> objects with <code>sid</code> different to this <code>sid</code> argument.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Either a <code>list</code> of filter <code>call</code>s, or <code>NULL</code>.
</p>


<hr>
<a id="method-FilteredDataset-get_filter_state"></a>



<h4>Method <code>get_filter_state()</code></h4>

<p>Gets states of all contained <code>FilterState</code> objects.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_filter_state()</pre></div>



<h5>Returns</h5>

<p>A <code>teal_slices</code> object.
</p>


<hr>
<a id="method-FilteredDataset-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>

<p>Set filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Virtual method, returns nothing and raises error.
</p>


<hr>
<a id="method-FilteredDataset-get_filter_count"></a>



<h4>Method <code>get_filter_count()</code></h4>

<p>Gets the number of <code>FilterState</code> objects in all <code>FilterStates</code> in this <code>FilteredDataset</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_filter_count()</pre></div>



<h5>Returns</h5>

<p><code>integer(1)</code>
</p>


<hr>
<a id="method-FilteredDataset-get_dataname"></a>



<h4>Method <code>get_dataname()</code></h4>

<p>Gets the name of the dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_dataname()</pre></div>



<h5>Returns</h5>

<p>A character string.
</p>


<hr>
<a id="method-FilteredDataset-get_dataset"></a>



<h4>Method <code>get_dataset()</code></h4>

<p>Gets the dataset object in this <code>FilteredDataset</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_dataset(filtered = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>filtered</code></dt><dd><p>(<code>logical(1)</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>The stored dataset. If <code>data.frame</code> or <code>MultiAssayExperiment</code>,
either raw or as a reactive with current filters applied (depending on <code>filtered</code>).
</p>


<hr>
<a id="method-FilteredDataset-get_filter_overview"></a>



<h4>Method <code>get_filter_overview()</code></h4>

<p>Get filter overview of a dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_filter_overview()</pre></div>



<h5>Returns</h5>

<p>Virtual method, returns nothing and raises an error.
</p>


<hr>
<a id="method-FilteredDataset-get_keys"></a>



<h4>Method <code>get_keys()</code></h4>

<p>Gets the key columns for this dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_keys()</pre></div>



<h5>Returns</h5>

<p>Character vector of variable names
</p>


<hr>
<a id="method-FilteredDataset-get_dataset_label"></a>



<h4>Method <code>get_dataset_label()</code></h4>

<p>Gets the dataset label.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$get_dataset_label()</pre></div>



<h5>Returns</h5>

<p>Character string.
</p>


<hr>
<a id="method-FilteredDataset-ui_active"></a>



<h4>Method <code>ui_active()</code></h4>

<p><code>shiny</code> module containing active filters for a dataset, along with a title and a remove button.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$ui_active(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-FilteredDataset-srv_active"></a>



<h4>Method <code>srv_active()</code></h4>

<p>Server module for a dataset active filters.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$srv_active(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilteredDataset-ui_add"></a>



<h4>Method <code>ui_add()</code></h4>

<p>UI module to add filter variable for this dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Virtual method, returns nothing and raises error.
</p>


<hr>
<a id="method-FilteredDataset-srv_add"></a>



<h4>Method <code>srv_add()</code></h4>

<p>Server module to add filter variable for this dataset.
For this class <code>srv_add</code> calls multiple modules
of the same name from <code>FilterStates</code> as <code>MAEFilteredDataset</code>
contains one <code>FilterStates</code> object for <code>colData</code> and one for each experiment.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$srv_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilteredDataset-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilteredDataset$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='FilterPanelAPI'>Class to encapsulate the API of the filter panel of a teal app</h2><span id='topic+FilterPanelAPI'></span>

<h3>Description</h3>

<p>An API class for managing filter states in a teal application's filter panel.
</p>


<h3>Details</h3>

<p>The purpose of this class is to encapsulate the API of the filter panel in a
new class <code>FilterPanelAPI</code> so that it can be passed and used in the server
call of any module instead of passing the whole <code>FilteredData</code> object.
</p>
<p>This class is supported by methods to set, get, remove filter states in the
filter panel API.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FilterPanelAPI-new"><code>FilterPanelAPI$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterPanelAPI-get_filter_state"><code>FilterPanelAPI$get_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterPanelAPI-set_filter_state"><code>FilterPanelAPI$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterPanelAPI-remove_filter_state"><code>FilterPanelAPI$remove_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterPanelAPI-clear_filter_states"><code>FilterPanelAPI$clear_filter_states()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterPanelAPI-clone"><code>FilterPanelAPI$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-FilterPanelAPI-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterPanelAPI</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterPanelAPI$new(datasets)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>datasets</code></dt><dd><p>(<code>FilteredData</code>)</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilterPanelAPI-get_filter_state"></a>



<h4>Method <code>get_filter_state()</code></h4>

<p>Gets the reactive values from the active <code>FilterState</code> objects of the <code>FilteredData</code> object.
</p>
<p>Gets all active filters in the form of a nested list.
The output list is a compatible input to <code>set_filter_state</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterPanelAPI$get_filter_state()</pre></div>



<h5>Returns</h5>

<p><code>list</code> with named elements corresponding to <code>FilteredDataset</code> objects with active filters.
</p>


<hr>
<a id="method-FilterPanelAPI-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>

<p>Sets active filter states.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterPanelAPI$set_filter_state(filter)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>filter</code></dt><dd><p>(<code>teal_slices</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterPanelAPI-remove_filter_state"></a>



<h4>Method <code>remove_filter_state()</code></h4>

<p>Remove one or more <code>FilterState</code> of a <code>FilteredDataset</code> in the <code>FilteredData</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterPanelAPI$remove_filter_state(filter)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>filter</code></dt><dd><p>(<code>teal_slices</code>)
specifying <code>FilterState</code> objects to remove;
<code>teal_slice</code>s may contain only <code>dataname</code> and <code>varname</code>, other elements are ignored</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterPanelAPI-clear_filter_states"></a>



<h4>Method <code>clear_filter_states()</code></h4>

<p>Remove all <code>FilterStates</code> of the <code>FilteredData</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterPanelAPI$clear_filter_states(datanames)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>datanames</code></dt><dd><p>(<code>character</code>)
<code>datanames</code> to remove their <code>FilterStates</code>;
omit to remove all <code>FilterStates</code> in the <code>FilteredData</code> object</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterPanelAPI-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterPanelAPI$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)

fd &lt;- init_filtered_data(list(iris = iris))
fpa &lt;- FilterPanelAPI$new(fd)

# get the actual filter state --&gt; empty named list
isolate(fpa$get_filter_state())

# set a filter state
set_filter_state(
  fpa,
  teal_slices(
    teal_slice(dataname = "iris", varname = "Species", selected = "setosa", keep_na = TRUE)
  )
)

# get the actual filter state --&gt; named list with filters
isolate(fpa$get_filter_state())

# remove all_filter_states
fpa$clear_filter_states()

# get the actual filter state --&gt; empty named list
isolate(fpa$get_filter_state())

</code></pre>

<hr>
<h2 id='FilterState'><code>FilterState</code> abstract class</h2><span id='topic+FilterState'></span>

<h3>Description</h3>

<p>Abstract class to encapsulate single filter state.
</p>


<h3>Details</h3>

<p>This class is responsible for managing a single filter item within a <code>FilteredData</code> object
and outputs a condition call (logical predicate) for subsetting one variable.
Filter states depend on the variable type:
(<code>logical</code>, <code>integer</code>, <code>numeric</code>, <code>character</code>, <code>factor</code>, <code>Date</code>, <code>POSIXct</code>, <code>POSIXlt</code>)
and <code>FilterState</code> subclasses exist that correspond to those types.
</p>

<ul>
<li> <p><code>logical</code>: <code>class = LogicalFilterState</code>
</p>
</li>
<li> <p><code>integer</code>: <code>class = RangeFilterState</code>
</p>
</li>
<li> <p><code>numeric</code>: <code>class = RangeFilterState</code>
</p>
</li>
<li> <p><code>character</code>: <code>class = ChoicesFilterState</code>
</p>
</li>
<li> <p><code>factor</code>: <code>class = ChoicesFilterState</code>
</p>
</li>
<li> <p><code>Date</code>: <code>class = DateFilterState</code>
</p>
</li>
<li> <p><code>POSIXct</code>, <code>POSIXlt</code>: <code>class = DatetimeFilterState</code>
</p>
</li>
<li><p> all <code>NA</code> entries: <code>class: FilterState</code>, cannot be filtered
</p>
</li>
<li><p> default: <code>FilterState</code>, cannot be filtered
</p>
</li></ul>

<p>Each variable's filter state is an <code>R6</code> object keeps the variable that is filtered,
a <code>teal_slice</code> object that describes the filter state, as well as a <code>shiny</code> module (UI and server)
that allows the user to alter the filter state.
Changes to the filter state that cause some observations to be omitted
trigger the <code>get_call</code> method and every <code>R</code> function call up in the reactive chain.
</p>


<h3>Modifying state</h3>

<p>Modifying a <code>FilterState</code> object is possible in three scenarios:
</p>

<ul>
<li><p> In an interactive session, by passing an appropriate <code>teal_slice</code> to the <code>set_state</code> method.
</p>
</li>
<li><p> In a running application, by changing appropriate inputs.
</p>
</li>
<li><p> In a running application, by using <a href="#topic+filter_state_api">filter_state_api</a> which directly uses
<code>set_state</code> method of the <code>FilterState</code> object.
</p>
</li></ul>



<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FilterState-new"><code>FilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-format"><code>FilterState$format()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-print"><code>FilterState$print()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-set_state"><code>FilterState$set_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-get_state"><code>FilterState$get_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-get_call"><code>FilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-server"><code>FilterState$server()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-ui"><code>FilterState$ui()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-destroy_observers"><code>FilterState$destroy_observers()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterState-clone"><code>FilterState$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-FilterState-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterState</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$new(
  x,
  x_reactive = reactive(NULL),
  slice,
  extract_type = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>vector</code>)
variable to be filtered.</p>
</dd>
<dt><code>x_reactive</code></dt><dd><p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
<dt><code>extract_type</code></dt><dd><p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>FilterState</code>, invisibly.
</p>


<hr>
<a id="method-FilterState-format"></a>



<h4>Method <code>format()</code></h4>

<p>Returns a formatted string representing this <code>FilterState</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$format(show_all = FALSE, trim_lines = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>show_all</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code></p>
</dd>
<dt><code>trim_lines</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>character(1)</code> the formatted string
</p>


<hr>
<a id="method-FilterState-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints this <code>FilterState</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>additional arguments</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilterState-set_state"></a>



<h4>Method <code>set_state()</code></h4>

<p>Sets mutable parameters of the filter state.
</p>

<ul>
<li> <p><code>fixed</code> state is prevented from changing state
</p>
</li>
<li> <p><code>anchored</code> state is prevented from removing state
</p>
</li></ul>



<h5>Usage</h5>

<div class="r"><pre>FilterState$set_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slice</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>self</code> invisibly
</p>


<hr>
<a id="method-FilterState-get_state"></a>



<h4>Method <code>get_state()</code></h4>

<p>Returns a complete description of the filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$get_state()</pre></div>



<h5>Returns</h5>

<p>A <code>teal_slice</code> object.
</p>


<hr>
<a id="method-FilterState-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Returns reproducible condition call for current selection relevant
for selected variable type.
Method is using internal reactive values which makes it reactive
and must be executed in reactive or isolated context.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$get_call()</pre></div>


<hr>
<a id="method-FilterState-server"></a>



<h4>Method <code>server()</code></h4>

<p><code>shiny</code> module server.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$server(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Reactive expression signaling that remove button has been clicked.
</p>


<hr>
<a id="method-FilterState-ui"></a>



<h4>Method <code>ui()</code></h4>

<p><code>shiny</code> UI module.
The UI for this class contains simple message stating that it is not supported.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$ui(id, parent_id = "cards")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
<dt><code>parent_id</code></dt><dd><p>(<code>character(1)</code>) id of the <code>FilterStates</code> card container</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilterState-destroy_observers"></a>



<h4>Method <code>destroy_observers()</code></h4>

<p>Destroy observers stored in <code>private$observers</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$destroy_observers()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterState-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='FilterStateExpr'><code>FilterStateExpr</code> <code>R6</code> class</h2><span id='topic+FilterStateExpr'></span>

<h3>Description</h3>

<p>Sister class to <code>FilterState</code> that handles arbitrary filter expressions.
</p>


<h3>Details</h3>

<p>Creates a filter state around a predefined condition call (logical predicate).
The condition call is independent of the data
and the filter card allows no interaction (the filter is always fixed).
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FilterStateExpr-new"><code>FilterStateExpr$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-format"><code>FilterStateExpr$format()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-print"><code>FilterStateExpr$print()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-get_state"><code>FilterStateExpr$get_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-set_state"><code>FilterStateExpr$set_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-get_call"><code>FilterStateExpr$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-destroy_observers"><code>FilterStateExpr$destroy_observers()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-server"><code>FilterStateExpr$server()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-ui"><code>FilterStateExpr$ui()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStateExpr-clone"><code>FilterStateExpr$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-FilterStateExpr-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterStateExpr</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$new(slice)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice_expr</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>FilterStateExpr</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-format"></a>



<h4>Method <code>format()</code></h4>

<p>Returns a formatted string representing this <code>FilterStateExpr</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$format(show_all = FALSE, trim_lines = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>show_all</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code></p>
</dd>
<dt><code>trim_lines</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slice</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>character(1)</code> the formatted string
</p>


<hr>
<a id="method-FilterStateExpr-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints this <code>FilterStateExpr</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>arguments passed to the <code>format</code> method</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-get_state"></a>



<h4>Method <code>get_state()</code></h4>

<p>Returns a complete description of this filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$get_state()</pre></div>



<h5>Returns</h5>

<p>A <code>teal_slice</code> object.
</p>


<hr>
<a id="method-FilterStateExpr-set_state"></a>



<h4>Method <code>set_state()</code></h4>

<p>Does nothing. Exists for compatibility.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$set_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slice</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>self</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Get reproducible call.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>(<code>ignored</code>) for a consistency with <code>FilterState</code>
</p>
<p>Returns reproducible condition call for current selection relevant
for selected variable type.
Method is using internal reactive values which makes it reactive
and must be executed in reactive or isolated context.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>call</code> or <code>NULL</code>
</p>


<hr>
<a id="method-FilterStateExpr-destroy_observers"></a>



<h4>Method <code>destroy_observers()</code></h4>

<p>Destroy observers stored in <code>private$observers</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$destroy_observers()</pre></div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterStateExpr-server"></a>



<h4>Method <code>server()</code></h4>

<p><code>shiny</code> module server.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$server(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Reactive expression signaling that the remove button has been clicked.
</p>


<hr>
<a id="method-FilterStateExpr-ui"></a>



<h4>Method <code>ui()</code></h4>

<p><code>shiny</code> module UI.
The UI for this class contains simple message stating that it is not supported.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$ui(id, parent_id = "cards")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
<dt><code>parent_id</code></dt><dd><p>(<code>character(1)</code>)
id of the <code>FilterStates</code> card container.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilterStateExpr-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStateExpr$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='FilterStates'><code>FilterStates</code> <code>R6</code> class</h2><span id='topic+FilterStates'></span>

<h3>Description</h3>

<p>Abstract class that manages adding and removing <code>FilterState</code> objects
and builds a <em>subset expression</em>.
</p>
<p>A <code>FilterStates</code> object tracks all condition calls
(logical predicates that limit observations) associated with a given dataset
and composes them into a single reproducible <code>R</code> expression
that will assign a subset of the original data to a new variable.
This expression is hereafter referred to as <em>subset expression</em>.
</p>
<p>The <em>subset expression</em> is constructed differently for different
classes of the underlying data object and <code>FilterStates</code> sub-classes.
Currently implemented for <code>data.frame</code>, <code>matrix</code>,
<code>SummarizedExperiment</code>, and <code>MultiAssayExperiment</code>.
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-FilterStates-new"><code>FilterStates$new()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-format"><code>FilterStates$format()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-get_call"><code>FilterStates$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-print"><code>FilterStates$print()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-remove_filter_state"><code>FilterStates$remove_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-get_filter_state"><code>FilterStates$get_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-set_filter_state"><code>FilterStates$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-clear_filter_states"><code>FilterStates$clear_filter_states()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-ui_active"><code>FilterStates$ui_active()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-srv_active"><code>FilterStates$srv_active()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-ui_add"><code>FilterStates$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-srv_add"><code>FilterStates$srv_add()</code></a>
</p>
</li>
<li> <p><a href="#method-FilterStates-clone"><code>FilterStates$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-FilterStates-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initializes <code>FilterStates</code> object by setting
<code>dataname</code>, and <code>datalabel</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$new(
  data,
  data_reactive = function(sid = "") NULL,
  dataname,
  datalabel = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>(<code>data.frame</code> or <code>MultiAssayExperiment</code> or <code>SummarizedExperiment</code> or <code>matrix</code>)
the <code>R</code> object which <code>subset</code> function is applied on.</p>
</dd>
<dt><code>data_reactive</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function(sid)&#8288;</code>)
should return an object of the same type as <code>data</code> object or <code>NULL</code>.
This object is needed for the <code>FilterState</code> counts being updated
on a change in filters. If function returns <code>NULL</code> then filtered counts are not shown.
Function has to have <code>sid</code> argument being a character.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
name of the dataset, used in the subset expression.
Passed to the function argument attached to this <code>FilterStates</code>.</p>
</dd>
<dt><code>datalabel</code></dt><dd><p>(<code>character(1)</code>)
optional text label.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>FilterStates</code>, invisibly.
</p>


<hr>
<a id="method-FilterStates-format"></a>



<h4>Method <code>format()</code></h4>

<p>Returns a formatted string representing this <code>FilterStates</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$format(show_all = FALSE, trim_lines = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>show_all</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slices</code></p>
</dd>
<dt><code>trim_lines</code></dt><dd><p>(<code>logical(1)</code>) passed to <code>format.teal_slices</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>character(1)</code> the formatted string
</p>


<hr>
<a id="method-FilterStates-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Filter call
</p>
<p>Builds <em>subset expression</em> from condition calls generated by <code>FilterState</code>.
The <code>lhs</code> of the expression is a <code>dataname_prefixed</code>, where word prefixed refers to
situation when call is evaluated on elements of the original data, for example <code>dataname[[x]]</code>.
By default <code>dataname_prefixed = dataname</code> and it's not alterable through class methods.
Customization of <code>private$dataname_prefixed</code> is done through inheriting classes.
</p>
<p>The <code>rhs</code> is a call to <code>private$fun</code> with following arguments:
</p>

<ul>
<li> <p><code>dataname_prefixed</code>
</p>
</li>
<li><p> list of logical expressions generated by <code>FilterState</code> objects
stored in <code>private$state_list</code>. Each logical predicate is combined with <code>&amp;</code> operator.
Variables in these logical expressions by default are not prefixed but this can be changed
by setting <code>private$extract_type</code> (change in the similar way as <code>dataname_prefixed</code>)
Possible call outputs depending on a custom fields/options:
</p>
</li></ul>

<div class="sourceCode"><pre># default
dataname &lt;- subset(dataname, col == "x")

# fun = dplyr::filter
dataname &lt;- dplyr::filter(dataname, col == "x")

# fun = MultiAssayExperiment::subsetByColData; extract_type = "list"
dataname &lt;- MultiAssayExperiment::subsetByColData(dataname, dataname$col == "x")

# teal_slice objects having `arg = "subset"` and `arg = "select"`
dataname &lt;- subset(dataname, subset = row_col == "x", select = col_col == "x")

# dataname = dataname[[element]]
dataname[[element]] &lt;- subset(dataname[[element]], subset = col == "x")
</pre></div>
<p>If no filters are applied, <code>NULL</code> is returned to avoid no-op calls such as <code>dataname &lt;- dataname</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$get_call(sid = "")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>sid</code></dt><dd><p>(<code>character</code>)
when specified then method returns code containing condition calls (logical predicates) of
<code>FilterState</code> objects which <code>"sid"</code> attribute is different than this <code>sid</code> argument.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>call</code> or <code>NULL</code>
</p>


<hr>
<a id="method-FilterStates-print"></a>



<h4>Method <code>print()</code></h4>

<p>Prints this <code>FilterStates</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$print(...)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>...</code></dt><dd><p>additional arguments passed to <code>format</code>.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-FilterStates-remove_filter_state"></a>



<h4>Method <code>remove_filter_state()</code></h4>

<p>Remove one or more <code>FilterState</code>s from the <code>state_list</code> along with their UI elements.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$remove_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)
specifying <code>FilterState</code> objects to remove;
<code>teal_slice</code>s may contain only <code>dataname</code> and <code>varname</code>, other elements are ignored</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterStates-get_filter_state"></a>



<h4>Method <code>get_filter_state()</code></h4>

<p>Gets reactive values from active <code>FilterState</code> objects.
</p>
<p>Get active filter state from <code>FilterState</code> objects stored in <code>state_list</code>(s).
The output is a list compatible with input to <code>self$set_filter_state</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$get_filter_state()</pre></div>



<h5>Returns</h5>

<p>Object of class <code>teal_slices</code>.
</p>


<hr>
<a id="method-FilterStates-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>

<p>Sets active <code>FilterState</code> objects.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Function that raises an error.
</p>


<hr>
<a id="method-FilterStates-clear_filter_states"></a>



<h4>Method <code>clear_filter_states()</code></h4>

<p>Remove all <code>FilterState</code> objects from this <code>FilterStates</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$clear_filter_states(force = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>force</code></dt><dd><p>(<code>logical(1)</code>)
flag specifying whether to include anchored filter states.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-FilterStates-ui_active"></a>



<h4>Method <code>ui_active()</code></h4>

<p><code>shiny</code> UI definition that stores <code>FilterState</code> UI elements.
Populated with elements created with <code>renderUI</code> in the module server.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$ui_active(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-FilterStates-srv_active"></a>



<h4>Method <code>srv_active()</code></h4>

<p><code>shiny</code> server module.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$srv_active(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilterStates-ui_add"></a>



<h4>Method <code>ui_add()</code></h4>

<p><code>shiny</code> UI module to add filter variable.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-FilterStates-srv_add"></a>



<h4>Method <code>srv_add()</code></h4>

<p><code>shiny</code> server module to add filter variable.
</p>
<p>This module controls available choices to select as a filter variable.
Once selected, a variable is removed from available choices.
Removing a filter variable adds it back to available choices.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$srv_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>.
</p>


<hr>
<a id="method-FilterStates-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>FilterStates$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='format_time'>Format <code>POSIXt</code> for storage</h2><span id='topic+format_time'></span>

<h3>Description</h3>

<p>Convert <code>POSIXt</code> date time object to character representation in UTC time zone.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_time(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_time_+3A_x">x</code></td>
<td>
<p>(<code>POSIXt</code>) vector of date time values or anything else</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Date times are stored as string representations expressed in the UTC time zone.
The storage format is <code style="white-space: pre;">&#8288;YYYY-MM-DD HH:MM:SS&#8288;</code>.
</p>


<h3>Value</h3>

<p>If <code>x</code> is of class <code>POSIXt</code>, a character vector, otherwise <code>x</code> itself.
</p>

<hr>
<h2 id='get_default_slice_id'>Default <code>teal_slice</code> id</h2><span id='topic+get_default_slice_id'></span>

<h3>Description</h3>

<p>Create a slice id if none provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_default_slice_id(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_default_slice_id_+3A_x">x</code></td>
<td>
<p>(<code>teal_slice</code> or <code>list</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function returns a default <code>id</code> for a <code>teal_slice</code> object which needs
to be distinct from other <code>teal_slice</code> objects created for any
<code>FilterStates</code> object. Returned <code>id</code> can be treated as a location of
a vector on which <code>FilterState</code> is built:
</p>

<ul>
<li><p> for a <code>data.frame</code> <code>id</code> concatenates <code>dataname</code> and <code>varname</code>.
</p>
</li>
<li><p> for a <code>MultiAssayExperiment</code> <code>id</code> concatenates <code>dataname</code>, <code>varname</code>,
<code>experiment</code> and <code>arg</code>, so that one can add <code>teal_slice</code> for a <code>varname</code>
which exists in multiple <code>SummarizedExperiment</code>s or exists in both <code>colData</code>
and <code>rowData</code> of given experiment.
For such a vector <code>teal.slice</code> doesn't allow to activate more than one filters.
In case of <code>teal_slice_expr</code> <code>id</code> is mandatory and must be unique.
</p>
</li></ul>



<h3>Value</h3>

<p>(<code>character(1)</code>) <code>id</code> for a <code>teal_slice</code> object.
</p>

<hr>
<h2 id='get_filter_expr'>Gets filter expression for multiple <code>datanames</code> taking into account its order.</h2><span id='topic+get_filter_expr'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>To be used in <code style="white-space: pre;">&#8288;Show R Code&#8288;</code> button.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_filter_expr(datasets, datanames = datasets$datanames())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_filter_expr_+3A_datasets">datasets</code></td>
<td>
<p>(<code>FilteredData</code>)</p>
</td></tr>
<tr><td><code id="get_filter_expr_+3A_datanames">datanames</code></td>
<td>
<p>(<code>character</code>) vector of dataset names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string containing all subset expressions.
</p>

<hr>
<h2 id='get_supported_filter_varnames'>Gets supported filterable variable names</h2><span id='topic+get_supported_filter_varnames'></span>

<h3>Description</h3>

<p>Gets filterable variable names from a given object. The names match variables
of classes in an vector <code>teal.slice:::.filterable_class</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_supported_filter_varnames(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_supported_filter_varnames_+3A_data">data</code></td>
<td>
<p>the <code>R</code> object containing elements which class can be checked through <code>vapply</code> or <code>apply</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> vector of variable names.
</p>

<hr>
<h2 id='include_css_files'>Include <code>CSS</code> files from <code style="white-space: pre;">&#8288;/inst/css/&#8288;</code> package directory to application header</h2><span id='topic+include_css_files'></span>

<h3>Description</h3>

<p><code>system.file</code> should not be used to access files in other packages, it does
not work with <code>devtools</code>. Therefore, we redefine this method in each package
as needed. Thus, we do not export this method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_css_files(pattern = "*")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_css_files_+3A_pattern">pattern</code></td>
<td>
<p>(<code>character</code>) pattern of files to be included</p>
</td></tr>
</table>


<h3>Value</h3>

<p>HTML code that includes <code>CSS</code> files
</p>

<hr>
<h2 id='include_js_files'>Include <code>JS</code> files from <code style="white-space: pre;">&#8288;/inst/js/&#8288;</code> package directory to application header</h2><span id='topic+include_js_files'></span>

<h3>Description</h3>

<p><code>system.file</code> should not be used to access files in other packages, it does
not work with <code>devtools</code>. Therefore, we redefine this method in each package
as needed. Thus, we do not export this method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_js_files(pattern)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_js_files_+3A_pattern">pattern</code></td>
<td>
<p>(<code>character</code>) pattern of files to be included, passed to <code>system.file</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>HTML code that includes <code>JS</code> files
</p>

<hr>
<h2 id='init_filter_state'>Initialize <code>FilterState</code></h2><span id='topic+init_filter_state'></span>

<h3>Description</h3>

<p>Initializes a <code>FilterState</code> object corresponding to the class of the filtered variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_filter_state(
  x,
  x_reactive = reactive(NULL),
  slice,
  extract_type = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_filter_state_+3A_x">x</code></td>
<td>
<p>(<code>vector</code>)
variable to be filtered.</p>
</td></tr>
<tr><td><code id="init_filter_state_+3A_x_reactive">x_reactive</code></td>
<td>
<p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</td></tr>
<tr><td><code id="init_filter_state_+3A_slice">slice</code></td>
<td>
<p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</td></tr>
<tr><td><code id="init_filter_state_+3A_extract_type">extract_type</code></td>
<td>
<p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>FilterState</code> object
</p>

<hr>
<h2 id='init_filter_state_expr'>Initialize a <code>FilterStateExpr</code> object</h2><span id='topic+init_filter_state_expr'></span>

<h3>Description</h3>

<p>Initialize a <code>FilterStateExpr</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_filter_state_expr(slice)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_filter_state_expr_+3A_slice">slice</code></td>
<td>
<p>(<code>teal_slice_expr</code>)
specifying this filter state.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>FilterStateExpr</code> object
</p>

<hr>
<h2 id='init_filter_states'>Initialize <code>FilterStates</code> object</h2><span id='topic+init_filter_states'></span>

<h3>Description</h3>

<p>Initialize <code>FilterStates</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_filter_states(
  data,
  data_reactive = reactive(NULL),
  dataname,
  datalabel = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_filter_states_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code> or <code>MultiAssayExperiment</code> or <code>SummarizedExperiment</code> or <code>matrix</code>)
object to subset.</p>
</td></tr>
<tr><td><code id="init_filter_states_+3A_data_reactive">data_reactive</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;function(sid)&#8288;</code>)
should return an object of the same type as <code>data</code> or <code>NULL</code>.
This function is needed for the <code>FilterState</code> <code>shiny</code> module to update counts if filtered data changes.
If function returns <code>NULL</code> then filtered counts are not shown.
Function has to have <code>sid</code> argument being a character which is related to <code>sid</code> argument in the <code>get_call</code> method.</p>
</td></tr>
<tr><td><code id="init_filter_states_+3A_dataname">dataname</code></td>
<td>
<p>(<code>character(1)</code>)
name of the data used in the subset expression,
passed to the function argument attached to this <code>FilterStates</code>.</p>
</td></tr>
<tr><td><code id="init_filter_states_+3A_datalabel">datalabel</code></td>
<td>
<p>(<code>character(1)</code>)
optional text label.</p>
</td></tr>
<tr><td><code id="init_filter_states_+3A_...">...</code></td>
<td>
<p>(optional)
additional arguments for specific classes: keys.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>FilterStates</code>.
</p>

<hr>
<h2 id='init_filtered_data'>Initialize <code>FilteredData</code></h2><span id='topic+init_filtered_data'></span>

<h3>Description</h3>

<p>Function creates a <code>FilteredData</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_filtered_data(x, join_keys = teal.data::join_keys(), code, check)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_filtered_data_+3A_x">x</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>) of datasets.</p>
</td></tr>
<tr><td><code id="init_filtered_data_+3A_join_keys">join_keys</code></td>
<td>
<p>(<code>join_keys</code>) see <code><a href="teal.data.html#topic+join_keys">teal.data::join_keys()</a></code>.</p>
</td></tr>
<tr><td><code id="init_filtered_data_+3A_code">code</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></p>
</td></tr>
<tr><td><code id="init_filtered_data_+3A_check">check</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>FilteredData</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datasets &lt;- init_filtered_data(list(iris = iris, mtcars = mtcars))
datasets

</code></pre>

<hr>
<h2 id='init_filtered_dataset'>Initialize <code>FilteredDataset</code></h2><span id='topic+init_filtered_dataset'></span>

<h3>Description</h3>

<p>Initializes a <code>FilteredDataset</code> object corresponding to the class of the filtered dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_filtered_dataset(
  dataset,
  dataname,
  keys = character(0),
  parent_name = character(0),
  parent = reactive(dataset),
  join_keys = character(0),
  label = attr(dataset, "label")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_filtered_dataset_+3A_dataset">dataset</code></td>
<td>
<p>any object</p>
</td></tr>
<tr><td><code id="init_filtered_dataset_+3A_dataname">dataname</code></td>
<td>
<p>(<code>character(1)</code>)
syntactically valid name given to the dataset.</p>
</td></tr>
<tr><td><code id="init_filtered_dataset_+3A_keys">keys</code></td>
<td>
<p>(<code>character</code>)
optional vector of primary key column names.</p>
</td></tr>
<tr><td><code id="init_filtered_dataset_+3A_parent_name">parent_name</code></td>
<td>
<p>(<code>character(1)</code>)
name of the parent dataset.</p>
</td></tr>
<tr><td><code id="init_filtered_dataset_+3A_parent">parent</code></td>
<td>
<p>(<code>reactive</code>)
that returns a filtered <code>data.frame</code> from other <code>FilteredDataset</code> named <code>parent_name</code>.
Passing <code>parent</code> results in a <code>reactive</code> link that causes re-filtering of this <code>dataset</code>
based on the changes in <code>parent</code>.</p>
</td></tr>
<tr><td><code id="init_filtered_dataset_+3A_join_keys">join_keys</code></td>
<td>
<p>(<code>character</code>)
vector of names of columns in this dataset to join with <code>parent</code> dataset.
If column names in the parent do not match these, they should be given as the names of this vector.</p>
</td></tr>
<tr><td><code id="init_filtered_dataset_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>)
label to describe the dataset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>FilteredDataset</code>.
</p>


<h3>Warning</h3>

<p>This function is exported to allow other packages to extend <code>teal.slice</code> but it is treated as internal.
Breaking changes may occur without warning.
We recommend consulting the package maintainer before using it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># DataframeFilteredDataset example
library(shiny)

iris_fd &lt;- init_filtered_dataset(iris, dataname = "iris")
ui &lt;- fluidPage(
  iris_fd$ui_add(id = "add"),
  iris_fd$ui_active("dataset"),
  verbatimTextOutput("call")
)
server &lt;- function(input, output, session) {
  iris_fd$srv_add(id = "add")
  iris_fd$srv_active(id = "dataset")

  output$call &lt;- renderText({
    paste(
      vapply(iris_fd$get_call(), deparse1, character(1), collapse = "\n"),
      collapse = "\n"
    )
  })
}
if (interactive()) {
  shinyApp(ui, server)
}


if (requireNamespace("MultiAssayExperiment", quietly = TRUE)) {
  # MAEFilteredDataset example
  library(shiny)

  data(miniACC, package = "MultiAssayExperiment")

  MAE_fd &lt;- init_filtered_dataset(miniACC, "MAE")
  ui &lt;- fluidPage(
    MAE_fd$ui_add(id = "add"),
    MAE_fd$ui_active("dataset"),
    verbatimTextOutput("call")
  )
  server &lt;- function(input, output, session) {
    MAE_fd$srv_add(id = "add")
    MAE_fd$srv_active(id = "dataset")
    output$call &lt;- renderText({
      paste(
        vapply(MAE_fd$get_call(), deparse1, character(1), collapse = "\n"),
        collapse = "\n"
      )
    })
  }
  if (interactive()) {
    shinyApp(ui, server)
  }
}

</code></pre>

<hr>
<h2 id='jsonify'>Convert a list to a justified <code>JSON</code> string</h2><span id='topic+jsonify'></span>

<h3>Description</h3>

<p>This function takes a list and converts it to a <code>JSON</code> string.
The resulting <code>JSON</code> string is then optionally justified to improve readability
and trimmed to easier fit in the console when printing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jsonify(x, trim_lines)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="jsonify_+3A_x">x</code></td>
<td>
<p>(<code>list</code>), possibly recursive, obtained from <code>teal_slice</code> or <code>teal_slices</code>.</p>
</td></tr>
<tr><td><code id="jsonify_+3A_trim_lines">trim_lines</code></td>
<td>
<p>(<code>logical(1)</code>) flag specifying whether to trim lines of the <code>JSON</code> string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>JSON</code> string representation of the input list.
</p>

<hr>
<h2 id='justify_json'>Justify colons in <code>JSON</code> string</h2><span id='topic+justify_json'></span>

<h3>Description</h3>

<p>This function takes a <code>JSON</code> string as input, splits it into lines, and pads element names
with spaces so that colons are justified between lines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>justify_json(json)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="justify_json_+3A_json">json</code></td>
<td>
<p>(<code>character(1)</code>) a <code>JSON</code> string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of character strings, which can be collapsed into a <code>JSON</code> string.
</p>

<hr>
<h2 id='LogicalFilterState'><code>FilterState</code> object for logical data</h2><span id='topic+LogicalFilterState'></span>

<h3>Description</h3>

<p>Manages choosing a logical state.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterState">teal.slice::FilterState</a></code> -&gt; <code>LogicalFilterState</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-LogicalFilterState-new"><code>LogicalFilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-LogicalFilterState-get_call"><code>LogicalFilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-LogicalFilterState-clone"><code>LogicalFilterState$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="destroy_observers"><a href='../../teal.slice/html/FilterState.html#method-FilterState-destroy_observers'><code>teal.slice::FilterState$destroy_observers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="format"><a href='../../teal.slice/html/FilterState.html#method-FilterState-format'><code>teal.slice::FilterState$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="get_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-get_state'><code>teal.slice::FilterState$get_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="print"><a href='../../teal.slice/html/FilterState.html#method-FilterState-print'><code>teal.slice::FilterState$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="server"><a href='../../teal.slice/html/FilterState.html#method-FilterState-server'><code>teal.slice::FilterState$server()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="set_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-set_state'><code>teal.slice::FilterState$set_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="ui"><a href='../../teal.slice/html/FilterState.html#method-FilterState-ui'><code>teal.slice::FilterState$ui()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-LogicalFilterState-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterState</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>LogicalFilterState$new(
  x,
  x_reactive = reactive(NULL),
  extract_type = character(0),
  slice
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>logical</code>)
variable to be filtered.</p>
</dd>
<dt><code>x_reactive</code></dt><dd><p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>extract_type</code></dt><dd><p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</dd>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>LogicalFilterState</code>, invisibly.
</p>


<hr>
<a id="method-LogicalFilterState-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Returns reproducible condition call for current selection.
For <code>LogicalFilterState</code> it's a <code style="white-space: pre;">&#8288;!&lt;varname&gt;&#8288;</code> or <code style="white-space: pre;">&#8288;&lt;varname&gt;&#8288;</code> and optionally <code style="white-space: pre;">&#8288;is.na(&lt;varname&gt;)&#8288;</code>
</p>


<h5>Usage</h5>

<div class="r"><pre>LogicalFilterState$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>name of data set; defaults to <code>private$get_dataname()</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>call</code>
</p>


<hr>
<a id="method-LogicalFilterState-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>LogicalFilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='MAEFilteredDataset'><code>MAEFilteredDataset</code> <code>R6</code> class</h2><span id='topic+MAEFilteredDataset'></span>

<h3>Description</h3>

<p><code>MAEFilteredDataset</code> <code>R6</code> class
</p>
<p><code>MAEFilteredDataset</code> <code>R6</code> class
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilteredDataset">teal.slice::FilteredDataset</a></code> -&gt; <code>MAEFilteredDataset</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MAEFilteredDataset-new"><code>MAEFilteredDataset$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MAEFilteredDataset-set_filter_state"><code>MAEFilteredDataset$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-MAEFilteredDataset-remove_filter_state"><code>MAEFilteredDataset$remove_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-MAEFilteredDataset-ui_add"><code>MAEFilteredDataset$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-MAEFilteredDataset-get_filter_overview"><code>MAEFilteredDataset$get_filter_overview()</code></a>
</p>
</li>
<li> <p><a href="#method-MAEFilteredDataset-clone"><code>MAEFilteredDataset$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="clear_filter_states"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-clear_filter_states'><code>teal.slice::FilteredDataset$clear_filter_states()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="format"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-format'><code>teal.slice::FilteredDataset$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_call"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_call'><code>teal.slice::FilteredDataset$get_call()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataname"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataname'><code>teal.slice::FilteredDataset$get_dataname()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset'><code>teal.slice::FilteredDataset$get_dataset()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_dataset_label"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_dataset_label'><code>teal.slice::FilteredDataset$get_dataset_label()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_filter_count"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_filter_count'><code>teal.slice::FilteredDataset$get_filter_count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_filter_state"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_filter_state'><code>teal.slice::FilteredDataset$get_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="get_keys"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-get_keys'><code>teal.slice::FilteredDataset$get_keys()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="print"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-print'><code>teal.slice::FilteredDataset$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_active"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_active'><code>teal.slice::FilteredDataset$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="srv_add"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-srv_add'><code>teal.slice::FilteredDataset$srv_add()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilteredDataset" data-id="ui_active"><a href='../../teal.slice/html/FilteredDataset.html#method-FilteredDataset-ui_active'><code>teal.slice::FilteredDataset$ui_active()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MAEFilteredDataset-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize <code>MAEFilteredDataset</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilteredDataset$new(
  dataset,
  dataname,
  keys = character(0),
  label = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataset</code></dt><dd><p>(<code>MulitiAssayExperiment</code>)
single <code>MulitiAssayExperiment</code> for which filters are rendered.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
syntactically valid name given to the dataset.</p>
</dd>
<dt><code>keys</code></dt><dd><p>(<code>character</code>)
optional vector of primary key column names.</p>
</dd>
<dt><code>label</code></dt><dd><p>(<code>character(1)</code>)
label to describe the dataset.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>MAEFilteredDataset</code>, invisibly.
</p>


<hr>
<a id="method-MAEFilteredDataset-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>

<p>Set filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilteredDataset$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-MAEFilteredDataset-remove_filter_state"></a>



<h4>Method <code>remove_filter_state()</code></h4>

<p>Remove one or more <code>FilterState</code> of a <code>MAEFilteredDataset</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilteredDataset$remove_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)
specifying <code>FilterState</code> objects to remove;
<code>teal_slice</code>s may contain only <code>dataname</code> and <code>varname</code>, other elements are ignored.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-MAEFilteredDataset-ui_add"></a>



<h4>Method <code>ui_add()</code></h4>

<p>UI module to add filter variable for this dataset.
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilteredDataset$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-MAEFilteredDataset-get_filter_overview"></a>



<h4>Method <code>get_filter_overview()</code></h4>

<p>Creates row for filter overview in the form of <br />
<code>dataname -- observations (remaining/total) -- subjects (remaining/total)</code> - MAE
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilteredDataset$get_filter_overview()</pre></div>



<h5>Returns</h5>

<p>A <code>data.frame</code>.
</p>


<hr>
<a id="method-MAEFilteredDataset-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilteredDataset$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='MAEFilterStates'><code>FilterStates</code> subclass for <code>MultiAssayExperiment</code>s</h2><span id='topic+MAEFilterStates'></span>

<h3>Description</h3>

<p>Handles filter states in a <code>MultiAssayExperiment</code>.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterStates">teal.slice::FilterStates</a></code> -&gt; <code>MAEFilterStates</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MAEFilterStates-new"><code>MAEFilterStates$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MAEFilterStates-clone"><code>MAEFilterStates$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="clear_filter_states"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-clear_filter_states'><code>teal.slice::FilterStates$clear_filter_states()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="format"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-format'><code>teal.slice::FilterStates$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_call"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_call'><code>teal.slice::FilterStates$get_call()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_filter_state'><code>teal.slice::FilterStates$get_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="print"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-print'><code>teal.slice::FilterStates$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="remove_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-remove_filter_state'><code>teal.slice::FilterStates$remove_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="set_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-set_filter_state'><code>teal.slice::FilterStates$set_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="srv_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-srv_active'><code>teal.slice::FilterStates$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="srv_add"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-srv_add'><code>teal.slice::FilterStates$srv_add()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="ui_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-ui_active'><code>teal.slice::FilterStates$ui_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="ui_add"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-ui_add'><code>teal.slice::FilterStates$ui_add()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MAEFilterStates-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize <code>MAEFilterStates</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilterStates$new(
  data,
  data_reactive = function(sid = "") NULL,
  dataname,
  datalabel = "subjects",
  keys = character(0)
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>(<code>MultiAssayExperiment</code>)
the <code>R</code> object which <code>MultiAssayExperiment::subsetByColData</code> function is applied on.</p>
</dd>
<dt><code>data_reactive</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function(sid)&#8288;</code>)
should return a <code>MultiAssayExperiment</code> object or <code>NULL</code>.
This object is needed for the <code>FilterState</code> counts being updated
on a change in filters. If function returns <code>NULL</code> then filtered counts are not shown.
Function has to have <code>sid</code> argument being a character.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
name of the data used in the subset expression.
Passed to the function argument attached to this <code>FilterStates</code>.</p>
</dd>
<dt><code>datalabel</code></dt><dd><p>(<code>character(1)</code>)
optional text label.</p>
</dd>
<dt><code>keys</code></dt><dd><p>(<code>character</code>)
key column names.</p>
</dd>
<dt><code>varlabels</code></dt><dd><p>(<code>character</code>)
labels of the variables used in this object.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-MAEFilterStates-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MAEFilterStates$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='make_c_call'>Build concatenating call</h2><span id='topic+make_c_call'></span>

<h3>Description</h3>

<p>This function takes a vector of values and returns a <code>c</code> call. If the vector
has only one element, the element is returned directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_c_call(choices)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_c_call_+3A_choices">choices</code></td>
<td>
<p>A vector of values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>c</code> call.
</p>

<hr>
<h2 id='make_count_text'>Build count text</h2><span id='topic+make_count_text'></span>

<h3>Description</h3>

<p>Returns a text label describing filtered counts. The text is composed in the following way:
</p>

<ul>
<li><p> when <code>countnow</code> is not <code>NULL</code>: <code style="white-space: pre;">&#8288;&lt;label&gt; (&lt;countnow&gt;/&lt;countmax&gt;)&#8288;</code>
</p>
</li>
<li><p> when <code>countnow</code> is <code>NULL</code>: <code style="white-space: pre;">&#8288;&lt;label&gt; (&lt;countmax&gt;)&#8288;</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>make_count_text(label, countmax, countnow = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_count_text_+3A_label">label</code></td>
<td>
<p>(<code>character(1)</code>) Text displayed before counts.</p>
</td></tr>
<tr><td><code id="make_count_text_+3A_countmax">countmax</code></td>
<td>
<p>(<code>numeric(1)</code>) Number of unfiltered counts.</p>
</td></tr>
<tr><td><code id="make_count_text_+3A_countnow">countnow</code></td>
<td>
<p>(<code>numeric(1)</code>) Number of filtered counts.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string.
</p>

<hr>
<h2 id='MatrixFilterStates'><code>FilterStates</code> subclass for matrices</h2><span id='topic+MatrixFilterStates'></span>

<h3>Description</h3>

<p>Handles filter states in a <code>matrix</code>.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterStates">teal.slice::FilterStates</a></code> -&gt; <code>MatrixFilterStates</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-MatrixFilterStates-new"><code>MatrixFilterStates$new()</code></a>
</p>
</li>
<li> <p><a href="#method-MatrixFilterStates-clone"><code>MatrixFilterStates$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="clear_filter_states"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-clear_filter_states'><code>teal.slice::FilterStates$clear_filter_states()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="format"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-format'><code>teal.slice::FilterStates$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_call"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_call'><code>teal.slice::FilterStates$get_call()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_filter_state'><code>teal.slice::FilterStates$get_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="print"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-print'><code>teal.slice::FilterStates$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="remove_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-remove_filter_state'><code>teal.slice::FilterStates$remove_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="set_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-set_filter_state'><code>teal.slice::FilterStates$set_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="srv_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-srv_active'><code>teal.slice::FilterStates$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="srv_add"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-srv_add'><code>teal.slice::FilterStates$srv_add()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="ui_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-ui_active'><code>teal.slice::FilterStates$ui_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="ui_add"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-ui_add'><code>teal.slice::FilterStates$ui_add()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-MatrixFilterStates-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize <code>MatrixFilterStates</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>MatrixFilterStates$new(
  data,
  data_reactive = function(sid = "") NULL,
  dataname,
  datalabel = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>(<code>matrix</code>)
the <code>R</code> object which <code>subset</code> function is applied on.</p>
</dd>
<dt><code>data_reactive</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function(sid)&#8288;</code>)
should return a <code>matrix</code> object or <code>NULL</code>.
This object is needed for the <code>FilterState</code> counts being updated on a change in filters.
If function returns <code>NULL</code> then filtered counts are not shown.
Function has to have <code>sid</code> argument being a character.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
name of the data used in the subset expression.
Passed to the function argument attached to this <code>FilterStates</code>.</p>
</dd>
<dt><code>datalabel</code></dt><dd><p>(<code>character(1)</code>)
Optional text label. Should be a name of experiment.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-MatrixFilterStates-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>MatrixFilterStates$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='RangeFilterState'><code>FilterState</code> object for numeric data</h2><span id='topic+RangeFilterState'></span>

<h3>Description</h3>

<p>Manages choosing a numeric range.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterState">teal.slice::FilterState</a></code> -&gt; <code>RangeFilterState</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-RangeFilterState-new"><code>RangeFilterState$new()</code></a>
</p>
</li>
<li> <p><a href="#method-RangeFilterState-get_call"><code>RangeFilterState$get_call()</code></a>
</p>
</li>
<li> <p><a href="#method-RangeFilterState-get_keep_inf"><code>RangeFilterState$get_keep_inf()</code></a>
</p>
</li>
<li> <p><a href="#method-RangeFilterState-clone"><code>RangeFilterState$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="destroy_observers"><a href='../../teal.slice/html/FilterState.html#method-FilterState-destroy_observers'><code>teal.slice::FilterState$destroy_observers()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="format"><a href='../../teal.slice/html/FilterState.html#method-FilterState-format'><code>teal.slice::FilterState$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="get_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-get_state'><code>teal.slice::FilterState$get_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="print"><a href='../../teal.slice/html/FilterState.html#method-FilterState-print'><code>teal.slice::FilterState$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="server"><a href='../../teal.slice/html/FilterState.html#method-FilterState-server'><code>teal.slice::FilterState$server()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="set_state"><a href='../../teal.slice/html/FilterState.html#method-FilterState-set_state'><code>teal.slice::FilterState$set_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterState" data-id="ui"><a href='../../teal.slice/html/FilterState.html#method-FilterState-ui'><code>teal.slice::FilterState$ui()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-RangeFilterState-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize a <code>FilterState</code> object for range selection.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$new(
  x,
  x_reactive = reactive(NULL),
  extract_type = character(0),
  slice
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>x</code></dt><dd><p>(<code>numeric</code>)
variable to be filtered.</p>
</dd>
<dt><code>x_reactive</code></dt><dd><p>(<code>reactive</code>)
returning vector of the same type as <code>x</code>. Is used to update
counts following the change in values of the filtered dataset.
If it is set to <code>reactive(NULL)</code> then counts based on filtered
dataset are not shown.</p>
</dd>
<dt><code>extract_type</code></dt><dd><p>(<code>character</code>)
specifying whether condition calls should be prefixed by <code>dataname</code>. Possible values:
</p>

<ul>
<li> <p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed
</p>
</li>
<li> <p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;$&lt;varname&gt;&#8288;</code>
</p>
</li>
<li> <p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code style="white-space: pre;">&#8288;&lt;dataname&gt;[, &lt;varname&gt;]&#8288;</code>
</p>
</li></ul>
</dd>
<dt><code>slice</code></dt><dd><p>(<code>teal_slice</code>)
specification of this filter state.
<code>teal_slice</code> is stored in the object and <code>set_state</code> directly manipulates values within <code>teal_slice</code>.
<code>get_state</code> returns <code>teal_slice</code> object which can be reused in other places.
Note that <code>teal_slice</code> is a <code>reactiveValues</code>, which means it has reference semantics, i.e.
changes made to an object are automatically reflected in all places that refer to the same <code>teal_slice</code>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>Object of class <code>RangeFilterState</code>, invisibly.
</p>


<hr>
<a id="method-RangeFilterState-get_call"></a>



<h4>Method <code>get_call()</code></h4>

<p>Returns reproducible condition call for current selection.
For this class returned call looks like
<code style="white-space: pre;">&#8288;&lt;varname&gt; &gt;= &lt;min value&gt; &amp; &lt;varname&gt; &lt;= &lt;max value&gt;&#8288;</code> with
optional <code style="white-space: pre;">&#8288;is.na(&lt;varname&gt;)&#8288;</code> and <code style="white-space: pre;">&#8288;is.finite(&lt;varname&gt;)&#8288;</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$get_call(dataname)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dataname</code></dt><dd><p>name of data set; defaults to <code>private$get_dataname()</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>call</code>
</p>


<hr>
<a id="method-RangeFilterState-get_keep_inf"></a>



<h4>Method <code>get_keep_inf()</code></h4>

<p>Returns current <code>keep_inf</code> selection.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$get_keep_inf()</pre></div>



<h5>Returns</h5>

<p><code>logical(1)</code>
</p>


<hr>
<a id="method-RangeFilterState-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>RangeFilterState$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='SEFilterStates'><code>FilterStates</code> subclass for <code>SummarizedExperiment</code>s</h2><span id='topic+SEFilterStates'></span>

<h3>Description</h3>

<p>Handles filter states in a <code>SummaryExperiment</code>.
</p>


<h3>Super class</h3>

<p><code><a href="#topic+FilterStates">teal.slice::FilterStates</a></code> -&gt; <code>SEFilterStates</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-SEFilterStates-new"><code>SEFilterStates$new()</code></a>
</p>
</li>
<li> <p><a href="#method-SEFilterStates-set_filter_state"><code>SEFilterStates$set_filter_state()</code></a>
</p>
</li>
<li> <p><a href="#method-SEFilterStates-ui_add"><code>SEFilterStates$ui_add()</code></a>
</p>
</li>
<li> <p><a href="#method-SEFilterStates-srv_add"><code>SEFilterStates$srv_add()</code></a>
</p>
</li>
<li> <p><a href="#method-SEFilterStates-clone"><code>SEFilterStates$clone()</code></a>
</p>
</li></ul>



<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="clear_filter_states"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-clear_filter_states'><code>teal.slice::FilterStates$clear_filter_states()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="format"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-format'><code>teal.slice::FilterStates$format()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_call"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_call'><code>teal.slice::FilterStates$get_call()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="get_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-get_filter_state'><code>teal.slice::FilterStates$get_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="print"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-print'><code>teal.slice::FilterStates$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="remove_filter_state"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-remove_filter_state'><code>teal.slice::FilterStates$remove_filter_state()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="srv_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-srv_active'><code>teal.slice::FilterStates$srv_active()</code></a></span></li>
<li><span class="pkg-link" data-pkg="teal.slice" data-topic="FilterStates" data-id="ui_active"><a href='../../teal.slice/html/FilterStates.html#method-FilterStates-ui_active'><code>teal.slice::FilterStates$ui_active()</code></a></span></li>
</ul>
</details>

<hr>
<a id="method-SEFilterStates-new"></a>



<h4>Method <code>new()</code></h4>

<p>Initialize <code>SEFilterStates</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>SEFilterStates$new(
  data,
  data_reactive = function(sid = "") NULL,
  dataname,
  datalabel = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>data</code></dt><dd><p>(<code>SummarizedExperiment</code>)
the <code>R</code> object which <code>subset</code> function is applied on.</p>
</dd>
<dt><code>data_reactive</code></dt><dd><p>(<code style="white-space: pre;">&#8288;function(sid)&#8288;</code>)
should return a <code>SummarizedExperiment</code> object or <code>NULL</code>.
This object is needed for the <code>FilterState</code> counts being updated on a change in filters.
If function returns <code>NULL</code> then filtered counts are not shown.
Function has to have <code>sid</code> argument being a character.</p>
</dd>
<dt><code>dataname</code></dt><dd><p>(<code>character(1)</code>)
name of the data used in the expression
specified to the function argument attached to this <code>FilterStates</code>.</p>
</dd>
<dt><code>datalabel</code></dt><dd><p>(<code>character(1)</code>)
optional text label. Should be the name of experiment.</p>
</dd>
</dl>

</div>


<hr>
<a id="method-SEFilterStates-set_filter_state"></a>



<h4>Method <code>set_filter_state()</code></h4>

<p>Set filter state.
</p>


<h5>Usage</h5>

<div class="r"><pre>SEFilterStates$set_filter_state(state)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>state</code></dt><dd><p>(<code>teal_slices</code>)
<code>teal_slice</code> objects should contain the field <code>arg %in% c("subset", "select")</code></p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>, invisibly.
</p>


<hr>
<a id="method-SEFilterStates-ui_add"></a>



<h4>Method <code>ui_add()</code></h4>

<p><code>shiny</code> UI module to add filter variable.
</p>


<h5>Usage</h5>

<div class="r"><pre>SEFilterStates$ui_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>shiny.tag</code>
</p>


<hr>
<a id="method-SEFilterStates-srv_add"></a>



<h4>Method <code>srv_add()</code></h4>

<p><code>shiny</code> server module to add filter variable.
</p>
<p>Module controls available choices to select as a filter variable.
Selected filter variable is being removed from available choices.
Removed filter variable gets back to available choices.
This module unlike other <code>FilterStates</code> classes manages two
sets of filter variables - one for <code>colData</code> and another for
<code>rowData</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>SEFilterStates$srv_add(id)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt><dd><p>(<code>character(1)</code>)
<code>shiny</code> module instance id.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p><code>NULL</code>
</p>


<hr>
<a id="method-SEFilterStates-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>SEFilterStates$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>



<hr>
<h2 id='setdiff_teal_slices'><code>setdiff</code> method for <code>teal_slices</code></h2><span id='topic+setdiff_teal_slices'></span>

<h3>Description</h3>

<p>Compare two teal slices objects and return <code>teal_slices</code> containing slices present in <code>x</code> but not in <code>y</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setdiff_teal_slices(x, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setdiff_teal_slices_+3A_x">x</code>, <code id="setdiff_teal_slices_+3A_y">y</code></td>
<td>
<p>(<code>teal_slices</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>teal_slices</code>
</p>

<hr>
<h2 id='teal_slice'>Specify single filter</h2><span id='topic+teal_slice'></span><span id='topic+is.teal_slice'></span><span id='topic+as.teal_slice'></span><span id='topic+as.list.teal_slice'></span><span id='topic+format.teal_slice'></span><span id='topic+print.teal_slice'></span>

<h3>Description</h3>

<p>Create a <code>teal_slice</code> object that holds complete information on filtering one variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teal_slice(
  dataname,
  varname,
  id,
  expr,
  choices = NULL,
  selected = NULL,
  keep_na = NULL,
  keep_inf = NULL,
  fixed = FALSE,
  anchored = FALSE,
  multiple = TRUE,
  title = NULL,
  ...
)

is.teal_slice(x)

as.teal_slice(x)

## S3 method for class 'teal_slice'
as.list(x, ...)

## S3 method for class 'teal_slice'
format(x, show_all = FALSE, trim_lines = TRUE, ...)

## S3 method for class 'teal_slice'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="teal_slice_+3A_dataname">dataname</code></td>
<td>
<p>(<code>character(1)</code>) name of data set</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_varname">varname</code></td>
<td>
<p>(<code>character(1)</code>) name of variable</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_id">id</code></td>
<td>
<p>(<code>character(1)</code>) identifier of the filter. Must be specified when <code>expr</code> is set.
When <code>varname</code> is specified then <code>id</code> is set to <code>"{dataname} {varname}"</code> by default.</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_expr">expr</code></td>
<td>
<p>(<code>character(1)</code>) string providing a logical expression.
Must be a valid <code>R</code> expression which can be evaluated in the context of the data set.
For a <code>data.frame</code> <code>var == "x"</code> is sufficient, but <code>MultiAssayExperiment::subsetByColData</code>
requires <code>dataname</code> prefix, <em>e.g.</em> <code>data$var == "x"</code>.</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_choices">choices</code></td>
<td>
<p>(optional <code>vector</code>) specifying allowed choices;
When specified it should be a subset of values in variable denoted by <code>varname</code>;
Type and size depends on variable type. Factors are coerced to character.</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_selected">selected</code></td>
<td>
<p>(optional <code>vector</code>) of selected values from <code>choices</code>;
Type and size depends on variable type. Factors are coerced to character.</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_keep_na">keep_na</code></td>
<td>
<p>(optional <code>logical(1)</code>) flag specifying whether to keep missing values</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_keep_inf">keep_inf</code></td>
<td>
<p>(optional <code>logical(1)</code>) flag specifying whether to keep infinite values</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_fixed">fixed</code></td>
<td>
<p>(<code>logical(1)</code>) flag specifying whether to fix this filter state (forbid setting state)</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_anchored">anchored</code></td>
<td>
<p>(<code>logical(1)</code>) flag specifying whether to lock this filter state (forbid removing and inactivating)</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_multiple">multiple</code></td>
<td>
<p>(optional <code>logical(1)</code>) flag specifying whether more than one value can be selected;
only applicable to <code>ChoicesFilterState</code> and <code>LogicalFilterState</code></p>
</td></tr>
<tr><td><code id="teal_slice_+3A_title">title</code></td>
<td>
<p>(optional <code>character(1)</code>) title of the filter. Ignored when <code>varname</code> is set.</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_...">...</code></td>
<td>
<p>in <code>teal_slice</code> method these are additional arguments which can be handled by extensions
of <code>teal.slice</code> classes. In other methods these are further arguments passed to or from other methods.</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_x">x</code></td>
<td>
<p>(<code>teal.slice</code>)</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_show_all">show_all</code></td>
<td>
<p>(<code>logical(1)</code>) indicating whether to show all fields. If set to <code>FALSE</code>,
only non-NULL elements will be printed.</p>
</td></tr>
<tr><td><code id="teal_slice_+3A_trim_lines">trim_lines</code></td>
<td>
<p>(<code>logical(1)</code>) indicating whether to trim lines when printing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>teal_slice</code> object fully describes filter state and can be used to create,
modify, and delete a filter state. A <code>teal_slice</code> contains a number of common fields
(all named arguments of <code>teal_slice</code>), some of which are mandatory, but only
<code>dataname</code> and  either <code>varname</code> or <code>expr</code> must be specified, while the others have default
values.
</p>
<p>Setting any of the other values to <code>NULL</code> means that those properties will not be modified
(when setting an existing state) or that they will be determined by data (when creating new a new one).
Entire object is <code>FilterState</code> class member and can be accessed with <code>FilterState$get_state()</code>.
</p>
<p>A <code>teal_slice</code> can come in two flavors:
</p>

<ol>
<li> <p><code>teal_slice_var</code> -
this describes a typical interactive filter that refers to a single variable, managed by the <code>FilterState</code> class.
This class is created when <code>varname</code> is specified.
The object retains all fields specified in the call. <code>id</code> can be created by default and need not be specified.
</p>
</li>
<li> <p><code>teal_slice_expr</code> -
this describes a filter state that refers to an expression, which can potentially include multiple variables,
managed by the <code>FilterStateExpr</code> class.
This class is created when <code>expr</code> is specified.
<code>dataname</code> and <code>anchored</code> are retained, <code>fixed</code> is set to <code>TRUE</code>, <code>id</code> becomes mandatory, <code>title</code>
remains optional, while other arguments are disregarded.
</p>
</li></ol>

<p>A teal_slice can be passed <code>FilterState</code>/<code>FilterStateExpr</code> constructors to instantiate an object.
It can also be passed to <code>FilterState$set_state</code> to modify the state.
However, once a <code>FilterState</code> is created, only the mutable features can be set with a teal_slice:
<code>selected</code>, <code>keep_na</code> and <code>keep_inf</code>.
</p>
<p>Special consideration is given to two fields: <code>fixed</code> and <code>anchored</code>.
These are always immutable logical flags that default to <code>FALSE</code>.
In a <code>FilterState</code> instantiated with <code>fixed = TRUE</code> the features
<code>selected</code>, <code>keep_na</code>, <code>keep_inf</code> cannot be changed.
Note that a <code>FilterStateExpr</code> is always considered to have <code>fixed = TRUE</code>.
A <code>FilterState</code> instantiated with <code>anchored = TRUE</code> cannot be removed.
</p>


<h3>Value</h3>

<p>A <code>teal.slice</code> object. Depending on whether <code>varname</code> or <code>expr</code> was specified, the resulting
<code>teal_slice</code> also receives class <code>teal_slice_var</code> or <code>teal_slice_expr</code>, respectively.
</p>


<h3>Filters in <code>SumarizedExperiment</code> and <code>MultiAssayExperiment</code> objects</h3>

<p>To establish a filter on a column in a <code>data.frame</code>, <code>dataname</code> and <code>varname</code> are sufficient.
<code>MultiAssayExperiment</code> objects can be filtered either on their <code>colData</code> slot (which contains subject information)
or on their experiments, which are stored in the <code>experimentList</code> slot.
For filters referring to <code>colData</code> no extra arguments are needed.
If a filter state is created for an experiment, that experiment name must be specified in the <code>experiment</code> argument.
Furthermore, to specify filter for an <code>SummarizedExperiment</code> one must also set <code>arg</code>
(<code>"subset"</code>  or <code>"select"</code>, arguments in the <code><a href="base.html#topic+subset">subset()</a></code> function for <code>SummarizedExperiment</code>)
in order to determine whether the filter refers to the <code>SE</code>'s <code>rowData</code> or <code>colData</code>.
</p>


<h3>Note</h3>

<p>Date time objects of <code>POSIX*t</code> classes are printed as strings after converting to UTC timezone.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+teal_slices">teal_slices</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x1 &lt;- teal_slice(
  dataname = "data",
  id = "Female adults",
  expr = "SEX == 'F' &amp; AGE &gt;= 18",
  title = "Female adults"
)
x2 &lt;- teal_slice(
  dataname = "data",
  varname = "var",
  choices = c("F", "M", "U"),
  selected = "F",
  keep_na = TRUE,
  keep_inf = TRUE,
  fixed = FALSE,
  anchored = FALSE,
  multiple = TRUE,
  id = "Gender",
  extra_arg = "extra"
)

is.teal_slice(x1)
as.list(x1)
as.teal_slice(list(dataname = "a", varname = "var"))
format(x1)
format(x1, show_all = TRUE, trim_lines = FALSE)
print(x1)
print(x1, show_all = TRUE, trim_lines = FALSE)

</code></pre>

<hr>
<h2 id='teal_slices'>Complete filter specification</h2><span id='topic+teal_slices'></span><span id='topic+is.teal_slices'></span><span id='topic+as.teal_slices'></span><span id='topic+as.list.teal_slices'></span><span id='topic++5B.teal_slices'></span><span id='topic+c.teal_slices'></span><span id='topic+format.teal_slices'></span><span id='topic+print.teal_slices'></span>

<h3>Description</h3>

<p>Create <code>teal_slices</code> object to package multiple filters and additional settings.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teal_slices(
  ...,
  exclude_varnames = NULL,
  include_varnames = NULL,
  count_type = NULL,
  allow_add = TRUE
)

is.teal_slices(x)

as.teal_slices(x)

## S3 method for class 'teal_slices'
as.list(x, recursive = FALSE, ...)

## S3 method for class 'teal_slices'
x[i]

## S3 method for class 'teal_slices'
c(...)

## S3 method for class 'teal_slices'
format(x, show_all = FALSE, trim_lines = TRUE, ...)

## S3 method for class 'teal_slices'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="teal_slices_+3A_...">...</code></td>
<td>
<p>any number of <code>teal_slice</code> objects. For <code>print</code> and <code>format</code>,
additional arguments passed to other functions.</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_include_varnames">include_varnames</code>, <code id="teal_slices_+3A_exclude_varnames">exclude_varnames</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>s of <code>character</code>) where list names
match names of data sets and vector elements match variable names in respective data sets;
specify which variables are allowed to be filtered; see <code>Details</code>.</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_count_type">count_type</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<em>This is a new feature. Do kindly share your opinions on
<a href="https://github.com/insightsengineering/teal.slice/"><code>teal.slice</code>'s GitHub repository</a>.</em>
</p>
<p>(<code>character(1)</code>) string specifying how observations are tallied by these filter states.
Possible options:
</p>

<ul>
<li> <p><code>"none"</code> (default) to have counts of single <code>FilterState</code> to show unfiltered number only.
</p>
</li>
<li> <p><code>"all"</code> to have counts of single <code>FilterState</code> to show number of observation in filtered
and unfiltered dataset. Note, that issues were reported when using this option with <code>MultiAssayExperiment</code>.
Please make sure that adding new filters doesn't fail on target platform before deploying for production.
</p>
</li></ul>
</td></tr>
<tr><td><code id="teal_slices_+3A_allow_add">allow_add</code></td>
<td>
<p>(<code>logical(1)</code>) logical flag specifying whether the user will be able to add new filters</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_x">x</code></td>
<td>
<p>object to test for <code>teal_slices</code>, object to convert to <code>teal_slices</code> or a <code>teal_slices</code> object</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_recursive">recursive</code></td>
<td>
<p>(<code>logical(1)</code>) flag specifying whether to also convert to list the elements of this <code>teal_slices</code></p>
</td></tr>
<tr><td><code id="teal_slices_+3A_i">i</code></td>
<td>
<p>(<code>character</code> or <code>numeric</code> or <code>logical</code>) indicating which elements to extract</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_show_all">show_all</code></td>
<td>
<p>(<code>logical(1)</code>) whether to display non-null elements of constituent <code>teal_slice</code> objects</p>
</td></tr>
<tr><td><code id="teal_slices_+3A_trim_lines">trim_lines</code></td>
<td>
<p>(<code>logical(1)</code>) whether to trim lines</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>teal_slices()</code> collates multiple <code>teal_slice</code> objects into a <code>teal_slices</code> object,
a complete filter specification. This is used by all classes above <code>FilterState</code>
as well as <code>filter_panel_api</code> wrapper functions.
<code>teal_slices</code> has attributes that modify the behavior of the filter panel, which are resolved by different classes.
</p>
<p><code>include_varnames</code> and <code>exclude_varnames</code> determine which variables can have filters assigned.
The former enumerates allowed variables, the latter enumerates forbidden values.
Since these could be mutually exclusive, it is impossible to set both allowed and forbidden
variables for one data set in one <code>teal_slices</code>.
</p>


<h3>Value</h3>

<p><code>teal_slices</code>, which is an unnamed list of <code>teal_slice</code> objects.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+teal_slice">teal_slice</a></code> for creating constituent elements of <code>teal_slices</code>
</p>
</li>
<li> <p><code><a href="teal.html#topic+slices_store">teal::slices_store</a></code> for robust utilities for saving and loading <code>teal_slices</code> in <code>JSON</code> format
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>filter_1 &lt;- teal_slice(
  dataname = "dataname1",
  varname = "varname1",
  choices = letters,
  selected = "b",
  keep_na = TRUE,
  fixed = FALSE,
  extra1 = "extraone"
)
filter_2 &lt;- teal_slice(
  dataname = "dataname1",
  varname = "varname2",
  choices = 1:10,
  keep_na = TRUE,
  selected = 2,
  fixed = TRUE,
  anchored = FALSE,
  extra2 = "extratwo"
)
filter_3 &lt;- teal_slice(
  dataname = "dataname2",
  varname = "varname3",
  choices = 1:10 / 10,
  keep_na = TRUE,
  selected = 0.2,
  fixed = TRUE,
  anchored = FALSE,
  extra1 = "extraone",
  extra2 = "extratwo"
)

all_filters &lt;- teal_slices(
  filter_1,
  filter_2,
  filter_3,
  exclude_varnames = list(
    "dataname1" = "varname2"
  )
)

is.teal_slices(all_filters)
all_filters[1:2]
c(all_filters[1], all_filters[2])
print(all_filters)
print(all_filters, trim_lines = FALSE)

</code></pre>

<hr>
<h2 id='teal.slice-package'><code>teal.slice</code>: Interactive Exploration of Clinical Trials Data</h2><span id='topic+teal.slice'></span><span id='topic+teal.slice-package'></span>

<h3>Description</h3>

<p><code>teal.slice</code> is an <code>R</code> library used in the development of <code>teal</code> <code>shiny</code> modules.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dawid Kaledkowski <a href="mailto:dawid.kaledkowski@roche.com">dawid.kaledkowski@roche.com</a> (<a href="https://orcid.org/0000-0001-9533-457X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Pawel Rucki <a href="mailto:pawel.rucki@roche.com">pawel.rucki@roche.com</a>
</p>
</li>
<li><p> Aleksander Chlebowski <a href="mailto:aleksander.chlebowski@contractors.roche.com">aleksander.chlebowski@contractors.roche.com</a> (<a href="https://orcid.org/0000-0001-5018-6294">ORCID</a>)
</p>
</li>
<li><p> Andre Verissimo <a href="mailto:andre.verissimo@roche.com">andre.verissimo@roche.com</a> (<a href="https://orcid.org/0000-0002-2212-339X">ORCID</a>)
</p>
</li>
<li><p> Kartikeya Kirar <a href="mailto:kartikeya.kirar@businesspartner.roche.com">kartikeya.kirar@businesspartner.roche.com</a>
</p>
</li>
<li><p> Marcin Kosinski <a href="mailto:marcin.kosinski.mk1@roche.com">marcin.kosinski.mk1@roche.com</a>
</p>
</li>
<li><p> Andrew Bates
</p>
</li>
<li><p> Mahmoud Hallal
</p>
</li>
<li><p> Nikolas Burkoff
</p>
</li>
<li><p> Maciej Nasinski
</p>
</li>
<li><p> Konrad Pagacz
</p>
</li>
<li><p> Junlue Zhao
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Chendi Liao <a href="mailto:chendi.liao@roche.com">chendi.liao@roche.com</a> [reviewer]
</p>
</li>
<li><p> Dony Unardi <a href="mailto:unardid@gene.com">unardid@gene.com</a> [reviewer]
</p>
</li>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://insightsengineering.github.io/teal.slice/">https://insightsengineering.github.io/teal.slice/</a>
</p>
</li>
<li> <p><a href="https://github.com/insightsengineering/teal.slice/">https://github.com/insightsengineering/teal.slice/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/insightsengineering/teal.slice/issues">https://github.com/insightsengineering/teal.slice/issues</a>
</p>
</li></ul>


<hr>
<h2 id='to_json'>Converts a list to a <code>JSON</code> string</h2><span id='topic+to_json'></span>

<h3>Description</h3>

<p>Converts a list representation of <code>teal_slice</code> or <code>teal_slices</code> into a <code>JSON</code> string.
Ensures proper unboxing of list elements.
This function is used by the <code>format</code> methods for <code>teal_slice</code> and <code>teal_slices</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_json(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_json_+3A_x">x</code></td>
<td>
<p>(<code>list</code>) representation of <code>teal_slices</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>JSON</code> string.
</p>

<hr>
<h2 id='toggle_button'>Toggle button properties.</h2><span id='topic+toggle_button'></span><span id='topic+toggle_icon'></span><span id='topic+toggle_title'></span>

<h3>Description</h3>

<p>Switch between different icons or titles on a button.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toggle_icon(input_id, icons, one_way = FALSE)

toggle_title(input_id, titles, one_way = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toggle_button_+3A_input_id">input_id</code></td>
<td>
<p>(<code>character(1)</code>) (name-spaced) id of the button</p>
</td></tr>
<tr><td><code id="toggle_button_+3A_icons">icons</code>, <code id="toggle_button_+3A_titles">titles</code></td>
<td>
<p>(<code>character(2)</code>) vector specifying values between which to toggle</p>
</td></tr>
<tr><td><code id="toggle_button_+3A_one_way">one_way</code></td>
<td>
<p>(<code>logical(1)</code>) flag specifying whether to keep toggling;
if TRUE, the target will be changed
from the first element of <code>icons</code>/<code>titles</code> to the second</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Wrapper functions that use <code>shinyjs::runjs</code> to change button properties in response to events,
typically clicking those very buttons.
<code>shiny</code>'s <code>actionButton</code> and <code>actionLink</code> create <code style="white-space: pre;">&#8288;&lt;a&gt;&#8288;</code> tags,
which may contain a child <code style="white-space: pre;">&#8288;&lt;i&gt;&#8288;</code> tag that specifies an icon to be displayed.
<code>toggle_icon</code> calls the <code>toggleClass</code> (when <code>one_way = FALSE</code>) or
<code>removeClass</code> and <code>addClass</code> methods (when <code>one_way = TRUE</code>) to change icons.
<code>toggle_title</code> calls the <code>attr</code> method to modify the <code>Title</code> attribute of the button.
</p>


<h3>Value</h3>

<p><code>NULL</code>, invisibly.
</p>

<hr>
<h2 id='topological_sort'>Topological graph sort</h2><span id='topic+topological_sort'></span>

<h3>Description</h3>

<p>Graph is a <code>list</code> which for each node contains a vector of child nodes
in the returned list, parents appear before their children.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topological_sort(graph)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="topological_sort_+3A_graph">graph</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>) with node vector elements</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Implementation of <code>Kahn</code> algorithm with a modification to maintain the order of input elements.
</p>

<hr>
<h2 id='trim_lines_json'>Trim lines in <code>JSON</code> string</h2><span id='topic+trim_lines_json'></span>

<h3>Description</h3>

<p>This function takes a <code>JSON</code> string as input and returns a modified version of the
input where the values portion of each line is trimmed for a less messy console output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trim_lines_json(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trim_lines_json_+3A_x">x</code></td>
<td>
<p>(<code>character</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string trimmed after a certain hard-coded number of characters in the value portion.
</p>

<hr>
<h2 id='variable_types'>Get classes of selected columns from dataset</h2><span id='topic+variable_types'></span>

<h3>Description</h3>

<p>Get classes of selected columns from dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variable_types(data, columns = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variable_types_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code> or <code>DataFrame</code> or <code>matrix</code>) Object in which to determine variable types.</p>
</td></tr>
<tr><td><code id="variable_types_+3A_columns">columns</code></td>
<td>
<p>(<code>character</code>) Vector of columns in <code>data</code> for which to get types.
Set to <code>NULL</code> to get types of all columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of classes of <code>columns</code> from provided <code>data</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
