<!DOCTYPE html><html><head><title>Help for package causalHyperGraph</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {causalHyperGraph}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#causalHyperGraph'><p>Draw Causal Hypergraphs</p></a></li>
<li><a href='#export_as_svg'><p>Export causal hypergraphs in svg format</p></a></li>
<li><a href='#plot.cna'><p>Create hypergraphs from solution objects of <code>cna()</code> and related functions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Drawing Causal Hypergraphs</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-18</td>
</tr>
<tr>
<td>Author:</td>
<td>Christoph Falk [aut, cph],
  Mathias Ambuehl [aut, cre],
  Michael Baumgartner [aut]</td>
</tr>
<tr>
<td>Imports:</td>
<td>DiagrammeR, DiagrammeRsvg, stringr, useful, cna, utils</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mathias Ambuehl &lt;mathias.ambuehl@consultag.ch&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Draws causal hypergraph plots from models output by configurational comparative methods such as Coincidence Analysis (CNA) or Qualitative Comparative Analysis (QCA).</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-20 14:59:08 UTC; MAM</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-21 17:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='causalHyperGraph'>Draw Causal Hypergraphs</h2><span id='topic+causalHyperGraph'></span><span id='topic+chg'></span><span id='topic+plot.causalHyperGraph'></span><span id='topic+print.causalHyperGraph'></span><span id='topic++5B.causalHyperGraph'></span><span id='topic+c.causalHyperGraph'></span>

<h3>Description</h3>

<p><code>causalHyperGraph()</code> draws causal hypergraphs based on solution formulas of configurational comparative methods 
as <a href="https://CRAN.R-project.org/package=cna"><span class="pkg">cna</span></a> or <a href="https://CRAN.R-project.org/package=QCA"><span class="pkg">QCA</span></a>. In contrast to a directed acyclic graph (DAG), edges of a hypergraph
can connect more than two nodes. <code>chg()</code> is a short form/alias of <code>causalHyperGraph()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>causalHyperGraph(
  x,
  show_formula = FALSE,
  formula_font = "Courier",
  formula_spaces = NULL,
  n = 10,
  ask = length(x) &gt; 1
)

chg(
  x,
  show_formula = FALSE,
  formula_font = "Courier",
  formula_spaces = NULL,
  n = 10,
  ask = length(x) &gt; 1
)

## S3 method for class 'causalHyperGraph'
plot(x, n = attr(x, "n"), ask = attr(x, "ask"), print = TRUE, ...)

## S3 method for class 'causalHyperGraph'
print(x, n = attr(x, "n"), ask = attr(x, "ask"), plot = TRUE, ...)

## S3 method for class 'causalHyperGraph'
x[i, ask = length(out) &gt; 1]

## S3 method for class 'causalHyperGraph'
c(..., n = 10, ask = length(out) &gt; 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="causalHyperGraph_+3A_x">x</code></td>
<td>
<p>A character vector containing atomic or complex solution formulas (asf or csf) in crisp-set (binary) 
or multi-value standard form.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_show_formula">show_formula</code></td>
<td>
<p>Logical; if <code>TRUE</code>, the formula is printed below the graph.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_formula_font">formula_font</code></td>
<td>
<p>Character string; specifies a font for the formula. The name of any available 
systemfont can be used.
The argument is only relevant if <code>show_formula=TRUE</code>.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_formula_spaces">formula_spaces</code></td>
<td>
<p>Character vector; the characters in this vector will be displayed with a space around them
in the formula. The argument is only relevant if <code>show_formula=TRUE</code>.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_n">n</code></td>
<td>
<p>Positive integer; specifies the maximal number of graphs to render.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_ask">ask</code></td>
<td>
<p>Logical; if <code>TRUE</code>, the user is asked to hit &lt;Return&gt; before a new graph is drawn.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_print">print</code></td>
<td>
<p>Logical; if <code>TRUE</code>, <code>x</code> is printed to the console.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods.</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_plot">plot</code></td>
<td>
<p>Logical; if <code>TRUE</code>, <code>x</code> is rendered graphically (in addition to being printed to the console).</p>
</td></tr>
<tr><td><code id="causalHyperGraph_+3A_i">i</code></td>
<td>
<p>A vector (integer, character or logical) indicating elements to select.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The most common type of graph representing causal structures is
the directed acyclic graph (DAG) (cf. e.g. Spirtes et al. 2000).
Edges in DAGs connect exactly two nodes, and the edges
indicate the direction of causation. In contrast, 
edges in hypergraphs can connect more than two nodes and, thereby, represent more
than just the direction of causation. Causal hypergraphs represent causal complexity, that is, 
they depict the fact that often many causes need to be instantiated jointly, i.e. as a bundle,
in order for an effect to occur (which is known as <em>causal conjunctivity</em>) and 
that different bundles of causes can bring about an effect independently of one another on alternative
causal routes (<em>causal 
disjunctivity</em>). Hypergraphs are particularly useful for representing causal structures in the vein
of Mackie's (1974) INUS theory of causation, and modern variants thereof (Baumgartner &amp; Falk 2023).
</p>
<p>The methods designed to trace causal complexity in data are configurational 
comparative methods (CCMs), such as <a href="https://CRAN.R-project.org/package=cna"><span class="pkg">cna</span></a> (Baumgartner &amp; Ambühl 2020) and <a href="https://CRAN.R-project.org/package=QCA"><span class="pkg">QCA</span></a>
(Ragin 2008). Accordingly, the first argument of <code>causalHyperGraph()</code> is a character vector of  
CCM solution formulas in crisp-set (binary) or multi-value standard form (asf or csf).
CCM solution formulas are conjunctions of
biconditionals with minimized disjunctive normal forms (DNF) on the left-hand sides and single effects 
on the right-hand sides. Conjunction is expressed by &quot;<code class="reqn">*</code>&quot;, disjunction by &quot;+&quot;, negation by changing upper case into lower case letters
and vice versa, conditional by &quot;<code class="reqn">\rightarrow</code>&quot;, and biconditional by &quot;<code class="reqn">\leftrightarrow</code>&quot;. Examples are <code>(A*b + c*B &lt;-&gt; D)*(D + E &lt;-&gt; F)</code> or 
<code>(A=2*B=4 + A=3*B=1 &lt;-&gt; C=2)*(C=2*D=3 + C=1*D=4 &lt;-&gt; E=3)</code>.
</p>
<p>If the hypergraphs drawn by <code>causalHyperGraph()</code> have crisp-set (or fuzzy-set) factors only,
upper case &quot;X&quot; means X=1, lower case &quot;x&quot; stands for X=0, and &quot;<code class="reqn">\diamond</code>&quot; expresses 
that the value of the factor at the tail of the edge is negated. In case of hypergraphs with
multi-value factors, the relevant values of the factors are displayed at the tails and heads of the directed edges.
In all graphs, nodes whose exiting edges are
joined by &quot;<code class="reqn">\bullet</code>&quot; form a conjunction, and the tails of edges 
with the same head node (so-called &quot;colliders&quot;) constitute a disjunction.
</p>
<p>The arguments <code>show_formula</code>, <code>formula_font</code>, and <code>formula_spaces</code> control the display
of the solution formula below the graph. <code>show_formula</code> 
determines whether the formula is printed, and <code>formula_font</code> specifies a font for the formula.
The argument <code>formula_spaces</code> identifies characters that are displayed with a space around them.
For example,  <code>formula_spaces = c("+", "&lt;-&gt;")</code> displays &quot;+&quot; and &quot;<code class="reqn">\leftrightarrow</code>&quot; with a space around them.
<code>formula_font</code> and <code>formula_spaces</code> only have an effect if <code>show_formula</code> is set to its 
non-default value <code>TRUE</code>. 
</p>
<p>The argument <code>n</code> specifies the maximal number of graphs to render. If the number
of graphs is larger than <code>n</code>,
only the first <code>n</code> graphs are drawn.
By means of the argument <code>ask</code> the rendering of the graphs can be paused. 
If <code>ask=TRUE</code>, the user is asked to hit &lt;Return&gt; before a new graph is drawn. 
If <code>ask=FALSE</code>, all <code>n</code> graphs are drawn at once.
</p>
<p>Formally, <code>causalHyperGraph()</code> returns a list of graphs of class 
&ldquo;causalHyperGraph&rdquo; produced using the <a href="https://CRAN.R-project.org/package=DiagrammeR"><span class="pkg">DiagrammeR</span></a> package. 
Such a list contains one or more graphs.
</p>
<p>The class &ldquo;causalHyperGraph&rdquo; has the following methods: <code>plot()</code> for rendering the graphs, 
<code>print()</code> for printing the solution formulas to the console and, optionally, graph rendering,
<code>c()</code> for concatenating several &ldquo;causalHyperGraph&rdquo; objects, and
<code>[]</code>/<code>subset()</code> for subsetting. By 
contrast, extraction of a single list element with <code>[[]]</code> or <code>$</code> does not return anything useful.
</p>
<p>Hint: Use <code>length(x)</code> to query the number of graphs in an object of class &ldquo;causalHyperGraph&rdquo;.
</p>


<h3>Value</h3>

<p><code>causalHyperGraph()</code> returns a list of class &ldquo;causalHyperGraph&rdquo; containing one or several graphs.
</p>


<h3>References</h3>

<p>Baumgartner, Michael and Christoph Falk. 2023. Boolean Difference-Making: A Modern
Regularity Theory of Causation. <em>The British Journal for the Philosophy of Science</em> 74(1):171–197.
</p>
<p>Baumgartner, Michael and Mathias Ambühl. 2020. Causal Modeling with Multi-Value and Fuzzy-Set Coincidence Analysis.
<em>Political Science Research and Methods</em> 8:526–542.
</p>
<p>Mackie, John L. 1974. <em>The Cement of the Universe: A Study of Causation.</em> Oxford: Oxford University Press.
</p>
<p>Ragin, Charles C. 2008. <em>Redesigning Social Inquiry: Fuzzy Sets and Beyond.</em> Chicago: University of Chicago Press.
</p>
<p>Spirtes, Peter, Clark Glymour and Richard Scheines. 2000. <em>Causation, Prediction, and Search</em>. 2 ed. Cambridge: MIT Press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+export_as_svg">export_as_svg</a></code>, and the methods described in <code><a href="#topic+plot.cna">plot.cna</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(cna)  # required for randomAsf(), randomCsf(), and allCombs()

x &lt;- "(A+B&lt;-&gt;C)*(B+D&lt;-&gt;E)"
causalHyperGraph(x)
chg(x)

# Input of length &gt; 1
x &lt;- c("(A*b+a*B&lt;-&gt;C)*(C+f&lt;-&gt;E)", "(A*B+a*b&lt;-&gt;C)*(C+F&lt;-&gt;E)")
gr1 &lt;- causalHyperGraph(x)
gr1
# Suppress plotting.
print(gr1, plot = FALSE)

# Outcomes can be negated.
chg("(A+B&lt;-&gt;c)*(c+F&lt;-&gt;E)")

# Negative outcomes that appear positively downstream are rendered
# with double negation in the resulting hypergraph.
chg("(A+B&lt;-&gt;c)*(C+F&lt;-&gt;E)")

# Random formula.
x &lt;- randomCsf(6, n.asf = 2)
chg(x, show_formula = TRUE)
# Change the font of the formula.
chg(x, show_formula = TRUE, formula_font = "arial")
# Change the spacing.
chg(x, show_formula = TRUE, formula_spaces = c("+", "&lt;-&gt;"))

# Multi-value formula.
x &lt;- "(C=1*G=0 + T=1*A=0 + T=2*G=3 &lt;-&gt; P=1)*(P=1*M=0 + F=1 &lt;-&gt; D=1)"
causalHyperGraph(x)

# Random multi-value formula with 3 outcomes.
x &lt;- randomCsf(allCombs(c(3,3,3,3,3,3)), n.asf = 3)
gr2 &lt;- causalHyperGraph(x)
gr2

# Random multi-value formula with a random number of outcomes.  
y &lt;- randomCsf(allCombs(c(3,4,3,5,3,4)))
gr3 &lt;- chg(y, show_formula = TRUE)
gr3

# Concatenation.
gr4 &lt;- c(gr1,gr2,gr3)
plot(gr4)

# Subsetting.
gr5 &lt;- gr4[c(1,4)]
plot(gr5)

# Longer factor names.
x &lt;- paste("(Test1=1*Test2=3+Test3=2 &lt;-&gt; Out1=2)", 
           "(Out1=1*TestN=5 &lt;-&gt; Out2=3)", 
           "(TestN=4+TestK=1*Out2=1 &lt;-&gt; Out3=5)", 
           sep = "*")
chg(x)

</code></pre>

<hr>
<h2 id='export_as_svg'>Export causal hypergraphs in svg format</h2><span id='topic+export_as_svg'></span>

<h3>Description</h3>

<p><code>export_as_svg()</code> exports the hypergraphs to svg files for editing with svg software.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_as_svg(x, file, sep = "", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_as_svg_+3A_x">x</code></td>
<td>
<p>A graph generated with <code>causalHyperGraph()</code>.</p>
</td></tr>
<tr><td><code id="export_as_svg_+3A_file">file</code></td>
<td>
<p>Character vector specifying file names for the graphs in <code>x</code>, optionally with a path.
The file names must not include the extension &quot;.svg&quot;, which will be appended automatically. 
<code>file</code> can be of length 1 or <code>length(x)</code>. If <code>length(file)&lt;length(x)</code>, the name(s) in <code>file</code> 
is (are) recycled to <code>length(x)</code> and adjusted with <code><a href="base.html#topic+make.unique">make.unique</a>()</code>.</p>
</td></tr>
<tr><td><code id="export_as_svg_+3A_sep">sep</code></td>
<td>
<p>Separator passed to <code>make.unique()</code>.</p>
</td></tr>
<tr><td><code id="export_as_svg_+3A_verbose">verbose</code></td>
<td>
<p>Logical; if <code>TRUE</code> (default), additional information about the file names
is printed in the console. If <code>FALSE</code>, no information at all is printed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Although <code>causalHyperGraph()</code> optimizes the placement of the nodes and edges 
(using <a href="https://CRAN.R-project.org/package=DiagrammeR"><span class="pkg">DiagrammeR</span></a>) as much as possible,
the resulting graph may still need manual adjustments to enhance its readability. 
In case of multi-value graphs, for example, factor values may be packed too closely or even printed
on top of each other, calling for manual disentangling. Once the graphs have been exported via
<code>export_as_svg()</code> such adjustments can be made with any svg software, such as Inkscape, Adobe Illustrator, 
or Apache Batik. Moreover, svg files can easily be converted to pdf or other formats.
</p>


<h3>Value</h3>

<p>Returns the names of the generated file(s) invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+causalHyperGraph">causalHyperGraph</a></code>, and the methods <code><a href="#topic+plot.cna">plot.cna</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(cna)  # required for randomCsf() and allCombs()

# Manual crisp-set example.
x &lt;- "(X+Y&lt;-&gt;S)*(D+s*B&lt;-&gt;E)*(A+S*B&lt;-&gt;C)*(C+E&lt;-&gt;F)"
gr1 &lt;- causalHyperGraph(x)
export_as_svg(gr1, file.path(tempdir(), "csGraph"))

# Random multi-value example.
y &lt;- randomCsf(allCombs(c(3,4,3,5,3,4)))
gr2 &lt;- chg(y)
export_as_svg(gr2, file.path(tempdir(), "mvGraph"))

file.remove(file.path(tempdir(), c("csGraph.svg", "mvGraph.svg")))


</code></pre>

<hr>
<h2 id='plot.cna'>Create hypergraphs from solution objects of <code><a href="cna.html#topic+cna">cna</a>()</code> and related functions</h2><span id='topic+plot.cna'></span><span id='topic+plot.condTbl'></span><span id='topic+plot.condList'></span>

<h3>Description</h3>

<p>These <code>plot()</code> methods draw causal hypergraphs from the solution formulas included 
in the objects of the following classes
from package <a href="https://CRAN.R-project.org/package=cna"><span class="pkg">cna</span></a>:
</p>

<ul>
<li><p>class &ldquo;cna&rdquo;, the output of <code><a href="cna.html#topic+cna">cna</a>()</code>;
</p>
</li>
<li><p>class &ldquo;condTbl&rdquo;, the output of <code><a href="cna.html#topic+condTbl">condTbl</a>()</code>, 
<code><a href="cna.html#topic+csf">csf</a>()</code>, <code><a href="cna.html#topic+asf">asf</a>()</code> and <code><a href="cna.html#topic+msc">msc</a>()</code>;
</p>
</li>
<li><p>class &ldquo;condList&rdquo;, the output of <code><a href="cna.html#topic+condition">condition</a>()</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'condTbl'
plot(x, outcome = NULL, n = 10, ask = nrow(x) &gt; 1, ...)

## S3 method for class 'cna'
plot(x, what = c("csf", "asf", "msc"), ...)

## S3 method for class 'condList'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.cna_+3A_x">x</code></td>
<td>
<p>An object of an appropriate class.</p>
</td></tr>
<tr><td><code id="plot.cna_+3A_outcome">outcome</code></td>
<td>
<p>Character vector of factor names. Only solutions with one of these factors as outcome 
will be plotted. If <code>NULL</code> (default), all solutions are plotted.</p>
</td></tr>
<tr><td><code id="plot.cna_+3A_n">n</code></td>
<td>
<p>Positive integer; specifies the maximal number of graphs to render.</p>
</td></tr>
<tr><td><code id="plot.cna_+3A_ask">ask</code></td>
<td>
<p>Logical; if <code>TRUE</code>, the user is asked to hit &lt;Return&gt; before a new graph is drawn.</p>
</td></tr>
<tr><td><code id="plot.cna_+3A_...">...</code></td>
<td>
<p>Additional arguments in <code>plot.condTbl()</code> are passed to 
<code><a href="#topic+causalHyperGraph">causalHyperGraph</a>()</code>, in particular <code>show_formula</code>. 
Additional arguments in <code>plot.cna()</code> and <code>plot.condition()</code> 
are passed to <code>plot.condTbl()</code>, e.g. <code>n</code>, <code>outcome</code>, <code>ask</code>.</p>
</td></tr>
<tr><td><code id="plot.cna_+3A_what">what</code></td>
<td>
<p>One of <code>"csf"</code> (default), <code>"asf"</code>, <code>"msc"</code>, determining which type of solution to 
extract from the &ldquo;cna&rdquo; object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>These <code>plot()</code> methods return an object of class &ldquo;<a href="#topic+causalHyperGraph">causalHyperGraph</a>&rdquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(cna)

ana &lt;- cna(d.educate)
pl &lt;- plot(asf(ana))
pl

plot(csf(ana))
plot(csf(ana), ask = FALSE)

plot(ana)
plot(ana, show_formula = TRUE)
plot(ana, what = "msc", n = 5)

plot(msc(ana), outcome = "E")
plot(ana, what = "msc", outcome = "E")  # same as previous

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
