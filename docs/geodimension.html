<!DOCTYPE html><html><head><title>Help for package geodimension</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {geodimension}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_geometry'><p>Add geometry to a level</p></a></li>
<li><a href='#add_level'><p>Add a level to a dimension</p></a></li>
<li><a href='#add_prefix'><p>Add prefix</p></a></li>
<li><a href='#all_attributes_character'><p>All attributes are character</p></a></li>
<li><a href='#check_key'><p>Check key</p></a></li>
<li><a href='#complete_point_geometry'><p>Complete point geometry</p></a></li>
<li><a href='#complete_relation_by_geography'><p>Complete relation by geography</p></a></li>
<li><a href='#coordinates_to_geometry'><p>Transform coordinates to point geometry</p></a></li>
<li><a href='#define_relationship'><p>define relationship</p></a></li>
<li><a href='#gd_es'><p><code>gd_es</code></p></a></li>
<li><a href='#gd_us'><p><code>gd_us</code></p></a></li>
<li><a href='#geodimension'><p><code>geodimension</code> S3 class</p></a></li>
<li><a href='#geolevel'><p><code>geolevel</code> S3 class</p></a></li>
<li><a href='#get_empty_geometry_instances'><p>Get empty geometry instances</p></a></li>
<li><a href='#get_geometry'><p>Get geometry</p></a></li>
<li><a href='#get_higher_level_names'><p>Get higher level names</p></a></li>
<li><a href='#get_level_data'><p>Get level data</p></a></li>
<li><a href='#get_level_data_geo'><p>Get level data with latitude and longitude</p></a></li>
<li><a href='#get_level_geometries'><p>Get level geometries</p></a></li>
<li><a href='#get_level_keys'><p>get level keys</p></a></li>
<li><a href='#get_level_layer'><p>Get level layer</p></a></li>
<li><a href='#get_level_names'><p>Get level names</p></a></li>
<li><a href='#get_unrelated_instances'><p>Get unrelated instances</p></a></li>
<li><a href='#my_to_snake_case'><p>To snake case</p></a></li>
<li><a href='#relate_levels'><p>Relate levels in a dimension</p></a></li>
<li><a href='#select_levels'><p>Select levels</p></a></li>
<li><a href='#set_level_data'><p>Set level data</p></a></li>
<li><a href='#snake_case_geolevel'><p>snake case geolevel</p></a></li>
<li><a href='#sort_by_number_of_instances'><p>sort by number of instances</p></a></li>
<li><a href='#transform_crs'><p>Transform CRS</p></a></li>
<li><a href='#us_division'><p><code>us_division</code></p></a></li>
<li><a href='#validate_names'><p>Validate names</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Definition of Geographic Dimensions</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>The geographic dimension plays a fundamental role in
    multidimensional systems. To define a geographic dimension in a star
    schema, we need a table with attributes corresponding to the levels of
    the dimension. Additionally, we will also need one or more geographic
    layers to represent the data using this dimension. The goal of this
    package is to support the definition of geographic dimensions from
    layers of geographic information related to each other. It makes it
    easy to define relationships between layers and obtain the necessary
    data from them.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://josesamos.github.io/geodimension/">https://josesamos.github.io/geodimension/</a>,
<a href="https://github.com/josesamos/geodimension">https://github.com/josesamos/geodimension</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/josesamos/geodimension/issues">https://github.com/josesamos/geodimension/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, methods, sf, snakecase, tibble, tidyselect</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, pander, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-08 16:43:50 UTC; joses</td>
</tr>
<tr>
<td>Author:</td>
<td>Jose Samos <a href="https://orcid.org/0000-0002-4457-3439"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Universidad de Granada [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jose Samos &lt;jsamos@ugr.es&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-09 00:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_geometry'>Add geometry to a level</h2><span id='topic+add_geometry'></span><span id='topic+add_geometry.geolevel'></span>

<h3>Description</h3>

<p>A level can have several geometries (<em>point</em> or <em>polygon</em>). This function adds
the geometry of the layer to the level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_geometry(gl, layer, layer_key, level_key)

## S3 method for class 'geolevel'
add_geometry(gl, layer = NULL, layer_key = NULL, level_key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_geometry_+3A_gl">gl</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
<tr><td><code id="add_geometry_+3A_layer">layer</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="add_geometry_+3A_layer_key">layer_key</code></td>
<td>
<p>A vector of string.</p>
</td></tr>
<tr><td><code id="add_geometry_+3A_level_key">level_key</code></td>
<td>
<p>A vector of string.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The association of the geometry to the existing instances is done through join
using the level and layer keys.
</p>
<p>If none is indicated, by default the key defined in the level is considered.
</p>


<h3>Value</h3>

<p>A <code>geolevel</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+relate_levels">relate_levels</a></code>
</p>
<p>Other geolevel definition functions: 
<code><a href="#topic+check_key">check_key</a>()</code>,
<code><a href="#topic+complete_point_geometry">complete_point_geometry</a>()</code>,
<code><a href="#topic+coordinates_to_geometry">coordinates_to_geometry</a>()</code>,
<code><a href="#topic+geolevel">geolevel</a>()</code>,
<code><a href="#topic+get_empty_geometry_instances">get_empty_geometry_instances</a>()</code>,
<code><a href="#topic+get_geometry">get_geometry</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_state &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "state"),
    get_level_layer(gd_us, "state"),
    by = c("statefp", "division", "region", "stusps", "name")
  ) |&gt;
  sf::st_as_sf()

us_state_point &lt;-
  coordinates_to_geometry(layer_us_state,
                          lon_lat = c("intptlon", "intptlat"))

state &lt;-
  geolevel(name = "state",
           layer = layer_us_state,
           key = "statefp",
           snake_case = TRUE) |&gt;
  add_geometry(layer = us_state_point)

</code></pre>

<hr>
<h2 id='add_level'>Add a level to a dimension</h2><span id='topic+add_level'></span><span id='topic+add_level.geodimension'></span>

<h3>Description</h3>

<p>Once a level is part of the dimension, it can then be related to other levels
of the dimension.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_level(gd, level)

## S3 method for class 'geodimension'
add_level(gd, level = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_level_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="add_level_+3A_level">level</code></td>
<td>
<p>A <code>geolevel</code>, level to add to the dimension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geodimension</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geolevel">geolevel</a></code>, <code><a href="#topic+relate_levels">relate_levels</a></code>, <code><a href="#topic+get_level_layer">get_level_layer</a></code>
</p>
<p>Other geodimension definition functions: 
<code><a href="#topic+geodimension">geodimension</a>()</code>,
<code><a href="#topic+set_level_data">set_level_data</a>()</code>,
<code><a href="#topic+transform_crs">transform_crs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_place &lt;- gd_us |&gt;
  get_level_layer("place")

layer_us_county &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "county"),
    get_level_layer(gd_us, "county"),
    by = c("geoid", "statefp", "name", "type")
  ) |&gt;
  sf::st_as_sf()

place &lt;-
  geolevel(name = "place",
           layer = layer_us_place,
           attributes = c("statefp", "county_geoid", "name", "type"),
           key = "geoid")

county &lt;-
  geolevel(
    name = "county",
    layer = layer_us_county,
    attributes = c("statefp", "name", "type"),
    key = "geoid"
  ) |&gt;
  add_geometry(coordinates_to_geometry(layer_us_county,
                                       lon_lat = c("intptlon", "intptlat")))

gd_us &lt;-
  geodimension(name = "gd_us",
               level = place) |&gt;
  add_level(level = county)

</code></pre>

<hr>
<h2 id='add_prefix'>Add prefix</h2><span id='topic+add_prefix'></span>

<h3>Description</h3>

<p>Add prefix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_prefix(str, prefix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_prefix_+3A_str">str</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="add_prefix_+3A_prefix">prefix</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string.
</p>

<hr>
<h2 id='all_attributes_character'>All attributes are character</h2><span id='topic+all_attributes_character'></span>

<h3>Description</h3>

<p>All attributes are character
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_attributes_character(instances)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_attributes_character_+3A_instances">instances</code></td>
<td>
<p>A tibble.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>

<hr>
<h2 id='check_key'>Check key</h2><span id='topic+check_key'></span>

<h3>Description</h3>

<p>Check if the specified set of attributes can be the key of the table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_key(table, key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_key_+3A_table">table</code></td>
<td>
<p>A <code>tibble</code> object.</p>
</td></tr>
<tr><td><code id="check_key_+3A_key">key</code></td>
<td>
<p>A vector, attributes that compose the key.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The table can be a data table or a vector layer.
</p>


<h3>Value</h3>

<p>A boolean.
</p>


<h3>See Also</h3>

<p>Other geolevel definition functions: 
<code><a href="#topic+add_geometry">add_geometry</a>()</code>,
<code><a href="#topic+complete_point_geometry">complete_point_geometry</a>()</code>,
<code><a href="#topic+coordinates_to_geometry">coordinates_to_geometry</a>()</code>,
<code><a href="#topic+geolevel">geolevel</a>()</code>,
<code><a href="#topic+get_empty_geometry_instances">get_empty_geometry_instances</a>()</code>,
<code><a href="#topic+get_geometry">get_geometry</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_county &lt;- get_level_layer(gd_us, "county")

is_key &lt;- check_key(layer_us_county, key = c("statefp", "name"))

</code></pre>

<hr>
<h2 id='complete_point_geometry'>Complete point geometry</h2><span id='topic+complete_point_geometry'></span><span id='topic+complete_point_geometry.geolevel'></span>

<h3>Description</h3>

<p>In case of having the polygon geometry defined, it obtains the point geometry
from it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>complete_point_geometry(gl)

## S3 method for class 'geolevel'
complete_point_geometry(gl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="complete_point_geometry_+3A_gl">gl</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the point geometry was already defined, if there are instances with this
geometry empty, it completes them.
</p>


<h3>Value</h3>

<p>A <code>geolevel</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+relate_levels">relate_levels</a></code>
</p>
<p>Other geolevel definition functions: 
<code><a href="#topic+add_geometry">add_geometry</a>()</code>,
<code><a href="#topic+check_key">check_key</a>()</code>,
<code><a href="#topic+coordinates_to_geometry">coordinates_to_geometry</a>()</code>,
<code><a href="#topic+geolevel">geolevel</a>()</code>,
<code><a href="#topic+get_empty_geometry_instances">get_empty_geometry_instances</a>()</code>,
<code><a href="#topic+get_geometry">get_geometry</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_state &lt;- get_level_layer(gd_us, "state")

state &lt;-
  geolevel(name = "state",
           layer = layer_us_state,
           key = "statefp",
           snake_case = TRUE) |&gt;
  complete_point_geometry()

</code></pre>

<hr>
<h2 id='complete_relation_by_geography'>Complete relation by geography</h2><span id='topic+complete_relation_by_geography'></span><span id='topic+complete_relation_by_geography.geodimension'></span>

<h3>Description</h3>

<p>Two levels can be related by attributes or by geography (if the upper level
has polygon-type geometry). Once related, if there are unrelated instances,
we can try to relate those instances using this function, which considers
alternative geographic relationships.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>complete_relation_by_geography(
  gd,
  lower_level_name = NULL,
  upper_level_name = NULL
)

## S3 method for class 'geodimension'
complete_relation_by_geography(
  gd,
  lower_level_name = NULL,
  upper_level_name = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="complete_relation_by_geography_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="complete_relation_by_geography_+3A_lower_level_name">lower_level_name</code></td>
<td>
<p>A string, name of the lower level.</p>
</td></tr>
<tr><td><code id="complete_relation_by_geography_+3A_upper_level_name">upper_level_name</code></td>
<td>
<p>A string, name of the upper lever.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It does not necessarily succeed trying to relate instances.
</p>


<h3>Value</h3>

<p>A <code>geodimension</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other relationship between geolevels: 
<code><a href="#topic+get_unrelated_instances">get_unrelated_instances</a>()</code>,
<code><a href="#topic+relate_levels">relate_levels</a>()</code>,
<code><a href="#topic+select_levels">select_levels</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_place &lt;- gd_us |&gt;
  get_level_layer("place")

layer_us_county &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "county"),
    get_level_layer(gd_us, "county"),
    by = c("geoid", "statefp", "name", "type")
  ) |&gt;
  sf::st_as_sf()

place &lt;-
  geolevel(name = "place",
           layer = layer_us_place,
           attributes = c("statefp", "county_geoid", "name", "type"),
           key = "geoid")

county &lt;-
  geolevel(
    name = "county",
    layer = layer_us_county,
    attributes = c("statefp", "name", "type"),
    key = "geoid"
  ) |&gt;
  add_geometry(coordinates_to_geometry(layer_us_county,
                                       lon_lat = c("intptlon", "intptlat")))

gd &lt;-
  geodimension(name = "gd_us",
               level = place) |&gt;
  add_level(level = county)

gd &lt;- gd |&gt;
  relate_levels(
    lower_level_name = "place",
    lower_level_attributes = "county_geoid",
    upper_level_name = "county"
  ) |&gt;
  complete_relation_by_geography(
    lower_level_name = "place",
    upper_level_name = "county"
  )

</code></pre>

<hr>
<h2 id='coordinates_to_geometry'>Transform coordinates to point geometry</h2><span id='topic+coordinates_to_geometry'></span>

<h3>Description</h3>

<p>From the coordinates defined in fields such as latitude and longitude, it
returns a layer of points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coordinates_to_geometry(table, lon_lat = c("intptlon", "intptlat"), crs = 4326)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="coordinates_to_geometry_+3A_table">table</code></td>
<td>
<p>A <code>tibble</code> object.</p>
</td></tr>
<tr><td><code id="coordinates_to_geometry_+3A_lon_lat">lon_lat</code></td>
<td>
<p>A vector, name of longitude and latitude attributes.</p>
</td></tr>
<tr><td><code id="coordinates_to_geometry_+3A_crs">crs</code></td>
<td>
<p>A coordinate reference system: integer with the EPSG code, or
character with proj4string.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If we start from a geographic layer, it initially transforms it into a table.
</p>
<p>The CRS of the new layer is indicated. By default, it considers 4326 (WGS84).
</p>


<h3>Value</h3>

<p>A <code>sf</code> object.
</p>


<h3>See Also</h3>

<p>Other geolevel definition functions: 
<code><a href="#topic+add_geometry">add_geometry</a>()</code>,
<code><a href="#topic+check_key">check_key</a>()</code>,
<code><a href="#topic+complete_point_geometry">complete_point_geometry</a>()</code>,
<code><a href="#topic+geolevel">geolevel</a>()</code>,
<code><a href="#topic+get_empty_geometry_instances">get_empty_geometry_instances</a>()</code>,
<code><a href="#topic+get_geometry">get_geometry</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_county &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "county"),
    get_level_layer(gd_us, "county"),
    by = c("geoid", "statefp", "name", "type")
  ) |&gt;
  sf::st_as_sf()

us_county_point &lt;-
  coordinates_to_geometry(layer_us_county,
                          lon_lat = c("intptlon", "intptlat"))

</code></pre>

<hr>
<h2 id='define_relationship'>define relationship</h2><span id='topic+define_relationship'></span>

<h3>Description</h3>

<p>define relationship
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_relationship(gd, gdp, l, h)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_relationship_+3A_gd">gd</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
<tr><td><code id="define_relationship_+3A_gdp">gdp</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
<tr><td><code id="define_relationship_+3A_l">l</code></td>
<td>
<p>A string, name of the lower level.</p>
</td></tr>
<tr><td><code id="define_relationship_+3A_h">h</code></td>
<td>
<p>A string, name of the upper lever.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geolevel</code> object.
</p>

<hr>
<h2 id='gd_es'><code>gd_es</code></h2><span id='topic+gd_es'></span>

<h3>Description</h3>

<p><code>geodimension</code> obtained from vector layers over Spain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gd_es
</code></pre>


<h3>Format</h3>

<p>A <code>geodimension</code>.
</p>


<h3>Details</h3>

<p>It includes the levels nucleus, municipality, agricultural region, province,
autonomous community and country.
</p>


<h3>Source</h3>

<p><a href="https://centrodedescargas.cnig.es/CentroDescargas/">https://centrodedescargas.cnig.es/CentroDescargas/</a>,
<a href="https://www.mapa.gob.es/es/cartografia-y-sig/ide/descargas/agricultura/default.aspx">https://www.mapa.gob.es/es/cartografia-y-sig/ide/descargas/agricultura/default.aspx</a>
</p>

<hr>
<h2 id='gd_us'><code>gd_us</code></h2><span id='topic+gd_us'></span>

<h3>Description</h3>

<p><code>geodimension</code> obtained from vector layers over USA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gd_us
</code></pre>


<h3>Format</h3>

<p>A <code>geodimension</code>.
</p>


<h3>Details</h3>

<p>It includes the levels place, county, state, division, region and country.
</p>


<h3>Source</h3>

<p><a href="https://www.census.gov">https://www.census.gov</a>
</p>

<hr>
<h2 id='geodimension'><code>geodimension</code> S3 class</h2><span id='topic+geodimension'></span>

<h3>Description</h3>

<p>A <code>geodimension</code> object is created. A <code>geodimension</code> allows us to relate
levels. In addition to the name of the <code>geodimension</code> , a <code>level</code> has to be
given.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geodimension(name = NULL, level = NULL, snake_case = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geodimension_+3A_name">name</code></td>
<td>
<p>A string, name of the dimension.</p>
</td></tr>
<tr><td><code id="geodimension_+3A_level">level</code></td>
<td>
<p>A <code>geolevel</code>.</p>
</td></tr>
<tr><td><code id="geodimension_+3A_snake_case">snake_case</code></td>
<td>
<p>A boolean, transform all names to snake_case.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geodimension</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geolevel">geolevel</a></code>, <code><a href="#topic+relate_levels">relate_levels</a></code>, <code><a href="#topic+get_level_layer">get_level_layer</a></code>
</p>
<p>Other geodimension definition functions: 
<code><a href="#topic+add_level">add_level</a>()</code>,
<code><a href="#topic+set_level_data">set_level_data</a>()</code>,
<code><a href="#topic+transform_crs">transform_crs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_place &lt;- get_level_layer(gd_us, "place")

place &lt;-
  geolevel(name = "place",
           layer = layer_us_place,
           key = "geoid")
gd &lt;-
  geodimension(name = "gd_us",
               level = place)

</code></pre>

<hr>
<h2 id='geolevel'><code>geolevel</code> S3 class</h2><span id='topic+geolevel'></span>

<h3>Description</h3>

<p>A <code>geolevel</code> object is created from a given geographic layer. The attributes
of the layer to be included in the level can be indicated; if no attribute is
indicated, all are considered. The attributes that make up the key must be
indicated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geolevel(
  name = NULL,
  layer = NULL,
  attributes = NULL,
  key = NULL,
  snake_case = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geolevel_+3A_name">name</code></td>
<td>
<p>A string, level name.</p>
</td></tr>
<tr><td><code id="geolevel_+3A_layer">layer</code></td>
<td>
<p>A <code>tibble</code> or <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="geolevel_+3A_attributes">attributes</code></td>
<td>
<p>A string vector, selected attributes.</p>
</td></tr>
<tr><td><code id="geolevel_+3A_key">key</code></td>
<td>
<p>A string vector, attributes that compose the key.</p>
</td></tr>
<tr><td><code id="geolevel_+3A_snake_case">snake_case</code></td>
<td>
<p>A boolean, transform all names to snake_case.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A level can have two associated geometries (point or polygon). The geometry
is obtained from the layer data.
</p>
<p>We can also define a level from a <code>tibble</code>, which does not have any associated
geometry. The geometry will be obtained from the relationships between levels
that we define or from layers related to this data.
</p>
<p>The name of the level is used later to reference it and relate it to other
levels.
</p>


<h3>Value</h3>

<p>A <code>geolevel</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+relate_levels">relate_levels</a></code>
</p>
<p>Other geolevel definition functions: 
<code><a href="#topic+add_geometry">add_geometry</a>()</code>,
<code><a href="#topic+check_key">check_key</a>()</code>,
<code><a href="#topic+complete_point_geometry">complete_point_geometry</a>()</code>,
<code><a href="#topic+coordinates_to_geometry">coordinates_to_geometry</a>()</code>,
<code><a href="#topic+get_empty_geometry_instances">get_empty_geometry_instances</a>()</code>,
<code><a href="#topic+get_geometry">get_geometry</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_state &lt;- get_level_layer(gd_us, "state")

state &lt;-
  geolevel(name = "state",
           layer = layer_us_state,
           key = "statefp",
           snake_case = TRUE)

</code></pre>

<hr>
<h2 id='get_empty_geometry_instances'>Get empty geometry instances</h2><span id='topic+get_empty_geometry_instances'></span><span id='topic+get_empty_geometry_instances.geolevel'></span>

<h3>Description</h3>

<p>Get the instances of the data table that do not have associated geometry for
the specified geometry type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_empty_geometry_instances(gl, geometry)

## S3 method for class 'geolevel'
get_empty_geometry_instances(gl, geometry = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_empty_geometry_instances_+3A_gl">gl</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
<tr><td><code id="get_empty_geometry_instances_+3A_geometry">geometry</code></td>
<td>
<p>A string, type of geometry of the layer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tibble</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+relate_levels">relate_levels</a></code>
</p>
<p>Other geolevel definition functions: 
<code><a href="#topic+add_geometry">add_geometry</a>()</code>,
<code><a href="#topic+check_key">check_key</a>()</code>,
<code><a href="#topic+complete_point_geometry">complete_point_geometry</a>()</code>,
<code><a href="#topic+coordinates_to_geometry">coordinates_to_geometry</a>()</code>,
<code><a href="#topic+geolevel">geolevel</a>()</code>,
<code><a href="#topic+get_geometry">get_geometry</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_state &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "state"),
    get_level_layer(gd_us, "state"),
    by = c("statefp", "division", "region", "stusps", "name")
  ) |&gt;
  sf::st_as_sf()

us_state_point &lt;-
  coordinates_to_geometry(layer_us_state,
                          lon_lat = c("intptlon", "intptlat"))

state &lt;-
  geolevel(name = "state",
           layer = layer_us_state,
           key = "statefp",
           snake_case = TRUE) |&gt;
  add_geometry(layer = us_state_point)

empty_geometry_instances &lt;- state |&gt;
  get_empty_geometry_instances(geometry = "point")

</code></pre>

<hr>
<h2 id='get_geometry'>Get geometry</h2><span id='topic+get_geometry'></span>

<h3>Description</h3>

<p>Get the geometry of a layer, as it is interpreted to define a <code>geolevel</code>
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_geometry(layer)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_geometry_+3A_layer">layer</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It will only be valid if one of the three geometries is interpreted: <em>point</em>,
<em>line</em> or <em>polygon</em>.
</p>


<h3>Value</h3>

<p>A string.
</p>


<h3>See Also</h3>

<p>Other geolevel definition functions: 
<code><a href="#topic+add_geometry">add_geometry</a>()</code>,
<code><a href="#topic+check_key">check_key</a>()</code>,
<code><a href="#topic+complete_point_geometry">complete_point_geometry</a>()</code>,
<code><a href="#topic+coordinates_to_geometry">coordinates_to_geometry</a>()</code>,
<code><a href="#topic+geolevel">geolevel</a>()</code>,
<code><a href="#topic+get_empty_geometry_instances">get_empty_geometry_instances</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_county &lt;- get_level_layer(gd_us, "county")

geometry &lt;- get_geometry(layer_us_county)

</code></pre>

<hr>
<h2 id='get_higher_level_names'>Get higher level names</h2><span id='topic+get_higher_level_names'></span><span id='topic+get_higher_level_names.geodimension'></span>

<h3>Description</h3>

<p>Get the names of levels included in the <code>geodimension</code> that are related to the
given level and are upper levels. We can get only the direct levels or the
levels reached by passing through other levels.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_higher_level_names(gd, level_name, indirect_levels)

## S3 method for class 'geodimension'
get_higher_level_names(gd, level_name = NULL, indirect_levels = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_higher_level_names_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="get_higher_level_names_+3A_level_name">level_name</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="get_higher_level_names_+3A_indirect_levels">indirect_levels</code></td>
<td>
<p>A boolean.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other information gathering functions: 
<code><a href="#topic+get_level_data_geo">get_level_data_geo</a>()</code>,
<code><a href="#topic+get_level_data">get_level_data</a>()</code>,
<code><a href="#topic+get_level_geometries">get_level_geometries</a>()</code>,
<code><a href="#topic+get_level_layer">get_level_layer</a>()</code>,
<code><a href="#topic+get_level_names">get_level_names</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ln_1 &lt;- gd_us |&gt;
  get_higher_level_names(level_name = "place")

ln_2 &lt;- gd_us |&gt;
  get_higher_level_names(level_name = "place", indirect_levels = TRUE)

</code></pre>

<hr>
<h2 id='get_level_data'>Get level data</h2><span id='topic+get_level_data'></span><span id='topic+get_level_data.geodimension'></span>

<h3>Description</h3>

<p>Get the data table of a given level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_level_data(gd, level_name, inherited, add_prefix)

## S3 method for class 'geodimension'
get_level_data(gd, level_name = NULL, inherited = FALSE, add_prefix = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_level_data_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="get_level_data_+3A_level_name">level_name</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="get_level_data_+3A_inherited">inherited</code></td>
<td>
<p>A boolean.</p>
</td></tr>
<tr><td><code id="get_level_data_+3A_add_prefix">add_prefix</code></td>
<td>
<p>A boolean.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It allows selecting whether we want only the data defined locally in the level
or also those that it inherits from other higher levels with which it is related.
</p>
<p>In case of inheriting attributes from other levels, in the table, these can
have as a prefix the name of the level.
</p>


<h3>Value</h3>

<p>A <code>tibble</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other information gathering functions: 
<code><a href="#topic+get_higher_level_names">get_higher_level_names</a>()</code>,
<code><a href="#topic+get_level_data_geo">get_level_data_geo</a>()</code>,
<code><a href="#topic+get_level_geometries">get_level_geometries</a>()</code>,
<code><a href="#topic+get_level_layer">get_level_layer</a>()</code>,
<code><a href="#topic+get_level_names">get_level_names</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ld &lt;- gd_us |&gt;
  get_level_data(level_name = "county",
                 inherited = TRUE)

</code></pre>

<hr>
<h2 id='get_level_data_geo'>Get level data with latitude and longitude</h2><span id='topic+get_level_data_geo'></span><span id='topic+get_level_data_geo.geodimension'></span>

<h3>Description</h3>

<p>Get the data table of a given level with latitude and longitude.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_level_data_geo(gd, level_name, inherited, add_prefix, lon_lat, crs)

## S3 method for class 'geodimension'
get_level_data_geo(
  gd,
  level_name = NULL,
  inherited = FALSE,
  add_prefix = TRUE,
  lon_lat = c("intptlon", "intptlat"),
  crs = 4326
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_level_data_geo_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="get_level_data_geo_+3A_level_name">level_name</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="get_level_data_geo_+3A_inherited">inherited</code></td>
<td>
<p>A boolean.</p>
</td></tr>
<tr><td><code id="get_level_data_geo_+3A_add_prefix">add_prefix</code></td>
<td>
<p>A boolean.</p>
</td></tr>
<tr><td><code id="get_level_data_geo_+3A_lon_lat">lon_lat</code></td>
<td>
<p>A vector, name of longitude and latitude attributes.</p>
</td></tr>
<tr><td><code id="get_level_data_geo_+3A_crs">crs</code></td>
<td>
<p>A coordinate reference system: integer with the EPSG code, or
character with proj4string.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It allows selecting whether we want only the data defined locally in the level
or also those that it inherits from other higher levels with which it is related.
</p>
<p>In case of inheriting attributes from other levels, in the table, these can
have as a prefix the name of the level.
</p>
<p>Additionally, we indicate the names of the fields where longitude and latitude
will be stored, as well as the crs that is used, if they are different from the
default values.
</p>


<h3>Value</h3>

<p>A <code>tibble</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other information gathering functions: 
<code><a href="#topic+get_higher_level_names">get_higher_level_names</a>()</code>,
<code><a href="#topic+get_level_data">get_level_data</a>()</code>,
<code><a href="#topic+get_level_geometries">get_level_geometries</a>()</code>,
<code><a href="#topic+get_level_layer">get_level_layer</a>()</code>,
<code><a href="#topic+get_level_names">get_level_names</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ld &lt;- gd_us |&gt;
  get_level_data_geo(level_name = "county",
                     inherited = TRUE)

</code></pre>

<hr>
<h2 id='get_level_geometries'>Get level geometries</h2><span id='topic+get_level_geometries'></span><span id='topic+get_level_geometries.geodimension'></span>

<h3>Description</h3>

<p>Gets the geometry types defined for a given level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_level_geometries(gd, level_name)

## S3 method for class 'geodimension'
get_level_geometries(gd, level_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_level_geometries_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="get_level_geometries_+3A_level_name">level_name</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other information gathering functions: 
<code><a href="#topic+get_higher_level_names">get_higher_level_names</a>()</code>,
<code><a href="#topic+get_level_data_geo">get_level_data_geo</a>()</code>,
<code><a href="#topic+get_level_data">get_level_data</a>()</code>,
<code><a href="#topic+get_level_layer">get_level_layer</a>()</code>,
<code><a href="#topic+get_level_names">get_level_names</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
lg &lt;- gd_us |&gt;
  get_level_geometries(level_name = "state")

</code></pre>

<hr>
<h2 id='get_level_keys'>get level keys</h2><span id='topic+get_level_keys'></span>

<h3>Description</h3>

<p>Starting from a level, the keys of all the levels above it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_level_keys(gd, level_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_level_keys_+3A_gd">gd</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
<tr><td><code id="get_level_keys_+3A_level_name">level_name</code></td>
<td>
<p>A string, name of the level.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tibble</code> object.
</p>

<hr>
<h2 id='get_level_layer'>Get level layer</h2><span id='topic+get_level_layer'></span><span id='topic+get_level_layer.geodimension'></span><span id='topic+get_level_layer.geolevel'></span>

<h3>Description</h3>

<p>Get a geographic layer associated with a level. We can select the geometry
and, using boolean parameters, which attributes are included in the layer's
table: only the attributes that make up the key and, if applied to a geodimension,
inherited attributes to which the prefix of the level where they are defined
can be added.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_level_layer(gd, level_name, geometry, only_key, inherited, add_prefix)

## S3 method for class 'geodimension'
get_level_layer(
  gd,
  level_name = NULL,
  geometry = NULL,
  only_key = FALSE,
  inherited = FALSE,
  add_prefix = TRUE
)

## S3 method for class 'geolevel'
get_level_layer(
  gd,
  level_name = NULL,
  geometry = NULL,
  only_key = FALSE,
  inherited = FALSE,
  add_prefix = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_level_layer_+3A_gd">gd</code></td>
<td>
<p>A <code>geolevel</code> or <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="get_level_layer_+3A_level_name">level_name</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="get_level_layer_+3A_geometry">geometry</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="get_level_layer_+3A_only_key">only_key</code></td>
<td>
<p>A boolean.</p>
</td></tr>
<tr><td><code id="get_level_layer_+3A_inherited">inherited</code></td>
<td>
<p>A boolean.</p>
</td></tr>
<tr><td><code id="get_level_layer_+3A_add_prefix">add_prefix</code></td>
<td>
<p>A boolean.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>sf</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other information gathering functions: 
<code><a href="#topic+get_higher_level_names">get_higher_level_names</a>()</code>,
<code><a href="#topic+get_level_data_geo">get_level_data_geo</a>()</code>,
<code><a href="#topic+get_level_data">get_level_data</a>()</code>,
<code><a href="#topic+get_level_geometries">get_level_geometries</a>()</code>,
<code><a href="#topic+get_level_names">get_level_names</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_state &lt;- get_level_layer(gd_us, "state")

state &lt;-
  geolevel(name = "state",
           layer = layer_us_state,
           key = "statefp")

state_ll &lt;- state |&gt;
  get_level_layer("polygon")


county_ll &lt;- gd_us |&gt;
  get_level_layer(level_name = "county",
                  geometry = "polygon",
                  inherited = TRUE)

</code></pre>

<hr>
<h2 id='get_level_names'>Get level names</h2><span id='topic+get_level_names'></span><span id='topic+get_level_names.geodimension'></span>

<h3>Description</h3>

<p>Get the names of levels included in the <code>geodimension</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_level_names(gd)

## S3 method for class 'geodimension'
get_level_names(gd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_level_names_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of names.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other information gathering functions: 
<code><a href="#topic+get_higher_level_names">get_higher_level_names</a>()</code>,
<code><a href="#topic+get_level_data_geo">get_level_data_geo</a>()</code>,
<code><a href="#topic+get_level_data">get_level_data</a>()</code>,
<code><a href="#topic+get_level_geometries">get_level_geometries</a>()</code>,
<code><a href="#topic+get_level_layer">get_level_layer</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ln &lt;- gd_us |&gt;
  get_level_names()

</code></pre>

<hr>
<h2 id='get_unrelated_instances'>Get unrelated instances</h2><span id='topic+get_unrelated_instances'></span><span id='topic+get_unrelated_instances.geodimension'></span>

<h3>Description</h3>

<p>Given two previously related levels of a dimension, it obtains the instances
of the lower level that have not been related to the upper level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_unrelated_instances(gd, lower_level_name, upper_level_name)

## S3 method for class 'geodimension'
get_unrelated_instances(gd, lower_level_name = NULL, upper_level_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_unrelated_instances_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="get_unrelated_instances_+3A_lower_level_name">lower_level_name</code></td>
<td>
<p>A string, name of the lower level.</p>
</td></tr>
<tr><td><code id="get_unrelated_instances_+3A_upper_level_name">upper_level_name</code></td>
<td>
<p>A string, name of the upper lever.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tibble</code>, unrelated lower level instances.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other relationship between geolevels: 
<code><a href="#topic+complete_relation_by_geography">complete_relation_by_geography</a>()</code>,
<code><a href="#topic+relate_levels">relate_levels</a>()</code>,
<code><a href="#topic+select_levels">select_levels</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_place &lt;- gd_us |&gt;
  get_level_layer("place")

layer_us_county &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "county"),
    get_level_layer(gd_us, "county"),
    by = c("geoid", "statefp", "name", "type")
  ) |&gt;
  sf::st_as_sf()

place &lt;-
  geolevel(name = "place",
           layer = layer_us_place,
           attributes = c("statefp", "county_geoid", "name", "type"),
           key = "geoid")

county &lt;-
  geolevel(
    name = "county",
    layer = layer_us_county,
    attributes = c("statefp", "name", "type"),
    key = "geoid"
  ) |&gt;
  add_geometry(coordinates_to_geometry(layer_us_county,
                                       lon_lat = c("intptlon", "intptlat")))

gd &lt;-
  geodimension(name = "gd_us",
               level = place) |&gt;
  add_level(level = county)

gd &lt;- gd |&gt;
  relate_levels(
    lower_level_name = "place",
    upper_level_name = "county",
    by_geography = TRUE
  )

ui &lt;- gd |&gt;
  get_unrelated_instances(
    lower_level_name = "place",
    upper_level_name = "county"
  )

</code></pre>

<hr>
<h2 id='my_to_snake_case'>To snake case</h2><span id='topic+my_to_snake_case'></span>

<h3>Description</h3>

<p>To snake case
</p>


<h3>Usage</h3>

<pre><code class='language-R'>my_to_snake_case(str)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="my_to_snake_case_+3A_str">str</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of strings.
</p>

<hr>
<h2 id='relate_levels'>Relate levels in a dimension</h2><span id='topic+relate_levels'></span><span id='topic+relate_levels.geodimension'></span>

<h3>Description</h3>

<p>Definition of a direct relationship between two levels of the dimension: the
lower level composes the higher level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relate_levels(
  gd,
  lower_level_name,
  lower_level_attributes,
  upper_level_name,
  upper_level_key,
  by_geography
)

## S3 method for class 'geodimension'
relate_levels(
  gd,
  lower_level_name = NULL,
  lower_level_attributes = NULL,
  upper_level_name = NULL,
  upper_level_key = NULL,
  by_geography = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relate_levels_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="relate_levels_+3A_lower_level_name">lower_level_name</code></td>
<td>
<p>A string, name of the lower level.</p>
</td></tr>
<tr><td><code id="relate_levels_+3A_lower_level_attributes">lower_level_attributes</code></td>
<td>
<p>A vector of attribute names.</p>
</td></tr>
<tr><td><code id="relate_levels_+3A_upper_level_name">upper_level_name</code></td>
<td>
<p>A string, name of the upper lever.</p>
</td></tr>
<tr><td><code id="relate_levels_+3A_upper_level_key">upper_level_key</code></td>
<td>
<p>A vector of attribute names.</p>
</td></tr>
<tr><td><code id="relate_levels_+3A_by_geography">by_geography</code></td>
<td>
<p>A boolean.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The relationship may exist by having attributes with common values or by
their geographic attributes. In the latter case, the geometry of the upper
level must be of the polygon type.
</p>
<p>If no top-level attributes are indicated, the attributes that make up the key
are considered by default, only the corresponding attributes of the lower
level have to be indicated.
</p>
<p>To use the geometric relationship, it must be explicitly indicated by the
Boolean parameter. In this case, the attributes of the lower level must not
exist in the table, they will be added with the values of the key of the upper
level, according to the established relationship. If lower level attribute names
are not provided, they will be generated from the upper level key names, adding
a prefix.
</p>


<h3>Value</h3>

<p>A <code>geodimension</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other relationship between geolevels: 
<code><a href="#topic+complete_relation_by_geography">complete_relation_by_geography</a>()</code>,
<code><a href="#topic+get_unrelated_instances">get_unrelated_instances</a>()</code>,
<code><a href="#topic+select_levels">select_levels</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_place &lt;- gd_us |&gt;
  get_level_layer("place")

layer_us_county &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "county"),
    get_level_layer(gd_us, "county"),
    by = c("geoid", "statefp", "name", "type")
  ) |&gt;
  sf::st_as_sf()

place &lt;-
  geolevel(name = "place",
           layer = layer_us_place,
           attributes = c("statefp", "county_geoid", "name", "type"),
           key = "geoid")

county &lt;-
  geolevel(
    name = "county",
    layer = layer_us_county,
    attributes = c("statefp", "name", "type"),
    key = "geoid"
  ) |&gt;
  add_geometry(coordinates_to_geometry(layer_us_county,
                                       lon_lat = c("intptlon", "intptlat")))

gd &lt;-
  geodimension(name = "gd_us",
               level = place) |&gt;
  add_level(level = county)

gd &lt;- gd |&gt;
  relate_levels(
    lower_level_name = "place",
    lower_level_attributes = "county_geoid",
    upper_level_name = "county"
  )

gd_2 &lt;- gd |&gt;
  relate_levels(
    lower_level_name = "place",
    upper_level_name = "county",
    by_geography = TRUE
  )

</code></pre>

<hr>
<h2 id='select_levels'>Select levels</h2><span id='topic+select_levels'></span><span id='topic+select_levels.geodimension'></span>

<h3>Description</h3>

<p>Select a subset of the levels of the dimension so that the rest of the levels
no longer belong to it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_levels(gd, level_names = NULL)

## S3 method for class 'geodimension'
select_levels(gd, level_names = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_levels_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="select_levels_+3A_level_names">level_names</code></td>
<td>
<p>A vector of names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geodimension</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodimension">geodimension</a></code>, <code><a href="#topic+geolevel">geolevel</a></code>
</p>
<p>Other relationship between geolevels: 
<code><a href="#topic+complete_relation_by_geography">complete_relation_by_geography</a>()</code>,
<code><a href="#topic+get_unrelated_instances">get_unrelated_instances</a>()</code>,
<code><a href="#topic+relate_levels">relate_levels</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gd_us_2 &lt;- gd_us |&gt;
  select_levels(level_names = c("state", "county", "place", "region"))

</code></pre>

<hr>
<h2 id='set_level_data'>Set level data</h2><span id='topic+set_level_data'></span><span id='topic+set_level_data.geodimension'></span>

<h3>Description</h3>

<p>Set the data table of a given level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_level_data(gd, level_name, data)

## S3 method for class 'geodimension'
set_level_data(gd, level_name = NULL, data = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_level_data_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="set_level_data_+3A_level_name">level_name</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="set_level_data_+3A_data">data</code></td>
<td>
<p>A <code>tibble</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>We can get the table, filter or transform the data and redefine the level table.
</p>
<p>It is checked that the attributes that have been used in the relationships
remain in the table.
</p>


<h3>Value</h3>

<p>A <code>geodimension</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geolevel">geolevel</a></code>, <code><a href="#topic+get_level_data">get_level_data</a></code>
</p>
<p>Other geodimension definition functions: 
<code><a href="#topic+add_level">add_level</a>()</code>,
<code><a href="#topic+geodimension">geodimension</a>()</code>,
<code><a href="#topic+transform_crs">transform_crs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ld &lt;- gd_us |&gt;
  get_level_data(level_name = "county",
                 inherited = TRUE)

gd_us &lt;- gd_us |&gt;
  set_level_data(level_name = "county",
                 data = ld)

</code></pre>

<hr>
<h2 id='snake_case_geolevel'>snake case geolevel</h2><span id='topic+snake_case_geolevel'></span>

<h3>Description</h3>

<p>snake case geolevel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>snake_case_geolevel(gl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="snake_case_geolevel_+3A_gl">gl</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geolevel</code> object.
</p>

<hr>
<h2 id='sort_by_number_of_instances'>sort by number of instances</h2><span id='topic+sort_by_number_of_instances'></span>

<h3>Description</h3>

<p>sort by number of instances
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sort_by_number_of_instances(gd, level_names, decreasing = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sort_by_number_of_instances_+3A_gd">gd</code></td>
<td>
<p>A <code>geolevel</code> object.</p>
</td></tr>
<tr><td><code id="sort_by_number_of_instances_+3A_level_names">level_names</code></td>
<td>
<p>A string vector.</p>
</td></tr>
<tr><td><code id="sort_by_number_of_instances_+3A_decreasing">decreasing</code></td>
<td>
<p>A boolean, decreasing order.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string vector.
</p>

<hr>
<h2 id='transform_crs'>Transform CRS</h2><span id='topic+transform_crs'></span><span id='topic+transform_crs.geodimension'></span>

<h3>Description</h3>

<p>Transform the CRS of all the layers included in the dimension to the one
indicated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_crs(gd, crs = NULL)

## S3 method for class 'geodimension'
transform_crs(gd, crs = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_crs_+3A_gd">gd</code></td>
<td>
<p>A <code>geodimension</code> object.</p>
</td></tr>
<tr><td><code id="transform_crs_+3A_crs">crs</code></td>
<td>
<p>A coordinate reference system: integer with the EPSG code, or
character with proj4string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geodimension</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geolevel">geolevel</a></code>, <code><a href="#topic+relate_levels">relate_levels</a></code>, <code><a href="#topic+get_level_layer">get_level_layer</a></code>
</p>
<p>Other geodimension definition functions: 
<code><a href="#topic+add_level">add_level</a>()</code>,
<code><a href="#topic+geodimension">geodimension</a>()</code>,
<code><a href="#topic+set_level_data">set_level_data</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
layer_us_place &lt;- gd_us |&gt;
  get_level_layer("place")

layer_us_county &lt;-
  dplyr::inner_join(
    get_level_data_geo(gd_us, "county"),
    get_level_layer(gd_us, "county"),
    by = c("geoid", "statefp", "name", "type")
  ) |&gt;
  sf::st_as_sf()

place &lt;-
  geolevel(name = "place",
           layer = layer_us_place,
           attributes = c("statefp", "county_geoid", "name", "type"),
           key = "geoid")

county &lt;-
  geolevel(
    name = "county",
    layer = layer_us_county,
    attributes = c("statefp", "name", "type"),
    key = "geoid"
  ) |&gt;
  add_geometry(coordinates_to_geometry(layer_us_county,
                                       lon_lat = c("intptlon", "intptlat")))

gd_us &lt;-
  geodimension(name = "gd_us",
               level = place) |&gt;
  add_level(level = county) |&gt;
  transform_crs(crs = 3857)

</code></pre>

<hr>
<h2 id='us_division'><code>us_division</code></h2><span id='topic+us_division'></span>

<h3>Description</h3>

<p>US Divisions and Regions (code and name).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>us_division
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code> object.
</p>

<hr>
<h2 id='validate_names'>Validate names</h2><span id='topic+validate_names'></span>

<h3>Description</h3>

<p>Validate names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_names(defined_names, names, concept = "name", repeated = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_names_+3A_defined_names">defined_names</code></td>
<td>
<p>A vector of strings, defined attribute names.</p>
</td></tr>
<tr><td><code id="validate_names_+3A_names">names</code></td>
<td>
<p>A vector of strings, new attribute names.</p>
</td></tr>
<tr><td><code id="validate_names_+3A_concept">concept</code></td>
<td>
<p>A string, treated concept.</p>
</td></tr>
<tr><td><code id="validate_names_+3A_repeated">repeated</code></td>
<td>
<p>A boolean, repeated names allowed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of strings, names.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
