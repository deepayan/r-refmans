<!DOCTYPE html><html><head><title>Help for package icardaFIGSr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {icardaFIGSr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#durumDaily'><p>durumDaily</p></a></li>
<li><a href='#durumWC'><p>durumWC</p></a></li>
<li><a href='#extractWCdata'><p>Extracting World Climatic Data</p></a></li>
<li><a href='#FIGS'><p>FIGS subset for wheat sodicity resistance</p></a></li>
<li><a href='#getAccessions'><p>Getting Accession Data from ICARDA's Genebank Documentation System</p></a></li>
<li><a href='#getCrops'><p>Crops Available in ICARDA's Genebank</p></a></li>
<li><a href='#getDaily'><p>Extracting Daily Climatic Variables</p></a></li>
<li><a href='#getGrowthPeriod'><p>Calculating Growing Degree Days and Lengths of Growth Stages for Various Crops Using Onset Data from ICARDA's Database</p></a></li>
<li><a href='#getMetrics'><p>Performance Measures</p></a></li>
<li><a href='#getMetricsPCA'><p>Performance Measures with PCA pre-processing</p></a></li>
<li><a href='#getOnset'><p>Extracting Daily Climatic Variables Based on Onset of Planting</p></a></li>
<li><a href='#getTraits'><p>Getting Traits Associated with Crops from the ICARDA's Genebank Documentation System</p></a></li>
<li><a href='#getTraitsData'><p>Getting Trait Values of Accessions for a Specific Trait</p></a></li>
<li><a href='#mapAccessions'><p>Plotting Accessions on Map.</p></a></li>
<li><a href='#modelingSummary'><p>Get modeling metrics</p></a></li>
<li><a href='#septoriaDurumWC'><p>septoriaDurumWC</p></a></li>
<li><a href='#splitData'><p>Splitting Data</p></a></li>
<li><a href='#tuneTrain'><p>Tuning and Training the Data</p></a></li>
<li><a href='#varimpPred'><p>Variable Importance and Predictions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Subsetting using Focused Identification of the Germplasm
Strategy (FIGS)</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Running Focused Identification of the Germplasm Strategy (FIGS) to make best subsets from Genebank Collection.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>caret, doParallel, dplyr, ggplot2,foreach, httr, magrittr,
methods, plotROC, plyr, raster, reshape2, sp, leaflet</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-12-10 09:51:06 UTC; azizk</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Author:</td>
<td>Khadija Aziz [aut],
  Zakaria Kehel [aut, cre],
  Bancy Ngatia [aut],
  Khadija Aouzal [aut],
  Zainab Azough [ctb],
  Amal Ibnelhobyb [ctb],
  Fawzy Nawar [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zakaria Kehel &lt;z.kehel@cgiar.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-12-10 12:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='durumDaily'>durumDaily</h2><span id='topic+durumDaily'></span>

<h3>Description</h3>

<p>200 sites from durum wheat collection and their daily climatic data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(durumDaily)
</code></pre>


<h3>Format</h3>

<p>The data includes the site unique identifier and daily data for 4 climatic variables (tmin, tmax, precipitation and relative humidity)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Load durum wheat data with their daily climatic variables obtained from ICARDA database
 data(durumDaily)
}
</code></pre>

<hr>
<h2 id='durumWC'>durumWC</h2><span id='topic+durumWC'></span>

<h3>Description</h3>

<p>200 sites from durum wheat collection and their world clim data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(durumWC)
</code></pre>


<h3>Format</h3>

<p>The data includes the site unique identifier, longitude, latitude and 55 worldclim data <a href="https://www.worldclim.org">worldclim</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Load durum wheat data with world climatic variables obtained from WorldClim database
 data(durumWC)
 }
</code></pre>

<hr>
<h2 id='extractWCdata'>Extracting World Climatic Data</h2><span id='topic+extractWCdata'></span>

<h3>Description</h3>

<p>extractWCdata returns a data frame based on specified climatic variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extractWCdata(sites, long, lat, var, res = 2.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractWCdata_+3A_sites">sites</code></td>
<td>
<p>object of class &quot;data.frame&quot; with coordinates of sites from which to extract data.</p>
</td></tr>
<tr><td><code id="extractWCdata_+3A_long">long</code></td>
<td>
<p>character. Name of column from <code>sites</code> with longitude.</p>
</td></tr>
<tr><td><code id="extractWCdata_+3A_lat">lat</code></td>
<td>
<p>character. Name of column from <code>sites</code> with latitude.</p>
</td></tr>
<tr><td><code id="extractWCdata_+3A_var">var</code></td>
<td>
<p>character. Climatic variable(s) to be extracted: 'tavg', 'tmin', 'tmax', 'prec', 'bio', 'srad', 'vapr', 'wind'</p>
</td></tr>
<tr><td><code id="extractWCdata_+3A_res">res</code></td>
<td>
<p>numeric. Spatial resolution. Default 2.5</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A grid can be created with any particular coordinates and used as input for <code>sites</code> (see section 'Examples'). <code>extractWCdata</code> will use the given coordinates to extract data from the WorldClim2.1 database.
The extracted data will most likely contain NA's for sites where climatic data is not available. These should be removed or imputed before using the data to make predictions.
</p>


<h3>Value</h3>

<p>An object of class &quot;data.frame&quot; with specified climatic variables for coordinates in <code>sites</code>.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Fawzy Nawar, Bancy Ngatia, Khadija Aouzal
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Create grid
 sp1 &lt;- seq(-16, 115, length = 10)
 sp2 &lt;- seq(25, 59, length = 10)
 sp &lt;- expand.grid(x = sp1, y = sp2)

 # Extract data using grid
 sp.df0 &lt;- extractWCdata(sp, long = 'x', lat = 'y', var = 'tavg')
 sp.df &lt;- na.omit(sp.df0)
 }
</code></pre>

<hr>
<h2 id='FIGS'>FIGS subset for wheat sodicity resistance</h2><span id='topic+FIGS'></span>

<h3>Description</h3>

<p>FIGS subset for wheat sodicity resistance
constructed using the harmonized world soil database HWSD
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(FIGS)
</code></pre>


<h3>Format</h3>

<p>A data frame with 201 rows and 15 variables
</p>


<h3>References</h3>

<p><a href="https://www.fao.org/3/aq361e/aq361e.pdf">HWSD</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 data(FIGS)
}
</code></pre>

<hr>
<h2 id='getAccessions'>Getting Accession Data from ICARDA's Genebank Documentation System</h2><span id='topic+getAccessions'></span>

<h3>Description</h3>

<p>Return a data frame with accession data for the specified crop.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAccessions(
  crop = "",
  ori = NULL,
  IG = "",
  doi = FALSE,
  taxon = FALSE,
  collectionYear = FALSE,
  coor = FALSE,
  available = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getAccessions_+3A_crop">crop</code></td>
<td>
<p>character. Crop for which to get accession data. See section 'Details' for available crops or use <code><a href="#topic+getCrops">getCrops</a></code> function. Default: &quot;&quot;.</p>
</td></tr>
<tr><td><code id="getAccessions_+3A_ori">ori</code></td>
<td>
<p>string. Country of origin using the ISO 3166-1 alpha-3 country codes. Default: NULL.</p>
</td></tr>
<tr><td><code id="getAccessions_+3A_ig">IG</code></td>
<td>
<p>integer. Unique identifier of accession. Default: &quot;&quot;.</p>
</td></tr>
<tr><td><code id="getAccessions_+3A_doi">doi</code></td>
<td>
<p>boolean. If <code>TRUE</code> , the function will return the digital object identifiers DOI for the accessions. Default: FALSE.</p>
</td></tr>
<tr><td><code id="getAccessions_+3A_taxon">taxon</code></td>
<td>
<p>boolean. If <code>TRUE</code>, the function will return the taxon information of the accessions. Default: FALSE.</p>
</td></tr>
<tr><td><code id="getAccessions_+3A_collectionyear">collectionYear</code></td>
<td>
<p>boolean. If <code>TRUE</code>, the function will return the year of the collecting mission. Default: FALSE.</p>
</td></tr>
<tr><td><code id="getAccessions_+3A_coor">coor</code></td>
<td>
<p>boolean. If <code>TRUE</code>, returns only georeferenced accessions containing longitude and latitude. Default: FALSE.</p>
</td></tr>
<tr><td><code id="getAccessions_+3A_available">available</code></td>
<td>
<p>boolean. If <code>TRUE</code>, returns the availability of accessions for distribution, Default: FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Types of crops available include:
</p>

<ul>
<li><p>'Aegilops'
</p>
</li>
<li><p>'Barley'
</p>
</li>
<li><p>'Bread wheat'
</p>
</li>
<li><p>'Chickpea'
</p>
</li>
<li><p>'Durum wheat'
</p>
</li>
<li><p>'Faba bean'
</p>
</li>
<li><p>'Faba bean BPL'
</p>
</li>
<li><p>'Forage and range'
</p>
</li>
<li><p>'Lathyrus'
</p>
</li>
<li><p>'Lentil'
</p>
</li>
<li><p>'Medicago annual'
</p>
</li>
<li><p>'Not mandate cereals'
</p>
</li>
<li><p>'Pisum'
</p>
</li>
<li><p>'Primitive wheat'
</p>
</li>
<li><p>'Trifolium'
</p>
</li>
<li><p>'Vicia'
</p>
</li>
<li><p>'Wheat hybrids'
</p>
</li>
<li><p>'Wheat wild relatives'
</p>
</li>
<li><p>'Wild Cicer'
</p>
</li>
<li><p>'Wild Hordeum'
</p>
</li>
<li><p>'Wild Lens'
</p>
</li>
<li><p>'Wild Triticum'
</p>
</li></ul>

<p>Alternatively, the list of available crops can be fetched from ICARDA's online server using <code><a href="#topic+getCrops">getCrops</a></code>.
</p>


<h3>Value</h3>

<p>A data frame with accession passport data for specified crop in <code>crop</code> from the locations in <code>ori</code>.
</p>


<h3>Author(s)</h3>

<p>Khadija Aouzal, Amal Ibnelhobyb, Zakaria Kehel, Fawzy Nawar
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Obtain accession data for durum wheat
 durum &lt;- getAccessions(crop = 'Durum wheat', coor = TRUE)
}
</code></pre>

<hr>
<h2 id='getCrops'>Crops Available in ICARDA's Genebank</h2><span id='topic+getCrops'></span>

<h3>Description</h3>

<p>this function allows to obtain a list of crops available in ICARDA's Genebank Documentation System, it returns a list with codes and names of available crops.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCrops()
</code></pre>


<h3>Details</h3>

<p>The crop codes and names are fetched from ICARDA's online server.
</p>


<h3>Value</h3>

<p>A list containing all crops available in ICARDA's Genebank Documentation System.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Fawzy Nawar
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Get list of available crops
 crops &lt;- getCrops()
 }
</code></pre>

<hr>
<h2 id='getDaily'>Extracting Daily Climatic Variables</h2><span id='topic+getDaily'></span>

<h3>Description</h3>

<p>this function extracts daily values of climatic variables from ICARDA Data, it returns a list or data frame based on specified climatic variables. Each variable will have 365 values for each day of the calendar year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDaily(sites, var, cv = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDaily_+3A_sites">sites</code></td>
<td>
<p>character. Names of sites from which to extract data.</p>
</td></tr>
<tr><td><code id="getDaily_+3A_var">var</code></td>
<td>
<p>character. Climatic variable(s) to be extracted.</p>
</td></tr>
<tr><td><code id="getDaily_+3A_cv">cv</code></td>
<td>
<p>boolean. If <code>TRUE</code>, returns a data frame with coefficient of variation for each variable for each day of the calendar year. Default: FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ICARDA data has to be accessible either from a local directory on the computer or from an online repository. <code>getDaily</code> will extract the climatic variables specified in <code>var</code> for the sites specified in <code>sites</code>.
</p>
<p>For daily data, the function extracts average daily values starting from the first day of the calendar year, i.e. January 1, until the last day of the calendar year, i.e. December 31. Thus, 365 columns with daily values are created for each variable.
</p>


<h3>Value</h3>

<p>An object with specified climatic variables for names in <code>sites</code>.
</p>
<p>If <code>cv = TRUE</code>, the object is a list containing two data frames: the first one with average daily values of climatic variables, and the second one with daily coefficient of variation for each climatic variable.
</p>
<p>If <code>cv = FALSE</code>, the object is a data frame with average daily values of climatic variables.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Bancy Ngatia
</p>


<h3>See Also</h3>

<p><code><a href="reshape2.html#topic+cast">cast</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Extract daily data for durum wheat
 durum &lt;- getAccessions(crop = 'Durum wheat', coor = TRUE)
 daily &lt;- getDaily(sites = levels(as.factor(durum$SiteCode)),
                   var = c('tavg', 'prec', 'rh'), cv = TRUE)

 # Get data frame with coefficient of variation from list object
 # returned (when cv = TRUE)
 daily.cv &lt;- daily[[2]]
 }
</code></pre>

<hr>
<h2 id='getGrowthPeriod'>Calculating Growing Degree Days and Lengths of Growth Stages for Various Crops Using Onset Data from ICARDA's Database</h2><span id='topic+getGrowthPeriod'></span>

<h3>Description</h3>

<p>Calculates growing degree days (GDD) as well as cumulative GDD, and returns a list of various data frames based on specified arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getGrowthPeriod(sitecode, crop, base, max, gdd = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getGrowthPeriod_+3A_sitecode">sitecode</code></td>
<td>
<p>expression. Vector with names of sites from which to extract onset data.</p>
</td></tr>
<tr><td><code id="getGrowthPeriod_+3A_crop">crop</code></td>
<td>
<p>character. Type of crop in ICARDA database. See section 'Details' for crops which have calculations available.</p>
</td></tr>
<tr><td><code id="getGrowthPeriod_+3A_base">base</code></td>
<td>
<p>integer. Minimum temperature constraint for the crop.</p>
</td></tr>
<tr><td><code id="getGrowthPeriod_+3A_max">max</code></td>
<td>
<p>integer. Maximum temperature constraint for the crop.</p>
</td></tr>
<tr><td><code id="getGrowthPeriod_+3A_gdd">gdd</code></td>
<td>
<p>boolean. If <code>TRUE</code>, returns a data frame containing calculated GDD and accumulated GDD together with climatic variables used for the calculations. Default: FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Growing degree days for various crops are calculated using average daily minimum and maximum temperature values obtained from onset data. The temperature constraints specified in <code>base</code> and <code>max</code> are first applied before the calculations are done. These constraints ensure very low or high temperatures which prevent growth of a particular crop are not included.
Crops for which GDD calculations are available include: 'Durum wheat', 'Bread wheat', 'Barley', 'Chickpea', 'Lentil'. Each of these can be supplied as options for the argument <code>crop</code>.
Cumulative GDD values determine the length of different growing stages. Growing stages vary depending on the type of crop. Durum wheat, bread wheat and barley have five growth stages, i.e. beginning of heading, beginning and completion of flowering, and beginning and completion of grain filling. Chickpea and lentil have four growth stages, i.e. beginning of flowering, completion of 50
The length of the full growth cycle of the crop for each site is also given in the output data frame.
</p>


<h3>Value</h3>

<p>A list object with different data frames depending on specified option in <code>gdd</code>.
If <code>gdd = TRUE</code>, the object is a list containing three data frames: the first one with lengths of different growing stages, the second one with original onset data with phenological variables, and the third one with calculated GDD and accumulated GDD for the sites specified in <code>sitecode</code>.
If <code>gdd = FALSE</code>, the object is a list containing two data frames: the first one with lengths of different growing stages, and the second one with original onset data with phenological variables for the sites specified in <code>sitecode</code>.
</p>


<h3>Author(s)</h3>

<p>Khadija Aouzal, Zakaria Kehel, Bancy Ngatia
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Calculate GDD for durum wheat
 data(durumDaily)
 growth &lt;- getGrowthPeriod(sitecode = durumDaily$site_code,
                           crop = 'Durum wheat', base = 0,
                           max = 35, gdd = TRUE)

 # Get data frame with lengths of growth stages from list
 # object returned
 growth.lengths &lt;- growth[[1]]

 # Get data frame with phenotypic variables from list
 # object returned
 growth.pheno &lt;- growth[[2]]

 # Get data frame with GDD, cumulative GDD and climatic
 # variables from list object returned (when gdd = TRUE)
 growth.gdd &lt;- growth[[3]]
 }
</code></pre>

<hr>
<h2 id='getMetrics'>Performance Measures</h2><span id='topic+getMetrics'></span>

<h3>Description</h3>

<p>this function allows to obtain performance measures from Confusion Matrix, it returns a data frame containing performance measures from the confusion matrix given by the <code>caret</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMetrics(y, yhat, classtype)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMetrics_+3A_y">y</code></td>
<td>
<p>expression. The class variable.</p>
</td></tr>
<tr><td><code id="getMetrics_+3A_yhat">yhat</code></td>
<td>
<p>expression. The vector of predicted values.</p>
</td></tr>
<tr><td><code id="getMetrics_+3A_classtype">classtype</code></td>
<td>
<p>character or numeric. The number of levels in <code>y</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getMetrics</code> works with target variables that have two, three, four, six or eight classes.
</p>
<p>The function relies on the <code>caret</code> package to obtain the confusion matrix from which performance measures are extracted. It can be run for several algorithms, and the results combined into one data frame for easier comparison (see section 'Examples').
</p>
<p>Predictions have to be obtained beforehand and used as input for <code>yhat</code>. The <code>predict.train</code> function in <code>caret</code> should be run without argument <code>type</code> when obtaining the predictions.
</p>


<h3>Value</h3>

<p>Outputs an object with performance measures calculated from the confusion matrix given by the <code>caret</code> package. A data frame is the resulting output with the first column giving the name of the performance measure, and the second column giving the corresponding value.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Bancy Ngatia, Khadija Aziz
</p>


<h3>See Also</h3>

<p><code><a href="caret.html#topic+confusionMatrix">confusionMatrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
# Obtain predictions from previous models
 
data(septoriaDurumWC)  
split.data &lt;- splitData(septoriaDurumWC, seed = 1234, y = "ST_S", p = 0.7)
data.train &lt;- split.data$trainset
data.test &lt;- split.data$testset

knn.mod &lt;- tuneTrain(data = septoriaDurumWC,y = 'ST_S',method = 'knn',positive = 'R')
nnet.mod &lt;- tuneTrain(data = septoriaDurumWC,y = 'ST_S',method = 'nnet',positive = 'R') 

pred.knn &lt;- predict(knn.mod$Model, newdata = data.test[ , -1])
pred.nnet &lt;- predict(nnet.mod$Model, newdata = data.test[ , -1])

metrics.knn &lt;- getMetrics(y = data.test$ST_S, yhat = pred.knn, classtype = 2)
metrics.nnet &lt;- getMetrics(y = data.test$ST_S, yhat = pred.nnet, classtype = 2)
}
</code></pre>

<hr>
<h2 id='getMetricsPCA'>Performance Measures with PCA pre-processing</h2><span id='topic+getMetricsPCA'></span>

<h3>Description</h3>

<p>getMetricsPCA allows to obtain performance measures from Confusion Matrix for algorithms with PCA pre-processing,it returns a data frame containing performance measures from the confusion matrix given by the <code>caret</code> package when algorithms have been run with PCA pre-processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMetricsPCA(yhat, y, classtype, model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMetricsPCA_+3A_yhat">yhat</code></td>
<td>
<p>expression. The vector of predicted values.</p>
</td></tr>
<tr><td><code id="getMetricsPCA_+3A_y">y</code></td>
<td>
<p>expression. The class variable.</p>
</td></tr>
<tr><td><code id="getMetricsPCA_+3A_classtype">classtype</code></td>
<td>
<p>character or numeric. The number of levels in <code>y</code>.</p>
</td></tr>
<tr><td><code id="getMetricsPCA_+3A_model">model</code></td>
<td>
<p>expression. The model object to which output of the model has been assigned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Works with target variables that have two, three, four, six or eight classes. Similar to <code><a href="#topic+getMetrics">getMetrics</a></code> but used in the case where models have been run with PCA specified as an option for the <code>preProcess</code> argument in the <code>train</code> function of <code>caret</code>.
</p>


<h3>Value</h3>

<p>Outputs an object with performance measures calculated from the confusion matrix given by the <code>caret</code> package. A data frame is the resulting output with the first column giving the name of the performance measure, and the second column giving the corresponding value.
</p>


<h3>Author(s)</h3>

<p>Khadija Aziz, Zainab Azough, Zakaria Kehel, Bancy Ngatia
</p>


<h3>See Also</h3>

<p><code><a href="caret.html#topic+confusionMatrix">confusionMatrix</a></code>,
<code><a href="caret.html#topic+predict.train">predict.train</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Obtain predictions from several previously run models
 dataX &lt;- subset(data, select = -y)
 pred.knn &lt;- predict(model.knn, newdata = dataX)
 pred.rf &lt;- predict(model.rf, newdata = dataX)

 # Get metrics for several algorithms
 metrics.knn &lt;- getMetricsPCA(y = data$y, yhat = pred.knn,
                              classtype = 2, model = model.knn)
 metrics.rf &lt;- getMetricsPCA(y = data$y, yhat = pred.rf,
                             classtype = 2, model = model.rf)

 # Indexing for 2-class models to remove extra column with
 # names of performance measures
 metrics.all &lt;- cbind(metrics.knn, metrics.rf[ , 2])

 # No indexing needed for 3-, 4-, 6- or 8-class models
 metrics.all &lt;- cbind(metrics.knn, metrics.rf)
 }
</code></pre>

<hr>
<h2 id='getOnset'>Extracting Daily Climatic Variables Based on Onset of Planting</h2><span id='topic+getOnset'></span>

<h3>Description</h3>

<p>this function Extracts Daily values of climatic variables from remote ICARDA data based on Onset of Planting, it returns a list based on specified climatic variables. Each variable will have 365 values for each day of the (onset) year beginning with planting day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getOnset(sites, crop, var, cv = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getOnset_+3A_sites">sites</code></td>
<td>
<p>character. Names of sites from which to extract data.</p>
</td></tr>
<tr><td><code id="getOnset_+3A_crop">crop</code></td>
<td>
<p>character. Crop code in ICARDA database. See section 'Details' for a list of crops.</p>
</td></tr>
<tr><td><code id="getOnset_+3A_var">var</code></td>
<td>
<p>character. Climatic variable(s) to be extracted.</p>
</td></tr>
<tr><td><code id="getOnset_+3A_cv">cv</code></td>
<td>
<p>boolean. If <code>TRUE</code>, returns a data frame with coefficient of variation for each variable for each day of the onset year. Default: FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Similar to <code><a href="#topic+getDaily">getDaily</a></code> except the extracted data is based on 365 days starting from the onset of planting.
Crops available in ICARDA's genebank documentation system include the following:
</p>

<ul>
<li><p>'ICAG' = Aegilops
</p>
</li>
<li><p>'ICB' = Barley
</p>
</li>
<li><p>'ICBW' = Bread wheat
</p>
</li>
<li><p>'ILC' = Chickpea
</p>
</li>
<li><p>'ICDW' = Durum wheat
</p>
</li>
<li><p>'ILB' = Faba bean
</p>
</li>
<li><p>'BPL' = Faba bean BPL
</p>
</li>
<li><p>'IFMI' = Forage and range
</p>
</li>
<li><p>'IFLA' = Lathyrus
</p>
</li>
<li><p>'ILL' = Lentil
</p>
</li>
<li><p>'IFMA' = Medicago annual
</p>
</li>
<li><p>'IC' = Not mandate cereals
</p>
</li>
<li><p>'IFPI' = Pisum
</p>
</li>
<li><p>'ICPW' = Primitive wheat
</p>
</li>
<li><p>'IFTR' = Trifolium
</p>
</li>
<li><p>'IFVI' = Vicia
</p>
</li>
<li><p>'ICWH' = Wheat hybrids
</p>
</li>
<li><p>'ICWW' = Wheat wild relatives
</p>
</li>
<li><p>'ILWC' = Wild Cicer
</p>
</li>
<li><p>'ICWB' = Wild Hordeum
</p>
</li>
<li><p>'ILWL' = Wild Lens
</p>
</li>
<li><p>'ICWT' = Wild Triticum
</p>
</li></ul>

<p>Alternatively, the list of available crops can be fetched from ICARDA's online server using <code><a href="#topic+getCrops">getCrops</a></code>.
</p>


<h3>Value</h3>

<p>An object of class &quot;data.frame&quot; with specified climatic variables for names in <code>sites</code>.
</p>
<p>If <code>cv = TRUE</code>, the object is a list containing three data frames: the first one with average daily values of climatic variables, the second one with daily coefficient of variation for each climatic variable, and the third one with phenotypic variables and number of day in calendar year when each occurs at the sites specified in <code>sites</code>.
</p>
<p>If <code>cv = FALSE</code>, the object is a list containing two data frames: the first one with average daily values of climatic variables, and the second one with phenotypic variables and number of day in calendar year when each occurs at the sites specified in <code>sites</code>.
</p>


<h3>Author(s)</h3>

<p>Khadija Aouzal, Amal Ibnelhobyb, Zakaria Kehel, Bancy Ngatia
</p>


<h3>See Also</h3>

<p><code><a href="reshape2.html#topic+dcast">dcast</a></code>,
<code><a href="#topic+getCrops">getCrops</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Extract onset data for durum wheat
 durum &lt;- getAccessions(crop = 'Durum wheat', coor = TRUE)
 onset &lt;- getOnset(sites = levels(as.factor(durum$SiteCode)), crop = 'ICDW',
                   var = c('tavg', 'prec', 'rh'), cv = TRUE)

 # Get data frame with climatic variables from list object returned
 onset.clim &lt;- onset[[1]]

 # Get data frame with coefficient of variation from list object
 # returned (when cv = TRUE)
 onset.cv &lt;- onset[[2]]

 # Get data frame with phenotypic variables from list object returned
 onset.pheno &lt;- onset[[3]]
 }
</code></pre>

<hr>
<h2 id='getTraits'>Getting Traits Associated with Crops from the ICARDA's Genebank Documentation System</h2><span id='topic+getTraits'></span>

<h3>Description</h3>

<p>Return a data frame containing traits associated with a particular crop, their description and related identifiers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTraits(crop)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getTraits_+3A_crop">crop</code></td>
<td>
<p>character. Crop for which to get available traits.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getTraits</code> returns a data frame of traits together with their IDs and coding system used for each trait.
</p>
<p>Possible inputs for <code>crop</code> include:
</p>

<ul>
<li><p>'Aegilops'
</p>
</li>
<li><p>'Barley'
</p>
</li>
<li><p>'Bread wheat'
</p>
</li>
<li><p>'Chickpea'
</p>
</li>
<li><p>'Durum wheat'
</p>
</li>
<li><p>'Faba bean'
</p>
</li>
<li><p>'Faba bean BPL'
</p>
</li>
<li><p>'Forage and range'
</p>
</li>
<li><p>'Lathyrus'
</p>
</li>
<li><p>'Lentil'
</p>
</li>
<li><p>'Medicago annual'
</p>
</li>
<li><p>'Not mandate cereals'
</p>
</li>
<li><p>'Pisum'
</p>
</li>
<li><p>'Primitive wheat'
</p>
</li>
<li><p>'Trifolium'
</p>
</li>
<li><p>'Vicia'
</p>
</li>
<li><p>'Wheat hybrids'
</p>
</li>
<li><p>'Wheat wild relatives'
</p>
</li>
<li><p>'Wild Cicer'
</p>
</li>
<li><p>'Wild Hordeum'
</p>
</li>
<li><p>'Wild Lens'
</p>
</li>
<li><p>'Wild Triticum'
</p>
</li></ul>

<p>A list of available crops to use as input for <code>crop</code> can also be obtained from ICARDA's online server using <code><a href="#topic+getCrops">getCrops</a></code>.
</p>


<h3>Value</h3>

<p>A data frame with traits that are associated with the crop specified in <code>crop</code>.
</p>


<h3>Author(s)</h3>

<p>Khadija Aouzal, Amal Ibnelhobyb, Zakaria Kehel, Fawzy Nawar
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Get traits for bread wheat
 breadTraits &lt;- getTraits(crop = 'Bread wheat')
}
</code></pre>

<hr>
<h2 id='getTraitsData'>Getting Trait Values of Accessions for a Specific Trait</h2><span id='topic+getTraitsData'></span>

<h3>Description</h3>

<p>Return a data frame with observed values of accessions for associated Trait
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTraitsData(IG, traitID)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getTraitsData_+3A_ig">IG</code></td>
<td>
<p>factor. Unique identifier of accession.</p>
</td></tr>
<tr><td><code id="getTraitsData_+3A_traitid">traitID</code></td>
<td>
<p>integer. Unique identifier of trait (from <code><a href="#topic+getTraits">getTraits</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Possible inputs for <code>traitID</code> can be found using the <code><a href="#topic+getTraits">getTraits</a></code> function (see section 'Examples').
</p>


<h3>Value</h3>

<p>A data frame with scores for the trait specified in <code>traitID</code> for the accessions given in <code>IG</code>.
</p>


<h3>Author(s)</h3>

<p>Khadija Aouzal, Amal Ibnelhobyb, Zakaria Kehel, Fawzy Nawar
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Check trait ID for septoria and get septoria data for durum wheat
 durum &lt;- getAccessions(crop = 'Durum wheat', coor = TRUE)
 durumTraits &lt;- getTraits(crop = 'Durum wheat')
 septoria &lt;- getTraitsData(IG = durum$IG, traitID = 145)
}
</code></pre>

<hr>
<h2 id='mapAccessions'>Plotting Accessions on Map.</h2><span id='topic+mapAccessions'></span>

<h3>Description</h3>

<p>this function returns a map with points showing where accessions are located.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapAccessions(df, long, lat, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mapAccessions_+3A_df">df</code></td>
<td>
<p>object of class &quot;data.frame&quot; with coordinates of accessions and target variable.</p>
</td></tr>
<tr><td><code id="mapAccessions_+3A_long">long</code></td>
<td>
<p>character. Column name from <code>df</code> representing longitude.</p>
</td></tr>
<tr><td><code id="mapAccessions_+3A_lat">lat</code></td>
<td>
<p>character. Column name from <code>df</code> representing latitude.</p>
</td></tr>
<tr><td><code id="mapAccessions_+3A_y">y</code></td>
<td>
<p>Default: NULL, column name from <code>df</code> representing the target variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A world map with plotted points showing locations of accessions.
</p>


<h3>Author(s)</h3>

<p>Khadija Aouzal, Zakaria Kehel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Loading FIGS subset for wheat sodicity resistance
 data(FIGS)
 # World Map showing locations of accessions
 mapAccessions(df = FIGS, long = "Longitude", lat = "Latitude")
 
 # Map plotting locations of accessions with points coloured 
 # based on a gradient scale of SodicityIndex values
 mapAccessions(FIGS, long = "Longitude", lat = "Latitude", 
               y = "SodicityIndex")
 # Map plotting locations of accessions with points
 # coloured based on levels of y 
 mapAccessions(FIGS, long = "Longitude", lat = "Latitude", 
 y = "PopulationType")
 }
</code></pre>

<hr>
<h2 id='modelingSummary'>Get modeling metrics</h2><span id='topic+modelingSummary'></span>

<h3>Description</h3>

<p>modelingSummary is an automatic function for modeling data, it returns a dataframe containing the metrics of the modeling using five machine learning algorithms: KNN, SVM, RF, NNET, and Bcart. This function is based on spliData, tuneTrain, predict, and getMetrics functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modelingSummary(
  data,
  y,
  p = 0.7,
  length = 10,
  control = "repeatedcv",
  number = 10,
  repeats = 10,
  process = c("center", "scale"),
  summary = multiClassSummary,
  positive,
  parallelComputing = FALSE,
  classtype,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modelingSummary_+3A_data">data</code></td>
<td>
<p>object of class &quot;data.frame&quot; with target variable and predictor variables.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_y">y</code></td>
<td>
<p>character. Target variable.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_p">p</code></td>
<td>
<p>numeric. Proportion of data to be used for training. Default: 0.7</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_length">length</code></td>
<td>
<p>integer. Number of values to output for each tuning parameter. If <code>search = "random"</code> is passed to <code><a href="caret.html#topic+trainControl">trainControl</a></code> through <code>...</code>, this becomes the maximum number of tuning parameter combinations that are generated by the random search. Default: 10.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_control">control</code></td>
<td>
<p>character. Resampling method to use. Choices include: &quot;boot&quot;, &quot;boot632&quot;, &quot;optimism_boot&quot;, &quot;boot_all&quot;, &quot;cv&quot;, &quot;repeatedcv&quot;, &quot;LOOCV&quot;, &quot;LGOCV&quot;, &quot;none&quot;, &quot;oob&quot;, timeslice, &quot;adaptive_cv&quot;, &quot;adaptive_boot&quot;, or &quot;adaptive_LGOCV&quot;. Default: &quot;repeatedcv&quot;. See <code><a href="caret.html#topic+train">train</a></code> for specific details on the resampling methods.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_number">number</code></td>
<td>
<p>integer. Number of cross-validation folds or number of resampling iterations. Default: 10.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_repeats">repeats</code></td>
<td>
<p>integer. Number of folds for repeated k-fold cross-validation if &quot;repeatedcv&quot; is chosen as the resampling method in <code>control</code>. Default: 10.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_process">process</code></td>
<td>
<p>character. Defines the pre-processing transformation of predictor variables to be done. Options are: &quot;BoxCox&quot;, &quot;YeoJohnson&quot;, &quot;expoTrans&quot;, &quot;center&quot;, &quot;scale&quot;, &quot;range&quot;, &quot;knnImpute&quot;, &quot;bagImpute&quot;, &quot;medianImpute&quot;, &quot;pca&quot;, &quot;ica&quot;, or &quot;spatialSign&quot;. See <code><a href="caret.html#topic+preProcess">preProcess</a></code> for specific details on each pre-processing transformation. Default: c('center', 'scale').</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_summary">summary</code></td>
<td>
<p>expression. Computes performance metrics across resamples. For numeric <code>y</code>, the mean squared error and R-squared are calculated. For factor <code>y</code>, the overall accuracy and Kappa are calculated. See <code><a href="caret.html#topic+trainControl">trainControl</a></code> and <code><a href="caret.html#topic+defaultSummary">defaultSummary</a></code> for details on specification and summary options. Default: multiClassSummary.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_positive">positive</code></td>
<td>
<p>character. The positive class for the target variable if <code>y</code> is factor. Usually, it is the first level of the factor.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_parallelcomputing">parallelComputing</code></td>
<td>
<p>logical. indicates whether to also use the parallel processing. Default: False</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_classtype">classtype</code></td>
<td>
<p>integer.indicates the number of classes of the traits.</p>
</td></tr>
<tr><td><code id="modelingSummary_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code>createDataPartition</code>, <code>trainControl</code> and <code>train</code> functions in the package <code>caret</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Types of classification and regression models available for use with <code>tuneTrain</code> can be found using <code>names(getModelInfo())</code>. The results given depend on the type of model used.
</p>


<h3>Value</h3>

<p>A dataframe contains the metrics of the modeling of five machine learning algorithms: KNN, SVM, RF, NNET, and Bcart.
</p>
<p><code>tuneTrain</code> relies on package <code>caret</code> to perform the modeling.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Khadija Aziz
</p>


<h3>See Also</h3>

<p><code><a href="caret.html#topic+createDataPartition">createDataPartition</a></code>,
<code><a href="caret.html#topic+trainControl">trainControl</a></code>,
<code><a href="caret.html#topic+train">train</a></code>,
<code><a href="caret.html#topic+predict.train">predict.train</a></code>,
<code><a href="caret.html#topic+confusionMatrix">confusionMatrix</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 data(septoriaDurumWC)
 models &lt;- modelingSummary(data = septoriaDurumWC, y = "ST_S", positive = "R", classtype = 2)
}
</code></pre>

<hr>
<h2 id='septoriaDurumWC'>septoriaDurumWC</h2><span id='topic+septoriaDurumWC'></span>

<h3>Description</h3>

<p>A sample data including daily data for 4 climatic variables (tmin, tmax, precipitation and relative humidity) and evaluation for Septoria Tritici
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(septoriaDurumWC)
</code></pre>


<h3>Format</h3>

<p>200 sites from durum wheat collection and their daily climatic data and evaluation for Septoria Tritici.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 #Load durum wheat data with septoria scores and climatic variables obtained from WorldClim database
 data(septoriaDurumWC)
}
</code></pre>

<hr>
<h2 id='splitData'>Splitting Data</h2><span id='topic+splitData'></span>

<h3>Description</h3>

<p>this function splits the Data into Train and Test Sets, it returns a list containing two data frames for the train and test sets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>splitData(data, seed = NULL, y, p, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="splitData_+3A_data">data</code></td>
<td>
<p>object of class &quot;data.frame&quot; with target variable and predictor variables.</p>
</td></tr>
<tr><td><code id="splitData_+3A_seed">seed</code></td>
<td>
<p>integer. Values for the random number generator. Default: NULL.</p>
</td></tr>
<tr><td><code id="splitData_+3A_y">y</code></td>
<td>
<p>character. Target variable.</p>
</td></tr>
<tr><td><code id="splitData_+3A_p">p</code></td>
<td>
<p>numeric. Proportion of data to be used for training.</p>
</td></tr>
<tr><td><code id="splitData_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code>createDataPartition</code> function in <code>caret</code> package to control the way the data is split.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>splitData</code> relies on the <code>createDataPartition</code> function from the <code>caret</code> package to perform the data split.
</p>
<p>If <code>y</code> is a factor, the sampling of observations for each set is done within the levels of <code>y</code> such that the class distributions are more or less balanced for each set.
</p>
<p>If <code>y</code> is numeric, the data is split into groups based on percentiles and the sampling done within these subgroups. See <code><a href="caret.html#topic+createDataPartition">createDataPartition</a></code> for more details on additional arguments that can be passed.
</p>


<h3>Value</h3>

<p>A list with two data frames: the first as train set, and the second as test set.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Bancy Ngatia
</p>


<h3>See Also</h3>

<p><code><a href="caret.html#topic+createDataPartition">createDataPartition</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Split the data into 70/30 train and test sets for factor y
 data(septoriaDurumWC)
 split.data &lt;- splitData(septoriaDurumWC, seed = 1234,
                         y = 'ST_S', p = 0.7)

 # Get training and test sets from list object returned
 trainset &lt;- split.data$trainset
 testset &lt;- split.data$testset
}
</code></pre>

<hr>
<h2 id='tuneTrain'>Tuning and Training the Data</h2><span id='topic+tuneTrain'></span>

<h3>Description</h3>

<p>tuneTrain splits the Data, it is an automatic function for tuning, training, and making predictions, it returns a list containing a model object, data frame and plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tuneTrain(
  data,
  y,
  p = 0.7,
  method = method,
  parallelComputing = FALSE,
  length = 10,
  control = "repeatedcv",
  number = 10,
  repeats = 10,
  process = c("center", "scale"),
  summary = multiClassSummary,
  positive,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tuneTrain_+3A_data">data</code></td>
<td>
<p>object of class &quot;data.frame&quot; with target variable and predictor variables.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_y">y</code></td>
<td>
<p>character. Target variable.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_p">p</code></td>
<td>
<p>numeric. Proportion of data to be used for training. Default: 0.7</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_method">method</code></td>
<td>
<p>character. Type of model to use for classification or regression.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_parallelcomputing">parallelComputing</code></td>
<td>
<p>logical. indicates whether to also use the parallel processing. Default: False</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_length">length</code></td>
<td>
<p>integer. Number of values to output for each tuning parameter. If <code>search = "random"</code> is passed to <code><a href="caret.html#topic+trainControl">trainControl</a></code> through <code>...</code>, this becomes the maximum number of tuning parameter combinations that are generated by the random search. Default: 10.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_control">control</code></td>
<td>
<p>character. Resampling method to use. Choices include: &quot;boot&quot;, &quot;boot632&quot;, &quot;optimism_boot&quot;, &quot;boot_all&quot;, &quot;cv&quot;, &quot;repeatedcv&quot;, &quot;LOOCV&quot;, &quot;LGOCV&quot;, &quot;none&quot;, &quot;oob&quot;, timeslice, &quot;adaptive_cv&quot;, &quot;adaptive_boot&quot;, or &quot;adaptive_LGOCV&quot;. Default: &quot;repeatedcv&quot;. See <code><a href="caret.html#topic+train">train</a></code> for specific details on the resampling methods.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_number">number</code></td>
<td>
<p>integer. Number of cross-validation folds or number of resampling iterations. Default: 10.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_repeats">repeats</code></td>
<td>
<p>integer. Number of folds for repeated k-fold cross-validation if &quot;repeatedcv&quot; is chosen as the resampling method in <code>control</code>. Default: 10.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_process">process</code></td>
<td>
<p>character. Defines the pre-processing transformation of predictor variables to be done. Options are: &quot;BoxCox&quot;, &quot;YeoJohnson&quot;, &quot;expoTrans&quot;, &quot;center&quot;, &quot;scale&quot;, &quot;range&quot;, &quot;knnImpute&quot;, &quot;bagImpute&quot;, &quot;medianImpute&quot;, &quot;pca&quot;, &quot;ica&quot;, or &quot;spatialSign&quot;. See <code><a href="caret.html#topic+preProcess">preProcess</a></code> for specific details on each pre-processing transformation. Default: c('center', 'scale').</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_summary">summary</code></td>
<td>
<p>expression. Computes performance metrics across resamples. For numeric <code>y</code>, the mean squared error and R-squared are calculated. For factor <code>y</code>, the overall accuracy and Kappa are calculated. See <code><a href="caret.html#topic+trainControl">trainControl</a></code> and <code><a href="caret.html#topic+defaultSummary">defaultSummary</a></code> for details on specification and summary options. Default: multiClassSummary.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_positive">positive</code></td>
<td>
<p>character. The positive class for the target variable if <code>y</code> is factor. Usually, it is the first level of the factor.</p>
</td></tr>
<tr><td><code id="tuneTrain_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code>createDataPartition</code>, <code>trainControl</code> and <code>train</code> functions in the package <code>caret</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Types of classification and regression models available for use with <code>tuneTrain</code> can be found using <code>names(getModelInfo())</code>. The results given depend on the type of model used.
</p>
<p>For classification models, class probabilities and ROC curve are given in the results. For regression models, predictions and residuals versus predicted plot are given. <code>y</code> should be converted to either factor if performing classification or numeric if performing regression before specifying it in <code>tuneTrain</code>.
</p>


<h3>Value</h3>

<p>A list object with results from tuning and training the model selected in <code>method</code>, together with predictions and class probabilities. The training and test data sets obtained from splitting the data are also returned.
</p>
<p>If <code>y</code> is factor, class probabilities are calculated for each class. If <code>y</code> is numeric, predicted values are calculated.
</p>
<p>A ROC curve is created if <code>y</code> is factor. Otherwise, a plot of residuals versus predicted values is created if <code>y</code> is numeric.
</p>
<p><code>tuneTrain</code> relies on packages <code>caret</code>, <code>ggplot2</code> and <code>plotROC</code> to perform the modelling and plotting.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Bancy Ngatia, Khadija Aziz
</p>


<h3>See Also</h3>

<p><code><a href="caret.html#topic+createDataPartition">createDataPartition</a></code>,
<code><a href="caret.html#topic+trainControl">trainControl</a></code>,
<code><a href="caret.html#topic+train">train</a></code>,
<code><a href="caret.html#topic+predict.train">predict.train</a></code>,
<code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>,
<code><a href="plotROC.html#topic+geom_roc">geom_roc</a></code>,
<code><a href="plotROC.html#topic+calc_auc">calc_auc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 data(septoriaDurumWC)
 knn.mod &lt;- tuneTrain(data = septoriaDurumWC,y = 'ST_S',method = 'knn',positive = 'R')
 
 nnet.mod &lt;- tuneTrain(data = septoriaDurumWC,y = 'ST_S',method = 'nnet',positive = 'R')

}
</code></pre>

<hr>
<h2 id='varimpPred'>Variable Importance and Predictions</h2><span id='topic+varimpPred'></span>

<h3>Description</h3>

<p>varimpPred calculates Variable Importance and makes predictions, it returns a list containing a data frame of variable importance scores, predictions or class probabilities, and corresponding plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varimpPred(
  newdata,
  y,
  positive,
  model,
  scale = FALSE,
  auc = FALSE,
  predict = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="varimpPred_+3A_newdata">newdata</code></td>
<td>
<p>object of class &quot;data.frame&quot; having test data.</p>
</td></tr>
<tr><td><code id="varimpPred_+3A_y">y</code></td>
<td>
<p>character. Target variable.</p>
</td></tr>
<tr><td><code id="varimpPred_+3A_positive">positive</code></td>
<td>
<p>character. The positive class for the target variable if y is factor. Usually, it is the first level of the factor.</p>
</td></tr>
<tr><td><code id="varimpPred_+3A_model">model</code></td>
<td>
<p>expression. The model object returned after training a model on training data.</p>
</td></tr>
<tr><td><code id="varimpPred_+3A_scale">scale</code></td>
<td>
<p>boolean. If <code>TRUE</code>, scales the variable importance values to between 0-100. Default: FALSE.</p>
</td></tr>
<tr><td><code id="varimpPred_+3A_auc">auc</code></td>
<td>
<p>boolean. If <code>TRUE</code>, calculates the area under the ROC curve and returns the value. Default: FALSE.</p>
</td></tr>
<tr><td><code id="varimpPred_+3A_predict">predict</code></td>
<td>
<p>boolean. If <code>TRUE</code>, calculates class probabilities and returns them as a data frame. Default: FALSE</p>
</td></tr>
<tr><td><code id="varimpPred_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code>varImp</code> function in the package <code>caret</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The importance measure for each variable is calculated based on the type of model.
</p>
<p>For example for linear models, the absolute value of the t-statistic of each parameter is used in the importance calculation.
</p>
<p>For classification models, with the exception of classification trees, bagged trees and boosted trees, a variable importance score is calculated for each class. See <code><a href="caret.html#topic+varImp">varImp</a></code> for details on model-specific metrics.
</p>
<p><code>varimpPred</code> can be used to obtain either variable importance metrics, predictions, class probabilities, or a combination of these.
</p>
<p>For classification models with <code>predict = TRUE</code>, class probabilities and ROC curve are given in the results.
</p>
<p>For regression models with <code>predict = TRUE</code>, predictions and residuals versus predicted plot are given.
</p>


<h3>Value</h3>

<p>A list object with importance measures for variables in <code>newdata</code>, predictions for regression models, class probabilities for classification models, and corresponding plots.
</p>
<p><code>newdata</code> should be either the test data that remains after splitting whole data into training and test sets, or a new data set different from the one used to train the model.
</p>
<p>If <code>y</code> is factor, class probabilities are calculated for each class. If <code>y</code> is numeric, predicted values are calculated.
</p>
<p>A ROC curve is created if <code>predict = TRUE</code> and <code>y</code> is factor. Otherwise, a plot of residuals versus predicted values is created if <code>y</code> is numeric.
</p>
<p><code>varimpPred</code> relies on packages <code>caret</code>, <code>ggplot2</code> and <code>plotROC</code> to perform the calculations and plotting.
</p>


<h3>Author(s)</h3>

<p>Zakaria Kehel, Bancy Ngatia, Khadija Aziz, Zainab Azough
</p>


<h3>See Also</h3>

<p><code><a href="caret.html#topic+varImp">varImp</a></code>,
<code><a href="caret.html#topic+predict.train">predict.train</a></code>,
<code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>,
<code><a href="plotROC.html#topic+geom_roc">geom_roc</a></code>,
<code><a href="plotROC.html#topic+calc_auc">calc_auc</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
 # Calculate variable importance for classification model
 data("septoriaDurumWC")
 knn.mod &lt;- tuneTrain(data = septoriaDurumWC,y = 'ST_S',method = 'knn')
 testdata &lt;- knn.mod$`Test Data`
 knn.varimp&lt;- varimpPred(newdata = testdata, y='ST_S', positive = 'R', model = knn.mod$Model)
 knn.varimp
 
 # Calculate variable importance and obtain class probabilities
 data("septoriaDurumWC")
 svm.mod &lt;- tuneTrain(data = septoriaDurumWC, y = 'ST_S',method = 'svmLinear2',
                   predict = TRUE, positive = 'R',summary = twoClassSummary)
 testdata &lt;- svm.mod$`Test Data`
 svm.varimp &lt;- varimpPred(newdata = testdata, y = 'ST_S',
                          positive = 'R', model = svm.mod$Model,
                          ROC = TRUE, predict = TRUE)
 svm.varimp
 # Obtain variable importance plot for only first 20 variables
 # with highest measure
 svm.varimp &lt;- varimpPred(newdata = testdata, y = 'ST_S',
                          positive = 'R', model = svm.mod$Model,
                          ROC = TRUE, predict = TRUE, top = 20)
 svm.varimp
 }
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
