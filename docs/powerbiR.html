<!DOCTYPE html><html lang="en-US"><head><title>Help for package powerbiR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {powerbiR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dim_hour'><p>Demo data: Dim Hour</p></a></li>
<li><a href='#fact_visitors'><p>Demo data: Fact Visitors</p></a></li>
<li><a href='#pbi_auth'><p>Authenticate to Power BI</p></a></li>
<li><a href='#pbi_dataset_refresh'><p>Refresh dataset</p></a></li>
<li><a href='#pbi_dataset_refresh_hist'><p>Refresh history of a dataset</p></a></li>
<li><a href='#pbi_delete_dataset'><p>Delete dataset</p></a></li>
<li><a href='#pbi_delete_rows'><p>Delete rows</p></a></li>
<li><a href='#pbi_list_datasets'><p>Get a list of datasets in a workspace</p></a></li>
<li><a href='#pbi_list_groups'><p>Get a list of workspaces</p></a></li>
<li><a href='#pbi_push_dataset_schema'><p>Push a dataset schema to Power BI</p></a></li>
<li><a href='#pbi_push_rows'><p>Push rows to a dataset table</p></a></li>
<li><a href='#pbi_schema_create'><p>Create a Power BI dataset schema</p></a></li>
<li><a href='#pbi_schema_relation_create'><p>Define table relationship</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>An Interface to the 'Power BI REST APIs'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Makes it easy to push data to 'Power BI' using R and the 'Power BI 
    REST APIs' (see <a href="https://docs.microsoft.com/en-us/rest/api/power-bi/">https://docs.microsoft.com/en-us/rest/api/power-bi/</a>). 
    A set of functions for turning data frames into 'Power BI' datasets and 
    refreshing these datasets are provided. Administrative tasks such as 
    monitoring refresh statuses and pulling metadata about workspaces and users
    are also supported.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, jsonlite, httr, utils, AzureAuth</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.2.0)</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-23 08:59:35 UTC; rstudio</td>
</tr>
<tr>
<td>Author:</td>
<td>Christian Vermehren [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christian Vermehren &lt;cv@cantab.net&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-23 12:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dim_hour'>Demo data: Dim Hour</h2><span id='topic+dim_hour'></span>

<h3>Description</h3>

<p>A look-up dimension related to Fact Visitors through the hour_key column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dim_hour
</code></pre>


<h3>Format</h3>

<p>A data frame with 24 rows and 2 columns:
</p>

<dl>
<dt>hour_key</dt><dd><p>Primary key (unique identifier of hour).</p>
</dd>
<dt>hour</dt><dd><p>Hour as a name (character type).</p>
</dd>
</dl>



<h3>Source</h3>

<p>Anonymized data from google analytics.
</p>

<hr>
<h2 id='fact_visitors'>Demo data: Fact Visitors</h2><span id='topic+fact_visitors'></span>

<h3>Description</h3>

<p>A fact table showing individual visitors and their transactions on an
e-commerce website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fact_visitors
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,033 rows and 5 columns:
</p>

<dl>
<dt>visitor_id</dt><dd><p>Unique identifier of the visitor.</p>
</dd>
<dt>transaction_id</dt><dd><p>Unique identifier of the transactions.</p>
</dd>
<dt>revenue</dt><dd><p>The value of the transaction in USD.</p>
</dd>
<dt>timestamp</dt><dd><p>The time of visit in minutes since 1970-01-01.</p>
</dd>
<dt>hour_key</dt><dd><p>Foreign key referring to dim_hour.</p>
</dd>
</dl>



<h3>Source</h3>

<p>Anonymized data from google analytics.
</p>

<hr>
<h2 id='pbi_auth'>Authenticate to Power BI</h2><span id='topic+pbi_auth'></span>

<h3>Description</h3>

<p>This function authenticates your Power BI session using a service principal
that represents an application registered in Azure Active Directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_auth(
  tenant = Sys.getenv("PBI_TENANT"),
  app = Sys.getenv("PBI_APP"),
  password = Sys.getenv("PBI_PW")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_auth_+3A_tenant">tenant</code></td>
<td>
<p>Your Microsoft tenant ID.</p>
</td></tr>
<tr><td><code id="pbi_auth_+3A_app">app</code></td>
<td>
<p>Your Microsoft app ID.</p>
</td></tr>
<tr><td><code id="pbi_auth_+3A_password">password</code></td>
<td>
<p>Your Microsoft app password (client secret).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function returns an authentication token invisibly and makes it available
to other functions in this package. The token is automatically refreshed upon
expiration.
</p>
<p>To auto-authenticate, you can specify credentials in environment variables
via an <span class="env">.Renviron</span> file or using <code><a href="base.html#topic+Sys.setenv">Sys.setenv</a></code> (see example
below).
</p>
<p>pbi_auth() is a wrapper for AzureAuth::get_azure_token(). Currently, only
non-interactive authentication is supported. You therefore need to register
an Azure Active Directory service-principal application and obtain tenant ID,
app ID and app password (client secret).
</p>
<p>For reasons of CRAN policy, the first time AzureAuth is loaded, it will
prompt you for permission to create a user-specific directory in order to
cache the token. The prompt only appears in an interactive session, not in a
batch script. For more details, see
<a href="https://github.com/cloudyr/AzureAuth">AzureAuth</a>.
</p>


<h3>Value</h3>

<p>Returns a token invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

# Basic authentications
pbi_auth(
tenant = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx", # The tenant ID
app = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",    # The app ID
password = "****"                                # The client secret
)

# Using environment variables
Sys.setenv(
  PBI_TENANT = "my_tenant_id",
  PBI_APP = "my_app_id",
  PBI_PW = "my_app_client_secret"
  )

pbi_auth()

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_dataset_refresh'>Refresh dataset</h2><span id='topic+pbi_dataset_refresh'></span>

<h3>Description</h3>

<p>Triggers a refresh for the specified dataset from the specified workspace.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_dataset_refresh(group_id, dataset_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_dataset_refresh_+3A_group_id">group_id</code></td>
<td>
<p>The ID of the workspace.</p>
</td></tr>
<tr><td><code id="pbi_dataset_refresh_+3A_dataset_id">dataset_id</code></td>
<td>
<p>The ID of the dataset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful, the refresh request ID is returned.
</p>


<h3>See Also</h3>

<p><a href="#topic+pbi_dataset_refresh_hist">pbi_dataset_refresh_hist</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

group_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
dataset_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

pbi_dataset_refresh(group_id, dataset_id)
#&gt; A refresh of dataset xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx was triggered.
#&gt;
#&gt; To check status, use pbi_dataset_refresh_hist() and the request ID returned
#&gt; by this function.
#&gt; [1] "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_dataset_refresh_hist'>Refresh history of a dataset</h2><span id='topic+pbi_dataset_refresh_hist'></span>

<h3>Description</h3>

<p>Returns the refresh history for the specified dataset from the specified
workspace.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_dataset_refresh_hist(group_id, dataset_id, top = NULL, request_id = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_dataset_refresh_hist_+3A_group_id">group_id</code></td>
<td>
<p>The workspace ID</p>
</td></tr>
<tr><td><code id="pbi_dataset_refresh_hist_+3A_dataset_id">dataset_id</code></td>
<td>
<p>The dataset ID</p>
</td></tr>
<tr><td><code id="pbi_dataset_refresh_hist_+3A_top">top</code></td>
<td>
<p>The number of most recent entries in the refresh history. The
default is all available entries.</p>
</td></tr>
<tr><td><code id="pbi_dataset_refresh_hist_+3A_request_id">request_id</code></td>
<td>
<p>The request ID returned by pbi_dataset_refresh(). If
provided the refresh status of the request ID is returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default the function will return all historical refreshes. You
can reduce the list to the most recent refreshes using the <code>top</code>
argument.
</p>
<p>If <code>request_id</code> is provided the function will return a single refresh
status, but will still query the Power BI API for all historical entries.
If you query the top 5 most recent refreshes using the <code>top</code> argument,
the function will only return a status if the provided request_id is in
this list.
</p>
<p>The status value return can be either 'Completed', 'Failed' or 'Unknown',
which means that the refresh is still in progress.
</p>


<h3>Value</h3>

<p>A data frame with status, start and end times of historical refreshes
or a single refresh status message if <code>request_id</code> is used.
</p>


<h3>See Also</h3>

<p><a href="#topic+pbi_dataset_refresh">pbi_dataset_refresh</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

group_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
dataset_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

pbi_dataset_refresh_hist(group_id, dataset_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_delete_dataset'>Delete dataset</h2><span id='topic+pbi_delete_dataset'></span>

<h3>Description</h3>

<p>Deletes the specified dataset from the specified workspace. Applicable to
push datasets as well as imported datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_delete_dataset(group_id, dataset_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_delete_dataset_+3A_group_id">group_id</code></td>
<td>
<p>The dataset ID.</p>
</td></tr>
<tr><td><code id="pbi_delete_dataset_+3A_dataset_id">dataset_id</code></td>
<td>
<p>The workspace ID.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Deletes the entire dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

group_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
dataset_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

pbi_delete_dataset(group_id, dataset_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_delete_rows'>Delete rows</h2><span id='topic+pbi_delete_rows'></span>

<h3>Description</h3>

<p>Deletes all rows from the specified table within the specified dataset
from the specified workspace (group ID). Only applicable to push datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_delete_rows(group_id, dataset_id, table_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_delete_rows_+3A_group_id">group_id</code></td>
<td>
<p>The Power BI workspace ID.</p>
</td></tr>
<tr><td><code id="pbi_delete_rows_+3A_dataset_id">dataset_id</code></td>
<td>
<p>The Power BI dataset ID.</p>
</td></tr>
<tr><td><code id="pbi_delete_rows_+3A_table_name">table_name</code></td>
<td>
<p>The Power BI table name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All rows will be deleted from the specified table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

group_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
dataset_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
table_name &lt;- "My Table"

pbi_delete_rows(group_id, dataset_id, table_name)

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_list_datasets'>Get a list of datasets in a workspace</h2><span id='topic+pbi_list_datasets'></span>

<h3>Description</h3>

<p>Returns the IDs and meta data of all available datasets in the specified
Power BI workspace (group ID).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_list_datasets(group_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_list_datasets_+3A_group_id">group_id</code></td>
<td>
<p>The Power BI workspace ID.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table / data frame with dataset information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

group_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

pbi_list_datasets(group_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_list_groups'>Get a list of workspaces</h2><span id='topic+pbi_list_groups'></span>

<h3>Description</h3>

<p>Returns the ids and meta data of all Power BI workspaces to which the service
principal app has been granted access.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_list_groups()
</code></pre>


<h3>Value</h3>

<p>A data frame with workspaces.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

pbi_list_groups()

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_push_dataset_schema'>Push a dataset schema to Power BI</h2><span id='topic+pbi_push_dataset_schema'></span>

<h3>Description</h3>

<p>Pushes a dataset schema to the specified Power BI workspace. To add rows to
the dataset, use pbi_push_rows().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_push_dataset_schema(schema, group_id, retention = c("none", "basicFIFO"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_push_dataset_schema_+3A_schema">schema</code></td>
<td>
<p>A push-dataset schema created by pbi_schema_create().</p>
</td></tr>
<tr><td><code id="pbi_push_dataset_schema_+3A_group_id">group_id</code></td>
<td>
<p>The ID of the destination Power BI workspace.</p>
</td></tr>
<tr><td><code id="pbi_push_dataset_schema_+3A_retention">retention</code></td>
<td>
<p>The retention policy of the dataset. Default is &quot;none&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataset with tables will be created in the specified Power BI
workspace.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

group_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

schema &lt;- pbi_schema_create(
  dt_list = list(iris),
  dataset_name = "The iris dataset",
  table_name_list = list(iris)
)

pbi_push_dataset_schema(schema, group_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_push_rows'>Push rows to a dataset table</h2><span id='topic+pbi_push_rows'></span>

<h3>Description</h3>

<p>Adds new data rows to the specified table within the specified dataset
from the specified Power BI workspace. Only applicable to push datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_push_rows(dt, group_id, dataset_id, table_name, overwrite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_push_rows_+3A_dt">dt</code></td>
<td>
<p>A data frame with rows to be added to the specified Power BI table
(table_name). The columns and data types must match the specified table.</p>
</td></tr>
<tr><td><code id="pbi_push_rows_+3A_group_id">group_id</code></td>
<td>
<p>The ID of the destination Power BI workspace.</p>
</td></tr>
<tr><td><code id="pbi_push_rows_+3A_dataset_id">dataset_id</code></td>
<td>
<p>The ID of the destination Power BI dataset.</p>
</td></tr>
<tr><td><code id="pbi_push_rows_+3A_table_name">table_name</code></td>
<td>
<p>The name of the destination Power BI table.</p>
</td></tr>
<tr><td><code id="pbi_push_rows_+3A_overwrite">overwrite</code></td>
<td>
<p>If TRUE, existing rows will be deleted prior to adding new
rows. If FALSE, the new rows will be appended to the existing rows.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Power BI REST has a limit of 10K rows per POST rows request. This limit
is handled by splitting the data frame into chunks of 10K rows each and
pushing these chunks one at a time. However, you should manually observe the
other limitations of the API. See
<a href="https://docs.microsoft.com/en-au/rest/api/power-bi/">https://docs.microsoft.com/en-au/rest/api/power-bi/</a> for more details.
</p>


<h3>Value</h3>

<p>A dataset with tables and optionally defined relationships will be
created in the specified Power BI workspace.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

group_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
dataset_id &lt;- "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"

pbi_push_rows(group_id, dataset_id, "My table")

## End(Not run)
</code></pre>

<hr>
<h2 id='pbi_schema_create'>Create a Power BI dataset schema</h2><span id='topic+pbi_schema_create'></span>

<h3>Description</h3>

<p>Creates a Power BI dataset schema from a set of data frames. Columns and data
types will be inferred from the data frames.  Only applicable to push
datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_schema_create(
  dt_list,
  dataset_name = "My Power BI Dataset",
  table_name_list,
  relations_list = NULL,
  date_format = "yyyy-mm-dd",
  integer_format = "#,###0",
  double_format = "#,###.00",
  sort_by_col = NULL,
  hidden_col = NULL,
  default_mode = c("Push", "Streaming", "PushStreaming", "AsOnPrem", "AsAzure")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_schema_create_+3A_dt_list">dt_list</code></td>
<td>
<p>A list of data frames which the schema should be inferred from.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_dataset_name">dataset_name</code></td>
<td>
<p>A custom name of the Power BI dataset.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_table_name_list">table_name_list</code></td>
<td>
<p>A list of custom names corresponding to the list of data
frames.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_relations_list">relations_list</code></td>
<td>
<p>A list of relation definitions returned by
pbi_schema_relation_create()</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_date_format">date_format</code></td>
<td>
<p>The format of date columns (if any). Default is
'yyyy-mm-dd'.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_integer_format">integer_format</code></td>
<td>
<p>The format of integer columns (if any). Default is
'#,###0'.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_double_format">double_format</code></td>
<td>
<p>The format of double columns (if any). Default is
'#,###.00'.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_sort_by_col">sort_by_col</code></td>
<td>
<p>A list of lists of column-sorting definitions. The inner
lists must include elements named 'table', 'sort' and 'sort_by'. See
example for more details.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_hidden_col">hidden_col</code></td>
<td>
<p>A list of lists columns to be hidden. The inner lists must
include elements named 'table' and 'hidden'. See examples for more details.</p>
</td></tr>
<tr><td><code id="pbi_schema_create_+3A_default_mode">default_mode</code></td>
<td>
<p>The dataset mode or type. Defaults to 'Push'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with schema properties.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load package
library(powerbiR)

# Use data from the powerbiR package
data(dim_hour)
data(fact_visitors)

# Define dataset and its tables
table_list &lt;- list(fact_visitors, dim_hour)
table_names  &lt;- c("visitors", "hour")
dataset_name &lt;- c("Online Visitors")

# Define relations between tables
relation &lt;- pbi_schema_relation_create(
  from_table = "visitors",
  from_column = "hour_key",
  to_table = "hour"
)

# Define sorting behavior of columns in the hour table
sortlist = list(
  table = c("hour"),
  sort = c("hour"),
  sort_by = c("hour_key")
)

# Hide hour_key in the hour and visitors tables
hidden &lt;- list(
  list(
    table = c("hour"),
    hidden = c("hour_key")
  ),
  list(
    table = c("visitors"),
    hidden = c("hour_key", "visitor_id")
  )
)

# Create schema
schema &lt;- pbi_schema_create(
  dt_list = table_list,
  dataset_name = dataset_name,
  table_name_list = table_names,
  relations_list = list(relation),
  sort_by_col = list(sortlist),
  hidden_col = hidden
)
</code></pre>

<hr>
<h2 id='pbi_schema_relation_create'>Define table relationship</h2><span id='topic+pbi_schema_relation_create'></span>

<h3>Description</h3>

<p>Defines a relationship between tables in a Power BI push dataset. To add this
definition to a Power BI dataset schema, use pbi_schema_add_relations().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbi_schema_relation_create(
  from_table = NULL,
  from_column = NULL,
  to_table = NULL,
  to_column = from_column,
  direction = c("OneDirection", "BothDirections", "Automatic"),
  name = paste0(from_table, to_table, from_column)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pbi_schema_relation_create_+3A_from_table">from_table</code></td>
<td>
<p>The name of the foreign key table</p>
</td></tr>
<tr><td><code id="pbi_schema_relation_create_+3A_from_column">from_column</code></td>
<td>
<p>The name of the foreign key column</p>
</td></tr>
<tr><td><code id="pbi_schema_relation_create_+3A_to_table">to_table</code></td>
<td>
<p>The name of the primary key table</p>
</td></tr>
<tr><td><code id="pbi_schema_relation_create_+3A_to_column">to_column</code></td>
<td>
<p>The name of the primary key column. Defaults to from_column</p>
</td></tr>
<tr><td><code id="pbi_schema_relation_create_+3A_direction">direction</code></td>
<td>
<p>The filter direction of the relationship. Defaults to
'OneDirection'</p>
</td></tr>
<tr><td><code id="pbi_schema_relation_create_+3A_name">name</code></td>
<td>
<p>The relationship name and identifier. Defaults to a concatenation
of from_table, to_table and from_column</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.table
</p>


<h3>Examples</h3>

<pre><code class='language-R'># An example
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
