<!DOCTYPE html><html lang="en"><head><title>Help for package rprojroot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rprojroot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rprojroot-package'><p>rprojroot: Finding Files in Project Subdirectories</p></a></li>
<li><a href='#criteria'><p>Prespecified criteria</p></a></li>
<li><a href='#deprecated'><p>Deprecated functions</p></a></li>
<li><a href='#find_root'><p>Find the root of a directory hierarchy</p></a></li>
<li><a href='#find_root_file'><p>File paths relative to the root of a directory hierarchy</p></a></li>
<li><a href='#root_criterion'><p>Is a directory the project root?</p></a></li>
<li><a href='#thisfile'><p>Determines the path of the currently running script</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Finding Files in Project Subdirectories</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Robust, reliable and flexible paths to files below
    a project root. The 'root' of a project is defined as a directory that
    matches a certain criterion, e.g., it contains a certain regular file.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://rprojroot.r-lib.org/">https://rprojroot.r-lib.org/</a>, <a href="https://github.com/r-lib/rprojroot">https://github.com/r-lib/rprojroot</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/rprojroot/issues">https://github.com/r-lib/rprojroot/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, lifecycle, mockr, rlang, rmarkdown, testthat (&ge;
3.0.0), withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-05 06:47:23 UTC; kirill</td>
</tr>
<tr>
<td>Author:</td>
<td>Kirill Müller <a href="https://orcid.org/0000-0002-1416-3412"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kirill Müller &lt;kirill@cynkra.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-05 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='rprojroot-package'>rprojroot: Finding Files in Project Subdirectories</h2><span id='topic+rprojroot'></span><span id='topic+rprojroot-package'></span>

<h3>Description</h3>

<p>Robust, reliable and flexible paths to files below a project root. The 'root' of a project is defined as a directory that matches a certain criterion, e.g., it contains a certain regular file.
</p>


<h3>Details</h3>

<p>See the &quot;Value&quot; section in <code><a href="#topic+root_criterion">root_criterion()</a></code> for documentation
of root criterion objects, and  <a href="#topic+criteria">criteria</a> for useful predefined
root criteria.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Kirill Müller <a href="mailto:kirill@cynkra.com">kirill@cynkra.com</a> (<a href="https://orcid.org/0000-0002-1416-3412">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://rprojroot.r-lib.org/">https://rprojroot.r-lib.org/</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/rprojroot">https://github.com/r-lib/rprojroot</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/rprojroot/issues">https://github.com/r-lib/rprojroot/issues</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>criteria
## Not run: 
is_r_package$find_file("NAMESPACE")
root_fun &lt;- is_r_package$make_fix_file()
root_fun("NAMESPACE")

## End(Not run)
</code></pre>

<hr>
<h2 id='criteria'>Prespecified criteria</h2><span id='topic+criteria'></span><span id='topic+is_rstudio_project'></span><span id='topic+is_r_package'></span><span id='topic+is_remake_project'></span><span id='topic+is_drake_project'></span><span id='topic+is_pkgdown_project'></span><span id='topic+is_renv_project'></span><span id='topic+is_projectile_project'></span><span id='topic+is_quarto_project'></span><span id='topic+is_git_root'></span><span id='topic+is_svn_root'></span><span id='topic+is_vcs_root'></span><span id='topic+is_testthat'></span><span id='topic+from_wd'></span>

<h3>Description</h3>

<p>This is a collection of commonly used root criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>criteria

is_rstudio_project

is_r_package

is_remake_project

is_drake_project

is_pkgdown_project

is_renv_project

is_projectile_project

is_quarto_project

is_git_root

is_svn_root

is_vcs_root

is_testthat

from_wd
</code></pre>


<h3>Details</h3>

<p><code>is_rstudio_project</code> looks for a file with extension <code>.Rproj</code>.
</p>
<p><code>is_r_package</code> looks for a <code>DESCRIPTION</code> file.
</p>
<p><code>is_remake_project</code> looks for a <code>remake.yml</code> file.
</p>
<p><code>is_drake_project</code> looks for a <code>.drake</code> directory.
</p>
<p><code>is_pkgdown_project</code> looks for a <code style="white-space: pre;">&#8288;_pkgdown.yml&#8288;</code>, <code style="white-space: pre;">&#8288;_pkgdown.yaml&#8288;</code>, <code style="white-space: pre;">&#8288;pkgdown/_pkgdown.yml&#8288;</code> and/or <code style="white-space: pre;">&#8288;inst/_pkgdown.yml&#8288;</code> file.
</p>
<p><code>is_renv_project</code> looks for an <code>renv.lock</code> file.
</p>
<p><code>is_projectile_project</code> looks for a <code>.projectile</code> file.
</p>
<p><code>is_quarto_project</code> looks for a <code style="white-space: pre;">&#8288;_quarto.yml&#8288;</code> file.
</p>
<p><code>is_git_root</code> looks for a <code>.git</code> directory.
</p>
<p><code>is_svn_root</code> looks for a <code>.svn</code> directory.
</p>
<p><code>is_vcs_root</code> looks for the root of a version control
system, currently only Git and SVN are supported.
</p>
<p><code>is_testthat</code> looks for the <code>testthat</code> directory, works when
developing, testing, and checking a package.
</p>
<p><code>from_wd</code> uses the current working directory.
</p>

<hr>
<h2 id='deprecated'>Deprecated functions</h2><span id='topic+deprecated'></span><span id='topic+as.root_criterion'></span><span id='topic+is.root_criterion'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+as_root_criterion">as_root_criterion()</a></code> and <code><a href="#topic+is_root_criterion">is_root_criterion()</a></code>, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.root_criterion(...)

is.root_criterion(...)
</code></pre>

<hr>
<h2 id='find_root'>Find the root of a directory hierarchy</h2><span id='topic+find_root'></span><span id='topic+get_root_desc'></span>

<h3>Description</h3>

<p>A <em>root</em> is defined as a directory that contains a regular file
whose name matches a given pattern and which optionally contains a given text.
The search for a root starts at a given directory (the working directory
by default), and proceeds up the directory hierarchy.
</p>
<p><code>get_root_desc()</code> returns the description of the criterion
for a root path. This is especially useful for composite root criteria
created with <code><a href="#topic++7C.root_criterion">|.root_criterion()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_root(criterion, path = ".")

get_root_desc(criterion, path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_root_+3A_criterion">criterion</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[root_criterion]&#8288;</code><br />
A criterion, one of the predefined <a href="#topic+criteria">criteria</a>
or created by <code><a href="#topic+root_criterion">root_criterion()</a></code>.
Will be coerced using <code><a href="#topic+as_root_criterion">as_root_criterion()</a></code>.</p>
</td></tr>
<tr><td><code id="find_root_+3A_path">path</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
The start directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Starting from the working directory, the <code>find_root()</code> function searches
for the root.
If a root is found, the <code>...</code> arguments are used to construct a path;
thus, if no extra arguments are given, the root is returned.
If no root is found, an error is thrown.
</p>


<h3>Value</h3>

<p>The normalized path of the root as specified by the search criterion.
Throws an error if no root is found
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+glob2rx">utils::glob2rx()</a></code> <code><a href="base.html#topic+file.path">file.path()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
find_root(glob2rx("DESCRIPTION"), "^Package: ")

## End(Not run)

</code></pre>

<hr>
<h2 id='find_root_file'>File paths relative to the root of a directory hierarchy</h2><span id='topic+find_root_file'></span><span id='topic+find_rstudio_root_file'></span><span id='topic+find_package_root_file'></span><span id='topic+find_remake_root_file'></span><span id='topic+find_testthat_root_file'></span>

<h3>Description</h3>

<p><code>find_root_file()</code> is a wrapper around <code><a href="#topic+find_root">find_root()</a></code> that
appends an arbitrary number of path components to the root using
<code><a href="base.html#topic+file.path">base::file.path()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_root_file(..., criterion, path = ".")

find_rstudio_root_file(..., path = ".")

find_package_root_file(..., path = ".")

find_remake_root_file(..., path = ".")

find_testthat_root_file(..., path = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_root_file_+3A_...">...</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code><br />
Further path components passed to <code><a href="base.html#topic+file.path">file.path()</a></code>.
All arguments must be the same length or length one.</p>
</td></tr>
<tr><td><code id="find_root_file_+3A_criterion">criterion</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[root_criterion]&#8288;</code><br />
A criterion, one of the predefined <a href="#topic+criteria">criteria</a>
or created by <code><a href="#topic+root_criterion">root_criterion()</a></code>.
Will be coerced using <code><a href="#topic+as_root_criterion">as_root_criterion()</a></code>.</p>
</td></tr>
<tr><td><code id="find_root_file_+3A_path">path</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
The start directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function operates on the notion of relative paths.
The <code>...</code> argument is expected to contain a path relative to the root.
If the first path component passed to <code>...</code> is already an absolute path,
the <code>criterion</code> and <code>path</code> arguments are ignored,
and <code>...</code> is forwarded to <code><a href="base.html#topic+file.path">file.path()</a></code>.
</p>


<h3>Value</h3>

<p>The normalized path of the root as specified by the search criteria,
with the additional path components appended.
Throws an error if no root is found.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+find_root">find_root()</a></code> <code><a href="utils.html#topic+glob2rx">utils::glob2rx()</a></code> <code><a href="base.html#topic+file.path">base::file.path()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
find_package_root_file("tests", "testthat.R")
has_file("DESCRIPTION", "^Package: ")$find_file
has_file("DESCRIPTION", "^Package: ")$make_fix_file(".")

## End(Not run)

</code></pre>

<hr>
<h2 id='root_criterion'>Is a directory the project root?</h2><span id='topic+root_criterion'></span><span id='topic+is_root_criterion'></span><span id='topic+as_root_criterion'></span><span id='topic+as_root_criterion.character'></span><span id='topic+as_root_criterion.root_criterion'></span><span id='topic++7C.root_criterion'></span><span id='topic+has_file'></span><span id='topic+has_dir'></span><span id='topic+has_file_pattern'></span><span id='topic+has_basename'></span>

<h3>Description</h3>

<p>Objects of the <code>root_criterion</code> class decide if a
given directory is a project root.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>root_criterion(testfun, desc, subdir = NULL)

is_root_criterion(x)

as_root_criterion(x)

## S3 method for class 'character'
as_root_criterion(x)

## S3 method for class 'root_criterion'
as_root_criterion(x)

## S3 method for class 'root_criterion'
x | y

has_file(filepath, contents = NULL, n = -1L, fixed = FALSE)

has_dir(filepath)

has_file_pattern(pattern, contents = NULL, n = -1L, fixed = FALSE)

has_basename(basename, subdir = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="root_criterion_+3A_testfun">testfun</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[function|list(function)]&#8288;</code><br />
A function with one parameter that returns <code>TRUE</code>
if the directory specified by this parameter is the project root,
and <code>FALSE</code> otherwise. Can also be a list of such functions.</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_desc">desc</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code><br />
A textual description of the test criterion, of the same length
as <code>testfun</code>.</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_subdir">subdir</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code><br />
Subdirectories to start the search in, if found</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code><br />
An object.</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_y">y</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code><br />
An object.</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_filepath">filepath</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
File path (can contain directories).</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_contents">contents</code>, <code id="root_criterion_+3A_fixed">fixed</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
If <code>contents</code> is <code>NULL</code> (the default), file contents are not checked.
Otherwise, <code>contents</code> is a regular expression
(if <code>fixed</code> is <code>FALSE</code>) or a search string (if <code>fixed</code> is <code>TRUE</code>), and
file contents are checked matching lines.</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integerish(1)]&#8288;</code><br />
Maximum number of lines to read to check file contents.</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_pattern">pattern</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
Regular expression to match the file name against.</p>
</td></tr>
<tr><td><code id="root_criterion_+3A_basename">basename</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code><br />
The required name of the root directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Construct criteria using <code>root_criterion</code> in a very general fashion
by specifying a function with a <code>path</code> argument, and a description.
</p>
<p>The <code>as_root_criterion()</code> function accepts objects of class
<code>root_criterion</code>, and character values; the latter will be
converted to criteria using <code>has_file</code>.
</p>
<p>Root criteria can be combined with the <code>|</code> operator. The result is a
composite root criterion that requires either of the original criteria to
match.
</p>
<p>The <code>has_file()</code> function constructs a criterion that checks for the
existence of a specific file (which itself can be in a subdirectory of the
root) with specific contents.
</p>
<p>The <code>has_dir()</code> function constructs a criterion that checks for the
existence of a specific directory.
</p>
<p>The <code>has_file_pattern()</code> function constructs a criterion that checks for the
existence of a file that matches a pattern, with specific contents.
</p>
<p>The <code>has_basename()</code> function constructs a criterion that checks if the
<code><a href="base.html#topic+basename">base::basename()</a></code> of the root directory has a specific name,
with support for case-insensitive file systems.
</p>


<h3>Value</h3>

<p>An S3 object of class <code>root_criterion</code> wit the following members:
</p>

<dl>
<dt><code>testfun</code></dt><dd><p>The <code>testfun</code> argument</p>
</dd>
<dt><code>desc</code></dt><dd><p>The <code>desc</code> argument</p>
</dd>
<dt><code>subdir</code></dt><dd><p>The <code>subdir</code> argument</p>
</dd>
<dt><code>find_file</code></dt><dd><p>A function with <code>...</code> and <code>path</code> arguments
that returns a path relative to the root,
as specified by this criterion.
The optional <code>path</code> argument specifies the starting directory,
which defaults to <code>"."</code>.
The function forwards to <code><a href="#topic+find_root_file">find_root_file()</a></code>,
which passes <code>...</code> directly to <code>file.path()</code>
if the first argument is an absolute path.
</p>
</dd>
<dt><code>make_fix_file</code></dt><dd><p>A function with a <code>path</code> argument that
returns a function that finds paths relative to the root.  For a
criterion <code>cr</code>, the result of <code>cr$make_fix_file(".")(...)</code>
is identical to <code>cr$find_file(...)</code>. The function created by
<code>make_fix_file()</code> can be saved to a variable to be more independent
of the current working directory.
</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>root_criterion(function(path) file.exists(file.path(path, "somefile")), "has somefile")
has_file("DESCRIPTION")
is_r_package
## Not run: 
is_r_package$find_file
is_r_package$make_fix_file(".")

## End(Not run)
</code></pre>

<hr>
<h2 id='thisfile'>Determines the path of the currently running script</h2><span id='topic+thisfile'></span><span id='topic+thisfile_source'></span><span id='topic+thisfile_r'></span><span id='topic+thisfile_rscript'></span><span id='topic+thisfile_knit'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#soft-deprecated"><img src="../help/figures/lifecycle-soft-deprecated.svg" alt='[Soft-deprecated]' /></a>
</p>
<p><span class="rlang"><b>R</b></span> does not store nor export the path of the currently running
script.  This is an attempt to circumvent this limitation by applying
heuristics (such as call stack and argument inspection) that work in many
cases.
<strong>CAVEAT</strong>: Use this function only if your workflow does not permit other
solution: if a script needs to know its location, it should be set outside
the context of the script if possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>thisfile()

thisfile_source()

thisfile_r()

thisfile_rscript()

thisfile_knit()
</code></pre>


<h3>Details</h3>

<p>This functions currently work only if the script was <code>source</code>d,
processed with <code>knitr</code>,
or run with <code>Rscript</code> or using the <code>--file</code> parameter to the
<code>R</code> executable.  For code run with <code>Rscript</code>, the exact value
of the parameter passed to <code>Rscript</code> is returned.
</p>


<h3>Value</h3>

<p>The path of the currently running script, NULL if it cannot be
determined.
</p>


<h3>Life cycle</h3>

<p>These functions are now available in the <span class="pkg">whereami</span> package.
</p>


<h3>Author(s)</h3>

<p>Kirill Müller, Hadley Wickham, Michael R. Head
</p>


<h3>References</h3>

<p><a href="https://stackoverflow.com/q/1815606/946850">https://stackoverflow.com/q/1815606/946850</a>
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+source">base::source()</a></code>, <code><a href="utils.html#topic+Rscript">utils::Rscript()</a></code>, <code><a href="base.html#topic+getwd">base::getwd()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
thisfile()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
