<!DOCTYPE html><html lang="en"><head><title>Help for package downlit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {downlit}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#downlit-package'><p>downlit: Syntax Highlighting and Automatic Linking</p></a></li>
<li><a href='#autolink'><p>Automatically link inline code</p></a></li>
<li><a href='#downlit_html_path'><p>Syntax highlight and link an HTML page</p></a></li>
<li><a href='#downlit_md_path'><p>Syntax highlight and link a md document</p></a></li>
<li><a href='#evaluate_and_highlight'><p>Evaluate code and syntax highlight the results</p></a></li>
<li><a href='#highlight'><p>Highlight and link a code block</p></a></li>
<li><a href='#href_topic'><p>Generate url for topic/article/package</p></a></li>
<li><a href='#is_low_change'><p>Compare two recorded plots</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Syntax Highlighting and Automatic Linking</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Syntax highlighting of R code, specifically designed for the
    needs of 'RMarkdown' packages like 'pkgdown', 'hugodown', and
    'bookdown'. It includes linking of function calls to their
    documentation on the web, and automatic translation of ANSI escapes in
    output to the equivalent HTML.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://downlit.r-lib.org/">https://downlit.r-lib.org/</a>, <a href="https://github.com/r-lib/downlit">https://github.com/r-lib/downlit</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/downlit/issues">https://github.com/r-lib/downlit/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>brio, desc, digest, evaluate, fansi, memoise, rlang, vctrs,
withr, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, htmltools, jsonlite, MASS, MassSpecWavelet, pkgload,
rmarkdown, testthat (&ge; 3.0.0), xml2</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-07 19:03:38 UTC; hadleywickham</td>
</tr>
<tr>
<td>Author:</td>
<td>Hadley Wickham [aut, cre],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hadley Wickham &lt;hadley@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-10 09:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='downlit-package'>downlit: Syntax Highlighting and Automatic Linking</h2><span id='topic+downlit'></span><span id='topic+downlit-package'></span>

<h3>Description</h3>

<p>Syntax highlighting of R code, specifically designed for the needs of 'RMarkdown' packages like 'pkgdown', 'hugodown', and 'bookdown'. It includes linking of function calls to their documentation on the web, and automatic translation of ANSI escapes in output to the equivalent HTML.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Hadley Wickham <a href="mailto:hadley@posit.co">hadley@posit.co</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://downlit.r-lib.org/">https://downlit.r-lib.org/</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/downlit">https://github.com/r-lib/downlit</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/downlit/issues">https://github.com/r-lib/downlit/issues</a>
</p>
</li></ul>


<hr>
<h2 id='autolink'>Automatically link inline code</h2><span id='topic+autolink'></span><span id='topic+autolink_url'></span>

<h3>Description</h3>

<p>Automatically link inline code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>autolink(text)

autolink_url(text)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autolink_+3A_text">text</code></td>
<td>
<p>String of code to highlight and link.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>text</code> is linkable, an HTML link for <code>autolink()</code>, and or just
the URL for <code>autolink_url()</code>. Both return <code>NA</code> if the text is not
linkable.
</p>


<h3>Options</h3>

<p>downlit provides a number of options to control the details of the linking.
They are particularly important if you want to generate &quot;local&quot; links.
</p>

<ul>
<li> <p><code>downlit.package</code>: name of the current package. Determines when
<code>topic_index</code> and <code>article_index</code>
</p>
</li>
<li> <p><code>downlit.topic_index</code> and <code>downlit.article_index</code>: named character
vector that maps from topic/article name to path.
</p>
</li>
<li> <p><code>downlit.rdname</code>: name of current Rd file being documented (if any);
used to avoid self-links.
</p>
</li>
<li> <p><code>downlit.attached</code>: character vector of currently attached R packages.
</p>
</li>
<li> <p><code>downlit.local_packages</code>: named character vector providing relative
paths (value) to packages (name) that can be reached with relative links
from the target HTML document.
</p>
</li>
<li> <p><code>downlit.topic_path</code> and <code>downlit.article_path</code>: paths to reference
topics and articles/vignettes relative to the &quot;current&quot; file.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>autolink("stats::median()")
autolink("vignette('grid', package = 'grid')")

autolink_url("stats::median()")
</code></pre>

<hr>
<h2 id='downlit_html_path'>Syntax highlight and link an HTML page</h2><span id='topic+downlit_html_path'></span><span id='topic+downlit_html_node'></span>

<h3>Description</h3>


<ul>
<li><p> Code blocks, identified by <code style="white-space: pre;">&#8288;&lt;pre&gt;&#8288;</code> tags with class <code style="white-space: pre;">&#8288;sourceCode r&#8288;</code>
or any <code style="white-space: pre;">&#8288;&lt;pre&gt;&#8288;</code> tag inside of <code style="white-space: pre;">&#8288;&lt;div class='downlit'&gt;&#8288;</code>, are
processed with <code><a href="#topic+highlight">highlight()</a></code>.
</p>
</li>
<li><p> Inline code, identified by <code style="white-space: pre;">&#8288;&lt;code&gt;&#8288;</code> tags that contain only text
(and don't have a header tag (e.g. <code style="white-space: pre;">&#8288;&lt;h1&gt;&#8288;</code>) or <code style="white-space: pre;">&#8288;&lt;a&gt;&#8288;</code> as an ancestor)
are processed processed with <code><a href="#topic+autolink">autolink()</a></code>.
</p>
</li></ul>

<p>Use <code>downlit_html_path()</code> to process an <code>.html</code> file on disk;
use <code>downlit_html_node()</code> to process an in-memory <code>xml_node</code> as part of a
larger pipeline.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downlit_html_path(in_path, out_path, classes = classes_pandoc())

downlit_html_node(x, classes = classes_pandoc())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="downlit_html_path_+3A_in_path">in_path</code>, <code id="downlit_html_path_+3A_out_path">out_path</code></td>
<td>
<p>Input and output paths for HTML file</p>
</td></tr>
<tr><td><code id="downlit_html_path_+3A_classes">classes</code></td>
<td>
<p>A mapping between token names and CSS class names.
Bundled <code>classes_pandoc()</code> and <code>classes_chroma()</code> provide mappings
that (roughly) match Pandoc and chroma (used by hugo) classes so you
can use existing themes.</p>
</td></tr>
<tr><td><code id="downlit_html_path_+3A_x">x</code></td>
<td>
<p>An <code>xml2::xml_node</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>downlit_html_path()</code> invisibly returns <code>output_path</code>;
<code>downlit_html_node()</code> modifies <code>x</code> in place and returns nothing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
node &lt;- xml2::read_xml("&lt;p&gt;&lt;code&gt;base::t()&lt;/code&gt;&lt;/p&gt;")
node

# node is modified in place
downlit_html_node(node)
node

</code></pre>

<hr>
<h2 id='downlit_md_path'>Syntax highlight and link a md document</h2><span id='topic+downlit_md_path'></span><span id='topic+downlit_md_string'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;downlit_md_*&#8288;</code> works by traversing the markdown AST generated by Pandoc.
It applies <code><a href="#topic+highlight">highlight()</a></code> to <code>CodeBlock</code>s and <code><a href="#topic+autolink">autolink()</a></code> to inline <code>Code</code>.
</p>
<p>Use <code>downlit_md_path()</code> to transform a file on disk; use
<code>downlit_md_string()</code> to transform a string containing markdown as part
of a larger pipeline.
</p>
<p>Needs pandoc 1.19 or later.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downlit_md_path(in_path, out_path, format = NULL)

downlit_md_string(x, format = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="downlit_md_path_+3A_in_path">in_path</code>, <code id="downlit_md_path_+3A_out_path">out_path</code></td>
<td>
<p>Input and output paths for markdown file.</p>
</td></tr>
<tr><td><code id="downlit_md_path_+3A_format">format</code></td>
<td>
<p>Pandoc format; defaults to &quot;gfm&quot; if you have pandoc 2.0.0 or
greater, otherwise &quot;markdown_github&quot;.</p>
</td></tr>
<tr><td><code id="downlit_md_path_+3A_x">x</code></td>
<td>
<p>A string containing markdown.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>downlit_md_path()</code> invisibly returns <code>output_path</code>;
<code>downlit_md_string()</code> returns a string containing markdown.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (rmarkdown::pandoc_available("1.19")) {
downlit_md_string("`base::t()`")
downlit_md_string("`base::t`")
downlit_md_string("* `base::t`")

# But don't highlight in headings
downlit_md_string("## `base::t`")
}

</code></pre>

<hr>
<h2 id='evaluate_and_highlight'>Evaluate code and syntax highlight the results</h2><span id='topic+evaluate_and_highlight'></span>

<h3>Description</h3>

<p>This function runs <code>code</code> and captures the output using
<code><a href="evaluate.html#topic+evaluate">evaluate::evaluate()</a></code>. It syntax higlights code with <code><a href="#topic+highlight">highlight()</a></code>, and
intermingles it with output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evaluate_and_highlight(
  code,
  fig_save,
  classes = downlit::classes_pandoc(),
  env = NULL,
  output_handler = evaluate::new_output_handler(),
  highlight = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="evaluate_and_highlight_+3A_code">code</code></td>
<td>
<p>Code to evaluate (as a string).</p>
</td></tr>
<tr><td><code id="evaluate_and_highlight_+3A_fig_save">fig_save</code></td>
<td>
<p>A function with arguments <code>plot</code> and <code>id</code> that is
responsible for saving <code>plot</code> to a file (using <code>id</code> to disambiguate
multiple plots in the same chunk). It should return a list with
components <code>path</code>, <code>width</code>, and <code>height</code>.</p>
</td></tr>
<tr><td><code id="evaluate_and_highlight_+3A_classes">classes</code></td>
<td>
<p>A mapping between token names and CSS class names.
Bundled <code>classes_pandoc()</code> and <code>classes_chroma()</code> provide mappings
that (roughly) match Pandoc and chroma (used by hugo) classes so you
can use existing themes.</p>
</td></tr>
<tr><td><code id="evaluate_and_highlight_+3A_env">env</code></td>
<td>
<p>Environment in which to evaluate code; if not supplied,
defaults to a child of the global environment.</p>
</td></tr>
<tr><td><code id="evaluate_and_highlight_+3A_output_handler">output_handler</code></td>
<td>
<p>Custom output handler for <code><a href="evaluate.html#topic+evaluate">evaluate::evaluate()</a></code>.</p>
</td></tr>
<tr><td><code id="evaluate_and_highlight_+3A_highlight">highlight</code></td>
<td>
<p>Optionally suppress highlighting. This is useful for tests.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An string containing HTML with a <code>dependencies</code> attribute
giving an additional htmltools dependencies required to render the HTML.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cat(evaluate_and_highlight("1 + 2"))
cat(evaluate_and_highlight("x &lt;- 1:10\nmean(x)"))

# -----------------------------------------------------------------
# evaluate_and_highlight() powers pkgdown's documentation formatting so
# here I include a few examples to make sure everything looks good
# -----------------------------------------------------------------

blue &lt;- function(x) paste0("\033[34m", x, "\033[39m")
f &lt;- function(x) {
  cat("This is some output. My favourite colour is ", blue("blue"), ".\n", sep = "")
  message("This is a message. My favourite fruit is ", blue("blueberries"))
  warning("Now at stage ", blue("blue"), "!")
}
f()

plot(1:10)
</code></pre>

<hr>
<h2 id='highlight'>Highlight and link a code block</h2><span id='topic+highlight'></span><span id='topic+classes_pandoc'></span><span id='topic+classes_chroma'></span>

<h3>Description</h3>

<p>This function:
</p>

<ul>
<li><p> syntax highlights code
</p>
</li>
<li><p> links function calls to their documentation (where possible)
</p>
</li>
<li><p> in comments, translates ANSI escapes in to HTML equivalents.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>highlight(text, classes = classes_chroma(), pre_class = NULL, code = FALSE)

classes_pandoc()

classes_chroma()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="highlight_+3A_text">text</code></td>
<td>
<p>String of code to highlight and link.</p>
</td></tr>
<tr><td><code id="highlight_+3A_classes">classes</code></td>
<td>
<p>A mapping between token names and CSS class names.
Bundled <code>classes_pandoc()</code> and <code>classes_chroma()</code> provide mappings
that (roughly) match Pandoc and chroma (used by hugo) classes so you
can use existing themes.</p>
</td></tr>
<tr><td><code id="highlight_+3A_pre_class">pre_class</code></td>
<td>
<p>Class(es) to give output <code style="white-space: pre;">&#8288;&lt;pre&gt;&#8288;</code>.</p>
</td></tr>
<tr><td><code id="highlight_+3A_code">code</code></td>
<td>
<p>If <code>TRUE</code>, wrap output in a <code style="white-space: pre;">&#8288;&lt;code&gt;&#8288;</code>  block</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>text</code> is valid R code, an HTML <code style="white-space: pre;">&#8288;&lt;pre&gt;&#8288;</code> tag. Otherwise,
<code>NA</code>.
</p>
<p>A string containing syntax highlighted HTML or <code>NA</code> (if <code>text</code>
isn't parseable).
</p>


<h3>Options</h3>

<p>downlit provides a number of options to control the details of the linking.
They are particularly important if you want to generate &quot;local&quot; links.
</p>

<ul>
<li> <p><code>downlit.package</code>: name of the current package. Determines when
<code>topic_index</code> and <code>article_index</code>
</p>
</li>
<li> <p><code>downlit.topic_index</code> and <code>downlit.article_index</code>: named character
vector that maps from topic/article name to path.
</p>
</li>
<li> <p><code>downlit.rdname</code>: name of current Rd file being documented (if any);
used to avoid self-links.
</p>
</li>
<li> <p><code>downlit.attached</code>: character vector of currently attached R packages.
</p>
</li>
<li> <p><code>downlit.local_packages</code>: named character vector providing relative
paths (value) to packages (name) that can be reached with relative links
from the target HTML document.
</p>
</li>
<li> <p><code>downlit.topic_path</code> and <code>downlit.article_path</code>: paths to reference
topics and articles/vignettes relative to the &quot;current&quot; file.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>cat(highlight("1 + 1"))
cat(highlight("base::t(1:3)"))

# Unparseable R code returns NA
cat(highlight("base::t("))
</code></pre>

<hr>
<h2 id='href_topic'>Generate url for topic/article/package</h2><span id='topic+href_topic'></span><span id='topic+href_article'></span><span id='topic+href_package'></span>

<h3>Description</h3>

<p>Generate url for topic/article/package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>href_topic(topic, package = NULL, is_fun = FALSE)

href_article(article, package = NULL)

href_package(package)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="href_topic_+3A_topic">topic</code>, <code id="href_topic_+3A_article">article</code></td>
<td>
<p>Topic/article name</p>
</td></tr>
<tr><td><code id="href_topic_+3A_package">package</code></td>
<td>
<p>Optional package name. If not supplied, will search
in all attached packages.</p>
</td></tr>
<tr><td><code id="href_topic_+3A_is_fun">is_fun</code></td>
<td>
<p>Only return topics that are (probably) for functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>URL topic or article; <code>NA</code> if can't find one.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>href_topic("t")
href_topic("DOESN'T EXIST")
href_topic("href_topic", "downlit")

href_package("downlit")
</code></pre>

<hr>
<h2 id='is_low_change'>Compare two recorded plots</h2><span id='topic+is_low_change'></span>

<h3>Description</h3>

<p>Compare two recorded plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_low_change(p1, p2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_low_change_+3A_p1">p1</code>, <code id="is_low_change_+3A_p2">p2</code></td>
<td>
<p>Plot results</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical value indicating whether <code>p2</code> is a low-level update of <code>p1</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
