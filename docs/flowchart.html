<!DOCTYPE html><html><head><title>Help for package flowchart</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {flowchart}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as_fc'><p>as_fc</p></a></li>
<li><a href='#clinic_patient'><p>Simulated clinical trial information by patient</p>
Simulated dataset of a clinical trial comparing some biomarker values between two randomized groups (control/treatment). This dataset contains the information by patient. It is equivalent to the dataset clinic_visit, which has the same information by visit.</a></li>
<li><a href='#clinic_visit'><p>Simulated clinical trial information by visit</p>
Simulated dataset of a clinical trial comparing some biomarker values between two randomized groups (control/treatment). This dataset contains the information by visit. It is equivalent to the dataset clinic_patient, which has the same information by patient.</a></li>
<li><a href='#fc_draw'><p>fc_draw</p></a></li>
<li><a href='#fc_filter'><p>fc_filter</p></a></li>
<li><a href='#fc_merge'><p>fc_merge</p></a></li>
<li><a href='#fc_modify'><p>fc_modify</p></a></li>
<li><a href='#fc_split'><p>fc_split</p></a></li>
<li><a href='#fc_stack'><p>fc_stack</p></a></li>
<li><a href='#is_class'><p>is_class</p></a></li>
<li><a href='#safo'><p>Random generated dataset from the SAFO study</p></a></li>
<li><a href='#update_x'><p>update_x</p></a></li>
<li><a href='#update_y'><p>update_y</p></a></li>
<li><a href='#update_y_stack'><p>update_y_stack</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy Flowchart Generator</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Pau Satorra &lt;psatorra@igtp.cat&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates participant flow diagrams directly from a dataframe. Representing the flow of participants through each stage of a study, especially in clinical trials, is essential to assess the generalisability and validity of the results. This package provides a set of functions that can be combined with a pipe operator to create all kinds of flowcharts from a data frame in an easy way.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bruigtp/flowchart/issues">https://github.com/bruigtp/flowchart/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>Gmisc, grid, tidyr, dplyr, purrr, stringr, tibble, tidyselect,
rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-05 08:37:43 UTC; psatorra</td>
</tr>
<tr>
<td>Author:</td>
<td>Pau Satorra [aut, cre],
  João Carmezim [aut],
  Natàlia Pallarés [aut],
  Cristian Tebé [aut]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-06 16:50:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='as_fc'>as_fc</h2><span id='topic+as_fc'></span>

<h3>Description</h3>

<p>This function allows to initialize a flow chart given any database. It will create a fc object showing the number of rows of the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_fc(
  .data,
  label = "Initial dataframe",
  text_pattern = "{label}\n{N}",
  just = "center",
  text_color = "black",
  text_fs = 8,
  bg_fill = "white",
  border_color = "black",
  hide = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_fc_+3A_.data">.data</code></td>
<td>
<p>Data frame that we want to show the number of rows.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_label">label</code></td>
<td>
<p>Character with the text that will be shown in the box.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_pattern">text_pattern</code></td>
<td>
<p>Structure that will have the text in the box. It recognizes label, n, N and perc within brackets. For default it is &quot;{label}\n{N}&quot;.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_just">just</code></td>
<td>
<p>Justification for the text: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_color">text_color</code></td>
<td>
<p>Color of the text. It is black by default.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_fs">text_fs</code></td>
<td>
<p>Font size of the text. It is 8 by default.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_bg_fill">bg_fill</code></td>
<td>
<p>Box background color. It is white by default.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_border_color">border_color</code></td>
<td>
<p>Box border color. It is black by default.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_hide">hide</code></td>
<td>
<p>Logical value to hide the initial box or not. Default is FALSE. hide = TRUE can only be combined with fc_split().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the dataset and the initialized flowchart parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clinic_patient |&gt;
as_fc(label = "All patients") |&gt;
fc_draw()

</code></pre>

<hr>
<h2 id='clinic_patient'>Simulated clinical trial information by patient
Simulated dataset of a clinical trial comparing some biomarker values between two randomized groups (control/treatment). This dataset contains the information by patient. It is equivalent to the dataset clinic_visit, which has the same information by visit.</h2><span id='topic+clinic_patient'></span>

<h3>Description</h3>

<p>Simulated clinical trial information by patient
Simulated dataset of a clinical trial comparing some biomarker values between two randomized groups (control/treatment). This dataset contains the information by patient. It is equivalent to the dataset clinic_visit, which has the same information by visit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(clinic_patient)
</code></pre>


<h3>Format</h3>

<p>A data frame with 230 rows and 8 columns
</p>

<dl>
<dt>id:</dt><dd><p>Identifier of each patient.</p>
</dd>
<dt>age:</dt><dd><p>Age values.</p>
</dd>
<dt>consent:</dt><dd><p>The patient has signed the informed consent?</p>
</dd>
<dt>group:</dt><dd><p>Randomized group: control/treatment.</p>
</dd>
<dt>n_visits:</dt><dd><p>Number of follow-up visits.</p>
</dd>
<dt>marker_alt:</dt><dd><p>Is the marker alterated in any of the visits?</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>clinic_patient |&gt;
  as_fc(label = "Available patients") |&gt;
  fc_filter(age &gt;= 18 &amp; consent == "Yes", label = "Patients included", show_exc = TRUE) |&gt;
  fc_split(group) |&gt;
  fc_filter(n_visits == 2, label = "Two visits available", show_exc = TRUE) |&gt;
  fc_split(marker_alt, label = c("Marker not alterated", "Marker alterated")) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='clinic_visit'>Simulated clinical trial information by visit
Simulated dataset of a clinical trial comparing some biomarker values between two randomized groups (control/treatment). This dataset contains the information by visit. It is equivalent to the dataset clinic_patient, which has the same information by patient.</h2><span id='topic+clinic_visit'></span>

<h3>Description</h3>

<p>Simulated clinical trial information by visit
Simulated dataset of a clinical trial comparing some biomarker values between two randomized groups (control/treatment). This dataset contains the information by visit. It is equivalent to the dataset clinic_patient, which has the same information by patient.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(clinic_visit)
</code></pre>


<h3>Format</h3>

<p>A data frame with 411 rows and 8 columns
</p>

<dl>
<dt>id:</dt><dd><p>Identifier of each patient.</p>
</dd>
<dt>age:</dt><dd><p>Age values.</p>
</dd>
<dt>consent:</dt><dd><p>The patient has signed the informed consent?</p>
</dd>
<dt>group:</dt><dd><p>Randomized group: control/treatment.</p>
</dd>
<dt>visit:</dt><dd><p>Number of the corresponding follow-up visit.</p>
</dd>
<dt>marker:</dt><dd><p>Marker value in the visit.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>clinic_visit |&gt;
  dplyr::filter(!is.na(group)) |&gt;
  as_fc(label = "Number of visits") |&gt;
  fc_split(group) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_draw'>fc_draw</h2><span id='topic+fc_draw'></span>

<h3>Description</h3>

<p>This function allows to draw the flowchart from a fc object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_draw(
  object,
  arrow_angle = 30,
  arrow_length = grid::unit(0.1, "inches"),
  arrow_ends = "last",
  arrow_type = "closed"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fc_draw_+3A_object">object</code></td>
<td>
<p>fc object that we want to draw.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_angle">arrow_angle</code></td>
<td>
<p>The angle of the arrow head in degrees, as in 'arrow'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_length">arrow_length</code></td>
<td>
<p>A unit specifying the length of the arrow head (from tip to base), as in 'arrow'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_ends">arrow_ends</code></td>
<td>
<p>One of &quot;last&quot;, &quot;first&quot;, or &quot;both&quot;, indicating which ends of the line to draw arrow heads, as in 'arrow'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_type">arrow_type</code></td>
<td>
<p>One of &quot;open&quot; or &quot;closed&quot; indicating whether the arrow head should be a closed triangle, as in 'arrow'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns a list with the dataset and the represented flowchart parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clinic_patient |&gt;
  as_fc(label = "Available patients") |&gt;
  fc_filter(age &gt;= 18 &amp; consent == "Yes", label = "Patients included", show_exc = TRUE) |&gt;
  fc_split(group) |&gt;
  fc_filter(n_visits == 2, label = "Two visits available", show_exc = TRUE) |&gt;
  fc_split(marker_alt, label = c("Marker not alterated", "Marker alterated")) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_filter'>fc_filter</h2><span id='topic+fc_filter'></span>

<h3>Description</h3>

<p>This function allows to filter the flowchart in function of a expression that returns a logic value that are defined in terms of the variables in the database. It will generate one box per group showing the number of rows of the group that matches the condition, and will retain only those rows in the data base.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_filter(
  object,
  filter,
  label = NULL,
  text_pattern = "{label}\n {n} ({perc}%)",
  show_exc = FALSE,
  direction_exc = "right",
  label_exc = "Excluded",
  text_pattern_exc = "{label}\n {n} ({perc}%)",
  sel_group = NULL,
  just = "center",
  text_color = "black",
  text_fs = 8,
  bg_fill = "white",
  border_color = "black",
  just_exc = "center",
  text_color_exc = "black",
  text_fs_exc = 6,
  bg_fill_exc = "white",
  border_color_exc = "black"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fc_filter_+3A_object">object</code></td>
<td>
<p>fc object that we want to filter.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_filter">filter</code></td>
<td>
<p>Expression that returns a logical value and are defined in terms of the variables in the data frame. The data base will be filtered by this expression, and it will create a box showing the number of rows satisfying this condition.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_label">label</code></td>
<td>
<p>Character that will be the title of the box. By default it will be the evaluated condition.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_pattern">text_pattern</code></td>
<td>
<p>Structure that will have the text in each of the boxes. It recognizes label, n, N and perc within brackets. For default it is &quot;{label}\n {n} ({perc}%)&quot;.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_show_exc">show_exc</code></td>
<td>
<p>Logical value. If TRUE a box showing the number of excluded rows will be added to the flow chart.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_direction_exc">direction_exc</code></td>
<td>
<p>One of &quot;left&quot; or &quot;right&quot; indicating if the exclusion box goes into the left direction or in the right direction. By default is &quot;right&quot;.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_label_exc">label_exc</code></td>
<td>
<p>Character that will be the title of the added box showing the excluded patients. By default it will show &quot;Excluded&quot;.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_pattern_exc">text_pattern_exc</code></td>
<td>
<p>Structure that will have the text in each of the excluded boxes. It recognizes label, n, N and perc within brackets. For default it is &quot;{label}\n {n} ({perc}%)&quot;.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_sel_group">sel_group</code></td>
<td>
<p>Specify if the filtering has to be done only by one of the previous groups. By default is NULL.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_just">just</code></td>
<td>
<p>Justification for the text: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_color">text_color</code></td>
<td>
<p>Color of the text. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_fs">text_fs</code></td>
<td>
<p>Font size of the text. It is 8 by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_bg_fill">bg_fill</code></td>
<td>
<p>Box background color. It is white by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_border_color">border_color</code></td>
<td>
<p>Box border color. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_just_exc">just_exc</code></td>
<td>
<p>Justification for the text of the exclude box: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_color_exc">text_color_exc</code></td>
<td>
<p>Color of the text of the exclude box. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_fs_exc">text_fs_exc</code></td>
<td>
<p>Font size of the text of the exclude box. It is 6 by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_bg_fill_exc">bg_fill_exc</code></td>
<td>
<p>Exclude box background color. It is white by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_border_color_exc">border_color_exc</code></td>
<td>
<p>Box background color of the exclude box. It is black by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the filtered dataset and the flowchart parameters with the resulting filtered box.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clinic_patient |&gt;
  as_fc(label = "Patients included") |&gt;
  fc_filter(age &gt;= 18 &amp; consent == "Yes", label = "Patients included", show_exc = TRUE) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_merge'>fc_merge</h2><span id='topic+fc_merge'></span>

<h3>Description</h3>

<p>This function allows to combine horizontally two different flowcharts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_merge(fcs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fc_merge_+3A_fcs">fcs</code></td>
<td>
<p>list with all the flowcharts that we want to merge</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing a list with the datasets belonging to each flowchart and another list with each of the flowcharts parameters to merge.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Create first flowchart for patients
fc1 &lt;- clinic_patient |&gt;
  dplyr::filter(!is.na(group)) |&gt;
  as_fc(label = "Patients included") |&gt;
  fc_split(group)

#Create second flowchart for visits
fc2 &lt;- clinic_visit |&gt;
  dplyr::filter(!is.na(group)) |&gt;
  as_fc(label = "Number of visits") |&gt;
  fc_split(group)

list(fc1, fc2) |&gt;
  fc_merge() |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_modify'>fc_modify</h2><span id='topic+fc_modify'></span>

<h3>Description</h3>

<p>This function allows to modify the '.$fc' tibble included in each fc object that contains all the parameters of the flowchart.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_modify(object, fun, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fc_modify_+3A_object">object</code></td>
<td>
<p>flowchart created as a fc object.</p>
</td></tr>
<tr><td><code id="fc_modify_+3A_fun">fun</code></td>
<td>
<p>A function or formula that will be applied to '.$fc'. If a _function_, it is used as is. If a _formula_, e.g. 'fun = ~.x |&gt; mutate(x = x + 0.2)', it is converted to a function.</p>
</td></tr>
<tr><td><code id="fc_modify_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to the mapped function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the dataset and the modified flowchart parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Example 1 (change text):
clinic_patient |&gt;
  as_fc(label = "Patients included") |&gt;
  fc_filter(age &gt;= 18 &amp; consent == "Yes", label = "Patients included", show_exc = TRUE) |&gt;
  fc_modify(~.x |&gt;
              dplyr::mutate(
                text = dplyr::case_when(
                  id == 3 ~ stringr::str_glue("Excluded patients:
                                     - {sum(clinic_patient$age &lt; 18)} under-age
                                     - {sum(clinic_patient$consent == 'No')} no consent
                                     "),
                  TRUE ~ text
                )
              )) |&gt;
  fc_draw()

#Example 2 (change coordinates):
clinic_patient |&gt;
  as_fc(label = "Patients included") |&gt;
  fc_filter(age &gt;= 18 &amp; consent == "Yes", label = "Patients included", show_exc = TRUE) |&gt;
  fc_modify(~.x |&gt;
             dplyr::mutate(
               x = dplyr::case_when(
                 id == 3 ~ 0.8,
                 TRUE ~ x
               ),
               y = dplyr::case_when(
                 id == 1 ~ 0.85,
                 id == 2 ~ 0.15,
                 id == 3 ~ 0.5
               )
             )) |&gt;
   fc_draw()
</code></pre>

<hr>
<h2 id='fc_split'>fc_split</h2><span id='topic+fc_split'></span>

<h3>Description</h3>

<p>This function allows to split the flowchart in function of the categories of a column of the database. It will generate as many boxes as categories has the column showing in each one the frequency of each category. It will additionally group the database per this column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_split(
  object,
  var,
  label = NULL,
  text_pattern = "{label}\n {n} ({perc}%)",
  sel_group = NULL,
  na.rm = FALSE,
  just = "center",
  text_color = "black",
  text_fs = 8,
  bg_fill = "white",
  border_color = "black"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fc_split_+3A_object">object</code></td>
<td>
<p>fc object that we want to split.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_var">var</code></td>
<td>
<p>variable column of the database from which it will be splitted.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_label">label</code></td>
<td>
<p>Vector of characters with the label of each category in order. It has to have as many elements as categories has the column. By default, it will put the labels of the categories.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_pattern">text_pattern</code></td>
<td>
<p>Structure that will have the text in each of the boxes. It recognizes label, n, N and perc within brackets. For default it is &quot;{label}\n {n} ({perc}%)&quot;.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_sel_group">sel_group</code></td>
<td>
<p>Specify if the splitting has to be done only by one of the previous groups. By default is NULL.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_na.rm">na.rm</code></td>
<td>
<p>logical. Should missing values of the grouping variable be removed? Default is FALSE.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_just">just</code></td>
<td>
<p>Justification for the text: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_color">text_color</code></td>
<td>
<p>Color of the text. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_fs">text_fs</code></td>
<td>
<p>Font size of the text. It is 8 by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_bg_fill">bg_fill</code></td>
<td>
<p>Box background color. It is white by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_border_color">border_color</code></td>
<td>
<p>Box border color. It is black by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the dataset grouped by the splitting variable and the flowchart parameters with the resulting split.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clinic_patient |&gt;
  dplyr::filter(!is.na(group)) |&gt;
  as_fc(label = "Patients included") |&gt;
  fc_split(group) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_stack'>fc_stack</h2><span id='topic+fc_stack'></span>

<h3>Description</h3>

<p>This function allows to combine vertically two different flowcharts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_stack(fcs, unite = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fc_stack_+3A_fcs">fcs</code></td>
<td>
<p>list with all the flowcharts that we want to merge</p>
</td></tr>
<tr><td><code id="fc_stack_+3A_unite">unite</code></td>
<td>
<p>logical value if the boxes have to be united or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing a list with the datasets belonging to each flowchart and the flowchart parameters combining all the flowcharts.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Create first flowchart for patients
fc1 &lt;- clinic_patient |&gt;
  dplyr::filter(!is.na(group)) |&gt;
  as_fc(label = "Patients included") |&gt;
  fc_split(group)

#Create second flowchart for visits
fc2 &lt;- clinic_visit |&gt;
  dplyr::filter(!is.na(group)) |&gt;
  as_fc(hide = TRUE) |&gt;
  fc_split(group, label = rep("Number visits", 2), text_pattern = "{label}\\n #' {n}")

list(fc1, fc2) |&gt;
  fc_stack() |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='is_class'>is_class</h2><span id='topic+is_class'></span>

<h3>Description</h3>

<p>Function to check if an object is from a given class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_class(x, class)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_class_+3A_x">x</code></td>
<td>
<p>element to check</p>
</td></tr>
<tr><td><code id="is_class_+3A_class">class</code></td>
<td>
<p>desired class to check</p>
</td></tr>
</table>

<hr>
<h2 id='safo'>Random generated dataset from the SAFO study</h2><span id='topic+safo'></span>

<h3>Description</h3>

<p>This dataset is a random generated dataset to reproduce the numbers needed to generate the flowchart of the SAFO study. SAFO is an open-label, multicenter, phase III–IV superiority randomized clinical trial to assess whether cloxacillin plus fosfomycin administered for the initial 7-days of therapy achieves better treatment success than cloxacillin alone in hospitalized patients with MSSA bacteremia.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(safo)
</code></pre>


<h3>Format</h3>

<p>A data frame with 925 rows and 21 columns
</p>

<dl>
<dt>id:</dt><dd><p>Identifier of each patient. This information does not match the real data.</p>
</dd>
<dt>inclusion_crit:</dt><dd><p>The patient not met the inclusion criteria?</p>
</dd>
<dt>exclusion_crit:</dt><dd><p>The patient met the exclusion criteria?</p>
</dd>
<dt>chronic_heart_failure:</dt><dd><p>Exc1: Chronic heart failure?</p>
</dd>
<dt>expected_death_24h:</dt><dd><p>Exc2: Clinical status with expected death in &lt;24h?</p>
</dd>
<dt>polymicrobial_bacteremia:</dt><dd><p>Exc3: Polymicrobial bacteremia?</p>
</dd>
<dt>conditions_affect_adhrence:</dt><dd><p>Exc4: Conditions expected to affect adhrence to the protocol?</p>
</dd>
<dt>susp_prosthetic_valve_endocard:</dt><dd><p>Exc5: Suspicion of prosthetic valve endocarditis?</p>
</dd>
<dt>severe_liver_cirrhosis:</dt><dd><p>Exc6: Severe liver cirrhosis?</p>
</dd>
<dt>acute_sars_cov2:</dt><dd><p>Exc7: Acute SARS-CoV-2 infection?</p>
</dd>
<dt>blactam_fosfomycin_hypersens:</dt><dd><p>Exc8: Beta-lactam or fosfomycin hypersensitivity?</p>
</dd>
<dt>other_clinical_trial:</dt><dd><p>Exc9: Participation in another clinical trial?</p>
</dd>
<dt>pregnancy_or_breastfeeding:</dt><dd><p>Exc10: Pregnancy or breastfeeding?</p>
</dd>
<dt>previous_participation:</dt><dd><p>Exc11: Previous participation in the SAFO trial?</p>
</dd>
<dt>myasthenia_gravis:</dt><dd><p>Exc12: Myasthenia gravis?</p>
</dd>
<dt>decline_part:</dt><dd><p>The patient declined to participate?</p>
</dd>
<dt>group:</dt><dd><p>Randomized treatment received: cloxacilin alone / cloxacilin plus fosfomycin</p>
</dd>
<dt>itt:</dt><dd><p>The patient belongs to the intention to treat (ITT) group?</p>
</dd>
<dt>reason_itt:</dt><dd><p>Reason for exclusion from the ITT group.</p>
</dd>
<dt>pp:</dt><dd><p>The patient belongs to the per protocol (PP) group?</p>
</dd>
<dt>reason_pp:</dt><dd><p>Reason for exclusion from the PP group.</p>
</dd>
</dl>



<h3>References</h3>

<p>Grillo, S., Pujol, M., Miró, J.M. et al. Cloxacillin plus fosfomycin versus cloxacillin alone for methicillin-susceptible Staphylococcus aureus bacteremia: a randomized trial. Nat Med 29, 2518–2525 (2023). https://doi.org/10.1038/s41591-023-02569-0
</p>

<hr>
<h2 id='update_x'>update_x</h2><span id='topic+update_x'></span>

<h3>Description</h3>

<p>Function to update the horizontal position of the previuosly created flow charts, to merge two flowcharts used in fc_merge().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_x(x, i, n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_x_+3A_x">x</code></td>
<td>
<p>old horizontal position of the boxes</p>
</td></tr>
<tr><td><code id="update_x_+3A_i">i</code></td>
<td>
<p>position of the flowchart within the list of flowcharts.</p>
</td></tr>
<tr><td><code id="update_x_+3A_n">n</code></td>
<td>
<p>number of total flowcharts to merge</p>
</td></tr>
</table>

<hr>
<h2 id='update_y'>update_y</h2><span id='topic+update_y'></span>

<h3>Description</h3>

<p>Function to update the vertical position of the previuosly created boxes, to add the new ones with fc_split() or fc_filter().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_y(y, type, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_y_+3A_y">y</code></td>
<td>
<p>old height of the boxes</p>
</td></tr>
<tr><td><code id="update_y_+3A_type">type</code></td>
<td>
<p>type of box</p>
</td></tr>
<tr><td><code id="update_y_+3A_x">x</code></td>
<td>
<p>horizontal position of the boxes</p>
</td></tr>
</table>

<hr>
<h2 id='update_y_stack'>update_y_stack</h2><span id='topic+update_y_stack'></span>

<h3>Description</h3>

<p>Function to update the vertical position of the previuosly created flow charts, to stack the two flowcharts with fc_stack().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_y_stack(y, x, type, i, n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_y_stack_+3A_y">y</code></td>
<td>
<p>old vertical position of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_x">x</code></td>
<td>
<p>old horizontal position of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_type">type</code></td>
<td>
<p>type of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_i">i</code></td>
<td>
<p>position of the flowchart within the list of flowcharts.</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_n">n</code></td>
<td>
<p>number of total flowcharts to merge</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
