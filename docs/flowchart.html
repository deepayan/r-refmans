<!DOCTYPE html><html lang="en"><head><title>Help for package flowchart</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {flowchart}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as_fc'><p>as_fc</p></a></li>
<li><a href='#fc_draw'><p>fc_draw</p></a></li>
<li><a href='#fc_export'><p>fc_export</p></a></li>
<li><a href='#fc_filter'><p>fc_filter</p></a></li>
<li><a href='#fc_merge'><p>fc_merge</p></a></li>
<li><a href='#fc_modify'><p>fc_modify</p></a></li>
<li><a href='#fc_split'><p>fc_split</p></a></li>
<li><a href='#fc_stack'><p>fc_stack</p></a></li>
<li><a href='#fc_view'><p>fc_view</p></a></li>
<li><a href='#is_class'><p>is_class</p></a></li>
<li><a href='#safo'><p>Random generated dataset from the SAFO study</p></a></li>
<li><a href='#update_x'><p>update_x</p></a></li>
<li><a href='#update_y'><p>update_y</p></a></li>
<li><a href='#update_y_stack'><p>update_y_stack</p></a></li>
<li><a href='#update_y_stack_unite'><p>update_y_stack_unite</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy Flowchart Generator</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Pau Satorra &lt;psatorra@igtp.cat&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates participant flow diagrams directly from a dataframe. Representing the flow of participants through each stage of a study, especially in clinical trials, is essential to assess the generalisability and validity of the results. This package provides a set of functions that can be combined with a pipe operator to create all kinds of flowcharts from a data frame in an easy way.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bruigtp/flowchart/issues">https://github.com/bruigtp/flowchart/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>Gmisc, grid, tidyr, dplyr (&ge; 1.1.0), purrr, stringr, tibble,
tidyselect, rlang, grDevices</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, ragg, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://bruigtp.github.io/flowchart/">https://bruigtp.github.io/flowchart/</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-20 13:50:38 UTC; psatorra</td>
</tr>
<tr>
<td>Author:</td>
<td>Pau Satorra <a href="https://orcid.org/0000-0002-8144-4089"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  João Carmezim <a href="https://orcid.org/0009-0009-1443-5578"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Natàlia Pallarès <a href="https://orcid.org/0000-0002-1462-379X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Cristian Tebé <a href="https://orcid.org/0000-0003-2320-1385"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Kenneth Taylor <a href="https://orcid.org/0000-0002-3205-9280"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-20 14:10:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='as_fc'>as_fc</h2><span id='topic+as_fc'></span>

<h3>Description</h3>

<p>This function allows to initialize a flow chart given any database. It will create a fc object showing the number of rows of the database. If a database is not available, the user can instead directly enter the number of rows in the study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_fc(
  .data = NULL,
  N = NULL,
  label = "Initial dataframe",
  text_pattern = "{label}\n{N}",
  just = "center",
  text_color = "black",
  text_fs = 8,
  text_fface = 1,
  text_ffamily = NA,
  text_padding = 1,
  bg_fill = "white",
  border_color = "black",
  hide = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_fc_+3A_.data">.data</code></td>
<td>
<p>Data frame to be initialised as a flowchart.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_n">N</code></td>
<td>
<p>Number of rows of the study in case '.data' is NULL.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_label">label</code></td>
<td>
<p>Character or expression with the text that will be shown in the box.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_pattern">text_pattern</code></td>
<td>
<p>Structure that will have the text in the box. It recognizes label, n, N and perc within brackets. By default it is &quot;{label}\n{N}&quot;. If label is an expression, the label is always placed at the beginning of the pattern, followed by a line break where the structure specified by text_pattern is placed.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_just">just</code></td>
<td>
<p>Justification for the text: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_color">text_color</code></td>
<td>
<p>Color of the text. It is black by default. See the 'col' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_fs">text_fs</code></td>
<td>
<p>Font size of the text. It is 8 by default. See the 'fontsize' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_fface">text_fface</code></td>
<td>
<p>Font face of the text. It is 1 by default. See the 'fontface' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_ffamily">text_ffamily</code></td>
<td>
<p>Changes the font family of the text. Default is NA. See the 'fontfamily' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_text_padding">text_padding</code></td>
<td>
<p>Changes the text padding inside the box. Default is 1. This number has to be greater than 0.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_bg_fill">bg_fill</code></td>
<td>
<p>Box background color. It is white by default. See the 'fill' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_border_color">border_color</code></td>
<td>
<p>Box border color. It is black by default. See the 'col' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="as_fc_+3A_hide">hide</code></td>
<td>
<p>Logical value to hide the initial box or not. Default is FALSE. hide = TRUE can only be combined with fc_split().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the dataset and the initialized flowchart parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safo |&gt;
as_fc(label = "Patients assessed for eligibility") |&gt;
fc_draw()

</code></pre>

<hr>
<h2 id='fc_draw'>fc_draw</h2><span id='topic+fc_draw'></span>

<h3>Description</h3>

<p>This function allows to draw the flowchart from a fc object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_draw(
  object,
  box_corners = "round",
  arrow_angle = 30,
  arrow_length = grid::unit(0.1, "inches"),
  arrow_ends = "last",
  arrow_type = "closed",
  title = NULL,
  title_x = 0.5,
  title_y = 0.9,
  title_color = "black",
  title_fs = 15,
  title_fface = 2,
  title_ffamily = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_draw_+3A_object">object</code></td>
<td>
<p>fc object that we want to draw.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_box_corners">box_corners</code></td>
<td>
<p>Indicator of whether to draw boxes with round ('&quot;round&quot;') vs non-round ('&quot;sharp&quot;') corners. Default is '&quot;round&quot;'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_angle">arrow_angle</code></td>
<td>
<p>The angle of the arrow head in degrees, as in 'arrow'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_length">arrow_length</code></td>
<td>
<p>A unit specifying the length of the arrow head (from tip to base), as in 'arrow'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_ends">arrow_ends</code></td>
<td>
<p>One of &quot;last&quot;, &quot;first&quot;, or &quot;both&quot;, indicating which ends of the line to draw arrow heads, as in 'arrow'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_arrow_type">arrow_type</code></td>
<td>
<p>One of &quot;open&quot; or &quot;closed&quot; indicating whether the arrow head should be a closed triangle, as in 'arrow'.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_title">title</code></td>
<td>
<p>The title of the flowchart. Default is NULL (no title).</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_title_x">title_x</code></td>
<td>
<p>x coordinate for the title. Default is 0.5.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_title_y">title_y</code></td>
<td>
<p>y coordinate for the title. Default is 0.9.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_title_color">title_color</code></td>
<td>
<p>Color of the title. It is black by default. See the 'col' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_title_fs">title_fs</code></td>
<td>
<p>Font size of the title. It is 15 by default. See the 'fontsize' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_title_fface">title_fface</code></td>
<td>
<p>Font face of the title. It is 2 by default. See the 'fontface' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_draw_+3A_title_ffamily">title_ffamily</code></td>
<td>
<p>Changes the font family of the title. Default is NA. See the 'fontfamily' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the same object that has been given to the function, with the given arguments to draw the flowchart stored in the attributes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safo |&gt;
  as_fc(label = "Patients assessed for eligibility") |&gt;
  fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
  fc_split(group) |&gt;
  fc_filter(itt == "Yes", label = "Included in ITT") |&gt;
  fc_filter(pp == "Yes", label = "Included in PP") |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_export'>fc_export</h2><span id='topic+fc_export'></span>

<h3>Description</h3>

<p>This function allows you to export the drawn flowchart to the most popular graphic formats, including bitmap formats (png, jpeg, tiff, bmp) and vector formats (svg, pdf). For bitmap formats, it uses the 'ragg' package devices when available for higher performance and higher quality output than standard raster devices provide by 'grDevices'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_export(
  object,
  filename,
  path = NULL,
  format = NULL,
  width = NA,
  height = NA,
  units = NULL,
  res = 100
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_export_+3A_object">object</code></td>
<td>
<p>fc object that we want to export.</p>
</td></tr>
<tr><td><code id="fc_export_+3A_filename">filename</code></td>
<td>
<p>File name to create on disk.</p>
</td></tr>
<tr><td><code id="fc_export_+3A_path">path</code></td>
<td>
<p>Path of the directory to save plot to: path and filename are combined to create the fully qualified file name. Defaults to the working directory.</p>
</td></tr>
<tr><td><code id="fc_export_+3A_format">format</code></td>
<td>
<p>Name of the graphic device. One of 'png', 'jpeg', 'tiff', 'bmp', 'svg', or 'pdf'. If 'NULL' (default), the format is guessed based on the filename extension.</p>
</td></tr>
<tr><td><code id="fc_export_+3A_width">width</code>, <code id="fc_export_+3A_height">height</code></td>
<td>
<p>Plot size in units expressed by the 'units' argument. Default is 600px for bitmap formats and 6 inches for vector formats.</p>
</td></tr>
<tr><td><code id="fc_export_+3A_units">units</code></td>
<td>
<p>One of the following units in which the width and height arguments are expressed: &quot;in&quot;, &quot;cm&quot;, &quot;mm&quot; for vector formats and &quot;in&quot;, &quot;cm&quot;, &quot;mm&quot; or &quot;px&quot; for bitmap formats. If left 'NULL' (default), the function will automatically use &quot;px&quot; for bitmap formats and &quot;in&quot; for vector formats.</p>
</td></tr>
<tr><td><code id="fc_export_+3A_res">res</code></td>
<td>
<p>The nominal resolution in ppi which will be recorded in the bitmap file, if a positive integer. Also used for units other than the default, and to convert points to pixels. Default is 100 if exporting in bitmap format. This argument is unused if exporting to a vector format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>- **Vector Formats ('svg', 'pdf'):** These formats are ideal for graphics that need to be scaled without loss of quality. The default units for width and height are inches. If user specifies 'units' other than inches (&quot;mm&quot; or &quot;cm&quot;), the function will convert the dimensions to inches using standard conversion formulas.
- **Bitmap Formats ('png', 'jpeg', 'tiff', 'bmp'):** For these formats (with the exception of 'bmp'), the function uses the 'ragg' package devices when available, providing higher performance and higher quality output. The default units for width and height are pixels.
- **Suggested Dependencies:** For superior performance and quality bitmap outputs, it is recommended to install the &lsquo;ragg' package. For exporting to &rsquo;pdf' format with enhanced features, the Cairo graphics library will be used if it is available.
</p>


<h3>Value</h3>

<p>Invisibly returns the same object that has been given to the function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
safo |&gt;
 as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
 fc_draw() |&gt;
 fc_export("flowchart.png")

#Specifying size and resolution
safo |&gt;
 as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
 fc_draw() |&gt;
 fc_export("flowchart.png", width = 3000, height = 4000, res = 700)

#Exporting to an SVG file
safo |&gt;
 as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
 fc_draw() |&gt;
 fc_export("flowchart.svg")

#Exporting to a PDF file
safo |&gt;
 as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
 fc_draw() |&gt;
 fc_export("flowchart.pdf")

## End(Not run)
</code></pre>

<hr>
<h2 id='fc_filter'>fc_filter</h2><span id='topic+fc_filter'></span>

<h3>Description</h3>

<p>This function allows to filter the flowchart in function of a expression that returns a logic value that are defined in terms of the variables in the database. It will generate one box per group showing the number of rows of the group that matches the condition, and will retain only those rows in the data base.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_filter(
  object,
  filter = NULL,
  N = NULL,
  label = NULL,
  text_pattern = "{label}\n {n} ({perc}%)",
  perc_total = FALSE,
  show_exc = FALSE,
  direction_exc = "right",
  label_exc = "Excluded",
  text_pattern_exc = "{label}\n {n} ({perc}%)",
  sel_group = NULL,
  round_digits = 2,
  just = "center",
  text_color = "black",
  text_fs = 8,
  text_fface = 1,
  text_ffamily = NA,
  text_padding = 1,
  bg_fill = "white",
  border_color = "black",
  just_exc = "center",
  text_color_exc = "black",
  text_fs_exc = 6,
  text_fface_exc = 1,
  text_ffamily_exc = NA,
  text_padding_exc = 1,
  bg_fill_exc = "white",
  border_color_exc = "black",
  offset_exc = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_filter_+3A_object">object</code></td>
<td>
<p>fc object that we want to filter.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_filter">filter</code></td>
<td>
<p>Expression that returns a logical value and are defined in terms of the variables in the data frame. The data base will be filtered by this expression, and it will create a box showing the number of rows satisfying this condition.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_n">N</code></td>
<td>
<p>Number of rows after the filter in case 'filter' is NULL.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_label">label</code></td>
<td>
<p>Character or expression that will be the title of the box. By default it will be the evaluated condition.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_pattern">text_pattern</code></td>
<td>
<p>Structure that will have the text in each of the boxes. It recognizes label, n, N and perc within brackets. For default it is &quot;{label}\n {n} ({perc}%)&quot;. If label is an expression, the label is always placed at the beginning of the pattern, followed by a line break where the structure specified by text_pattern is placed.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_perc_total">perc_total</code></td>
<td>
<p>logical. Should percentages be calculated using the total number of rows at the beginning of the flowchart? Default is FALSE, meaning that they will be calculated using the number at the parent leaf.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_show_exc">show_exc</code></td>
<td>
<p>Logical value. If TRUE a box showing the number of excluded rows will be added to the flow chart.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_direction_exc">direction_exc</code></td>
<td>
<p>One of &quot;left&quot; or &quot;right&quot; indicating if the exclusion box goes into the left direction or in the right direction. By default is &quot;right&quot;.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_label_exc">label_exc</code></td>
<td>
<p>Character or expression that will be the title of the added box showing the excluded patients. By default it will show &quot;Excluded&quot;.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_pattern_exc">text_pattern_exc</code></td>
<td>
<p>Structure that will have the text in each of the excluded boxes. It recognizes label, n, N and perc within brackets. For default it is &quot;{label}\n {n} ({perc}%)&quot;. If label_exc is an expression, the label is always placed at the beginning of the pattern, followed by a line break where the structure specified by text_pattern_exc is placed.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_sel_group">sel_group</code></td>
<td>
<p>Select the group in which to perform the filter. The default is NULL. Can only be used if the flowchart has previously been split. If the flowchart has more than one group, it can either be given the full name as it is stored in the &lsquo;$fc' component (separated by &rsquo;\'), or it can be given as a vector with the names of each group to be selected.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_round_digits">round_digits</code></td>
<td>
<p>Number of digits to round percentages. It is 2 by default.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_just">just</code></td>
<td>
<p>Justification for the text: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_color">text_color</code></td>
<td>
<p>Color of the text. It is black by default. See the 'col' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_fs">text_fs</code></td>
<td>
<p>Font size of the text. It is 8 by default. See the 'fontsize' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_fface">text_fface</code></td>
<td>
<p>Font face of the text. It is 1 by default. See the 'fontface' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_ffamily">text_ffamily</code></td>
<td>
<p>Changes the font family of the text. Default is NA. See the 'fontfamily' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_padding">text_padding</code></td>
<td>
<p>Changes the text padding inside the box. Default is 1. This number has to be greater than 0.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_bg_fill">bg_fill</code></td>
<td>
<p>Box background color. It is white by default. See the 'fill' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_border_color">border_color</code></td>
<td>
<p>Box border color. It is black by default. See the 'col' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_just_exc">just_exc</code></td>
<td>
<p>Justification for the text of the exclude box: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_color_exc">text_color_exc</code></td>
<td>
<p>Color of the text of the exclude box. It is black by default. See 'text_color'.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_fs_exc">text_fs_exc</code></td>
<td>
<p>Font size of the text of the exclude box. It is 6 by default. See 'text_fs'.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_fface_exc">text_fface_exc</code></td>
<td>
<p>Font face of the text of the exclude box. It is 1 by default. See the 'fontface' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>. See 'text_fface'.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_ffamily_exc">text_ffamily_exc</code></td>
<td>
<p>Changes the font family of the text of the exclude box. Default is NA. See the 'fontfamily' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>. See 'text_ffamily'.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_text_padding_exc">text_padding_exc</code></td>
<td>
<p>Changes the text padding inside the exclude box. Default is 1. This number has to be greater than 0.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_bg_fill_exc">bg_fill_exc</code></td>
<td>
<p>Exclude box background color. It is white by default. See 'bg_fill'.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_border_color_exc">border_color_exc</code></td>
<td>
<p>Box background color of the exclude box. It is black by default. See 'border_color'.</p>
</td></tr>
<tr><td><code id="fc_filter_+3A_offset_exc">offset_exc</code></td>
<td>
<p>Amount of space to add to the distance between the box and the excluded box (in the x coordinate). If positive, this distance will be larger. If negative, it will be smaller. This number has to be at least between 0 and 1 (plot limits) and the resulting x coordinate cannot exceed these plot limits. The default is NULL (no offset).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the filtered dataset and the flowchart parameters with the resulting filtered box.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safo |&gt;
  as_fc(label = "Patients assessed for eligibility") |&gt;
  fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_merge'>fc_merge</h2><span id='topic+fc_merge'></span>

<h3>Description</h3>

<p>This function allows to combine horizontally two different flowcharts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_merge(fcs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_merge_+3A_fcs">fcs</code></td>
<td>
<p>list with all the flowcharts that we want to merge</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing a list with the datasets belonging to each flowchart and another list with each of the flowcharts parameters to merge.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create first flowchart for ITT
fc1 &lt;- safo |&gt;
  as_fc(label = "Patients assessed for eligibility") |&gt;
  fc_filter(itt == "Yes", label = "Intention to treat (ITT)")


# Create second flowchart for PP
fc2 &lt;- safo |&gt;
  as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(pp == "Yes", label = "Per protocol (PP)")

list(fc1, fc2) |&gt;
  fc_merge() |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_modify'>fc_modify</h2><span id='topic+fc_modify'></span>

<h3>Description</h3>

<p>This function allows to modify the '.$fc' tibble included in each fc object that contains all the parameters of the flowchart.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_modify(object, fun, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_modify_+3A_object">object</code></td>
<td>
<p>flowchart created as a fc object.</p>
</td></tr>
<tr><td><code id="fc_modify_+3A_fun">fun</code></td>
<td>
<p>A function or formula that will be applied to '.$fc'. If a _function_, it is used as is. If a _formula_, e.g. 'fun = ~.x |&gt; mutate(x = x + 0.2)', it is converted to a function.</p>
</td></tr>
<tr><td><code id="fc_modify_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to the mapped function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the dataset and the modified flowchart parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Example: let's modify the excluded box
text_exc &lt;- paste0(
  sum(safo$inclusion_crit == "Yes"),
  " not met the inclusion criteria\n",
  sum(safo$exclusion_crit == "Yes"),
  " met the exclusion criteria"
)

safo |&gt;
  as_fc(label = "Patients assessed for eligibility") |&gt;
  fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
  fc_modify(
    ~ . |&gt;
      dplyr::mutate(
        text = ifelse(id == 3, text_exc, text),
        x = ifelse(id == 3, 0.75, x)
      )
  ) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_split'>fc_split</h2><span id='topic+fc_split'></span>

<h3>Description</h3>

<p>This function allows to split the flowchart in function of the categories of a column of the database. It will generate as many boxes as categories has the column showing in each one the frequency of each category. It will additionally group the database per this column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_split(
  object,
  var = NULL,
  N = NULL,
  label = NULL,
  text_pattern = "{label}\n {n} ({perc}%)",
  perc_total = FALSE,
  sel_group = NULL,
  na.rm = FALSE,
  show_zero = FALSE,
  round_digits = 2,
  just = "center",
  text_color = "black",
  text_fs = 8,
  text_fface = 1,
  text_ffamily = NA,
  text_padding = 1,
  bg_fill = "white",
  border_color = "black",
  title = NULL,
  text_color_title = "black",
  text_fs_title = 10,
  text_fface_title = 1,
  text_ffamily_title = NA,
  text_padding_title = 0.6,
  bg_fill_title = "white",
  border_color_title = "black",
  offset = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_split_+3A_object">object</code></td>
<td>
<p>fc object that we want to split.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_var">var</code></td>
<td>
<p>variable column of the database from which it will be splitted.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_n">N</code></td>
<td>
<p>Number of rows after the split in case 'var' is NULL.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_label">label</code></td>
<td>
<p>Vector of characters or vector of expressions with the label of each category in order. It has to have as many elements as categories has the column. By default, it will put the labels of the categories.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_pattern">text_pattern</code></td>
<td>
<p>Structure that will have the text in each of the boxes. It recognizes label, n, N and perc within brackets. For default it is &quot;{label}\n {n} ({perc}%)&quot;. If label is an expression, the label is always placed at the beginning of the pattern, followed by a line break where the structure specified by text_pattern is placed.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_perc_total">perc_total</code></td>
<td>
<p>logical. Should percentages be calculated using the total number of rows at the beginning of the flowchart? Default is FALSE, meaning that they will be calculated using the number at the parent leaf.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_sel_group">sel_group</code></td>
<td>
<p>Select the group in which to perform the filter. The default is NULL. Can only be used if the flowchart has previously been split. If the flowchart has more than one group, it can either be given the full name as it is stored in the &lsquo;$fc' component (separated by &rsquo;\'), or it can be given as a vector with the names of each group to be selected.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_na.rm">na.rm</code></td>
<td>
<p>logical. Should missing values of the grouping variable be removed? Default is FALSE.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_show_zero">show_zero</code></td>
<td>
<p>logical. Should the levels of the grouping variable that don't have data be shown? Default is FALSE.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_round_digits">round_digits</code></td>
<td>
<p>Number of digits to round percentages. It is 2 by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_just">just</code></td>
<td>
<p>Justification for the text: left, center or right. Default is center.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_color">text_color</code></td>
<td>
<p>Color of the text. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_fs">text_fs</code></td>
<td>
<p>Font size of the text. It is 8 by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_fface">text_fface</code></td>
<td>
<p>Font face of the text. It is 1 by default. See the 'fontface' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_ffamily">text_ffamily</code></td>
<td>
<p>Changes the font family of the text. Default is NA. See the 'fontfamily' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_padding">text_padding</code></td>
<td>
<p>Changes the text padding inside the box. Default is 1. This number has to be greater than 0.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_bg_fill">bg_fill</code></td>
<td>
<p>Box background color. It is white by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_border_color">border_color</code></td>
<td>
<p>Box border color. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_title">title</code></td>
<td>
<p>Add a title box to the split. Default is NULL. It can only be used when there are only two resulting boxes after the split.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_color_title">text_color_title</code></td>
<td>
<p>Color of the title text. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_fs_title">text_fs_title</code></td>
<td>
<p>Font size of the title text. It is 8 by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_fface_title">text_fface_title</code></td>
<td>
<p>Font face of the title text. It is 1 by default. See the 'fontface' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_ffamily_title">text_ffamily_title</code></td>
<td>
<p>Changes the font family of the title text. Default is NA. See the 'fontfamily' parameter for <code><a href="grid.html#topic+gpar">gpar</a></code>.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_text_padding_title">text_padding_title</code></td>
<td>
<p>Changes the title text padding inside the box. Default is 1. This number has to be greater than 0.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_bg_fill_title">bg_fill_title</code></td>
<td>
<p>Title box background color. It is white by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_border_color_title">border_color_title</code></td>
<td>
<p>Title box border color. It is black by default.</p>
</td></tr>
<tr><td><code id="fc_split_+3A_offset">offset</code></td>
<td>
<p>Amount of space to add to the distance between boxes (in the x coordinate). If positive, this distance will be larger. If negative, it will be smaller. This number has to be at least between 0 and 1 (plot limits) and the resulting x coordinate cannot exceed these plot limits. The default is NULL (no offset).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with the dataset grouped by the splitting variable and the flowchart parameters with the resulting split.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>safo |&gt;
  dplyr::filter(!is.na(group)) |&gt;
  as_fc(label = "Randomized patients") |&gt;
  fc_split(group) |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_stack'>fc_stack</h2><span id='topic+fc_stack'></span>

<h3>Description</h3>

<p>This function allows to combine vertically two different flowcharts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_stack(fcs, unite = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_stack_+3A_fcs">fcs</code></td>
<td>
<p>list with all the flowcharts that we want to merge</p>
</td></tr>
<tr><td><code id="fc_stack_+3A_unite">unite</code></td>
<td>
<p>logical value if the boxes have to be united or not. Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List containing a list with the datasets belonging to each flowchart and the flowchart parameters combining all the flowcharts.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create first flowchart for ITT
fc1 &lt;- safo |&gt;
  as_fc(label = "Patients assessed for eligibility") |&gt;
  fc_filter(itt == "Yes", label = "Intention to treat (ITT)")


# Create second flowchart for PP
fc2 &lt;- safo |&gt;
  as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(pp == "Yes", label = "Per protocol (PP)")

list(fc1, fc2) |&gt;
  fc_stack() |&gt;
  fc_draw()

</code></pre>

<hr>
<h2 id='fc_view'>fc_view</h2><span id='topic+fc_view'></span>

<h3>Description</h3>

<p>This function allows you to return either the data stored in '$data' or the flowchart information stored in '$fc'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fc_view(object, what)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fc_view_+3A_object">object</code></td>
<td>
<p>fc object that we want to access.</p>
</td></tr>
<tr><td><code id="fc_view_+3A_what">what</code></td>
<td>
<p>Choose &quot;data&quot; to return the data associated to the flowchart stored in '$data' or &quot;fc&quot; to return the flowchart information stored in '$fc'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a tibble. Either '$data' or '$fc'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Return the data associated to the flowchart
safo |&gt;
 as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
 fc_view("data")

#Return the flowchart information
safo |&gt;
 as_fc(label = "Patients assessed for eligibility") |&gt;
 fc_filter(!is.na(group), label = "Randomized", show_exc = TRUE) |&gt;
 fc_view("fc")

</code></pre>

<hr>
<h2 id='is_class'>is_class</h2><span id='topic+is_class'></span>

<h3>Description</h3>

<p>Function to check if an object is from a given class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_class(x, class)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_class_+3A_x">x</code></td>
<td>
<p>element to check</p>
</td></tr>
<tr><td><code id="is_class_+3A_class">class</code></td>
<td>
<p>desired class to check</p>
</td></tr>
</table>

<hr>
<h2 id='safo'>Random generated dataset from the SAFO study</h2><span id='topic+safo'></span>

<h3>Description</h3>

<p>This dataset is a random generated dataset to reproduce the numbers needed to generate the flowchart of the SAFO study. SAFO is an open-label, multicenter, phase III–IV superiority randomized clinical trial to assess whether cloxacillin plus fosfomycin administered for the initial 7-days of therapy achieves better treatment success than cloxacillin alone in hospitalized patients with MSSA bacteremia.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(safo)
</code></pre>


<h3>Format</h3>

<p>A data frame with 925 rows and 21 columns
</p>

<dl>
<dt>id:</dt><dd><p>Identifier of each patient. This information does not match the real data.</p>
</dd>
<dt>inclusion_crit:</dt><dd><p>The patient not met the inclusion criteria?</p>
</dd>
<dt>exclusion_crit:</dt><dd><p>The patient met the exclusion criteria?</p>
</dd>
<dt>chronic_heart_failure:</dt><dd><p>Exc1: Chronic heart failure?</p>
</dd>
<dt>expected_death_24h:</dt><dd><p>Exc2: Clinical status with expected death in &lt;24h?</p>
</dd>
<dt>polymicrobial_bacteremia:</dt><dd><p>Exc3: Polymicrobial bacteremia?</p>
</dd>
<dt>conditions_affect_adhrence:</dt><dd><p>Exc4: Conditions expected to affect adhrence to the protocol?</p>
</dd>
<dt>susp_prosthetic_valve_endocard:</dt><dd><p>Exc5: Suspicion of prosthetic valve endocarditis?</p>
</dd>
<dt>severe_liver_cirrhosis:</dt><dd><p>Exc6: Severe liver cirrhosis?</p>
</dd>
<dt>acute_sars_cov2:</dt><dd><p>Exc7: Acute SARS-CoV-2 infection?</p>
</dd>
<dt>blactam_fosfomycin_hypersens:</dt><dd><p>Exc8: Beta-lactam or fosfomycin hypersensitivity?</p>
</dd>
<dt>other_clinical_trial:</dt><dd><p>Exc9: Participation in another clinical trial?</p>
</dd>
<dt>pregnancy_or_breastfeeding:</dt><dd><p>Exc10: Pregnancy or breastfeeding?</p>
</dd>
<dt>previous_participation:</dt><dd><p>Exc11: Previous participation in the SAFO trial?</p>
</dd>
<dt>myasthenia_gravis:</dt><dd><p>Exc12: Myasthenia gravis?</p>
</dd>
<dt>decline_part:</dt><dd><p>The patient declined to participate?</p>
</dd>
<dt>group:</dt><dd><p>Randomized treatment received: cloxacilin alone / cloxacilin plus fosfomycin</p>
</dd>
<dt>itt:</dt><dd><p>The patient belongs to the intention to treat (ITT) group?</p>
</dd>
<dt>reason_itt:</dt><dd><p>Reason for exclusion from the ITT group.</p>
</dd>
<dt>pp:</dt><dd><p>The patient belongs to the per protocol (PP) group?</p>
</dd>
<dt>reason_pp:</dt><dd><p>Reason for exclusion from the PP group.</p>
</dd>
</dl>



<h3>References</h3>

<p>Grillo, S., Pujol, M., Miró, J.M. et al. Cloxacillin plus fosfomycin versus cloxacillin alone for methicillin-susceptible Staphylococcus aureus bacteremia: a randomized trial. Nat Med 29, 2518–2525 (2023). https://doi.org/10.1038/s41591-023-02569-0
</p>

<hr>
<h2 id='update_x'>update_x</h2><span id='topic+update_x'></span>

<h3>Description</h3>

<p>Function to update the horizontal position of the previuosly created flow charts, to merge two flowcharts used in fc_merge().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_x(x, i, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_x_+3A_x">x</code></td>
<td>
<p>old horizontal position of the boxes</p>
</td></tr>
<tr><td><code id="update_x_+3A_i">i</code></td>
<td>
<p>position of the flowchart within the list of flowcharts.</p>
</td></tr>
<tr><td><code id="update_x_+3A_n">n</code></td>
<td>
<p>number of total flowcharts to merge</p>
</td></tr>
</table>

<hr>
<h2 id='update_y'>update_y</h2><span id='topic+update_y'></span>

<h3>Description</h3>

<p>Function to update the vertical position of the previuosly created boxes, to add the new ones with fc_split() or fc_filter().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_y(y, type, x, group)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_y_+3A_y">y</code></td>
<td>
<p>old height of the boxes</p>
</td></tr>
<tr><td><code id="update_y_+3A_type">type</code></td>
<td>
<p>type of box</p>
</td></tr>
<tr><td><code id="update_y_+3A_x">x</code></td>
<td>
<p>horizontal position of the boxes</p>
</td></tr>
</table>

<hr>
<h2 id='update_y_stack'>update_y_stack</h2><span id='topic+update_y_stack'></span>

<h3>Description</h3>

<p>Function to update the vertical position of the previuosly created flowcharts, to stack the two flowcharts with fc_stack().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_y_stack(y, x, type, i, n)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_y_stack_+3A_y">y</code></td>
<td>
<p>old vertical position of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_x">x</code></td>
<td>
<p>old horizontal position of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_type">type</code></td>
<td>
<p>type of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_i">i</code></td>
<td>
<p>position of the flowchart within the list of flowcharts.</p>
</td></tr>
<tr><td><code id="update_y_stack_+3A_n">n</code></td>
<td>
<p>number of total flowcharts to merge</p>
</td></tr>
</table>

<hr>
<h2 id='update_y_stack_unite'>update_y_stack_unite</h2><span id='topic+update_y_stack_unite'></span>

<h3>Description</h3>

<p>Function to update the vertical position of the previuosly created flowcharts, to stack the two flowcharts with fc_stack(), when 'unite' is TRUE.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_y_stack_unite(y, x, type)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_y_stack_unite_+3A_y">y</code></td>
<td>
<p>old vertical position of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_unite_+3A_x">x</code></td>
<td>
<p>old horizontal position of the boxes</p>
</td></tr>
<tr><td><code id="update_y_stack_unite_+3A_type">type</code></td>
<td>
<p>type of the boxes</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
