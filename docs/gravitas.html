<!DOCTYPE html><html><head><title>Help for package gravitas</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gravitas}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#create_gran'><p>Build dynamic temporal granularities</p></a></li>
<li><a href='#cricket'><p>Cricket data set for different seasons of Indian Premier League</p></a></li>
<li><a href='#gran_advice'><p>Advice summaries for granularities</p></a></li>
<li><a href='#gran_obs'><p>Cross tabulation of granularities</p>
useful for validating if number of observations are sufficient to compute probability distributions</a></li>
<li><a href='#harmony'><p>Get possible set of harmonies for a given tsibble</p></a></li>
<li><a href='#is_harmony'><p>Check if two temporal granularities are harmonies</p></a></li>
<li><a href='#print.gran_advice'><p>Advice summaries for granularities</p></a></li>
<li><a href='#prob_plot'><p>Plotting probability distributions across granularities</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#run_app'><p>Runs a shiny app demonstrating functionalities of gravitas</p></a></li>
<li><a href='#search_gran'><p>Search for granularities</p></a></li>
<li><a href='#smart_meter10'><p>Smart meter data for ten households</p></a></li>
<li><a href='#validate_gran'><p>Validate created granularities with existing columns</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Explore Probability Distributions for Bivariate Temporal
Granularities</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>lubridate(&ge; 1.7.4), dplyr(&ge; 0.8.0), tsibble (&ge; 0.8.0),
tibble(&ge; 2.1.1), rlang(&ge; 0.3.4), tidyr(&ge; 0.8.3), ggplot2 (&ge;
3.1.1), stats, stringr(&ge; 1.4.0), lvplot, ggridges, shiny,
RColorBrewer, ineq, magrittr, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, tsibbledata (&ge; 0.1.0), purrr (&ge; 0.3.2), testthat (&ge;
2.1.0), covr, rmarkdown, readr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sayani Gupta &lt;gupta.sayani@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides tools for systematically exploring large quantities of 
             temporal data across cyclic temporal granularities
             (deconstructions of time) by visualizing probability distributions.
             Cyclic time granularities can be circular, quasi-circular or 
             aperiodic. 'gravitas' computes cyclic
             single-order-up or multiple-order-up granularities, check the
             feasibility of creating plots for any two cyclic granularities
             and recommend probability distributions plots for exploring
             periodicity in the data.</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Sayani07/gravitas/issues">https://github.com/Sayani07/gravitas/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Sayani07/gravitas/">https://github.com/Sayani07/gravitas/</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0.9000</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-06-25 06:19:10 UTC; sgup0008</td>
</tr>
<tr>
<td>Author:</td>
<td>Sayani Gupta <a href="https://orcid.org/0000-0003-0643-5358"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Rob Hyndman <a href="https://orcid.org/0000-0002-2140-5352"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    ths],
  Di Cook <a href="https://orcid.org/0000-0002-3813-7155"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    ths],
  Antony Unwin <a href="https://orcid.org/0000-0002-5841-5757"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-06-25 12:10:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='create_gran'>Build dynamic temporal granularities</h2><span id='topic+create_gran'></span>

<h3>Description</h3>

<p>Create time granularities that accommodate for periodicities in data, both single and multiple order up.
Periodic ones might include time granularities like minute of the day, hour
of the week  and aperiodic calendar categorizations may include day of the month or
week of the quarter. For non-temporal data, supports
only periodic deconstructions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_gran(
  .data,
  gran1 = NULL,
  hierarchy_tbl = NULL,
  label = TRUE,
  abbr = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_gran_+3A_.data">.data</code></td>
<td>
<p>A tsibble object.</p>
</td></tr>
<tr><td><code id="create_gran_+3A_gran1">gran1</code></td>
<td>
<p>the granularity to be created. For temporal data, any
combination of &quot;second&quot;, &quot;minute&quot;, &quot;qhour&quot;, &quot;hhour&quot;, &quot;hour&quot;, &quot;day&quot;, &quot;week&quot;, &quot;fortnight
,&quot;month&quot;, &quot;quarter&quot;, &quot;semester&quot; or &quot;year&quot; can be chosen in the form of finer
to coarser unit. For example, for the granularity hour of the week, value is
&quot;hour_week&quot;.</p>
</td></tr>
<tr><td><code id="create_gran_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table specifying the hierarchy of units
and their relationships.</p>
</td></tr>
<tr><td><code id="create_gran_+3A_label">label</code></td>
<td>
<p>Logical. TRUE will display the month as an ordered factor of
character string such as &quot;January&quot;, &quot;February&quot;. FALSE will display the month
as an ordered factor such as 1 to 12, where 1 stands for January and 12 for
December.</p>
</td></tr>
<tr><td><code id="create_gran_+3A_abbr">abbr</code></td>
<td>
<p>logical. FALSE will display abbreviated labels.</p>
</td></tr>
<tr><td><code id="create_gran_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to individual methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tsibble with an additional column of granularity.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(ggplot2)
library(lvplot)
# Search for granularities
smart_meter10 %&gt;%
  search_gran(highest_unit = "week")

# Screen harmonies from the search list
## Not run: 
smart_meter10 %&gt;%
  harmony(
    ugran = "day",
    filter_in = "wknd_wday"
  )

## End(Not run)
# visualize probability distribution of
# the harmony pair (wknd_wday, hour_day)
smart_meter10 %&gt;%
dplyr::filter(customer_id == "10017936") %&gt;%
  prob_plot(
    gran1 = "wknd_wday",
    gran2 = "hour_day",
    response = "general_supply_kwh",
    plot_type = "quantile",
    quantile_prob = c(0.1, 0.25, 0.5, 0.75, 0.9)
  ) +
  scale_y_sqrt()

#' # Compute granularities for non-temporal data

library(tsibble)
cricket_tsibble &lt;- cricket %&gt;%
mutate(data_index = row_number()) %&gt;%
as_tsibble(index = data_index)

hierarchy_model &lt;- tibble::tibble(
  units = c("index", "over", "inning", "match"),
  convert_fct = c(1, 20, 2, 1)
)
cricket_tsibble %&gt;%
  create_gran(
    "over_inning",
    hierarchy_model
  )

  cricket_tsibble %&gt;%
  filter(batting_team %in% c("Mumbai Indians",
                             "Chennai Super Kings"))%&gt;%
  prob_plot("inning", "over",
  hierarchy_model,
  response = "runs_per_over",
  plot_type = "lv")

# Validate if given column in the data set
# equals computed granularity
validate_gran(cricket_tsibble,
  gran = "over_inning",
  hierarchy_tbl = hierarchy_model,
  validate_col = "over"
)
</code></pre>

<hr>
<h2 id='cricket'>Cricket data set for different seasons of Indian Premier League</h2><span id='topic+cricket'></span>

<h3>Description</h3>

<p>The Indian Premier League played by teams representing
different cities in India from 2008 to 2016.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cricket
</code></pre>


<h3>Format</h3>

<p>A tibble with 8560 rows and 11 variables.
</p>

<dl>
<dt>season</dt><dd><p>years representing IPL season</p>
</dd>
<dt>match_id</dt><dd><p>match codes</p>
</dd>
<dt>batting_team</dt><dd><p>name of batting team</p>
</dd>
<dt>bowling_team</dt><dd><p>name of bowling team</p>
</dd>
<dt>inning</dt><dd><p>innings of the match</p>
</dd>
<dt>over</dt><dd><p>overs of the inning</p>
</dd>
<dt>wicket</dt><dd><p>number of wickets in each over</p>
</dd>
<dt>dot_balls</dt><dd><p>number of balls with no runs in an over</p>
</dd>
<dt>runs_per_over</dt><dd><p>Runs for each over</p>
</dd>
<dt>run_rate</dt><dd><p>run rate for each over</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.kaggle.com/josephgpinto/ipl-data-analysis/data">https://www.kaggle.com/josephgpinto/ipl-data-analysis/data</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(cricket)

library(tsibble)
library(dplyr)
library(ggplot2)

# convert data set to a tsibble ----
cricket_tsibble &lt;- cricket %&gt;%
  mutate(data_index = row_number()) %&gt;%
  as_tsibble(index = data_index)
# set the hierarchy of the units in a table ----
hierarchy_model &lt;- tibble::tibble(
  units = c("index", "over", "inning", "match"),
  convert_fct = c(1, 20, 2, 1)
)
# Compute granularities ----
cricket_tsibble %&gt;%
  create_gran("over_inning",
               hierarchy_model)
# Visualise distribution of runs across granularities ----
cricket_tsibble %&gt;%
  filter(batting_team %in% c("Mumbai Indians",
                             "Chennai Super Kings"))%&gt;%
  prob_plot("inning", "over",
  hierarchy_model,
  response = "runs_per_over",
  plot_type = "lv")
</code></pre>

<hr>
<h2 id='gran_advice'>Advice summaries for granularities</h2><span id='topic+gran_advice'></span>

<h3>Description</h3>

<p>Recommendations on plot choices, interaction, number of observations and intra or inter facet homogeneity. Important summaries before drawing distribution plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gran_advice(.data, gran1, gran2, hierarchy_tbl = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gran_advice_+3A_.data">.data</code></td>
<td>
<p>a tsibble.</p>
</td></tr>
<tr><td><code id="gran_advice_+3A_gran1">gran1</code>, <code id="gran_advice_+3A_gran2">gran2</code></td>
<td>
<p>granularities.</p>
</td></tr>
<tr><td><code id="gran_advice_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table specifying the hierarchy of units and their relationships.</p>
</td></tr>
<tr><td><code id="gran_advice_+3A_...">...</code></td>
<td>
<p>other arguments to be passed for appropriate labels.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary check points before visualizing distribution across bivariate granularities
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(ggplot2)

smart_meter10 %&gt;%
filter(customer_id == "10017936") %&gt;%
  gran_advice(gran1 = "wknd_wday",
            gran2 = "hour_day")

# choosing quantile plots from plot choices
smart_meter10 %&gt;%
filter(customer_id == "10017936") %&gt;%
  prob_plot(
    gran1 = "wknd_wday",
    gran2 = "hour_day",
    response = "general_supply_kwh",
    plot_type = "quantile",
    quantile_prob = c(0.1, 0.25, 0.5, 0.75, 0.9)
  ) +
  scale_y_sqrt()

</code></pre>

<hr>
<h2 id='gran_obs'>Cross tabulation of granularities
useful for validating if number of observations are sufficient to compute probability distributions</h2><span id='topic+gran_obs'></span>

<h3>Description</h3>

<p>Cross tabulation of granularities
useful for validating if number of observations are sufficient to compute probability distributions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gran_obs(.data, gran1, gran2, hierarchy_tbl = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gran_obs_+3A_.data">.data</code></td>
<td>
<p>A tsibble object.</p>
</td></tr>
<tr><td><code id="gran_obs_+3A_gran1">gran1</code></td>
<td>
<p>One of the temporal granularities to check for harmonies.</p>
</td></tr>
<tr><td><code id="gran_obs_+3A_gran2">gran2</code></td>
<td>
<p>The second temporal granularity in the pair.</p>
</td></tr>
<tr><td><code id="gran_obs_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table specifying the hierarchy of units and their relationships for non-temporal case.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with number of observations for each granularity.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tsibbledata)
vic_elec %&gt;% gran_obs("hour_day", "day_week")
</code></pre>

<hr>
<h2 id='harmony'>Get possible set of harmonies for a given tsibble</h2><span id='topic+harmony'></span>

<h3>Description</h3>

<p>Interaction of pair of granularities, categorised as harmony and clash. harmony () screens out harmony pairs from
list of all possible pairs of granularities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>harmony(
  .data,
  ugran = "year",
  lgran = NULL,
  hierarchy_tbl = NULL,
  filter_in = NULL,
  filter_out = NULL,
  facet_h = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="harmony_+3A_.data">.data</code></td>
<td>
<p>A tsibble object.</p>
</td></tr>
<tr><td><code id="harmony_+3A_ugran">ugran</code></td>
<td>
<p>Typically set as the most coarse unit required in the analysis.
Default is &quot;year&quot;.</p>
</td></tr>
<tr><td><code id="harmony_+3A_lgran">lgran</code></td>
<td>
<p>For &quot;regular&quot; tsibble, lgran is the interval of the tsibble.
It needs to be specified for &quot;irregular&quot; time intervals. Typically serves as the finest unit required for analysis.</p>
</td></tr>
<tr><td><code id="harmony_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table specifying the hierarchy of units and
their relationships.</p>
</td></tr>
<tr><td><code id="harmony_+3A_filter_in">filter_in</code></td>
<td>
<p>Choices of temporal units to be kept. Can be column names if #' required granularity already exists in the tsibble. For example, a column with public holidays which needs to be treated as granularity, can be included here for checking how it interacts with other granularities.</p>
</td></tr>
<tr><td><code id="harmony_+3A_filter_out">filter_out</code></td>
<td>
<p>Choices of temporal units to be discarded.</p>
</td></tr>
<tr><td><code id="harmony_+3A_facet_h">facet_h</code></td>
<td>
<p>highest level of facets allowed.</p>
</td></tr>
<tr><td><code id="harmony_+3A_...">...</code></td>
<td>
<p>added arguments to be passed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of harmonies and their levels.The levels can be used to
decide which granularities to be plotted across x-axis/facets for
exploratory aid.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tsibbledata)
vic_elec %&gt;% harmony(lgran = "hour", ugran = "week")
</code></pre>

<hr>
<h2 id='is_harmony'>Check if two temporal granularities are harmonies</h2><span id='topic+is_harmony'></span>

<h3>Description</h3>

<p>Interaction of pair of granularities, categorised as harmony and clash
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_harmony(
  .data,
  gran1,
  gran2,
  hierarchy_tbl = NULL,
  facet_h = NULL,
  x_h = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_harmony_+3A_.data">.data</code></td>
<td>
<p>A tsibble object.</p>
</td></tr>
<tr><td><code id="is_harmony_+3A_gran1">gran1</code></td>
<td>
<p>One of the temporal granularities to check for harmonies.</p>
</td></tr>
<tr><td><code id="is_harmony_+3A_gran2">gran2</code></td>
<td>
<p>The second temporal granularity in the pair.</p>
</td></tr>
<tr><td><code id="is_harmony_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table specifying the hierarchy of units and their relationships.</p>
</td></tr>
<tr><td><code id="is_harmony_+3A_facet_h">facet_h</code></td>
<td>
<p>highest level of facet variable that can be considered in harmony pair.</p>
</td></tr>
<tr><td><code id="is_harmony_+3A_x_h">x_h</code></td>
<td>
<p>highest level of x-axis variable that can be considered in harmony pair.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if two granularties are harmonies.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tsibbledata)
vic_elec %&gt;% is_harmony("hour_day", "day_week")
</code></pre>

<hr>
<h2 id='print.gran_advice'>Advice summaries for granularities</h2><span id='topic+print.gran_advice'></span>

<h3>Description</h3>

<p>Recommendations on plot choices, interaction, number of observations and intra or inter facet homogeneity. Important summaries before drawing distribution plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'gran_advice'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.gran_advice_+3A_x">x</code></td>
<td>
<p>An object of class gran_advice</p>
</td></tr>
<tr><td><code id="print.gran_advice_+3A_...">...</code></td>
<td>
<p>other arguments to be passed for appropriate labels.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Print check points before visualizing distribution across bivariate granularities
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(ggplot2)

smart_meter10 %&gt;%
filter(customer_id == "10017936") %&gt;%
  gran_advice(gran1 = "wknd_wday",
            gran2 = "hour_day")

</code></pre>

<hr>
<h2 id='prob_plot'>Plotting probability distributions across granularities</h2><span id='topic+prob_plot'></span>

<h3>Description</h3>

<p>Plot probability distribution of univariate series across bivariate temporal granularities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prob_plot(
  .data,
  gran1 = NULL,
  gran2 = NULL,
  hierarchy_tbl = NULL,
  response = NULL,
  plot_type = NULL,
  quantile_prob = c(0.01, 0.1, 0.25, 0.5, 0.75, 0.9, 0.99),
  facet_h = NULL,
  symmetric = TRUE,
  alpha = 0.8,
  threshold_nobs = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prob_plot_+3A_.data">.data</code></td>
<td>
<p>a tsibble</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_gran1">gran1</code></td>
<td>
<p>the granularity which is to be placed across facets. Can be column names if required granularity already exists in the tsibble. For example, a column with public holidays which needs to be treated as granularity, can be included here.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_gran2">gran2</code></td>
<td>
<p>the granularity to be placed across x-axis. Can be column names if required granularity already exists in the tsibble.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table specifying the hierarchy of units and their relationships.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_response">response</code></td>
<td>
<p>response variable to be plotted.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_plot_type">plot_type</code></td>
<td>
<p>type of distribution plot. Options include &quot;boxplot&quot;, &quot;lv&quot; (letter-value), &quot;quantile&quot;, &quot;ridge&quot; or &quot;violin&quot;.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_quantile_prob">quantile_prob</code></td>
<td>
<p>numeric vector of probabilities with value in [0,1]  whose sample quantiles are wanted. Default is set to &quot;decile&quot; plot.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_facet_h">facet_h</code></td>
<td>
<p>levels of facet variable for which facetting is allowed while plotting bivariate temporal granularities.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_symmetric">symmetric</code></td>
<td>
<p>If TRUE, symmetic quantile area &lt;- is drawn. If FALSE, only quantile lines are drawn instead of area. If TRUE, length of quantile_prob should be odd and ideally the quantile_prob should be a symmetric vector with median at the middle position.</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_alpha">alpha</code></td>
<td>
<p>level of transperancy for the quantile area</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_threshold_nobs">threshold_nobs</code></td>
<td>
<p>the minimum number of observations below which only points would be plotted</p>
</td></tr>
<tr><td><code id="prob_plot_+3A_...">...</code></td>
<td>
<p>other arguments to be passed for customising the obtained ggplot object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object which can be customised as usual.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tsibbledata)
library(ggplot2)
library(tsibble)
library(lvplot)
library(dplyr)

smart_meter10 %&gt;%
filter(customer_id %in% c("10017936")) %&gt;%
prob_plot(
  gran1 = "day_week", gran2 = "hour_day",
  response = "general_supply_kwh", plot_type = "quantile",
  quantile_prob = c(0.1, 0.25, 0.5, 0.75, 0.9),
  symmetric = TRUE,
   outlier.colour = "red",
  outlier.shape = 2, palette = "Dark2"
)

cricket_tsibble &lt;- cricket %&gt;%
  mutate(data_index = row_number()) %&gt;%
  as_tsibble(index = data_index)

hierarchy_model &lt;- tibble::tibble(
  units = c("index", "over", "inning", "match"),
  convert_fct = c(1, 20, 2, 1)
)

cricket_tsibble %&gt;%
  prob_plot("inning", "over",
    hierarchy_tbl = hierarchy_model,
    response = "runs_per_over",
    plot_type = "lv"
  )
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='run_app'>Runs a shiny app demonstrating functionalities of gravitas</h2><span id='topic+run_app'></span>

<h3>Description</h3>

<p>Runs a local shiny app that demonstrates how distributions of univariate time series can be explored across bivariate time granularities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_app()
</code></pre>


<h3>Value</h3>

<p>opens a local shiny app
</p>


<h3>Author(s)</h3>

<p>Sayani Gupta
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
run_app()

## End(Not run)
</code></pre>

<hr>
<h2 id='search_gran'>Search for granularities</h2><span id='topic+search_gran'></span>

<h3>Description</h3>

<p>Get set of possible granularities that can be considered exhaustively depending on the frequency of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>search_gran(
  .data,
  lowest_unit = NULL,
  highest_unit = NULL,
  hierarchy_tbl = NULL,
  filter_in = NULL,
  filter_out = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="search_gran_+3A_.data">.data</code></td>
<td>
<p>A tsibble object.</p>
</td></tr>
<tr><td><code id="search_gran_+3A_lowest_unit">lowest_unit</code></td>
<td>
<p>Typically set as the finest unit required for analysis. For &quot;regular&quot; tsibble, lgran is the interval of the tsibble. It needs to be specified for &quot;irregular&quot; time intervals.For non-temporal data, default is the first unit specified in the hierarchy table.</p>
</td></tr>
<tr><td><code id="search_gran_+3A_highest_unit">highest_unit</code></td>
<td>
<p>Typically set as the most coarse unit required for analysis.For temporal data, default is &quot;year&quot; and for non-temporal data, default is set as the last unit specified in the hierarchy table.</p>
</td></tr>
<tr><td><code id="search_gran_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table specifying the hierarchy of units and their relationships.</p>
</td></tr>
<tr><td><code id="search_gran_+3A_filter_in">filter_in</code></td>
<td>
<p>Choices of temporal units to be kept.</p>
</td></tr>
<tr><td><code id="search_gran_+3A_filter_out">filter_out</code></td>
<td>
<p>Choices of temporal units to be discarded.</p>
</td></tr>
<tr><td><code id="search_gran_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Set of possible granularities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tsibbledata)
vic_elec %&gt;% search_gran(lowest_unit = "hour", highest_unit = "month")
</code></pre>

<hr>
<h2 id='smart_meter10'>Smart meter data for ten households</h2><span id='topic+smart_meter10'></span>

<h3>Description</h3>

<p>Customer Trial data conducted as part of
Smart Grid Smart City (SGSC) project
(2010-2014) based in Newcastle,
New South Wales
and areas in Sydney.
It contains half hourly interval meter readings (KWh)
of electricity consumption of households.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smart_meter10
</code></pre>


<h3>Format</h3>

<p>A tsibble with 259, 235 rows and 3 columns.
</p>

<dl>
<dt>customer_id</dt><dd><p>household ID</p>
</dd>
<dt>reading_datetime</dt><dd><p>Date time for which data is recorded (index)</p>
</dd>
<dt>general_supply_kwh</dt><dd><p>electricity supplied to this household</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://data.gov.au/dataset/ds-dga-4e21dea3-9b87-4610-94c7-15a8a77907ef/details?q=smart-meter">https://data.gov.au/dataset/ds-dga-4e21dea3-9b87-4610-94c7-15a8a77907ef/details?q=smart-meter</a>
</p>

<hr>
<h2 id='validate_gran'>Validate created granularities with existing columns</h2><span id='topic+validate_gran'></span>

<h3>Description</h3>

<p>Validate created granularities with existing columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_gran(
  .data,
  gran = NULL,
  hierarchy_tbl = NULL,
  validate_col = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_gran_+3A_.data">.data</code></td>
<td>
<p>A tsibble object.</p>
</td></tr>
<tr><td><code id="validate_gran_+3A_gran">gran</code></td>
<td>
<p>the granularity to be created for validation.</p>
</td></tr>
<tr><td><code id="validate_gran_+3A_hierarchy_tbl">hierarchy_tbl</code></td>
<td>
<p>A hierarchy table.</p>
</td></tr>
<tr><td><code id="validate_gran_+3A_validate_col">validate_col</code></td>
<td>
<p>A column in the data which acts as validator.</p>
</td></tr>
<tr><td><code id="validate_gran_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to individual methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tsibble with an additional column of granularity.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(tsibble)
cricket_tsibble &lt;- cricket %&gt;%
  mutate(data_index = row_number()) %&gt;%
  as_tsibble(index = data_index)

hierarchy_model &lt;- tibble::tibble(
  units = c("index", "ball", "over", "inning", "match"),
  convert_fct = c(1, 6, 20, 2, 1)
)
cricket_tsibble %&gt;% validate_gran(
  gran = "over_inning",
  hierarchy_tbl = hierarchy_model,
  validate_col = "over"
)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
