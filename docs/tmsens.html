<!DOCTYPE html><html><head><title>Help for package tmsens</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tmsens}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#summary.tm'><p>Summarizing Trimmed Means Linear Model fits:</p></a></li>
<li><a href='#tm'><p>Fitting Trimmed Mean Linear Models:</p></a></li>
<li><a href='#tm_bias'><p>Calculating Bias For Trimmed Mean Linear Models:</p></a></li>
<li><a href='#tmsens-package'><p>tmsens: Sensitivity Analysis Using the Trimmed Mean Estimator</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Sensitivity Analysis Using the Trimmed Means Estimator</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Sensitivity analysis using the trimmed means estimator.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dea-hazewinkel/tmsens">https://github.com/dea-hazewinkel/tmsens</a>,
<a href="https://dea-hazewinkel.github.io/tmsens/">https://dea-hazewinkel.github.io/tmsens/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dea-hazewinkel/tmsens/issues">https://github.com/dea-hazewinkel/tmsens/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-10 17:53:19 UTC; tom</td>
</tr>
<tr>
<td>Author:</td>
<td>Audinga-Dea Hazewinkel
    <a href="https://orcid.org/0000-0002-6923-4388"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Tom Palmer <a href="https://orcid.org/0000-0003-4655-4511"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Kate Tilling <a href="https://orcid.org/0000-0002-1010-8926"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Kaitlin Wade <a href="https://orcid.org/0000-0003-3362-6280"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jack Bowden <a href="https://orcid.org/0000-0003-2628-3304"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Audinga-Dea Hazewinkel &lt;dea.hazew@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-10 22:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='summary.tm'>Summarizing Trimmed Means Linear Model fits:</h2><span id='topic+summary.tm'></span>

<h3>Description</h3>

<p><code>summary</code> method for class &quot;<code>tm</code>&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tm'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.tm_+3A_object">object</code></td>
<td>
<p>an object of class &quot;<code>tm</code>&quot;</p>
</td></tr>
<tr><td><code id="summary.tm_+3A_...">...</code></td>
<td>
<p>user specified arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>summary.tm</code> returns an list of summary statistics of the fitted trimmed means linear
model in <code>object</code>, with components
</p>
<table>
<tr><td><code>call</code></td>
<td>
<p>the matched call</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>the number of observations per treatment group</p>
</td></tr>
<tr><td><code>dropout</code></td>
<td>
<p>the proportion of dropout per treatment group</p>
</td></tr>
<tr><td><code>trimfrac</code></td>
<td>
<p>the proportion of data that was trimmed away per treatment group</p>
</td></tr>
<tr><td><code>trimside</code></td>
<td>
<p>specifies if lower or higher value trimming was performed</p>
</td></tr>
<tr><td><code>n_after_trimming</code></td>
<td>
<p>the number of observations per treatment group after trimming</p>
</td></tr>
<tr><td><code>coefficients</code></td>
<td>
<p>an array of coefficients with corresponding p-values and 95% confidence intervals</p>
</td></tr>
<tr><td><code>Analysis_details</code></td>
<td>
<p>reiterates trimming fraction and side, and, for <code>adjest=TRUE</code> specifies if the adjustment was performed on the comparator or treatment group.</p>
</td></tr>
<tr><td><code>SD_outcome</code></td>
<td>
<p>an array of the standard deviation per treatment group, for the observed outcomes and for the trimmed outcomes</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+tm">tm</a></code>. The function <code><a href="stats.html#topic+coef">coef</a></code>
extracts the array of regression coefficients with corresponding p-values and 95% confidence intervals.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123456)
test_dat &lt;- as.data.frame(cbind(c(rep(0,500),rep(1,500)),
                          c(sort(rnorm(500,0,1)),sort(rnorm(500,1,1.5))),
                          rbinom(1000,2,0.4), rnorm(1000,0,1)))
colnames(test_dat) &lt;- c("TR", "Y", "U", "U2")
test_dat$Y[1:200] &lt;- NA
tm_obj &lt;- tm(formula= Y ~ TR + U + U2, GR = "TR", trF = 0.5,
             side = "LOW", n_perm = 1000, adj_est = TRUE, data = test_dat)
summary(tm_obj)
coef(tm_obj)
</code></pre>

<hr>
<h2 id='tm'>Fitting Trimmed Mean Linear Models:</h2><span id='topic+tm'></span>

<h3>Description</h3>

<p><code>tm</code> performs a trimmed means analysis for data with a continuous outcome/response and a binary
treatment/exposure variable. Outcomes are sorted and trimmed per treatment group, and a linear
regression is fitted using <code><a href="stats.html#topic+lm">lm</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tm(
  formula,
  GR,
  trF = NULL,
  side = c("LOW", "HIGH"),
  n_perm = 1000,
  adj_est = FALSE,
  data
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tm_+3A_formula">formula</code></td>
<td>
<p>an object of class <code><a href="stats.html#topic+formula">formula</a></code>, specifying the model, of the form
<code>outcome ~ terms</code>, where <code>terms</code> must include the binary treatment variable, with additional
variables optional.</p>
</td></tr>
<tr><td><code id="tm_+3A_gr">GR</code></td>
<td>
<p>a string denoting the name of the binary treatment variable. This function assumes the
lowest value to be the comparator/reference group</p>
</td></tr>
<tr><td><code id="tm_+3A_trf">trF</code></td>
<td>
<p>a number between 0 and 1, specifying the trimming fraction: the proportion of the data that is trimmed away
for each treatment group. <code>trF</code> should be equal to or greater than the largest observed
dropout proportion. If left unspecified, a default trimming fraction of 0.5 is assumed.</p>
</td></tr>
<tr><td><code id="tm_+3A_side">side</code></td>
<td>
<p>specifies if higher value trimming (<code>"HIGH"</code>) or lower value trimming (<code>"LOW"</code>) should be performed.</p>
</td></tr>
<tr><td><code id="tm_+3A_n_perm">n_perm</code></td>
<td>
<p>the number of permutations performed to obtain the p-value and 95% confidence intervals
for the estimates. Default is 1000.</p>
</td></tr>
<tr><td><code id="tm_+3A_adj_est">adj_est</code></td>
<td>
<p>logical. If <code>TRUE</code> the adjusted trimmed means estimate is computed. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tm_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model. <code>data</code> should contain at least the following:
a numeric outcome variable and a binary treatment variable (numeric, character or factor).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>tm</code> returns an object of class <code>tm</code>.
The function <code>summary</code> is used to obtain a summary of the results. The generic accessor function
<code>coefficients</code> extracts the regression coefficients with corresponding p-values and 95% confidence intervals.
</p>
<p>An object of class &quot;<code>tm</code>&quot; is a list containing the following components:
</p>
<table>
<tr><td><code>call</code></td>
<td>
<p>the matched call</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>the number of observations per treatment group</p>
</td></tr>
<tr><td><code>dropout</code></td>
<td>
<p>the proportion of dropout per treatment group</p>
</td></tr>
<tr><td><code>trimfrac</code></td>
<td>
<p>the proportion of data that was trimmed away per treatment group</p>
</td></tr>
<tr><td><code>trimside</code></td>
<td>
<p>specifies if lower or higher value trimming was performed</p>
</td></tr>
<tr><td><code>n_after_trimming</code></td>
<td>
<p>the number of observations per treatment group after trimming</p>
</td></tr>
<tr><td><code>coefficients</code></td>
<td>
<p>an array of coefficients with corresponding p-values and 95% confidence intervals</p>
</td></tr>
<tr><td><code>Analysis_details</code></td>
<td>
<p>reiterates trimming fraction and side, and, for adjest=TRUE specifies if the adjustment was performed on the comparator or treatment group.</p>
</td></tr>
<tr><td><code>SD_outcome</code></td>
<td>
<p>an array of the standard deviation per treatment group, for the observed outcomes and for the trimmed outcomes</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The trimmed means estimate is subject to two assumptions: the strong MNAR assumption requires
that all dropouts (unobserved outcome values) are located in the fraction of the distribution
that is trimmed away; the location shift assumption requires the group variances of the full sample
to be equal. The adjusted trimmed means estimator relaxes the latter, but assumes normally
distributed outcomes. The adjustment is performed on the group with the smallest dropout proportion.
</p>
<p>The p-value and 95% confidence intervals for the trimmed means estimate and the adjusted trimmed means
estimate are obtained in a permutation approach.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123456)
test_dat &lt;- as.data.frame(cbind(c(rep(0, 500), rep(1, 500)),
                          c(sort(rnorm(500, 0, 1)), sort(rnorm(500, 1, 1.5))),
                          rbinom(1000, 2, 0.4), rnorm(1000, 0, 1)))
colnames(test_dat) &lt;- c("TR", "Y", "U", "U2")
test_dat$Y[1:200] &lt;- NA
# Note that we usually recommend setting n_perm to a larger value, e.g., 1000
tm_obj &lt;- tm(formula= Y ~ TR + U + U2,
             GR = "TR", trF = 0.5, side = "LOW",
             n_perm = 100, adj_est = TRUE, data = test_dat)
print(tm_obj)
summary(tm_obj)
</code></pre>

<hr>
<h2 id='tm_bias'>Calculating Bias For Trimmed Mean Linear Models:</h2><span id='topic+tm_bias'></span>

<h3>Description</h3>

<p><code>tm_bias</code> calculates the bias and the bias-adjusted estimate for a trimmed means analysis (<code><a href="#topic+tm">tm</a></code>) of a given
dataset, for a user-specified trimming fraction and dropout spread. <code>tm_bias</code> calculates, under assumption
of normally distributed outcomes, the bias components resulting from violation of the
location shift assumption and violation of the strong MNAR assumption.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tm_bias(
  formula,
  GR,
  trF,
  side = c("LOW", "HIGH"),
  spread_TG = "max_bias",
  spread_CG = "max_bias",
  data
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tm_bias_+3A_formula">formula</code></td>
<td>
<p>an object of class <code><a href="stats.html#topic+formula">formula</a></code>, specifying the model, of the form
<code>outcome ~ terms</code>, where <code>terms</code> must include the binary treatment variable, with additional
variables optional.</p>
</td></tr>
<tr><td><code id="tm_bias_+3A_gr">GR</code></td>
<td>
<p>a string denoting the name of the binary treatment variable. This function assumes the
lowest value to be the comparator/reference group</p>
</td></tr>
<tr><td><code id="tm_bias_+3A_trf">trF</code></td>
<td>
<p>a number between 0 and 1, specifying the trimming fraction: the proportion of the data that is trimmed away
for each treatment group. <code>trF</code> should be equal to or greater than the largest observed
dropout proportion. If left unspecified, a default trimming fraction of 0.5 is assumed.</p>
</td></tr>
<tr><td><code id="tm_bias_+3A_side">side</code></td>
<td>
<p>specifies if higher value trimming (<code>"HIGH"</code>) or lower value trimming (<code>"LOW"</code>) should be performed.</p>
</td></tr>
<tr><td><code id="tm_bias_+3A_spread_tg">spread_TG</code></td>
<td>
<p>a number between 0 and 1, specifying the dropout spread for the treatment group.
<code>spread_TG</code> should be equal to or greater than the observed dropout proportion. If left unspecified,
the worst-case scenario is assumed, in which dropout is located on the side of the distribution opposite from the one
that is being trimmed (<code>spread_TG="max_bias"</code>).</p>
</td></tr>
<tr><td><code id="tm_bias_+3A_spread_cg">spread_CG</code></td>
<td>
<p>a number between 0 and 1, specifying the dropout spread for the comparator group.
<code>spread_CG</code> should be equal to or greater than the observed dropout proportion. If left unspecified,
the worst-case scenario is assumed, in which dropout is located on the side of the distribution opposite from the one
that is being trimmed (<code>spread_CG="max_bias"</code>).</p>
</td></tr>
<tr><td><code id="tm_bias_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model. <code>data</code> should contain at least the following:
a numeric outcome variable and a binary treatment variable (numeric, character or factor).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>tm_bias</code> returns an object of class <code>tm_bias</code>.
</p>
<p>An object of class &quot;<code>tm_bias</code>&quot; is a list containing the following components:
</p>
<table>
<tr><td><code>call</code></td>
<td>
<p>the matched call</p>
</td></tr>
<tr><td><code>bias_components</code></td>
<td>
<p>an array of bias components, including location shift assumption bias (LS),
Strong MNAR bias in the treatment group (TG) and the comparator group (CG)</p>
</td></tr>
<tr><td><code>total_bias</code></td>
<td>
<p>the sum of all bias components</p>
</td></tr>
<tr><td><code>TM_estimate</code></td>
<td>
<p>the trimmed means estimate of the treatment effect</p>
</td></tr>
<tr><td><code>bias_adj_TM_estimate</code></td>
<td>
<p>the bias adjusted trimmed means estimate </p>
</td></tr>
<tr><td><code>analysis_details</code></td>
<td>
<p>the user-specified trimming fraction, trimming side, and dropout spread in the
treatment (TG) and comparator groups (CG)</p>
</td></tr>
<tr><td><code>observed_TG_SD</code></td>
<td>
<p>observed standard deviation of the treatment group (TG) outcome</p>
</td></tr>
<tr><td><code>observed_CG_SD</code></td>
<td>
<p>observed standard deviation of the comparator group (CG) outcome</p>
</td></tr>
<tr><td><code>inferred_TG_SD</code></td>
<td>
<p>inferred full sample standard deviation of the treatment group (TG) outcome</p>
</td></tr>
<tr><td><code>max_bias_CG</code></td>
<td>
<p>an array of bias components, total bias, the bias adjusted estimate, and inferred full sample
group standard deviations, calculated under the assumption of worst-case scenario dropout, with dropout in the comparator group (CG) on the opposite
side of the distribution from the one that is being trimmed</p>
</td></tr>
<tr><td><code>max_bias_TG</code></td>
<td>
<p>an array of bias components, total bias, the bias adjusted estimate, and inferred full sample
group standard deviations, calculated under the assumption of worst-case scenario dropout, with dropout in the treatment group (TG) on the opposite
side of the distribution from the one that is being trimmed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The trimmed means estimate is subject to two assumptions: the strong MNAR assumption requires
that all dropouts (unobserved outcome values) are located in the fraction of the distribution
that is trimmed away; the location shift assumption requires the group variances of the full sample
to be equal. The bias resulting from the violation of either assumption can be calculated under assumption
of normally distributed outcomes.
</p>
<p>Obtaining the strong MNAR assumption bias requires an additional assumption about
the distribution of the dropouts: it is assumed that the dropouts are spread homogeneously across the specified
dropout spread. For example, under lower value trimming (<code>side="LOW"</code>), and a treatment group dropout
spread of 0.6 (<code>spread_TG=0.6</code>), any value in the bottom 60% of the treatment group outcome distribution
is equally likely to be missing.
</p>
<p>The specified dropout spread for a given treatment group has implications for the unobserved full sample
variance that is inferred from the observed data. For example, for an observed dropout of 0.4 and an
assumed dropout spread of 0.5, the inferred full sample variance will be larger than for an assumed
dropout spread of e.g., 0.8.
</p>
<p>In addition to calculating the bias for a user-specified dropout spread, <code>tm_bias</code> also calculates
the maximal bias. For example, for lower value trimming (<code>side="LOW"</code>), the worst-case scenario would
involve lower value dropout in the treatment group (TG) and higher value dropout in the comparator group (CG),
and vice versa. Bias components are calculated for both scenarios. If the dropout spread
(<code>spread_TG</code>, <code>spread_CG</code>) is left unspecified for either treatment group, the function will
return only these quantities.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test_dat &lt;- as.data.frame(cbind(c(rep(0, 500), rep(1, 500)),
  c(sort(rnorm(500, 0, 1)), sort(rnorm(500, 1, 1.5)))))
colnames(test_dat) &lt;- c("TR", "Y")
test_dat$Y[which(test_dat$TR == 0)[1:150]] &lt;- NA
test_dat$Y[which(test_dat$TR == 1)[sample(seq(1, 400), 200, replace = FALSE)]] &lt;- NA
tm_bias_obj &lt;- tm_bias(formula = Y ~ TR, "TR", trF = 0.5,
                       side = "LOW", spread_TG = 0.4,
                       spread_CG = 0.6, data = test_dat)
print(tm_bias_obj)
</code></pre>

<hr>
<h2 id='tmsens-package'>tmsens: Sensitivity Analysis Using the Trimmed Mean Estimator</h2><span id='topic+tmsens-package'></span><span id='topic+tmsens'></span>

<h3>Description</h3>

<p>This package implements sensitivity analysis using the trimmed mean estimator.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
