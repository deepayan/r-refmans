<!DOCTYPE html><html lang="en"><head><title>Help for package lab2clean</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {lab2clean}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#clean_lab_result'><p>Clean and Standardize Laboratory Result Values</p></a></li>
<li><a href='#common_words'><p>Data for the common words</p></a></li>
<li><a href='#Function_1_dummy'><p>Dummy Data for demonstrating function 1</p></a></li>
<li><a href='#Function_2_dummy'><p>Dummy Data for demonstrating function 2</p></a></li>
<li><a href='#logic_rules'><p>Data for the logic rules</p></a></li>
<li><a href='#reportable_interval'><p>Data for the reportable interval</p></a></li>
<li><a href='#validate_lab_result'><p>Validate Quantitative Laboratory Result Values</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Automation and Standardization of Cleaning Clinical Lab Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Navigating the shift of clinical laboratory data from primary everyday clinical use to secondary research purposes presents a significant challenge. Given the substantial time and expertise required for lab data pre-processing and cleaning and the lack of all-in-one tools tailored for this need, we developed our algorithm 'lab2clean' as an open-source R-package. 'lab2clean' package is set to automate and standardize the intricate process of cleaning clinical laboratory results. With a keen focus on improving the data quality of laboratory result values, our goal is to equip researchers with a straightforward, plug-and-play tool, making it smoother for them to unlock the true potential of clinical laboratory data in clinical research and clinical machine learning (ML) model development. Version 1.0 of the algorithm is described in detail in 'Zayed et al. (2024)' &lt;<a href="https://doi.org/10.1186%2Fs12911-024-02652-7">doi:10.1186/s12911-024-02652-7</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, printr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-04 05:57:23 UTC; u0148644</td>
</tr>
<tr>
<td>Author:</td>
<td>Ahmed Zayed <a href="https://orcid.org/0000-0001-7797-1655"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Arne Janssens [aut, ctb],
  Pavlos Mamouris [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ahmed Zayed &lt;ahmed.zayed@kuleuven.be&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-09 09:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='clean_lab_result'>Clean and Standardize Laboratory Result Values</h2><span id='topic+clean_lab_result'></span>

<h3>Description</h3>

<p>This function is designed to clean and standardize laboratory result values.
It creates two new columns &quot;clean_result&quot; and &quot;scale_type&quot; without altering
the original result values. The function is part of a comprehensive R package
designed for cleaning laboratory datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_lab_result(
  lab_data,
  raw_result,
  locale = "NO",
  report = TRUE,
  n_records = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clean_lab_result_+3A_lab_data">lab_data</code></td>
<td>
<p>A data frame containing laboratory data.</p>
</td></tr>
<tr><td><code id="clean_lab_result_+3A_raw_result">raw_result</code></td>
<td>
<p>The column in <code>lab_data</code> that contains raw result values to be cleaned.</p>
</td></tr>
<tr><td><code id="clean_lab_result_+3A_locale">locale</code></td>
<td>
<p>A string representing the locale for the laboratory data. Defaults to &quot;NO&quot;.</p>
</td></tr>
<tr><td><code id="clean_lab_result_+3A_report">report</code></td>
<td>
<p>A report is written in the console. Defaults to &quot;TRUE&quot;.</p>
</td></tr>
<tr><td><code id="clean_lab_result_+3A_n_records">n_records</code></td>
<td>
<p>In case you are loading a grouped list of distinct results, then you can assign the n_records to the column that contains the frequency of each distinct result. Defaults to NA</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function undergoes the following methodology:
</p>

<ol>
<li><p> Clear Typos: Removes typographical errors and extraneous characters.
</p>
</li>
<li><p> Handle Extra Variables: Identifies and separates extra variables from result values.
</p>
</li>
<li><p> Detect and Assign Scale Types: Identifies and assigns the scale type using regular expressions.
</p>
</li>
<li><p> Number Formatting: Standardizes number formats based on predefined rules and locale.
</p>
</li>
<li><p> Mining Text Results: Identifies common words and patterns in text results.
</p>
</li></ol>

<p>Internal Datasets:
The function uses an internal dataset; <code>common_words_languages.csv</code> which contains common words
in various languages used for pattern identification in text result values.
</p>


<h3>Value</h3>

<p>A modified <code>lab_data</code> data frame with additional columns:
</p>

<ul>
<li> <p><code>clean_result</code>: Cleaned and standardized result values.
</p>
</li>
<li> <p><code>scale_type</code>: The scale type of result values (Quantitative, Ordinal, Nominal).
</p>
</li>
<li> <p><code>cleaning_comments</code>: Comments about the cleaning process for each record.
</p>
</li></ul>



<h3>Note</h3>

<p>This function is part of a larger data cleaning pipeline and should be evaluated in that context.
The package framework includes functions for cleaning result values and validating quantitative results for each test identifier.
</p>
<p>Performance of the function can be affected by the size of <code>lab_data</code>. Considerations for data size
or pre-processing may be needed.
</p>


<h3>Author(s)</h3>

<p>Ahmed Zayed <a href="mailto:ahmed.zayed@kuleuven.be">ahmed.zayed@kuleuven.be</a>
</p>


<h3>See Also</h3>

<p>Function 2 for result validation,
</p>

<hr>
<h2 id='common_words'>Data for the common words</h2><span id='topic+common_words'></span>

<h3>Description</h3>

<p>A dataset containing data for common words.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(common_words)
</code></pre>


<h3>Format</h3>

<p>A data frame with 19 rows and 9 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> Language: Contains 19 different languages.
</p>
</li>
<li><p> Positive: Displays the word &quot;Positive&quot; in 19 different languages.
</p>
</li>
<li><p> Negative: Displays the word &quot;Negative&quot; in 19 different languages.
</p>
</li>
<li><p> Not_detected: Displays the phrase &quot;Not detected&quot; in 19 different languages.
</p>
</li>
<li><p> High: Displays the word &quot;High&quot; in 19 different languages.
</p>
</li>
<li><p> Low: Displays the word &quot;Low&quot; in 19 different languages.
</p>
</li>
<li><p> Normal: Displays the word &quot;Normal&quot; in 19 different languages.
</p>
</li>
<li><p> Sample: Displays the word &quot;Sample&quot; in 19 different languages.
</p>
</li>
<li><p> Specimen: Displays the word &quot;Specimen&quot; in 19 different languages.
</p>
</li></ul>


<hr>
<h2 id='Function_1_dummy'>Dummy Data for demonstrating function 1</h2><span id='topic+Function_1_dummy'></span>

<h3>Description</h3>

<p>A dataset containing dummy data for demonstrating function 1 (&quot;clean_lab_result&quot;).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Function_1_dummy)
</code></pre>


<h3>Format</h3>

<p>A data frame with 87 rows and 2 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> raw_result: The raw result.
</p>
</li>
<li><p> frequency: The frequency of the raw result.
</p>
</li></ul>


<hr>
<h2 id='Function_2_dummy'>Dummy Data for demonstrating function 2</h2><span id='topic+Function_2_dummy'></span>

<h3>Description</h3>

<p>A dataset containing dummy data for demonstrating function 2 (&quot;validate_lab_result&quot;).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Function_2_dummy)
</code></pre>


<h3>Format</h3>

<p>A data frame with 86,863 rows and 5 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> patient_id: Indicates the identifier of the tested patient.
</p>
</li>
<li><p> lab_datetime1: Indicates the date or datetime of the laboratory test.
</p>
</li>
<li><p> loinc_code: Indicates the LOINC code of the laboratory test.
</p>
</li>
<li><p> result_value: Indicates the quantitative result values for validation.
</p>
</li>
<li><p> result_unit: Indicates the result units in a UCUM-valid format.
</p>
</li></ul>


<hr>
<h2 id='logic_rules'>Data for the logic rules</h2><span id='topic+logic_rules'></span>

<h3>Description</h3>

<p>A dataset containing data for the logic rules.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(logic_rules)
</code></pre>


<h3>Format</h3>

<p>A data frame with 18 rows and 4 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> rule_id: The rule ID.
</p>
</li>
<li><p> rule_index: The rule index.
</p>
</li>
<li><p> rule_part: The rule part.
</p>
</li>
<li><p> rule_part_type: The rule part type.
</p>
</li></ul>


<hr>
<h2 id='reportable_interval'>Data for the reportable interval</h2><span id='topic+reportable_interval'></span>

<h3>Description</h3>

<p>A dataset containing data for the reportable interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(reportable_interval)
</code></pre>


<h3>Format</h3>

<p>A data frame with 493 rows and 4 variables.
</p>


<h3>Details</h3>


<ul>
<li><p> interval_loinc_code: The interval of the LOINC code.
</p>
</li>
<li><p> UCUM_unit: The UCUM unit.
</p>
</li>
<li><p> low_reportable_limit: The lower reportable limit.
</p>
</li>
<li><p> high_reportable_limit: The higher reportable limit.
</p>
</li></ul>


<hr>
<h2 id='validate_lab_result'>Validate Quantitative Laboratory Result Values</h2><span id='topic+validate_lab_result'></span>

<h3>Description</h3>

<p>This function is designed to validate quantitative laboratory result values.
It modifies the provided <code>lab_data</code> dataframe in-place, adding one new column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_lab_result(
  lab_data,
  result_value,
  result_unit,
  loinc_code,
  patient_id,
  lab_datetime,
  report = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_lab_result_+3A_lab_data">lab_data</code></td>
<td>
<p>A data frame containing laboratory data.</p>
</td></tr>
<tr><td><code id="validate_lab_result_+3A_result_value">result_value</code></td>
<td>
<p>The column in <code>lab_data</code> with quantitative result values for validation.</p>
</td></tr>
<tr><td><code id="validate_lab_result_+3A_result_unit">result_unit</code></td>
<td>
<p>The column in <code>lab_data</code> with result units in a UCUM-valid format.</p>
</td></tr>
<tr><td><code id="validate_lab_result_+3A_loinc_code">loinc_code</code></td>
<td>
<p>The column in <code>lab_data</code> indicating the LOINC code of the laboratory test.</p>
</td></tr>
<tr><td><code id="validate_lab_result_+3A_patient_id">patient_id</code></td>
<td>
<p>The column in <code>lab_data</code> indicating the identifier of the tested patient.</p>
</td></tr>
<tr><td><code id="validate_lab_result_+3A_lab_datetime">lab_datetime</code></td>
<td>
<p>The column in <code>lab_data</code> with the date or datetime of the laboratory test.</p>
</td></tr>
<tr><td><code id="validate_lab_result_+3A_report">report</code></td>
<td>
<p>A report is written in the console. Defaults to &quot;TRUE&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function employs the following validation methodology:
</p>

<ol>
<li><p> Reportable limits check: Identifies implausible values outside reportable limits.
</p>
</li>
<li><p> Logic rules check: Identifies values that contradict some predefined logic rules.
</p>
</li>
<li><p> Delta limits check: Flags values with excessive change from prior results for the same test and patient.
</p>
</li></ol>

<p>Internal Datasets:
The function uses two internal datasets included with the package:
</p>

<ol>
<li> <p><code>reportable_interval</code>: Contains information on reportable intervals.
</p>
</li>
<li> <p><code>logic_rules</code>: Contains logic rules for validation.
</p>
</li></ol>



<h3>Value</h3>

<p>A modified <code>lab_data</code> data frame with additional columns:
</p>

<ul>
<li> <p><code>flag</code>: specifies the flag detected in the result records that violated one or more of the validation checks
</p>
</li></ul>



<h3>Note</h3>

<p>This function is a component of a broader laboratory data cleaning pipeline and should be evaluated accordingly.
The package's framework includes functions for cleaning result values, validating quantitative results,
standardizing unit formats, performing unit conversion, and assisting in LOINC code mapping.
</p>
<p>Concerning performance, the function's speed might be influenced by the size of <code>lab_data</code>. Consider:
</p>

<ul>
<li><p> Limiting the number of records processed.
</p>
</li>
<li><p> Optimize the function for larger datasets.
</p>
</li>
<li><p> Implement pre-processing steps to divide the dataset chronologically.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ahmed Zayed <a href="mailto:ahmed.zayed@kuleuvne.be">ahmed.zayed@kuleuvne.be</a>, Arne Janssens <a href="mailto:arne.janssens@kuleuven.be">arne.janssens@kuleuven.be</a>
</p>


<h3>See Also</h3>

<p>Function 1 for result value cleaning,
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
