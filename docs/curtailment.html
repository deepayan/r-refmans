<!DOCTYPE html><html><head><title>Help for package curtailment</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {curtailment}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#drawDiagram'><p>drawDiagram</p></a></li>
<li><a href='#drawDiagramGeneric'><p>drawDiagramGeneric</p></a></li>
<li><a href='#find2stageDesigns'><p>Find two-stage designs</p></a></li>
<li><a href='#find2stageThetaF'><p>Find conditional power for futility</p></a></li>
<li><a href='#findLoss'><p>Find loss scores for a set of single-arm designs</p></a></li>
<li><a href='#findNSCdesigns'><p>findNSCdesigns</p></a></li>
<li><a href='#findSCdesigns'><p>findSCDesigns</p></a></li>
<li><a href='#findSingleSimonDesign'><p>Find a single Simon design</p></a></li>
<li><a href='#plotByWeight'><p>plotByWeight</p></a></li>
<li><a href='#singlearmDesign'><p>Find single-arm trials using stochastic curtailment</p></a></li>
<li><a href='#twoarmDesign'><p>Find two-arm trial designs that use stochastic curtailment</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Finds Binary Outcome Designs Using Stochastic Curtailment</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.6</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Martin Law &lt;martin.law@mrc-bsu.cam.ac.uk&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Finds single- and two-arm designs using stochastic curtailment, as described by Law et al. (2022) &lt;<a href="https://doi.org/10.1080%2F10543406.2021.2009498">doi:10.1080/10543406.2021.2009498</a>&gt; and Law et al. (2021) &lt;<a href="https://doi.org/10.1002%2Fpst.2067">doi:10.1002/pst.2067</a>&gt; respectively. Designs can be single-stage or multi-stage. Non-stochastic curtailment is possible as a special case. Desired error-rates, maximum sample size and lower and upper anticipated response rates are inputted and suitable designs are returned with operating characteristics. Stopping boundaries and visualisations are also available. The package can find designs using other approaches, for example designs by Simon (1989) &lt;<a href="https://doi.org/10.1016%2F0197-2456%2889%2990015-9">doi:10.1016/0197-2456(89)90015-9</a>&gt; and Mander and Thompson (2010) &lt;<a href="https://doi.org/10.1016%2Fj.cct.2010.07.008">doi:10.1016/j.cct.2010.07.008</a>&gt;. Other features: compare and visualise designs using a weighted sum of expected sample sizes under the null and alternative hypotheses and maximum sample size; visualise any binary outcome design.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, gridExtra, ggthemes, data.table, pkgcond, stats</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/martinlaw/curtailment">https://github.com/martinlaw/curtailment</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/martinlaw/curtailment/issues">https://github.com/martinlaw/curtailment/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-25 15:15:56 UTC; martin</td>
</tr>
<tr>
<td>Author:</td>
<td>Martin Law <a href="https://orcid.org/0000-0001-9594-348X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-25 15:50:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='drawDiagram'>drawDiagram</h2><span id='topic+drawDiagram'></span>

<h3>Description</h3>

<p>This function produces both a data frame and a diagram of stopping boundaries.
The function takes a single argument: the output from the function singlearmDesign.
If the supplied argument contains more than one admissible designs, the user is offered a choice of which design to use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawDiagram(findDesign.output, print.row = NULL, xmax = NULL, ymax = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawDiagram_+3A_finddesign.output">findDesign.output</code></td>
<td>
<p>Output from either the function singlearmDesign or find2stageDesigns</p>
</td></tr>
<tr><td><code id="drawDiagram_+3A_print.row">print.row</code></td>
<td>
<p>Choose a row number to directly obtain a plot and stopping boundaries for a particular design realisation. Default is NULL.</p>
</td></tr>
<tr><td><code id="drawDiagram_+3A_xmax">xmax</code>, <code id="drawDiagram_+3A_ymax">ymax</code></td>
<td>
<p>Choose values for the upper limits of the x- and y-axes respectively. Helpful for comparing two design realisations. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The output is a list of two elements. The first, $diagram, is a ggplot2 object showing how the trial should proceed: when to to undertake an interim analysis, that is, when to check if a stopping boundary has been reached (solid colours) and what decision to make at each possible point (continue / go decision / no go decision). The second list element, $bounds.mat, is a data frame containing three columns: the number of participants at which to undertake an interim analysis (m), and the number of responses at which the trial should stop for a go decision (success) or a no go decision (fail).
</p>


<h3>Author(s)</h3>

<p>Martin Law, <a href="mailto:martin.law@mrc-bsu.cam.ac.uk">martin.law@mrc-bsu.cam.ac.uk</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>output &lt;- singlearmDesign(nmin = 30,
 nmax = 30,
 C = 5,
 p0 = 0.1,
 p1 = 0.4,
 power = 0.8,
 alpha = 0.05)
 dig &lt;- drawDiagram(output, print.row = 2)
</code></pre>

<hr>
<h2 id='drawDiagramGeneric'>drawDiagramGeneric</h2><span id='topic+drawDiagramGeneric'></span>

<h3>Description</h3>

<p>drawDiagramGeneric
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawDiagramGeneric(n, go, nogo, xmax = NULL, ymax = NULL, ylab = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawDiagramGeneric_+3A_n">n</code></td>
<td>
<p>Maximum sample size</p>
</td></tr>
<tr><td><code id="drawDiagramGeneric_+3A_go">go</code></td>
<td>
<p>Two-column matrix detailing stopping boundaries for a go decision
or efficacy stopping, where the first column contains the number of responses and
the second column contains the corresponding number of participants so far.</p>
</td></tr>
<tr><td><code id="drawDiagramGeneric_+3A_nogo">nogo</code></td>
<td>
<p>Two-column matrix detailing stopping boundaries for a no go decision
or futility stopping, where the first column contains the number of responses and
the second column contains the corresponding number of participants so far.</p>
</td></tr>
<tr><td><code id="drawDiagramGeneric_+3A_xmax">xmax</code></td>
<td>
<p>Optional. Maximum value for x axis.</p>
</td></tr>
<tr><td><code id="drawDiagramGeneric_+3A_ymax">ymax</code></td>
<td>
<p>Optional. Maximum value for y axis.</p>
</td></tr>
<tr><td><code id="drawDiagramGeneric_+3A_ylab">ylab</code></td>
<td>
<p>Optional. Label for y axis.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>ggplot</code>, showing a visualisation of the
maximum sample size and inputted stopping boundaries.
</p>


<h3>Author(s)</h3>

<p>Martin Law, <a href="mailto:martin.law@mrc-bsu.cam.ac.uk">martin.law@mrc-bsu.cam.ac.uk</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> go &lt;- cbind(6:8, rep(8,3))
 nogo &lt;- cbind(0:5, rep(8,6))
 drawDiagramGeneric(n=8, go=go, nogo=nogo, ylab="Number of successes")
</code></pre>

<hr>
<h2 id='find2stageDesigns'>Find two-stage designs</h2><span id='topic+find2stageDesigns'></span>

<h3>Description</h3>

<p>This function finds two-stage designs for a given set of design parameters, allowing
stopping for benefit at the interim (Mander and Thompson's design) or no stopping
for benefit at the interim (Simon's design). It returns not
only the optimal and minimax design realisations, but all design realisations that could
be considered &quot;best&quot; in terms of expected sample size under p=p0 (EssH0), expected
sample size under p=p1 (Ess), maximum sample size (n) or any weighted combination of these
three optimality criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find2stageDesigns(
  nmin,
  nmax,
  p0,
  p1,
  alpha,
  power,
  maxthetaF = NA,
  benefit = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find2stageDesigns_+3A_nmin">nmin</code></td>
<td>
<p>Minimum permitted sample size. Should be a multiple of block size or number of stages.</p>
</td></tr>
<tr><td><code id="find2stageDesigns_+3A_nmax">nmax</code></td>
<td>
<p>Maximum permitted sample size. Should be a multiple of block size or number of stages.</p>
</td></tr>
<tr><td><code id="find2stageDesigns_+3A_p0">p0</code></td>
<td>
<p>Probability for which to control the type-I error-rate</p>
</td></tr>
<tr><td><code id="find2stageDesigns_+3A_p1">p1</code></td>
<td>
<p>Probability for which to control the power</p>
</td></tr>
<tr><td><code id="find2stageDesigns_+3A_alpha">alpha</code></td>
<td>
<p>Significance level</p>
</td></tr>
<tr><td><code id="find2stageDesigns_+3A_power">power</code></td>
<td>
<p>Required power (1-beta)</p>
</td></tr>
<tr><td><code id="find2stageDesigns_+3A_maxthetaf">maxthetaF</code></td>
<td>
<p>Maximum permitted conditional power for futility stopping. Optional.</p>
</td></tr>
<tr><td><code id="find2stageDesigns_+3A_benefit">benefit</code></td>
<td>
<p>Allow the trial to end for a go decision and reject the null hypothesis at the interim analysis (i.e., the design of Mander and Thompson)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of class &quot;curtailment_simon&quot; containing two data frames. The first data frame, $input,
has a single row and contains all the inputted values. The second data frame, $all.des, contains one
row for each design realisation, and contains the details of each design, including sample size,
stopping boundaries and operating characteristics. To see a diagram of any obtained design realisation
and its corresponding stopping boundaries, simply call the function drawDiagram with this output as the only argument.
</p>


<h3>Author(s)</h3>

<p>Martin Law, <a href="mailto:martin.law@mrc-bsu.cam.ac.uk">martin.law@mrc-bsu.cam.ac.uk</a>
</p>


<h3>References</h3>

<p><a href="https://doi.org/10.1016/j.cct.2010.07.008">doi:10.1016/j.cct.2010.07.008</a>A.P. Mander, S.G. Thompson,
Two-stage designs optimal under the alternative hypothesis for phase II cancer clinical trials,
Contemporary Clinical Trials,
Volume 31, Issue 6,
2010,
Pages 572-578
</p>
<p><a href="https://doi.org/10.1016/0197-2456%2889%2990015-9">doi:10.1016/0197-2456(89)90015-9</a>Richard Simon,
Optimal two-stage designs for phase II clinical trials,
Controlled Clinical Trials,
Volume 10, Issue 1,
1989,
Pages 1-10
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
find2stageDesigns(nmin=23,
 nmax=27,
 p0=0.75,
 p1=0.92,
 alpha=0.22,
 power=0.95,
 benefit=TRUE)
 
</code></pre>

<hr>
<h2 id='find2stageThetaF'>Find conditional power for futility</h2><span id='topic+find2stageThetaF'></span>

<h3>Description</h3>

<p>Finds maximum conditional power at which trial will stop for futility
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find2stageThetaF(r, r1, n2, p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find2stageThetaF_+3A_r">r</code></td>
<td>
<p>Number of responses to be exceeded for trial success</p>
</td></tr>
<tr><td><code id="find2stageThetaF_+3A_r1">r1</code></td>
<td>
<p>Number of responses to be exceeded to continue to second stage</p>
</td></tr>
<tr><td><code id="find2stageThetaF_+3A_n2">n2</code></td>
<td>
<p>Sample size of second stage</p>
</td></tr>
<tr><td><code id="find2stageThetaF_+3A_p">p</code></td>
<td>
<p>Response rate under alternative hypothesis H1</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The maximum conditional power at which the trial will stop for futility. This is the CP when there are r1 responses out of n1 participants.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>find2stageThetaF(r=20, r1=8, n2=13, p=0.92)

</code></pre>

<hr>
<h2 id='findLoss'>Find loss scores for a set of single-arm designs</h2><span id='topic+findLoss'></span>

<h3>Description</h3>

<p>This function finds loss scores for single-arm designs, in particular, designs
found using the function singlearmdesigns(). Weights w0 and w1 are chosen,
and the loss for each design is found using the equation
<em>loss = w0\*ESS(0) + w1\*ESS(1) + (1-w0-w1)\*N</em>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findLoss(main.output, w0, w1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findLoss_+3A_main.output">main.output</code></td>
<td>
<p>Output from function singlearmDesigns().</p>
</td></tr>
<tr><td><code id="findLoss_+3A_w0">w0</code></td>
<td>
<p>Choice of weight on ESS(0)</p>
</td></tr>
<tr><td><code id="findLoss_+3A_w1">w1</code></td>
<td>
<p>Choice of weight on ESS(0)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Output is a list identical to the output from function singlearmDesigns(),
but with absolute and ranked loss scores added.
</p>


<h3>Author(s)</h3>

<p>Martin Law, <a href="mailto:martin.law@mrc-bsu.cam.ac.uk">martin.law@mrc-bsu.cam.ac.uk</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>output &lt;- singlearmDesign(nmin = 30,
 nmax = 30,
 C = 5,
 p0 = 0.1,
 p1 = 0.4,
 power = 0.8,
 alpha = 0.05)
 output.w.loss &lt;- findLoss(main.output=output,
 w0=0.2,
 w1=0.3)
</code></pre>

<hr>
<h2 id='findNSCdesigns'>findNSCdesigns</h2><span id='topic+findNSCdesigns'></span>

<h3>Description</h3>

<p>This function finds admissible design realisations for single-arm binary outcome trials, using non-stochastic curtailment.
The output is a data frame of admissible design realisations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findNSCdesigns(nmin, nmax, p0, p1, alpha, power, progressBar = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findNSCdesigns_+3A_nmin">nmin</code></td>
<td>
<p>Minimum permitted sample size.</p>
</td></tr>
<tr><td><code id="findNSCdesigns_+3A_nmax">nmax</code></td>
<td>
<p>Maximum permitted sample size.</p>
</td></tr>
<tr><td><code id="findNSCdesigns_+3A_p0">p0</code></td>
<td>
<p>Probability for which to control the type-I error-rate</p>
</td></tr>
<tr><td><code id="findNSCdesigns_+3A_p1">p1</code></td>
<td>
<p>Probability for which to control the power</p>
</td></tr>
<tr><td><code id="findNSCdesigns_+3A_alpha">alpha</code></td>
<td>
<p>Significance level</p>
</td></tr>
<tr><td><code id="findNSCdesigns_+3A_power">power</code></td>
<td>
<p>Required power (1-beta).</p>
</td></tr>
<tr><td><code id="findNSCdesigns_+3A_progressbar">progressBar</code></td>
<td>
<p>Logical. If TRUE, shows progress bar. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Output is a list of two dataframes. The first, $input, is a one-row
data frame that contains important arguments used in the call. The second,
$all.des,contains the operating characteristics of all admissible designs found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>findNSCdesigns(nmin=20, nmax=21, p0=0.1, p1=0.4, alpha=0.1, power=0.8)
</code></pre>

<hr>
<h2 id='findSCdesigns'>findSCDesigns</h2><span id='topic+findSCdesigns'></span>

<h3>Description</h3>

<p>This function finds admissible design realisations for single-arm binary outcome trials, using stochastic curtailment.
This function differs from singlearmDesign in that it includes a Simon-style interim analysis after some n1 participants.
The output is a data frame of admissible design realisations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findSCdesigns(
  nmin,
  nmax,
  p0,
  p1,
  alpha,
  power,
  minthetaE = p1,
  maxthetaF = p1,
  bounds = "wald",
  fixed.r1 = NA,
  fixed.r = NA,
  fixed.n1 = NA,
  max.combns = 1e+06,
  maxthetas = NA,
  exact.thetaF = NA,
  exact.thetaE = NA,
  progressBar = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findSCdesigns_+3A_nmin">nmin</code></td>
<td>
<p>Minimum permitted sample size.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_nmax">nmax</code></td>
<td>
<p>Maximum permitted sample size.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_p0">p0</code></td>
<td>
<p>Probability for which to control the type-I error-rate</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_p1">p1</code></td>
<td>
<p>Probability for which to control the power</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_alpha">alpha</code></td>
<td>
<p>Significance level</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_power">power</code></td>
<td>
<p>Required power (1-beta).</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_minthetae">minthetaE</code></td>
<td>
<p>Minimum value of upper threshold theta_E_min. Defaults to p.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_maxthetaf">maxthetaF</code></td>
<td>
<p>Maximum value of lower CP threshold theta_F_max. Defaults to p.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_bounds">bounds</code></td>
<td>
<p>choose what final rejection boundaries should be searched over: Those of A'Hern (&quot;ahern&quot;), Wald (&quot;wald&quot;) or no constraints (NA). Defaults to &quot;wald&quot;.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_fixed.r1">fixed.r1</code></td>
<td>
<p>Choose what interim rejection boundaries should be searched over. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_fixed.r">fixed.r</code></td>
<td>
<p>Choose what final rejection boundaries should be searched over. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_fixed.n1">fixed.n1</code></td>
<td>
<p>Choose what interim sample size values n1 should be searched over. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_max.combns">max.combns</code></td>
<td>
<p>Provide a maximum number of ordered pairs (theta_F, theta_E). Defaults to 1e6.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_maxthetas">maxthetas</code></td>
<td>
<p>Provide a maximum number of CP values used to create ordered pairs (theta_F, theta_E). Can be used instead of max.combns. Defaults to NA.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_exact.thetaf">exact.thetaF</code></td>
<td>
<p>Provide an exact value for lower threshold theta_F. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_exact.thetae">exact.thetaE</code></td>
<td>
<p>Provide an exact value for upper threshold theta_E. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="findSCdesigns_+3A_progressbar">progressBar</code></td>
<td>
<p>Logical. If TRUE, shows progress bar. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Output is a list of two dataframes. The first, $input, is a one-row
data frame that contains important arguments used in the call. The second,
$all.des,contains the operating characteristics of all admissible designs found.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>findSCdesigns(nmin = 20, nmax = 20, p0 = 0.1, p1 = 0.4, power = 0.8, alpha = 0.1, max.combns=1e2)
</code></pre>

<hr>
<h2 id='findSingleSimonDesign'>Find a single Simon design</h2><span id='topic+findSingleSimonDesign'></span>

<h3>Description</h3>

<p>This function finds the operating characteristics of a single realisation of a Simon design. It returns
the inputted values along with the type-I error-rate (alpha), power,  expected sample size under p=p0 (EssH0)
and expected sample size under p=p1 (Ess).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findSingleSimonDesign(n1, n2, r1, r, p0, p1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="findSingleSimonDesign_+3A_n1">n1</code></td>
<td>
<p>Number of participants in stage 1</p>
</td></tr>
<tr><td><code id="findSingleSimonDesign_+3A_n2">n2</code></td>
<td>
<p>Number of participants in stage 2</p>
</td></tr>
<tr><td><code id="findSingleSimonDesign_+3A_r1">r1</code></td>
<td>
<p>Interim stopping boundary that must be exceeded to avoid no go stopping</p>
</td></tr>
<tr><td><code id="findSingleSimonDesign_+3A_r">r</code></td>
<td>
<p>Final rejection boundary that must be exceeded to reject the null hypothesis.</p>
</td></tr>
<tr><td><code id="findSingleSimonDesign_+3A_p0">p0</code></td>
<td>
<p>Anticipated response probability for inefficacious treatment</p>
</td></tr>
<tr><td><code id="findSingleSimonDesign_+3A_p1">p1</code></td>
<td>
<p>Anticipated response probability for efficacious treatment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector containing all the inputted values and corresponding operating characteristics.
</p>


<h3>Author(s)</h3>

<p>Martin Law, <a href="mailto:martin.law@mrc-bsu.cam.ac.uk">martin.law@mrc-bsu.cam.ac.uk</a>
</p>


<h3>References</h3>

<p><a href="https://doi.org/10.1016/0197-2456%2889%2990015-9">doi:10.1016/0197-2456(89)90015-9</a>Richard Simon,
Optimal two-stage designs for phase II clinical trials,
Controlled Clinical Trials,
Volume 10, Issue 1,
1989,
Pages 1-10
</p>


<h3>Examples</h3>

<pre><code class='language-R'>findSingleSimonDesign(n1 = 15, n2 = 11, r1 = 1, r = 4, p0 = 0.1, p1 = 0.3)
</code></pre>

<hr>
<h2 id='plotByWeight'>plotByWeight</h2><span id='topic+plotByWeight'></span>

<h3>Description</h3>

<p>This function shows the omni-admissible design &ndash; the design realisation with
the lowest loss score &ndash; from a subset of admissible designs. The input is an
object created by singlearmDesign.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotByWeight(main.output, split.by.cohort.size = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotByWeight_+3A_main.output">main.output</code></td>
<td>
<p>Object created by the function(s) listed above.</p>
</td></tr>
<tr><td><code id="plotByWeight_+3A_split.by.cohort.size">split.by.cohort.size</code></td>
<td>
<p>Logical. If TRUE, creates separate plots for each
cohort size/block size/ number of stages. Defaults to TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>ggplot</code> if either the chosen designs have only
one unique cohort size or if split.by.cohort.size is FALSE. Otherwise, a list
containing multiple <code>ggplot</code> objects is returned. The objects show which
design has the lowest loss score, at each possible set of weights (w0, w1).
Each design is characterised using the format {r/N, thetaF/thetaE}.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>designs &lt;- singlearmDesign(nmin=30, nmax=30, C=5, p0=0.1, p1=0.4, power=0.8, alpha = 0.05)
plotByWeight(designs)
</code></pre>

<hr>
<h2 id='singlearmDesign'>Find single-arm trials using stochastic curtailment</h2><span id='topic+singlearmDesign'></span>

<h3>Description</h3>

<p>This function finds admissible design realisations for single-arm binary outcome trials, using stochastic curtailment.
The output can be used as the sole argument in the function 'drawDiagram', which will return the stopping boundaries for the
admissible design of your choice. Monitoring frequency can set in terms of block(/cohort) size (&quot;C&quot;) or number of stages (&quot;stages&quot;).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>singlearmDesign(
  nmin,
  nmax,
  C = NA,
  stages = NA,
  p0,
  p1,
  alpha,
  power,
  minstop = 1,
  maxthetaF = p1,
  minthetaE = p1,
  bounds = "wald",
  return.only.admissible = TRUE,
  max.combns = 1e+06,
  maxthetas = NA,
  fixed.r = NA,
  exact.thetaF = NA,
  exact.thetaE = NA,
  progressBar = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="singlearmDesign_+3A_nmin">nmin</code></td>
<td>
<p>Smallest maximum sample size. Should be a multiple of block size or number of stages.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_nmax">nmax</code></td>
<td>
<p>Largest maximum sample size. Should be a multiple of block size or number of stages.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_c">C</code></td>
<td>
<p>Block size. Vectors, i.e., multiple values, are permitted.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_stages">stages</code></td>
<td>
<p>Number of interim analyses or &quot;stages&quot;. Only required if not setting block size C. Vectors, i.e., multiple values, are permitted.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_p0">p0</code></td>
<td>
<p>Probability for which to control the type-I error-rate</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_p1">p1</code></td>
<td>
<p>Probability for which to control the power</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_alpha">alpha</code></td>
<td>
<p>Significance level</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_power">power</code></td>
<td>
<p>Required power (1-beta).</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_minstop">minstop</code></td>
<td>
<p>Minimum permitted sample size at the first interim analysis</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_maxthetaf">maxthetaF</code></td>
<td>
<p>Maximum value of lower CP threshold theta_F_max. Defaults to p1.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_minthetae">minthetaE</code></td>
<td>
<p>Minimum value of upper threshold theta_E_min. Defaults to p1.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_bounds">bounds</code></td>
<td>
<p>choose what final rejection boundaries should be searched over: Those of A'Hern (&quot;ahern&quot;), Wald (&quot;wald&quot;) or no constraints (NA). Defaults to &quot;wald&quot;.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_return.only.admissible">return.only.admissible</code></td>
<td>
<p>Logical. Returns only admissible design realisations if TRUE, otherwise returns all feasible designs. Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_max.combns">max.combns</code></td>
<td>
<p>Provide a maximum number of ordered pairs (theta_F, theta_E). Defaults to 1e6.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_maxthetas">maxthetas</code></td>
<td>
<p>Provide a maximum number of CP values used to create ordered pairs (theta_F, theta_E). Can be used instead of max.combns. Defaults to NA.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_fixed.r">fixed.r</code></td>
<td>
<p>Choose what final rejection boundaries should be searched over. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_exact.thetaf">exact.thetaF</code></td>
<td>
<p>Provide an exact value for lower threshold theta_F. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_exact.thetae">exact.thetaE</code></td>
<td>
<p>Provide an exact value for upper threshold theta_E. Useful for reproducing a particular design realisation. Defaults to NA.</p>
</td></tr>
<tr><td><code id="singlearmDesign_+3A_progressbar">progressBar</code></td>
<td>
<p>Logical. If TRUE, shows progress bar. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Output is a list of two dataframes. The first, $input, is a one-row data frame that contains all the arguments used in the call. The second, $all.des, contains the operating characteristics of all admissible designs found.
</p>


<h3>Author(s)</h3>

<p>Martin Law, <a href="mailto:martin.law@mrc-bsu.cam.ac.uk">martin.law@mrc-bsu.cam.ac.uk</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>output &lt;- singlearmDesign(nmin = 30,
 nmax = 30,
 C = 5,
 p0 = 0.1,
 p1 = 0.4,
 power = 0.8,
 alpha = 0.05)
</code></pre>

<hr>
<h2 id='twoarmDesign'>Find two-arm trial designs that use stochastic curtailment</h2><span id='topic+twoarmDesign'></span>

<h3>Description</h3>

<p>This function finds admissible design realisations for two-arm binary outcome trials, using stochastic curtailment.
The output can be used as the sole argument in the function 'drawDiagram', which will return the stopping boundaries for the
admissible design of your choice. Monitoring frequency can set in terms of block size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>twoarmDesign(
  nmin.arm,
  nmax.arm,
  block.size,
  minstop = NULL,
  pc,
  pt,
  alpha,
  power,
  maxthetaF = NULL,
  minthetaE = 0.7,
  bounds = "ahern",
  fixed.r = NULL,
  max.combns = 1e+06,
  rm.dominated.designs = TRUE,
  exact.thetaF = NULL,
  exact.thetaE = NULL,
  fast.method = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="twoarmDesign_+3A_nmin.arm">nmin.arm</code></td>
<td>
<p>Smallest maximum sample size <em>per arm</em>. Should be a multiple of block size.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_nmax.arm">nmax.arm</code></td>
<td>
<p>Largest maximum sample size <em>per arm</em>. Should be a multiple of block size.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_block.size">block.size</code></td>
<td>
<p>Block size.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_minstop">minstop</code></td>
<td>
<p>Minimum permitted sample size at the first interim analysis.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_pc">pc</code></td>
<td>
<p>Anticipated response rate on the control arm.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_pt">pt</code></td>
<td>
<p>Anticipated response rate on the treatment arm.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_alpha">alpha</code></td>
<td>
<p>Significance level</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_power">power</code></td>
<td>
<p>Required power (1-beta).</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_maxthetaf">maxthetaF</code></td>
<td>
<p>Maximum value of lower CP threshold theta_F_max.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_minthetae">minthetaE</code></td>
<td>
<p>Minimum value of upper threshold theta_E_min.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_bounds">bounds</code></td>
<td>
<p>choose what final rejection boundaries should be searched over: Those of A'Hern (&quot;ahern&quot;), Wald (&quot;wald&quot;) or no constraints (NA). Defaults to &quot;wald&quot;.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_fixed.r">fixed.r</code></td>
<td>
<p>Choose what final rejection boundaries should be searched over. Useful for reproducing a particular design realisation. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_max.combns">max.combns</code></td>
<td>
<p>Provide a maximum number of ordered pairs (theta_F, theta_E). Defaults to 1e6.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_rm.dominated.designs">rm.dominated.designs</code></td>
<td>
<p>Logical. If TRUE, dominated designs will be
removed from final output. Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_exact.thetaf">exact.thetaF</code></td>
<td>
<p>Provide an exact value for lower threshold theta_F. Useful for reproducing a particular design realisation. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_exact.thetae">exact.thetaE</code></td>
<td>
<p>Provide an exact value for upper threshold theta_E. Useful for reproducing a particular design realisation. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="twoarmDesign_+3A_fast.method">fast.method</code></td>
<td>
<p>Logical. If FALSE, design search is conducted over all combinations of
(theta_F, theta_E). If TRUE, a much faster, though less thorough, design search is undertaken.
Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Output is a list of two dataframes. The first, $input, is a one-row data frame that contains all the arguments used in the call.
The second, $all.des, contains the operating characteristics of all admissible designs found.
</p>


<h3>Author(s)</h3>

<p>Martin Law, <a href="mailto:martin.law@mrc-bsu.cam.ac.uk">martin.law@mrc-bsu.cam.ac.uk</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
des &lt;- twoarmDesign(nmin.arm=20,
nmax.arm=24,
block.size=8,
pc=0.1,
pt=0.4,
alpha=0.1,
power=0.8,
maxthetaF=0.4,
minthetaE=0.7,
max.combns=1e4)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
