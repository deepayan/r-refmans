<!DOCTYPE html><html lang="en"><head><title>Help for package npboottprmFBar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {npboottprmFBar}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#appendInputParams'><p>Append Input Parameters to persimon_app Simulation Results</p></a></li>
<li><a href='#bootFbar'><p>Nonparametric Bootstrap Test with Pooled Resampling for Informative Hypothesis Testing</p></a></li>
<li><a href='#bootstrap_fbar_sample'><p>Internal Bootstrap Resampling for F-bar Test</p></a></li>
<li><a href='#getUIParams'><p>Generate UI Parameters for persimon_app Simulation</p></a></li>
<li><a href='#persimon'><p>Performance Simulation On Type I Error or Statistical Power</p></a></li>
<li><a href='#persimon_app'><p>Run Shiny Application for bootFbar Performance Simulation</p></a></li>
<li><a href='#runSimulation'><p>Run Persimon Simulation with User Inputs</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Informative Nonparametric Bootstrap Test with Pooled Resampling</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Sample sizes are often small due to hard to reach target populations,
    rare target events, time constraints, limited budgets, or ethical considerations.
    Two statistical methods with promising performance in small samples are the
    nonparametric bootstrap test with pooled resampling method, which is the
    focus of Dwivedi, Mallawaarachchi, and Alvarado (2017) &lt;<a href="https://doi.org/10.1002%2Fsim.7263">doi:10.1002/sim.7263</a>&gt;,
    and informative hypothesis testing, which is implemented in the 'restriktor'
    package. The 'npboottprmFBar' package uses the nonparametric bootstrap test
    with pooled resampling method to implement informative hypothesis testing.
    The bootFbar() function can be used to analyze data with this method and the
    persimon() function can be used to conduct performance simulations on type-one
    error and statistical power.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mightymetrika/npboottprmFBar">https://github.com/mightymetrika/npboottprmFBar</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mightymetrika/npboottprmFBar/issues">https://github.com/mightymetrika/npboottprmFBar/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>DT, fGarch, lmPerm, mmints, npboottprm, restriktor, shiny</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-08 16:05:06 UTC; Administrator</td>
</tr>
<tr>
<td>Author:</td>
<td>Mackson Ncube [aut, cre],
  mightymetrika, LLC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mackson Ncube &lt;macksonncube.stats@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-08 16:20:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='appendInputParams'>Append Input Parameters to persimon_app Simulation Results</h2><span id='topic+appendInputParams'></span>

<h3>Description</h3>

<p>This internal function combines simulation results with success rates and
input parameters. It prepares the data for storage in the database by appending
all relevant information from a single simulation run.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>appendInputParams(df_results, df_success, input)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="appendInputParams_+3A_df_results">df_results</code></td>
<td>
<p>A data frame containing the main simulation results.</p>
</td></tr>
<tr><td><code id="appendInputParams_+3A_df_success">df_success</code></td>
<td>
<p>A data frame containing the counts of successful model runs.</p>
</td></tr>
<tr><td><code id="appendInputParams_+3A_input">input</code></td>
<td>
<p>A list of input values from the Shiny app, including simulation parameters.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs several steps:
</p>

<ol>
<li><p> Appends '_success' to the column names of df_success (except n1, n2, n3).
</p>
</li>
<li><p> Combines df_results with the modified df_success.
</p>
</li>
<li><p> Generates a unique run code for the simulation.
</p>
</li>
<li><p> Creates a data frame of input parameters.
</p>
</li>
<li><p> Repeats the input parameters to match the number of rows in the results.
</p>
</li>
<li><p> Combines all the above into a single data frame.
</p>
</li></ol>



<h3>Value</h3>

<p>A data frame combining simulation results, success rates, and input
parameters.
The returned data frame includes:
</p>

<ul>
<li><p> All columns from df_results
</p>
</li>
<li><p> Success rate columns from df_success (appended with '_success')
</p>
</li>
<li><p> Input parameters (M1, S1, M2, S2, M3, S3, Sk1, Sk2, Sk3, n_simulations,
nboot, conf_level)
</p>
</li>
<li><p> A unique RunCode for the simulation
</p>
</li></ul>


<hr>
<h2 id='bootFbar'>Nonparametric Bootstrap Test with Pooled Resampling for Informative Hypothesis Testing</h2><span id='topic+bootFbar'></span>

<h3>Description</h3>

<p>Performs a nonparametric bootstrap test with pooled resampling based on the methods
described by Dwivedi et al. (2017) and using the <code>restriktor::iht</code> function as
proposed by Vanbrabant and Rosseel (2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bootFbar(
  data,
  formula,
  grp,
  constraints,
  nboot = 1000,
  conf.level = 0.95,
  seed = NULL,
  na_rm = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bootFbar_+3A_data">data</code></td>
<td>
<p>A data frame containing the dataset for analysis.</p>
</td></tr>
<tr><td><code id="bootFbar_+3A_formula">formula</code></td>
<td>
<p>An object of class <code>"formula"</code> (or one that can be coerced to that class):
a symbolic description of the model to be fitted.</p>
</td></tr>
<tr><td><code id="bootFbar_+3A_grp">grp</code></td>
<td>
<p>A string specifying the grouping variable in the data.</p>
</td></tr>
<tr><td><code id="bootFbar_+3A_constraints">constraints</code></td>
<td>
<p>A matrix or data frame of constraints for the hypothesis test.</p>
</td></tr>
<tr><td><code id="bootFbar_+3A_nboot">nboot</code></td>
<td>
<p>An integer indicating the number of bootstrap resamples (default is 1000).</p>
</td></tr>
<tr><td><code id="bootFbar_+3A_conf.level">conf.level</code></td>
<td>
<p>A numeric value specifying the confidence level for the interval
(default is 0.95).</p>
</td></tr>
<tr><td><code id="bootFbar_+3A_seed">seed</code></td>
<td>
<p>An optional integer setting the seed for random number generation (default is NULL).</p>
</td></tr>
<tr><td><code id="bootFbar_+3A_na_rm">na_rm</code></td>
<td>
<p>A logical value indicating whether NA values should be removed (default is FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the following components:
</p>
<p>-pvalueA, pvalueB, pvalueF: P-values for the different test types.
</p>
<p>-ciA, ciB, ciF: Confidence intervals for the test statistics.
</p>
<p>-TsA, TsB, TsF: Bootstrap test statistics.
</p>
<p>-modelo: The linear model object.
</p>
<p>-ihto: The initial iht computation result.
</p>


<h3>References</h3>

<p>Dwivedi, A. K., Mallawaarachchi, I., &amp; Alvarado, L. A. (2017). Analysis of
small sample size studies using nonparametric bootstrap test with pooled
resampling method. Statistics in Medicine, 36(14), 2187–2205.
https://doi.org/10.1002/sim.7263
</p>
<p>Vanbrabant, L., &amp; Rosseel, Y. (2020). An Introduction to Restriktor: Evaluating
informative hypotheses for linear models. In R. van de Schoot &amp; M. Miocevic
(Eds.), Small Sample Size Solutions: A Guide for Applied Researchers and
Practitioners (1st ed., pp. 157 -172). Routledge. https://doi.org/10.4324/9780429273872-14
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bootFbar(data = iris, formula = Sepal.Length ~ -1 + Species,
         grp = "Species",
         constraints = 'Speciessetosa &lt; Speciesversicolor &lt; Speciesvirginica',
         nboot = 10, conf.level = 0.95, seed = NULL, na_rm = FALSE)

</code></pre>

<hr>
<h2 id='bootstrap_fbar_sample'>Internal Bootstrap Resampling for F-bar Test</h2><span id='topic+bootstrap_fbar_sample'></span>

<h3>Description</h3>

<p>This internal function performs bootstrap resampling specific to the F-bar test
within the context of the nonparametric bootstrap test with pooled resampling.
It is used by <code>bootFbar</code> to generate bootstrap samples and compute intermediate
statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bootstrap_fbar_sample(
  data,
  formula,
  grp,
  constraints,
  grp_val,
  grp_sizes,
  pre_calc,
  only_equality_constraints
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bootstrap_fbar_sample_+3A_data">data</code></td>
<td>
<p>A data frame containing the dataset for analysis.</p>
</td></tr>
<tr><td><code id="bootstrap_fbar_sample_+3A_formula">formula</code></td>
<td>
<p>An object of class <code>"formula"</code>: a symbolic description of
the model to be fitted.</p>
</td></tr>
<tr><td><code id="bootstrap_fbar_sample_+3A_grp">grp</code></td>
<td>
<p>A string specifying the grouping variable in the data.</p>
</td></tr>
<tr><td><code id="bootstrap_fbar_sample_+3A_constraints">constraints</code></td>
<td>
<p>A matrix or data frame of constraints for the hypothesis test.</p>
</td></tr>
<tr><td><code id="bootstrap_fbar_sample_+3A_grp_val">grp_val</code></td>
<td>
<p>A vector containing the values of the group variable.</p>
</td></tr>
<tr><td><code id="bootstrap_fbar_sample_+3A_grp_sizes">grp_sizes</code></td>
<td>
<p>A table object containing the sizes of each group.</p>
</td></tr>
<tr><td><code id="bootstrap_fbar_sample_+3A_pre_calc">pre_calc</code></td>
<td>
<p>A list containing pre-calculated original test statistics.</p>
</td></tr>
<tr><td><code id="bootstrap_fbar_sample_+3A_only_equality_constraints">only_equality_constraints</code></td>
<td>
<p>A logical indicating whether only equality
constraints are used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function creates bootstrap samples for each group in the data, then binds
these samples together. It applies the <code>restriktor::iht</code> function on these
samples to compute the test statistics. Error handling is implemented to manage
potential issues in <code>iht</code> computation.
</p>


<h3>Value</h3>

<p>A list containing the test statistics for each constraint type
(B, A, F) based on the bootstrap sample. Returns NA values if the iht
computation fails.
</p>

<hr>
<h2 id='getUIParams'>Generate UI Parameters for persimon_app Simulation</h2><span id='topic+getUIParams'></span>

<h3>Description</h3>

<p>This internal function creates a list of 'shiny' input elements for the
simulation parameters. It defines the UI components for means, standard
deviations, skewness, sample sizes, number of simulations, number of bootstrap
iterations, and confidence level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getUIParams()
</code></pre>


<h3>Details</h3>

<p>This function is used internally by the 'shiny' app to generate the
UI elements for parameter input.
</p>


<h3>Value</h3>

<p>A list of 'shiny' input elements including:
</p>
<table role = "presentation">
<tr><td><code>M1</code>, <code>M2</code>, <code>M3</code></td>
<td>
<p>Numeric inputs for means of the three groups</p>
</td></tr>
<tr><td><code>S1</code>, <code>S2</code>, <code>S3</code></td>
<td>
<p>Numeric inputs for standard deviations of the three groups</p>
</td></tr>
<tr><td><code>Sk1</code>, <code>Sk2</code>, <code>Sk3</code></td>
<td>
<p>Numeric inputs for skewness of the three groups</p>
</td></tr>
<tr><td><code>n1</code>, <code>n2</code>, <code>n3</code></td>
<td>
<p>Text inputs for sample sizes of the three groups</p>
</td></tr>
<tr><td><code>n_simulations</code></td>
<td>
<p>Numeric input for number of simulation iterations</p>
</td></tr>
<tr><td><code>nboot</code></td>
<td>
<p>Numeric input for number of bootstrap iterations</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p>Numeric input for confidence level</p>
</td></tr>
</table>

<hr>
<h2 id='persimon'>Performance Simulation On Type I Error or Statistical Power</h2><span id='topic+persimon'></span>

<h3>Description</h3>

<p>Simulates performance (Type I Error or Statistical Power) for a range of
statistical tests, including bootFbar, default setting restriktor::iht, and
parametric bootstrap restriktor::iht. The function is set up to replicate the
table structure in Dwivedi et al. (2017) Supplemental Tables 2 &amp; 3.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>persimon(
  M1 = 5,
  S1 = 1,
  M2 = 5,
  S2 = 1,
  M3 = 5,
  S3 = 1,
  Sk1 = NULL,
  Sk2 = NULL,
  Sk3 = NULL,
  n1 = c(2, 3, 4, 5, 6, 7, 8, 9, 10, 15),
  n2 = c(2, 3, 4, 5, 6, 7, 8, 9, 10, 15),
  n3 = c(2, 3, 4, 5, 6, 7, 8, 9, 10, 15),
  n_simulations = 10000,
  nboot = 1000,
  conf.level = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="persimon_+3A_m1">M1</code></td>
<td>
<p>Mean value for group 1.</p>
</td></tr>
<tr><td><code id="persimon_+3A_s1">S1</code></td>
<td>
<p>Standard deviation for group 1.</p>
</td></tr>
<tr><td><code id="persimon_+3A_m2">M2</code></td>
<td>
<p>Mean value for group 2.</p>
</td></tr>
<tr><td><code id="persimon_+3A_s2">S2</code></td>
<td>
<p>Standard deviation for group 2.</p>
</td></tr>
<tr><td><code id="persimon_+3A_m3">M3</code></td>
<td>
<p>Mean value for group 3.</p>
</td></tr>
<tr><td><code id="persimon_+3A_s3">S3</code></td>
<td>
<p>Standard deviation for group 3.</p>
</td></tr>
<tr><td><code id="persimon_+3A_sk1">Sk1</code></td>
<td>
<p>Skewness parameter for group 1; NULL for normal distribution.</p>
</td></tr>
<tr><td><code id="persimon_+3A_sk2">Sk2</code></td>
<td>
<p>Skewness parameter for group 2; NULL for normal distribution.</p>
</td></tr>
<tr><td><code id="persimon_+3A_sk3">Sk3</code></td>
<td>
<p>Skewness parameter for group 3; NULL for normal distribution.</p>
</td></tr>
<tr><td><code id="persimon_+3A_n1">n1</code></td>
<td>
<p>Vector of sample sizes for group 1.</p>
</td></tr>
<tr><td><code id="persimon_+3A_n2">n2</code></td>
<td>
<p>Vector of sample sizes for group 2.</p>
</td></tr>
<tr><td><code id="persimon_+3A_n3">n3</code></td>
<td>
<p>Vector of sample sizes for group 3.</p>
</td></tr>
<tr><td><code id="persimon_+3A_n_simulations">n_simulations</code></td>
<td>
<p>Number of simulations to run (default is 10000).</p>
</td></tr>
<tr><td><code id="persimon_+3A_nboot">nboot</code></td>
<td>
<p>Number of bootstrap samples (default is 1000).</p>
</td></tr>
<tr><td><code id="persimon_+3A_conf.level">conf.level</code></td>
<td>
<p>Confidence level for the tests (default is 0.95).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>persimon</code> function generates data for three groups with specified mean, standard deviation,
and skewness, and then applies a range of statistical tests to this data, simulating the process
across a specified number of iterations to assess performance in terms of Type I Error or
Statistical Power. The output mirrors the format of the supplemental tables in Dwivedi et al. (2017).
</p>


<h3>Value</h3>

<p>A list of data frames. One with the proportions of rejecting the null
hypothesis for each test and sample size combination, and the other with the
number of models which did not produce errors for each combination.
</p>


<h3>References</h3>

<p>Dwivedi, A. K., Mallawaarachchi, I., &amp; Alvarado, L. A. (2017). Analysis of small sample size studies
using nonparametric bootstrap test with pooled resampling method. Statistics in Medicine, 36(14), 2187–2205.
https://doi.org/10.1002/sim.7263
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(135)
persimon(M1 = 5, S1 = 1, M2 = 5, S2 = 1, M3 = 5, S3 = 1,
         n1 = 6, n2 = 6, n3 = 6, n_simulations = 2, nboot = 4,
         conf.level = 0.95)

</code></pre>

<hr>
<h2 id='persimon_app'>Run Shiny Application for bootFbar Performance Simulation</h2><span id='topic+persimon_app'></span>

<h3>Description</h3>

<p>This function launches a 'shiny' application that allows users to run
performance simulations for the bootFbar method and other statistical tests.
The app provides an interface to set simulation parameters, run simulations,
view results, and store them in a 'PostgreSQL' database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>persimon_app(dbname, datatable, host, port, user, password)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="persimon_app_+3A_dbname">dbname</code></td>
<td>
<p>A string specifying the name of the 'PostgreSQL' database to
connect to.</p>
</td></tr>
<tr><td><code id="persimon_app_+3A_datatable">datatable</code></td>
<td>
<p>A string specifying the name of the table in the database
where results will be stored.</p>
</td></tr>
<tr><td><code id="persimon_app_+3A_host">host</code></td>
<td>
<p>A string specifying the host name or IP address of the 'PostgreSQL'
server.</p>
</td></tr>
<tr><td><code id="persimon_app_+3A_port">port</code></td>
<td>
<p>An integer specifying the port number on which the 'PostgreSQL'
server is listening.</p>
</td></tr>
<tr><td><code id="persimon_app_+3A_user">user</code></td>
<td>
<p>A string specifying the username for the 'PostgreSQL' database
connection.</p>
</td></tr>
<tr><td><code id="persimon_app_+3A_password">password</code></td>
<td>
<p>A string specifying the password for the 'PostgreSQL'
database connection.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The 'shiny' application provides a user interface for setting simulation
parameters, running simulations using the <code>persimon</code> function, and visualizing
the results. It allows users to:
</p>

<ul>
<li><p> Set parameters for the simulation (means, standard deviations, sample sizes, etc.)
</p>
</li>
<li><p> Run simulations with the specified parameters
</p>
</li>
<li><p> View simulation results and success rates in interactive tables
</p>
</li>
<li><p> Store simulation results in a PostgreSQL database
</p>
</li>
<li><p> Download stored results from the database
</p>
</li>
<li><p> View relevant citations for the methods used
</p>
</li></ul>

<p>The application uses the <code>mmints</code> package for database interactions and
citation handling.
</p>


<h3>Value</h3>

<p>A 'shiny' application object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+persimon">persimon</a></code> for the underlying simulation function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()){
persimon_app(dbname = "my_database", datatable = "simulation_results",
             host = "localhost", port = 5432,
             user = "username", password = "password")
}

</code></pre>

<hr>
<h2 id='runSimulation'>Run Persimon Simulation with User Inputs</h2><span id='topic+runSimulation'></span>

<h3>Description</h3>

<p>This internal function executes the persimon simulation using parameters
provided by the user through the persimon_app 'shiny' app interface.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runSimulation(input)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="runSimulation_+3A_input">input</code></td>
<td>
<p>A list of input values from the 'shiny' app.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function serves as a wrapper around the <code>persimon</code> function, translating
user inputs from the persimon_app 'shiny' app into the format required by
<code>persimon</code>. It uses helper functions from the <code>mmints</code> package to process
certain inputs.
</p>


<h3>Value</h3>

<p>A list containing two data frames:
</p>
<table role = "presentation">
<tr><td><code>results</code></td>
<td>
<p>Data frame with proportions of rejecting the null hypothesis</p>
</td></tr>
<tr><td><code>success</code></td>
<td>
<p>Data frame with counts of successful model runs</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+persimon">persimon</a></code> for the underlying simulation function.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
