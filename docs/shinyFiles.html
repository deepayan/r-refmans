<!DOCTYPE html><html lang="en"><head><title>Help for package shinyFiles</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {shinyFiles}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#shinyFiles-package'><p>A Server-Side File System Viewer for Shiny</p></a></li>
<li><a href='#dirCreator'><p>Create a function that creates a new directory</p></a></li>
<li><a href='#dirGetter'><p>Create a function that updates a folder tree based on the given restrictions</p></a></li>
<li><a href='#fileGetter'><p>Create a function that returns fileinfo according to the given restrictions</p></a></li>
<li><a href='#formatFiletype'><p>Formats the value of the filetype argument</p></a></li>
<li><a href='#getVolumes'><p>Get a list of available volumes</p></a></li>
<li><a href='#shinyFiles-buttons'><p>Create a button to summon a shinyFiles dialog</p></a></li>
<li><a href='#shinyFiles-observers'><p>Create a connection to the server side filesystem</p></a></li>
<li><a href='#shinyFiles-parsers'><p>Convert the output of a selection to platform specific path(s)</p></a></li>
<li><a href='#shinyFilesExample'><p>Run a simple example app using the shinyFiles functionality</p></a></li>
<li><a href='#traverseDirs'><p>Traverse and update a tree representing the file system</p></a></li>
<li><a href='#updateChildren'><p>Update the children element to reflect current state</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A Server-Side File System Viewer for Shiny</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.3</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Lin Pedersen &lt;thomasp85@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functionality for client-side navigation of
    the server side file system in shiny apps. In case the app is running
    locally this gives the user direct access to the file system without the
    need to "download" files to a temporary location. Both file and folder
    selection as well as file saving is available.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>htmltools, jsonlite, tools, shiny (&ge; 1.1.0), fs (&ge; 1.2.6),
tibble (&ge; 1.4.2)</td>
</tr>
<tr>
<td>Collate:</td>
<td>'aaa.R' 'filechoose.R' 'dirchoose.R' 'filesave.R'
'shinyFiles-package.R'</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/thomasp85/shinyFiles">https://github.com/thomasp85/shinyFiles</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/thomasp85/shinyFiles/issues">https://github.com/thomasp85/shinyFiles/issues</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-19 13:37:35 UTC; thomas</td>
</tr>
<tr>
<td>Author:</td>
<td>Thomas Lin Pedersen
    <a href="https://orcid.org/0000-0002-5147-4711"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [cre, aut],
  Vincent Nijs [aut],
  Thomas Schaffner [aut],
  Eric Nantz [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-19 14:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='shinyFiles-package'>A Server-Side File System Viewer for Shiny</h2><span id='topic+shinyFiles'></span><span id='topic+shinyFiles-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides functionality for client-side navigation of the server side file system in shiny apps. In case the app is running locally this gives the user direct access to the file system without the need to &quot;download&quot; files to a temporary location. Both file and folder selection as well as file saving is available.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Thomas Lin Pedersen <a href="mailto:thomasp85@gmail.com">thomasp85@gmail.com</a> (<a href="https://orcid.org/0000-0002-5147-4711">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Vincent Nijs
</p>
</li>
<li><p> Thomas Schaffner
</p>
</li>
<li><p> Eric Nantz
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/thomasp85/shinyFiles">https://github.com/thomasp85/shinyFiles</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/thomasp85/shinyFiles/issues">https://github.com/thomasp85/shinyFiles/issues</a>
</p>
</li></ul>


<hr>
<h2 id='dirCreator'>Create a function that creates a new directory</h2><span id='topic+dirCreator'></span>

<h3>Description</h3>

<p>This function returns a function that can be used to create new directories
based on the information returned from the client. The returned function
takes the name, path and root of the directory to create and parses it into
a platform compliant format and then uses dir.create to create it. The
returned function returns TRUE if the directory was created successfully and
FALSE otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dirCreator(roots, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dirCreator_+3A_roots">roots</code></td>
<td>
<p>A named vector of absolute filepaths or a function returning a
named vector of absolute filepaths (the latter is useful if the volumes
should adapt to changes in the filesystem).</p>
</td></tr>
<tr><td><code id="dirCreator_+3A_...">...</code></td>
<td>
<p>Currently unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A function that creates directories based on the information returned
by the client.
</p>

<hr>
<h2 id='dirGetter'>Create a function that updates a folder tree based on the given restrictions</h2><span id='topic+dirGetter'></span>

<h3>Description</h3>

<p>This functions returns a new function that will handle updating the folder
tree. It is the folder equivalent of <code><a href="#topic+fileGetter">fileGetter()</a></code> but functions
slightly different as it needs to handle expanded branches of the folder
hierarchy rather than just the content of a single directory at a time. The
returned function takes a representation of a folder hierarchy along with the
root to where it belongs and updates the tree to correspond with the current
state of the file system, without altering expansions etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dirGetter(roots, restrictions, filetypes, hidden = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dirGetter_+3A_roots">roots</code></td>
<td>
<p>A named vector of absolute filepaths or a function returning a
named vector of absolute filepaths (the latter is useful if the volumes
should adapt to changes in the filesystem).</p>
</td></tr>
<tr><td><code id="dirGetter_+3A_restrictions">restrictions</code></td>
<td>
<p>A vector of directories within the root that should be
filtered out of the results</p>
</td></tr>
<tr><td><code id="dirGetter_+3A_filetypes">filetypes</code></td>
<td>
<p>Currently unused</p>
</td></tr>
<tr><td><code id="dirGetter_+3A_hidden">hidden</code></td>
<td>
<p>A logical value specifying whether hidden files should be
returned or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A function taking a list representation of a folder hierarchy along
with the name of the root where it starts. See <code><a href="#topic+traverseDirs">traverseDirs()</a></code> for
a description of the format for the list representation.
</p>

<hr>
<h2 id='fileGetter'>Create a function that returns fileinfo according to the given restrictions</h2><span id='topic+fileGetter'></span>

<h3>Description</h3>

<p>This functions returns a new function that can generate file information to
be send to a shiny app based on a path relative to the given root. The
function is secure in the sense that it prevents access to files outside of
the given root directory as well as to subdirectories matching the ones given
in restrictions. Furthermore can the output be filtered to only contain
certain filetypes using the filter parameter and hidden files can be toggled
with the hidden parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fileGetter(roots, restrictions, filetypes, pattern, hidden = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fileGetter_+3A_roots">roots</code></td>
<td>
<p>A named vector of absolute filepaths or a function returning a
named vector of absolute filepaths (the latter is useful if the volumes
should adapt to changes in the filesystem).</p>
</td></tr>
<tr><td><code id="fileGetter_+3A_restrictions">restrictions</code></td>
<td>
<p>A vector of directories within the root that should be
filtered out of the results</p>
</td></tr>
<tr><td><code id="fileGetter_+3A_filetypes">filetypes</code></td>
<td>
<p>A character vector of file extensions (without dot in front
i.e. 'txt' not '.txt') to include in the output. Use the empty string to
include files with no extension. If not set all file types will be included</p>
</td></tr>
<tr><td><code id="fileGetter_+3A_pattern">pattern</code></td>
<td>
<p>A regular expression used to select files to show. See
<code><a href="base.html#topic+grep">base::grepl()</a></code> for additional discussion on how to
construct a regular expression (e.g., &quot;log.*\\.txt&quot;)</p>
</td></tr>
<tr><td><code id="fileGetter_+3A_hidden">hidden</code></td>
<td>
<p>A logical value specifying whether hidden files should be
returned or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A function taking a single path relative to the specified root, and
returns a list of files to be passed on to shiny
</p>

<hr>
<h2 id='formatFiletype'>Formats the value of the filetype argument</h2><span id='topic+formatFiletype'></span>

<h3>Description</h3>

<p>This function is intended to format the filetype argument of
<code><a href="#topic+shinySaveButton">shinySaveButton()</a></code> into a json string representation, so that it
can be attached to the button.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formatFiletype(filetype)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="formatFiletype_+3A_filetype">filetype</code></td>
<td>
<p>A named list of file extensions or NULL or NA</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string describing the input value in json format
</p>

<hr>
<h2 id='getVolumes'>Get a list of available volumes</h2><span id='topic+getVolumes'></span>

<h3>Description</h3>

<p>This function is intended as an input to the roots parameter in
<code><a href="#topic+fileGetter">fileGetter()</a></code> and <code><a href="#topic+shinyFileChoose">shinyFileChoose()</a></code>. It returns a
function that returns a named vector of available volumes on the system. This
construction makes it dynamic so that a shinyFiles instance reflects new
volumes as they get added (e.g. usb drives). The function takes a single
argument giving names of volumes the developer wants removed from the return
value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVolumes(exclude)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getVolumes_+3A_exclude">exclude</code></td>
<td>
<p>A vector of volume names to be excluded from the return value</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function is OS specific and looks for volumes/drives in different places
depending on the system on which shiny is running.
</p>

<dl>
<dt>Windows</dt><dd><p>Returns all drives mapped to a letter</p>
</dd>
<dt>Mac OSX</dt><dd><p>Looks in /Volumes/ and lists the directories therein</p>
</dd>
<dt>Linux</dt><dd><p>Returns the system root</p>
</dd>
</dl>

<p>If the function does not recognize the system under which it is running it
will throw an error
</p>


<h3>Value</h3>

<p>A function returning a named vector of available volumes
</p>

<hr>
<h2 id='shinyFiles-buttons'>Create a button to summon a shinyFiles dialog</h2><span id='topic+shinyFiles-buttons'></span><span id='topic+shinyFilesButton'></span><span id='topic+shinyFilesLink'></span><span id='topic+shinyDirButton'></span><span id='topic+shinyDirLink'></span><span id='topic+shinySaveButton'></span><span id='topic+shinySaveLink'></span>

<h3>Description</h3>

<p>This function adds the required html markup for the client to access the file
system. The end result will be the appearance of a button on the webpage that
summons one of the shinyFiles dialog boxes. The last position in the file
system is automatically remembered between instances, but not shared between
several shinyFiles buttons. For a button to have any functionality it must
have a matching observer on the server side. shinyFilesButton() is matched
with shinyFileChoose() and shinyDirButton with shinyDirChoose(). The id
argument of two matching calls must be the same. See
<code><a href="#topic+shinyFiles-observers">shinyFiles-observers()</a></code> on how to handle client input on the
server side.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shinyFilesButton(
  id,
  label,
  title,
  multiple,
  buttonType = "default",
  class = NULL,
  icon = NULL,
  style = NULL,
  viewtype = "detail",
  ...
)

shinyFilesLink(
  id,
  label,
  title,
  multiple,
  class = NULL,
  icon = NULL,
  style = NULL,
  viewtype = "detail",
  ...
)

shinyDirButton(
  id,
  label,
  title,
  buttonType = "default",
  class = NULL,
  icon = NULL,
  style = NULL,
  ...
)

shinyDirLink(id, label, title, class = NULL, icon = NULL, style = NULL, ...)

shinySaveButton(
  id,
  label,
  title,
  filename = "",
  filetype,
  buttonType = "default",
  class = NULL,
  icon = NULL,
  style = NULL,
  viewtype = "detail",
  ...
)

shinySaveLink(
  id,
  label,
  title,
  filename = "",
  filetype,
  class = NULL,
  icon = NULL,
  style = NULL,
  viewtype = "detail",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shinyFiles-buttons_+3A_id">id</code></td>
<td>
<p>The id matching the <code><a href="#topic+shinyFileChoose">shinyFileChoose()</a></code></p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_label">label</code></td>
<td>
<p>The text that should appear on the button</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_title">title</code></td>
<td>
<p>The heading of the dialog box that appears when the button is
pressed</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_multiple">multiple</code></td>
<td>
<p>A logical indicating whether or not it should be possible to
select multiple files</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_buttontype">buttonType</code></td>
<td>
<p>The Bootstrap button markup used to colour the button.
Defaults to 'default' for a neutral appearance but can be changed for another
look. The value will be pasted with 'btn-' and added as class.</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_class">class</code></td>
<td>
<p>Additional classes added to the button</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_icon">icon</code></td>
<td>
<p>An optional <a href="https://shiny.rstudio.com/reference/shiny/latest/icon.html">icon</a> to appear on the button.</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_style">style</code></td>
<td>
<p>Additional styling added to the button (e.g., &quot;margin-top: 25px;&quot;)</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_viewtype">viewtype</code></td>
<td>
<p>View type to use in the file browser. One of &quot;detail&quot; (default), &quot;list&quot;, or &quot;icon&quot;</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_...">...</code></td>
<td>
<p>Named attributes to be applied to the button or link (e.g., 'onclick')</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_filename">filename</code></td>
<td>
<p>A predefined filename to be filed in. Can be modified by the
user during saving.</p>
</td></tr>
<tr><td><code id="shinyFiles-buttons_+3A_filetype">filetype</code></td>
<td>
<p>A named list of file extensions. The name of each element
gives the name of the filetype and the content of the element the possible
extensions e.g. <code>list(picture=c('jpg', 'jpeg'))</code>. The first extension
will be used as default if it is not supplied by the user.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Selecting files</strong>
</p>
<p>When a user selects one or several files the corresponding input variable is
set to a list containing a character vector for each file. The character
vectors gives the traversal route from the root to the selected file(s). The
reason it does not give a path as a string is that the client has no
knowledge of the file system on the server and can therefore not ensure
proper formatting. The <code><a href="#topic+parseFilePaths">parseFilePaths()</a></code> function can be used on
the server to format the input variable into a format similar to that
returned by <code><a href="shiny.html#topic+fileInput">shiny::fileInput()</a></code>.
</p>
<p><strong>Selecting folders</strong>
</p>
<p>When a folder is selected it will also be available in its respective input
variable as a list giving the traversal route to the selected folder. To
properly format it, feed it into <code><a href="#topic+parseDirPath">parseDirPath()</a></code> and a string with
the full folder path will be returned.
</p>
<p><strong>Creating files (saving)</strong>
</p>
<p>When a new filename is created it will become available in the respective
input variable and can be formatted with <code><a href="#topic+parseSavePath">parseSavePath()</a></code> into a
data.frame reminiscent that returned by fileInput. There is no size column
and the type is only present if the filetype argument is used in
<code>shinySaveButton</code>. In that case it will be the name of the chosen type
(not the extension).
</p>
<p><strong>Manual markup</strong>
</p>
<p>For users wanting to design their html markup manually it is very easy to add
a shinyFiles button. The only markup required is:
</p>
<p><em>shinyFilesButton</em>
</p>
<p><code style="white-space: pre;">&#8288;&lt;button id="inputId" type="button" class="shinyFiles btn btn-default" data-title="title" data-selecttype="single"|"multiple"&gt;label&lt;/button&gt;&#8288;</code>
</p>
<p><em>shinyDirButton</em>
</p>
<p><code style="white-space: pre;">&#8288;&lt;button id="inputId" type="button" class="shinyDirectories btn-default" data-title="title"&gt;label&lt;/button&gt;&#8288;</code>
</p>
<p><em>shinySaveButton</em>
</p>
<p><code>&lt;button id="inputId" type="button" class="shinySave btn-default" data-title="title" data-filetype="[{name: 'type1', ext: ['txt']}, {name: 'type2', ext: ['exe', 'bat']}]"&gt;label&lt;/button&gt;</code>
</p>
<p>where the id tag matches the inputId parameter, the data-title tag matches
the title parameter, the data-selecttype is either &quot;single&quot; or &quot;multiple&quot;
(the non-logical form of the multiple parameter) and the internal textnode
matches the label parameter. The data-filetype tag is a bit more involved as
it is a json formatted array of objects with the properties 'name' and 'ext'.
'name' gives the name of the filetype as a string and 'ext' the allowed
extensions as an array of strings. The non-exported
<code><a href="#topic+formatFiletype">formatFiletype()</a></code> function can help convert from a named R list
into the string representation. In the example above &quot;btn-default&quot; is used as
button styling, but this can be changed to any other Bootstrap style.
</p>
<p>Apart from this the html document should link to a script with the
following path 'sF/shinyFiles.js' and a stylesheet with the following path
'sF/styles.css'.
</p>
<p>The markup is bootstrap compliant so if the bootstrap css is used in the page
the look will fit right in. There is nothing that hinders the developer from
ignoring bootstrap altogether and designing the visuals themselves. The only
caveat being that the glyphs used in the menu buttons are bundled with
bootstrap. Use the css ::after pseudoclasses to add alternative content to
these buttons. Additional filetype specific icons can be added with css using
the following style:
</p>
<pre>
.sF-file .sF-file-icon .yourFileExtension{
    content: url(path/to/16x16/pixel/png);
}
.sF-fileList.sF-icons .sF-file .sF-file-icon .yourFileExtension{
  content: url(path/to/32x32/pixel/png);
}
</pre>
<p>If no large version is specified the small version gets upscaled.
</p>
<p><strong>Client side events</strong>
</p>
<p>If the shiny app uses custom Javascript it is possible to react to selections
directly from the javascript. Once a selection has been made, the button will
fire the event 'selection' and pass the selection data along with the event.
To listen for this event you simple add:
</p>
<pre>
$(button).on('selection', function(event, path) {
  // Do something with the paths here
})
</pre>
<p>In the same way, when a file is saved, the save button will fire the event
'save' and pass the file path along with the event. To listen for this event
you can use:
</p>
<pre>
$(button).on('save', function(event, path) {
  // Do something with the path here
})
</pre>
<p>Moreover, a 'cancel' event is fired when a user dismisses a ShinyFiles dialog
box. In that case, no path is passed on.
</p>
<p>Outside events the current selection is available as an object bound to the
button and can be accessed at any time:
</p>
<pre>
// For a shinyFilesButton
$(button).data('files')

// For a shinyDirButton
$(button).data('directory')

// For a shinySaveButton
$(button).data('file')
</pre>


<h3>Value</h3>

<p>This function is called for its side effects
</p>


<h3>References</h3>

<p>The file icons used in the file system navigator is taken from
FatCows Farm-Fresh Web Icons (<a href="https://www.fatcow.com/free-icons">https://www.fatcow.com/free-icons</a>)
</p>


<h3>See Also</h3>

<p>Other shinyFiles: 
<code><a href="#topic+shinyFiles-observers">shinyFiles-observers</a></code>,
<code><a href="#topic+shinyFiles-parsers">shinyFiles-parsers</a></code>,
<code><a href="#topic+shinyFilesExample">shinyFilesExample</a>()</code>
</p>

<hr>
<h2 id='shinyFiles-observers'>Create a connection to the server side filesystem</h2><span id='topic+shinyFiles-observers'></span><span id='topic+shinyFileChoose'></span><span id='topic+shinyDirChoose'></span><span id='topic+shinyFileSave'></span>

<h3>Description</h3>

<p>These function sets up the required connection to the client in order for the
user to navigate the filesystem. For this to work a matching button should be
present in the html, either by using one of the button generating functions
or adding it manually. See <code><a href="#topic+shinyFiles-buttons">shinyFiles-buttons()</a></code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shinyFileChoose(
  input,
  id,
  updateFreq = 0,
  session = getSession(),
  defaultRoot = NULL,
  defaultPath = "",
  ...
)

shinyDirChoose(
  input,
  id,
  updateFreq = 0,
  session = getSession(),
  defaultPath = "",
  defaultRoot = NULL,
  allowDirCreate = TRUE,
  ...
)

shinyFileSave(
  input,
  id,
  updateFreq = 0,
  session = getSession(),
  defaultPath = "",
  defaultRoot = NULL,
  allowDirCreate = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shinyFiles-observers_+3A_input">input</code></td>
<td>
<p>The input object of the <code>shinyServer()</code> call (usually
<code>input</code>)</p>
</td></tr>
<tr><td><code id="shinyFiles-observers_+3A_id">id</code></td>
<td>
<p>The same ID as used in the matching call to
<code>shinyFilesButton</code> or as the id attribute of the button, in case of a
manually defined html. This id will also define the id of the file choice in
the input variable</p>
</td></tr>
<tr><td><code id="shinyFiles-observers_+3A_updatefreq">updateFreq</code></td>
<td>
<p>The time in milliseconds between file system lookups. This
determines the responsiveness to changes in the filesystem (e.g. addition of
files or drives). For the default value (0) changes in the filesystem are
shown only when a shinyFiles button is clicked again</p>
</td></tr>
<tr><td><code id="shinyFiles-observers_+3A_session">session</code></td>
<td>
<p>The session object of the shinyServer call (usually
<code>session</code>).</p>
</td></tr>
<tr><td><code id="shinyFiles-observers_+3A_defaultroot">defaultRoot</code></td>
<td>
<p>The default root to use. For instance if
<code>roots = c('wd' = '.', 'home', '/home')</code> then <code>defaultRoot</code>
can be either <code>'wd'</code> or <code>'home'</code>.</p>
</td></tr>
<tr><td><code id="shinyFiles-observers_+3A_defaultpath">defaultPath</code></td>
<td>
<p>The default relative path specified given the <code>defaultRoot</code>.</p>
</td></tr>
<tr><td><code id="shinyFiles-observers_+3A_...">...</code></td>
<td>
<p>Arguments to be passed on to <code><a href="#topic+fileGetter">fileGetter()</a></code> or <code><a href="#topic+dirGetter">dirGetter()</a></code>.</p>
</td></tr>
<tr><td><code id="shinyFiles-observers_+3A_allowdircreate">allowDirCreate</code></td>
<td>
<p>Logical that indicates if creating new directories by the user is allowed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Restrictions on the access rights of the client can be given in several ways.
The root parameter specifies the starting position for the filesystem as
presented to the client. This means that the client can only navigate in
subdirectories of the root. Paths passed of to the <code>restrictions</code>
parameter will not show up in the client view, and it is impossible to
navigate into these subdirectories. The <code>filetypes</code> parameter takes a
vector of file extensions to filter the output on, so that the client is
only presented with these filetypes. The <code>hidden</code> parameter toggles
whether hidden files should be visible or not. Whenever a file or folder
choice is made the resulting files/folder will be accessible in the input
variable with the id given in the parameters. This value should probable be
run through a call to one of the parser (<code><a href="#topic+shinyFiles-parsers">shinyFiles-parsers()</a></code>) in
order to get well formatted paths to work with.
</p>


<h3>Value</h3>

<p>A reactive observer that takes care of the server side logic of the
filesystem connection.
</p>


<h3>Note</h3>

<p>The syntax for this version has changed with version 0.4.0. Prior to
that version the output of <code>shinyFileChoose()</code> should be assigned to the
output object. This is no longer the case and doing so will result in an
error. In newer versions the function returns an observer which can be
ignored for the most part, or assigned to a variable if there needs to be
interactions with it later on.
</p>


<h3>See Also</h3>

<p>Other shinyFiles: 
<code><a href="#topic+shinyFiles-buttons">shinyFiles-buttons</a></code>,
<code><a href="#topic+shinyFiles-parsers">shinyFiles-parsers</a></code>,
<code><a href="#topic+shinyFilesExample">shinyFilesExample</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# File selections
ui &lt;- shinyUI(bootstrapPage(
  shinyFilesButton('files', 'File select', 'Please select a file', FALSE)
))
server &lt;- shinyServer(function(input, output) {
  shinyFileChoose(input, 'files', roots=c(wd='.'), filetypes=c('', 'txt'),
                  defaultPath='', defaultRoot='wd')
})

runApp(list(
  ui=ui,
  server=server
))

## End(Not run)

## Not run: 
# Folder selections
ui &lt;- shinyUI(bootstrapPage(
  shinyDirButton('folder', 'Folder select', 'Please select a folder', FALSE)
))
server &lt;- shinyServer(function(input, output) {
  shinyDirChoose(input, 'folder', roots=c(wd='.'), filetypes=c('', 'txt'))
})

runApp(list(
  ui=ui,
  server=server
))

## End(Not run)

## Not run: 
# File selections
ui &lt;- shinyUI(bootstrapPage(
  shinySaveButton("save", "Save", "Save as...")
))
server &lt;- shinyServer(function(input, output) {
  shinyFileSave(input, "save", roots = c(wd = "."))
})

runApp(list(
  ui = ui,
  server = server
))

## End(Not run)

</code></pre>

<hr>
<h2 id='shinyFiles-parsers'>Convert the output of a selection to platform specific path(s)</h2><span id='topic+shinyFiles-parsers'></span><span id='topic+parseFilePaths'></span><span id='topic+parseDirPath'></span><span id='topic+parseSavePath'></span>

<h3>Description</h3>

<p>This function takes the value of a shinyFiles button input variable and
converts it to be easier to work with on the server side. In the case of file
selections  and saving the input variable is converted to a data frame (using
<code>parseFilePaths()</code> or <code style="white-space: pre;">&#8288;parseSavePath() respectively&#8288;</code>) of the same
format as that provided by <code><a href="shiny.html#topic+fileInput">shiny::fileInput()</a></code>. The only caveat
here is that the MIME type cannot be inferred in file selections so this will
always be an empty string and new files doesn't have a size so this is left
out with file saving. In the case of folder selection the input variable is
converted to a string (using <code>parseDirPath()</code>) giving the absolute path
to the selected folder.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseFilePaths(roots, selection)

parseDirPath(roots, selection)

parseSavePath(roots, selection)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shinyFiles-parsers_+3A_roots">roots</code></td>
<td>
<p>The path to the root as specified in the <code>shinyFileChoose()</code>
call in <code>shinyServer()</code></p>
</td></tr>
<tr><td><code id="shinyFiles-parsers_+3A_selection">selection</code></td>
<td>
<p>The corresponding input variable to be parsed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The use of <code>parseFilePaths</code> makes it easy to substitute fileInput and
shinyFiles in your code as code that relies on the values of a file selection
doesn't have to change.
</p>


<h3>Value</h3>

<p>A data frame matching the format of <code><a href="shiny.html#topic+fileInput">shiny::fileInput()</a></code>
</p>


<h3>See Also</h3>

<p>Other shinyFiles: 
<code><a href="#topic+shinyFiles-buttons">shinyFiles-buttons</a></code>,
<code><a href="#topic+shinyFiles-observers">shinyFiles-observers</a></code>,
<code><a href="#topic+shinyFilesExample">shinyFilesExample</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ui &lt;- shinyUI(bootstrapPage(
  shinyFilesButton('files', 'File select', 'Please select a file', FALSE),
  verbatimTextOutput('rawInputValue'),
  verbatimTextOutput('filepaths')
))
server &lt;- shinyServer(function(input, output) {
  roots = c(wd='.')
  shinyFileChoose(input, 'files', roots=roots, filetypes=c('', 'txt'))
  output$rawInputValue &lt;- renderPrint({str(input$files)})
  output$filepaths &lt;- renderPrint({parseFilePaths(roots, input$files)})
})

runApp(list(
  ui=ui,
  server=server
))

## End(Not run)

</code></pre>

<hr>
<h2 id='shinyFilesExample'>Run a simple example app using the shinyFiles functionality</h2><span id='topic+shinyFilesExample'></span>

<h3>Description</h3>

<p>When the function is invoked a shiny app is started showing a very simple
setup using shinyFiles. A button summons the dialog box allowing the user to
navigate the R installation directory. To showcase the restrictions parameter
the base package location has been hidden, and is thus inaccessible. A panel
besides the button shows how the user selection is made accessible to the
server after parsing with <code><a href="#topic+parseFilePaths">parseFilePaths()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shinyFilesExample()
</code></pre>


<h3>See Also</h3>

<p>Other shinyFiles: 
<code><a href="#topic+shinyFiles-buttons">shinyFiles-buttons</a></code>,
<code><a href="#topic+shinyFiles-observers">shinyFiles-observers</a></code>,
<code><a href="#topic+shinyFiles-parsers">shinyFiles-parsers</a></code>
</p>

<hr>
<h2 id='traverseDirs'>Traverse and update a tree representing the file system</h2><span id='topic+traverseDirs'></span>

<h3>Description</h3>

<p>This function takes a tree representing a part of the file system and updates
it to reflect the current state of the file system as well as the settings
for each node. Children (contained folders) are recursed into if the parents
expanded element is set to TRUE, no matter if children are currently present.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>traverseDirs(tree, root, restrictions, hidden)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="traverseDirs_+3A_tree">tree</code></td>
<td>
<p>A list representing the tree structure of the file system to
traverse. Each element should at least contain the elements 'name' and
'expanded'. The elements 'empty' and 'children' will be created or updates if
they exist.</p>
</td></tr>
<tr><td><code id="traverseDirs_+3A_root">root</code></td>
<td>
<p>A string with the location of the root folder for the tree</p>
</td></tr>
<tr><td><code id="traverseDirs_+3A_restrictions">restrictions</code></td>
<td>
<p>A vector of directories within the root that should be
filtered out of the results</p>
</td></tr>
<tr><td><code id="traverseDirs_+3A_hidden">hidden</code></td>
<td>
<p>A logical value specifying whether hidden folders should be
returned or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the same format as 'tree', but with updated values to
reflect the current file system state.
</p>

<hr>
<h2 id='updateChildren'>Update the children element to reflect current state</h2><span id='topic+updateChildren'></span>

<h3>Description</h3>

<p>This function create new entries for new folders and remove entries for no
longer existing folders, while keeping the state of transient folders in the
children element of the tree structure. The function does not recurse into
the folders, but merely creates a shell that traverseDirs can take as input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateChildren(oldChildren, currentChildren)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="updateChildren_+3A_oldchildren">oldChildren</code></td>
<td>
<p>A list of children folders from the parent$children
element of tree in <code><a href="#topic+traverseDirs">traverseDirs()</a></code></p>
</td></tr>
<tr><td><code id="updateChildren_+3A_currentchildren">currentChildren</code></td>
<td>
<p>A vector of names of the folders that are currently
present in the parent of oldChildren</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An updated list equal in format to oldChildren
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
