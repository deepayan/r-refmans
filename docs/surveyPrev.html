<!DOCTYPE html><html><head><title>Help for package surveyPrev</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {surveyPrev}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adminInfo'><p>Get admin information</p></a></li>
<li><a href='#aggPopulation'><p>Get population information</p></a></li>
<li><a href='#aggSurveyWeight'><p>Get survey weight by admin levels</p></a></li>
<li><a href='#ch_allvac_either'><p>CH_VACS_C_BAS</p>
Children with all 8 basic vaccinations (age 12-23)
&quot;All basic vaccinations according to either source&quot;</a></li>
<li><a href='#ch_diar_ors_rhf'><p>CH_DIAT_C_ORT</p>
KR  Diarrhea treatment (Children under five with diarrhea treated with either ORS or RHF)</a></li>
<li><a href='#ch_meas_either'><p>CH_VACC_C_MSL</p>
MCV: Measles
Measles vaccination received
Percentage of children (age 12-23)
ch_meas_either   CH_VAC.do  KR
&quot;Measles vaccination according to either source&quot;</a></li>
<li><a href='#ch_novac_either'><p>CH_VACS_C_NON</p>
KR
Children with no vaccinations (age 12-23)</a></li>
<li><a href='#ch_pent1_either'><p>CH_VACC_C_DP1</p>
KR
Percentage of children (age 12-23)
Pentavalent 1rd dose vaccination according to either source&quot;</a></li>
<li><a href='#ch_pent3_either'><p>CH_VACC_C_DP3</p>
DPT3  KR
Percentage of children (age 12-23)
Pentavalent 3rd dose vaccination according to either source&quot;</a></li>
<li><a href='#clusterInfo'><p>Get cluster information</p></a></li>
<li><a href='#clusterModel'><p>Calculate cluster model estimates using beta binomial model</p></a></li>
<li><a href='#directEST'><p>Calculate direct estimates</p></a></li>
<li><a href='#fhModel'><p>Calculate smoothed direct estimates</p></a></li>
<li><a href='#fp_cruse_mod'><p>FP_CUSM_W_MOD</p>
IRdata
Modern contraceptive prevalence rate (Married women currently using any modern method of contraception)</a></li>
<li><a href='#fp_unmet_tot'><p>FP_NADA_W_UNT</p>
#unmet_family  IRdata
women with an unmet need for family planning for spacing and limiting</a></li>
<li><a href='#get_api_table'><p>Function to obtain subnational estimates from DHS API</p></a></li>
<li><a href='#getDHSdata'><p>Download DHS survey data</p></a></li>
<li><a href='#getDHSgeo'><p>Download DHS geo data</p></a></li>
<li><a href='#getDHSindicator'><p>Process DHS data</p></a></li>
<li><a href='#getUR'><p>Function to threshold population raster to obtain urban/rural fractions by Admin1 and Admin2 areas</p></a></li>
<li><a href='#hv_hiv_pos'><p>HA_HIVP_W_HIV</p>
hv_hiv_pos
&quot;HIV positive test result&quot;</a></li>
<li><a href='#intervalPlot'><p>Get scatter plot for any two model results</p></a></li>
<li><a href='#ml_hhaccess'><p>ML_ITNA_P_ACC</p>
Households with at least one insecticide-treated mosquito net (ITN) for every two persons who stayed in the household the previous night
Persons with access to an insecticide-treated mosquito net (ITN)
ML_NETS_HH.do  HR
Households with &gt;1 ITN per 2 household members
Percentage of households with at least one ITN for every 2 persons who stayed in the household last night</a></li>
<li><a href='#NMR'><p>CM_ECMR_C_NNR</p>
nmr CM_ECMR_C_NNR BR (not from dhs github)
Neonatal mortality rate !!!!!!</a></li>
<li><a href='#nt_ch_any_anem'><p>CN_ANMC_C_ANY</p>
Children with any anemia
&quot;Any anemia - child 6-59 months&quot; PR NT_CH_NUT.do
Children under five with any anemia</a></li>
<li><a href='#nt_ch_stunt'><p>CN_NUTS_C_HA2</p>
stunting
Children stunted
NT_CH_NUT.do PR &quot;Stunted child under 5 years&quot;
Stunting rate (Prevalence of stunted (HAZ &lt; -2) children under five (0-59 months))
Percentage of children under age five stunted (below -2 standard deviations of height-for-age according to the WHO standard).</a></li>
<li><a href='#nt_ch_wast'><p>CN_NUTS_C_WH2</p>
wasting
Children wasted
NT_CH_NUT.do PR &quot;Wasted child under 5 years&quot;
Wasting rate (Prevalence of wasted (HAZ &lt; -2) children under five (0-59 months))
Percentage of children under age five with a weight-for-height z-score (WHZ) more than two standard deviations below the median WHO growth standards.</a></li>
<li><a href='#nt_ebf'><p>CN_BRFS_C_EXB</p>
Children exclusively breastfed
NT_IYCF.do KR &quot;Exclusively breastfed - last-born under 6 months&quot;
Children exclusively breastfed (Prevalence of exclusive breastfeeding of children under six months of age)</a></li>
<li><a href='#nt_wm_any_anem'><p>AN_ANEM_W_ANY</p>
womananemia
nt_wm_any_anem &quot;Any anemia - women&quot;  NT_WM_NUT.do
Percentage of women aged 15-49 classified as having any anemia</a></li>
<li><a href='#nt_wm_thin'><p>AN_NUTS_W_THN</p>
Women who are thin according to BMI (&lt;18.5)
NT_WM_NUT.do &quot;Thin BMI - women&quot; IR !!!!!!!!
Underweight (Prevalence of underweight (BMI &lt; 18.5) women of reproductive age)</a></li>
<li><a href='#ph_sani_basic'><p>WS_TLET_P_BAS</p>
Population with access to a basic sanitation service WS_TLET_P_BAS in DHS API
PH_SANI.do  PR
ph_sani_basic &quot;Basic sanitation facility&quot;</a></li>
<li><a href='#ph_sani_improve'><p>WS_TLET_H_IMP</p>
Percentage of households using an improved sanitation facility
PH_SANI.do  PR
ph_sani_improve &quot;Access to improved sanitation&quot; country-specific</a></li>
<li><a href='#rh_anc_4vs'><p>RH_ANCN_W_N4P</p>
ancvisit4+ RH_ANCN_W_N4P  IR
Antenatal visits for pregnancy: 4+ visits</a></li>
<li><a href='#rh_del_pvskill'><p>RH_DELA_C_SKP</p>
IR or BR
Assistance during delivery from a skilled provider</a></li>
<li><a href='#scatterPlot'><p>Get scatter plot for any two model results</p></a></li>
<li><a href='#surveyPrevIndicators'><p>Table of built-in indicators.</p></a></li>
<li><a href='#watersource_adj'><p>WS_SRCE_P_BAS</p>
Population using a basic water source
PH_WATER.do
ph_wtr_basic &quot;Basic water service&quot; PR</a></li>
<li><a href='#ZambiaAdm1'><p>Admin 1 Polygon Map for Zambia.</p></a></li>
<li><a href='#ZambiaAdm2'><p>Admin 2 Polygon Map for Zambia.</p></a></li>
<li><a href='#ZambiaPopWomen'><p>Population estimates for Women of age 15 to 49 in Zambia in 2018.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Mapping the Prevalence of Binary Indicators using Survey Data in
Small Areas</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a pipeline to perform small area estimation and prevalence mapping of binary indicators using health and demographic survey data, described in Fuglstad et al. (2022) &lt;<a href="https://doi.org/10.48550%2FarXiv.2110.09576">doi:10.48550/arXiv.2110.09576</a>&gt; and Wakefield et al. (2020) &lt;<a href="https://doi.org/10.1111%2Finsr.12400">doi:10.1111/insr.12400</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/richardli/surveyPrev">https://github.com/richardli/surveyPrev</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/richardli/surveyPrev/issues">https://github.com/richardli/surveyPrev/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>survey, stats, ggplot2, rdhs, SUMMER, dplyr, labelled,
sjlabelled, naniar, raster, sp, spdep, stringr, tidyverse,
data.table, sf, matrixStats</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Additional_repositories:</td>
<td><a href="https://inla.r-inla-download.org/R/testing/">https://inla.r-inla-download.org/R/testing/</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>INLA, knitr, rmarkdown, R.rsp, kableExtra, geodata,
patchwork, tidyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>R.rsp, knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Config/build/clean-inst-doc:</td>
<td>FALSE</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-09 17:25:12 UTC; qianyu</td>
</tr>
<tr>
<td>Author:</td>
<td>Qianyu Dong [cre, aut],
  Zehang R Li [aut],
  Yunhan Wu [aut],
  Andrea Boskovic [aut],
  Jon Wakefield [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Qianyu Dong &lt;qdong14@ucsc.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-10 19:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='adminInfo'>Get admin information</h2><span id='topic+adminInfo'></span>

<h3>Description</h3>

<p>This function get admin information including name, character, population and unban/rural proportion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adminInfo(
  poly.adm,
  by.adm,
  admin,
  by.adm.upper = NULL,
  agg.pop = NULL,
  proportion = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adminInfo_+3A_poly.adm">poly.adm</code></td>
<td>
<p>spatial polygons dataframe for Admin levels such as Admin 1 or Admin 2. This object can be either an sp::SpatialPolygonsDataFrame object or an sf object.</p>
</td></tr>
<tr><td><code id="adminInfo_+3A_by.adm">by.adm</code></td>
<td>
<p>the column name of column for Admin names for desired output Admin level, can be such as &quot;NAME_1&quot; or &quot;NAME_2&quot;.</p>
</td></tr>
<tr><td><code id="adminInfo_+3A_admin">admin</code></td>
<td>
<p>desired admin level for the output, can be 1 or 2.</p>
</td></tr>
<tr><td><code id="adminInfo_+3A_by.adm.upper">by.adm.upper</code></td>
<td>
<p>the column name of column for Admin names for upper level of your desired output Admin level when admin=2, can be &quot;NAME_1&quot; when by.adm=&quot;NAME_2&quot;.</p>
</td></tr>
<tr><td><code id="adminInfo_+3A_agg.pop">agg.pop</code></td>
<td>
<p>data frame of aggregated poplulation from aggPopulation function. It should have two columns: &quot;admin2.name.full&quot; and &quot;population&quot;.</p>
</td></tr>
<tr><td><code id="adminInfo_+3A_proportion">proportion</code></td>
<td>
<p>data frame of urban/rural proportions. For admin1, is should have two columns: &quot;admin1.name&quot; and &quot;urban&quot;. For admin2, it should have three columns: &quot;admin1.name&quot;, &quot;admin2.name&quot;, and &quot;urban&quot;, in order to avoid issues merging datasets with duplicated admin2 names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the 1. dataframe that contains admin 1 and admin 2 information and coordinates for each cluster and 2. Adjacency matrix.
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# For sp::SpatialPolygonsDataFrame object
data(ZambiaAdm1)
class(ZambiaAdm1)
info &lt;- adminInfo(poly.adm=ZambiaAdm1, admin = 1, by.adm="NAME_1")
data(ZambiaAdm2)
class(ZambiaAdm2)
info2 &lt;- adminInfo(poly.adm=ZambiaAdm2, admin = 2,by.adm="NAME_2",by.adm.upper="NAME_1")

# For sf object
geo.sf &lt;- sf::st_as_sf(ZambiaAdm1)
info &lt;- adminInfo(poly.adm=geo.sf, admin = 1,by.adm="NAME_1")

# To include the population information
data(ZambiaPopWomen)
info &lt;- adminInfo(poly.adm = ZambiaAdm1,
                  admin = 1,by.adm="NAME_1",
                  agg.pop = ZambiaPopWomen$admin1_pop,
                  proportion = ZambiaPopWomen$admin1_urban )
</code></pre>

<hr>
<h2 id='aggPopulation'>Get population information</h2><span id='topic+aggPopulation'></span>

<h3>Description</h3>

<p>This function aggregate population to particular admin levels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggPopulation(tiff, fact = 10, poly.adm, by.adm, by.adm.upper = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aggPopulation_+3A_tiff">tiff</code></td>
<td>
<p>spatial raster of population estimates.</p>
</td></tr>
<tr><td><code id="aggPopulation_+3A_fact">fact</code></td>
<td>
<p>factor to aggregate pixels. Default to be 10, i.e., the population estimates will be saved on 1km by 1km grids if the input is 100m by 100m tiff. Larger values of aggregation factor improves the computation speed, but can introduce more errors when the regions defined by the polygon are small in size.</p>
</td></tr>
<tr><td><code id="aggPopulation_+3A_poly.adm">poly.adm</code></td>
<td>
<p>spatial polygons dataframe.</p>
</td></tr>
<tr><td><code id="aggPopulation_+3A_by.adm">by.adm</code></td>
<td>
<p>the column name of column for Admin names for desired output Admin level, can be such as &quot;NAME_1&quot; or &quot;NAME_2&quot;.</p>
</td></tr>
<tr><td><code id="aggPopulation_+3A_by.adm.upper">by.adm.upper</code></td>
<td>
<p>the column name of column for Admin names for upper level of your desired output Admin level when admin=2, can be &quot;NAME_1&quot; when by.adm=&quot;NAME_2&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contain district name and population for given  tiff files and polygons of admin level
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(raster)

# Download and find total population in age group 0 to 12 months
pre &lt;- "https://data.worldpop.org/GIS/AgeSex_structures/"
f &lt;- paste0(pre, "Global_2000_2020/2018/ZMB/zmb_f_0_2018.tif")
m &lt;- paste0(pre, "Global_2000_2020/2018/ZMB/zmb_m_0_2018.tif")
pop_f_0 &lt;- raster(f)
pop_m_0 &lt;- raster(m)

pop_raster &lt;- pop_f_0 + pop_m_0

# admin1 population
agg.pop1 &lt;- aggPopulation(
  tiff = pop_raster,
  poly.adm = ZambiaAdm1,
  by.adm = "NAME_1")


# admin2 population
agg.pop2 &lt;- aggPopulation(
  tiff = ZambiaPopWomen_raster,
  poly.adm = ZambiaAdm2,
  by.adm = "NAME_2",
  by.adm.upper="NAME_1")


## End(Not run)

</code></pre>

<hr>
<h2 id='aggSurveyWeight'>Get survey weight by admin levels</h2><span id='topic+aggSurveyWeight'></span>

<h3>Description</h3>

<p>This function aggregate survey weight to particular admin levels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aggSurveyWeight(
  data,
  cluster.info,
  admin,
  poly.adm = NULL,
  by.adm = NULL,
  by.adm.upper = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aggSurveyWeight_+3A_data">data</code></td>
<td>
<p>dataframe that contains the indicator of interests, output of getDHSindicator function</p>
</td></tr>
<tr><td><code id="aggSurveyWeight_+3A_cluster.info">cluster.info</code></td>
<td>
<p>list that contains admin 1 and admin 2 information and coordinates for each cluster, output of clusterinfo function</p>
</td></tr>
<tr><td><code id="aggSurveyWeight_+3A_admin">admin</code></td>
<td>
<p>desired admin level for aggregation</p>
</td></tr>
<tr><td><code id="aggSurveyWeight_+3A_poly.adm">poly.adm</code></td>
<td>
<p>spatial polygons dataframe</p>
</td></tr>
<tr><td><code id="aggSurveyWeight_+3A_by.adm">by.adm</code></td>
<td>
<p>the column name of column for Admin names for desired output Admin level, can be such as &quot;NAME_1&quot; or &quot;NAME_2&quot;.</p>
</td></tr>
<tr><td><code id="aggSurveyWeight_+3A_by.adm.upper">by.adm.upper</code></td>
<td>
<p>the column name of column for Admin names for upper level of your desired output Admin level when admin=2, can be &quot;NAME_1&quot; when by.adm=&quot;NAME_2&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contain admin name and survey weight.
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# admin1 population

year &lt;- 2018
country &lt;- "Zambia"
indicator="nmr"

geo &lt;- getDHSgeo(country = country, year = year)
dhsData &lt;- getDHSdata(country = country, indicator=indicator, year = year)
data&lt;- getDHSindicator(dhsData, indicator = indicator)

poly.adm1=ZambiaAdm1
poly.adm2=ZambiaAdm2

cluster.info&lt;-clusterInfo(geo=geo, poly.adm1=poly.adm1, poly.adm2=poly.adm2,
by.adm1 = "NAME_1",by.adm2 = "NAME_2")

agg.survey1&lt;-aggSurveyWeight(data=data,cluster.info=cluster.info,admin=1)
agg.survey2&lt;-aggSurveyWeight(data=data,cluster.info=cluster.info,admin=2,
                             poly.adm = poly.adm2,  by.adm="NAME_2",
                             by.adm.upper ="NAME_1")

## End(Not run)

</code></pre>

<hr>
<h2 id='ch_allvac_either'>CH_VACS_C_BAS
Children with all 8 basic vaccinations (age 12-23)
&quot;All basic vaccinations according to either source&quot;</h2><span id='topic+ch_allvac_either'></span>

<h3>Description</h3>

<p>CH_VACS_C_BAS
Children with all 8 basic vaccinations (age 12-23)
&quot;All basic vaccinations according to either source&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_allvac_either(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ch_allvac_either_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CH_VACS_C_BAS",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ch_allvac_either)

## End(Not run)
</code></pre>

<hr>
<h2 id='ch_diar_ors_rhf'>CH_DIAT_C_ORT
KR  Diarrhea treatment (Children under five with diarrhea treated with either ORS or RHF)</h2><span id='topic+ch_diar_ors_rhf'></span>

<h3>Description</h3>

<p>CH_DIAT_C_ORT
KR  Diarrhea treatment (Children under five with diarrhea treated with either ORS or RHF)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_diar_ors_rhf(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ch_diar_ors_rhf_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CH_DIAT_C_ORT",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ch_diar_ors_rhf)

## End(Not run)
</code></pre>

<hr>
<h2 id='ch_meas_either'>CH_VACC_C_MSL
MCV: Measles
Measles vaccination received
Percentage of children (age 12-23)
ch_meas_either   CH_VAC.do  KR
&quot;Measles vaccination according to either source&quot;</h2><span id='topic+ch_meas_either'></span>

<h3>Description</h3>

<p>CH_VACC_C_MSL
MCV: Measles
Measles vaccination received
Percentage of children (age 12-23)
ch_meas_either   CH_VAC.do  KR
&quot;Measles vaccination according to either source&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_meas_either(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ch_meas_either_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CH_VACC_C_MSL",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ch_meas_either)

## End(Not run)
</code></pre>

<hr>
<h2 id='ch_novac_either'>CH_VACS_C_NON
KR
Children with no vaccinations (age 12-23)</h2><span id='topic+ch_novac_either'></span>

<h3>Description</h3>

<p>CH_VACS_C_NON
KR
Children with no vaccinations (age 12-23)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_novac_either(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ch_novac_either_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CH_VACS_C_NON",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ch_novac_either)

## End(Not run)
</code></pre>

<hr>
<h2 id='ch_pent1_either'>CH_VACC_C_DP1
KR
Percentage of children (age 12-23)
Pentavalent 1rd dose vaccination according to either source&quot;</h2><span id='topic+ch_pent1_either'></span>

<h3>Description</h3>

<p>CH_VACC_C_DP1
KR
Percentage of children (age 12-23)
Pentavalent 1rd dose vaccination according to either source&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_pent1_either(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ch_pent1_either_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CH_VACC_C_DP1",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ch_pent1_either)

## End(Not run)
</code></pre>

<hr>
<h2 id='ch_pent3_either'>CH_VACC_C_DP3
DPT3  KR
Percentage of children (age 12-23)
Pentavalent 3rd dose vaccination according to either source&quot;</h2><span id='topic+ch_pent3_either'></span>

<h3>Description</h3>

<p>CH_VACC_C_DP3
DPT3  KR
Percentage of children (age 12-23)
Pentavalent 3rd dose vaccination according to either source&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ch_pent3_either(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ch_pent3_either_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CH_VACC_C_DP3",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ch_pent3_either)

## End(Not run)
</code></pre>

<hr>
<h2 id='clusterInfo'>Get cluster information</h2><span id='topic+clusterInfo'></span>

<h3>Description</h3>

<p>This function add admin 1 and admin2 information to a paticular DHS survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clusterInfo(geo, poly.adm1, poly.adm2, by.adm1 = "NAME_1", by.adm2 = "NAME_2")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clusterInfo_+3A_geo">geo</code></td>
<td>
<p>spatial point dataframe</p>
</td></tr>
<tr><td><code id="clusterInfo_+3A_poly.adm1">poly.adm1</code></td>
<td>
<p>spatial polygons dataframe for admin 1</p>
</td></tr>
<tr><td><code id="clusterInfo_+3A_poly.adm2">poly.adm2</code></td>
<td>
<p>spatial polygons dataframe for admin 2 or other lower admin level.</p>
</td></tr>
<tr><td><code id="clusterInfo_+3A_by.adm1">by.adm1</code></td>
<td>
<p>the column name of column for Admin names for admin 1</p>
</td></tr>
<tr><td><code id="clusterInfo_+3A_by.adm2">by.adm2</code></td>
<td>
<p>the column name of column for Admin names for admin 2 or other lower admin level.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contains admin 1 and admin 2 information and coordinates for each cluster.
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo &lt;- getDHSgeo(country = "Zambia", year = 2018)
data(ZambiaAdm1)
data(ZambiaAdm2)
cluster.info &lt;- clusterInfo(geo = geo,
                            poly.adm1 = ZambiaAdm1,
                            poly.adm2 = ZambiaAdm2)

## End(Not run)
</code></pre>

<hr>
<h2 id='clusterModel'>Calculate cluster model estimates using beta binomial model</h2><span id='topic+clusterModel'></span>

<h3>Description</h3>

<p>This function calculate smoothed direct estimates at given admin level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clusterModel(
  data,
  cluster.info,
  admin.info,
  admin,
  CI = 0.95,
  model = c("bym2", "iid"),
  stratification = FALSE,
  aggregation = FALSE,
  overdisp.mean = 0,
  overdisp.prec = 0.4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clusterModel_+3A_data">data</code></td>
<td>
<p>dataframe that contains the indicator of interests, output of getDHSindicator function</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_cluster.info">cluster.info</code></td>
<td>
<p>dataframe that contains admin 1 and admin 2 information and coordinates for each cluster.</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_admin.info">admin.info</code></td>
<td>
<p>dataframe that contains population and urban/rural proportion at specific admin level</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_admin">admin</code></td>
<td>
<p>admin level for the model</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_ci">CI</code></td>
<td>
<p>Credible interval to be used. Default to 0.95.</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_model">model</code></td>
<td>
<p>smoothing model used in the random effect. Options are independent (&quot;iid&quot;) or spatial (&quot;bym2&quot;).</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_stratification">stratification</code></td>
<td>
<p>whether or not to include urban/rural stratum.</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_aggregation">aggregation</code></td>
<td>
<p>whether or not report aggregation results.</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_overdisp.mean">overdisp.mean</code></td>
<td>
<p>prior mean for logit(d), where d is the intracluster correlation.</p>
</td></tr>
<tr><td><code id="clusterModel_+3A_overdisp.prec">overdisp.prec</code></td>
<td>
<p>prior precision for logit(d), where d is the intracluster correlation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contain district name and population for given  tiff files and polygons of admin level,
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo &lt;- getDHSgeo(country = "Zambia", year = 2018)
data(ZambiaAdm1)
data(ZambiaAdm2)
data(ZambiaPopWomen)
cluster.info &lt;- clusterInfo(geo = geo,
                            poly.adm1 = ZambiaAdm1,
                            poly.adm2 = ZambiaAdm2)

dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)

data &lt;- getDHSindicator(dhsData, indicator = "ancvisit4")
admin.info1 &lt;- adminInfo(poly.adm = ZambiaAdm1,
                        admin = 1,
                        agg.pop =ZambiaPopWomen$admin1_pop,
                        proportion = ZambiaPopWomen$admin1_urban)
cl_res_ad1 &lt;- clusterModel(data=data,
                  cluster.info = cluster.info,
                  admin.info = admin.info1,
                  stratification = FALSE,
                  model = "bym2",
                  admin = 1,
                  aggregation = TRUE,
                  CI = 0.95)
cl_res_ad1$res.admin1

# compare with the DHS direct estimates
dhs_table &lt;- get_api_table(country = "ZM",
                           survey = "ZM2018DHS",
                           indicator = "RH_ANCN_W_N4P",
                           simplify = TRUE)
subset(dhs_table, ByVariableLabel == "Five years preceding the survey")


## End(Not run)

</code></pre>

<hr>
<h2 id='directEST'>Calculate direct estimates</h2><span id='topic+directEST'></span>

<h3>Description</h3>

<p>This function calculate direct estimates at given admin level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>directEST(
  data,
  cluster.info,
  admin,
  strata = "all",
  CI = 0.95,
  weight = c("population", "survey")[1],
  admin.info = NULL,
  aggregation = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="directEST_+3A_data">data</code></td>
<td>
<p>dataframe that contains the indicator of interests, output of getDHSindicator function</p>
</td></tr>
<tr><td><code id="directEST_+3A_cluster.info">cluster.info</code></td>
<td>
<p>list contains data and wrong.points. data contains admin 1 and admin 2 information and coordinates for each cluster. wrong.points. contains cluster id for cluster without coordinates or admin 1 information. Output of getDHSindicator function</p>
</td></tr>
<tr><td><code id="directEST_+3A_admin">admin</code></td>
<td>
<p>admin level for the model.</p>
</td></tr>
<tr><td><code id="directEST_+3A_strata">strata</code></td>
<td>
<p>use only urban or rural data, only for national level model</p>
</td></tr>
<tr><td><code id="directEST_+3A_ci">CI</code></td>
<td>
<p>Credible interval to be used. Default to 0.95.</p>
</td></tr>
<tr><td><code id="directEST_+3A_weight">weight</code></td>
<td>
<p>the weight used for aggregating result, &quot;population&quot; or &quot;survey&quot;</p>
</td></tr>
<tr><td><code id="directEST_+3A_admin.info">admin.info</code></td>
<td>
<p>list contains data and mat, data contains population and urban/rural proportion at specific admin level and mat is the adjacency matrix, output of adminInfo function</p>
</td></tr>
<tr><td><code id="directEST_+3A_aggregation">aggregation</code></td>
<td>
<p>whether or not report aggregation results.</p>
</td></tr>
<tr><td><code id="directEST_+3A_...">...</code></td>
<td>
<p>Additional arguments passed on to the 'smoothSurvey' function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contain district name and population for given  tiff files and polygons of admin level,
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo &lt;- getDHSgeo(country = "Zambia", year = 2018)
data(ZambiaAdm1)
data(ZambiaAdm2)
data(ZambiaPopWomen)
cluster.info&lt;-clusterInfo(geo=geo, poly.adm1=poly.adm1, poly.adm2=poly.adm2,
by.adm1 = "NAME_1",by.adm2 = "NAME_2")
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)

data &lt;- getDHSindicator(dhsData, indicator = "ancvisit4+")
res_ad1 &lt;- directEST(data = data,
                  cluster.info = cluster.info,
                  admin = 1,
                  aggregation = FALSE)
res_ad1
# compare with the DHS direct estimates
dhs_table &lt;- get_api_table(country = "ZM",
                           survey = "ZM2018DHS",
                           indicator = "RH_ANCN_W_N4P",
                           simplify = TRUE)
subset(dhs_table, ByVariableLabel == "Five years preceding the survey")


## End(Not run)

</code></pre>

<hr>
<h2 id='fhModel'>Calculate smoothed direct estimates</h2><span id='topic+fhModel'></span>

<h3>Description</h3>

<p>This function calculate smoothed direct estimates at given admin level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fhModel(
  data,
  cluster.info,
  admin.info = NULL,
  admin,
  CI = 0.95,
  model = c("bym2", "iid"),
  aggregation = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fhModel_+3A_data">data</code></td>
<td>
<p>dataframe that contains the indicator of interests, output of getDHSindicator function</p>
</td></tr>
<tr><td><code id="fhModel_+3A_cluster.info">cluster.info</code></td>
<td>
<p>list contains data and wrong.points. data contains admin 1 and admin 2 information and coordinates for each cluster. wrong.points. contains cluster id for cluster without coordinates or admin 1 information. Output of getDHSindicator function</p>
</td></tr>
<tr><td><code id="fhModel_+3A_admin.info">admin.info</code></td>
<td>
<p>list contains data and mat, data contains population and urban/rural proportion at specific admin level and mat is the adjacency matrix, output of adminInfo function</p>
</td></tr>
<tr><td><code id="fhModel_+3A_admin">admin</code></td>
<td>
<p>admin level for the model</p>
</td></tr>
<tr><td><code id="fhModel_+3A_ci">CI</code></td>
<td>
<p>Credible interval to be used. Default to 0.95.</p>
</td></tr>
<tr><td><code id="fhModel_+3A_model">model</code></td>
<td>
<p>smoothing model used in the random effect. Options are independent (&quot;iid&quot;) or spatial (&quot;bym2&quot;).</p>
</td></tr>
<tr><td><code id="fhModel_+3A_aggregation">aggregation</code></td>
<td>
<p>whether or not report aggregation results.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contain district name and population for given  tiff files and polygons of admin level,
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo &lt;- getDHSgeo(country = "Zambia", year = 2018)
data(ZambiaAdm1)
data(ZambiaAdm2)
data(ZambiaPopWomen)
cluster.info &lt;- clusterInfo(geo = geo,
                            poly.adm1 = ZambiaAdm1,
                            poly.adm2 = ZambiaAdm2)

dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)

data &lt;- getDHSindicator(dhsData, indicator = "ancvisit4+")
admin.info1 &lt;- adminInfo(poly.adm = ZambiaAdm1,
                        admin = 1,
                        agg.pop =ZambiaPopWomen$admin1_pop,
                        proportion = ZambiaPopWomen$admin1_urban)
smth_res_ad1 &lt;- fhModel(data,
                       cluster.info = cluster.info,
                       admin.info = admin.info1,
                       admin = 1,
                       model = "bym2",
                       aggregation = F)
smth_res_ad1

## End(Not run)

</code></pre>

<hr>
<h2 id='fp_cruse_mod'>FP_CUSM_W_MOD
IRdata
Modern contraceptive prevalence rate (Married women currently using any modern method of contraception)</h2><span id='topic+fp_cruse_mod'></span>

<h3>Description</h3>

<p>FP_CUSM_W_MOD
IRdata
Modern contraceptive prevalence rate (Married women currently using any modern method of contraception)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fp_cruse_mod(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fp_cruse_mod_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "FP_CUSM_W_MOD",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::fp_cruse_mod)

## End(Not run)
</code></pre>

<hr>
<h2 id='fp_unmet_tot'>FP_NADA_W_UNT
#unmet_family  IRdata
women with an unmet need for family planning for spacing and limiting</h2><span id='topic+fp_unmet_tot'></span>

<h3>Description</h3>

<p>FP_NADA_W_UNT
#unmet_family  IRdata
women with an unmet need for family planning for spacing and limiting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fp_unmet_tot(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fp_unmet_tot_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "FP_NADA_W_UNT",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::fp_unmet_tot)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_api_table'>Function to obtain subnational estimates from DHS API</h2><span id='topic+get_api_table'></span>

<h3>Description</h3>

<p>Function to obtain subnational estimates from DHS API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_api_table(country, survey, indicator, simplify = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_api_table_+3A_country">country</code></td>
<td>
<p>A character string of keys at: https://api.dhsprogram.com/rest/dhs/countries?returnFields=CountryName,DHS_CountryCode&amp;f=html</p>
</td></tr>
<tr><td><code id="get_api_table_+3A_survey">survey</code></td>
<td>
<p>A character string of keys at: https://api.dhsprogram.com/rest/dhs/surveys?returnFields=SurveyId,SurveyYearLabel,SurveyType,CountryName&amp;f=html</p>
</td></tr>
<tr><td><code id="get_api_table_+3A_indicator">indicator</code></td>
<td>
<p>A character string of keys at: https://api.dhsprogram.com/rest/dhs/indicators?returnFields=IndicatorId,Label,Definition&amp;f=html</p>
</td></tr>
<tr><td><code id="get_api_table_+3A_simplify">simplify</code></td>
<td>
<p>if TRUE only the value and region index is returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame of the DHS indicator estimates
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# country:  Zambia
# survey: 2018 DHS
# indicator: Percentage of children stunted 
#             (below -2 SD of height for age 
#              according to the WHO standard)
dhs_table &lt;- get_api_table(country = "ZM", 
                           survey = "ZM2018DHS", 
                           indicator = "CN_NUTS_C_HA2", 
                           simplify = TRUE)
dhs_table

## End(Not run)

</code></pre>

<hr>
<h2 id='getDHSdata'>Download DHS survey data</h2><span id='topic+getDHSdata'></span>

<h3>Description</h3>

<p>This function downloads DHS data for a particular country and survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDHSdata(country, indicator = NULL, Recode = NULL, year)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDHSdata_+3A_country">country</code></td>
<td>
<p>Country name.</p>
</td></tr>
<tr><td><code id="getDHSdata_+3A_indicator">indicator</code></td>
<td>
<p>Indicator of interests. Current list of supported indicators include: &quot;womananemia&quot;, &quot;ancvisit4+&quot;, &quot;stunting&quot;, &quot;wasting&quot;, &quot;DPT3&quot;.</p>
</td></tr>
<tr><td><code id="getDHSdata_+3A_recode">Recode</code></td>
<td>
<p>Types of dhs Recode</p>
</td></tr>
<tr><td><code id="getDHSdata_+3A_year">year</code></td>
<td>
<p>Year the survey conducted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the survey dataset that contains the indicator.
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# When indicator is known, download only the relevant file
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)

# When indicator is NULL or not recognized, download all files
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = NULL,
                                 year = 2018)
names(dhsData)

## End(Not run)

</code></pre>

<hr>
<h2 id='getDHSgeo'>Download DHS geo data</h2><span id='topic+getDHSgeo'></span>

<h3>Description</h3>

<p>This function downloads cluster's coordinate data for country and survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDHSgeo(country, year)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDHSgeo_+3A_country">country</code></td>
<td>
<p>Country name.</p>
</td></tr>
<tr><td><code id="getDHSgeo_+3A_year">year</code></td>
<td>
<p>Year the survey conducted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a spatial point dataset with coordinates for each cluster based on the chosen survey and year.
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo &lt;- getDHSgeo(country = "Zambia", year = 2018)

## End(Not run)

</code></pre>

<hr>
<h2 id='getDHSindicator'>Process DHS data</h2><span id='topic+getDHSindicator'></span>

<h3>Description</h3>

<p>This function processes DHS data from getDHSdata function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDHSindicator(Rdata, indicator = NULL, FUN = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDHSindicator_+3A_rdata">Rdata</code></td>
<td>
<p>Result from getDHSdata function, the raw DHS survry data from get_datasets.</p>
</td></tr>
<tr><td><code id="getDHSindicator_+3A_indicator">indicator</code></td>
<td>
<p>Indicator of interests.</p>
</td></tr>
<tr><td><code id="getDHSindicator_+3A_fun">FUN</code></td>
<td>
<p>a function to process the DHS data into a binary indicator if not using one of the implemented indicators. See surveyPrev::AN_ANEM_W_ANY for an example function to obtain the indicator for women classified as having any anemia.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns processed survey data that contains the indicator of interests.
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData1 &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)
data1 &lt;- getDHSindicator(dhsData1, indicator = "ancvisit4+")


# User-specified function to process the data
# For example see the internal function surveyPrev::AN_ANEM_W_ANY
dhsData2 &lt;- getDHSdata(country = "Zambia",
                                 indicator = NULL,
                                 year = 2018)
data2 &lt;- getDHSindicator(dhsData2, indicator = NULL,
                         FUN = surveyPrev::AN_ANEM_W_ANY)
# which should be identical to the following
dhsData3 &lt;- getDHSdata(country = "Zambia",
                                 indicator = "womananemia",
                                 year = 2018)
data3 &lt;- getDHSindicator(dhsData3, indicator = "womananemia")


## End(Not run)

</code></pre>

<hr>
<h2 id='getUR'>Function to threshold population raster to obtain urban/rural fractions by Admin1 and Admin2 areas</h2><span id='topic+getUR'></span>

<h3>Description</h3>

<p>This function computes the urban proportion at a given survey year. It requires two population raster files and urban population fraction by admin 1 area from the census. The census year overall population raster is used to partition the grids into urban and rural pixels, based on the urban population fractions in a given area at the census year. The thresholding process is performed by first sorting the pixels from high to low population density, and find a threshold such that the fraction of population above this threshold matches the urban population fraction from the census. This step defines the urbanicity of each pixel. In the second step, for any given year's raster for a specific (sub-)population (e.g., specific age groups), we aggregate the population in the urban pixels defined in the previous step to compute urban proportion for the (sub-)population, within both admin1 and admin2 regions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getUR(
  tiff.census,
  tiff.survey,
  prop.census,
  fact = 10,
  poly.adm1,
  poly.adm2,
  varname1,
  varname2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getUR_+3A_tiff.census">tiff.census</code></td>
<td>
<p>spatial raster of population estimates at the census year when the sampling frame is based, for the whole population.</p>
</td></tr>
<tr><td><code id="getUR_+3A_tiff.survey">tiff.survey</code></td>
<td>
<p>spatial raster of population estimates at the survey year, for the target population.</p>
</td></tr>
<tr><td><code id="getUR_+3A_prop.census">prop.census</code></td>
<td>
<p>a data frame with two columns: 'admin1' column correspond to the admin 1 names in the 'poly.adm1' file. And 'frac' column specifying the proportion of population in each admin 1 area during the census year. See examples for detail.</p>
</td></tr>
<tr><td><code id="getUR_+3A_fact">fact</code></td>
<td>
<p>factor to aggregate pixels from tiff.survey to tiff.census. For example, if tiff.census is a population raster at 1km by 1km resolution and tiff.survey is a raster at 100m by 100m resolution, then fact should be set to 10. Currently we only support fact &gt; 1. Default is 10.</p>
</td></tr>
<tr><td><code id="getUR_+3A_poly.adm1">poly.adm1</code></td>
<td>
<p>spatial polygons data frame for admin 1</p>
</td></tr>
<tr><td><code id="getUR_+3A_poly.adm2">poly.adm2</code></td>
<td>
<p>spatial polygons data frame for admin 2</p>
</td></tr>
<tr><td><code id="getUR_+3A_varname1">varname1</code></td>
<td>
<p>column name of district name in the admin 1 spatial polygon data frame</p>
</td></tr>
<tr><td><code id="getUR_+3A_varname2">varname2</code></td>
<td>
<p>column name of district name in the admin 2 spatial polygon data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of two data frames for admin 1 and admin 2 urban ratios
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# ----------------------------------------------------------------------#
# Here we consider the example of computing urban/rural fraction for 
#  Zambia 2018 DHS for the sub-population of children under 1 years old.
# This survey is based on sampling frame from the 2010 Zambia Census.
# ----------------------------------------------------------------------#
# 
# From Table A1 of Zambia 2013-2014 DHS final report, we can obtain the fraction of 
#   urban population by Admin 1 areas in the 2010 survey. 
# Notice that in the appendix of the 2018 DHS final report, 
#   only distribution of household is reported and not population size by urbanicity. 
# When the table is not provided in the DHS report, you need to find it from 
#   the census website directly.
# Please note that the admin1 column needs to match the admin 1 names in the 
#   Admin 1 spatial polygon file exactly.
#   For example, here we change "Northwestern" to "North-Western"

urban.frac &lt;- data.frame(
		admin1 = c('Central', 'Copperbelt', 'Eastern', 
				   'Luapula', 'Lusaka', 'Muchinga', 
					'North-Western', 'Northern', 'Southern','Western'), 
		frac = c(0.2513, 0.809, 0.1252, 
					0.1963, 0.8456, 0.1714, 
					0.2172, 0.1826, 0.2448, 0.1474))
# The corresponding census year population tiff can be found at:
# https://data.worldpop.org/GIS/Population/Global_2000_2020_1km_UNadj/

# The code below downloads the file from the internet directly
# You can also download the file directly and read into R
link1="https://data.worldpop.org/GIS/Population/Global_2000_2020_1km_UNadj/"
file1="2010/ZMB/zmb_ppp_2010_1km_Aggregated_UNadj.tif" 
tempfile1 = tempfile()
download.file(paste0(link1, file1), destfile = tempfile1, 
								method = "libcurl", mode="wb")
library(raster)
tiff1 &lt;- raster(tempfile1)

# https://hub.worldpop.org/geodata/summary?id=16429
# Here we compute population fractions for 0-1 year old population.
# The from the same link below
link2="https://data.worldpop.org/GIS/AgeSex_structures/Global_2000_2020/"
# The two files are for female and male population respectively, 
file2f="2018/ZMB/zmb_f_0_2018.tif" 
file2m="2018/ZMB/zmb_f_0_2018.tif" 

# Since the two files are very large, we recommend downloading them 
#   mannually and then load them into R.
tiff2f &lt;- raster("zmb_f_0_2018.tif")
tiff2m &lt;- raster("zmb_m_0_2018.tif")
tiff2 &lt;- tiff2f + tiff2m

frac &lt;- getUR(tiff.census = tiff1, tiff.survey = tiff2, 
				 prop.census = urban.frac, fact = 10, 
				 poly.adm1 = ZambiaAdm1, poly.adm2 = ZambiaAdm2, 
				 varname1 = "NAME_1", varname2 = "NAME_2") 

library(SUMMER)
mapPlot(frac$admin1.ur, geo = ZambiaAdm1, 
		   by.data = "admin1.name", by.geo = "NAME_1", variable = "urban") 
mapPlot(frac$admin2.ur, geo = ZambiaAdm2, 
		   by.data = "admin2.name", by.geo = "NAME_2", variable = "urban")
# Compare with the proportion of Women 14-49 years old in the built-in data
# These two plots should be similar but not identical 
#   since the population is different
mapPlot(ZambiaPopWomen$admin2_urban, geo = ZambiaAdm2, 
		   by.data = "admin2.name", by.geo = "NAME_2", variable = "urban")
 

## End(Not run)
</code></pre>

<hr>
<h2 id='hv_hiv_pos'>HA_HIVP_W_HIV
hv_hiv_pos
&quot;HIV positive test result&quot;</h2><span id='topic+hv_hiv_pos'></span>

<h3>Description</h3>

<p>HA_HIVP_W_HIV
hv_hiv_pos
&quot;HIV positive test result&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hv_hiv_pos(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hv_hiv_pos_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "HA_HIVP_W_HIV",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::hv_hiv_pos)

## End(Not run)
</code></pre>

<hr>
<h2 id='intervalPlot'>Get scatter plot for any two model results</h2><span id='topic+intervalPlot'></span>

<h3>Description</h3>

<p>This function return scatter plot at admin 1 level for any two model results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>intervalPlot(admin = 0, compare = FALSE, model = NULL, group = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="intervalPlot_+3A_admin">admin</code></td>
<td>
<p>level of plot</p>
</td></tr>
<tr><td><code id="intervalPlot_+3A_compare">compare</code></td>
<td>
<p>plot for compare multiple plot or not</p>
</td></tr>
<tr><td><code id="intervalPlot_+3A_model">model</code></td>
<td>
<p>list of model results  using surveyPrev</p>
</td></tr>
<tr><td><code id="intervalPlot_+3A_group">group</code></td>
<td>
<p>plot by group or not</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contain district name and population for given  tiff files and polygons of admin level.
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

geo &lt;- getDHSgeo(country = "Zambia", year = 2018)
data(ZambiaAdm1)
data(ZambiaAdm2)
data(ZambiaPopWomen)
cluster.info &lt;- clusterInfo(geo = geo,
                            poly.adm1 = ZambiaAdm1,
                            poly.adm2 = ZambiaAdm2)

dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)

data &lt;- getDHSindicator(dhsData, indicator = "ancvisit4+")
admin.info2 &lt;- adminInfo(poly.adm = ZambiaAdm2,
                        admin = 2,
                        agg.pop =ZambiaPopWomen$admin2_pop,
                        proportion = ZambiaPopWomen$admin2_urban)
cl_res_ad2_unstrat &lt;- clusterModel(data = data,
                  cluster.info = cluster.info,
                  admin.info = admin.info2,
                  stratification = FALSE,
                  model = "bym2",
                  admin = 2,
                  aggregation = TRUE,
                  CI = 0.95)

head(cl_res_ad2_unstrat$res.admin2)
head(cl_res_ad2_unstrat$agg.admin1)
plots &lt;- intervalPlot(cl_res_ad2_unstrat)
plots[["Central"]]

cl_res_ad2 &lt;- clusterModel(data = data,
                  cluster.info = cluster.info,
                  admin.info = admin.info2,
                  stratification = TRUE,
                  model = "bym2",
                  admin = 2,
                  aggregation = TRUE,
                  CI = 0.95)
head(cl_res_ad2$res.admin2)
head(cl_res_ad2$agg.admin1)
plots &lt;- intervalPlot(cl_res_ad2)
plots[["Central"]]

library(patchwork)
wrap_plots(plots, ncol = 5)


## End(Not run)

</code></pre>

<hr>
<h2 id='ml_hhaccess'>ML_ITNA_P_ACC
Households with at least one insecticide-treated mosquito net (ITN) for every two persons who stayed in the household the previous night
Persons with access to an insecticide-treated mosquito net (ITN)
ML_NETS_HH.do  HR
Households with &gt;1 ITN per 2 household members
Percentage of households with at least one ITN for every 2 persons who stayed in the household last night</h2><span id='topic+ml_hhaccess'></span>

<h3>Description</h3>

<p>ML_ITNA_P_ACC
Households with at least one insecticide-treated mosquito net (ITN) for every two persons who stayed in the household the previous night
Persons with access to an insecticide-treated mosquito net (ITN)
ML_NETS_HH.do  HR
Households with &gt;1 ITN per 2 household members
Percentage of households with at least one ITN for every 2 persons who stayed in the household last night
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ml_hhaccess(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ml_hhaccess_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ML_ITNA_P_ACC",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ml_hhaccess)

## End(Not run)
</code></pre>

<hr>
<h2 id='NMR'>CM_ECMR_C_NNR
nmr CM_ECMR_C_NNR BR (not from dhs github)
Neonatal mortality rate !!!!!!</h2><span id='topic+NMR'></span>

<h3>Description</h3>

<p>CM_ECMR_C_NNR
nmr CM_ECMR_C_NNR BR (not from dhs github)
Neonatal mortality rate !!!!!!
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NMR(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="NMR_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CM_ECMR_C_NNR",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::NMR)

## End(Not run)
</code></pre>

<hr>
<h2 id='nt_ch_any_anem'>CN_ANMC_C_ANY
Children with any anemia
&quot;Any anemia - child 6-59 months&quot; PR NT_CH_NUT.do
Children under five with any anemia</h2><span id='topic+nt_ch_any_anem'></span>

<h3>Description</h3>

<p>CN_ANMC_C_ANY
Children with any anemia
&quot;Any anemia - child 6-59 months&quot; PR NT_CH_NUT.do
Children under five with any anemia
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nt_ch_any_anem(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nt_ch_any_anem_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CN_ANMC_C_ANY",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::nt_ch_any_anem)

## End(Not run)
</code></pre>

<hr>
<h2 id='nt_ch_stunt'>CN_NUTS_C_HA2
stunting
Children stunted
NT_CH_NUT.do PR &quot;Stunted child under 5 years&quot;
Stunting rate (Prevalence of stunted (HAZ &lt; -2) children under five (0-59 months))
Percentage of children under age five stunted (below -2 standard deviations of height-for-age according to the WHO standard).</h2><span id='topic+nt_ch_stunt'></span>

<h3>Description</h3>

<p>CN_NUTS_C_HA2
stunting
Children stunted
NT_CH_NUT.do PR &quot;Stunted child under 5 years&quot;
Stunting rate (Prevalence of stunted (HAZ &lt; -2) children under five (0-59 months))
Percentage of children under age five stunted (below -2 standard deviations of height-for-age according to the WHO standard).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nt_ch_stunt(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nt_ch_stunt_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CN_NUTS_C_HA2",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::nt_ch_stunt)

## End(Not run)
</code></pre>

<hr>
<h2 id='nt_ch_wast'>CN_NUTS_C_WH2
wasting
Children wasted
NT_CH_NUT.do PR &quot;Wasted child under 5 years&quot;
Wasting rate (Prevalence of wasted (HAZ &lt; -2) children under five (0-59 months))
Percentage of children under age five with a weight-for-height z-score (WHZ) more than two standard deviations below the median WHO growth standards.</h2><span id='topic+nt_ch_wast'></span>

<h3>Description</h3>

<p>CN_NUTS_C_WH2
wasting
Children wasted
NT_CH_NUT.do PR &quot;Wasted child under 5 years&quot;
Wasting rate (Prevalence of wasted (HAZ &lt; -2) children under five (0-59 months))
Percentage of children under age five with a weight-for-height z-score (WHZ) more than two standard deviations below the median WHO growth standards.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nt_ch_wast(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nt_ch_wast_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CN_NUTS_C_WH2",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::nt_ch_wast)

## End(Not run)
</code></pre>

<hr>
<h2 id='nt_ebf'>CN_BRFS_C_EXB
Children exclusively breastfed
NT_IYCF.do KR &quot;Exclusively breastfed - last-born under 6 months&quot;
Children exclusively breastfed (Prevalence of exclusive breastfeeding of children under six months of age)</h2><span id='topic+nt_ebf'></span>

<h3>Description</h3>

<p>CN_BRFS_C_EXB
Children exclusively breastfed
NT_IYCF.do KR &quot;Exclusively breastfed - last-born under 6 months&quot;
Children exclusively breastfed (Prevalence of exclusive breastfeeding of children under six months of age)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nt_ebf(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nt_ebf_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "CN_BRFS_C_EXB",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::nt_ebf)

## End(Not run)
</code></pre>

<hr>
<h2 id='nt_wm_any_anem'>AN_ANEM_W_ANY
womananemia
nt_wm_any_anem &quot;Any anemia - women&quot;  NT_WM_NUT.do
Percentage of women aged 15-49 classified as having any anemia</h2><span id='topic+nt_wm_any_anem'></span>

<h3>Description</h3>

<p>AN_ANEM_W_ANY
womananemia
nt_wm_any_anem &quot;Any anemia - women&quot;  NT_WM_NUT.do
Percentage of women aged 15-49 classified as having any anemia
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nt_wm_any_anem(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nt_wm_any_anem_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "AN_ANEM_W_ANY",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::nt_wm_any_anem)

## End(Not run)
</code></pre>

<hr>
<h2 id='nt_wm_thin'>AN_NUTS_W_THN
Women who are thin according to BMI (&lt;18.5)
NT_WM_NUT.do &quot;Thin BMI - women&quot; IR !!!!!!!!
Underweight (Prevalence of underweight (BMI &lt; 18.5) women of reproductive age)</h2><span id='topic+nt_wm_thin'></span>

<h3>Description</h3>

<p>AN_NUTS_W_THN
Women who are thin according to BMI (&lt;18.5)
NT_WM_NUT.do &quot;Thin BMI - women&quot; IR !!!!!!!!
Underweight (Prevalence of underweight (BMI &lt; 18.5) women of reproductive age)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nt_wm_thin(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nt_wm_thin_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "AN_NUTS_W_THN",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::nt_wm_thin)

## End(Not run)
</code></pre>

<hr>
<h2 id='ph_sani_basic'>WS_TLET_P_BAS
Population with access to a basic sanitation service WS_TLET_P_BAS in DHS API
PH_SANI.do  PR
ph_sani_basic &quot;Basic sanitation facility&quot;</h2><span id='topic+ph_sani_basic'></span>

<h3>Description</h3>

<p>WS_TLET_P_BAS
Population with access to a basic sanitation service WS_TLET_P_BAS in DHS API
PH_SANI.do  PR
ph_sani_basic &quot;Basic sanitation facility&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ph_sani_basic(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ph_sani_basic_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "WS_TLET_P_BAS",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ph_sani_basic)

## End(Not run)
</code></pre>

<hr>
<h2 id='ph_sani_improve'>WS_TLET_H_IMP
Percentage of households using an improved sanitation facility
PH_SANI.do  PR
ph_sani_improve &quot;Access to improved sanitation&quot; country-specific</h2><span id='topic+ph_sani_improve'></span>

<h3>Description</h3>

<p>WS_TLET_H_IMP
Percentage of households using an improved sanitation facility
PH_SANI.do  PR
ph_sani_improve &quot;Access to improved sanitation&quot; country-specific
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ph_sani_improve(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ph_sani_improve_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "WS_TLET_H_IMP",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::ph_sani_improve)

## End(Not run)
</code></pre>

<hr>
<h2 id='rh_anc_4vs'>RH_ANCN_W_N4P
ancvisit4+ RH_ANCN_W_N4P  IR
Antenatal visits for pregnancy: 4+ visits</h2><span id='topic+rh_anc_4vs'></span>

<h3>Description</h3>

<p>RH_ANCN_W_N4P
ancvisit4+ RH_ANCN_W_N4P  IR
Antenatal visits for pregnancy: 4+ visits
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rh_anc_4vs(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rh_anc_4vs_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "RH_ANCN_W_N4P",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::rh_anc_4vs)

## End(Not run)
</code></pre>

<hr>
<h2 id='rh_del_pvskill'>RH_DELA_C_SKP
IR or BR
Assistance during delivery from a skilled provider</h2><span id='topic+rh_del_pvskill'></span>

<h3>Description</h3>

<p>RH_DELA_C_SKP
IR or BR
Assistance during delivery from a skilled provider
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rh_del_pvskill(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rh_del_pvskill_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "RH_DELA_C_SKP",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::rh_del_pvskill)

## End(Not run)
</code></pre>

<hr>
<h2 id='scatterPlot'>Get scatter plot for any two model results</h2><span id='topic+scatterPlot'></span>

<h3>Description</h3>

<p>This function return scatter plot at admin 1 level for any two model results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scatterPlot(
  res1,
  value1,
  res2,
  value2,
  label1,
  label2,
  by.res1,
  by.res2,
  title
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scatterPlot_+3A_res1">res1</code></td>
<td>
<p>model result 1 using surveyPrev</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_value1">value1</code></td>
<td>
<p>value1</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_res2">res2</code></td>
<td>
<p>model result 2 using surveyPrev</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_value2">value2</code></td>
<td>
<p>value2</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_label1">label1</code></td>
<td>
<p>label for x axis</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_label2">label2</code></td>
<td>
<p>label for y axis</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_by.res1">by.res1</code></td>
<td>
<p>by.res1</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_by.res2">by.res2</code></td>
<td>
<p>by.res2</p>
</td></tr>
<tr><td><code id="scatterPlot_+3A_title">title</code></td>
<td>
<p>title</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the dataset that contain district name and population for given  tiff files and polygons of admin level
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo &lt;- getDHSgeo(country = "Zambia", year = 2018)
data(ZambiaAdm1)
data(ZambiaAdm2)
data(ZambiaPopWomen)
cluster.info &lt;- clusterInfo(geo = geo,
                            poly.adm1 = ZambiaAdm1,
                            poly.adm2 = ZambiaAdm2)

dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "ancvisit4+",
                                 year = 2018)

data &lt;- getDHSindicator(dhsData, indicator = "ancvisit4+")
admin.info1 &lt;- adminInfo(poly.adm = ZambiaAdm1,
                        admin = 1,
                        agg.pop =ZambiaPopWomen$admin1_pop,
                        proportion = ZambiaPopWomen$admin1_urban)
smth_res_ad1 &lt;- fhModel(data,
                       cluster.info = cluster.info,
                       admin.info = admin.info1,
                       admin = 1,
                       model = "bym2",
                       aggregation = F)

admin.info2 &lt;- adminInfo(poly.adm = ZambiaAdm2,
                        admin = 2,
                        agg.pop =ZambiaPopWomen$admin2_pop,
                        proportion = ZambiaPopWomen$admin2_urban)
cl_res_ad2 &lt;- clusterModel(data = data,
                  cluster.info = cluster.info,
                  admin.info = admin.info2,
                  stratification = FALSE,
                  model = "bym2",
                  admin = 2,
                  aggregation = TRUE,
                  CI = 0.95)

scatterPlot(
     res1 = smth_res_ad1,
     res2 = cl_res_ad2$agg.admin1,
     value1 = "value",
     value2 = "value",
     by.res1 = "admin1.name",
     by.res2 = "admin1.name",
     title = "Aggregated cluster model v.s. Fay–Herriot",
     label1 = "Fay–Herriot",
     label2 = "Aggregated cluster model")


## End(Not run)


</code></pre>

<hr>
<h2 id='surveyPrevIndicators'>Table of built-in indicators.</h2><span id='topic+surveyPrevIndicators'></span>

<h3>Description</h3>

<p>A data frame of indicators currently implemented in the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(surveyPrevIndicators)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 22 rows and 4 columns.
</p>

<hr>
<h2 id='watersource_adj'>WS_SRCE_P_BAS
Population using a basic water source
PH_WATER.do
ph_wtr_basic &quot;Basic water service&quot; PR</h2><span id='topic+watersource_adj'></span>

<h3>Description</h3>

<p>WS_SRCE_P_BAS
Population using a basic water source
PH_WATER.do
ph_wtr_basic &quot;Basic water service&quot; PR
</p>


<h3>Usage</h3>

<pre><code class='language-R'>watersource_adj(Rdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="watersource_adj_+3A_rdata">Rdata</code></td>
<td>
<p>data.frame from survryPrev::getDHSdata</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A partially processed data.frame that will be used in  survryPrev::getDHSindicator. The whole function can be used as a parameter in survryPrev::getDHSindicator
</p>


<h3>Author(s)</h3>

<p>Qianyu Dong
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dhsData &lt;- getDHSdata(country = "Zambia",
                                 indicator = "WS_SRCE_P_BAS",
                                 year = 2018)
data &lt;- getDHSindicator(dhsData, indicator = NULL,
                         FUN = surveyPrev::watersource_adj)

## End(Not run)
</code></pre>

<hr>
<h2 id='ZambiaAdm1'>Admin 1 Polygon Map for Zambia.</h2><span id='topic+ZambiaAdm1'></span>

<h3>Description</h3>

<p>A SpatialPolygonsDataFrame corresponding to Zambia's admin-1 regions. The dataset is downloaded from GADM (https://gadm.org/data.html) version 4.1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ZambiaAdm1)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>SpatialPolygonsDataFrame</code> with 10 rows and 11 columns.
</p>

<hr>
<h2 id='ZambiaAdm2'>Admin 2 Polygon Map for Zambia.</h2><span id='topic+ZambiaAdm2'></span>

<h3>Description</h3>

<p>A SpatialPolygonsDataFrame corresponding to Zambia's admin-2 regions. The dataset is downloaded from GADM (https://gadm.org/data.html) version 4.1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ZambiaAdm2)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>SpatialPolygonsDataFrame</code> with 115 rows and 13 columns.
</p>

<hr>
<h2 id='ZambiaPopWomen'>Population estimates for Women of age 15 to 49 in Zambia in 2018.</h2><span id='topic+ZambiaPopWomen'></span>

<h3>Description</h3>

<p>A list of three objects
</p>

<ul>
<li><p> raster A 100m by 100m raster file for the population estimates for women of age 15 to 49 in Zambia in 2018
</p>
</li>
<li><p> admin1_urban A data frame specifying the proportion of urban population (as defined by those living in regions designated as urban in the previous census) for Women of age 15 to 49 in Zambia in 2018, in each admin1 region.
</p>
</li>
<li><p> admin2_urban A data frame specifying the proportion of urban population (as defined by those living in regions designated as urban in the previous census) for Women of age 15 to 49 in Zambia in 2018, in each admin2 region. The corresponding admin1 region name is also included. 
</p>
</li></ul>

<p>The dataset is downloaded from WorldPop (https://hub.worldpop.org/geodata/summary?id=16429) and post processed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ZambiaPopWomen)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 4.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
