<!DOCTYPE html><html><head><title>Help for package bidask</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bidask}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bidask-package'><p>bidask: Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices</p></a></li>
<li><a href='#AR'><p>Abdi-Ranaldo Estimator</p></a></li>
<li><a href='#CS'><p>Corwin-Schultz Estimator</p></a></li>
<li><a href='#edge'><p>Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices</p></a></li>
<li><a href='#OHLC'><p>OHLC Estimators</p></a></li>
<li><a href='#rmean'><p>Rolling mean</p></a></li>
<li><a href='#ROLL'><p>Roll Estimator</p></a></li>
<li><a href='#rsum'><p>Rolling sum</p></a></li>
<li><a href='#sim'><p>Simulation of Open, High, Low, and Close Prices</p></a></li>
<li><a href='#spread'><p>Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Efficient Estimation of Bid-Ask Spreads from Open, High, Low,
and Close Prices</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements an efficient estimator of bid-ask spreads from open, high, low, and close prices
  as described in Ardia, Guidotti, &amp; Kroencke (2021) <a href="https://www.ssrn.com/abstract=3892335">https://www.ssrn.com/abstract=3892335</a>. 
  It also provides an implementation of the estimators described in 
  Roll (1984) &lt;<a href="https://doi.org/10.1111%2Fj.1540-6261.1984.tb03897.x">doi:10.1111/j.1540-6261.1984.tb03897.x</a>&gt;, 
  Corwin &amp; Schultz (2012) &lt;<a href="https://doi.org/10.1111%2Fj.1540-6261.2012.01729.x">doi:10.1111/j.1540-6261.2012.01729.x</a>&gt;,
  and Abdi &amp; Ranaldo (2017) &lt;<a href="https://doi.org/10.1093%2Frfs%2Fhhx084">doi:10.1093/rfs/hhx084</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/eguidotti/bidask">https://github.com/eguidotti/bidask</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/eguidotti/bidask/issues">https://github.com/eguidotti/bidask/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>xts, zoo</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>dplyr, crypto2, quantmod, knitr, rmarkdown, testthat (&ge;
3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-15 16:30:07 UTC; eguidotti</td>
</tr>
<tr>
<td>Author:</td>
<td>Emanuele Guidotti <a href="https://orcid.org/0000-0002-8961-6623"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  David Ardia <a href="https://orcid.org/0000-0003-2823-782X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Tim Kroencke <a href="https://orcid.org/0000-0001-8700-356X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Emanuele Guidotti &lt;emanuele.guidotti@usi.ch&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-17 07:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bidask-package'>bidask: Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices</h2><span id='topic+bidask'></span><span id='topic+bidask-package'></span>

<h3>Description</h3>

<p>Implements an efficient estimator of bid-ask spreads from open, high, low, and close prices as described in Ardia, Guidotti, &amp; Kroencke (2021) <a href="https://www.ssrn.com/abstract=3892335">https://www.ssrn.com/abstract=3892335</a>. It also provides an implementation of the estimators described in Roll (1984) <a href="https://doi.org/10.1111/j.1540-6261.1984.tb03897.x">doi:10.1111/j.1540-6261.1984.tb03897.x</a>, Corwin &amp; Schultz (2012) <a href="https://doi.org/10.1111/j.1540-6261.2012.01729.x">doi:10.1111/j.1540-6261.2012.01729.x</a>, and Abdi &amp; Ranaldo (2017) <a href="https://doi.org/10.1093/rfs/hhx084">doi:10.1093/rfs/hhx084</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Emanuele Guidotti <a href="mailto:emanuele.guidotti@usi.ch">emanuele.guidotti@usi.ch</a> (<a href="https://orcid.org/0000-0002-8961-6623">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> David Ardia (<a href="https://orcid.org/0000-0003-2823-782X">ORCID</a>) [contributor]
</p>
</li>
<li><p> Tim Kroencke (<a href="https://orcid.org/0000-0001-8700-356X">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/eguidotti/bidask">https://github.com/eguidotti/bidask</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/eguidotti/bidask/issues">https://github.com/eguidotti/bidask/issues</a>
</p>
</li></ul>


<hr>
<h2 id='AR'>Abdi-Ranaldo Estimator</h2><span id='topic+AR'></span>

<h3>Description</h3>

<p>Abdi-Ranaldo Estimator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AR(x, width = nrow(x), method, sign, na.rm)
</code></pre>

<hr>
<h2 id='CS'>Corwin-Schultz Estimator</h2><span id='topic+CS'></span>

<h3>Description</h3>

<p>Corwin-Schultz Estimator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CS(x, width = nrow(x), method, sign, na.rm)
</code></pre>

<hr>
<h2 id='edge'>Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices</h2><span id='topic+edge'></span>

<h3>Description</h3>

<p>Implements an efficient estimator of bid-ask spreads 
from open, high, low, and close prices as described in 
<a href="https://www.ssrn.com/abstract=3892335">Ardia, Guidotti, &amp; Kroencke (2021)</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>edge(open, high, low, close, sign = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="edge_+3A_open">open</code></td>
<td>
<p>numeric vector of open prices.</p>
</td></tr>
<tr><td><code id="edge_+3A_high">high</code></td>
<td>
<p>numeric vector of high prices.</p>
</td></tr>
<tr><td><code id="edge_+3A_low">low</code></td>
<td>
<p>numeric vector of low prices.</p>
</td></tr>
<tr><td><code id="edge_+3A_close">close</code></td>
<td>
<p>numeric vector of close prices.</p>
</td></tr>
<tr><td><code id="edge_+3A_sign">sign</code></td>
<td>
<p>whether signed estimates should be returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Prices must be sorted in ascending order of the timestamp.
</p>


<h3>Value</h3>

<p>The spread estimate. A value of 0.01 corresponds to a spread of 1%.
</p>


<h3>Note</h3>

<p>Please cite <a href="https://www.ssrn.com/abstract=3892335">Ardia, Guidotti, &amp; Kroencke (2021)</a> 
when using this package in publication.
</p>


<h3>References</h3>

<p>Ardia, D., Guidotti E., &amp; Kroencke T. A. (2021). Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices. 
Available at SSRN: <a href="https://www.ssrn.com/abstract=3892335">https://www.ssrn.com/abstract=3892335</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># simulate open, high, low, and close prices with spread 1%
x &lt;- sim(spread = 0.01)

# estimate the spread
edge(x$Open, x$High, x$Low, x$Close)

</code></pre>

<hr>
<h2 id='OHLC'>OHLC Estimators</h2><span id='topic+OHLC'></span>

<h3>Description</h3>

<p>OHLC Estimators
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OHLC(x, width = nrow(x), method, sign, na.rm)
</code></pre>

<hr>
<h2 id='rmean'>Rolling mean</h2><span id='topic+rmean'></span>

<h3>Description</h3>

<p>Rolling mean
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmean(x, width, na.rm)
</code></pre>

<hr>
<h2 id='ROLL'>Roll Estimator</h2><span id='topic+ROLL'></span>

<h3>Description</h3>

<p>Roll Estimator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ROLL(x, width = nrow(x), sign, na.rm)
</code></pre>

<hr>
<h2 id='rsum'>Rolling sum</h2><span id='topic+rsum'></span>

<h3>Description</h3>

<p>Rolling sum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rsum(x, width, na.rm)
</code></pre>

<hr>
<h2 id='sim'>Simulation of Open, High, Low, and Close Prices</h2><span id='topic+sim'></span>

<h3>Description</h3>

<p>This function performs simulations consisting of <code>n</code> periods (e.g., days) and where each period consists of a given number of <code>trades</code>.
For each trade, the actual price <code class="reqn">P_t</code> is simulated as <code class="reqn">P_t = P_{t-1}e^{\sigma x}</code>, where <code class="reqn">\sigma</code> is the standard deviation per trade and <code class="reqn">x</code> is a random draw from a unit normal distribution.
The standard deviation per trade equals the <code>volatility</code> divided by the square root of the number of <code>trades</code>.
Trades are assumed to be observed with a given <code>probability</code>.
The bid (ask) for each trade is defined as <code class="reqn">P_t</code> multiplied by one minus (plus) half the <code>spread</code> and we assume a 50% chance that a bid (ask) is observed.
High and low prices equal the highest and lowest prices observed during the period.
Open and Close prices equal the first and the last price observed in the period.
If no trade is observed for a period, then the previous Close is used as the Open, High, Low, and Close prices for that period.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim(
  n = 10000,
  trades = 390,
  prob = 1,
  spread = 0.01,
  volatility = 0.03,
  overnight = 0,
  drift = 0,
  units = "day",
  sign = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sim_+3A_n">n</code></td>
<td>
<p>the number of periods to simulate.</p>
</td></tr>
<tr><td><code id="sim_+3A_trades">trades</code></td>
<td>
<p>the number of trades per period.</p>
</td></tr>
<tr><td><code id="sim_+3A_prob">prob</code></td>
<td>
<p>the probability to observe a trade.</p>
</td></tr>
<tr><td><code id="sim_+3A_spread">spread</code></td>
<td>
<p>the bid-ask spread.</p>
</td></tr>
<tr><td><code id="sim_+3A_volatility">volatility</code></td>
<td>
<p>the open-to-close volatility.</p>
</td></tr>
<tr><td><code id="sim_+3A_overnight">overnight</code></td>
<td>
<p>the close-to-open volatility.</p>
</td></tr>
<tr><td><code id="sim_+3A_drift">drift</code></td>
<td>
<p>the expected return per period.</p>
</td></tr>
<tr><td><code id="sim_+3A_units">units</code></td>
<td>
<p>the units of the time period. One of: <code>sec</code>, <code>min</code>, <code>hour</code>, <code>day</code>, <code>week</code>, <code>month</code>, <code>year</code>.</p>
</td></tr>
<tr><td><code id="sim_+3A_sign">sign</code></td>
<td>
<p>whether to return positive prices for buys and negative prices for sells.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Simulated open, high, low, and close prices.
</p>


<h3>Note</h3>

<p>Please cite <a href="https://www.ssrn.com/abstract=3892335">Ardia, Guidotti, &amp; Kroencke (2021)</a> 
when using this package in publication.
</p>


<h3>References</h3>

<p>Ardia, D., Guidotti E., &amp; Kroencke T. A. (2021). Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices. 
Available at SSRN: <a href="https://www.ssrn.com/abstract=3892335">https://www.ssrn.com/abstract=3892335</a>
</p>

<hr>
<h2 id='spread'>Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices</h2><span id='topic+spread'></span>

<h3>Description</h3>

<p>This function implements several methods to estimate bid-ask spreads
from open, high, low, and close prices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spread(x, width = nrow(x), method = "EDGE", sign = FALSE, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spread_+3A_x">x</code></td>
<td>
<p><code><a href="xts.html#topic+xts">xts</a></code> object with columns named <code>Open</code>, <code>High</code>, <code>Low</code>, <code>Close</code>.</p>
</td></tr>
<tr><td><code id="spread_+3A_width">width</code></td>
<td>
<p>integer width of the rolling window to use, or vector of endpoints defining the intervals to use. By default, the whole time series is used to compute a single spread estimate.</p>
</td></tr>
<tr><td><code id="spread_+3A_method">method</code></td>
<td>
<p>the estimator(s) to use. See details.</p>
</td></tr>
<tr><td><code id="spread_+3A_sign">sign</code></td>
<td>
<p>whether signed estimates should be returned.</p>
</td></tr>
<tr><td><code id="spread_+3A_na.rm">na.rm</code></td>
<td>
<p>whether missing values should be ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The method <code>EDGE</code> implements the Efficient Discrete Generalized Estimator described in Ardia, Guidotti, &amp; Kroencke (2021).
</p>
<p>The methods <code>OHL</code>, <code>OHLC</code>, <code>CHL</code>, <code>CHLO</code> implement the generalized estimators described in Ardia, Guidotti, &amp; Kroencke (2021).
They can be combined by concatenating their identifiers, e.g., <code>OHLC.CHLO</code> uses an average of the <code>OHLC</code> and <code>CHLO</code> estimators.
</p>
<p>The method <code>AR</code> implements the estimator described in Abdi &amp; Ranaldo (2017). <code>AR2</code> implements their 2-period version.
</p>
<p>The method <code>CS</code> implements the estimator described in Corwin &amp; Schultz (2012). <code>CS2</code> implements their 2-period version. Both versions are adjusted for overnight (close-to-open) returns as described in the paper.
</p>
<p>The method <code>ROLL</code> implements the estimator described in Roll (1984).
</p>


<h3>Value</h3>

<p>Time series of spread estimates. A value of 0.01 corresponds to a spread of 1%.
</p>


<h3>Note</h3>

<p>Please cite <a href="https://www.ssrn.com/abstract=3892335">Ardia, Guidotti, &amp; Kroencke (2021)</a> 
when using this package in publication.
</p>


<h3>References</h3>

<p>Ardia, D., Guidotti E., &amp; Kroencke T. A. (2021). Efficient Estimation of Bid-Ask Spreads from Open, High, Low, and Close Prices. 
Available at SSRN: <a href="https://www.ssrn.com/abstract=3892335">https://www.ssrn.com/abstract=3892335</a>
</p>
<p>Abdi, F., &amp; Ranaldo, A. (2017). A simple estimation of bid-ask spreads from daily close, high, and low prices. Review of Financial Studies, 30 (12), 4437-4480.
<a href="https://doi.org/10.1093/rfs/hhx084">doi:10.1093/rfs/hhx084</a>
</p>
<p>Corwin, S. A., &amp; Schultz, P. (2012). A simple way to estimate bid-ask spreads from daily high and low prices. Journal of Finance, 67 (2), 719-760.
<a href="https://doi.org/10.1111/j.1540-6261.2012.01729.x">doi:10.1111/j.1540-6261.2012.01729.x</a>
</p>
<p>Roll, R. (1984). A simple implicit measure of the effective bid-ask spread in an efficient market. Journal of Finance, 39 (4), 1127-1139.
<a href="https://doi.org/10.1111/j.1540-6261.1984.tb03897.x">doi:10.1111/j.1540-6261.1984.tb03897.x</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># simulate open, high, low, and close prices with spread 1%
x &lt;- sim(spread = 0.01)

# estimate the spread
spread(x)

# by default this is equivalent to
edge(x$Open, x$High, x$Low, x$Close)

# estimate the spread using a rolling window of 21 periods
spread(x, width = 21)

# estimate the spread for each month
ep &lt;- xts::endpoints(x, on = "months")
spread(x, width = ep)

# use multiple estimators
spread(x, method = c("EDGE", "AR", "CS", "ROLL", "OHLC", "OHL.CHL"))

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
