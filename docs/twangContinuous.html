<!DOCTYPE html><html><head><title>Help for package twangContinuous</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {twangContinuous}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bal.table'><p>Compute the balance table.</p></a></li>
<li><a href='#dat'>
<p>A synthetic data set that was derived from a large scale observational study on youth in substance use treatment.</p></a></li>
<li><a href='#get.weights'><p>Extract propensity score weights</p></a></li>
<li><a href='#plot.ps.cont'><p>Plot the 'ps.cont' object.</p></a></li>
<li><a href='#ps.cont'><p>Gradient boosted propensity score estimation for continuous exposures</p></a></li>
<li><a href='#summary.ps.cont'><p>Displays a useful description of a 'ps.cont' object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-02-15</td>
</tr>
<tr>
<td>Title:</td>
<td>Toolkit for Weighting and Analysis of Nonequivalent Groups -
Continuous Exposures</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions for propensity score
        estimation and weighting for continuous exposures as described in Zhu, Y., 
        Coffman, D. L., &amp; Ghosh, D. (2015). A boosting algorithm for
        estimating generalized propensity scores with continuous treatments.
        Journal of Causal Inference, 3(1), 25-40. &lt;<a href="https://doi.org/10.1515%2Fjci-2014-0022">doi:10.1515/jci-2014-0022</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.19), lattice (&ge; 0.20-35), gbm (&ge; 2.1.3),
survey, xtable</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-24 16:38:26 UTC; tug76052</td>
</tr>
<tr>
<td>Author:</td>
<td>Donna Coffman <a href="https://orcid.org/0000-0001-6305-6579"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Brian Vegetabile [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Donna Coffman &lt;donna.coffman@gmail.com&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-26 09:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bal.table'>Compute the balance table.</h2><span id='topic+bal.table'></span>

<h3>Description</h3>

<p>'bal.table' is a generic function for extracting balance tables from
'ps.cont' objects, one for an unweighted analysis and one for the weighted
analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bal.table(x, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bal.table_+3A_x">x</code></td>
<td>
<p>A 'ps.cont' object</p>
</td></tr>
<tr><td><code id="bal.table_+3A_digits">digits</code></td>
<td>
<p>Number of digits to round to. Default: 3</p>
</td></tr>
<tr><td><code id="bal.table_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame containing the balance information.
* 'unw' The unweighted correlation between the exposure and each covariate.
* 'wcor' The weighted correlation between the exposure and each covariate.
</p>


<h3>See Also</h3>

<p>[ps.cont]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  ## Not run: bal.table(test.mod)

</code></pre>

<hr>
<h2 id='dat'>
A synthetic data set that was derived from a large scale observational study on youth in substance use treatment.
</h2><span id='topic+dat'></span>

<h3>Description</h3>

<p>A subset of measures from the Global Appraisal of Individual Needs biopsychosocial assessment instrument (GAIN) (Dennis, Titus et al. 2003) from sites that administered two different types of substance use disorder treatments (treatment “A” and treatment “B”). The Center for Substance Abuse Treatment (CSAT) funded the sites that administered these two SUD treatments. This dataset consists of 4,000 adolescents, 2,000 in each treatment group. The dataset includes substance use and mental health variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("dat")</code></pre>


<h3>Format</h3>

<p>A data frame with 4000 observations on the following 29 variables.
</p>

<dl>
<dt><code>treat</code></dt><dd><p>a factor with levels <code>A</code> <code>B</code></p>
</dd>
<dt><code>tss_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>tss_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>tss_6</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sfs8p_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sfs8p_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sfs8p_6</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>eps7p_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>eps7p_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>eps7p_6</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ias5p_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>dss9_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>mhtrt_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sati_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sp_sm_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sp_sm_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sp_sm_6</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>gvs</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ers21_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>nproc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ada_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ada_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ada_6</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>recov_0</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>recov_3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>recov_6</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>subsgrps_n</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>sncnt</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>engage</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt><code>tss_0</code></dt><dd><p>Traumatic Stress Scale - Baseline</p>
</dd>
<dt><code>tss_3</code></dt><dd><p>Traumatic Stress Scale - 3 months</p>
</dd>
<dt><code>tss_6</code></dt><dd><p>Traumatic Stress Scale - 6 months</p>
</dd>
<dt><code>sfs8p_0</code></dt><dd><p>Substance Frequency Scale - Baseline</p>
</dd>
<dt><code>sfs8p_3</code></dt><dd><p>Substance Frequency Scale - 3 months</p>
</dd>
<dt><code>sfs8p_6</code></dt><dd><p>Substance Frequency Scale - 6 months</p>
</dd>
<dt><code>eps7p_0</code></dt><dd><p>Emotional Problems Scale - Baseline</p>
</dd>
<dt><code>eps7p_3</code></dt><dd><p>Emotional Problems Scale - 3 months</p>
</dd>
<dt><code>eps7p_6</code></dt><dd><p>Emotional Problems Scale - 6 months</p>
</dd>
<dt><code>ias5p_0</code></dt><dd><p>Illegal Activities Scale - baseline</p>
</dd>
<dt><code>dss9_0</code></dt><dd><p>depressive symptom scale - baseline</p>
</dd>
<dt><code>mhtrt_0</code></dt><dd><p>mental health treatment in the past 90 days - baseline</p>
</dd>
<dt><code>sati_0</code></dt><dd><p>substance abuse treatment index - baseline</p>
</dd>
<dt><code>sp_sm_0</code></dt><dd><p>substance problem scale (past month) - baseline</p>
</dd>
<dt><code>sp_sm_3</code></dt><dd><p>substance problem scale (past month) - 3 months</p>
</dd>
<dt><code>sp_sm_6</code></dt><dd><p>substance problem scale (past month) - 6 months</p>
</dd>
<dt><code>gvs</code></dt><dd><p>General Victimization Scale</p>
</dd>
<dt><code>ers21_0</code></dt><dd><p>Environmental Risk Scale - baseline</p>
</dd>
<dt><code>ada_0</code></dt><dd><p>adjusted days abstinent (any in past 90) - baseline</p>
</dd>
<dt><code>ada_3</code></dt><dd><p>adjusted days abstinent (any in past 90) - 3 months</p>
</dd>
<dt><code>ada_6</code></dt><dd><p>adjusted days abstinent (any in past 90) - 6 months</p>
</dd>
<dt><code>recov_0</code></dt><dd><p>in recovery - baseline</p>
</dd>
<dt><code>recov_3</code></dt><dd><p>in recovery - 3 months</p>
</dd>
<dt><code>recov_6</code></dt><dd><p>in recovery - 6 months</p>
</dd>
<dt><code>subsgrps_n</code></dt><dd><p>primarily opioid using youth vs alcohol/marijuana using youth vs                             other</p>
</dd>
</dl>



<h3>Source</h3>

<p>Diamond, G., Godley, S. H., Liddle, H. A., Sampl, S., Webb, C., Tims, F. M., &amp; Meyers, R. (2002). Five outpatient treatment models for adolescent marijuana use: a description of the Cannabis Youth Treatment Interventions. Addiction, 97, 70-83.
</p>


<h3>References</h3>

<p>Diamond, G., Godley, S. H., Liddle, H. A., Sampl, S., Webb, C., Tims, F. M., &amp; Meyers, R. (2002). Five outpatient treatment models for adolescent marijuana use: a description of the Cannabis Youth Treatment Interventions. Addiction, 97, 70-83.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(dat)
## maybe str(dat) ; plot(dat) ...
</code></pre>

<hr>
<h2 id='get.weights'>Extract propensity score weights</h2><span id='topic+get.weights'></span>

<h3>Description</h3>

<p>Extracts propensity score weights from a <code>ps.cont</code> object.</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.weights(ps1, stop.method = "wcor", withSampW = TRUE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.weights_+3A_ps1">ps1</code></td>
<td>
<p>a <code>ps.cont</code> object</p>
</td></tr>
<tr><td><code id="get.weights_+3A_stop.method">stop.method</code></td>
<td>
<p>indicates which set of weights to retrieve from the <code>ps.cont</code> object</p>
</td></tr>
<tr><td><code id="get.weights_+3A_withsampw">withSampW</code></td>
<td>
<p>Returns weights with sample weights multiplied in, if they were provided in the original <code>ps.cont</code> call.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of weights</p>


<h3>Author(s)</h3>

<p>Donna L. Coffman</p>


<h3>See Also</h3>

<p><code><a href="#topic+ps.cont">ps.cont</a></code></p>

<hr>
<h2 id='plot.ps.cont'>Plot the 'ps.cont' object.</h2><span id='topic+plot.ps.cont'></span>

<h3>Description</h3>

<p>This function produces a collection of diagnostic plots for 'ps.cont' objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ps.cont'
plot(x, plots = "optimize", subset = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.ps.cont_+3A_x">x</code></td>
<td>
<p>'ps.cont' object</p>
</td></tr>
<tr><td><code id="plot.ps.cont_+3A_plots">plots</code></td>
<td>
<p>An indicator of which type of plot is desired. The options are
* '&quot;optimize&quot;' A plot of the balance criteria as a function of the GBM
iteration.
* '&quot;es&quot;' Plots of the standardized effect size of the pre-treatment
variables before and after weighting</p>
</td></tr>
<tr><td><code id="plot.ps.cont_+3A_subset">subset</code></td>
<td>
<p>Used to restrict which of the 'stop.method's will be used
in the figure.</p>
</td></tr>
<tr><td><code id="plot.ps.cont_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns diagnostic plots for 'ps.cont' objects.
</p>


<h3>See Also</h3>

<p>[ps.cont]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   ## Not run: plot(test.mod)

</code></pre>

<hr>
<h2 id='ps.cont'>Gradient boosted propensity score estimation for continuous exposures</h2><span id='topic+ps.cont'></span>

<h3>Description</h3>

<p>'ps.cont' calculates propensity scores using gradient boosted
regression and provides diagnostics of the resulting propensity scores.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps.cont(
  formula,
  data,
  n.trees = 10000,
  interaction.depth = 3,
  shrinkage = 0.01,
  bag.fraction = 1,
  sampw = NULL,
  print.level = 2,
  verbose = FALSE,
  stop.method = "wcor",
  treat.as.cont = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ps.cont_+3A_formula">formula</code></td>
<td>
<p>An object of class [formula]: a symbolic
description of the propensity score model to be fit with the treatment
variable on the left side of the formula and the potential confounding
variables on the right side.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_data">data</code></td>
<td>
<p>A dataset that includes the treatment as well as the
potential confounding variables.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_n.trees">n.trees</code></td>
<td>
<p>Number of gbm iterations passed on to [gbm]. Default: 10000.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_interaction.depth">interaction.depth</code></td>
<td>
<p>A positive integer denoting the tree depth used in
gradient boosting. Default: 3.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_shrinkage">shrinkage</code></td>
<td>
<p>A numeric value between 0 and 1 denoting the learning rate.
See [gbm] for more details. Default: 0.01.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_bag.fraction">bag.fraction</code></td>
<td>
<p>A numeric value between 0 and 1 denoting the fraction of
the observations randomly selected in each iteration of the gradient
boosting algorithm to propose the next tree. See [gbm] for
more details. Default: 1.0.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_sampw">sampw</code></td>
<td>
<p>Optional sampling weights.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_print.level">print.level</code></td>
<td>
<p>The amount of detail to print to the screen. Default: 2.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_verbose">verbose</code></td>
<td>
<p>If 'TRUE', lots of information will be printed to monitor the
the progress of the fitting. Default: 'FALSE'.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_stop.method">stop.method</code></td>
<td>
<p>A method or methods of measuring and summarizing balance
across pretreatment variables. Current options are 'wcor', the weighted Pearson
correlation, summarized by using the mean across the pretreatment variables.
Default: 'wcor'.</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_treat.as.cont">treat.as.cont</code></td>
<td>
<p>Used as a check on whether the exposure has greater than
five levels. If it does not and treat.as.cont=FALSE, an error will be
produced. Default: FALSE</p>
</td></tr>
<tr><td><code id="ps.cont_+3A_...">...</code></td>
<td>
<p>Additional arguments that are passed to ps function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class 'ps.cont', a list containing
</p>
<p>* 'gbm.obj' The returned [gbm] object.
</p>
<p>* 'treat' The treatment variable.
</p>
<p>* 'desc' A list containing balance tables for each method selected in
'stop.methods'. Includes a component for the unweighted
analysis names &ldquo;unw&rdquo;. Each 'desc' component includes
a list with the following components
</p>
<p>- 'ess' The effective sample size.
</p>
<p>- 'n' The number of subjects.
</p>
<p>- 'max.wcor' The largest weighted correlation across the covariates.
</p>
<p>- 'mean.wcor' The average weighted correlation across the covariates.
</p>
<p>- 'rms.wcor' The root mean square of the absolute weighted correlations across the
covariates.
</p>
<p>- 'bal.tab' a (potentially large) table summarizing the quality of the
weights for balancing the distribution of the pretreatment covariates.
This table is best extracted using the [bal.table] method.
See the help for [bal.table] for details.
</p>
<p>- 'n.trees' The estimated optimal number of [gbm]
iterations to optimize the loss function.
</p>
<p>* 'ps.den' Denominator values for the propensity score weights.
</p>
<p>* 'ps.num' Numerator values for the propensity score weights.
</p>
<p>* 'w' The propensity score weights. If sampling weights are given then these
are incorporated into these weights.
</p>
<p>* 'datestamp' Records the date of the analysis.
</p>
<p>* 'parameters' Saves the 'ps.cont' call.
</p>
<p>* 'alerts' Text containing any warnings accumulated during the estimation.
</p>
<p>* 'iters' A sequence of iterations used in the GBM fits used by 'plot' function.
</p>
<p>* 'balance' The balance measures for the pretreatment covariates used in plotting.
</p>
<p>* 'sampw' The sampling weights as specified in the 'sampw' argument.
</p>
<p>* 'preds' Predicted values based on the propensity score model.
</p>
<p>* 'covariates' Data frame containing the covariates used in the propensity score model.
</p>
<p>* 'n.trees' Maximum number of trees considered in GBM fit.
</p>
<p>* 'data' Data as specified in the 'data' argument.
</p>


<h3>References</h3>

<p>Zhu, Y., Coffman, D. L., &amp; Ghosh, D. (2015). A boosting algorithm for
estimating generalized propensity scores with continuous treatments.
*Journal of Causal Inference*, 3(1), 25-40. doi: <a href="https://doi.org/10.1515/jci-2014-0022">10.1515/jci-2014-0022</a>
</p>


<h3>See Also</h3>

<p>[gbm], [plot.ps.cont], [bal.table], [summary.ps.cont]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  ## Not run: test.mod &lt;- ps.cont(tss_0 ~ sfs8p_0 + sati_0 + sp_sm_0
          + recov_0 + subsgrps_n + treat, data=dat
## End(Not run)

</code></pre>

<hr>
<h2 id='summary.ps.cont'>Displays a useful description of a 'ps.cont' object.</h2><span id='topic+summary.ps.cont'></span>

<h3>Description</h3>

<p>Computes a short summary table describing the size of the dataset and the
quality of the propensity score weights about a stored 'ps.cont' object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ps.cont'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.ps.cont_+3A_object">object</code></td>
<td>
<p>A 'ps.cont' object</p>
</td></tr>
<tr><td><code id="summary.ps.cont_+3A_...">...</code></td>
<td>
<p>Additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>*'n' The number of subjects.
*'ess' The effective sample size.
*'max.wcor' The largest weighted correlation across the covariates.
*'mean.wcor' The average weighted correlation across the covariates.
*'rms.wcor' The root mean square of the absolute weighted correlations across
the covariates.
*'iter' The estimated optimal number of [gbm] iterations to optimize the
loss function.
</p>


<h3>See Also</h3>

<p>[ps.cont]
</p>


<h3>Examples</h3>

<pre><code class='language-R'>   ## Not run: summary(test.mod)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
