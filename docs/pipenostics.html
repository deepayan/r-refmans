<!DOCTYPE html><html lang="en"><head><title>Help for package pipenostics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pipenostics}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#pipenostics-package'><p>pipenostics: Diagnostics, Reliability and Predictive Maintenance of Pipeline Systems</p></a></li>
<li><a href='#api5l3t'><p>API 5L. Values of SMYS and UTS</p></a></li>
<li><a href='#b31crvl'><p>ASME B31G. Basic computer program CRVL.BAS</p></a></li>
<li><a href='#b31gacd'><p>ASME B31G. Allowable corrosion depth in pipe</p></a></li>
<li><a href='#b31gacl'><p>ASME B31G. Allowable corrosion length in pipe</p></a></li>
<li><a href='#b31gafr'><p>ASME B31G. A-factor</p></a></li>
<li><a href='#b31gdata'><p>ASME B31G. Corrosion state of 12 pipes</p></a></li>
<li><a href='#b31gdep'><p>ASME B31G. Design pressure of pipe</p></a></li>
<li><a href='#b31gmodpf'><p>ASME B31G. Failure pressure of the corroded pipe (modified)</p></a></li>
<li><a href='#b31gops'><p>ASME B31G. Operational status of pipe</p></a></li>
<li><a href='#b31gpf'><p>ASME B31G. Failure pressure of the corroded pipe (original)</p></a></li>
<li><a href='#b31gsap'><p>ASME B31G. Safe maximum pressure for the corroded area of pipe</p></a></li>
<li><a href='#c_k'><p>Convert to Celsius scale</p></a></li>
<li><a href='#dnvpf'><p>DNV-RP-F101. Failure pressure of the corroded pipe</p></a></li>
<li><a href='#dropg'><p>Flow rate drop in pipe</p></a></li>
<li><a href='#dropp'><p>Pressure drop in pipe</p></a></li>
<li><a href='#dropt'><p>Temperature drop in cylindrical steel pipe due heat loss</p></a></li>
<li><a href='#f_k'><p>Convert to Fahrenheit scale</p></a></li>
<li><a href='#flowls'><p>List all possible flow paths in district heating network</p></a></li>
<li><a href='#fric_buzelli'><p>Estimate pipe friction factor with Buzelli formula</p></a></li>
<li><a href='#fric_romeo'><p>Estimate pipe friction factor with Romeo's formula</p></a></li>
<li><a href='#fric_vatankhan'><p>Estimate pipe friction factor with Vatankhah formula</p></a></li>
<li><a href='#geoarea'><p>Calculate geographical metrics</p></a></li>
<li><a href='#inch_mm'><p>Millimeters to inches</p></a></li>
<li><a href='#k_c'><p>Covert to Kelvin scale</p></a></li>
<li><a href='#kgf_mpa'><p>Megapascals to kilogram-force per square</p></a></li>
<li><a href='#loss_flux'><p>Convert heat flux to specific heat loss power</p></a></li>
<li><a href='#m278hlair'><p>Minenergo-278. Normative heat loss of open-air pipe</p></a></li>
<li><a href='#m278hlcha'><p>Minenergo-278. Normative heat loss of pipe in channel</p></a></li>
<li><a href='#m278hlund'><p>Minenergo-278. Normative heat loss of underground pipe</p></a></li>
<li><a href='#m278insdata'><p>Minenergo-278. Thermal conductivity terms of pipe insulation materials</p></a></li>
<li><a href='#m278inshcm'><p>Minenergo-278. Thermal conductivity of pipe insulation materials</p></a></li>
<li><a href='#m278soildata'><p>Minenergo-278. Thermal conductivity of subsoil surrounding pipe</p></a></li>
<li><a href='#m325beta'><p>Minenergo-325. Local heat loss coefficient</p></a></li>
<li><a href='#m325nhl'><p>Minenergo-325. Normative heat loss of pipe</p></a></li>
<li><a href='#m325nhldata'><p>Minenergo-325. Normative heat loss data</p></a></li>
<li><a href='#m325testbench'><p>Minenergo-325. Test bench of district heating network</p></a></li>
<li><a href='#m325tracebw'><p>Minenergo-325. Massively trace backwards thermal-hydraulic regime for</p>
district heating network</a></li>
<li><a href='#m325tracefw'><p>Minenergo-325. Massively trace forwards thermal-hydraulic regime for district</p>
heating network</a></li>
<li><a href='#m325traceline'><p>Minenergo-325. Trace thermal-hydraulic regime for linear segment of district</p>
heating network</a></li>
<li><a href='#mepof'><p>Probability of failure of the corroded pipe within maximum entropy</p></a></li>
<li><a href='#meteos'><p>Get list of weather stations (meteos)</p></a></li>
<li><a href='#mgtdhid'><p>Get ground temperature</p></a></li>
<li><a href='#mm_inch'><p>Inches to mm</p></a></li>
<li><a href='#mpa_kgf'><p>Kilogram-force per square cm to megapascals</p></a></li>
<li><a href='#mpa_psi'><p>Pounds per square inch to megapascals</p></a></li>
<li><a href='#pcorrcpf'><p>PCORRC. Failure pressure of the corroded pipe</p></a></li>
<li><a href='#psi_mpa'><p>Megapascals to pounds per square inch</p></a></li>
<li><a href='#re_u'><p>Estimate Reynolds number</p></a></li>
<li><a href='#shell92pf'><p>Shell92. Failure pressure of the corroded pipe</p></a></li>
<li><a href='#strderate'><p>DNV-RP-F101. De-rate yield stress and tensile strength of pipe due to</p>
temperature</a></li>
<li><a href='#tracebw'><p>Massively trace backwards thermal-hydraulic regime for district</p>
heating network</a></li>
<li><a href='#tracefw'><p>Massively trace forwards thermal-hydraulic regime for district</p>
heating network</a></li>
<li><a href='#traceline'><p>Trace thermal-hydraulic regime for linear segment of district</p>
heating network</a></li>
<li><a href='#wth_d'><p>Derive the wall thickness depending on the outside diameter of pipe</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Diagnostics, Reliability and Predictive Maintenance of Pipeline
Systems</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions representing some useful empirical and data-driven
    models of heat loss, corrosion diagnostics, reliability and predictive
    maintenance of pipeline systems. The package is an option for technical
    engineering departments of heat generating and heat transfer companies
    that use or plan to use regulatory calculations in their activities.
    Methods are described in
    Timashev et al. (2016) &lt;<a href="https://doi.org/10.1007%2F978-3-319-25307-7">doi:10.1007/978-3-319-25307-7</a>&gt;,
    A.C.Reddy (2017) &lt;<a href="https://doi.org/10.1016%2Fj.matpr.2017.07.081">doi:10.1016/j.matpr.2017.07.081</a>&gt;,
    Minenergo (2008) <a href="https://docs.cntd.ru/document/902148459">https://docs.cntd.ru/document/902148459</a>,
    Minenergo (2005) <a href="https://docs.cntd.ru/document/1200035568">https://docs.cntd.ru/document/1200035568</a>,
    Xing LU. (2014) &lt;<a href="https://doi.org/10.1080%2F23744731.2016.1258371">doi:10.1080/23744731.2016.1258371</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://omega1x.github.io/pipenostics/">https://omega1x.github.io/pipenostics/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/omega1x/pipenostics/issues">https://github.com/omega1x/pipenostics/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, iapws</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), covr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-02 13:43:18 UTC; devpro</td>
</tr>
<tr>
<td>Author:</td>
<td>Yuri Possokhov <a href="https://orcid.org/0000-0002-3570-4337"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yuri Possokhov &lt;omega1x@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-04 15:33:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='pipenostics-package'>pipenostics: Diagnostics, Reliability and Predictive Maintenance of Pipeline Systems</h2><span id='topic+pipenostics'></span><span id='topic+pipenostics-package'></span>

<h3>Description</h3>

<p>Functions representing some useful empirical and data-driven models of heat loss, corrosion diagnostics, reliability and predictive maintenance of pipeline systems. The package is an option for technical engineering departments of heat generating and heat transfer companies that use or plan to use regulatory calculations in their activities. Methods are described in Timashev et al. (2016) <a href="https://doi.org/10.1007/978-3-319-25307-7">doi:10.1007/978-3-319-25307-7</a>, A.C.Reddy (2017) <a href="https://doi.org/10.1016/j.matpr.2017.07.081">doi:10.1016/j.matpr.2017.07.081</a>, Minenergo (2008) <a href="https://docs.cntd.ru/document/902148459">https://docs.cntd.ru/document/902148459</a>, Minenergo (2005) <a href="https://docs.cntd.ru/document/1200035568">https://docs.cntd.ru/document/1200035568</a>, Xing LU. (2014) <a href="https://doi.org/10.1080/23744731.2016.1258371">doi:10.1080/23744731.2016.1258371</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Yuri Possokhov <a href="mailto:omega1x@gmail.com">omega1x@gmail.com</a> (<a href="https://orcid.org/0000-0002-3570-4337">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://omega1x.github.io/pipenostics/">https://omega1x.github.io/pipenostics/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/omega1x/pipenostics/issues">https://github.com/omega1x/pipenostics/issues</a>
</p>
</li></ul>


<hr>
<h2 id='api5l3t'>API 5L. Values of SMYS and UTS</h2><span id='topic+api5l3t'></span>

<h3>Description</h3>

<p>Data represents specified minimum yield strength (SMYS) and ultimate
tensile strength (UTS) both achieved when producing line pipes
according to
<a href="https://law.resource.org/pub/us/cfr/ibr/002/api.5l.2004.pdf">API SPECIFICATION 5L</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>api5l3t
</code></pre>


<h3>Format</h3>

<p>A data frame with 11 rows and 3 variables:
</p>

<dl>
<dt>grade</dt><dd><p>designation of standard grade of manufactured pipe. Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.</p>
</dd>
<dt>smys</dt><dd><p>SMYS - specified minimum yield strength, [<em>psi</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>uts</dt><dd><p>UTS - ultimate tensile strength, [<em>psi</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/api.5l.2004.pdf">https://law.resource.org/pub/us/cfr/ibr/002/api.5l.2004.pdf</a>
</p>

<hr>
<h2 id='b31crvl'>ASME B31G. Basic computer program CRVL.BAS</h2><span id='topic+b31crvl'></span>

<h3>Description</h3>

<p>Imitation of <em>CVRL.BAS</em> computer program presented in
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>
<em>Appendix A</em> for determining allowable length and allowable operating
pressure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31crvl(maop, d, wth, smys, def = 0.72, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31crvl_+3A_maop">maop</code></td>
<td>
<p>maximum allowable operating pressure - <em>MAOP</em>, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31crvl_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31crvl_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31crvl_+3A_smys">smys</code></td>
<td>
<p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31crvl_+3A_def">def</code></td>
<td>
<p>appropriate (combined) design factor from
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.4.2002.pdf">ASME B31.4</a>,
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.8.2003.pdf">ASME B31.8</a>,
or <a href="https://www.asme.org/codes-standards/find-codes-standards/b31-11-slurry-transportation-piping-systems">ASME B31.11</a>,
[]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31crvl_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31crvl_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Columns <em>maop</em>, <em>d</em>, <em>wth</em>, <em>smys</em>, <em>def</em>,
<em>depth</em>, <em>l</em> in the output <em>data.frame</em> come from
function's input, other columns are calculated.
</p>
<p>For univariate case (when lengths of all input vectors are one) messages
that imitate <em>CRVL.BAS</em> console output are printed.
</p>


<h3>Value</h3>

<p>Object of <em>S3</em>-class <em>crvl</em> which is a <em>data.frame</em> with
the next numeric columns:
</p>

<dl>
<dt>maop</dt><dd><p>maximum allowable operating pressure - <em>MAOP</em>, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>d</dt><dd><p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>wth</dt><dd><p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>smys</dt><dd><p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>def</dt><dd><p>appropriate (combined) design factor from
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.4.2002.pdf">ASME B31.4</a>,
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.8.2003.pdf">ASME B31.8</a>,
or <a href="https://www.asme.org/codes-standards/find-codes-standards/b31-11-slurry-transportation-piping-systems">ASME B31.11</a>, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>depth</dt><dd><p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>l</dt><dd><p>measured maximum longitudial length of corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>status</dt><dd><p>Operational status of pipe:
<em>1</em> - excellent,
<em>2</em> - monitoring is recommended,
<em>3</em> - alert! replace the pipe immediately!
Type: <code><a href="checkmate.html#topic+assert_numeric">assert_numeric</a></code>.</p>
</dd>
<dt>design_pressure</dt><dd><p>design pressure of pipe, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>safe_pressure</dt><dd><p>safe maximum pressure for the corroded area, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>pressure_exceeding</dt><dd><p>whether operator's action is required to reduce
<em>MOAP</em> lower than the maximum safe pressure
of the corroded area. Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</dd>
<dt>allowed_corrosion_depth</dt><dd><p>allowable depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>A</dt><dd><p>intermediate factor related to the geometry of the corroded area, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>allowed_corrosion_length</dt><dd><p>allowable length of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>AP</dt><dd><p>another intermediate factor related to the geometry of the corroded area, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
</dl>



<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31 G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASME B31G</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pipenostics)

## Further examples are inspired by those used in Appendix A of
## ASME B31G-1991 to verify correct entry of CRVL.BAS source code

## Example 1
b31crvl(maop = 910, d = 30, wth = .438, smys = 52000, def  = .72, depth = .1, l = 7.5)
#
# -- Calculated data --
# Intermediate factor (A) = 1.847
# Design pressure = 1093 PSI; Safe pressure = 1093 PSI
# Pipe may be operated safely at MAOP, 910 PSI
# With corrosion length 7.500 inch, maximum allowed corrosion depth is 0.2490 inch; A = 1.847
# With corrosion depth 0.100 inch, maximum allowed corrosion length is Inf inch; A = 5.000


## Example 2
b31crvl(maop = 400, d = 20, wth = .25, smys = 35000, def  = 0.5, depth = 0.18, l = 10)
#
# -- Calculated data --
# Intermediate factor (A) = 3.993
# Design pressure = 438 PSI; Safe pressure = 284 PSI
# Reduce operating pressure so it will not exceed 284 PSI, and so operate legally and safely
# With corrosion length 10.000 inch, maximum allowed corrosion depth is 0.0790 inch; A = 3.993
# With corrosion depth 0.180 inch, maximum allowed corrosion length is 2.0180 inch; A = 0.806


## Example 3
b31crvl(maop = 910, d = 24, wth = .432, smys = 52000, def  = .72, depth = 0.13, l = 30)
#
# -- Calculated data --
# Intermediate factor (A) = 8.320
# Design pressure = 1348 PSI; Safe pressure = 1037 PSI
# Pipe may be operated safely at MAOP, 910 PSI
# With corrosion length 30.000 inch, maximum allowed corrosion depth is 0.1670 inch; A = 8.320
# With corrosion depth 0.130 inch, maximum allowed corrosion length is Inf inch; A = 5.000


## Example 4
b31crvl(maop = 910, d = 24, wth = .432, smys = 52000, def  = .72, depth = .3, l = 30)
#
# -- Calculated data --
# Intermediate factor (A) = 8.320
# Design pressure = 1348 PSI; Safe pressure = 453 PSI
# Reduce operating pressure so it will not exceed 453 PSI, and so operate legally and safely
# With corrosion length 30.000 inch, maximum allowed corrosion depth is 0.1670 inch; A = 8.320
# With corrosion depth 0.300 inch, maximum allowed corrosion length is 12.8670 inch; A = 3.568


## Example 5
b31crvl(maop = 731, d = 24, wth = .281, smys = 52000, def  = 0.72, depth = 0.08, l = 15)
#
# -- Calculated data --
# Intermediate factor (A) = 5.158
# Design pressure = 877 PSI; Safe pressure = 690 PSI
# Reduce operating pressure so it will not exceed 690 PSI, and so operate legally and safely
# With corrosion length 15.000 inch, maximum allowed corrosion depth is 0.0680 inch; A = 5.158
# With corrosion depth 0.080 inch, maximum allowed corrosion length is 11.6340 inch; A = 4.000


## Example 6
b31crvl(maop = 1e3, d = 36, wth = .5, smys = 52000, def  = 0.72, depth = 0.41, l = 100)
# Alert! Corrosion depth exceeds 80 % of pipe wall! Pipe must be replaced!
# -- Calculated data --
# Intermediate factor (A) = 21.048
# Design pressure = 1040 PSI; Safe pressure = 206 PSI
# Repair or replace pipe because corrosion depth exceeds 80 % of pipe wall!
# Reduce operating pressure so it will not exceed 206 PSI, and so operate legally and safely
# With corrosion length 100.000 inch, maximum allowed corrosion depth is 0.0630 inch; A = 21.048
# With corrosion depth 0.410 inch, maximum allowed corrosion length is 2.5560 inch; A = 0.538
# But 0.410 inch exceeds allowable corrosion depth!!!


## Example 7
b31crvl(maop = 877, d = 12.625, wth = .5, smys = 35000, def  = .4, depth = .035, l = 3)
# Corrosion depth is less than 10 % of pipe wall. No resrictions on operation
# -- Calculated data --
# Intermediate factor (A) = 1.066
# Design pressure = 1109 PSI; Safe pressure = 1109 PSI
# Pipe may be operated safely at MAOP, 877 PSI
# With corrosion length 3.000 inch, maximum allowed corrosion depth is 0.4000 inch; A = 1.066
# With corrosion depth 0.035 inch, maximum allowed corrosion length is Inf inch; A = 5.000


## Example 8
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .125, l = 12)
#
# -- Calculated data --
# Intermediate factor (A) = 3.093
# Design pressure = 875 PSI; Safe pressure = 845 PSI
# Pipe may be operated safely at MAOP, 790 PSI
# With corrosion length 12.000 inch, maximum allowed corrosion depth is 0.1790 inch; A = 3.093
# With corrosion depth 0.125 inch, maximum allowed corrosion length is 15.5190 inch; A = 4.000


## TEST #1
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .179, l = 12)
#
#-- Calculated data --
# Intermediate factor (A) = 3.093
# Design pressure = 875 PSI; Safe pressure = 791 PSI
# Pipe may be operated safely at MAOP, 790 PSI
# With corrosion length 12.000 inch, maximum allowed corrosion depth is 0.1790 inch; A = 3.093
# With corrosion depth 0.179 inch, maximum allowed corrosion length is 12.1820 inch; A = 3.140


## TEST #1A
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .179, l = 12.182)
#
# -- Calculated data --
# Intermediate factor (A) = 3.140
# Design pressure = 875 PSI; Safe pressure = 790 PSI
# Pipe may be operated safely at MAOP, 790 PSI
# With corrosion length 12.182 inch, maximum allowed corrosion depth is 0.1780 inch; A = 3.140
# With corrosion depth 0.179 inch, maximum allowed corrosion length is 12.1820 inch; A = 3.140


## TEST #1B
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .180, l = 12.182)
#
# -- Calculated data --
# Intermediate factor (A) = 3.140
# Design pressure = 875 PSI; Safe pressure = 789 PSI
# Reduce operating pressure so it will not exceed 789 PSI, and so operate legally and safely
# With corrosion length 12.182 inch, maximum allowed corrosion depth is 0.1780 inch; A = 3.140
# With corrosion depth 0.180 inch, maximum allowed corrosion length is 11.9610 inch; A = 3.083


## TEST #2
b31crvl(maop = 790, d = 24, wth = .5, smys = 42000, def  = .5, depth = .179, l = 12.297)
#
# -- Calculated data --
# Intermediate factor (A) = 3.170
# Design pressure = 875 PSI; Safe pressure = 789 PSI
# Reduce operating pressure so it will not exceed 789 PSI, and so operate legally and safely
# With corrosion length 12.297 inch, maximum allowed corrosion depth is 0.1780 inch; A = 3.170
# With corrosion depth 0.179 inch, maximum allowed corrosion length is 12.1820 inch; A = 3.140


## All examples at once:
data(b31gdata)
examples &lt;- with(b31gdata, b31crvl(maop, d, wth, smys, def, depth, l))

</code></pre>

<hr>
<h2 id='b31gacd'>ASME B31G. Allowable corrosion depth in pipe</h2><span id='topic+b31gacd'></span>

<h3>Description</h3>

<p>Calculate allowable depth of the corroded area in the pipe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gacd(dep, maop, d, wth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gacd_+3A_dep">dep</code></td>
<td>
<p>design pressure of pipe, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacd_+3A_maop">maop</code></td>
<td>
<p>maximum allowable operating pressure - <em>MAOP</em>, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacd_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacd_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacd_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of corroded area, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>allowable depth of the corroded area in the pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASTME B31</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 b31gacd(1093, 910, 30, .438, 7.5)
 # [1] 0.249  # [inch]

</code></pre>

<hr>
<h2 id='b31gacl'>ASME B31G. Allowable corrosion length in pipe</h2><span id='topic+b31gacl'></span>

<h3>Description</h3>

<p>Calculate allowable length of the corroded area in the pipe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gacl(dep, maop, d, wth, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gacl_+3A_dep">dep</code></td>
<td>
<p>design pressure of pipe, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacl_+3A_maop">maop</code></td>
<td>
<p>maximum allowable operating pressure - <em>MAOP</em>, [<em>PSI</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacl_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacl_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacl_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gacl_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of the corroded area, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>allowable length of the corroded area in the pipe, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASTME B31</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 b31gacl(1093, 910, 30, .438, .1, 7.5)
 # [1] Inf  # [inch] - corrosion is low, no limit for the corroded area length

 b31gacl(438, 400, 20, .25, .18, 10)
 # [1] 2.018  # [inch] - finite allowed length of the corroded area


</code></pre>

<hr>
<h2 id='b31gafr'>ASME B31G. A-factor</h2><span id='topic+b31gafr'></span>

<h3>Description</h3>

<p>Calculate intermediate factor related to the geometry of the corroded area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gafr(d, wth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gafr_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gafr_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gafr_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of the corroded area, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Intermediate factor related to the geometry of the corroded area, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASTME B31</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 b31gafr(30, .438, 7.5)
 # [1] 1.847  # A-factor is less than 5, so the corrosion is not critical

</code></pre>

<hr>
<h2 id='b31gdata'>ASME B31G. Corrosion state of 12 pipes</h2><span id='topic+b31gdata'></span>

<h3>Description</h3>

<p>Data represents examples used for verification of computer program
<em>CRVL.BAS</em> listed in <em>Appendix A</em> of
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gdata
</code></pre>


<h3>Format</h3>

<p>A data frame with 12 rows and 15 variables:
</p>

<dl>
<dt>maop</dt><dd><p>maximum allowable operating pressure - <em>MAOP</em>, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>d</dt><dd><p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>wth</dt><dd><p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>smys</dt><dd><p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>def</dt><dd><p>appropriate (combined) design factor from
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.4.2002.pdf">ASME B31.4</a>,
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.8.2003.pdf">ASME B31.8</a>,
or <a href="https://www.asme.org/codes-standards/find-codes-standards/b31-11-slurry-transportation-piping-systems">ASME B31.11</a>,
[]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>depth</dt><dd><p>measured maximum depth of the corroded area, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>l</dt><dd><p>measured maximum longitudinal length of corroded area, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>status</dt><dd><p>Operational status of pipe:
<em>1</em> - excellent,
<em>2</em> - monitoring is recommended,
<em>3</em> - alert! replace the pipe immediately!
Type: <code><a href="checkmate.html#topic+assert_numeric">assert_numeric</a></code>.
</p>
</dd>
<dt>design_pressure</dt><dd><p>design pressure of pipe, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>safe_pressure</dt><dd><p>safe maximum pressure for the corroded area, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>pressure_exceeding</dt><dd><p>whether operator's action is required to reduce
<em>MOAP</em> lower than the maximum safe pressure
of the corroded area. . Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</dd>
<dt>allowed_corrosion_depth</dt><dd><p>allowable depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>A</dt><dd><p>intermediate factor related to the geometry of the corroded area, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>allowed_corrosion_length</dt><dd><p>allowable length of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>AP</dt><dd><p>another intermediate factor related to the geometry of the corroded area, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf</a>
</p>

<hr>
<h2 id='b31gdep'>ASME B31G. Design pressure of pipe</h2><span id='topic+b31gdep'></span>

<h3>Description</h3>

<p>Calculate the design pressure that according to
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>
is the conditioned construction characteristic that should not in no way
exceeded.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gdep(d, wth, smys, def)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gdep_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gdep_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gdep_+3A_smys">smys</code></td>
<td>
<p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gdep_+3A_def">def</code></td>
<td>
<p>appropriate (combined) design factor from
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.4.2002.pdf">ASME B31.4</a>,
<a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31.8.2003.pdf">ASME B31.8</a>,
or <a href="https://www.asme.org/codes-standards/find-codes-standards/b31-11-slurry-transportation-piping-systems">ASME B31.11</a>, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Design pressure of pipe, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASTME B31</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 b31gdep(30, .438, 52e3, .72)
 # [1] 1093.748  # [PSI]

</code></pre>

<hr>
<h2 id='b31gmodpf'>ASME B31G. Failure pressure of the corroded pipe (modified)</h2><span id='topic+b31gmodpf'></span>

<h3>Description</h3>

<p>Calculate failure pressure of the corroded pipe
according to <em>Modified B31G</em>,
<em>Level-1</em> algorithm listed
in <a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>.
</p>
<p>The next assumption of corrosion shape is adopted by <em>Modified B31G</em>:
</p>
<p><img src="../help/figures/b31gmodpf.png" alt="b31gmodpf.png" />
</p>
<p>There d<em>cor</em> represents argument <code>depth</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gmodpf(d, wth, smys, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gmodpf_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gmodpf_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gmodpf_+3A_smys">smys</code></td>
<td>
<p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gmodpf_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gmodpf_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since the definition of flow stress, <em>Sflow</em>, in
<a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>
is recommended with <em>Level 1</em> as follows:
</p>
<p style="text-align: center;"><code class="reqn">Sflow =  1.1SMYS</code>
</p>

<p>no other possibilities of its evaluation are incorporated.
</p>
<p>For this code we avoid possible semantic optimization to
preserve readability and correlation with original text description
in <a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>.
At the same time source code for estimated failure pressure preserves
maximum affinity with its semantic description in <a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>.
</p>
<p>Numeric <code>NA</code>s may appear in case prescribed conditions of
use are offended.
</p>


<h3>Value</h3>

<p>Estimated failure pressure of the corroded pipe, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ol>
<li> <p><a href="https://store.accuristech.com:443/standards/asme-b31g-2012-r2017?product_id=1842873">ASME B31G-2012</a>.
Manual for determining the remaining strength of corroded pipelines:
supplement to <em>B31 Code</em> for pressure piping.
</p>
</li>
<li><p>  S. Timashev and A. Bushinskaya, <em>Diagnostics and Reliability
of Pipeline Systems</em>, Topics in Safety, Risk, Reliability and Quality 30,
<strong>DOI 10.1007/978-3-319-25307-7</strong>
</p>
</li></ol>



<h3>See Also</h3>

<p>Other fail pressure functions: <code><a href="#topic+b31gpf">b31gpf</a></code>, <code><a href="#topic+dnvpf">dnvpf</a></code>,
<code><a href="#topic+shell92pf">shell92pf</a></code>, <code><a href="#topic+pcorrcpf">pcorrcpf</a></code>
</p>
<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 ## Example: maximum percentage disparity of original B31G
 ## algorithm and modified B31G showed on CRVL.BAS data
 with(b31gdata, {
   original  &lt;- b31gpf(d, wth, smys, depth, l)
   modified  &lt;- b31gmodpf(d, wth, smys, depth, l)
   round(max(100*abs(1 - original/modified), na.rm = TRUE), 4)
 })
 ## Output:
 #[1] 32.6666

 ## Example: plot disparity of original B31G algorithm and
 ## modified B31G showed on CRVL data
 with(b31gdata[-(6:7),], {
   b31g  &lt;- b31gpf(depth, wth, smys, depth, l)
   b31gmod  &lt;- b31gmodpf(depth, wth, smys, depth, l)
   axe_range &lt;- range(c(b31g, b31gmod))
   plot(b31g, b31g, type = 'b', pch = 16,
        xlab = 'Pressure, [PSI]',
        ylab = 'Pressure, [PSI]',
        main = 'Failure pressure method comparison',
        xlim = axe_range, ylim = axe_range)
   inc &lt;- order(b31g)
   lines(b31g[inc], b31gmod[inc], type = 'b', col = 'red')
   legend('topleft',
          legend = c('B31G Original',
                     'B31G Modified'),
          col = c('black', 'red'),
          lty = 'solid')
 })

</code></pre>

<hr>
<h2 id='b31gops'>ASME B31G. Operational status of pipe</h2><span id='topic+b31gops'></span>

<h3>Description</h3>

<p>Determine the operational status of pipe: is it excellent? or is
technological control required? or is it critical situation?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gops(wth, depth)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gops_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gops_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Operational status of pipe as an integer value:
</p>

<ul>
<li> <p><em>1</em> - excellent
</p>
</li>
<li> <p><em>2</em> - monitoring is recommended
</p>
</li>
<li> <p><em>3</em> - alert! replace the pipe immediately!
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_numeric">assert_numeric</a></code> and <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.
</p>


<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASTME B31</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 b31gops(.438, .1)
 # [1] 2  # typical status for the most of pipes

 b31gops(.5, .41)
 # [1] 3  # alert! Corrosion depth is too high! Replace the pipe!

</code></pre>

<hr>
<h2 id='b31gpf'>ASME B31G. Failure pressure of the corroded pipe (original)</h2><span id='topic+b31gpf'></span>

<h3>Description</h3>

<p>Calculate failure pressure of the corroded pipe
according to <em>Original B31G</em>,
<em>Level-1</em> algorithm listed
in <a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>.
</p>
<p>The next assumption of the corrosion shape is adopted by
<a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>:
</p>
<p><img src="../help/figures/b31gpf.png" alt="b31gpf.png" />
</p>
<p>There (a) is a parabolic and (b) is a rectangular idealizations of a
corroded area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gpf(d, wth, smys, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gpf_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gpf_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gpf_+3A_smys">smys</code></td>
<td>
<p>specified minimum yield of stress (<em>SMYS</em>) as a
characteristics of steel strength, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gpf_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gpf_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since the definition of flow stress, <em>Sflow</em>, in
<a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>
is recommended with <em>Level 1</em> as follows:
</p>
<p style="text-align: center;"><code class="reqn">Sflow =  1.1SMYS</code>
</p>

<p>no other possibilities of its evaluation are incorporated.
</p>
<p>For this code we avoid possible semantic optimization to
preserve readability and correlation with original text description
in <a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>.
At the same time source code for estimated failure pressure preserves
maximum affinity with its semantic description in <a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>
and slightly differs from that given by <em>Timashev et al</em>. The latter
deviates up to 0.7
(<code><a href="#topic+b31gdata">b31gdata</a></code>).
</p>
<p>Numeric <code>NA</code>s may appear in case prescribed conditions of
use are offended.
</p>


<h3>Value</h3>

<p>Estimated failure pressure of the corroded pipe, [<em>PSI</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ol>
<li> <p><a href="https://store.accuristech.com:443/standards/asme-b31g-2012-r2017?product_id=1842873">ASME B31G-2012</a>.
Manual for determining the remaining strength of corroded pipelines:
supplement to <em>B31 Code</em> for pressure piping.
</p>
</li>
<li><p>  S. Timashev and A. Bushinskaya, <em>Diagnostics and Reliability
of Pipeline Systems</em>, Topics in Safety, Risk, Reliability and Quality 30,
<strong>DOI 10.1007/978-3-319-25307-7</strong>
</p>
</li></ol>



<h3>See Also</h3>

<p>Other fail pressure functions: <code><a href="#topic+b31gmodpf">b31gmodpf</a></code>, <code><a href="#topic+dnvpf">dnvpf</a></code>,
<code><a href="#topic+shell92pf">shell92pf</a></code>, <code><a href="#topic+pcorrcpf">pcorrcpf</a></code>
</p>
<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gsap">b31gsap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 ## Example: maximum percentage disparity of original B31G
 ## algorithm and modified B31G showed on CRVL.BAS data
 with(b31gdata, {
   original  &lt;- b31gpf(d, wth, smys, depth, l)
   modified  &lt;- b31gmodpf(d, wth, smys, depth, l)
   round(max(100*abs(1 - original/modified), na.rm = TRUE), 4)
 })
 ## Output:
 #[1] 32.6666

 ## Example: plot disparity of original B31G algorithm and
 ## modified B31G showed on CRVL data
 with(b31gdata[-(6:7),], {
   b31g  &lt;- b31gpf(depth, wth, smys, depth, l)
   b31gmod  &lt;- b31gmodpf(depth, wth, smys, depth, l)
   axe_range &lt;- range(c(b31g, b31gmod))
   plot(b31g, b31g, type = 'b', pch = 16,
        xlab = 'Pressure, [PSI]',
        ylab = 'Pressure, [PSI]',
        main = 'Failure pressure method comparison',
        xlim = axe_range, ylim = axe_range)
   inc &lt;- order(b31g)
   lines(b31g[inc], b31gmod[inc], type = 'b', col = 'red')
   legend('topleft',
          legend = c('B31G Original',
                     'B31G Modified'),
          col = c('black', 'red'),
          lty = 'solid')
 })


</code></pre>

<hr>
<h2 id='b31gsap'>ASME B31G. Safe maximum pressure for the corroded area of pipe</h2><span id='topic+b31gsap'></span>

<h3>Description</h3>

<p>Calculate safe maximum pressure for the corroded area of pipe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>b31gsap(dep, d, wth, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="b31gsap_+3A_dep">dep</code></td>
<td>
<p>design pressure of pipe, [<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gsap_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gsap_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gsap_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="b31gsap_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of the corroded area, [<em>inch</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Safe maximum pressure for the corroded area of pipe, [PSI]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>

<p><a href="https://law.resource.org/pub/us/cfr/ibr/002/asme.b31g.1991.pdf">ASME B31G-1991</a>.
Manual for determining the remaining strength of corroded pipelines. A
supplement to <em>ASTME B31</em> code for pressure piping.
</p>


<h3>See Also</h3>

<p>Other ASME B31G functions: 
<code><a href="#topic+b31crvl">b31crvl</a>()</code>,
<code><a href="#topic+b31gacd">b31gacd</a>()</code>,
<code><a href="#topic+b31gacl">b31gacl</a>()</code>,
<code><a href="#topic+b31gafr">b31gafr</a>()</code>,
<code><a href="#topic+b31gdep">b31gdep</a>()</code>,
<code><a href="#topic+b31gmodpf">b31gmodpf</a>()</code>,
<code><a href="#topic+b31gops">b31gops</a>()</code>,
<code><a href="#topic+b31gpf">b31gpf</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 b31gsap(1093, 30, .438, .1, 7.5)
 # [1] 1093  # [PSI], safe pressure is equal to design pressure

 b31gsap(877, 24, .281, .08, 15)
 # [1] 690   # [PSI], safe pressure is lower than design pressure due corrosion

</code></pre>

<hr>
<h2 id='c_k'>Convert to Celsius scale</h2><span id='topic+c_k'></span><span id='topic+c_f'></span>

<h3>Description</h3>

<p>Convert temperature measured in
<a href="https://en.wikipedia.org/wiki/Kelvin">Kelvin</a>- or
<a href="https://en.wikipedia.org/wiki/Fahrenheit">Fahrenheit</a>-scale
to <a href="https://en.wikipedia.org/wiki/Celsius">Celsius</a> (<em>°C</em>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>c_k(x)

c_f(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="c_k_+3A_x">x</code></td>
<td>
<p>temperature in initial scale:
</p>

<ul>
<li><p> for <code>c_k(x)</code> - in <a href="https://en.wikipedia.org/wiki/Kelvin">Kelvin</a>-scale, [<em>K</em>]
</p>
</li>
<li><p> for <code>c_f(x)</code> - in <a href="https://en.wikipedia.org/wiki/Fahrenheit">Fahrenheit</a>-scale, [<em>°F</em>]
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>temperature in <em>Celsius</em>-scale, [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+k_c">k_c</a></code> and <code><a href="#topic+f_c">f_c</a></code> for converting from Celsius-scale.
</p>
<p>Other units: 
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Convert from Kelvin to Celsius:
c_k(c(0, 373.15))
# [1]  -273.15  100

# Convert from Fahrenheit to Celsius:
c_f(c(-459.67, 212))
# [1]  -273.15  100

</code></pre>

<hr>
<h2 id='dnvpf'>DNV-RP-F101. Failure pressure of the corroded pipe</h2><span id='topic+dnvpf'></span>

<h3>Description</h3>

<p>Calculate failure pressure of the corroded pipe
according to <em>Section 8.2</em> of
in <a href="https://www.dnv.com/oilgas/download/dnv-rp-f101-corroded-pipelines/">DNV-RP-F101</a>.
The estimation is valid for single isolated metal loss defects of
the corrosion/erosion type and when only internal pressure loading
is considered.
</p>
<p>The next assumption of the corrosion shape is adopted by
<a href="https://www.dnv.com/oilgas/download/dnv-rp-f101-corroded-pipelines/">DNV-RP-F101</a>:
</p>
<p><img src="../help/figures/dnvpf.png" alt="dnvpf.png" />
</p>
<p>There d<em>cor</em> represents argument <code>depth</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dnvpf(d, wth, uts, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dnvpf_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dnvpf_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dnvpf_+3A_uts">uts</code></td>
<td>
<p>ultimate tensile strength (<em>UTS</em>) or
specified minimum tensile strength (<em>SMTS</em>) as a
characteristic of steel strength, [<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dnvpf_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dnvpf_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of corroded area, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In contrast to
<a href="https://www.asme.org/codes-standards/find-codes-standards/b31g-manual-determining-remaining-strength-corroded-pipelines">ASME B31G-2012</a>
property of pipe metal is characterized by specified minimum tensile
strength - <em>SMTS</em>, [<code class="reqn">N/mm^2</code>], and <a href="https://en.wikipedia.org/wiki/International_System_of_Units">SI</a>
is default unit system. <em>SMTS</em> is given in the linepipe steel
material specifications (e.g. <a href="https://www.api.org/products-and-services/standards/important-standards-announcements/standard-5l">API 5L</a>)
for each material grade.
</p>
<p>At the same time <em>Timashev et al.</em> used ultimate tensile strength
- <a href="https://en.wikipedia.org/wiki/Ultimate_tensile_strength">UTS</a>
in place of <em>SMTS</em>. So, for the case those quantities may be used in
interchangeable way.
</p>
<p>Numeric <code>NA</code>s may appear in case prescribed conditions of
use are offended.
</p>


<h3>Value</h3>

<p>Estimated failure pressure of the corroded pipe, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ol>
<li><p> Recommended practice <a href="https://www.dnv.com/oilgas/download/dnv-rp-f101-corroded-pipelines/">DNV-RP-F101</a>.
Corroded pipelines. <strong>DET NORSKE VERITAS</strong>, October 2010.
</p>
</li>
<li> <p><a href="https://store.accuristech.com:443/standards/asme-b31g-2012-r2017?product_id=1842873">ASME B31G-2012</a>.
Manual for determining the remaining strength of corroded pipelines:
supplement to <em>B31 Code</em> for pressure piping.
</p>
</li>
<li><p>  S. Timashev and A. Bushinskaya, <em>Diagnostics and Reliability
of Pipeline Systems</em>, Topics in Safety, Risk, Reliability and Quality 30,
<strong>DOI 10.1007/978-3-319-25307-7</strong>.
</p>
</li></ol>



<h3>See Also</h3>

<p>Other fail pressure functions: <code><a href="#topic+b31gpf">b31gpf</a></code>, <code><a href="#topic+b31gmodpf">b31gmodpf</a></code>,
<code><a href="#topic+shell92pf">shell92pf</a></code>, <code><a href="#topic+pcorrcpf">pcorrcpf</a></code>
</p>
<p>Other DNV-RP-F101 functions: 
<code><a href="#topic+strderate">strderate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

d     &lt;- c(812.8, 219.0)  # [mm]
wth   &lt;- c( 19.1,  14.5)  # [mm]
uts   &lt;- c(530.9, 455.1)  # [N/mm^2]
l     &lt;- c(203.2, 200.0)  # [mm]
depth &lt;- c( 13.4,   9.0)  # [mm]

dnvpf(d, wth, uts, depth, l)
# [1] 15.86626 34.01183

</code></pre>

<hr>
<h2 id='dropg'>Flow rate drop in pipe</h2><span id='topic+dropg'></span>

<h3>Description</h3>

<p>Calculate <em>drop</em> or <em>recovery</em> of flow rate in pipe using
geometric factors.
</p>
<p>The calculated value may be positive or negative. When it is positive they
have the <em>drop</em>, i.e. the decrease of flow rate in the outlet of pipe
under consideration. When the calculated value is negative they have the
<em>recovery</em>, i.e. the increase of flow rate in the outlet of pipe under
consideration. In both cases to calculate flow rate on the outlet of pipe
under consideration simply subtract the calculated value from the
sensor-measured flow rate on the inlet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dropg(adj = 0, d = 700, flow_rate = 250)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dropg_+3A_adj">adj</code></td>
<td>
<p>diameters of adjacent pipes through which discharges to and recharges from
network occur, [<em>mm</em>].
</p>
<p>Types:
</p>

<dl>
<dt><code><a href="checkmate.html#topic+assert_double">assert_double</a></code></dt><dd>
<p>total diameter of all adjacent pipes (total diameter case)</p>
</dd>
<dt><code><a href="checkmate.html#topic+assert_list">assert_list</a></code> of <code><a href="checkmate.html#topic+assert_double">assert_double</a></code></dt><dd><p>a set of
diameters of adjacent pipes (particular diameter case)</p>
</dd>
</dl>

<p>Positive values of diameters of adjacent pipes correspond to discharging
process through those pipe, whereas negative values of diameters mean
recharging. See <strong>Details</strong> and <strong>Examples</strong> for further explanations.</p>
</td></tr>
<tr><td><code id="dropg_+3A_d">d</code></td>
<td>
<p>diameter of pipe under consideration, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropg_+3A_flow_rate">flow_rate</code></td>
<td>
<p>sensor-measured amount of heat carrier (water) that is transferred through
the inlet of pipe during a period, [<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is common that sensor-measured flow rate undergoes discharges to
network and recharges from it. For calculation of flow rate <em>drop</em> or
<em>recovery</em> the next configuration of district heating network segment is
assumed:
</p>
<p><img src="../help/figures/dropg.png" alt="dropg.png" />
</p>
<p>Usually, there are no additional sensors that could measure flow rate in
each flow fork. In that case they only may operate with geometric
factors, i.e. assuming that flow rate is proportional to square of pipe
diameter.
</p>
<p>The simple summation of flow rates over all adjacent pipes produces
the required flow rate <em>drop</em> or <em>recovery</em> located on the
outlet of the pipe under consideration. Since there is concurrency between
discharges and recharges the diameters of discharge pipes are regarded
positive whereas diameters of recharge pipes must be negative.
</p>
<p>Be careful when dealing with geometric factors for large amount of recharges
from network: there are no additional physical constraints and thus the
calculated value of <em>recovery</em> may have non-sense.
</p>


<h3>Value</h3>

<p>flow rate <em>drop</em> or <em>recovery</em> at the outlet of pipe,
[<em>ton/hour</em>], numeric vector. The value is positive for <em>drop</em>,
whereas for <em>recovery</em> it is negative. In both cases to calculate
flow rate on the outlet of pipe under consideration simply subtract the
calculated value from the sensor-measured flow rate on the inlet.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other district heating: 
<code><a href="#topic+dropp">dropp</a>()</code>,
<code><a href="#topic+dropt">dropt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Let consider pipes according to network segment scheme depicted in figure
# in [?dropg] help-page.

# Typical large diameters of pipes under consideration, [mm]:
d &lt;- as.double(unique(subset(pipenostics::m325nhldata, diameter &gt; 700)$diameter))

# Let sensor-measured flow rate in the inlet of pipe
# under consideration be proportional to d, [ton/hour]:
flow_rate &lt;- .125*d

# Let consider total diameter case when total diameters of adjacent pipes are no
# more than d, [mm]:
adj &lt;- c(450, -400, 950, -255, 1152)

# As at may be seen for the second and fourth cases they predominantly have
# recharges from network.
# Let calculate flow rate on the outlet of the pipe under consideration,
# [ton/hour]

result &lt;- flow_rate - dropg(adj, d, flow_rate)
print(result)

# [1]  75.96439 134.72222  65.70302 180.80580  78.05995

# For more clarity they may perform calculations in `data.table`.
</code></pre>

<hr>
<h2 id='dropp'>Pressure drop in pipe</h2><span id='topic+dropp'></span>

<h3>Description</h3>

<p>Calculate <a href="https://en.wikipedia.org/wiki/Pressure_drop">pressure drop</a>
in straight cylidrical steel pipe of <em>district heating system</em> (where
water is a heat carrier) that is a result of pipe orientation in space
(hydrostatic component), and friction between water and internal wall of pipe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dropp(
  temperature = 130,
  pressure = mpa_kgf(6),
  flow_rate = 1276,
  d = 1,
  len = 1,
  roughness = 0.006,
  inlet = 0,
  outlet = 0,
  method = "romeo"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dropp_+3A_temperature">temperature</code></td>
<td>
<p>temperature of heat carrier (water) inside the pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_pressure">pressure</code></td>
<td>
<p><a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of heat carrier (water) measured at the
entrance (inlet) of pipe, [<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_flow_rate">flow_rate</code></td>
<td>
<p>amount of heat carrier (water) that is transferred by pipe during a period,
[<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_len">len</code></td>
<td>
<p>pipe length, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_roughness">roughness</code></td>
<td>
<p>roughness of internal wall of pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_inlet">inlet</code></td>
<td>
<p>elevation of pipe inlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_outlet">outlet</code></td>
<td>
<p>elevation of pipe outlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropp_+3A_method">method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>.
Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.
(see <strong>Details</strong>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The underlying engineering model for calculation of pressure drop considers
only two contributions (components):
</p>

<ol>
<li><p> Pressure drop due to gravity (hydrostatic component).
</p>
</li>
<li><p> Pressure drop due to friction.
</p>
</li></ol>

<p>The model does not consider any size changes of pipe and
presence of fittings.
</p>
<p>For the first component that depends on pipe position in space the next
figure illustrates adopted disposition of pipe.
</p>
<p><img src="../help/figures/dropp.png" alt="dropp.png" />
</p>
<p>So, the expression for the first component can be written as:
</p>
<p style="text-align: center;"><code class="reqn">g \rho (outlet - inlet)</code>
</p>

<p>where <code>g</code> - is gravity factor, <code class="reqn">m/s^2</code>, and <code class="reqn">\rho</code> - density
of water (heat carrier), <code class="reqn">kg/m^3</code>; <code>inlet</code> and <code>outlet</code>
are appropriate pipe elevations (under sea or any other adopted level),
<code class="reqn">m</code>.
</p>
<p>The second component comes from
<a href="https://en.wikipedia.org/wiki/Darcy-Weisbach_equation">Darcy–Weisbach equation</a>
and is calculated using heating carrier regime parameters (<code>temperature</code>,
<code>pressure</code>, <code>flow_rate</code>). Temperature and pressure values of
heat carrier define water properties according to
<a href="http://www.iapws.org/">IAPWS</a> formulation.
</p>
<p>Several methods for calculating of
<em>Darcy friction factor</em> are possible and limited to the next
direct approximations of
<a href="https://en.wikipedia.org/wiki/Darcy_friction_factor_formulae#Brki%C4%87-Praks_solution">Colebrook equation</a>:
</p>

<dl>
<dt>romeo</dt><dd><p>Romeo, Royo and Monzon, 2002</p>
</dd>
<dt>vatankhan</dt><dd><p>Vatankhan and Kouchakzadeh, 2009</p>
</dd>
<dt>buzelli</dt><dd><p>Buzzelli, 2008</p>
</dd>
</dl>

<p>According to <em>Brkic, 2011</em> approximations errors of those methods do not
exceed <code>0.15</code> % for the most combinations of
<a href="https://en.wikipedia.org/wiki/Reynolds_number">Reynolds</a> numbers and
actual values of internal
wall <a href="https://en.wikipedia.org/wiki/Surface_roughness">roughness</a> of pipe.
</p>


<h3>Value</h3>

<p>pressure drop at the outlet of pipe, [<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ul>
<li><p> W.Wagner et al. <em>The IAPWS Industrial Formulation 1997 for the Thermodynamic
Properties of Water and Steam</em>, J. Eng. Gas Turbines Power. Jan 2000,
<strong>122</strong>(1): <em>150-184</em> (35 pages)
</p>
</li>
<li><p> M.L.Huber et al.<em>New International Formulation for the
Viscosity of <code class="reqn">H_2O</code></em>, Journal of Physical and Chemical Reference Data
<strong>38</strong>, 101 (2009);
</p>
</li>
<li><p> D.Brkic. <em>Journal of Petroleum Science and Engineering</em>, Vol. <strong>77</strong>,
<em>Issue 1</em>, April 2011, Pages <em>34-48</em>.
</p>
</li>
<li><p> Romeo, E., Royo, C., Monzon, A., 2002. <em>Improved explicit equation for
estimation of friction factor in rough and smooth pipes.</em>
Chem. Eng. J. <strong>86</strong> (3), <em>369–374</em>.
</p>
</li>
<li><p> Vatankhah, A.R., Kouchakzadeh, S., 2009. <em>Discussion: Exact equations
for pipeflow problems, by P.K. Swamee and P.N. Rathie</em>. J. Hydraul. Res.
IAHR <strong>47</strong> (7), <em>537–538</em>.
</p>
</li>
<li><p> Buzzelli, D., 2008. <em>Calculating friction in one step</em>.
Mach. Des. <strong>80</strong> (12), <em>54–55</em>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+dropt">dropt</a></code> for calculating temperature drop in pipe
</p>
<p>Other district heating: 
<code><a href="#topic+dropg">dropg</a>()</code>,
<code><a href="#topic+dropt">dropt</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Typical pressure drop for horizontal pipeline segments
# in high-way heating network in Novosibirsk
dropp(len = c(200, 300))

#[1] 0.0007000666 0.0010500999

</code></pre>

<hr>
<h2 id='dropt'>Temperature drop in cylindrical steel pipe due heat loss</h2><span id='topic+dropt'></span>

<h3>Description</h3>

<p>Calculate temperature drop in steel pipe of <em>district heating system</em>
(where water is a heat carrier) that is a result of heat loss through
pipe wall and insulation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dropt(
  temperature = 130,
  pressure = mpa_kgf(6),
  flow_rate = 250,
  loss_power = 7000
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dropt_+3A_temperature">temperature</code></td>
<td>
<p>temperature of heat carrier (water) inside the pipe measured at the
inlet of pipe, [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropt_+3A_pressure">pressure</code></td>
<td>
<p><a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of heat carrier (water) inside the pipe, [<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropt_+3A_flow_rate">flow_rate</code></td>
<td>
<p>amount of heat carrier (water) that is transferred by pipe during a period,
[<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="dropt_+3A_loss_power">loss_power</code></td>
<td>
<p>power of heat loss - heat loss through area of pipe wall per hour, [<em>kcal/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Specific isobaric <a href="https://en.wikipedia.org/wiki/Heat_capacity">heat capacity</a>
used in calculations is calculated according to
<a href="http://www.iapws.org/relguide/IF97-Rev.pdf">IAPWS R7-97(2012)</a>
for <strong>Region 1</strong> since it is assumed that state of water in
<em>district heating system</em> is always in that region.
</p>


<h3>Value</h3>

<p>temperature drop at the outlet of pipe, [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other district heating: 
<code><a href="#topic+dropg">dropg</a>()</code>,
<code><a href="#topic+dropp">dropp</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 # Calculate normative temperature drop based on Minenergo-325 for pipe segment
 pipeline &lt;- list(
   year   = 1968,
   laying = "channel",
   d      = 700, # [mm]
   len    = 1000 # [m]
 )

 regime &lt;- list(
   temperature = c(130, 150), # [°C]
   pressure    = .588399,     # [MPa]
   flow_rate   = 250          # [ton/hour]
 )

 pipe_loss_power &lt;- do.call(
     m325nhl,
     c(pipeline, temperature = list(regime[["temperature"]]), duration = 1)  # [kcal/hour]
 )

 temperature_drop &lt;- dropt(
   temperature = regime[["temperature"]], # [°C]
   loss_power  = pipe_loss_power          # [kcal/hour]
 )                                        # [°C]

 print(temperature_drop)

 # [1] 1.366806 1.433840
</code></pre>

<hr>
<h2 id='f_k'>Convert to Fahrenheit scale</h2><span id='topic+f_k'></span><span id='topic+f_c'></span>

<h3>Description</h3>

<p>Convert temperature measured in
<a href="https://en.wikipedia.org/wiki/Kelvin">Kelvin</a>- or
<a href="https://en.wikipedia.org/wiki/Celsius">Celsius</a>-scale
to <a href="https://en.wikipedia.org/wiki/Fahrenheit">Fahrenheit</a> (<em>°F</em>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>f_k(x)

f_c(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="f_k_+3A_x">x</code></td>
<td>
<p>temperature in initial scale:
</p>

<ul>
<li><p> for <code>f_k(x)</code> - in <a href="https://en.wikipedia.org/wiki/Kelvin">Kelvin</a>-scale, [<em>K</em>]
</p>
</li>
<li><p> for <code>f_c(x)</code> - in <a href="https://en.wikipedia.org/wiki/Celsius">Celsius</a>-scale, [<em>°C</em>]
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>temperature in <em>Fahrenheit</em>-scale, [<em>°F</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+k_f">k_f</a></code> and <code><a href="#topic+c_f">c_f</a></code> for converting from Fahrenheit-scale.
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Convert from Kelvin to Fahrenheit:
f_k(c(0, 373.15))
# [1]  -459.67 212

# Convert from Celsius to Fahrenheit:
f_c(c(-273.15, 100))
# [1]  -459.67, 212

</code></pre>

<hr>
<h2 id='flowls'>List all possible flow paths in district heating network</h2><span id='topic+flowls'></span>

<h3>Description</h3>

<p>Find and list all possible paths of heat carrier flow (water) in the given
topology of district heating system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flowls(sender = "A", acceptor = "B", use_cluster = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="flowls_+3A_sender">sender</code></td>
<td>
<p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="flowls_+3A_acceptor">acceptor</code></td>
<td>
<p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="flowls_+3A_use_cluster">use_cluster</code></td>
<td>
<p>utilize functionality of parallel processing on multi-core CPU.
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only branched topology without cycles is considered where no more than one
incoming edge exists for every <code>acceptor</code> node. For instance,
<code><a href="#topic+m325testbench">m325testbench</a></code> has permitted topology.
</p>
<p>Though input arguments are natively vectorized their individual values
all relate to common part of district heating network, i.e. associated with
common object. It is due to isomorphism between vector representation and
directed graph of this network. For more details of isomorphic topology
description see <code><a href="#topic+m325testbench">m325testbench</a></code>.
</p>


<h3>Value</h3>

<p>named <code>list</code> that contains integer vectors as its elements. The name
of each element in the <code>list</code> is the name of <code>acceptor</code> associated
with terminal node of district heating network. Each vector in the
<code>list</code> represents an ordered sequence of indexes in <code>acceptor</code>
that enumerates incoming edges from starting node to terminal one. The
length of returned <code>list</code> is equal to number of terminal nodes for
topology considered. Type: <code><a href="checkmate.html#topic+assert_list">assert_list</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+m325testbench">m325testbench</a></code> for example of topology of district heating
system
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)


# Find path from A to B in trivial line topology:
flowls("A", "B")

# $B
# [1] 1

# More complex example with two terminal nodes D and E:
flowls(c("A", "B", "B"), c("B", "D", "E"))

#$D
#[1] 1 2
#
#$E
#[1] 1 3

# All possible flow paths in test bench illustrated in `?m325testbench`:
all_paths &lt;- list(
  c(12, 13, 11, 8, 4, 1),  # hereinafter indexes of acceptor nodes
  c(12, 13, 11, 8, 4, 2),
  c(12, 13, 11, 8, 6, 5,  3),
  c(12, 13, 11, 8, 6, 7),
  c(12, 13, 11, 8, 6, 9),
  c(12, 13, 11, 10),
  c(12, 13, 14, 15),
  c(12, 13, 16, 17),
  c(12, 13, 16, 18, 20, 19),
  c(12, 13, 16, 18, 20, 21),
  c(12, 13, 16, 18, 22, 24),
  c(12, 13, 16, 18, 22, 25),
  c(12, 13, 16, 18, 20, 23, 26)
)

# find those paths:
path &lt;- with(pipenostics::m325testbench, {
  flowls(sender, acceptor)
})

path[[4]]
# [1] 12 13 11  8  6  7


</code></pre>

<hr>
<h2 id='fric_buzelli'>Estimate pipe friction factor with Buzelli formula</h2><span id='topic+fric_buzelli'></span>

<h3>Description</h3>

<p>Estimate <em>Darcy friction factor</em> explicitly with extremely accurate
<em>Buzelli</em> approximation of <em>Colebrook equation</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fric_buzelli(reynolds, roughness = 0, strict = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fric_buzelli_+3A_reynolds">reynolds</code></td>
<td>
<p>Reynolds number, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="fric_buzelli_+3A_roughness">roughness</code></td>
<td>
<p>relative roughness, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="fric_buzelli_+3A_strict">strict</code></td>
<td>
<p>calculate only inside the precision region. Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Buzelli's formula is reported to be extremely accurate in the region:
</p>

<ul>
<li> <p><code>3.0e3 &lt;= reynolds  &lt;= 3.0e8</code>
</p>
</li>
<li> <p><code>    0 &lt;= roughness &lt;= 0.05</code>
</p>
</li></ul>

<p>In <code>strict = TRUE</code> mode argument values outside this precision region
are not allowed, whereas in <code>strict = FALSE</code> either <em>NA</em>s are
generated in that case or calculation for laminar flow is performed when
<code>reynolds &lt; 2100.0</code>.
</p>


<h3>Value</h3>

<p>pipe friction factor, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ol>
<li><p>  Offor, U. and Alabi, S. (2016) <em>An Accurate and Computationally Efficient Explicit Friction Factor Model</em>.
Advances in Chemical Engineering and Science, <em>6</em>, pp. 237-245. <a href="https://doi.org/10.4236/aces.2016.63024">doi:10.4236/aces.2016.63024</a>.
</p>
</li>
<li><p> Buzzelli, D. (2008) <em>Calculating friction in one step</em>. Machine Design, <em>80</em> (12), pp. 54–55.
</p>
</li></ol>



<h3>See Also</h3>

<p>Other Fluid properties: 
<code><a href="#topic+fric_romeo">fric_romeo</a>()</code>,
<code><a href="#topic+fric_vatankhan">fric_vatankhan</a>()</code>,
<code><a href="#topic+re_u">re_u</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 fric_buzelli(c(2118517, 2000, 2118517), c(1e-6, 70e-3/1, 7e-3/1))
 # [1] 0.01031468 0.03200000 0.03375076  # []

 fric_buzelli(c(2118517, 5500, 2118517), c(1e-6, 50e-3/1, 7e-3/1), TRUE)
 # [1] 0.01031468 0.07556734 0.03375076
</code></pre>

<hr>
<h2 id='fric_romeo'>Estimate pipe friction factor with Romeo's formula</h2><span id='topic+fric_romeo'></span>

<h3>Description</h3>

<p>Estimate <em>Darcy friction factor</em> explicitly with extremely accurate
<em>Romeo-Royo-Monzón</em> approximation of <em>Colebrook equation</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fric_romeo(reynolds, roughness = 0, strict = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fric_romeo_+3A_reynolds">reynolds</code></td>
<td>
<p>Reynolds number, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="fric_romeo_+3A_roughness">roughness</code></td>
<td>
<p>relative roughness, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="fric_romeo_+3A_strict">strict</code></td>
<td>
<p>calculate only inside the precision region. Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Romeo's formula is reported to be extremely accurate in the region:
</p>

<ul>
<li> <p><code>3.0e3 &lt;= reynolds  &lt;= 1.5e8</code>
</p>
</li>
<li> <p><code>0.0   &lt;= roughness &lt;= 0.05</code>
</p>
</li></ul>

<p>In <code>strict = TRUE</code> mode argument values outside this precision region
are not allowed, whereas in <code>strict = FALSE</code> either <em>NA</em>s are
generated in that case or calculation for laminar flow is performed when
<code>reynolds &lt; 2100.0</code>.
</p>


<h3>Value</h3>

<p>pipe friction factor, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ol>
<li><p> Offor, U. and Alabi, S. (2016) <em>An Accurate and Computationally Efficient Explicit Friction Factor Model</em>.
Advances in Chemical Engineering and Science, <em>6</em>, pp. 237-245. <a href="https://doi.org/10.4236/aces.2016.63024">doi:10.4236/aces.2016.63024</a>.
</p>
</li>
<li><p> Eva Romeo, Carlos Royo, Antonio Monzón, <em>Improved explicit equations for estimation of friction factor in rough and smooth pipes</em>,
Chemical Engineering Journal, <em>Volume 86</em>, Issue 3, 2002, Pages 369-374, ISSN 1385-8947. <a href="https://doi.org/10.1016/S1385-8947%2801%2900254-6">doi:10.1016/S1385-8947(01)00254-6</a>.
</p>
</li></ol>



<h3>See Also</h3>

<p>Other Fluid properties: 
<code><a href="#topic+fric_buzelli">fric_buzelli</a>()</code>,
<code><a href="#topic+fric_vatankhan">fric_vatankhan</a>()</code>,
<code><a href="#topic+re_u">re_u</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 fric_romeo(c(2118517, 2000, 2118517), c(0, 70e-3/1, 7e-3/1))
 # [1] 0.01028473 0.03200000 0.03373215  # []

 fric_romeo(c(2118517, 3030, 2118517), c(0, 50e-3/1, 7e-3/1), TRUE)
 # [1] 0.01028473 0.07859636 0.03373215  # []
</code></pre>

<hr>
<h2 id='fric_vatankhan'>Estimate pipe friction factor with Vatankhah formula</h2><span id='topic+fric_vatankhan'></span>

<h3>Description</h3>

<p>Estimate <em>Darcy friction factor</em> explicitly with extremely accurate
<em>Vatankhah-Kouchakzadeh</em> approximation of <em>Colebrook equation</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fric_vatankhan(reynolds, roughness = 0, strict = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fric_vatankhan_+3A_reynolds">reynolds</code></td>
<td>
<p>Reynolds number, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="fric_vatankhan_+3A_roughness">roughness</code></td>
<td>
<p>relative roughness, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="fric_vatankhan_+3A_strict">strict</code></td>
<td>
<p>calculate only inside the precision region. Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Vatankhah's formula is reported to be extremely accurate in the region:
</p>

<ul>
<li> <p><code>5.0e3 &lt;= reynolds  &lt;= 1.0e8</code>
</p>
</li>
<li> <p><code>1e-6  &lt;= roughness &lt;= 0.05</code>
</p>
</li></ul>

<p>In <code>strict = TRUE</code> mode argument values outside this precision region
are not allowed, whereas in <code>strict = FALSE</code> either <em>NA</em>s are
generated in that case or calculation for laminar flow is performed when
<code>reynolds &lt; 2100.0</code>.
</p>


<h3>Value</h3>

<p>pipe friction factor, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ol>
<li><p> Offor, U. and Alabi, S. (2016) <em>An Accurate and Computationally Efficient Explicit Friction Factor Model</em>.
Advances in Chemical Engineering and Science, <em>6</em>, pp. 237-245. <a href="https://doi.org/10.4236/aces.2016.63024">doi:10.4236/aces.2016.63024</a>.
</p>
</li>
<li><p> Ali R. Vatankhah, Salah Kouchakzadeh (2009) <em>Exact equations for pipe-flow problems</em>.
Journal of Hydraulic Research, <em>47:4</em>, pp. 537-538, DOI: <a href="https://doi.org/10.1080/00221686.2009.9522031">doi:10.1080/00221686.2009.9522031</a>
</p>
</li></ol>



<h3>See Also</h3>

<p>Other Fluid properties: 
<code><a href="#topic+fric_buzelli">fric_buzelli</a>()</code>,
<code><a href="#topic+fric_romeo">fric_romeo</a>()</code>,
<code><a href="#topic+re_u">re_u</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 fric_vatankhan(c(2118517, 2000, 2118517), c(1e-6, 70e-3/1, 7e-3/1))
 # [1] 0.01031665 0.03200000 0.03375210  # []

 fric_vatankhan(c(2118517, 5500, 2118517), c(1e-6, 50e-3/1, 7e-3/1), TRUE)
 # [1] 0.01031665 0.07556163 0.03375210
</code></pre>

<hr>
<h2 id='geoarea'>Calculate geographical metrics</h2><span id='topic+geoarea'></span><span id='topic+geodist'></span>

<h3>Description</h3>

<p>Calculate geographical metrics (distance, area) for two or three geographical locations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geoarea(lat1, lon1, lat2, lon2, lat3, lon3, earth = 6371008.7714)

geodist(lat1, lon1, lat2, lon2, earth = 6371008.7714)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geoarea_+3A_lat1">lat1</code></td>
<td>
<p>latitude of the first geographical location, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="geoarea_+3A_lon1">lon1</code></td>
<td>
<p>longitude of the first geographical location, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="geoarea_+3A_lat2">lat2</code></td>
<td>
<p>latitude of the second geographical location, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="geoarea_+3A_lon2">lon2</code></td>
<td>
<p>longitude of the second geographical location, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="geoarea_+3A_lat3">lat3</code></td>
<td>
<p>latitude of the third geographical location, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="geoarea_+3A_lon3">lon3</code></td>
<td>
<p>longitude of the third geographical location, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="geoarea_+3A_earth">earth</code></td>
<td>
<p><em>Earth</em> radius, [<em>m</em>]. See <strong>Details</strong>.
Type: <code><a href="checkmate.html#topic+assert_numeric">assert_numeric</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>geodist</code> calculates distance between two geographical locations on <em>Earth</em>,
whereas <code>geoarea</code> calculates the area of spherical triangle between
three geographical locations.
Both functions use absolute positions of geographical locations described by
<a href="https://en.wikipedia.org/wiki/Geographic_coordinate_system">
geographical coordinate system</a>
in
<a href="https://en.wikipedia.org/wiki/Decimal_degrees">decimal degrees</a>
units denoted as <em>DD</em>. The
<a href="https://en.wikipedia.org/wiki/Haversine_formula">haversine formula</a>
is applied to calculate the distance, and so the spherical model of
<em>Earth</em> is considered in both functions.
</p>
<p>Since several variants of <em>Earth</em> radius can be accepted,
the user is welcome to provide its own value.
<a href="https://en.wikipedia.org/wiki/World_Geodetic_System#WGS84">WGS-84</a>
<a href="https://en.wikipedia.org/wiki/Earth_radius">mean radius of semi-axes</a>,
<code class="reqn">R_1</code>, is the default value.
</p>
<p>The resulting distance is expressed in
<a href="https://en.wikipedia.org/wiki/Metre">metres</a> (<em>m</em>), 
whereas the area is expressed in 
<a href="https://en.wikipedia.org/wiki/Square_kilometre">square kilometers</a>(<em>km^2</em>).
</p>


<h3>Value</h3>


<dl>
<dt>For <code>geodist</code>:</dt><dd><p>distance between two geographical locations, [<em>m</em>].</p>
</dd>
<dt>For <code>geoarea</code>:</dt><dd><p>area of spherical triangle between three geographical locations, [<em>km^2</em>].</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other utils: 
<code><a href="#topic+meteos">meteos</a>()</code>,
<code><a href="#topic+mgtdhid">mgtdhid</a>()</code>,
<code><a href="#topic+wth_d">wth_d</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pipenostics)

# Consider the longest linear pipeline segment in Krasnoyarsk, [DD]:
pipe &lt;- list(
  lat1 = 55.98320350, lon1 = 92.81257226,
  lat2 = 55.99302417, lon2 = 92.80691885
)

# and some official Earth radii, [m]:
R &lt;- c(
  nominal_zero_tide_equatorial = 6378100.0000,
  nominal_zero_tide_polar      = 6356800.0000,
  equatorial_radius            = 6378137.0000,
  semiminor_axis_b             = 6356752.3141,
  polar_radius_of_curvature    = 6399593.6259,
  mean_radius_R1               = 6371008.7714,
  same_surface_R2              = 6371007.1810,
  same_volume_R3               = 6371000.7900,
  WGS84_ellipsoid_axis_a       = 6378137.0000,
  WGS84_ellipsoid_axis_b       = 6356752.3142,
  WGS84_ellipsoid_curvature_c  = 6399593.6258,
  WGS84_ellipsoid_R1           = 6371008.7714,
  WGS84_ellipsoid_R2           = 6371007.1809,
  WGS84_ellipsoid_R3           = 6371000.7900,
  GRS80_axis_a                 = 6378137.0000,
  GRS80_axis_b                 = 6356752.3141,
  spherical_approx             = 6366707.0195,
  meridional_at_the_equator    = 6335439.0000,
  Chimborazo_maximum           = 6384400.0000,
  Arctic_Ocean_minimum         = 6352800.0000,
  Averaged_center_to_surface   = 6371230.0000
)

# Calculate length of the pipeline segment for different radii:
len &lt;- with(
  pipe, vapply(
    R, geodist, double(1), lat1 = lat1, lon1 = lon1, lat2 = lat2, lon2 = lon2
  )
)

print(range(len))

# [1] 1140.82331483 1152.37564656 #  [m]


# Consider some remarkable objects on Earth, [DD]:
objects &lt;- rbind(
  Mount_Kailash      = c(lat = 31.069831297551982, lon =  81.31215667724196),
  Easter_Island_Moai = c(lat =-27.166873910247862, lon =-109.37092217323053),
  Great_Pyramid      = c(lat = 29.979229451772856, lon =  31.13418110843685),
  Antarctic_Pyramid  = c(lat = -79.97724194984573, lon = -81.96170583068950),
  Stonehendge        = c(lat = 51.179036665131870, lon =-1.8262150017463086)
)

# Consider all combinations of distances between them:
path &lt;- t(combn(rownames(objects), 2))

d &lt;- geodist(
  lat1 = objects[path[, 1], "lat"],
  lon1 = objects[path[, 1], "lon"],
  lat2 = objects[path[, 2], "lat"],
  lon2 = objects[path[, 2], "lon"]
)*1e-3

cat(
  paste(
    sprintf("%s &lt;--- %1.4f km ---&gt; %s", path[, 1], d, path[, 2]),
    collapse = "\n"
)
)

# Consider two areas 
#         * Bermuda triangle     * Polynesian Triangle
lat1 &lt;- c(Miami   =  25.789106,  Hawaii       =   19.820680)
lon1 &lt;- c(Miami   = -80.226529,  Hawaii       = -155.467989)

lat2 &lt;- c(Bermuda =  32.294887,  NewZeland    =  -43.443219)
lon2 &lt;- c(Bermuda = -64.781380,  NewZeland    =  170.271360)

lat3 &lt;- c(SanJuan =  18.466319,  EasterIsland =  -27.112701)
lon3 &lt;- c(SanJuan = -66.105743,  EasterIsland = -109.349668)

# Area provided by manually operated Google Earth:
GETriangleArea &lt;- c(
  Bermuda    =  1147627.48,  # [km^2]
  Polynesian = 28775517.77   # [km^2]
)

# Show the discrepancy in calculations, [km^2]:
print(geoarea(lat1, lon1, lat2, lon2, lat3, lon3)) 
 
 #   Bermuda Polynesian 
 # 0.4673216 11.1030971    

</code></pre>

<hr>
<h2 id='inch_mm'>Millimeters to inches</h2><span id='topic+inch_mm'></span>

<h3>Description</h3>

<p>Convert length measured in <a href="https://en.wikipedia.org/wiki/Millimetre">millimeters</a> (mm)
to <a href="https://en.wikipedia.org/wiki/Inch">inches</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inch_mm(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inch_mm_+3A_x">x</code></td>
<td>
<p>length measured in <em>millimeters</em>, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>length in <em>inches</em>, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mm_inch">mm_inch</a></code> for converting <em>inches</em> to <em>mm</em>
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 inch_mm(c(25.4, 1))
 # [1] 1.00000000 0.03937008  # [inch]


</code></pre>

<hr>
<h2 id='k_c'>Covert to Kelvin scale</h2><span id='topic+k_c'></span><span id='topic+k_f'></span>

<h3>Description</h3>

<p>Convert temperature measured in
<a href="https://en.wikipedia.org/wiki/Celsius">Celsius</a>- or
<a href="https://en.wikipedia.org/wiki/Fahrenheit">Fahrenheit</a>-scale
to <a href="https://en.wikipedia.org/wiki/Kelvin">Kelvin</a> (<em>K</em>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>k_c(x)

k_f(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="k_c_+3A_x">x</code></td>
<td>
<p>temperature in initial scale:
</p>

<ul>
<li><p> for <code>k_c(x)</code> - in <a href="https://en.wikipedia.org/wiki/Celsius">Celsius</a>-scale, [<em>°C</em>]
</p>
</li>
<li><p> for <code>k_f(x)</code> - in <a href="https://en.wikipedia.org/wiki/Fahrenheit">Fahrenheit</a>-scale, [<em>°F</em>]
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>temperature in <em>Kelvin</em>-scale, [<em>K</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+c_k">c_k</a></code> and <code><a href="#topic+f_k">f_k</a></code> for converting from Kelvin-scale.
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Convert from Celsius to Kelvin:
k_c(c(-273.15, 100))
# [1]  0  373.15

# Convert from Fahrenheit to Kelvin:
k_f(c(-459.67, 212))
# [1]  0  373.15

</code></pre>

<hr>
<h2 id='kgf_mpa'>Megapascals to kilogram-force per square</h2><span id='topic+kgf_mpa'></span>

<h3>Description</h3>

<p>Convert pressure (stress) measured in <a href="https://en.wikipedia.org/wiki/Pascal_(unit)">megapascals</a> (MPa)
to <a href="https://en.wikipedia.org/wiki/Kilogram-force_per_square_centimetre">kilogram-force per square cm</a> (<code class="reqn">kgf/cm^2</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kgf_mpa(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="kgf_mpa_+3A_x">x</code></td>
<td>
<p>pressure (stress) measured in <em>megapascals</em>,
[<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>pressure (stress) in
<em>kilogram-force per square cm</em>, [<em>kgf/cm^2</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mpa_kgf">mpa_kgf</a></code> for converting <em>kilogram-force per square cm</em> to <em>megapascals</em>
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 kgf_mpa(c(0.0980665, 1))
 # [1]  1.00000 10.19716


</code></pre>

<hr>
<h2 id='loss_flux'>Convert heat flux to specific heat loss power</h2><span id='topic+loss_flux'></span><span id='topic+flux_loss'></span>

<h3>Description</h3>

<p>Convert <a href="https://en.wikipedia.org/wiki/Heat_flux">heat flux</a>
measured for a cylindrical steel pipe to <em>specific heat loss power</em> of pipe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loss_flux(x, d, wth = 0)

flux_loss(x, d, wth = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loss_flux_+3A_x">x</code></td>
<td>
<p>value of
</p>

<ul>
<li> <p><em>heat flux</em>, [<em>W/m^2</em>], for <code>loss_flux(x, d, wth)</code>
</p>
</li>
<li> <p><em>specific heat loss power</em>, [<em>kcal/m/h</em>], for <code>flux_loss(x, d, wth)(x)</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="loss_flux_+3A_d">d</code></td>
<td>
<p>outside (if <em>wth = 0</em>) or internal (if <em>wth &gt; 0</em>) diameter of cylindrical pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="loss_flux_+3A_wth">wth</code></td>
<td>
<p>wall thickness of pipe, [<em>mm</em>], or <em>0</em> if argument <em>d</em> is an outside diameter of pipe.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>value of
</p>

<ul>
<li> <p><em>specific heat loss power</em>, [<em>kcal/m/h</em>], for <code>loss_flux(x, d, wth)</code>
</p>
</li>
<li> <p><em>heat flux</em>, [<em>W/m^2</em>], for <code>flux_loss(x, d, wth)(x)</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pipenostics)

# Consider pipes:
diameter      &lt;- c(998, 1395)  # [mm]
wall_thikness &lt;- c(  2,    5)  # [mm]

# Then maximum possible normative neat loss according (Minenergo-325) for
# these pipe diameters are
loss_max &lt;- c(218, 1040)  # [kcal/m/h]

# The appropriate flux is
flux &lt;- flux_loss(loss_max, diameter * 1e-3, wall_thikness)
print(flux)

# [1] 80.70238 275.00155  # [W/m^2]

stopifnot(
  all.equal(loss_flux(flux, diameter * 1e-3, wall_thikness), loss_max, tolerance = 5e-6)
)


</code></pre>

<hr>
<h2 id='m278hlair'>Minenergo-278. Normative heat loss of open-air pipe</h2><span id='topic+m278hlair'></span>

<h3>Description</h3>

<p>Calculate normative heat loss of the open-air supplying pipe
as a function of construction, operation, and technical condition 
specifications according to
Appendix 5.1 of <a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a>.
</p>
<p>This type of calculations is usually made on design stage of district
heating network (where water is a heat carrier) and is closely related to
building codes and regulations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m278hlair(
  t1 = 110,
  t2 = 60,
  t0 = 5,
  insd1 = 0.1,
  insd2 = insd1,
  d1 = 0.25,
  d2 = d1,
  lambda1 = 0.09,
  lambda2 = 0.07,
  k1 = 1,
  k2 = k1,
  lambda0 = 26,
  len = 1,
  duration = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m278hlair_+3A_t1">t1</code></td>
<td>
<p>temperature of heat carrier (water) inside the supplying pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_t2">t2</code></td>
<td>
<p>temperature of heat carrier (water) inside the returning pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_t0">t0</code></td>
<td>
<p>temperature of environment, [<em>°C</em>]. In case of open-air pipe this is
the ambient temperature. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_insd1">insd1</code></td>
<td>
<p>thickness of the insulator which covers the supplying pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_insd2">insd2</code></td>
<td>
<p>thickness of the insulator which covers the returning pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_d1">d1</code></td>
<td>
<p>outside diameter of supplying pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_d2">d2</code></td>
<td>
<p>outside diameter of returning pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_lambda1">lambda1</code></td>
<td>
<p>thermal conductivity of insulator which covers the supplying pipe
[<em>W/m/°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_lambda2">lambda2</code></td>
<td>
<p>thermal conductivity of insulator which covers the returning pipe
[<em>W/m/°C</em>]. <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_k1">k1</code></td>
<td>
<p>technical condition factor for insulator of supplying pipe, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_k2">k2</code></td>
<td>
<p>technical condition factor for insulator of returning pipe, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_lambda0">lambda0</code></td>
<td>
<p>thermal conductivity of environment, [<em>W/m/°C</em>]. In case of overhead
laying this is the thermal conductivity of open air.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_len">len</code></td>
<td>
<p>length of supplying pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlair_+3A_duration">duration</code></td>
<td>
<p>duration of heat loss, [<em>hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Details on using <code>k1</code> and <code>k2</code> are the same as for
<code><a href="#topic+m278hlcha">m278hlcha</a></code>.
</p>


<h3>Value</h3>

<p>Normative heat loss of the open-air layed supplying cylindrical pipe 
during <code>duration</code>, [<em>kcal</em>].
If <code>len</code> of pipe is 1 <em>m</em> (meter) as well as <code>duration</code> is set to
1 <em>h</em> (hour) (default values) then the return value is also the
<em>specific heat loss power</em>, [<em>kcal/m/h</em>] and so comparable with those
prescribed by <a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 m278hlair()
 # [1] 138.7736

</code></pre>

<hr>
<h2 id='m278hlcha'>Minenergo-278. Normative heat loss of pipe in channel</h2><span id='topic+m278hlcha'></span>

<h3>Description</h3>

<p>Calculate normative heat loss of the supplying pipe mounted in underground channel
as a function of construction, operation, and technical condition
specifications according to
Appendix 5.1 of <a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a>.
</p>
<p>This type of calculations is usually made on design stage of district
heating network (where water is a heat carrier) and is closely related
to building codes and regulations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m278hlcha(
  t1 = 110,
  t2 = 60,
  t0 = 5,
  insd1 = 0.1,
  insd2 = insd1,
  d1 = 0.25,
  d2 = d1,
  lambda1 = 0.09,
  lambda2 = 0.07,
  k1 = 1,
  k2 = k1,
  lambda0 = 1.74,
  z = 2,
  b = 0.5,
  h = 0.5,
  len = 1,
  duration = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m278hlcha_+3A_t1">t1</code></td>
<td>
<p>temperature of heat carrier (water) inside the supplying pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_t2">t2</code></td>
<td>
<p>temperature of heat carrier (water) inside the returning pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_t0">t0</code></td>
<td>
<p>temperature of environment, [<em>°C</em>]. In case of channel laying this is
the temperature of subsoil. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_insd1">insd1</code></td>
<td>
<p>thickness of the insulator which covers the supplying pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_insd2">insd2</code></td>
<td>
<p>thickness of the insulator which covers the returning pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_d1">d1</code></td>
<td>
<p>outside diameter of supplying pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_d2">d2</code></td>
<td>
<p>outside diameter of returning pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_lambda1">lambda1</code></td>
<td>
<p>thermal conductivity of insulator which covers the supplying pipe
[<em>W/m/°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_lambda2">lambda2</code></td>
<td>
<p>thermal conductivity of insulator which covers the returning pipe
[<em>W/m/°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_k1">k1</code></td>
<td>
<p>technical condition factor for insulator of supplying pipe, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_k2">k2</code></td>
<td>
<p>technical condition factor for insulator of returning pipe, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_lambda0">lambda0</code></td>
<td>
<p>thermal conductivity of environment, [<em>W/m/°C</em>]. In case of channel
laying this is the thermal conductivity of subsoil. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_z">z</code></td>
<td>
<p>channel laying depth, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_b">b</code></td>
<td>
<p>channel width, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_h">h</code></td>
<td>
<p>channel height, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_len">len</code></td>
<td>
<p>length of supplying pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlcha_+3A_duration">duration</code></td>
<td>
<p>duration of heat loss, [<em>hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>k1</code> and <code>k2</code> factor values equal to <code>1</code> mean the best technical
condition of insulation of appropriate pipes, whereas for poor technical
state factor values tends to <code>5</code> or more.
</p>
<p>Nevertheless, when <code>k1</code> and <code>k2</code> both equal to <code>1</code> the calculated
<em>specific heat loss power</em> [<em>kcal/m/h</em>] is sometimes higher than that listed in
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
One should consider that situation when choosing method for heat loss
calculations.
</p>


<h3>Value</h3>

<p>Normative heat loss of supplying cylindrical pipe mounted in channel during <code>duration</code>, [<em>kcal</em>].
If <code>len</code> of pipe is 1 <em>m</em> (meter) as well as <code>duration</code> is set to
1 <em>h</em> (hour) (default values) then the return value is also the
<em>specific heat loss power</em>, [<em>kcal/m/h</em>] and so comparable with those
prescribed by <a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 m278hlcha()
 #

 ## Naive way to find out technical state (factors k1 and k2) for pipe
 ## segments constructed in 1980:
   optim(
     par = c(1.5, 1.5),
     fn = function(x) {
     # functional to optimize
       abs(
           m278hlcha(k1 = x[1], k2 = x[2]) -
           m325nhl(year = 1980, laying = "channel", d = 250, temperature = 110)
       )
     },
     method = "L-BFGS-B",
     lower = 1.01, upper = 4.4
   )$par
   # [1] 4.285442 4.323628

</code></pre>

<hr>
<h2 id='m278hlund'>Minenergo-278. Normative heat loss of underground pipe</h2><span id='topic+m278hlund'></span>

<h3>Description</h3>

<p>Calculate normative heat loss of the supplying underground pipe as a function of construction, operation,
and technical condition specifications according to
Appendix 5.1 of <a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a>.
</p>
<p>This type of calculations is usually made on design stage of district
heating network (where water is a heat carrier) and is closely
related to building codes and regulations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m278hlund(
  t1 = 110,
  t2 = 60,
  t0 = 5,
  insd1 = 0.1,
  insd2 = insd1,
  d1 = 0.25,
  d2 = d1,
  lambda1 = 0.09,
  lambda2 = 0.07,
  k1 = 1,
  k2 = k1,
  lambda0 = 1.74,
  z = 2,
  s = 0.55,
  len = 1,
  duration = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m278hlund_+3A_t1">t1</code></td>
<td>
<p>temperature of heat carrier (water) inside the supplying pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_t2">t2</code></td>
<td>
<p>temperature of heat carrier (water) inside the returning pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_t0">t0</code></td>
<td>
<p>temperature of environment, [<em>°C</em>]. For underground pipe this is
the temperature of subsoil. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_insd1">insd1</code></td>
<td>
<p>thickness of the insulator which covers the supplying pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_insd2">insd2</code></td>
<td>
<p>thickness of the insulator which covers the returning pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_d1">d1</code></td>
<td>
<p>outside diameter of supplying pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_d2">d2</code></td>
<td>
<p>outside diameter of returning pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_lambda1">lambda1</code></td>
<td>
<p>thermal conductivity of insulator which covers the supplying pipe
[<em>W/m/°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_lambda2">lambda2</code></td>
<td>
<p>thermal conductivity of insulator which covers the returning pipe
[<em>W/m/°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_k1">k1</code></td>
<td>
<p>technical condition factor for insulator of supplying pipe, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_k2">k2</code></td>
<td>
<p>technical condition factor for insulator of returning pipe, [].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_lambda0">lambda0</code></td>
<td>
<p>thermal conductivity of environment, [<em>W/m/°C</em>]. For underground pipe this is
the thermal conductivity of subsoil.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_z">z</code></td>
<td>
<p>underground laying depth of supplying pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_s">s</code></td>
<td>
<p>distance between supplying and returning pipes, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_len">len</code></td>
<td>
<p>length of supplying pipe, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278hlund_+3A_duration">duration</code></td>
<td>
<p>duration of heat loss, [<em>hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Details on using <code>k1</code> and <code>k2</code> are the same as for
<code><a href="#topic+m278hlcha">m278hlcha</a></code>.
</p>


<h3>Value</h3>

<p>Normative heat loss of supplying underground cylindrical pipe during <code>duration</code>, [<em>kcal</em>].
If <code>len</code> of pipe is 1 <em>m</em> (meter) as well as <code>duration</code> is set to
1 <em>h</em> (hour) (default values) then the return value is also the
<em>specific heat loss power</em>, [<em>kcal/m/h</em>] and so comparable with those
prescribed by <a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 m278hlund()
 # [1] 102.6226

</code></pre>

<hr>
<h2 id='m278insdata'>Minenergo-278. Thermal conductivity terms of pipe insulation materials</h2><span id='topic+m278insdata'></span>

<h3>Description</h3>

<p>Data represent values of terms (intercept and factor) for calculating thermal
conductivity of pipe insulation as a linear function of temperature of
heat carrier (water).
Those values are set for different insulation materials in
Appendix 5.3 of <a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a>
as norms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m278insdata
</code></pre>


<h3>Format</h3>

<p>A data frame with 39 rows and 4 variables:
</p>

<dl>
<dt>id</dt><dd><p>Number of insulation material table 5.1 of Appendix 5.3 in
<a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a>.
Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code>.
</p>
</dd>
<dt>material</dt><dd><p>Designation of insulation material more or less similar
to those in table 5.1 of Appendix 5.3 in
<a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a>.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt>lambda</dt><dd><p>Value for intercept, [<em>mW/m/°C</em>].
Type: <code><a href="checkmate.html#topic+assert_integer">assert_integer</a></code>.
</p>
</dd>
<dt>k</dt><dd><p>Value for factor. Type: <code><a href="checkmate.html#topic+assert_integer">assert_integer</a></code>.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Usually the data is not used directly. Instead use function <code><a href="#topic+m278inshcm">m278inshcm</a></code>.
</p>


<h3>Source</h3>

<p><a href="https://docs.cntd.ru/document/1200035568">https://docs.cntd.ru/document/1200035568</a>
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>

<hr>
<h2 id='m278inshcm'>Minenergo-278. Thermal conductivity of pipe insulation materials</h2><span id='topic+m278inshcm'></span>

<h3>Description</h3>

<p>Get normative values of thermal conductivity of pipe insulation
materials affirmed by
<a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a> as
a function of temperature of heat carrier (water).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m278inshcm(temperature = 110, material = "aerocrete")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m278inshcm_+3A_temperature">temperature</code></td>
<td>
<p>temperature of heat carrier (water) inside the pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m278inshcm_+3A_material">material</code></td>
<td>
<p>designation of insulation material as it stated in <code><a href="#topic+m278insdata">m278insdata</a></code>,
Type: <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Thermal conductivity of insulation materials at given
set of temperatures, [<em>W/m/°C</em>], [<em>W/m/K</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Averaged thermal conductivity of pipe insulation at 110 °C
print(m278insdata)
mean(m278inshcm(110, m278insdata[["material"]]))
# [1] 0.09033974  # [\emph{W/m/°C}]

</code></pre>

<hr>
<h2 id='m278soildata'>Minenergo-278. Thermal conductivity of subsoil surrounding pipe</h2><span id='topic+m278soildata'></span>

<h3>Description</h3>

<p>Data represent normative values of thermal conductivity of subsoils
which can surround pipes according to Table 5.3 of Appendix 5.3 in
<a href="https://docs.cntd.ru/document/1200035568">Minenergo Method 278</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m278soildata
</code></pre>


<h3>Format</h3>

<p>A data frame with 15 rows and 3 variables:
</p>

<dl>
<dt>subsoil</dt><dd><p>Geological name of subsoil. Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.</p>
</dd>
<dt>state</dt><dd><p>The degree of water penetration to the subsoil. Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.</p>
</dd>
<dt>lambda</dt><dd><p>Value of thermal conductivity of subsoil regarding water penetration, [<em>W/m/°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://docs.cntd.ru/document/1200035568">https://docs.cntd.ru/document/1200035568</a>
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>

<hr>
<h2 id='m325beta'>Minenergo-325. Local heat loss coefficient</h2><span id='topic+m325beta'></span>

<h3>Description</h3>

<p>Calculate <code class="reqn">\beta</code> - <em>local heat loss coefficient</em> according to rule <em>11.3.3</em>
of <a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
<em>Local heat loss coefficient</em> is used to increase normative heat loss
of pipe by taking into account heat loss of fittings (shut-off valves,
compensators and supports). This coefficient is applied mostly as a factor
during the summation of heat losses of pipes in pipeline leveraging
formula 14 of <a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m325beta(laying = "channel", d = 700)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m325beta_+3A_laying">laying</code></td>
<td>
<p>type of pipe laying depicting the position of pipe in space:
</p>

<ul>
<li> <p><code>air</code>,
</p>
</li>
<li> <p><code>channel</code>,
</p>
</li>
<li> <p><code>room</code>,
</p>
</li>
<li> <p><code>tunnel</code>,
</p>
</li>
<li> <p><code>underground</code>.
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325beta_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Two possible values of <code class="reqn">\beta</code>: <code>1.2</code> or <code>1.15</code> depending on
pipe laying and its diameter. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

norms &lt;- within(m325nhldata, {
  beta &lt;- m325beta(laying, as.double(diameter))
})
unique(norms$beta)
# [1] 1.15 1.20

</code></pre>

<hr>
<h2 id='m325nhl'>Minenergo-325. Normative heat loss of pipe</h2><span id='topic+m325nhl'></span>

<h3>Description</h3>

<p>Calculate normative heat loss of pipe that is legally affirmed by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m325nhl(
  year = 1986,
  laying = "underground",
  exp5k = TRUE,
  insulation = 0,
  d = 700,
  temperature = 110,
  len = 1,
  duration = 1,
  beta = FALSE,
  extra = 2
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m325nhl_+3A_year">year</code></td>
<td>
<p>year when the pipe is put in operation after laying or total overhaul.
Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code></p>
</td></tr>
<tr><td><code id="m325nhl_+3A_laying">laying</code></td>
<td>
<p>type of pipe laying depicting the position of pipe in space:
</p>

<ul>
<li> <p><code>air</code>,
</p>
</li>
<li> <p><code>channel</code>,
</p>
</li>
<li> <p><code>room</code>,
</p>
</li>
<li> <p><code>tunnel</code>,
</p>
</li>
<li> <p><code>underground</code>.
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_exp5k">exp5k</code></td>
<td>
<p>pipe regime flag: is pipe operated more that 5000 hours per year?
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_insulation">insulation</code></td>
<td>
<p>insulation that covers the exterior of pipe:
</p>

<dl>
<dt><code>0</code></dt><dd><p>no insulation</p>
</dd>
<dt><code>1</code></dt><dd><p>foamed polyurethane or analogue</p>
</dd>
<dt><code>2</code></dt><dd><p>polymer concrete</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_integer">assert_integer</a></code> and <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_temperature">temperature</code></td>
<td>
<p>temperature of heat carrier (water) inside the pipe, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_len">len</code></td>
<td>
<p>length of pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_duration">duration</code></td>
<td>
<p>duration of heat loss, [<em>hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_beta">beta</code></td>
<td>
<p>should they consider additional heat loss of fittings?
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325nhl_+3A_extra">extra</code></td>
<td>
<p>number of points used for temperature extrapolation: <code>2</code>, <code>3</code>,
or <code>4</code>. Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Temperature extrapolation and pipe diameter interpolation are leveraged
for better accuracy. Both are linear as it dictated by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
Nevertheless, one could control the extrapolation behavior by <code>extra</code>
argument: use lower values of <code>extra</code> for soft curvature near extrapolation
edges, and higher values for more physically reasoned behavior in far regions
of extrapolation.
</p>


<h3>Value</h3>

<p>Normative heat loss of cylindrical pipe during <code>duration</code>, [<em>kcal</em>].
If <code>len</code> of pipe is 1 <em>m</em> (meter) as well as <code>duration</code> is set to
1 <em>h</em> (hour) (default values) then the return value is also the
<em>specific heat loss power</em>, [<em>kcal/m/h</em>], prescribed by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 ## Consider a 1-meter length pipe with
 pipe_diameter &lt;-  700.0  # [mm]
 pipe_dating   &lt;- 1980
 pipe_laying   &lt;- "underground"


 ## Linear extrapolation adopted in Minenergo's Order 325 using last two points:
 operation_temperature &lt;- seq(0, 270, 10)

 qs &lt;- m325nhl(
   year = pipe_dating, laying = pipe_laying, d = pipe_diameter,
   temperature = operation_temperature
 )  # [kcal/m/h]

 plot(
     operation_temperature,
     qs,
     type = "b",
     main = "Minenergo's Order 325. Normative heat loss of pipe",
     sub = sprintf(
       "%s pipe of diameter %i [mm] laid in %i",
        pipe_laying, pipe_diameter, pipe_dating
     ),
     xlab = "Temperature, [°C]",
     ylab = "Specific heat loss power, [kcal/m/h]"
   )


 ## Consider heat loss due fittings:
 operation_temperature &lt;- 65  # [°C]

 fittings_qs &lt;- m325nhl(
   year = pipe_dating, laying = pipe_laying, d = pipe_diameter,
   temperature = operation_temperature, beta = c(FALSE, TRUE)
 )  # [kcal/m/h]

 print(fittings_qs); stopifnot(all(round(fittings_qs ,1)  == c(272.0, 312.8)))

 # [1] 272.0 312.8  # [kcal/m/h]



 ## Calculate heat flux:
 operation_temperature &lt;- c(65, 105)  # [°C]

 qs &lt;- m325nhl(
   year = pipe_dating, laying = pipe_laying, d = pipe_diameter,
   temperature = operation_temperature
 )  # [kcal/m/h]
 print(qs)

 # [1] 272.00 321.75  # [kcal/m/h]

 pipe_diameter &lt;- pipe_diameter * 1e-3          # [m]
 factor        &lt;- 2.701283                      # [kcal/h/W]

 flux &lt;- qs/factor/pipe_diameter -&gt; a  # heat flux, [W/m^2]
 print(flux)

 # [1] 143.8470 170.1572  # [W/m^2]

 ## The above line is equivalent to:

 flux &lt;- flux_loss(qs, pipe_diameter) -&gt; b

 stopifnot(all.equal(a, b, tolerance = 5e-6))

</code></pre>

<hr>
<h2 id='m325nhldata'>Minenergo-325. Normative heat loss data</h2><span id='topic+m325nhldata'></span>

<h3>Description</h3>

<p>Data represent values of specific heat loss power officially accepted by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a> as
norms. Those values are maximums which are legally
affirmed to contribute to normative heat loss <code class="reqn">Q_NHL</code> of
district heating systems with water as a heat carrier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m325nhldata
</code></pre>


<h3>Format</h3>

<p>A data frame with 17328 rows and 8 variables:
</p>

<dl>
<dt>source</dt><dd><p>Identifier of data source: identifiers suited with
glob <em>t?p?</em> mean appropriate <em>table ?.?</em> in
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>;
identifier <em>sgc</em> means that values are additionally
postulated (see <em>Details</em>).
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt>epoch</dt><dd><p>Year depicting the epoch when the pipe is put in operation after laying or total overhaul.
Type: <code><a href="checkmate.html#topic+assert_integer">assert_integer</a></code>.</p>
</dd>
<dt>laying</dt><dd><p>Type of pipe laying depicting the position of pipe in space. Only five types of
pipe laying are considered:
</p>

<ul>
<li> <p><code>air</code>,
</p>
</li>
<li> <p><code>channel</code>,
</p>
</li>
<li> <p><code>room</code>,
</p>
</li>
<li> <p><code>tunnel</code>,
</p>
</li>
<li> <p><code>underground</code>.
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt>exp5k</dt><dd>
<p>Logical indicator for pipe regime: if <code>TRUE</code> pipe is
operated more that <code>5000</code> hours per year.
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.
</p>
</dd>
<dt>insulation</dt><dd>
<p>Identifier of insulation that covers the exterior of pipe:
</p>

<dl>
<dt><code>0</code></dt><dd><p>no insulation</p>
</dd>
<dt><code>1</code></dt><dd><p>foamed polyurethane or analogue</p>
</dd>
<dt><code>2</code></dt><dd><p>polymer concrete</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code>.
</p>
</dd>
<dt>diameter</dt><dd><p>Nominal internal diameter of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>temperature</dt><dd><p>Operational temperature of pipe, [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt>loss</dt><dd>
<p>Normative value of specific heat loss power equal to heat flux output by
1 meter length steel pipe during an hour,
[<em>kcal/m/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Data is organized as a full factorial design, whereas for some factorial
combinations <a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>
does not provide values. For that cases values are postulated by practical
reasons in Siberian cities and marked with source label <em>sgc</em>.
</p>
<p>Usually the data is not used directly. Instead use function <code><a href="#topic+m325nhl">m325nhl</a></code>.
</p>


<h3>Source</h3>

<p><a href="https://docs.cntd.ru/document/902148459">https://docs.cntd.ru/document/902148459</a>
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325testbench">m325testbench</a></code>
</p>

<hr>
<h2 id='m325testbench'>Minenergo-325. Test bench of district heating network</h2><span id='topic+m325testbench'></span>

<h3>Description</h3>

<p>Data describes a virtual test bench of branched district heating network
by exposing parameters associated with
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
They treat data as a snapshot of network state and use it
primarily for static thermal-hydraulic computations and topology effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m325testbench
</code></pre>


<h3>Format</h3>

<p>A data frame with 22 rows (number of nodes and incoming edges) and 15 variables:
</p>

<dl>
<dt>sender</dt><dd>
<p>An identifier of node which heat carrier flows out.
Type: any type that can be painlessly coerced to character
by <code><a href="base.html#topic+as.character">as.character</a></code>.
</p>
</dd>
<dt>acceptor</dt><dd>
<p>An identifier of node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to
character by <code><a href="base.html#topic+as.character">as.character</a></code>.
</p>
</dd>
<dt>temperature</dt><dd>
<p>Snapshot of thermal-hydraulic regime state: temperature of heat carrier
(water) sensor-measured on terminal acceptor node, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>. <code>NA</code>s are introduced for nodes
without temperature sensor.
</p>
</dd>
<dt>pressure</dt><dd>
<p>Snapshot of thermal-hydraulic regime state:
sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of heat carrier (water) inside the pipe (i.e. acceptor's incoming edge),
[<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>. <code>NA</code>s are introduced for nodes
without pressure sensor.
</p>
</dd>
<dt>flow_rate</dt><dd>
<p>Snapshot of thermal-hydraulic regime state:
sensor-measured amount of heat carrier (water) on terminal node that is
transferred by pipe (i.e. acceptor's incoming edge) during a period,
[<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
<code>NA</code>s are introduced for nodes without flow rate sensor.
</p>
</dd>
<dt>d</dt><dd>
<p>internal diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt>len</dt><dd>
<p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt>year</dt><dd>
<p>year when the pipe (i.e. acceptor's incoming edge) is put in operation after
laying or total overhaul.
Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code>.
</p>
</dd>
<dt>insulation</dt><dd>
<p>identifier of insulation that covers the exterior of pipe (i.e. acceptor's
incoming edge):
</p>

<dl>
<dt><code>0</code></dt><dd><p>no insulation</p>
</dd>
<dt><code>1</code></dt><dd><p>foamed polyurethane or analogue</p>
</dd>
<dt><code>2</code></dt><dd><p>polymer concrete</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code>.
</p>
</dd>
<dt>laying</dt><dd>
<p>type of pipe laying depicting the position of pipe in space. Only five
types of pipe laying are considered:
</p>

<ul>
<li> <p><code>air</code>,
</p>
</li>
<li> <p><code>channel</code>,
</p>
</li>
<li> <p><code>room</code>,
</p>
</li>
<li> <p><code>tunnel</code>,
</p>
</li>
<li> <p><code>underground</code>.
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt>beta</dt><dd>
<p>logical indicator: should they consider additional heat loss of fittings
located on this pipe (i.e. acceptor's incoming edge)?
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.
</p>
</dd>
<dt>exp5k</dt><dd>
<p>logical indicator for regime of pipe (i.e. acceptor's incoming edge): if
<code>TRUE</code> pipe is operated more that <code>5000</code> hours per year.
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.
</p>
</dd>
<dt>roughness</dt><dd>
<p>roughness of internal wall of pipe (i.e. acceptor's incoming edge),
[<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt>inlet</dt><dd>
<p>elevation of pipe inlet, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt>outlet</dt><dd>
<p>elevation of pipe outlet, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
</dl>



<h3>Details</h3>

<p>The test bench has the next configuration:
</p>
<p><img src="../help/figures/m325testbench.png" alt="m325testbench.png" />
</p>
<p>As it may be seen from the figure there is a particularity in topology of
the provided directed graph: each node has only single ancestor. Hence one
of isomorphic representation of such directed graph is a
<code><a href="base.html#topic+data.frame">data.frame</a></code> in which each row describes a node along with its
incoming edge and each column contains an attribute value for that node or
an attribute value for its incoming edge.
</p>
<p>Since they deal with incoming edges and hence nodes are all flow acceptors
the natural enumeration of nodes is by acceptor id.
</p>
<p>Note that to leverage
<a href="https://cran.r-project.org/package=igraph">igraph</a>
functionality for plotting there is a zero sender of flow.
</p>


<h3>See Also</h3>

<p>Other Minenergo: 
<code><a href="#topic+m278hlair">m278hlair</a>()</code>,
<code><a href="#topic+m278hlcha">m278hlcha</a>()</code>,
<code><a href="#topic+m278hlund">m278hlund</a>()</code>,
<code><a href="#topic+m278insdata">m278insdata</a></code>,
<code><a href="#topic+m278inshcm">m278inshcm</a>()</code>,
<code><a href="#topic+m278soildata">m278soildata</a></code>,
<code><a href="#topic+m325beta">m325beta</a>()</code>,
<code><a href="#topic+m325nhl">m325nhl</a>()</code>,
<code><a href="#topic+m325nhldata">m325nhldata</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Do not hesitate to use `data.table` and `igraph` for larger chunks of network.

# Check for declared topology isomorphism:
stopifnot(
  all(!duplicated(m325testbench$acceptor))
)

# Do all terminal nodes have sensor-measured regime parameters?:
terminal_nodes &lt;- subset(m325testbench, !(acceptor %in% sender))
stopifnot(
  all(!is.na(subset(terminal_nodes, select = c(temperature, pressure, flow_rate))))
)

</code></pre>

<hr>
<h2 id='m325tracebw'>Minenergo-325. Massively trace backwards thermal-hydraulic regime for
district heating network</h2><span id='topic+m325tracebw'></span>

<h3>Description</h3>

<p>Trace values of thermal-hydraulic regime (temperature, pressure,
flow rate, and other) in the bunched pipeline against the flow direction using norms
of heat loss values prescribed by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
</p>
<p>Algorithm also suits for partially measurable district heating network with
massive data lack conditions, when there are no temperature and pressure
sensor readings on the majority of terminal nodes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m325tracebw(
  sender = 6,
  acceptor = 7,
  temperature = 70,
  pressure = pipenostics::mpa_kgf(6),
  flow_rate = 20,
  d = 100,
  len = 72.446,
  year = 1986,
  insulation = 0,
  laying = "tunnel",
  beta = FALSE,
  exp5k = TRUE,
  roughness = 0.001,
  inlet = 0.5,
  outlet = 1,
  method = "romeo",
  opinion = "median",
  verbose = TRUE,
  csv = FALSE,
  file = "m325tracebw.csv"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m325tracebw_+3A_sender">sender</code></td>
<td>
<p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_acceptor">acceptor</code></td>
<td>
<p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_temperature">temperature</code></td>
<td>
<p>Sensor-measured temperature of heat carrier (water) sensor-measured on 
the terminal acceptor node, [<em>°C</em>].
Use <code>NA_float_</code>s for (terminal) nodes without temperature sensor.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_pressure">pressure</code></td>
<td>
<p>Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of heat carrier (water) inside the pipe (i.e. acceptor's incoming edge),
[<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_flow_rate">flow_rate</code></td>
<td>
<p>Sensor-measured amount of heat carrier (water) on terminal node that is
transferred by pipe (i.e. acceptor's incoming edge) during a period, [<em>ton/hour</em>]. 
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
Use <code>NA_float_</code>s for nodes without flow rate sensor.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_len">len</code></td>
<td>
<p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_year">year</code></td>
<td>
<p>year when the pipe (i.e. acceptor's incoming edge) is put in operation
after laying or total overhaul.
Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_insulation">insulation</code></td>
<td>
<p>identifier of insulation that covers the exterior of pipe (i.e. acceptor's
incoming edge):
</p>

<dl>
<dt><code>0</code></dt><dd><p>no insulation</p>
</dd>
<dt><code>1</code></dt><dd><p>foamed polyurethane or analogue</p>
</dd>
<dt><code>2</code></dt><dd><p>polymer concrete</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_laying">laying</code></td>
<td>
<p>type of pipe laying depicting the position of pipe in space. Only five
types of pipe laying are considered:
</p>

<ul>
<li> <p><code>air</code>,
</p>
</li>
<li> <p><code>channel</code>,
</p>
</li>
<li> <p><code>room</code>,
</p>
</li>
<li> <p><code>tunnel</code>,
</p>
</li>
<li> <p><code>underground</code>.
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_beta">beta</code></td>
<td>
<p>logical indicator: should they consider additional heat loss of fittings
located on this pipe (i.e. acceptor's incoming edge)?
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_exp5k">exp5k</code></td>
<td>
<p>logical indicator for regime of pipe (i.e. acceptor's incoming edge): if
<code>TRUE</code> pipe is operated more that <code>5000</code> hours per year.
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_roughness">roughness</code></td>
<td>
<p>roughness of internal wall of pipe (i.e. acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_inlet">inlet</code></td>
<td>
<p>elevation of pipe inlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_outlet">outlet</code></td>
<td>
<p>elevation of pipe outlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_method">method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>:
</p>

<ul>
<li> <p><code>romeo</code>
</p>
</li>
<li> <p><code>vatankhan</code>
</p>
</li>
<li> <p><code>buzelli</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.
For more details see <code><a href="#topic+dropp">dropp</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_opinion">opinion</code></td>
<td>
<p>method for aggregating values of regime parameters on each node for the
next tracing step:
</p>

<dl>
<dt><code>mean</code></dt><dd><p>values of parameter are averaged before the next
tracing step</p>
</dd>
<dt><code>median</code></dt><dd><p>median of parameter values are used for the next
tracing step</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_verbose">verbose</code></td>
<td>
<p>logical indicator: should they watch tracing process on console?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_csv">csv</code></td>
<td>
<p>logical indicator: should they incrementally dump results to <em>csv</em>-
file while tracing?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracebw_+3A_file">file</code></td>
<td>
<p>name of <em>csv</em>-file which they dump results to.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code> of length 1 that can be used safely
to create a file and write to it.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>They consider the topology of district heating network represented by
<code><a href="#topic+m325testbench">m325testbench</a></code>:
</p>
<p><img src="../help/figures/m325tracebw0.png" alt="m325tracebw0.png" />
</p>
<p>The network may be partially sensor-equipped too:
</p>
<p><img src="../help/figures/m325tracebwp.png" alt="m325tracebwp.png" />
</p>
<p>In latter case no more than two nodes must be equipped with pressure and temperature
sensors whereas for other nodes only flow rate sensors must be installed.
</p>
<p>Tracing starts from sensor-equipped nodes and goes backwards, i.e against
the flow direction.
</p>
<p>Though some input arguments are natively vectorized their individual values
all relate to common part of district heating network, i.e. associated with
common object. It is due to isomorphism between vector representation and
directed graph of this network. For more details of isomorphic topology
description see <code><a href="#topic+m325testbench">m325testbench</a></code>.
</p>
<p>Before tracing starts for the next node, previously calculated values of
thermal-hydraulic parameters are aggregated by either averaging or
by median. The latter seems more robust for avoiding strong influence of
possible outliers which may come from actual heating transfer anomalies,
erroneous sensor readings or wrong pipeline specifications.
</p>
<p>Aggregation for values of flow rate at the node is always <code><a href="base.html#topic+sum">sum</a></code>.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+data.frame">data.frame</a></code> containing results (detailed log) of tracing in
<a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data">narrow format</a>:
</p>

<dl>
<dt><code>node</code></dt><dd>
<p><em>Tracing job</em>. Identifier of the node which regime parameters is
calculated for. Values in this vector are identical to those in
argument <code>acceptor</code>. 
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>tracing</code></dt><dd>
<p><em>Tracing job</em>. Identifiers of nodes from which regime parameters
are traced for the given node. Identifier <code>sensor</code> is used when
values of regime parameters for the node are sensor readings.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>backward</code></dt><dd>
<p><em>Tracing job</em>. Identifier of tracing direction. It constantly
equals to <code>TRUE</code>. 
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.
</p>
</dd>
<dt><code>aggregation</code></dt><dd>
<p><em>Tracing job</em>. Identifier of aggregation method: <em>span</em>, <em>median</em>, <em>mean</em>, or <em>identity</em>. Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>loss</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative specific heat loss power of adjacent pipe, [<em>kcal/m/h</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flux</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat flux of adjacent pipe, [<em>W/m^2</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>Q</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat loss of adjacent pipe per day, [<em>kcal</em>]. 
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>temperature</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
carrier (water) that is associated with the node, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>pressure</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
carrier (water) that is associated with the node, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flow_rate</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
carrier (water) that is associated with the node, [<em>ton/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>job</code></dt><dd>
<p><em>Tracing job</em>. Value of tracing job counter. 
Type: <code><a href="checkmate.html#topic+assert_count">assert_count</a></code>.
</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_data_frame">assert_data_frame</a></code>.
</p>


<h3>See Also</h3>

<p>Other Regime tracing: 
<code><a href="#topic+m325tracefw">m325tracefw</a>()</code>,
<code><a href="#topic+m325traceline">m325traceline</a>()</code>,
<code><a href="#topic+tracebw">tracebw</a>()</code>,
<code><a href="#topic+tracefw">tracefw</a>()</code>,
<code><a href="#topic+traceline">traceline</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pipenostics)

## It is possible to run without specification of argument values:
m325tracebw()

## Consider isomorphic representation of District Heating Network graph:
DHN &lt;- pipenostics::m325testbench
DHN$d &lt;- 1e3*DHN$d  # convert [m] to [mm]

## When tracing large network graphs put screen log to file
output &lt;- do.call("m325tracebw", c(as.list(DHN), verbose = TRUE))

## Distinct options for opinion aggregation lead to distinct traced
## temperature and pressure:

## * When aggregation is by mean:
output_mean &lt;- do.call(
  "m325tracebw", c(as.list(DHN), verbose = FALSE, opinion = "mean")
)

## * When aggregation is by median:
output_median &lt;- do.call(
  "m325tracebw", c(as.list(DHN), verbose = FALSE, opinion = "median")
)

## The differences between aggregations should be:
aggregation_differences &lt;- c(delta_t = 0.03732, delta_p = 0.00139, delta_g = 0)
print(aggregation_differences)

## Check:
stopifnot(
  round(
    subset(
      output_mean,
      node == 13 &amp; aggregation == "median",
      c("temperature", "pressure", "flow_rate")
    ) - subset(
      output_median,
      node == 13 &amp; aggregation == "median",
      c("temperature", "pressure", "flow_rate")
    ),
    5
    # difference between aggregation options
  ) == aggregation_differences
)

## It is possible to process partially measurable District Heating Network:

## * Simulate lack of temperature and pressure sensors:
DHN[c(7, 10, 21, 24), c("temperature", "pressure")] &lt;- NA_real_

## Trace thermal-hydraulic regime
output &lt;- do.call("m325tracebw", c(as.list(DHN)))
print(output)

</code></pre>

<hr>
<h2 id='m325tracefw'>Minenergo-325. Massively trace forwards thermal-hydraulic regime for district
heating network</h2><span id='topic+m325tracefw'></span>

<h3>Description</h3>

<p>Trace values of thermal-hydraulic regime (temperature, pressure,
flow rate, and other) in the bunched pipeline along the flow direction using norms
of heat loss values prescribed by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m325tracefw(
  sender = c(0, 1),
  acceptor = c(1, 2),
  temperature = c(70, NA_real_),
  pressure = c(pipenostics::mpa_kgf(6), NA_real_),
  flow_rate = c(20, NA_real_),
  d = rep_len(100, 2),
  len = rep_len(72.446, 2),
  year = rep_len(1986, 2),
  insulation = rep_len(0, 2),
  laying = rep_len("tunnel", 2),
  beta = rep_len(FALSE, 2),
  exp5k = rep_len(TRUE, 2),
  roughness = rep_len(0.001, 2),
  inlet = c(0.5, 1),
  outlet = c(1, 1),
  elev_tol = 0.1,
  method = "romeo",
  verbose = TRUE,
  csv = FALSE,
  file = "m325tracefw.csv",
  use_cluster = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m325tracefw_+3A_sender">sender</code></td>
<td>
<p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_acceptor">acceptor</code></td>
<td>
<p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_temperature">temperature</code></td>
<td>
<p>Sensor-measured temperature of heat carrier (water) sensor-measured on 
the root node, [<em>°C</em>].
Use <code>NA_float_</code>s for nodes without temperature sensor.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_pressure">pressure</code></td>
<td>
<p>Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of heat carrier (water) inside the pipe on the root node, [<em>MPa</em>].
Use <code>NA_float_</code>s for nodes without pressure sensor.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_flow_rate">flow_rate</code></td>
<td>
<p>Sensor-measured amount of heat carrier (water) on root node that is
transferred by pipe during a period, [<em>ton/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
Use <code>NA_float_</code>s for nodes without flow rate sensor.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_len">len</code></td>
<td>
<p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_year">year</code></td>
<td>
<p>year when the pipe (i.e. acceptor's incoming edge) is put in operation
after laying or total overhaul.
Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_insulation">insulation</code></td>
<td>
<p>identifier of insulation that covers the exterior of pipe (i.e. acceptor's
incoming edge):
</p>

<dl>
<dt><code>0</code></dt><dd><p>no insulation</p>
</dd>
<dt><code>1</code></dt><dd><p>foamed polyurethane or analogue</p>
</dd>
<dt><code>2</code></dt><dd><p>polymer concrete</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_laying">laying</code></td>
<td>
<p>type of pipe laying depicting the position of pipe in space. Only five
types of pipe laying are considered:
</p>

<ul>
<li> <p><code>air</code>,
</p>
</li>
<li> <p><code>channel</code>,
</p>
</li>
<li> <p><code>room</code>,
</p>
</li>
<li> <p><code>tunnel</code>,
</p>
</li>
<li> <p><code>underground</code>.
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_beta">beta</code></td>
<td>
<p>logical indicator: should they consider additional heat loss of fittings
located on this pipe (i.e. acceptor's incoming edge)?
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_exp5k">exp5k</code></td>
<td>
<p>logical indicator for regime of pipe (i.e. acceptor's incoming edge): if
<code>TRUE</code> pipe is operated more that <code>5000</code> hours per year.
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_roughness">roughness</code></td>
<td>
<p>roughness of internal wall of pipe (i.e. acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_inlet">inlet</code></td>
<td>
<p>elevation of pipe inlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_outlet">outlet</code></td>
<td>
<p>elevation of pipe outlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_elev_tol">elev_tol</code></td>
<td>
<p>maximum allowed discrepancy between adjacent outlet and inlet elevations
of two subsequent pipes in the traced path, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_method">method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>:
</p>

<ul>
<li> <p><code>romeo</code>
</p>
</li>
<li> <p><code>vatankhan</code>
</p>
</li>
<li> <p><code>buzelli</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.
For more details see <code><a href="#topic+dropp">dropp</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_verbose">verbose</code></td>
<td>
<p>logical indicator: should they watch tracing process on console?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_csv">csv</code></td>
<td>
<p>logical indicator: should they incrementally dump results to <em>csv</em>-
file while tracing?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_file">file</code></td>
<td>
<p>name of <em>csv</em>-file which they dump results to.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code> of length 1 that can be used safely
to create a file and write to it.</p>
</td></tr>
<tr><td><code id="m325tracefw_+3A_use_cluster">use_cluster</code></td>
<td>
<p>utilize functionality of parallel processing on multi-core CPU.
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The calculated (values of) regime may be considered as representation of
district heating process in conditions of hypothetically perfect
technical state of pipe walls and insulation.
</p>
<p>They consider the topology of district heating network represented by
<code><a href="#topic+m325testbench">m325testbench</a></code>:
</p>
<p><img src="../help/figures/m325tracefw.png" alt="m325tracefw.png" />
</p>
<p>Tracing starts from sensor-equipped root node and goes forward, i.e along
the flow direction. Function <code><a href="#topic+m325traceline">m325traceline</a></code> serves under the
hood for tracing identified linear segments from root node to every
terminal node. Hence they only need root node to be equipped with sensors.
Sensors at other nodes are redundant in forward tracing, since the tracing
algorithm by no means consider them for tracing.
</p>
<p>Moreover in the forward tracing algorithm they assume the flow of heat
carrier is distributed proportionally to the cross-sectional area of the
outgoing pipeline. Actually, a lot of reasons may cause significant
deviations from this assumption. As a result, the sequence of paired
backward/forward tracing may be divergent for regime parameters.
</p>
<p>Though some input arguments are natively vectorized their individual values
all relate to common part of district heating network, i.e. associated with
common object. It is due to isomorphism between vector representation and
directed graph of this network. For more details of isomorphic topology
description see <code><a href="#topic+m325testbench">m325testbench</a></code>.
</p>
<p>They are welcome to couple the algorithm with functionality of
<a href="https://CRAN.R-project.org/package=data.table">data.table</a>.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+data.frame">data.frame</a></code> containing results (detailed log) of tracing in
<a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data">narrow format</a>:
</p>

<dl>
<dt><code>node</code></dt><dd>
<p><em>Tracing job</em>. Identifier of the node which regime parameters is
calculated for. Values in this vector are identical to those in
argument <code>acceptor</code>.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>tracing</code></dt><dd>
<p><em>Tracing job</em>. Identifiers of nodes from which regime parameters
are traced for the given node. Identifier <code>sensor</code> is used when
values of regime parameters for the node are sensor readings.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>backward</code></dt><dd>
<p><em>Tracing job</em>. Identifier of tracing direction. It constantly
equals to <code>FALSE</code>.
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.
</p>
</dd>
<dt><code>aggregation</code></dt><dd>
<p><em>Tracing job</em>. Identifier of the aggregation method associated
with traced values. For forward tracing the only option is
<code>identity</code>.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>temperature</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
carrier (water) that is associated with the node, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>pressure</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
carrier (water) that is associated with the node, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flow_rate</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
carrier (water) that is associated with the node, [<em>ton/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>job</code></dt><dd>
<p><em>Tracing job</em>. Value of tracing job counter.
For forward tracing value of <code>job</code> counts the number of traced paths from root node.
Type: <code><a href="checkmate.html#topic+assert_count">assert_count</a></code>.
</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_data_frame">assert_data_frame</a></code>.
</p>


<h3>See Also</h3>

<p>Other Regime tracing: 
<code><a href="#topic+m325tracebw">m325tracebw</a>()</code>,
<code><a href="#topic+m325traceline">m325traceline</a>()</code>,
<code><a href="#topic+tracebw">tracebw</a>()</code>,
<code><a href="#topic+tracefw">tracefw</a>()</code>,
<code><a href="#topic+traceline">traceline</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pipenostics)

# Minimum two nodes should be in district heating network graph:
m325tracefw(verbose = FALSE)

# Consider isomorphic representation of District Heating Network graph:
DHN &lt;- pipenostics::m325testbench

# * avoid using numeric identifiers for nodes:
DHN$sender   &lt;- sprintf("N%02i", DHN$sender)
DHN$acceptor &lt;- sprintf("N%02i", DHN$acceptor)

# * alter units:
DHN$d &lt;- 1e3 * DHN$d  # convert [m] to [mm]

# Perform backward tracing to get regime on root node:
bw_report &lt;- do.call("m325tracebw", c(as.list(DHN), verbose = FALSE))

# Put the traced values to the root node of test bench:
root_node_idx &lt;- 12
root_node &lt;- sprintf("N%02i", root_node_idx)
regime_param  &lt;- c("temperature", "pressure", "flow_rate")
DHN[root_node_idx, regime_param] &lt;-
  subset(bw_report,
         node == root_node &amp; aggregation == "median",
         regime_param)
rm(root_node, root_node_idx)

# Trace the test bench forward for the first time:
fw_report &lt;- do.call("m325tracefw",
                     c(as.list(DHN), verbose = FALSE, elev_tol = .5))

# Let's compare traced regime at terminal nodes back to test bench:
report &lt;- subset(
  rbind(bw_report, fw_report),
  node %in% subset(DHN, !(acceptor %in% sender))$acceptor &amp;
    aggregation == "identity"
)

regime_delta &lt;- colMeans(
  subset(report, backward, regime_param) -
    subset(report, !backward, regime_param)
)
print(regime_delta)

stopifnot(sqrt(regime_delta %*% regime_delta) &lt; 0.5)

</code></pre>

<hr>
<h2 id='m325traceline'>Minenergo-325. Trace thermal-hydraulic regime for linear segment of district
heating network</h2><span id='topic+m325traceline'></span>

<h3>Description</h3>

<p>Trace values of thermal-hydraulic regime (temperature, pressure,
flow_rate, and other) along the adjacent linear segments of pipeline using
norms of heat loss values prescribed by
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>m325traceline(
  temperature = 130,
  pressure = mpa_kgf(6),
  flow_rate = 250,
  g = 0,
  d = 700,
  len = c(600, 530, 300, 350),
  year = 1986,
  insulation = 0,
  laying = "underground",
  beta = FALSE,
  exp5k = TRUE,
  roughness = 0.006,
  inlet = 0,
  outlet = 0,
  elev_tol = 0.1,
  method = "romeo",
  forward = TRUE,
  absg = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="m325traceline_+3A_temperature">temperature</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Sensor-measured temperature of heat
carrier (water)
inside the pipe sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_pressure">pressure</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute
pressure</a> of heat carrier (water) sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_flow_rate">flow_rate</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Amount of heat carrier (water)
sensor-measured at the inlet (forward tracing) or at the outlet (backward
tracing) of path, [<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_g">g</code></td>
<td>
<p>amount of heat carrier discharge to network for each pipe segment in the
tracing path enumerated along the direction of flow. If flag <code>absg</code>
is <code>TRUE</code> then they treat argument <code>g</code> as absolute value in
[<em>ton/hour</em>], otherwise they do as percentage of flow_rate in the
pipe segment.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_d">d</code></td>
<td>
<p>internal diameters of subsequent pipes in tracing path that are enumerated
along the direction of flow, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_len">len</code></td>
<td>
<p>length of subsequent pipes in tracing path that are enumerated
along the direction of flow, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_year">year</code></td>
<td>
<p>year when pipe is put in operation after laying or total overhaul for
each pipe in tracing path enumerated along the direction of flow.
Type: <code><a href="checkmate.html#topic+assert_integerish">assert_integerish</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_insulation">insulation</code></td>
<td>
<p>insulation that covers the exterior of pipe:
</p>

<dl>
<dt><code>0</code></dt><dd><p>no insulation</p>
</dd>
<dt><code>1</code></dt><dd><p>foamed polyurethane or analogue</p>
</dd>
<dt><code>2</code></dt><dd><p>polymer concrete</p>
</dd>
</dl>

<p>for each pipe in tracing path enumerated along the direction of flow.
Type: <code><a href="checkmate.html#topic+assert_numeric">assert_numeric</a></code> and <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_laying">laying</code></td>
<td>
<p>type of pipe laying depicting the position of pipe in space:
</p>

<ul>
<li> <p><code>air</code>
</p>
</li>
<li> <p><code>channel</code>
</p>
</li>
<li> <p><code>room</code>
</p>
</li>
<li> <p><code>tunnel</code>
</p>
</li>
<li> <p><code>underground</code>
</p>
</li></ul>

<p>for each pipe in tracing path enumerated along the direction of flow.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code> and <code><a href="checkmate.html#topic+assert_subset">assert_subset</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_beta">beta</code></td>
<td>
<p>logical indicator: should they consider additional heat loss of fittings?
Logical value for each pipe in tracing path enumerated along the direction
of flow. Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_exp5k">exp5k</code></td>
<td>
<p>logical indicator for regime of pipe: is pipe operated more that
<code>5000</code> hours per year? Logical value for each pipe in tracing path
enumerated along the direction of flow.
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_roughness">roughness</code></td>
<td>
<p>roughness of internal wall for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_inlet">inlet</code></td>
<td>
<p>elevation of pipe inlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_outlet">outlet</code></td>
<td>
<p>elevation of pipe outlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_elev_tol">elev_tol</code></td>
<td>
<p>maximum allowed discrepancy between adjacent outlet and inlet elevations of
two subsequent pipes in the traced path, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_method">method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>
</p>

<ul>
<li> <p><code>romeo</code>
</p>
</li>
<li> <p><code>vatankhan</code>
</p>
</li>
<li> <p><code>buzelli</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>. For more details see <code><a href="#topic+dropp">dropp</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_forward">forward</code></td>
<td>
<p>tracing direction flag: is it a forward direction of tracing?
If <code>FALSE</code> the backward tracing is performed.
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="m325traceline_+3A_absg">absg</code></td>
<td>
<p>Whether argument <code>g</code> (amount of heat carrier discharge to network) is an
absolute value in [<em>ton/hour</em>] (<code>TRUE</code>) or is it a percentage of
flow rate in the pipe segment (<code>FALSE</code>)?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The calculated (values of) regime may be considered as representation of
district heating process in conditions of hypothetically perfect
technical state of pipe walls and insulation.
</p>
<p>They consider only simple tracing paths which do not contain rings and any
kind of parallelization. At the same time bidirectional (forward and
backward) tracing is possible in accordance with sensor position. They also
may consider discharges to network at the inlet of each pipeline segment
as an approximation of actual forks of flows. Relevant illustration of
adopted assumptions for 4-segment tracing path is depicted on the next
figure.
</p>
<p><img src="../help/figures/m325regtrace.png" alt="m325regtrace.png" />
</p>
<p>They make additional check for consistency of <code>inlet</code> and <code>outlet</code>
values for subsequent pipe segments. Discrepancy of appropriate elevations
cannot be more than <code>elev_tol</code>.
</p>
<p>Since inner diameter of the pipe is used as input, the the thickness of the
pipe wall additionally considered in heat flux calculations. Pipe wall thickness
is derived from pipe diameter using
<a href="https://docs.cntd.ru/document/1200174717">GOST 30732</a> specifications.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+list">list</a></code> containing results (detailed log) of tracing for each pipe
in tracing path enumerated along the direction of flow:
</p>

<dl>
<dt><code>temperature</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
carrier (water), [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>pressure</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
carrier (water) for each pipe in tracing path enumerated along the
direction of flow, [<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flow_rate</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
carrier (water) for each pipe in tracing path enumerated along the
direction of flow, [<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>loss</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative specific heat
loss power for each pipe in tracing path enumerated along the direction
of flow, [<em>kcal/m/h</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flux</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat flux for each pipe
in tracing path enumerated along the direction of flow, [<em>W/m^2</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>Q</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat loss for each
pipe in tracing path enumerated along the direction of flow per day,
[<em>kcal</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_list">assert_list</a></code>.
</p>


<h3>See Also</h3>

<p>Other Regime tracing: 
<code><a href="#topic+m325tracebw">m325tracebw</a>()</code>,
<code><a href="#topic+m325tracefw">m325tracefw</a>()</code>,
<code><a href="#topic+tracebw">tracebw</a>()</code>,
<code><a href="#topic+tracefw">tracefw</a>()</code>,
<code><a href="#topic+traceline">traceline</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Consider 4-segment tracing path depicted in ?m325regtrace help page.
# First, let sensor readings for forward tracing:
t_fw &lt;- 130  # [°C]
p_fw &lt;- mpa_kgf(6)*all.equal(.588399, mpa_kgf(6))  # [MPa]
g_fw &lt;- 250  # [ton/hour]

# Let discharges to network for each pipeline segment are somehow determined as
discharges &lt;- seq(0, 30, 10)  # [ton/hour]

# Then the calculated regime (red squares) for forward tracing is
regime_fw &lt;- m325traceline(t_fw, p_fw, g_fw, discharges, forward = TRUE)
print(regime_fw)

# $temperature
# [1] 129.1799 128.4269 127.9628 127.3367
#
# $pressure
# [1] 0.5878607 0.5874226 0.5872143 0.5870330
#
# $flow_rate
# [1] 250 240 220 190
#
# $loss
# [1] 348.0000 347.1389 346.3483 345.8610
#
# $flux
# [1] 181.9600 181.5097 181.0963 180.8415
#
# $Q
# [1] 5011200 4415607 2493707 2905232


# Next consider values of traced regime as sensor readings for backward tracing:
t_bw &lt;- 127.3367  # [°C]
p_bw &lt;- .5870330  # [MPa]
g_bw &lt;- 190  # [ton/hour]

# Then the calculated regime (red squares) for backward tracing is
regime_bw &lt;- m325traceline(t_bw, p_bw, g_bw, discharges, forward = FALSE)
print(regime_bw)

# $temperature
# [1] 129.9953 129.1769 128.4254 127.9619
#
# $pressure
# [1] 0.5883998 0.5878611 0.5874228 0.5872144
#
# $flow_rate
# [1] 250 250 240 220
#
# $loss
# [1] 347.1358 346.3467 345.8599 345.2035
#
# $flux
# [1] 181.5081 181.0955 180.8410 180.4978
#
# $Q
# [1] 4998755 4405529 2490192 2899710

# Let compare sensor readings with backward tracing results:
tracing &lt;- with(regime_bw, {
  lambda &lt;- function(val, constraint)
    c(val, constraint, constraint - val,
      abs(constraint - val)*100/constraint)
  first &lt;- 1
  structure(
    rbind(
      lambda(temperature[first], t_fw),
      lambda(pressure[first],    p_fw),
      lambda(flow_rate[first], g_fw)
    ),
    dimnames = list(
      c("temperature", "pressure", "flow_rate"),
      c("sensor.value", "traced.value", "abs.discr", "rel.discr")
    )
  )
})
print(tracing)

# sensor.value traced.value     abs.discr    rel.discr
# temperature  129.9952943   130.000000  4.705723e-03 0.0036197868
# pressure       0.5883998     0.588399 -8.215938e-07 0.0001396321
# flow_rate    250.0000000   250.000000  0.000000e+00 0.0000000000

</code></pre>

<hr>
<h2 id='mepof'>Probability of failure of the corroded pipe within maximum entropy</h2><span id='topic+mepof'></span>

<h3>Description</h3>

<p>Calculate <em>probability of failure</em> (POF) of the corroded pipe taking into
account its actual level of defectiveness and exploiting
<a href="https://en.wikipedia.org/wiki/Monte_Carlo_method#Monte_Carlo_and_random_numbers">Monte-Carlo simulation</a>
within <a href="https://en.wikipedia.org/wiki/Principle_of_maximum_entropy">Principle of maximum entropy</a>.
</p>
<p>Consistent estimate of POF for pipeline systems plays
a critical role in optimizing their operation. To prevent pipeline failures
due to actively growing defects it is necessary to be able to assess the
pipeline system failure operation probability during a certain period,
taking into account its actual level of defectiveness. The pipeline limit
state comes when the burst pressure, considered as a random variable,
reaches an unacceptable level, or when the defect depth, also a random
variable, exceeds the predetermined limit value.
</p>
<p>That is why in the method they consider two possible failures for a single
pipeline cross section with the on-surface and longitudinally oriented
defect of <em>metal-loss</em> type:
</p>

<dl>
<dt><em>rupture</em></dt><dd><p>a decrease of value of failure pressure down
to the operating pressure.</p>
</dd>
<dt><em>leak</em></dt><dd><p>increase of corrosion depth (defect) up to the
specified ultimate permissible fraction of pipe wall thickness.</p>
</dd>
</dl>

<p>Since up to now no methods existed which would give absolutely correct POF
assessments they suggest simple fiddling with random values of affecting
factors without deeping into intrinsic mechanisms of corrossion. For this
purpose they choose classical
<a href="https://en.wikipedia.org/wiki/Monte_Carlo_method#Monte_Carlo_and_random_numbers">Monte-Carlo simulation</a>
within the <a href="https://en.wikipedia.org/wiki/Principle_of_maximum_entropy">Principle of maximum entropy</a>.
The latter allows to avoid doubtful and excessive preferences and
detalization when choosing probability distribution models for failure
factors and for <em>inline inspection</em> measurements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mepof(
  depth = seq(0, 10, length.out = 100),
  l = seq(40, 50, length.out = 100),
  d = rep.int(762, 100),
  wth = rep.int(10, 100),
  strength = rep.int(358.5274, 100),
  pressure = rep.int(0.588, 100),
  temperature = rep.int(150, 100),
  rar = function(n) stats::runif(n, 0.01, 0.3)/365,
  ral = function(n) stats::runif(n, 0.01, 0.3)/365,
  days = 0,
  k = 0.8,
  method = "b31g",
  n = 1e+06
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mepof_+3A_depth">depth</code></td>
<td>
<p>maximum depth of the corroded area measured during <em>inline inspection</em>,
[<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_l">l</code></td>
<td>
<p>maximum longitudinal length of corroded area measured during
<em>inline inspection</em>, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_strength">strength</code></td>
<td>
<p>one of the next characteristics of steel strength, [<em>MPa</em>]:
</p>

<ul>
<li><p> specified minimum yield of stress (<em>SMYS</em>)
for use with <code><a href="#topic+b31gpf">b31gpf</a></code> and <code><a href="#topic+b31gmodpf">b31gmodpf</a></code>.
</p>
</li>
<li><p> ultimate tensile strength (<em>UTS</em>) or specified minimum tensile
strength (<em>SMTS</em>) for use with other failure pressure codes
(<code><a href="#topic+dnvpf">dnvpf</a></code>, <code><a href="#topic+pcorrcpf">pcorrcpf</a></code>, <code><a href="#topic+shell92pf">shell92pf</a></code>).
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_pressure">pressure</code></td>
<td>
<p><a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of substance (i.e. heat carrier) inside the pipe measured near defect
position, [<em>MPa</em>]. In most cases this is a nominal operating pressure.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_temperature">temperature</code></td>
<td>
<p>temperature of substance (i.e. heat carrier) inside the pipe measured near
defect position, [<em>°C</em>]. In case of district heating network this is
usually a calculated value according to actual or normative thermal-hydraulic
regime. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_rar">rar</code></td>
<td>
<p>random number generator for simulating of distribution of radial corrosion
rate in pipe wall, [<em>mm/day</em>]. The only
argument <code>n</code> of the function should be the number of observations to
generate. Type: <code><a href="checkmate.html#topic+assert_function">assert_function</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_ral">ral</code></td>
<td>
<p>random number generator for simulating of distribution of longitudinal corrosion
rate in pipe wall, [<em>mm/day</em>]. The only
argument <code>n</code> of the function should be the number of observations to
generate. Type: <code><a href="checkmate.html#topic+assert_function">assert_function</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_days">days</code></td>
<td>
<p>number of days that have passed after or preceded the <em>inline inspection</em>, [].
Negative values are for retrospective assumptions whereas positives are for
failure prognosis. Type: <code><a href="checkmate.html#topic+assert_int">assert_int</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_k">k</code></td>
<td>
<p>alarm threshold for leakage failure. It usually <code>0.6</code>, <code>0.7</code>, or
<code>0.8</code>, []. If set to <code>1</code> no alarm before failure occurs.
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_method">method</code></td>
<td>
<p>method for calculating failure pressure:
</p>

<ul>
<li> <p><em>b31g</em> - using <code><a href="#topic+b31gpf">b31gpf</a></code>.
</p>
</li>
<li> <p><em>b31gmod</em> - using <code><a href="#topic+b31gmodpf">b31gmodpf</a></code>.
</p>
</li>
<li> <p><em>dnv</em> - using <code><a href="#topic+dnvpf">dnvpf</a></code>.
</p>
</li>
<li> <p><em>pcorrc</em> - using <code><a href="#topic+pcorrcpf">pcorrcpf</a></code>.
</p>
</li>
<li> <p><em>shell92</em> - using <code><a href="#topic+shell92pf">shell92pf</a></code>.
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.</p>
</td></tr>
<tr><td><code id="mepof_+3A_n">n</code></td>
<td>
<p>number of observations to generate for
<a href="https://en.wikipedia.org/wiki/Monte_Carlo_method#Monte_Carlo_and_random_numbers">Monte-Carlo simulations</a>,
Type: <code><a href="checkmate.html#topic+assert_count">assert_count</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since for all influence factors they can more or less assume range limits,
the <em>uniform distribution</em> gets the maximum entropy in this context
(see <a href="https://www.bipm.org/documents/20126/2071204/JCGM_101_2008_E.pdf/325dcaad-c15a-407c-1105-8b7f322d651c">JCGM 101:2008</a>).
That is why parameters of corrosion defects measured during the
<em>inline inspection</em> as well as regime parameters and engineering
characteristics of pipe segment - all they are simulated by
<code><a href="stats.html#topic+runif">runif</a></code>.
</p>
<p><code><a href="stats.html#topic+runif">runif</a></code>-limits for depth of corrosion defect are associated
with precision of commonly applied measurement instruments. For traditionally
exploited ultrasonic control those limits are well-known and can reach up to
10 % of pipe wall thickness. Whereas uncertainty of defect longitudinal
length may be more than enough constrained with 5 %.
</p>
<p>Recommendations for choosing stochastic characteristics of pipe
engineering factors (i.e. crossection diameter, wall thickness and material
strength) are taken from aggregated review of <em>Timashev et al.</em> but
gently transformed for compatibility with
<a href="https://en.wikipedia.org/wiki/Principle_of_maximum_entropy">Principle of maximum entropy</a>,
i.e. <code><a href="stats.html#topic+runif">runif</a></code>.
</p>
<p>Uncertainties of regime parameters in stohastic models are set minimized
by regarding only precision of metering devices which commonly applied in
district heating networks. For temperature it is about 2 °C.
</p>
<p>Since the rate of corrosion processes in the pipe wall is a consequence of
physical and chemical processes occurring at the atomic scale,
it depends on a large number of environmental factors differently and
ambiguously. That is why various deterministic and stochastic models can
be potentially involved in POF assessment. For that purpose radial and
longitudinal corrosion rate can be independently formulated as random value
generation functions. They only admit that change in depth and length of
corrosion defects in time is close to linear for the generated value of
corrosion rate.
</p>


<h3>Value</h3>

<p>Probability of pipe failure for each corroded area measured during
<em>inline inspection</em>. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
If <code>NA</code>s returned use another method
for calculating failure pressure.
</p>


<h3>References</h3>


<ol>
<li><p>  S. Timashev and A. Bushinskaya, <em>Diagnostics and Reliability
of Pipeline Systems</em>, Topics in Safety, Risk, Reliability and Quality 30,
<strong>DOI 10.1007/978-3-319-25307-7</strong>.
</p>
</li>
<li> <p><a href="https://www.bipm.org/en/home">BIPM</a>. Guides in Metrology (GUM).
<a href="https://www.bipm.org/documents/20126/2071204/JCGM_101_2008_E.pdf/325dcaad-c15a-407c-1105-8b7f322d651c">JCGM 101:2008</a>.
Evaluation of measurement data – <strong>Supplement 1</strong> to the <em>Guide to
the expression of uncertainty in measurement</em> –
Propagation of distributions using a <em>Monte Carlo</em> method.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)


# Let's consider a pipe in district heating network with
diameter           &lt;- 762         # [mm]
wall_thickness     &lt;-  10         # [mm]
UTS                &lt;- 434.3697    # [MPa]

# which transfers heat-carrier (water) at
operating_pressure &lt;-   0.588399  # [MPa].
temperature        &lt;-  95         # [°C]

# During inline inspection four corroded areas (defects) are detected with:
depth  &lt;- c(2.45,  7.86,   7.93,   8.15)  # [mm]

# whereas the length of all defects is not greater 200 mm:
length &lt;- rep(200, 4)  # [mm]

# Corrosion rates in radial and in longitudinal directions are not well-known and
# may vary in range .01 - .30 mm/year:
rar = function(n) stats::runif(n, .01, .30) / 365
ral = function(n) stats::runif(n, .01, .30) / 365

# Then POFs related to each corroded area are near:
pof &lt;- mepof(depth, length, rep(diameter, 4), rep(wall_thickness, 4),
             rep(UTS, 4), rep(operating_pressure, 4), rep(temperature, 4),
             rar, ral, method = "dnv")
print(pof)
# 0.000000 0.252510 0.368275 0.771595

# So, the POF of pipe is near
print(max(pof))
# 0.771595

# The value of POF changes in time. So, in a year after inline inspection of
# the pipe we can get something near
pof &lt;- mepof(depth, length, rep(diameter, 4), rep(wall_thickness, 4),
             rep(UTS, 4), rep(operating_pressure, 4), rep(temperature, 4),
             rar, ral, method = "dnv", days = 365)
print(pof)
# 0.000000 0.525539 0.648359 0.929099

# for entire pipe we get something near:
print(max(pof))
# 0.929099

# Two years ago before inline inspection the pipe state was rather good:
pof &lt;- mepof(depth, length, rep(diameter, 4), rep(wall_thickness, 4),
             rep(UTS, 4), rep(operating_pressure, 4), rep(temperature, 4),
             rar, ral, method = "dnv", days = -2 * 365)

print(pof)
# 0.000000 0.040780 0.072923 0.271751

# for entire pipe we get something near:
print(max(pof))
# 0.271751



</code></pre>

<hr>
<h2 id='meteos'>Get list of weather stations (meteos)</h2><span id='topic+meteos'></span>

<h3>Description</h3>

<p>Get a list of weather stations located primarily in the
central and northern parts of Eurasia. For each weather station, the 
following information is provided: an integer station ID, geographic 
coordinates, altitude, and the mean annual ground temperature averaged over
depth.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>meteos()
</code></pre>


<h3>Value</h3>

<p>list of weather stations (meteos) with the next fields:
</p>

<dl>
<dt><code>station_id</code></dt><dd><p>Weather station unique identifier. Type: <code><a href="checkmate.html#topic+assert_integer">assert_integer</a></code>.</p>
</dd>
<dt><code>name</code></dt><dd><p>Human-readable name of weather station. Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.</p>
</dd>
<dt><code>lat</code></dt><dd><p>Geographical position of wether station. Latitude, [<em>DD</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt><code>lon</code></dt><dd><p>Geographical position of wether station. Longitude, [<em>DD</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt><code>alt</code></dt><dd><p>Altitude - position of weather station above sea level, [m]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
<dt><code>avg</code></dt><dd><p>Mean annual ground temperature averaged over depth, [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_data_frame">assert_data_frame</a></code>.
</p>


<h3>References</h3>

<p><a href="http://meteo.ru/structure/lipik/">Climate Change Investigation Laboratory</a>.
Description of the array of daily data on soil temperature at depths up to 320 centimeters
by meteorological stations of the <em>Russian Federation</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mgtdhid">mgtdhid</a></code> to get hourly ground temperature values at different 
depths measured at the listed weather stations.
</p>
<p>Other utils: 
<code><a href="#topic+geoarea">geoarea</a>()</code>,
<code><a href="#topic+mgtdhid">mgtdhid</a>()</code>,
<code><a href="#topic+wth_d">wth_d</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)
 head(meteos())

</code></pre>

<hr>
<h2 id='mgtdhid'>Get ground temperature</h2><span id='topic+mgtdhid'></span><span id='topic+mgtdhidt'></span><span id='topic+mgtdhgeo'></span><span id='topic+mgtdhgeot'></span>

<h3>Description</h3>

<p>Get the undisturbed (median) value of ground temperature at different depths
at a specified time leveraging <em>Modified Ground Temperature Double Harmonic Model</em>
(<em>MGTDH</em>-model).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mgtdhid(id, tau = 1440L, depth = 2.4)

mgtdhidt(tau, id = 28434L, depth = 2.4)

mgtdhgeo(lat, lon, tau = 1440L, depth = 2.4, use_cluster = FALSE)

mgtdhgeot(tau, lat = 57, lon = 57, depth = 2.4)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mgtdhid_+3A_id">id</code></td>
<td>
<p>weather station unique identifier. Only identifiers from <code><a href="#topic+meteos">meteos</a></code> dataset are accepted.
Type: <code><a href="checkmate.html#topic+assert_integer">assert_integer</a></code>. For <code>mgtdhidt</code> acceptable length is <code>1</code>.</p>
</td></tr>
<tr><td><code id="mgtdhid_+3A_tau">tau</code></td>
<td>
<p>time point for which it is necessary to obtain the value of the soil
temperature; it can be specified as an integer, representing the 
number of hours that have passed since the beginning of the year, or 
as a value of <code><a href="base.html#topic+POSIXct">POSIXct</a></code> type. 
Type: <code><a href="checkmate.html#topic+assert_count">assert_count</a></code>, or <code><a href="checkmate.html#topic+assert_posixct">assert_posixct</a></code>. 
For <code>mgtdhid</code> acceptable length is <code>1</code>.</p>
</td></tr>
<tr><td><code id="mgtdhid_+3A_depth">depth</code></td>
<td>
<p>depth at which the ground temperature is calculated, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="mgtdhid_+3A_lat">lat</code></td>
<td>
<p>latitude of the geographical location where the value of soil temperature needs to be determined, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>. For <code>mgtdhgeot</code> acceptable length is <code>1</code>.</p>
</td></tr>
<tr><td><code id="mgtdhid_+3A_lon">lon</code></td>
<td>
<p>longitude of the geographical location where the value of soil temperature needs to be determined, [<em>DD</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>. For <code>mgtdhgeot</code> acceptable length is <code>1</code>.</p>
</td></tr>
<tr><td><code id="mgtdhid_+3A_use_cluster">use_cluster</code></td>
<td>
<p>utilize functionality of parallel processing on multi-core CPU.
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <em>MGTDH</em>-model is a modified solution of the thermal conductivity equation for soil
and can be expressed by the formula
</p>
<p style="text-align: center;"><code class="reqn">t\left( \tau, d \right) = \beta e^{r_1} \cdot A_1 \cos(2 \pi \omega \tau + r_1 - P_1) + \beta r_2^{A_2 \cdot d} \cos(4 \pi \omega \tau + r_2 - P_2)</code>
</p>

<p>where 
</p>

<dl>
<dt><code class="reqn">t\left( \tau, d \right)</code></dt><dd><p>undisturbed (median) ground temperature [<em>°C</em>] at specified depth <code class="reqn">d</code> [<em>m</em>], and time <code class="reqn">\tau</code> [<em>hour</em>].</p>
</dd>
<dt><code class="reqn">\tau</code></dt><dd><p>time point (<code>tau</code>) calculated in hours since the beginning of the year, [<em>hour</em>].</p>
</dd>
<dt><code class="reqn">d</code></dt><dd><p>depth (<code>depth</code>) at which the ground temperature should be calculated, [<em>m</em>].</p>
</dd>
<dt><code class="reqn">\beta = -1</code></dt><dd><p>shift constant, [].</p>
</dd>
<dt><code class="reqn">r_1(d) = -1000 d \sqrt{\frac{\pi \omega}{\alpha_s D}}</code>, <code class="reqn">r_2(d) = r_1(d) \sqrt{2}</code></dt><dd><p>temperature diffusivity factors, [].</p>
</dd>
<dt><code class="reqn">\omega = \frac{1}{8760}</code></dt><dd><p>rate of rotation of the <em>Earth</em>, expressed with an accuracy equal to the inverse of an hour, [<em>1/hour</em>].</p>
</dd>
<dt><code class="reqn">\alpha_s</code></dt><dd><p>soil diffusivity, [<em>mm^2/s</em>].</p>
</dd>
<dt><code class="reqn">D = 86400</code></dt><dd><p>constant that represents the number of seconds in one day, [<em>s/day</em>].</p>
</dd>
<dt><code class="reqn">A_1</code>, <code class="reqn">A_2</code></dt><dd><p>harmonic temperature amplitudes, [<em>°C</em>].</p>
</dd>
<dt><code class="reqn">P_1</code>, <code class="reqn">P_2</code></dt><dd><p>phase shifts, depending on the geographical location, [].</p>
</dd>
</dl>

<p>Soil diffusivity, <code class="reqn">\alpha_s</code>, harmonic temperature amplitudes, <code class="reqn">A_1</code>, <code class="reqn">A_2</code>, 
and phase shifts <code class="reqn">P_1</code>, <code class="reqn">P_2</code> are geographically dependant parameters which values 
were established for each weather station listed in <code><a href="#topic+meteos">meteos</a></code>-dataset.
</p>
<p>For the convenience of using the <em>MGTDH</em>-model, several interface 
functions have been provided. Each function generates a vector of type
<code><a href="checkmate.html#topic+assert_double">assert_double</a></code> as an output. 
</p>
<p>The <code>mgtdhid</code> and <code>mgtdhidt</code> functions are used to obtain 
ground temperature data from specific meteorological stations. 
</p>
<p>The functions <code>mgtdhgeo</code> and <code>mgtdhgeot</code> provide ground temperatures
at any geographical location, but note that their usage is primarily limited
to the Northern Asian part of <em>Eurasia</em>, as most meteorological stations
and parameters for the <em>MGTDH</em>-model are established there. Ground temperature
at the specified location is obtained by linear interpolation using barycentric
coordinates formed in the system of the three nearest meteorological stations.
</p>


<h3>Value</h3>

<p>Undisturbed (median) ground temperature value calculated with 
the <em>MGTDH</em>-model, specifically for the location of the 
user-specified meteorological station, at specified depth, and time, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>

<p>Lu Xing &amp; Jeffrey D. Spitler (2017) <em>Prediction of undisturbed ground temperature using analytical and numerical modeling. Part I: Model development and experimental validation</em>.
Science and Technology for the Built Environment, 23:5, 787-808, <a href="https://doi.org/10.1080/23744731.2016.1258371">doi:10.1080/23744731.2016.1258371</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+geodist">geodist</a></code> and <code><a href="#topic+geoarea">geoarea</a></code> for calculating geographical metrics.
</p>
<p>Other utils: 
<code><a href="#topic+geoarea">geoarea</a>()</code>,
<code><a href="#topic+meteos">meteos</a>()</code>,
<code><a href="#topic+wth_d">wth_d</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # Let consider the next geographical positions:
 lat &lt;- c(s28434 = 56.65, s28418 = 56.47, s23711 = 62.70, ControlPoint = 57)
 lon &lt;- c(s28434 = 57.78, s28418 = 53.73, s23711 = 56.20, ControlPoint = 57)
 
 # * ground temperatures at first three locations on 02 March 2023 at depth 3 m:
 mgtdhgeo(head(lat, 3), head(lon, 3), tau = as.POSIXct("2023-03-02"), depth = 3)

 # * it is the same as obtaining ground temperatures from weather stations:
 mgtdhid(id = c(28434L, 28418L, 23711L), tau = as.POSIXct("2023-03-02"), depth = 3)

 # * undisturbed ground temperature plot at Control Point:
 days &lt;- as.POSIXct("2023-01-01") + 3600*24*(seq.int(1, 365) - 1)
 plot(
   days, 
   mgtdhgeot(days, lat[["ControlPoint"]], lon[["ControlPoint"]]), 
   type = "l", 
   ylab = "Temperature, °C"
 )

</code></pre>

<hr>
<h2 id='mm_inch'>Inches to mm</h2><span id='topic+mm_inch'></span>

<h3>Description</h3>

<p>Convert length measured in <a href="https://en.wikipedia.org/wiki/Inch">inches</a>
to <a href="https://en.wikipedia.org/wiki/Millimetre">millimeters</a> (mm)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mm_inch(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mm_inch_+3A_x">x</code></td>
<td>
<p>length measured in <em>inches</em>, [<em>inch</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>length in <em>millimeters</em>, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+inch_mm">inch_mm</a></code> for converting <em>mm</em> to <em>inches</em>
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 mm_inch(c(0.03937008, 1))
 # [1]  1.0 25.4  # [mm]

</code></pre>

<hr>
<h2 id='mpa_kgf'>Kilogram-force per square cm to megapascals</h2><span id='topic+mpa_kgf'></span>

<h3>Description</h3>

<p>Convert pressure (stress) measured in <a href="https://en.wikipedia.org/wiki/Kilogram-force_per_square_centimetre">kilogram-force per square cm</a> (<code class="reqn">kgf/cm^2</code>)
to <a href="https://en.wikipedia.org/wiki/Pascal_(unit)">megapascals</a> (MPa)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mpa_kgf(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mpa_kgf_+3A_x">x</code></td>
<td>
<p>pressure (stress) measured in <em>kilogram-force per square cm</em>,
[<em>kgf/cm^2</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>pressure (stress) in <em>megapascals</em>, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+kgf_mpa">kgf_mpa</a></code> for converting <em>megapascals</em> to <em>kilogram-force per square cm</em>
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 mpa_kgf(c(10.1971619998, 1))
 # [1] 1.0000000 0.0980665  # [MPa]

</code></pre>

<hr>
<h2 id='mpa_psi'>Pounds per square inch to megapascals</h2><span id='topic+mpa_psi'></span>

<h3>Description</h3>

<p>Convert pressure (stress) measured in <a href="https://en.wikipedia.org/wiki/Pounds_per_square_inch">pounds per square inch</a> (PSI)
to <a href="https://en.wikipedia.org/wiki/Pascal_(unit)">megapascals</a> (MPa)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mpa_psi(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mpa_psi_+3A_x">x</code></td>
<td>
<p>pressure (stress) measured in <em>pounds per square inch</em> (<em>PSI</em>).
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>pressure (stress) in <em>megapascals</em> (<em>MPa</em>).
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+psi_mpa">psi_mpa</a></code> for converting <em>megapascals</em> to <em>pounds per square inch</em>
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+psi_mpa">psi_mpa</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 mpa_psi(c(145.03773800721814, 1))
 # [1] 1.000000000 0.006894757 # [MPa]

</code></pre>

<hr>
<h2 id='pcorrcpf'>PCORRC. Failure pressure of the corroded pipe</h2><span id='topic+pcorrcpf'></span>

<h3>Description</h3>

<p>Calculate failure pressure of the corroded pipe according to <em>PCORRC</em>
model.
</p>
<p><em>PCORRC</em> methodology was developed on the basis of studying the
mechanism of destruction of pipes, material of which has improved or high
fracture toughness, and on the high-precision modeling of the finite element
pipe models performed at the <em>Battelle Institute</em>. According to field
test results of a large number of actual pipe segments, the destruction
mechanism for defective pipeline segment depends on the pipe material
fracture toughness. These tests also showed that only pipes made out of
steel with improved or high fracture toughness fail a result of plastic
fracture. In determining the <em>Folias</em> factor the effect of increased
stress concentration and steel hardening in the plastic deformation zone at
the start of the defect failure process was taken into account.
</p>
<p>This code should be applied only to
</p>

<ul>
<li><p> a single cross section of the pipeline containing a longitudinally
oriented, flat bottom surface defect of corrosion/erosion type;
</p>
</li>
<li><p> pipelines, which operate at temperatures exceeding the temperature
of pipe material ductile–brittle transition, and for pipematerial
with the impact energy of Charpy 61 [<em>J</em>] and above.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>pcorrcpf(d, wth, uts, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pcorrcpf_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="pcorrcpf_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="pcorrcpf_+3A_uts">uts</code></td>
<td>
<p>ultimate tensile strength (<em>UTS</em>) or
specified minimum tensile strength (<em>SMTS</em>) as a
characteristic of steel strength, [<code class="reqn">MPa</code>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="pcorrcpf_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="pcorrcpf_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of corroded area, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Estimated failure pressure of the corroded pipe, [<code class="reqn">MPa</code>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>


<ol>
<li><p> S. Timashev and A. Bushinskaya, <em>Diagnostics and Reliability
of Pipeline Systems</em>, Topics in Safety, Risk, Reliability and Quality 30,
<strong>DOI 10.1007/978-3-319-25307-7</strong>
</p>
</li>
<li><p> A.C.Reddy, <em>Safety Failure Criteria of Fluorocarbon Plastic
Pipes for Dry Chlorine Transport using Finite Element Analysis</em>
Materials today: proceedings, Vol. <strong>4</strong>(8), 2017,
pp. <strong>7498</strong>-<strong>7506</strong>.
<strong>DOI 10.1016/j.matpr.2017.07.081</strong>
</p>
</li></ol>



<h3>See Also</h3>

<p>Other fail pressure functions: <code><a href="#topic+b31gpf">b31gpf</a></code>, <code><a href="#topic+b31gmodpf">b31gmodpf</a></code>,
<code><a href="#topic+dnvpf">dnvpf</a></code>, <code><a href="#topic+shell92pf">shell92pf</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 d     &lt;- c(812.8, 219.0)  # [mm]
 wth   &lt;- c( 19.1,  14.5)  # [mm]
 uts   &lt;- c(530.9, 455.1)   # [N/mm^2]
 l     &lt;- c(203.2, 200.0)  # [mm]
 depth &lt;- c( 13.4,   9.0)   # [mm]

 pcorrcpf(d, wth, uts, depth, l)
 # [1] 16.35449 33.01288

</code></pre>

<hr>
<h2 id='psi_mpa'>Megapascals to pounds per square inch</h2><span id='topic+psi_mpa'></span>

<h3>Description</h3>

<p>Convert pressure (stress) measured in <a href="https://en.wikipedia.org/wiki/Pascal_(unit)">megapascals</a> (MPa)
to <a href="https://en.wikipedia.org/wiki/Pounds_per_square_inch">pounds per square inch</a> (PSI)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psi_mpa(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="psi_mpa_+3A_x">x</code></td>
<td>
<p>pressure (stress) measured in <em>megapascals</em>. [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>pressure (stress) in <em>pounds per square inch</em>,
[<em>PSI</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mpa_psi">mpa_psi</a></code> for converting <em>pounds per square inch</em> to <em>megapascals</em>
</p>
<p>Other units: 
<code><a href="#topic+c_k">c_k</a>()</code>,
<code><a href="#topic+f_k">f_k</a>()</code>,
<code><a href="#topic+inch_mm">inch_mm</a>()</code>,
<code><a href="#topic+k_c">k_c</a>()</code>,
<code><a href="#topic+kgf_mpa">kgf_mpa</a>()</code>,
<code><a href="#topic+loss_flux">loss_flux</a>()</code>,
<code><a href="#topic+mm_inch">mm_inch</a>()</code>,
<code><a href="#topic+mpa_kgf">mpa_kgf</a>()</code>,
<code><a href="#topic+mpa_psi">mpa_psi</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 psi_mpa(c(6.89475728e-3, 1))
 # [1] 1.0000 145.0377 # [PSI]

</code></pre>

<hr>
<h2 id='re_u'>Estimate Reynolds number</h2><span id='topic+re_u'></span><span id='topic+re_v'></span><span id='topic+re_m'></span>

<h3>Description</h3>

<p>Estimate <em>Reynolds number</em> for fluid flow in a cylindrical pipe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>re_u(d, mu, u, rho)

re_v(d, mu, v, rho)

re_m(d, mu, m)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="re_u_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="re_u_+3A_mu">mu</code></td>
<td>
<p>dynamic viscosity of fluid in pipe, [<em>kg/m/s</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="re_u_+3A_u">u</code></td>
<td>
<p>mean velocity of fluid  in pipe, [<em>m/s</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="re_u_+3A_rho">rho</code></td>
<td>
<p>mass density of fluid  in pipe, [<em>kg/m^3</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="re_u_+3A_v">v</code></td>
<td>
<p>volumetric flow rate of fluid in pipe, [<em>m^3/s</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="re_u_+3A_m">m</code></td>
<td>
<p>mass flow rate of fluid in pipe, [<em>kg/s</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The calculation of <em>Reynolds number</em> is bounded by physically
reasonable limits of fluid properties found in domain specificity of
the package.
</p>


<h3>Value</h3>

<p><em>Reynolds number</em> - a dimensionless quantity that reveals the ratio
between inertial and viscous forces in the fluid, []. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other Fluid properties: 
<code><a href="#topic+fric_buzelli">fric_buzelli</a>()</code>,
<code><a href="#topic+fric_romeo">fric_romeo</a>()</code>,
<code><a href="#topic+fric_vatankhan">fric_vatankhan</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 # Reynolds numbers for typical district heating water flows at temperature
 # near 25 C in a set of pipes with different sizes:
 range(re_u(seq(.25, 1, 0.05), .89, 1, 1000))
 # [1]  280.8989 1123.5955

</code></pre>

<hr>
<h2 id='shell92pf'>Shell92. Failure pressure of the corroded pipe</h2><span id='topic+shell92pf'></span>

<h3>Description</h3>

<p>Calculate failure pressure of the corroded pipe according to <em>Shell92</em>
code.
</p>
<p>This code should be applied only to
</p>

<ul>
<li><p> single cross section of the pipeline containing a longitudinally
oriented, flat bottom surface defect of corrosion/erosion type;
</p>
</li>
<li><p> defects which depth is less than 85 % of pipe wall thickness.
</p>
</li></ul>

<p>The estimation is valid for single isolated metal loss defects of
the corrosion/erosion type and when only internal pressure loading
is considered.
</p>
<p>As in the case of <code><a href="#topic+dnvpf">dnvpf</a></code>, the defect is approximated by a
rectangular form.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shell92pf(d, wth, uts, depth, l)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="shell92pf_+3A_d">d</code></td>
<td>
<p>nominal outside diameter of pipe, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="shell92pf_+3A_wth">wth</code></td>
<td>
<p>nominal wall thickness of pipe, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="shell92pf_+3A_uts">uts</code></td>
<td>
<p>ultimate tensile strength (<em>UTS</em>) or
specified minimum tensile strength (<em>SMTS</em>) as a
characteristic of steel strength, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="shell92pf_+3A_depth">depth</code></td>
<td>
<p>measured maximum depth of the corroded area, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="shell92pf_+3A_l">l</code></td>
<td>
<p>measured maximum longitudinal length of corroded area, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Numeric <code>NA</code>s may appear in case prescribed conditions of
use are offended.
</p>


<h3>Value</h3>

<p>Estimated failure pressure of the corroded pipe, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>References</h3>

<p>Timashev and A. Bushinskaya, <em>Diagnostics and Reliability
of Pipeline Systems</em>, Topics in Safety, Risk, Reliability and Quality 30,
<strong>DOI 10.1007/978-3-319-25307-7</strong>
</p>


<h3>See Also</h3>

<p>Other fail pressure functions: <code><a href="#topic+b31gpf">b31gpf</a></code>, <code><a href="#topic+b31gmodpf">b31gmodpf</a></code>,
<code><a href="#topic+dnvpf">dnvpf</a></code>, <code><a href="#topic+pcorrcpf">pcorrcpf</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

d     = c(812.8, 219.0)  # [mm]
wth   = c( 19.1,  14.5)  # [mm]
uts  = c(530.9, 455.1)   # [N/mm^2]
l     = c(203.2, 200.0)  # [mm]
depth = c( 13.4,   9.0)  # [mm]

shell92pf(d, wth, uts, depth, l)
# [1] 11.09262 25.27286

</code></pre>

<hr>
<h2 id='strderate'>DNV-RP-F101. De-rate yield stress and tensile strength of pipe due to
temperature</h2><span id='topic+strderate'></span>

<h3>Description</h3>

<p>Temperature is highly influence on pipe material properties and especially
on its strength. Since in
<a href="https://law.resource.org/pub/us/cfr/ibr/002/api.5l.2004.pdf">API SPECIFICATION 5L</a>
values of <em>SMYS</em> or <em>UTS</em> are postulated at room conditions, in
case of higher temperature magnitudes they should be corrected. For that
purpose
<a href="https://www.dnv.com/oilgas/download/dnv-rp-f101-corroded-pipelines/">DNV-RP-F101</a>
offers linear de-rating for <em>SMYS</em> or <em>SMYS</em> according to
figure 2-3.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>strderate(x, temperature = 24.3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="strderate_+3A_x">x</code></td>
<td>
<p>specified minimum yield of stress (<em>SMYS</em>), or ultimate tensile
strength (<em>UTS</em>), or specified minimum tensile strength (<em>SMTS</em>)
as a characteristic of steel strength <strong>at room temperature</strong>,
[<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="strderate_+3A_temperature">temperature</code></td>
<td>
<p>temperature of pipe wall, [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>de-rated value of <em>x</em>, i.e. of appropriate pipe material property,
[<em>MPa</em>] .
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>


<h3>See Also</h3>

<p>Other DNV-RP-F101 functions: 
<code><a href="#topic+dnvpf">dnvpf</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

with(api5l3t, {
print(strderate(mpa_psi(smys), 53))
print(
  strderate(mpa_psi(uts),seq(0, 250, length.out = length(smys)))
)
})
# [1] 170.5689 205.0427 239.5165 287.7798 315.3588 356.7274 384.3064 411.8854 446.3592 480.8330
# [11] 549.7806
# [1] 310.2641 330.9483 413.6854 398.6854 404.3697 415.0540 439.5278 457.1068 460.8963 485.3701
# [11] 530.5282


</code></pre>

<hr>
<h2 id='tracebw'>Massively trace backwards thermal-hydraulic regime for district
heating network</h2><span id='topic+tracebw'></span>

<h3>Description</h3>

<p>Trace values of thermal-hydraulic regime (temperature, pressure,
flow rate, and other) in the bunched pipeline against the flow direction using
user-provided values of <em>specific heat loss power</em>.
</p>
<p>Algorithm also suits for partially measurable district heating network with
massive data lack conditions, when there are no temperature and pressure
sensor readings on the majority of terminal nodes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tracebw(
  sender = 6,
  acceptor = 7,
  temperature = 70,
  pressure = pipenostics::mpa_kgf(6),
  flow_rate = 20,
  d = 100,
  len = 72.446,
  loss = 78.4,
  roughness = 0.001,
  inlet = 0.5,
  outlet = 1,
  method = "romeo",
  opinion = "median",
  verbose = TRUE,
  csv = FALSE,
  file = "tracebw.csv"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tracebw_+3A_sender">sender</code></td>
<td>
<p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_acceptor">acceptor</code></td>
<td>
<p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_temperature">temperature</code></td>
<td>
<p>Sensor-measured temperature of heat carrier (water) sensor-measured on 
the terminal acceptor node, [<em>°C</em>].
Use <code>NA_float_</code>s for (terminal) nodes without temperature sensor.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_pressure">pressure</code></td>
<td>
<p>Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of heat carrier (water) inside the pipe (i.e. acceptor's incoming edge),
[<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_flow_rate">flow_rate</code></td>
<td>
<p>Sensor-measured amount of heat carrier (water) on terminal node that is
transferred by pipe (i.e. acceptor's incoming edge) during a period, [<em>ton/hour</em>]. 
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
Use <code>NA_float_</code>s for nodes without flow rate sensor.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_len">len</code></td>
<td>
<p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_loss">loss</code></td>
<td>
<p>user-provided value of <em>specific heat loss</em> power for each pipe, 
[<em>kcal/m/h</em>]. Values of the argument can be obtained experimentally,
or taken from regulatory documents. 
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_roughness">roughness</code></td>
<td>
<p>roughness of internal wall of pipe (i.e. acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_inlet">inlet</code></td>
<td>
<p>elevation of pipe inlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_outlet">outlet</code></td>
<td>
<p>elevation of pipe outlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_method">method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>:
</p>

<ul>
<li> <p><code>romeo</code>
</p>
</li>
<li> <p><code>vatankhan</code>
</p>
</li>
<li> <p><code>buzelli</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.
For more details see <code><a href="#topic+dropp">dropp</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_opinion">opinion</code></td>
<td>
<p>method for aggregating values of regime parameters on each node for the
next tracing step:
</p>

<dl>
<dt><code>mean</code></dt><dd><p>values of parameter are averaged before the next
tracing step</p>
</dd>
<dt><code>median</code></dt><dd><p>median of parameter values are used for the next
tracing step</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_verbose">verbose</code></td>
<td>
<p>logical indicator: should they watch tracing process on console?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_csv">csv</code></td>
<td>
<p>logical indicator: should they incrementally dump results to <em>csv</em>-
file while tracing?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="tracebw_+3A_file">file</code></td>
<td>
<p>name of <em>csv</em>-file which they dump results to.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code> of length 1 that can be used safely
to create a file and write to it.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>They consider the topology of district heating network represented by
<code><a href="#topic+m325testbench">m325testbench</a></code>:
</p>
<p><img src="../help/figures/m325tracebw0.png" alt="m325tracebw0.png" />
</p>
<p>The network may be partially sensor-equipped too:
</p>
<p><img src="../help/figures/m325tracebwp.png" alt="m325tracebwp.png" />
</p>
<p>In latter case no more than two nodes must be equipped with pressure and temperature
sensors whereas for other nodes only flow rate sensors must be installed.
</p>
<p>Tracing starts from sensor-equipped nodes and goes backwards, i.e against
the flow direction.
</p>
<p>Though some input arguments are natively vectorized their individual values
all relate to common part of district heating network, i.e. associated with
common object. It is due to isomorphism between vector representation and
directed graph of this network. For more details of isomorphic topology
description see <code><a href="#topic+m325testbench">m325testbench</a></code>.
</p>
<p>Before tracing starts for the next node, previously calculated values of
thermal-hydraulic parameters are aggregated by either averaging or
by median. The latter seems more robust for avoiding strong influence of
possible outliers which may come from actual heating transfer anomalies,
erroneous sensor readings or wrong pipeline specifications.
</p>
<p>Aggregation for values of flow rate at the node is always <code><a href="base.html#topic+sum">sum</a></code>.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+data.frame">data.frame</a></code> containing results (detailed log) of tracing in
<a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data">narrow format</a>:
</p>

<dl>
<dt><code>node</code></dt><dd>
<p><em>Tracing job</em>. Identifier of the node which regime parameters is
calculated for. Values in this vector are identical to those in
argument <code>acceptor</code>. 
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>tracing</code></dt><dd>
<p><em>Tracing job</em>. Identifiers of nodes from which regime parameters
are traced for the given node. Identifier <code>sensor</code> is used when
values of regime parameters for the node are sensor readings.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>backward</code></dt><dd>
<p><em>Tracing job</em>. Identifier of tracing direction. It constantly
equals to <code>TRUE</code>. 
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.
</p>
</dd>
<dt><code>aggregation</code></dt><dd>
<p><em>Tracing job</em>. Identifier of aggregation method: <em>span</em>, <em>median</em>, <em>mean</em>, or <em>identity</em>. Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>loss</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative specific heat loss power of adjacent pipe, [<em>kcal/m/h</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flux</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat flux of adjacent pipe, [<em>W/m^2</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>Q</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Normative heat loss of adjacent pipe per day, [<em>kcal</em>]. 
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>temperature</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
carrier (water) that is associated with the node, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>pressure</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
carrier (water) that is associated with the node, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flow_rate</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
carrier (water) that is associated with the node, [<em>ton/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>job</code></dt><dd>
<p><em>Tracing job</em>. Value of tracing job counter. 
Type: <code><a href="checkmate.html#topic+assert_count">assert_count</a></code>.
</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_data_frame">assert_data_frame</a></code>.
</p>


<h3>See Also</h3>

<p>Other Regime tracing: 
<code><a href="#topic+m325tracebw">m325tracebw</a>()</code>,
<code><a href="#topic+m325tracefw">m325tracefw</a>()</code>,
<code><a href="#topic+m325traceline">m325traceline</a>()</code>,
<code><a href="#topic+tracefw">tracefw</a>()</code>,
<code><a href="#topic+traceline">traceline</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pipenostics)

# It is possible to run without specification of argument values:
m325tracebw()

# Consider isomorphic representation of District Heating Network graph:
DHN &lt;- pipenostics::m325testbench

# * Adapt units:
DHN$d &lt;- 1e3*DHN$d  # convert [m] to [mm]

# * Adapt node identifiers for ordering representation simplification:
DHN[["sender"]]   &lt;- sprintf("N%02i", DHN[["sender"]])
DHN[["acceptor"]] &lt;- sprintf("N%02i", DHN[["acceptor"]])

# * Provided actual values of specific heat loss power (say, field measurements) for each
#   pipe in DHN, [kcal/m/h]:
 actual_loss &lt;- c(
               # acceptor:
      96.236,  #  1 
      96.288,  #  2
      70.584,  #  3
     116.045,  #  4
      70.734,  #  5
      96.211,  #  6
      78.400,  #  7
     116.016,  #  8
      28.115,  #  9
      24.918,  # 10
     116.679,  # 11
       0.000,  # 12, may be unmeasured!
     153.134,  # 13 
      96.733,  # 14 
      96.600,  # 15 
     116.667,  # 16
      24.960,  # 17
     115.923,  # 18
      28.166,  # 19
      96.123,  # 20
      77.824,  # 21
     115.946,  # 22
      70.690,  # 23
      96.184,  # 24
      96.236,  # 25
      70.540   # 26
 )

# * Remove inappropriate attributes of the graph:
DHN.1 &lt;- DHN[, setdiff(colnames(DHN), c("year", "insulation", "laying", "beta", "exp5k"))]

# * Trace thermal-hydraulic regime for DHN:
tracebw_report &lt;- do.call("tracebw", c(as.list(DHN.1), list(loss = actual_loss)))

# * If the actual values of specific heat loss power presented above are close 
#   to those in Minenergo-325, then the results of regime tracing match the 
#   normative procedure:
m325_report &lt;- do.call("m325tracebw", DHN)

stopifnot(
   all.equal(tracebw_report$temperature, m325_report$temperature, tolerance = 1e-4),
   all.equal(tracebw_report$pressure   , m325_report$pressure   , tolerance = 1e-4),
   all.equal(tracebw_report$flow_rate  , m325_report$flow_rate  , tolerance = 1e-4)
  )

</code></pre>

<hr>
<h2 id='tracefw'>Massively trace forwards thermal-hydraulic regime for district
heating network</h2><span id='topic+tracefw'></span>

<h3>Description</h3>

<p>Trace values of thermal-hydraulic regime (temperature, pressure,
flow rate, and other) in the bunched pipeline along the flow direction using
user-provided values of <em>specific heat loss power</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tracefw(
  sender = c(0, 1),
  acceptor = c(1, 2),
  temperature = c(70, NA_real_),
  pressure = c(pipenostics::mpa_kgf(6), NA_real_),
  flow_rate = c(20, NA_real_),
  d = rep_len(100, 2),
  len = rep_len(72.446, 2),
  loss = rep_len(78.4, 2),
  roughness = rep_len(0.001, 2),
  inlet = c(0.5, 1),
  outlet = c(1, 1),
  elev_tol = 0.1,
  method = "romeo",
  verbose = TRUE,
  csv = FALSE,
  file = "tracefw.csv",
  use_cluster = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tracefw_+3A_sender">sender</code></td>
<td>
<p>identifier of the node which heat carrier flows out.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_acceptor">acceptor</code></td>
<td>
<p>identifier of the node which heat carrier flows in. According to topology
of test bench considered this identifier should be unique for every row.
Type: any type that can be painlessly coerced to character by
<code><a href="base.html#topic+as.character">as.character</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_temperature">temperature</code></td>
<td>
<p>Sensor-measured temperature of heat carrier (water) sensor-measured on
the root node, [<em>°C</em>].
Use <code>NA_float_</code>s for nodes without temperature sensor.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_pressure">pressure</code></td>
<td>
<p>Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute pressure</a>
of heat carrier (water) inside the pipe on the root node, [<em>MPa</em>].
Use <code>NA_float_</code>s for nodes without pressure sensor.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_flow_rate">flow_rate</code></td>
<td>
<p>Sensor-measured amount of heat carrier (water) on root node that is
transferred by pipe during a period, [<em>ton/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
Use <code>NA_float_</code>s for nodes without flow rate sensor.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_d">d</code></td>
<td>
<p>internal diameter of pipe (i.e.diameter of acceptor's incoming edge),
[<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_len">len</code></td>
<td>
<p>pipe length (i.e. length of acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_loss">loss</code></td>
<td>
<p>user-provided value of <em>specific heat loss</em> power for each pipe in tracing
path, [<em>kcal/m/h</em>]. Values of the argument can be obtained experimentally,
or taken from regulatory documents. 
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_roughness">roughness</code></td>
<td>
<p>roughness of internal wall of pipe (i.e. acceptor's incoming edge), [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_inlet">inlet</code></td>
<td>
<p>elevation of pipe inlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_outlet">outlet</code></td>
<td>
<p>elevation of pipe outlet, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_elev_tol">elev_tol</code></td>
<td>
<p>maximum allowed discrepancy between adjacent outlet and inlet elevations
of two subsequent pipes in the traced path, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_method">method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>:
</p>

<ul>
<li> <p><code>romeo</code>
</p>
</li>
<li> <p><code>vatankhan</code>
</p>
</li>
<li> <p><code>buzelli</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>.
For more details see <code><a href="#topic+dropp">dropp</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_verbose">verbose</code></td>
<td>
<p>logical indicator: should they watch tracing process on console?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_csv">csv</code></td>
<td>
<p>logical indicator: should they incrementally dump results to <em>csv</em>-
file while tracing?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_file">file</code></td>
<td>
<p>name of <em>csv</em>-file which they dump results to.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code> of length 1 that can be used safely
to create a file and write to it.</p>
</td></tr>
<tr><td><code id="tracefw_+3A_use_cluster">use_cluster</code></td>
<td>
<p>utilize functionality of parallel processing on multi-core CPU.
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>They consider the topology of district heating network represented by
<code><a href="#topic+m325testbench">m325testbench</a></code>:
</p>
<p><img src="../help/figures/tracefw.png" alt="tracefw.png" />
</p>
<p>Tracing starts from sensor-equipped root node and goes forward, i.e along
the flow direction. Function <code><a href="#topic+traceline">traceline</a></code> serves under the
hood for tracing identified linear segments from root node to every
terminal node. Hence they only need root node to be equipped with sensors.
Sensors at other nodes are redundant in forward tracing, since the tracing
algorithm by no means consider them for tracing.
</p>
<p>Moreover in the forward tracing algorithm they assume the flow of heat
carrier is distributed proportionally to the cross-sectional area of the
outgoing pipeline. Actually, a lot of reasons may cause significant
deviations from this assumption. As a result, the sequence of paired
backward/forward tracing may be divergent for regime parameters.
</p>
<p>Though some input arguments are natively vectorized their individual values
all relate to common part of district heating network, i.e. associated with
common object. It is due to isomorphism between vector representation and
directed graph of this network. For more details of isomorphic topology
description see <code><a href="#topic+m325testbench">m325testbench</a></code>.
</p>
<p>They are welcome to couple the algorithm with functionality of
<a href="https://CRAN.R-project.org/package=data.table">data.table</a>.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+data.frame">data.frame</a></code> containing results (detailed log) of tracing in
<a href="https://en.wikipedia.org/wiki/Wide_and_narrow_data">narrow format</a>:
</p>

<dl>
<dt><code>node</code></dt><dd>
<p><em>Tracing job</em>. Identifier of the node which regime parameters is
calculated for. Values in this vector are identical to those in
argument <code>acceptor</code>.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>tracing</code></dt><dd>
<p><em>Tracing job</em>. Identifiers of nodes from which regime parameters
are traced for the given node. Identifier <code>sensor</code> is used when
values of regime parameters for the node are sensor readings.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>backward</code></dt><dd>
<p><em>Tracing job</em>. Identifier of tracing direction. It constantly
equals to <code>FALSE</code>.
Type: <code><a href="checkmate.html#topic+assert_logical">assert_logical</a></code>.
</p>
</dd>
<dt><code>aggregation</code></dt><dd>
<p><em>Tracing job</em>. Identifier of the aggregation method associated
with traced values. For forward tracing the only option is
<code>identity</code>.
Type: <code><a href="checkmate.html#topic+assert_character">assert_character</a></code>.
</p>
</dd>
<dt><code>temperature</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
carrier (water) that is associated with the node, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>pressure</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
carrier (water) that is associated with the node, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flow_rate</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
carrier (water) that is associated with the node, [<em>ton/hour</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>job</code></dt><dd>
<p><em>Tracing job</em>. Value of tracing job counter.
For forward tracing value of <code>job</code> counts the number of traced paths from root node.
Type: <code><a href="checkmate.html#topic+assert_count">assert_count</a></code>.
</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_data_frame">assert_data_frame</a></code>.
</p>


<h3>See Also</h3>

<p>Other Regime tracing: 
<code><a href="#topic+m325tracebw">m325tracebw</a>()</code>,
<code><a href="#topic+m325tracefw">m325tracefw</a>()</code>,
<code><a href="#topic+m325traceline">m325traceline</a>()</code>,
<code><a href="#topic+tracebw">tracebw</a>()</code>,
<code><a href="#topic+traceline">traceline</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(pipenostics)

# Minimum two nodes should be in district heating network graph:
tracefw(verbose = FALSE)

# Consider isomorphic representation of District Heating Network graph:
DHN &lt;- pipenostics::m325testbench

# * remove irrelevant parameters from the test bench
DHN[c("year", "insulation", "laying", "beta", "exp5k")] &lt;- NULL
DHN[c("temperature", "pressure", "flow_rate")] &lt;- NA_real_

# * avoid using numeric identifiers for nodes:
DHN$sender   &lt;- sprintf("N%02i", DHN$sender)
DHN$acceptor &lt;- sprintf("N%02i", DHN$acceptor)

# * alter units:
DHN$d &lt;- 1e3 * DHN$d  # convert [m] to [mm]

# * provide current regime parameters for root node
root_node &lt;- 12
DHN[root_node, "temperature"] &lt;-  70.4942576978  # [°C]
DHN[root_node, "pressure"]    &lt;-   0.6135602014  # [MPa]
DHN[root_node, "flow_rate"]   &lt;- 274.0           # [ton/hour]

# * provide actual values of specific heat loss power, [kcal/m/h], for each
# segment N01 - N26. Since N12 is a root node, the specific heat loss
# power for this acceptor is set to 0 (or may be any other numeric value).
actual_loss &lt;- c(
  96.8,  96.8,  71.2, 116.7, 71.3,  96.8, 78.5, 116.7, 28.6, 24.5, 
 116.7,   0.0, 153.2,  96.8, 96.8, 116.7, 24.5, 116.7, 28.6, 96.8, 
  78.5, 116.7,  71.3,  96.8, 96.8,  71.1
)

# Trace the test bench forward for the first time:
fw_report &lt;- do.call(
  "tracefw", c(as.list(DHN), list(loss = actual_loss), verbose = FALSE, elev_tol = .5)
)

</code></pre>

<hr>
<h2 id='traceline'>Trace thermal-hydraulic regime for linear segment of district
heating network</h2><span id='topic+traceline'></span>

<h3>Description</h3>

<p>Trace values of thermal-hydraulic regime (temperature, pressure,
flow_rate, and other) along the adjacent linear segments of pipeline using
user-provided values of <em>specific heat loss power</em>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>traceline(
  temperature = 130,
  pressure = mpa_kgf(6),
  flow_rate = 250,
  g = 0,
  d = 700,
  len = c(600, 530, 300, 350),
  loss = c(348, 347.1389, 346.3483, 345.861),
  roughness = 0.006,
  inlet = 0,
  outlet = 0,
  elev_tol = 0.1,
  method = "romeo",
  forward = TRUE,
  absg = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="traceline_+3A_temperature">temperature</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Sensor-measured temperature of heat
carrier (water)
inside the pipe sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path, [<em>°C</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_pressure">pressure</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Sensor-measured
<a href="https://en.wikipedia.org/wiki/Pressure_measurement#Absolute">absolute
pressure</a> of heat carrier (water) sensor-measured at the inlet
(forward tracing) or at the outlet (backward tracing) of path, [<em>MPa</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_flow_rate">flow_rate</code></td>
<td>
<p><em>Traced thermal hydraulic regime</em>. Amount of heat carrier (water)
sensor-measured at the inlet (forward tracing) or at the outlet (backward
tracing) of path, [<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_g">g</code></td>
<td>
<p>amount of heat carrier discharge to network for each pipe segment in the
tracing path enumerated along the direction of flow. If flag <code>absg</code>
is <code>TRUE</code> then they treat argument <code>g</code> as absolute value in
[<em>ton/hour</em>], otherwise they do as percentage of flow_rate in the
pipe segment.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_d">d</code></td>
<td>
<p>internal diameters of subsequent pipes in tracing path that are enumerated
along the direction of flow, [<em>mm</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_len">len</code></td>
<td>
<p>length of subsequent pipes in tracing path that are enumerated
along the direction of flow, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_loss">loss</code></td>
<td>
<p>user-provided value of <em>specific heat loss</em> power for each pipe in tracing
path enumerated along the direction of flow, [<em>kcal/m/h</em>]. Values of the
argument can be obtained experimentally, or taken from regulatory documents.
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_roughness">roughness</code></td>
<td>
<p>roughness of internal wall for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_inlet">inlet</code></td>
<td>
<p>elevation of pipe inlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_outlet">outlet</code></td>
<td>
<p>elevation of pipe outlet for each pipe in tracing path enumerated along
the direction of flow, [<em>m</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_elev_tol">elev_tol</code></td>
<td>
<p>maximum allowed discrepancy between adjacent outlet and inlet elevations of
two subsequent pipes in the traced path, [<em>m</em>].
Type: <code><a href="checkmate.html#topic+assert_number">assert_number</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_method">method</code></td>
<td>
<p>method of determining <em>Darcy friction factor</em>
</p>

<ul>
<li> <p><code>romeo</code>
</p>
</li>
<li> <p><code>vatankhan</code>
</p>
</li>
<li> <p><code>buzelli</code>
</p>
</li></ul>

<p>Type: <code><a href="checkmate.html#topic+assert_choice">assert_choice</a></code>. For more details see <code><a href="#topic+dropp">dropp</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_forward">forward</code></td>
<td>
<p>tracing direction flag: is it a forward direction of tracing?
If <code>FALSE</code> the backward tracing is performed.
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
<tr><td><code id="traceline_+3A_absg">absg</code></td>
<td>
<p>Whether argument <code>g</code> (amount of heat carrier discharge to network) is an
absolute value in [<em>ton/hour</em>] (<code>TRUE</code>) or is it a percentage of
flow rate in the pipe segment (<code>FALSE</code>)?
Type: <code><a href="checkmate.html#topic+assert_flag">assert_flag</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>They consider only simple tracing paths which do not contain rings and any
kind of parallelization. At the same time bidirectional (forward and
backward) tracing is possible in accordance with sensor position. They also
may consider discharges to network at the inlet of each pipeline segment
as an approximation of actual forks of flows. Relevant illustration of
adopted assumptions for 4-segment tracing path is depicted on the next
figure.
</p>
<p><img src="../help/figures/regtrace.png" alt="regtrace.png" />
</p>
<p>They make additional check for consistency of <code>inlet</code> and <code>outlet</code>
values for subsequent pipe segments. Discrepancy of appropriate elevations
cannot be more than <code>elev_tol</code>.
</p>
<p>Since inner diameter of the pipe is used as input, the the thickness of the
pipe wall additionally considered in heat flux calculations. Pipe wall thickness
is derived from pipe diameter using
<a href="https://docs.cntd.ru/document/1200174717">GOST 30732</a> specifications.
</p>


<h3>Value</h3>

<p><code><a href="base.html#topic+list">list</a></code> containing results (detailed log) of tracing for each pipe
in tracing path enumerated along the direction of flow:
</p>

<dl>
<dt><code>temperature</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced temperature of heat
carrier (water), [<em>°C</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>pressure</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced pressure of heat
carrier (water) for each pipe in tracing path enumerated along the
direction of flow, [<em>MPa</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flow_rate</code></dt><dd>
<p><em>Traced thermal hydraulic regime</em>. Traced flow rate of heat
carrier (water) for each pipe in tracing path enumerated along the
direction of flow, [<em>ton/hour</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>loss</code></dt><dd>
<p>User-provided specific heat
loss power for each pipe in tracing path enumerated along the direction
of flow, [<em>kcal/m/h</em>], - copy of input. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>flux</code></dt><dd>
<p>Heat flux for each pipe
in tracing path enumerated along the direction of flow, [<em>W/m^2</em>].
Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
<dt><code>Q</code></dt><dd>
<p>Heat loss for each
pipe in tracing path enumerated along the direction of flow per day,
[<em>kcal</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.
</p>
</dd>
</dl>

<p>Type: <code><a href="checkmate.html#topic+assert_list">assert_list</a></code>.
</p>


<h3>See Also</h3>

<p>Other Regime tracing: 
<code><a href="#topic+m325tracebw">m325tracebw</a>()</code>,
<code><a href="#topic+m325tracefw">m325tracefw</a>()</code>,
<code><a href="#topic+m325traceline">m325traceline</a>()</code>,
<code><a href="#topic+tracebw">tracebw</a>()</code>,
<code><a href="#topic+tracefw">tracefw</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

# Consider 4-segment tracing path.
# First, let sensor readings for forward tracing:
t_fw &lt;- 130  # [°C]
p_fw &lt;- mpa_kgf(6)*all.equal(.588399, mpa_kgf(6))  # [MPa]
g_fw &lt;- 250  # [ton/hour]

# Let discharges to network for each pipeline segment are somehow determined as
discharges &lt;- seq(0, 30, 10)  # [ton/hour]

# Experimentally obtained values of specific heat loss power are
actual_loss &lt;- c(348.0000, 347.1389, 346.3483, 345.8610)

# Then the calculated regime (red squares) for forward tracing is
regime_fw &lt;- traceline(t_fw, p_fw, g_fw, discharges, loss = actual_loss, forward = TRUE)
print(regime_fw)

# $temperature
# [1] 129.1799 128.4269 127.9628 127.3367
#
# $pressure
# [1] 0.5878607 0.5874226 0.5872143 0.5870330
#
# $flow_rate
# [1] 250 240 220 190
#
# $loss
# [1] 348.0000 347.1389 346.3483 345.8610
#
# $flux
# [1] 181.9600 181.5097 181.0963 180.8415
#
# $Q
# [1] 5011200 4415607 2493707 2905232


# Next consider values of traced regime as sensor readings for backward tracing:
t_bw &lt;- 127.3367  # [°C]
p_bw &lt;- .5870330  # [MPa]
g_bw &lt;- 190  # [ton/hour]

# Then the calculated regime (red squares) for backward tracing is
regime_bw &lt;- traceline(t_bw, p_bw, g_bw, discharges, loss = actual_loss, forward = FALSE)
print(regime_bw)

# $temperature
# [1] 130.000893685 129.180497939 128.427226907 127.963046346
#
# $pressure
# [1] 0.588399833660 0.587861095778 0.587422779315 0.587214377798
#
# $flow_rate
# [1] 250 250 240 220
#
# $loss
# [1] 348.0000 347.1389 346.3483 345.8610
#
# $flux
# [1] 181.959958158 181.509711836 181.096328092 180.841531863
#
# $Q
# [1] 5011200.000 4415606.808 2493707.760 2905232.400

# Let compare sensor readings with backward tracing results:
tracing &lt;- with(regime_bw, {
  lambda &lt;- function(val, constraint)
    c(val, constraint, constraint - val,
      abs(constraint - val)*100/constraint)
  first &lt;- 1
  structure(
    rbind(
      lambda(temperature[first], t_fw),
      lambda(pressure[first],    p_fw),
      lambda(flow_rate[first], g_fw)
    ),
    dimnames = list(
      c("temperature", "pressure", "flow_rate"),
      c("sensor.value", "traced.value", "abs.discr", "rel.discr")
    )
  )
})
print(tracing)

# sensor.value   traced.value          abs.discr         rel.discr
# temperature 130.00089368526 130.0000000000 -8.93685255676e-04 0.000687450196674
# pressure      0.58839983366   0.5883990075 -8.26160099998e-07 0.000140408139624
# flow_rate   250.00000000000 250.0000000000  0.00000000000e+00 0.000000000000000

</code></pre>

<hr>
<h2 id='wth_d'>Derive the wall thickness depending on the outside diameter of pipe</h2><span id='topic+wth_d'></span>

<h3>Description</h3>

<p>Use <a href="https://docs.cntd.ru/document/1200174717">GOST 30732</a>
specifications to derive the value of the pipe wall thickness if only its
diameter is known for the pipe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wth_d(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wth_d_+3A_x">x</code></td>
<td>
<p>outside diameter of pipe, [<em>mm</em>]. Type: <code><a href="checkmate.html#topic+assert_double">assert_double</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Utility should be used only in cases where the actual value
of the pipe wall thickness cannot be determined by any
other means. In many cases internal diameter may be used instead of outside
one without significant loss in precision. The wall thickness value is
derived only for the diameters mentioned in
<a href="https://docs.cntd.ru/document/902148459">Minenergo Order 325</a>.
</p>
<p>Unfortunately, the inverse function cannot be constructed in any reliable way
due to significant ambiguity.
</p>


<h3>References</h3>

<p><a href="https://docs.cntd.ru/document/1200174717">GOST 30732</a>.
<em>Steel pipes and shaped products with foamed polyurethane thermal
insulation in protective sheath. Specifications.</em>
</p>


<h3>See Also</h3>

<p>Other utils: 
<code><a href="#topic+geoarea">geoarea</a>()</code>,
<code><a href="#topic+meteos">meteos</a>()</code>,
<code><a href="#topic+mgtdhid">mgtdhid</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(pipenostics)

 # Guess pipe widths for some frequently met diameters
 wth_d(as.double(c(57, 76, 89)))

 # [1]  3  7 11  # [mm]

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
