<!DOCTYPE html><html lang="en"><head><title>Help for package DesignLibrary</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DesignLibrary}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#assignment_string'><p>Generates string of assignment of value to argument</p></a></li>
<li><a href='#binary_iv_designer'><p>Create a binary instrumental variables design</p></a></li>
<li><a href='#block_cluster_two_arm_designer'><p>Create a two-arm design with blocks and clusters</p></a></li>
<li><a href='#cluster_sampling_designer'><p>Create a design for cluster random sampling</p></a></li>
<li><a href='#code_fixer'><p>Substitute approach</p></a></li>
<li><a href='#construct_design_code'><p>Generates clean code string that reproduces design</p></a></li>
<li><a href='#DesignLibrary'><p>DesignLibrary: A package for creating designs</p></a></li>
<li><a href='#factorial_designer'><p>Create a factorial design</p></a></li>
<li><a href='#get_design_code'><p>Get the code from a design</p></a></li>
<li><a href='#match.call.defaults'><p>Argument matching with defaults</p></a></li>
<li><a href='#mediation_analysis_designer'><p>Create a design for mediation analysis</p></a></li>
<li><a href='#multi_arm_designer'><p>Create a design with multiple experimental arms</p></a></li>
<li><a href='#pretest_posttest_designer'><p>Create a pretest-posttest design</p></a></li>
<li><a href='#process_tracing_designer'><p>Create a process-tracing design</p></a></li>
<li><a href='#randomized_response_designer'><p>Create a randomized response design</p></a></li>
<li><a href='#regression_discontinuity_designer'><p>Create a regression discontinuity design</p></a></li>
<li><a href='#return_args'><p>Generates character string for non-fixed arguments in a designer using substitution approach.</p></a></li>
<li><a href='#spillover_designer'><p>Create a design with spillovers</p></a></li>
<li><a href='#str_within'><p>Takes substring between matched strings. Avoids dependency on stringr package.</p></a></li>
<li><a href='#sub_expr_text'><p>Substitute text from expressions in design code</p></a></li>
<li><a href='#two_arm_attrition_designer'><p>Create design with risk of attrition or post treatment conditioning</p></a></li>
<li><a href='#two_arm_covariate_designer'><p>Create a simple two arm design with a possibly prognostic covariate</p></a></li>
<li><a href='#two_arm_designer'><p>Create a one-level two-arm design</p></a></li>
<li><a href='#two_by_two_designer'><p>Create a two-by-two factorial design</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Library of Research Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.10</td>
</tr>
<tr>
<td>Description:</td>
<td>
    A simple interface to build designs using the package 'DeclareDesign'. 
    In one line of code, users can specify the parameters of individual 
    designs and diagnose their properties. The designers can also be used 
    to compare performance of a given design across a range of combinations 
    of parameters, such as effect size, sample size, and assignment probabilities.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://declaredesign.org/r/designlibrary/">https://declaredesign.org/r/designlibrary/</a>,
<a href="https://github.com/DeclareDesign/DesignLibrary">https://github.com/DeclareDesign/DesignLibrary</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>DeclareDesign (&ge; 0.17.0), R (&ge; 3.4.0), randomizr (&ge;
0.16.1), fabricatr (&ge; 0.8.0), estimatr (&ge; 0.16.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>generics, rlang, glue</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-18 15:29:33 UTC; gblair</td>
</tr>
<tr>
<td>Author:</td>
<td>Graeme Blair [aut],
  Jasper Cooper [aut, cre],
  Alexander Coppock [aut],
  Macartan Humphreys [aut],
  Clara Bicalho [aut],
  Neal Fultz [aut],
  Lily Medina [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jasper Cooper &lt;jjc2247@columbia.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-18 16:20:09 UTC</td>
</tr>
</table>
<hr>
<h2 id='assignment_string'>Generates string of assignment of value to argument</h2><span id='topic+assignment_string'></span>

<h3>Description</h3>

<p>Generates string of assignment of value to argument
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assignment_string(arg_name, arg_values)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assignment_string_+3A_arg_name">arg_name</code></td>
<td>
<p>A string. Label of assignment object.</p>
</td></tr>
<tr><td><code id="assignment_string_+3A_arg_values">arg_values</code></td>
<td>
<p>A list. Values to be assigned to the argument. Can be character, logical or numeric of any length.</p>
</td></tr>
</table>

<hr>
<h2 id='binary_iv_designer'>Create a binary instrumental variables design</h2><span id='topic+binary_iv_designer'></span><span id='topic+simple_iv_designer'></span>

<h3>Description</h3>

<p>Builds a design with one instrument, one binary explanatory variable, and one outcome.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binary_iv_designer(
  N = 100,
  type_probs = c(1/3, 1/3, 1/3, 0),
  assignment_probs = c(0.5, 0.5, 0.5, 0.5),
  a_Y = 1,
  b_Y = 0,
  d_Y = 0,
  outcome_sd = 1,
  a = c(1, 0, 0, 0) * a_Y,
  b = rep(b_Y, 4),
  d = rep(d_Y, 4),
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binary_iv_designer_+3A_n">N</code></td>
<td>
<p>An integer. Sample size.</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_type_probs">type_probs</code></td>
<td>
<p>A vector of four numbers in [0,1]. Probability of each complier type (always-taker, never-taker, complier, defier).</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_assignment_probs">assignment_probs</code></td>
<td>
<p>A vector of four numbers in [0,1]. Probability of assignment to encouragement (Z) for each complier type (always-taker, never-taker, complier, defier). Under random assignment these are normally identical since complier status is not known to researchers in advance.</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_a_y">a_Y</code></td>
<td>
<p>A real number. Constant in Y equation. Assumed constant across types. Overridden by <code>a</code> if specified.</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_b_y">b_Y</code></td>
<td>
<p>A real number. Effect of X on Y equation. Assumed constant across types. Overridden by <code>b</code> if specified.</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_d_y">d_Y</code></td>
<td>
<p>A real number. Effect of Z on Y. Assumed constant across types. Overridden by <code>d</code> if specified.</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_outcome_sd">outcome_sd</code></td>
<td>
<p>A real number. The standard deviation of the outcome.</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_a">a</code></td>
<td>
<p>A vector of four numbers. Constant in Y equation for each complier type (always-taker, never-taker, complier, defier).</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_b">b</code></td>
<td>
<p>A vector of four numbers. Slope on X in Y equation for each complier type (always-taker, never-taker, complier, defier).</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_d">d</code></td>
<td>
<p>A vector of four numbers. Slope on Z in Y equation for each complier type (non zero implies violation of exclusion restriction).</p>
</td></tr>
<tr><td><code id="binary_iv_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A researcher is interested in the effect of binary X on outcome Y.  The relationship is confounded  because units that are more likely to be assigned to X=1 have higher Y outcomes.
A potential instrument Z is examined, which plausibly causes X. The instrument can be used to assess the effect of X on Y for units whose value of X depends on Z if Z does not negatively affect X for some cases, affects X positively for some, and affects Y only through X.
</p>
<p>See <a href="https://declaredesign.org/r/designlibrary/articles/binary_iv.html">vignette online</a> for more details on estimands.
</p>


<h3>Value</h3>

<p>A simple instrumental variables design with binary instrument, treatment, and outcome variables.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a simple iv design: iv identifies late not ate 
binary_iv_design_1 &lt;- binary_iv_designer(N = 1000, b = c(.1, .2, .3, .4))
## Not run: 
diagnose_design(binary_iv_design_1)

## End(Not run)

# Generates a simple iv design with violation of monotonicity
binary_iv_design_2 &lt;- binary_iv_designer(type_probs = c(.1,.1,.6, .2), b_Y = .5)
## Not run: 
diagnose_design(binary_iv_design_2)

## End(Not run)

# Generates a simple iv design with violation of exclusion restriction
binary_iv_design_3 &lt;- binary_iv_designer(d_Y = .5, b_Y = .5)
## Not run: 
diagnose_design(binary_iv_design_3)

## End(Not run)

# Generates a simple iv design with violation of randomization
binary_iv_design_4 &lt;- binary_iv_designer(N = 1000, assignment_probs = c(.2, .3, .7, .5), b_Y = .5)
## Not run: 
diagnose_design(binary_iv_design_4)

## End(Not run)

# Generates a simple iv design with violation of first stage
binary_iv_design_5 &lt;- binary_iv_designer(type_probs = c(.5,.5, 0, 0), b_Y = .5)
## Not run: 
diagnose_design(binary_iv_design_5)

## End(Not run)

</code></pre>

<hr>
<h2 id='block_cluster_two_arm_designer'>Create a two-arm design with blocks and clusters</h2><span id='topic+block_cluster_two_arm_designer'></span>

<h3>Description</h3>

<p>Builds a two-arm design with blocks and clusters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>block_cluster_two_arm_designer(
  N = NULL,
  N_blocks = 1,
  N_clusters_in_block = ifelse(is.null(N), 100, round(N/N_blocks)),
  N_i_in_cluster = ifelse(is.null(N), 1, round(N/mean(N_blocks * N_clusters_in_block))),
  sd = 1,
  sd_block = 0.5773 * sd,
  sd_cluster = max(0, (sd^2 - sd_block^2)/2)^0.5,
  sd_i_0 = max(0, sd^2 - sd_block^2 - sd_cluster^2)^0.5,
  sd_i_1 = sd_i_0,
  rho = 1,
  assignment_probs = 0.5,
  control_mean = 0,
  ate = 0,
  treatment_mean = control_mean + ate,
  verbose = TRUE,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="block_cluster_two_arm_designer_+3A_n">N</code></td>
<td>
<p>An integer. Total number of units. Usually not specified as <code>N</code> is determined by <code>N_blocks</code>, <code>N_clusters_in_block</code>, and <code>N_i_in_cluster</code>. If <code>N_blocks</code>, and  <code>N_clusters_in_block</code>, and <code>N_i_in_cluster</code> are specified then <code>N</code> is overridden. If these are not specified and <code>N</code> is specified then designer attempts to guess sizes of levels to approximate <code>N</code>, with preference for a design without blocks or clusters.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_n_blocks">N_blocks</code></td>
<td>
<p>An integer. Number of blocks. Defaults to 1 for no blocks.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_n_clusters_in_block">N_clusters_in_block</code></td>
<td>
<p>An integer or vector of integers of length <code>N_blocks</code>. Number of clusters in each block. This is the total <code>N</code> when <code>N_blocks</code> and <code>N_i_in_cluster</code> are at default values.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_n_i_in_cluster">N_i_in_cluster</code></td>
<td>
<p>An integer or vector of integers of length <code>sum(N_clusters_in_block)</code>. Individuals per cluster. Defaults to 1 for no clusters.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_sd">sd</code></td>
<td>
<p>A nonnegative number. Overall standard deviation (combining individual level, cluster level, and block level shocks). Defaults to 1. Overridden if incompatible with other user-specified shocks.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_sd_block">sd_block</code></td>
<td>
<p>A nonnegative number. Standard deviation of block level shocks.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_sd_cluster">sd_cluster</code></td>
<td>
<p>A nonnegative number. Standard deviation of cluster level shock.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_sd_i_0">sd_i_0</code></td>
<td>
<p>A nonnegative number. Standard deviation of individual level shock in control. If not specified, and when possible given <code>sd_block</code> and <code>sd_cluster</code>, <code>sd_i_0</code> defaults to make total variance = sd.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_sd_i_1">sd_i_1</code></td>
<td>
<p>A nonnegative number. Standard deviation of individual level shock in treatment. Defaults to <code>sd_i_0</code>.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_rho">rho</code></td>
<td>
<p>A number in [-1,1]. Correlation in individual shock between potential outcomes for treatment and control.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_assignment_probs">assignment_probs</code></td>
<td>
<p>A number or vector of numbers in (0,1). Treatment assignment probability for each block (specified in order of <code>N_clusters_in_block</code>).</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_control_mean">control_mean</code></td>
<td>
<p>A number. Average outcome in control.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_ate">ate</code></td>
<td>
<p>A number. Average treatment effect. Alternative to specifying <code>treatment_mean</code>. Note that <code>ate</code> is an argument for the designer but it does not appear as an argument in design code (design code uses <code>control_mean</code> and <code>treatment_mean</code> only).</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_treatment_mean">treatment_mean</code></td>
<td>
<p>A number. Average outcome in treatment. If <code>treatment_mean</code> is not provided then it is calculated as <code>control_mean + ate</code>. If both <code>ate</code> and  <code>treatment_mean</code> are provided then only  <code>treatment_mean</code> is used.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_verbose">verbose</code></td>
<td>
<p>Logical. If TRUE, prints intra-cluster correlation implied by design parameters.</p>
</td></tr>
<tr><td><code id="block_cluster_two_arm_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Units are assigned to treatment using complete block cluster random assignment. Treatment effects can be specified either by providing <code>control_mean</code> and <code>treatment_mean</code>
or by specifying an <code>ate</code>. Estimation uses differences in means accounting for blocks and clusters.
</p>
<p>In the usual case <code>N</code> is not provided by the user but is determined by <code>N_blocks</code>, <code>N_clusters_in_block</code>, <code>N_i_in_cluster</code> (when these are integers <code>N</code> is the product of these three numbers).
</p>
<p>Normal shocks can be specified at the individual, cluster, and block levels. If individual level shocks are not specified and cluster and block 
level variances sum to less than 1, then individual level shocks are set such that total variance in outcomes equals 1.
</p>
<p>Key limitations: The designer assumes covariance between potential outcomes at the individual level only.
</p>
<p>See <a href="https://declaredesign.org/r/designlibrary/articles/block_cluster_two_arm.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A block cluster two-arm design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a design using default arguments:
block_cluster_two_arm_design &lt;- block_cluster_two_arm_designer()
block_cluster_uneven &lt;- block_cluster_two_arm_designer(
       N_blocks = 3, N_clusters_in_block = 2:4, N_i_in_cluster = 1:9)
# A design in which number of clusters of cluster size is not specified
# but N and block size are:        
block_cluster_guess &lt;- block_cluster_two_arm_designer(N = 24, N_blocks = 3)

</code></pre>

<hr>
<h2 id='cluster_sampling_designer'>Create a design for cluster random sampling</h2><span id='topic+cluster_sampling_designer'></span>

<h3>Description</h3>

<p>Builds a cluster sampling design for an ordinal outcome variable for a population with <code>N_blocks</code> strata, each with <code>N_clusters_in_block</code> clusters, each of which contains <code>N_i_in_cluster</code> units. The sampling strategy involves sampling <code>n_clusters_in_block</code> clusters in each stratum, and then sampling <code>n_i_in_cluster</code> units in each cluster. Outcomes within clusters have intra-cluster correlation approximately equal to <code>ICC</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cluster_sampling_designer(
  N_blocks = 1,
  N_clusters_in_block = 1000,
  N_i_in_cluster = 50,
  n_clusters_in_block = 100,
  n_i_in_cluster = 10,
  icc = 0.2,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cluster_sampling_designer_+3A_n_blocks">N_blocks</code></td>
<td>
<p>An integer. Number of blocks (strata). Defaults to 1 for no blocks.</p>
</td></tr>
<tr><td><code id="cluster_sampling_designer_+3A_n_clusters_in_block">N_clusters_in_block</code></td>
<td>
<p>An integer or vector of integers of length <code>N_blocks</code>. Number of clusters in each block in the population.</p>
</td></tr>
<tr><td><code id="cluster_sampling_designer_+3A_n_i_in_cluster">N_i_in_cluster</code></td>
<td>
<p>An integer or vector of integers of length <code>sum(N_clusters_in_block)</code>. Number of units per cluster sampled.</p>
</td></tr>
<tr><td><code id="cluster_sampling_designer_+3A_n_clusters_in_block">n_clusters_in_block</code></td>
<td>
<p>An integer. Number of clusters to sample in each block (stratum).</p>
</td></tr>
<tr><td><code id="cluster_sampling_designer_+3A_n_i_in_cluster">n_i_in_cluster</code></td>
<td>
<p>An integer. Number of units to sample in each cluster.</p>
</td></tr>
<tr><td><code id="cluster_sampling_designer_+3A_icc">icc</code></td>
<td>
<p>A number in [0,1]. Intra-cluster Correlation Coefficient (ICC).</p>
</td></tr>
<tr><td><code id="cluster_sampling_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Key limitations: The design assumes a args_to_fix number of clusters drawn in each stratum and a args_to_fix number of individuals drawn from each cluster.
</p>
<p>See <a href="https://declaredesign.org/r/designlibrary/articles/cluster_sampling.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A stratified cluster sampling design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To make a design using default arguments:
cluster_sampling_design &lt;- cluster_sampling_designer()
# A design with varying block size and varying cluster size
cluster_sampling_design &lt;- cluster_sampling_designer(
  N_blocks = 2, N_clusters_in_block = 6:7, N_i_in_cluster = 3:15, 
  n_clusters_in_block = 5,  n_i_in_cluster = 2)
</code></pre>

<hr>
<h2 id='code_fixer'>Substitute approach</h2><span id='topic+code_fixer'></span>

<h3>Description</h3>

<p>Substitute approach
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_fixer(design_expr, list_fixed_str, eval_envir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="code_fixer_+3A_design_expr">design_expr</code></td>
<td>
<p>A string. The text of the expression in which you wish to substitute symbols for their set values.</p>
</td></tr>
<tr><td><code id="code_fixer_+3A_list_fixed_str">list_fixed_str</code></td>
<td>
<p>A string. The string of code that generates a named list of arguments that will be substituted in the evaluated <code>design_expr</code>.</p>
</td></tr>
<tr><td><code id="code_fixer_+3A_eval_envir">eval_envir</code></td>
<td>
<p>The evaluation environment. Defaults to environment in which design arguments are already evaluated.</p>
</td></tr>
</table>

<hr>
<h2 id='construct_design_code'>Generates clean code string that reproduces design</h2><span id='topic+construct_design_code'></span>

<h3>Description</h3>

<p>Generates clean code string that reproduces design
</p>


<h3>Usage</h3>

<pre><code class='language-R'>construct_design_code(
  designer,
  args,
  args_to_fix = NULL,
  arguments_as_values = FALSE,
  exclude_args = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="construct_design_code_+3A_designer">designer</code></td>
<td>
<p>Designer function.</p>
</td></tr>
<tr><td><code id="construct_design_code_+3A_args">args</code></td>
<td>
<p>Named list of arguments to be passed to designer function.</p>
</td></tr>
<tr><td><code id="construct_design_code_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>Vector of strings. Designer arguments to fix in design code.</p>
</td></tr>
<tr><td><code id="construct_design_code_+3A_arguments_as_values">arguments_as_values</code></td>
<td>
<p>Logical. Whether to replace argument names for value.</p>
</td></tr>
<tr><td><code id="construct_design_code_+3A_exclude_args">exclude_args</code></td>
<td>
<p>Vector of strings. Name of arguments to be excluded from argument definition at top of design code.</p>
</td></tr>
</table>

<hr>
<h2 id='DesignLibrary'>DesignLibrary: A package for creating designs</h2><span id='topic+DesignLibrary'></span>

<h3>Description</h3>

<p>Library of Research Designs
</p>

<hr>
<h2 id='factorial_designer'>Create a factorial design</h2><span id='topic+factorial_designer'></span>

<h3>Description</h3>

<p>A <code>2^k</code> factorial designer with <code>k</code> factors assigned with independent probabilities. Results in <code>2^k</code> treatment combinations, each with independent, normally distributed shocks. Estimands are average effects and average interactions of given conditions, averaged over other conditions. Estimation uses regression of demeaned variables with propensity weights.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>factorial_designer(
  N = 256,
  k = 3,
  outcome_means = rep(0, 2^k),
  sd = 1,
  outcome_sds = rep(sd, 2^k),
  assignment_probs = rep(0.5, k),
  outcome_name = "Y",
  treatment_names = NULL,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="factorial_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of sample.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_k">k</code></td>
<td>
<p>An integer. The number of factors in the design.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_outcome_means">outcome_means</code></td>
<td>
<p>A numeric vector of length <code>2^k</code>. Means for each of the <code>2^k</code> treatment combinations. See 'Details' for the correct order of values.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_sd">sd</code></td>
<td>
<p>A nonnegative number. Standard deviation for outcomes when all outcomes have identical standard deviations. For outcome-specific standard deviations use <code>outcomes_sds</code>.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_outcome_sds">outcome_sds</code></td>
<td>
<p>A non negative numeric vector of length <code>2^k</code>. Standard deviations for each of the treatment combinations. See 'Details' for the correct order of values.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_assignment_probs">assignment_probs</code></td>
<td>
<p>A numeric vector of length <code>k</code>. Independent probability of assignment to each treatment.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_outcome_name">outcome_name</code></td>
<td>
<p>A character. Name of outcome variable (defaults to &quot;Y&quot;). Must be provided without spacing inside the function <code>c()</code> as in <code>outcome_name = c("War")</code>.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_treatment_names">treatment_names</code></td>
<td>
<p>A character vector of length <code>k</code>. Name of treatment factors variable (defaults to &quot;T1&quot;, &quot;T2&quot;, ..., &quot;Tk&quot;). Must be provided without spacing.</p>
</td></tr>
<tr><td><code id="factorial_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design. By default <code>k</code>, <code>probs</code>, <code>outcome_name</code>, and <code>treatment_names</code> are always args_to_fix.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>factorial_designer</code> creates a factorial design with <code>2^k</code> treatment combinations resulting from <code>k</code> factors, each with two conditions each (<code>c(0,1)</code>). The order of the scalar arguments <code>outcome_means</code> and <code>outcome_sds</code> must follow the one returned by <code>expand.grid(rep(list(c(0,1)), k))</code>, where each of the columns is a treatment. 
</p>
<p>Estimands are defined for each combination of treatment assignment as linear combinations of potential outcomes, typically weighted averages of differences. Note that the weighting for the estimand does not reflect treatment assignment probabilities but rather weights each possible condition equally. 
</p>
<p>For example, in a design with <code class="reqn">k = 3</code> factors, the treatment effect of A, (TE_A), averaged over conditions defined by B and C, is given by: </p>
<p style="text-align: center;"><code class="reqn">TE_A = 1/4*(Y_{111} - Y_{011}) + 1/4*(Y_{101} - Y_{001}) + 1/4*(Y_{110} - Y_{010}) + 1/4*(Y_{100} - Y_{000}).</code>
</p>
<p> The &quot;average interaction of A and B&quot; &mdash; that is the average effect (for a single unit) of A on the effect of B across conditions defined by C &mdash; is: </p>
<p style="text-align: center;"><code class="reqn">TE_{AB} = 1/2*[(Y_{111} - Y_{011}) - (Y_{101} - Y_{001})] + 1/2*[(Y_{110} - Y_{010}) - (Y_{100} - Y_{000})].</code>
</p>
<p> And the triple interaction&mdash;that is, the effect of C on the the effect of B on the effect of A  is: </p>
<p style="text-align: center;"><code class="reqn">TE_{ABC} = [(Y_{111} - Y_{011}) - (Y_{101} - Y_{001})] - [(Y_{110} - Y_{010}) - (Y_{100} - Y_{000})],</code>
</p>
<p> where <code class="reqn">Y_{abc}</code> is short for the potential outcome of Y when A is a,  B is b,  and C is c.
</p>
<p>Estimates draw from a regression in which all treatments are demeaned and weighted by the inverse probability of being in the condition they are in. 
Note that in  this demeaned regression the constant captures the average outcome across all conditions &mdash; not the outcome when all units are in the control condition. The coefficient on T1 captures the average effect of T1 across other conditions&mdash;not the effect of T1 when other conditions are at 0. And so on.
</p>


<h3>Value</h3>

<p>A factorial design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# A factorial design using default arguments
factorial_design &lt;- factorial_designer()

# A 2 x 2 x 2 factorial design with unequal probabilities of assignment to 
# each treatment condition. In this case the estimator weights up by the 
# conditional probabilities of assignment.
factorial_design_2 &lt;- factorial_designer(k = 3, 
                                         assignment_probs = c(1/2, 1/4, 1/8), 
                                         outcome_means = c(0,0,0,0,0,0,0,4))
## Not run: 
diagnose_design(factorial_design_2)

## End(Not run)
# Mapping from outcomes to estimands 
# The mapping between the potential outcomes schedule and the estimands of
# interest is not always easy. To help with intuition consider a 2^3 
# factorial design. You might like to think of a data generating process as
# a collection of marginal effects and interaction effects mapping from
# treatments to outcomes. 
# For instance: Y = -.25 + .75*X1 - .25*X2 -.25*X3 + X1*X2*X3
# The vector of implied potential outcome means as a function of conditions  
# could then be generated like this:

X &lt;- expand.grid(rep(list(c(0,1)), 3))
outcome_means =  -.25 + X[,1]*3/4 - X[,2]/4 - X[,3]/4 + X[,1]*X[,2]*X[,3]
outcomes &lt;- cbind(X, outcome_means)
colnames(outcomes) &lt;- c("X1", "X2", "X3", "mean")
outcomes

# Examination of the outcomes in this table reveals that there is an 
# average outcome of 0 (over all conditions), an average effect of treatment
# X1 of 1,  an average effects for X2 and X3 of 0,  the two way interactions 
# are .5 (averaged over conditions of the third treatment) and the triple 
# interaction is 1.
# These are exactly the estimands calculated by the designer and returned in 
# diagnosis.
factorial_design_3 &lt;- factorial_designer(k = 3, 
                                         outcome_means = outcome_means,
                                         outcome_sds = rep(.01, 8))
## Not run: 
library(DeclareDesign)
diagnose_design(factorial_design_3, sims = 10)

## End(Not run)


</code></pre>

<hr>
<h2 id='get_design_code'>Get the code from a design</h2><span id='topic+get_design_code'></span>

<h3>Description</h3>

<p>Get the code from a design
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_design_code(design)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_design_code_+3A_design">design</code></td>
<td>
<p>A design that has code as an attribute.</p>
</td></tr>
</table>

<hr>
<h2 id='match.call.defaults'>Argument matching with defaults</h2><span id='topic+match.call.defaults'></span>

<h3>Description</h3>

<p>This is a version of <code><a href="base.html#topic+match.call">match.call</a></code> which also includes default arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match.call.defaults(
  definition = sys.function(sys.parent()),
  call = sys.call(sys.parent()),
  expand.dots = TRUE,
  envir = parent.frame(2L)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match.call.defaults_+3A_definition">definition</code></td>
<td>
<p>a function, by default the function from which match.call is called. See details.</p>
</td></tr>
<tr><td><code id="match.call.defaults_+3A_call">call</code></td>
<td>
<p>an unevaluated call to the function specified by definition, as generated by call.</p>
</td></tr>
<tr><td><code id="match.call.defaults_+3A_expand.dots">expand.dots</code></td>
<td>
<p>ogical. Should arguments matching <code>...</code> in the call be included or left as a <code>...</code> argument?</p>
</td></tr>
<tr><td><code id="match.call.defaults_+3A_envir">envir</code></td>
<td>
<p>an environment, from which the <code>...</code> in call are retrieved, if any.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class call.
</p>


<h3>Author(s)</h3>

<p>Neal Fultz
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
foo &lt;- function(x=NULL,y=NULL,z=4, dots=TRUE, ...) {
  match.call.defaults(expand.dots=dots)
}


</code></pre>

<hr>
<h2 id='mediation_analysis_designer'>Create a design for mediation analysis</h2><span id='topic+mediation_analysis_designer'></span>

<h3>Description</h3>

<p>A mediation analysis design that examines the effect of treatment (Z) on mediator (M) and the effect of mediator (M) on outcome (Y) (given Z=0) 
as well as direct effect of treatment (Z) on outcome (Y) (given M=0). Analysis is implemented using an interacted regression model. 
Note this model is not guaranteed to be unbiased despite randomization of Z because of possible violations of sequential ignorability.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mediation_analysis_designer(
  N = 200,
  a = 1,
  b = 0.4,
  c = 0,
  d = 0.5,
  rho = 0,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mediation_analysis_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of sample.</p>
</td></tr>
<tr><td><code id="mediation_analysis_designer_+3A_a">a</code></td>
<td>
<p>A number. Parameter governing effect of treatment (Z) on mediator (M).</p>
</td></tr>
<tr><td><code id="mediation_analysis_designer_+3A_b">b</code></td>
<td>
<p>A number. Effect of mediator (M) on outcome (Y) when Z = 0.</p>
</td></tr>
<tr><td><code id="mediation_analysis_designer_+3A_c">c</code></td>
<td>
<p>A number. Interaction between mediator (M) and (Z) for outcome (Y).</p>
</td></tr>
<tr><td><code id="mediation_analysis_designer_+3A_d">d</code></td>
<td>
<p>A number. Direct effect of treatment (Z) on outcome (Y), when M = 0.</p>
</td></tr>
<tr><td><code id="mediation_analysis_designer_+3A_rho">rho</code></td>
<td>
<p>A number in [-1,1]. Correlation between mediator (M) and outcome (Y) error terms. Non zero correlation implies a violation of sequential ignorability.</p>
</td></tr>
<tr><td><code id="mediation_analysis_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://declaredesign.org/r/designlibrary/articles/mediation_analysis.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A mediation analysis design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a mediation analysis design using default arguments:
mediation_1 &lt;- mediation_analysis_designer()
draw_estimands(mediation_1)
## Not run: 
diagnose_design(mediation_1, sims = 1000)

## End(Not run)

# A design with a violation of sequential ignorability and heterogeneous effects:
mediation_2 &lt;- mediation_analysis_designer(a = 1, rho = .5, c = 1, d = .75)
draw_estimands(mediation_2)
## Not run: 
diagnose_design(mediation_2, sims = 1000)

## End(Not run)

</code></pre>

<hr>
<h2 id='multi_arm_designer'>Create a design with multiple experimental arms</h2><span id='topic+multi_arm_designer'></span>

<h3>Description</h3>

<p>Creates a design with <code>m_arms</code> experimental arms, each assigned with equal probability.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_arm_designer(
  N = 30,
  m_arms = 3,
  outcome_means = rep(0, m_arms),
  sd_i = 1,
  outcome_sds = rep(0, m_arms),
  conditions = 1:m_arms,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multi_arm_designer_+3A_n">N</code></td>
<td>
<p>An integer. Sample size.</p>
</td></tr>
<tr><td><code id="multi_arm_designer_+3A_m_arms">m_arms</code></td>
<td>
<p>An integer. Number of arms.</p>
</td></tr>
<tr><td><code id="multi_arm_designer_+3A_outcome_means">outcome_means</code></td>
<td>
<p>A numeric vector of length <code>m_arms</code>.  Average outcome in each arm.</p>
</td></tr>
<tr><td><code id="multi_arm_designer_+3A_sd_i">sd_i</code></td>
<td>
<p>A nonnegative scalar. Standard deviation of individual-level shock (common across arms).</p>
</td></tr>
<tr><td><code id="multi_arm_designer_+3A_outcome_sds">outcome_sds</code></td>
<td>
<p>A nonnegative numeric vector of length <code>m_arms</code>. Standard deviations for condition-level shocks.</p>
</td></tr>
<tr><td><code id="multi_arm_designer_+3A_conditions">conditions</code></td>
<td>
<p>A vector of length <code>m_arms</code>. The names of each arm. It can be given as numeric or character class (without blank spaces).</p>
</td></tr>
<tr><td><code id="multi_arm_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design. By default, <code>m_arms</code> and <code>conditions</code> are always args_to_fix.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://declaredesign.org/r/designlibrary/articles/multi_arm.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A function that returns a design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# To make a design using default arguments:
design &lt;- multi_arm_designer()


# A design with different means and standard deviations in each arm
design &lt;- multi_arm_designer(outcome_means = c(0, 0.5, 2), outcome_sds =  c(1, 0.1, 0.5))

design &lt;- multi_arm_designer(N = 80, m_arms = 4, outcome_means = 1:4,
                             args_to_fix = c("outcome_means", "outcome_sds"))

</code></pre>

<hr>
<h2 id='pretest_posttest_designer'>Create a pretest-posttest design</h2><span id='topic+pretest_posttest_designer'></span>

<h3>Description</h3>

<p>Produces a design in which an outcome Y is observed pre- and post-treatment.
The design allows for individual post-treatment outcomes to be correlated with pre-treatment outcomes
and for at-random missingness in the observation of post-treatment outcomes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretest_posttest_designer(
  N = 100,
  ate = 0.25,
  sd_1 = 1,
  sd_2 = 1,
  rho = 0.5,
  attrition_rate = 0.1,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pretest_posttest_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of sample.</p>
</td></tr>
<tr><td><code id="pretest_posttest_designer_+3A_ate">ate</code></td>
<td>
<p>A number. Average treatment effect.</p>
</td></tr>
<tr><td><code id="pretest_posttest_designer_+3A_sd_1">sd_1</code></td>
<td>
<p>Nonnegative number. Standard deviation of period 1 shocks.</p>
</td></tr>
<tr><td><code id="pretest_posttest_designer_+3A_sd_2">sd_2</code></td>
<td>
<p>Nonnegative number. Standard deviation of period 2 shocks.</p>
</td></tr>
<tr><td><code id="pretest_posttest_designer_+3A_rho">rho</code></td>
<td>
<p>A number in [-1,1]. Correlation in outcomes between pre- and post-test.</p>
</td></tr>
<tr><td><code id="pretest_posttest_designer_+3A_attrition_rate">attrition_rate</code></td>
<td>
<p>A number in [0,1]. Proportion of respondents in pre-test data that appear in post-test data.</p>
</td></tr>
<tr><td><code id="pretest_posttest_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://declaredesign.org/r/designlibrary/articles/pretest_posttest.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A pretest-posttest design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a pre-test post-test design using default arguments:
pretest_posttest_design &lt;- pretest_posttest_designer()

</code></pre>

<hr>
<h2 id='process_tracing_designer'>Create a process-tracing design</h2><span id='topic+process_tracing_designer'></span>

<h3>Description</h3>

<p>Builds a design in which two pieces of evidence are sought and used to update about whether X caused Y using Bayes' rule.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_tracing_designer(
  N = 100,
  prob_X = 0.5,
  process_proportions = c(0.25, 0.25, 0.25, 0.25),
  prior_H = 0.5,
  p_E1_H = 0.8,
  p_E1_not_H = 0.2,
  p_E2_H = 0.3,
  p_E2_not_H = 0,
  cor_E1E2_H = 0,
  cor_E1E2_not_H = 0,
  label_E1 = "Straw in the Wind",
  label_E2 = "Smoking Gun",
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_tracing_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of population of cases from which a single case is selected.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_prob_x">prob_X</code></td>
<td>
<p>A number in [0,1]. Probability that X = 1 for a given case (equal throughout population of cases).</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_process_proportions">process_proportions</code></td>
<td>
<p>A vector of numbers in [0,1] that sums to 1. Simplex denoting the proportion of cases in the population in which, respectively: 1) X causes Y; 2) Y occurs regardless of X; 3) X causes the absence of Y; 4) Y is absent regardless of X.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_prior_h">prior_H</code></td>
<td>
<p>A number in [0,1]. Prior probability that X causes Y in a given case in which X and Y are both present.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_p_e1_h">p_E1_H</code></td>
<td>
<p>A number in [0,1]. Probability of observing first piece of evidence given hypothesis that X caused Y is true.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_p_e1_not_h">p_E1_not_H</code></td>
<td>
<p>A number in [0,1]. Probability of observing first piece of evidence given hypothesis that X caused Y is not true.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_p_e2_h">p_E2_H</code></td>
<td>
<p>A number in [0,1]. Probability of observing second piece of evidence given hypothesis that X caused Y is true.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_p_e2_not_h">p_E2_not_H</code></td>
<td>
<p>A number in [0,1]. Probability of observing second piece of evidence given hypothesis that X caused Y is not true.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_cor_e1e2_h">cor_E1E2_H</code></td>
<td>
<p>A number in [-1,1]. Correlation between first and second pieces of evidence given hypothesis that X caused Y is true.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_cor_e1e2_not_h">cor_E1E2_not_H</code></td>
<td>
<p>A number in [-1,1]. Correlation between first and second pieces of evidence given hypothesis that X caused Y is not true.</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_label_e1">label_E1</code></td>
<td>
<p>A string. Label for the first piece of evidence (e.g., &quot;Straw in the Wind&quot;).</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_label_e2">label_E2</code></td>
<td>
<p>A string. Label for the second piece of evidence (e.g., &quot;Smoking Gun&quot;).</p>
</td></tr>
<tr><td><code id="process_tracing_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The model posits a population of <code>N</code> cases, each of which does or does not exhibit the presence of some outcome, Y. With probability <code>prob_X</code>, each case also exhibits the presence or absence of some potential cause, X. The outcome Y can be realized through four distinct causal relations, distributed through the population of cases according to <code>process_proportions</code>. First, the presence of X might cause Y. Second, the absence of X might cause Y. Third, Y might be present irrespective of X. Fourth, Y might be absent irrespective of X.
</p>
<p>Our inquiry is a &quot;cause of effects&quot; question. We wish to know whether a specific case was one in which the presence (absence) of X caused the presence (absence) of Y. 
</p>
<p>Our data strategy consists of selecting one case at random in which both X and Y are present. As part of the data strategy we seek two pieces of evidence in favor of or against the hypothesized causal relationship, H, in which X causes Y. 
</p>
<p>The first (second) piece of evidence is observed with probability <code>p_E1_H</code> (<code>p_E2_H</code>) when H is true, and with probability <code>p_E1_not_H</code> (<code>p_E2_not_H</code>) when H is false.
</p>
<p>Conditional on H being true (false), the correlation between the two pieces of evidence is given by <code>cor_E1E2_H</code> (<code>cor_E1E2_not_H</code>).  
</p>
<p>The researcher uses Bayes’ rule to update about the probability that X caused Y given the evidence. In other words, they form a posterior inference, Pr(H|E). We specify four answer strategies for forming this inference. The first simply ignores the evidence and is equivalent to stating a prior belief without doing any causal process tracing. The second conditions inferences only on the first piece of evidence, and the third only on the second piece of evidence. The fourth strategy conditions posterior inferences on both pieces of evidence simultaneously.
</p>
<p>We specify as diagnosands for this design the bias, RMSE, mean(estimand), mean(estimate) and sd(estimate).
</p>


<h3>Value</h3>

<p>A process-tracing design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a process-tracing design using default arguments:
pt_1 &lt;- process_tracing_designer()
draw_estimands(pt_1)
draw_estimates(pt_1)
draw_data(pt_1)
## Not run: 
diagnose_design(pt_1, sims = 1000)

## End(Not run)

# A design in which the smoking gun and straw-in-the-wind are correlated
pt_2 &lt;- process_tracing_designer(cor_E1E2_H = .32)
## Not run: 
diagnose_design(pt_2, sims = 1000)

## End(Not run)

# A design with two doubly-decisive tests pointing in opposite directions
pt_3 &lt;- process_tracing_designer(p_E1_H = .80,p_E1_not_H = .05,
                                 label_E1 = "Doubly-Decisive: H",
                                 p_E2_H = .05,p_E2_not_H = .80,
                                 label_E2 = "Doubly-Decisive: Not H")
draw_estimates(pt_3)                                
## Not run: 
diagnose_design(pt_3, sims = 1000)

## End(Not run)

</code></pre>

<hr>
<h2 id='randomized_response_designer'>Create a randomized response design</h2><span id='topic+randomized_response_designer'></span>

<h3>Description</h3>

<p>Produces a (forced) randomized response design that measures the share of individuals with a given trait <code>prevalence_trait</code> in a population of size <code>N</code>. Probability of forced response (&quot;Yes&quot;) is given by <code>prob_forced_yes</code>, and rate at which individuals with trait lie is given by <code>withholding_rate</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>randomized_response_designer(
  N = 1000,
  prob_forced_yes = 0.6,
  prevalence_rate = 0.1,
  withholding_rate = 0.5,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="randomized_response_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of sample.</p>
</td></tr>
<tr><td><code id="randomized_response_designer_+3A_prob_forced_yes">prob_forced_yes</code></td>
<td>
<p>A number in [0,1]. Probability of a forced yes.</p>
</td></tr>
<tr><td><code id="randomized_response_designer_+3A_prevalence_rate">prevalence_rate</code></td>
<td>
<p>A number in [0,1]. Probability that individual has the sensitive trait.</p>
</td></tr>
<tr><td><code id="randomized_response_designer_+3A_withholding_rate">withholding_rate</code></td>
<td>
<p>A number in [0,1]. Probability that an individual with the sensitive trait hides it.</p>
</td></tr>
<tr><td><code id="randomized_response_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>randomized_response_designer</code> employs a specific variation of randomized response designs in which respondents are required to report a args_to_fix answer to the sensitive question with a given probability (see Blair, Imai, and Zhou (2015) for alternative applications and estimation strategies).
</p>
<p>See <a href="https://declaredesign.org/r/designlibrary/articles/randomized_response.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A randomized response design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a randomized response design using default arguments:
randomized_response_design &lt;- randomized_response_designer()
</code></pre>

<hr>
<h2 id='regression_discontinuity_designer'>Create a regression discontinuity design</h2><span id='topic+regression_discontinuity_designer'></span>

<h3>Description</h3>

<p>Builds a design with sample from population of size <code>N</code>. The average treatment effect local to the cutpoint is equal to <code>tau</code>. It allows for specification of the order of the polynomial regression (<code>poly_reg_order</code>), cutoff value on the running variable (<code>cutoff</code>), and size of bandwidth around the cutoff (<code>bandwidth</code>). By providing a vector of numbers to <code>control_coefs</code> and <code>treatment_coefs</code>, users can also specify polynomial regression coefficients that generate the expected control and treatment potential outcomes given the running variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regression_discontinuity_designer(
  N = 1000,
  tau = 0.15,
  outcome_sd = 0.1,
  cutoff = 0.5,
  bandwidth = 0.5,
  control_coefs = c(0.5, 0.5),
  treatment_coefs = c(-5, 1),
  poly_reg_order = 4,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="regression_discontinuity_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of population to sample from.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_tau">tau</code></td>
<td>
<p>A number. Difference in potential outcomes functions at the threshold.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_outcome_sd">outcome_sd</code></td>
<td>
<p>A positive number. The standard deviation of the outcome.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_cutoff">cutoff</code></td>
<td>
<p>A number in (0,1). Threshold on running variable beyond which units are treated.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_bandwidth">bandwidth</code></td>
<td>
<p>A number. The value of the bandwidth on both sides of the threshold from which to include units.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_control_coefs">control_coefs</code></td>
<td>
<p>A vector of numbers. Coefficients for polynomial regression function that generates control potential outcomes. Order of polynomial is equal to length.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_treatment_coefs">treatment_coefs</code></td>
<td>
<p>A vector of numbers. Coefficients for polynomial regression function that generates treatment potential outcomes. Order of polynomial is equal to length.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_poly_reg_order">poly_reg_order</code></td>
<td>
<p>Integer greater than or equal to 1. Order of the polynomial regression used to estimate the jump at the cutoff.</p>
</td></tr>
<tr><td><code id="regression_discontinuity_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://declaredesign.org/r/designlibrary/articles/regression_discontinuity.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A regression discontinuity design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a regression discontinuity design using default arguments:
regression_discontinuity_design &lt;- regression_discontinuity_designer()
</code></pre>

<hr>
<h2 id='return_args'>Generates character string for non-fixed arguments in a designer using substitution approach.</h2><span id='topic+return_args'></span>

<h3>Description</h3>

<p>Generates character string for non-fixed arguments in a designer using substitution approach.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>return_args(args, fixes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="return_args_+3A_args">args</code></td>
<td>
<p>Function arguments.</p>
</td></tr>
<tr><td><code id="return_args_+3A_fixes">fixes</code></td>
<td>
<p>Function arguments that are fixed (i.e., already evaluated in body of function)</p>
</td></tr>
</table>

<hr>
<h2 id='spillover_designer'>Create a design with spillovers</h2><span id='topic+spillover_designer'></span><span id='topic+simple_spillover_designer'></span>

<h3>Description</h3>

<p>Builds a design with <code>N_groups</code> groups each containing <code>N_i_group</code> individuals. 
Potential outcomes exhibit spillovers: if any individual in a group receives treatment, 
the effect is spread equally among members of the group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spillover_designer(
  N_groups = 80,
  N_i_group = 3,
  sd_i = 0.2,
  gamma = 2,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spillover_designer_+3A_n_groups">N_groups</code></td>
<td>
<p>An integer. Number of groups.</p>
</td></tr>
<tr><td><code id="spillover_designer_+3A_n_i_group">N_i_group</code></td>
<td>
<p>Number of units in each group. Can be scalar or vector of length <code>N_groups</code>.</p>
</td></tr>
<tr><td><code id="spillover_designer_+3A_sd_i">sd_i</code></td>
<td>
<p>A nonnegative number. Standard deviation of individual-level shock.</p>
</td></tr>
<tr><td><code id="spillover_designer_+3A_gamma">gamma</code></td>
<td>
<p>A number. Parameter that controls whether spillovers within groups substitute or complement each other. See 'Details'.</p>
</td></tr>
<tr><td><code id="spillover_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Parameter <code>gamma</code> controls interactions between spillover effects.For <code>gamma</code>=1 for every $1 given to a member of a group, each member receives $1*<code>N_i_group</code> no matter how many others are already treated.
For <code>gamma</code>&gt;1 (&lt;1) for every $1 given to a member of a group, each member receives an amount that depends negatively (positively) on the number already treated.  
</p>
<p>The default estimand is the average difference across subjects between no one treated and only that subject treated.
</p>


<h3>Value</h3>

<p>A simple spillover design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a simple spillover design using default arguments:
spillover_design &lt;- spillover_designer()

</code></pre>

<hr>
<h2 id='str_within'>Takes substring between matched strings. Avoids dependency on stringr package.</h2><span id='topic+str_within'></span>

<h3>Description</h3>

<p>Takes substring between matched strings. Avoids dependency on stringr package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>str_within(string, pattern = "^(structure\\()|(, \\.Names)")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="str_within_+3A_string">string</code></td>
<td>
<p>A string. String from which substring is extracted.</p>
</td></tr>
<tr><td><code id="str_within_+3A_pattern">pattern</code></td>
<td>
<p>A regular expression that matches the beggining and end of a substring</p>
</td></tr>
</table>

<hr>
<h2 id='sub_expr_text'>Substitute text from expressions in design code</h2><span id='topic+sub_expr_text'></span>

<h3>Description</h3>

<p>Substitute text from expressions in design code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sub_expr_text(code, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sub_expr_text_+3A_code">code</code></td>
<td>
<p>List contaitining design code.</p>
</td></tr>
<tr><td><code id="sub_expr_text_+3A_...">...</code></td>
<td>
<p>List of expressions to be substituted for their text.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Code with expression text.
</p>

<hr>
<h2 id='two_arm_attrition_designer'>Create design with risk of attrition or post treatment conditioning</h2><span id='topic+two_arm_attrition_designer'></span>

<h3>Description</h3>

<p>Creates a two-arm design with application for when estimand of interest is conditional on a post-treatment outcome 
(the effect on Y given R) or data is conditionally observed (Y given R). See 'Details' for more information on the data generating process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>two_arm_attrition_designer(
  N = 100,
  a_R = 0,
  b_R = 1,
  a_Y = 0,
  b_Y = 1,
  rho = 0,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="two_arm_attrition_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of sample.</p>
</td></tr>
<tr><td><code id="two_arm_attrition_designer_+3A_a_r">a_R</code></td>
<td>
<p>A number. Constant in equation relating treatment to responses.</p>
</td></tr>
<tr><td><code id="two_arm_attrition_designer_+3A_b_r">b_R</code></td>
<td>
<p>A number. Slope coefficient in equation relating treatment to responses.</p>
</td></tr>
<tr><td><code id="two_arm_attrition_designer_+3A_a_y">a_Y</code></td>
<td>
<p>A number. Constant in equation relating treatment to outcome.</p>
</td></tr>
<tr><td><code id="two_arm_attrition_designer_+3A_b_y">b_Y</code></td>
<td>
<p>A number. Slope coefficient in equation relating treatment to outcome.</p>
</td></tr>
<tr><td><code id="two_arm_attrition_designer_+3A_rho">rho</code></td>
<td>
<p>A number in [0,1]. Correlation between shocks in equations for R and Y.</p>
</td></tr>
<tr><td><code id="two_arm_attrition_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The data generating process is of the form: 
</p>
<p><code>R ~ (a_R + b_R*Z &gt; u_R)</code>
</p>
<p><code>Y ~ (a_Y + b_Y*Z &gt; u_Y)</code>
</p>
<p>where <code>u_R</code> and <code>u_Y</code> are joint normally distributed with correlation <code>rho</code>.
</p>


<h3>Value</h3>

<p>A post-treatment design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To make a design using default argument (missing completely at random):
two_arm_attrition_design &lt;- two_arm_attrition_designer()
## Not run: 
diagnose_design(two_arm_attrition_design)

## End(Not run)
# Attrition can produce bias even for unconditional ATE even when not
# associated with treatment
## Not run: 
diagnose_design(two_arm_attrition_designer(b_R = 0, rho = .3))

## End(Not run)
# Here the linear estimate using R=1 data is unbiased for
# "ATE on Y (Given R)" with b_R = 0 but not when  b_R = 1   
## Not run: 
diagnose_design(redesign(two_arm_attrition_design, b_R = 0:1, rho = .2))

## End(Not run)
</code></pre>

<hr>
<h2 id='two_arm_covariate_designer'>Create a simple two arm design with a possibly prognostic covariate</h2><span id='topic+two_arm_covariate_designer'></span>

<h3>Description</h3>

<p>Builds a design with one treatment and one control arm.
Treatment effects can be specified either by providing <code>control_mean</code> and <code>treatment_mean</code>
or by specifying a <code>control_mean</code> and <code>ate</code>.
Non random assignment is specified by a possible correlation, <code>rho_WZ</code>,  between <code>W</code> and a latent variable that determines the probability of <code>Z</code>.  
Nonignorability is specified by a possible correlation, <code>rho_WY</code>,  between <code>W</code> and outcome <code>Y</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>two_arm_covariate_designer(
  N = 100,
  prob = 0.5,
  control_mean = 0,
  sd = 1,
  ate = 1,
  h = 0,
  treatment_mean = control_mean + ate,
  rho_WY = 0,
  rho_WZ = 0,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="two_arm_covariate_designer_+3A_n">N</code></td>
<td>
<p>An integer. Sample size.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_prob">prob</code></td>
<td>
<p>A number in [0,1]. Probability of assignment to treatment.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_control_mean">control_mean</code></td>
<td>
<p>A number. Average outcome in control.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_sd">sd</code></td>
<td>
<p>A positive number. Standard deviation of shock on Y.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_ate">ate</code></td>
<td>
<p>A number. Average treatment effect.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_h">h</code></td>
<td>
<p>A number. Controls heterogeneous treatment effects by W. Defaults to 0.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_treatment_mean">treatment_mean</code></td>
<td>
<p>A number. Average outcome in treatment. Overrides <code>ate</code> if both specified.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_rho_wy">rho_WY</code></td>
<td>
<p>A number in [-1,1]. Correlation between W and Y.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_rho_wz">rho_WZ</code></td>
<td>
<p>A number in [-1,1]. Correlation between W and Z.</p>
</td></tr>
<tr><td><code id="two_arm_covariate_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Units are assigned to treatment using complete random assignment. Potential outcomes are normally distributed according to the mean and sd arguments.
</p>
<p>See <a href="https://declaredesign.org/r/designlibrary/articles/two_arm.html">vignette online</a>.
</p>


<h3>Value</h3>

<p>A simple two-arm design with covariate W.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Generate a simple two-arm design using default arguments
two_arm_covariate_design &lt;- two_arm_covariate_designer()
# Design with no confounding but a prognostic covariate 
prognostic &lt;- two_arm_covariate_designer(N = 40, ate = .2, rho_WY = .9, h = .5)
## Not run: 
diagnose_design(prognostic)

## End(Not run)
# Design with confounding 
confounding &lt;- two_arm_covariate_designer(N = 40, ate = 0, rho_WZ = .9, rho_WY = .9, h = .5)
## Not run: 
diagnose_design(confounding, sims = 2000)

## End(Not run)

# Curse of power: A biased design may be more likely to mislead the larger it is 
curses &lt;- expand_design(two_arm_covariate_designer, 
                        N = c(50, 500, 5000), ate = 0, rho_WZ = .2, rho_WY = .2)
## Not run: 
diagnoses &lt;- diagnose_design(curses)
subset(diagnoses$diagnosands_df, estimator == "No controls")[,c("N", "power")]

## End(Not run)
</code></pre>

<hr>
<h2 id='two_arm_designer'>Create a one-level two-arm design</h2><span id='topic+two_arm_designer'></span><span id='topic+simple_two_arm_designer'></span>

<h3>Description</h3>

<p>Builds a design with one treatment and one control arm.
Treatment effects can be specified either by providing <code>control_mean</code> and <code>treatment_mean</code>
or by specifying a <code>control_mean</code> and <code>ate</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>two_arm_designer(
  N = 100,
  assignment_prob = 0.5,
  control_mean = 0,
  control_sd = 1,
  ate = 1,
  treatment_mean = control_mean + ate,
  treatment_sd = control_sd,
  rho = 1,
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="two_arm_designer_+3A_n">N</code></td>
<td>
<p>An integer. Sample size.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_assignment_prob">assignment_prob</code></td>
<td>
<p>A number in [0,1]. Probability of assignment to treatment.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_control_mean">control_mean</code></td>
<td>
<p>A number. Average outcome in control.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_control_sd">control_sd</code></td>
<td>
<p>A positive number. Standard deviation in control.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_ate">ate</code></td>
<td>
<p>A number. Average treatment effect.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_treatment_mean">treatment_mean</code></td>
<td>
<p>A number. Average outcome in treatment. Overrides <code>ate</code> if both specified.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_treatment_sd">treatment_sd</code></td>
<td>
<p>A nonnegative number. Standard deviation in treatment. By default equals <code>control_sd</code>.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_rho">rho</code></td>
<td>
<p>A number in [-1,1]. Correlation between treatment and control outcomes.</p>
</td></tr>
<tr><td><code id="two_arm_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Units are assigned to treatment using complete random assignment. Potential outcomes are normally distributed according to the mean and sd arguments.
</p>


<h3>Value</h3>

<p>A simple two-arm design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a simple two-arm design using default arguments
two_arm_design &lt;- two_arm_designer()
</code></pre>

<hr>
<h2 id='two_by_two_designer'>Create a two-by-two factorial design</h2><span id='topic+two_by_two_designer'></span><span id='topic+simple_factorial_designer'></span>

<h3>Description</h3>

<p>Builds a two-by-two factorial design in which assignments to each factor are independent of each other.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>two_by_two_designer(
  N = 100,
  prob_A = 0.5,
  prob_B = 0.5,
  weight_A = 0.5,
  weight_B = 0.5,
  outcome_means = rep(0, 4),
  mean_A0B0 = outcome_means[1],
  mean_A0B1 = outcome_means[2],
  mean_A1B0 = outcome_means[3],
  mean_A1B1 = outcome_means[4],
  sd_i = 1,
  outcome_sds = rep(0, 4),
  args_to_fix = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="two_by_two_designer_+3A_n">N</code></td>
<td>
<p>An integer. Size of sample.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_prob_a">prob_A</code></td>
<td>
<p>A number in [0,1]. Probability of assignment to treatment A.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_prob_b">prob_B</code></td>
<td>
<p>A number in [0,1]. Probability of assignment to treatment B.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_weight_a">weight_A</code></td>
<td>
<p>A number. Weight placed on A=1 condition in definition of &quot;average effect of B&quot; estimand.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_weight_b">weight_B</code></td>
<td>
<p>A number. Weight placed on B=1 condition in definition of &quot;average effect of A&quot; estimand.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_outcome_means">outcome_means</code></td>
<td>
<p>A vector of length 4. Average outcome in each A,B condition, in order AB = 00, 01, 10, 11. Values overridden by mean_A0B0, mean_A0B1, mean_A1B0, mean_A1B1, if provided.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_mean_a0b0">mean_A0B0</code></td>
<td>
<p>A number. Mean outcome in A=0, B=0 condition.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_mean_a0b1">mean_A0B1</code></td>
<td>
<p>A number. Mean outcome in A=0, B=1 condition.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_mean_a1b0">mean_A1B0</code></td>
<td>
<p>A number. Mean outcome in A=1, B=0 condition.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_mean_a1b1">mean_A1B1</code></td>
<td>
<p>A number. Mean outcome in A=1, B=1 condition.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_sd_i">sd_i</code></td>
<td>
<p>A nonnegative scalar. Standard deviation of individual-level shock (common across arms).</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_outcome_sds">outcome_sds</code></td>
<td>
<p>A nonnegative vector of length 4. Standard deviation of (additional) unit level shock in each condition, in order AB = 00, 01, 10, 11.</p>
</td></tr>
<tr><td><code id="two_by_two_designer_+3A_args_to_fix">args_to_fix</code></td>
<td>
<p>A character vector. Names of arguments to be args_to_fix in design.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Three types of estimand are declared. First, weighted averages of the average treatment effects of each treatment, given the two conditions of the other treatments. Second and third, the difference in treatment effects of each treatment, given the conditions of the other treatment.
</p>
<p>Units are assigned to treatment using complete random assignment. Potential outcomes follow a normal distribution.
</p>
<p>Treatment A is assigned first and then Treatment B within blocks defined by treatment A. Thus, if there are 6 units 
3 are guaranteed to receive treatment A but the number receiving treatment B is stochastic.
</p>
<p>See <code><a href="#topic+multi_arm_designer">multi_arm_designer</a></code> for a factorial design with non independent assignments.
</p>


<h3>Value</h3>

<p>A two-by-two factorial design.
</p>


<h3>Author(s)</h3>

<p><a href="https://declaredesign.org/">DeclareDesign Team</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>design &lt;- two_by_two_designer(outcome_means = c(0,0,0,1))

# A design biased for the specified estimands:
design &lt;- two_by_two_designer(outcome_means = c(0,0,0,1), prob_A = .8, prob_B = .2)
## Not run: 
diagnose_design(design)

## End(Not run)

# A design with estimands that "match" the assignment:
design &lt;- two_by_two_designer(outcome_means = c(0,0,0,1), 
                                    prob_A = .8, prob_B = .2, 
                                    weight_A = .8, weight_B = .2)
## Not run: 
diagnose_design(design)

## End(Not run)

# Compare power with and without interactions, given same average effects in each arm
designs &lt;- redesign(two_by_two_designer(), 
                    outcome_means = list(c(0,0,0,1), c(0,.5,.5,1)))
## Not run: 
diagnose_design(designs)

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
