<!DOCTYPE html><html><head><title>Help for package TriMatch</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {TriMatch}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#TriMatch-package'><p>Propensity Score Analysis for Non-Binary Treatments</p></a></li>
<li><a href='#as.data.frame.list'><p>Convert a list of vectors to a data frame.</p></a></li>
<li><a href='#balance.plot'><p>Balance plot for the given covariate.</p></a></li>
<li><a href='#boxdiff.plot'><p>Returns a <code>ggplot2</code> box plot of the differences.</p></a></li>
<li><a href='#covariateBalance'><p>Calculate covariate effect size differences before and after stratification.</p></a></li>
<li><a href='#data.frame.to.list'><p>Convert a list of vectors to a data frame.</p></a></li>
<li><a href='#distance.euclid'><p>Euclidean distance calculation.</p></a></li>
<li><a href='#distances.plot'><p>Barplot for the sum of distances.</p></a></li>
<li><a href='#loess3.plot'><p>Loess plot for matched triplets.</p></a></li>
<li><a href='#maximumTreat'><p>This method will return at least one treatment from groups one and two within</p>
the caliper.</a></li>
<li><a href='#merge.triangle.matches'><p>Merges outcomes with the matched set.</p></a></li>
<li><a href='#merge.triangle.psa'><p>Merges covariate(s) with the results of <code>trips</code>.</p></a></li>
<li><a href='#multibalance.plot'><p>Multiple covariate balance assessment plot.</p></a></li>
<li><a href='#nmes'><p>Results from the 1987 National Medical Expenditure Study</p></a></li>
<li><a href='#OneToN'><p>This method will use a M1-to-M2-to-1 matching.</p></a></li>
<li><a href='#parallel.plot'><p>Parallel coordinate plot for the three groups and dependent variable.</p></a></li>
<li><a href='#perpPt'><p>Internal method for plotting.</p>
Finds a point d distance from x, y</a></li>
<li><a href='#plot.balance.plots'><p>Prints a grid of balance plots.</p></a></li>
<li><a href='#plot.triangle.matches'><p>Triangle plot drawing matched triplets.</p></a></li>
<li><a href='#plot.triangle.psa'><p>Triangle plot.</p></a></li>
<li><a href='#print.balance.plots'><p>Print the results of <code>balance.plot</code> for a data frame of covariates.</p></a></li>
<li><a href='#print.triangle.plot'><p>Print method for <code>plot.triangle.psa</code>. The primary purpose is to</p>
suppress the &quot;Removed n rows containing missing values&quot; warning printed
by <code>ggplot2</code>.</a></li>
<li><a href='#print.trimatch.summary'><p>Prints the results of <code>summary.triangle.matches</code>.</p></a></li>
<li><a href='#segment1'><p>Internal method for plotting.</p>
Position along the left side segment</a></li>
<li><a href='#segment2'><p>Internal method for plotting.</p>
Position along the right side segment</a></li>
<li><a href='#star'><p>Returns significance level.</p></a></li>
<li><a href='#summary.balance.plots'><p>Prints a summary table of the test statistics of each balance plot.</p></a></li>
<li><a href='#summary.triangle.matches'><p>Provides a summary of the matched triplets including analysis of outcome</p>
measure if provided.</a></li>
<li><a href='#summary.triangle.psa'><p>Prints the summary results of the logistic regression models.</p></a></li>
<li><a href='#summary.unmatched'><p>Provides a summary of unmatched subjects.</p></a></li>
<li><a href='#trimatch'><p>Creates matched triplets.</p></a></li>
<li><a href='#trimatch.apply2'><p>Recursive function to find possible matched triplets using the apply functions.</p></a></li>
<li><a href='#trips'><p>Estimates propensity scores for three groups</p></a></li>
<li><a href='#tutoring'><p>Results from a study examining the effects of tutoring services on course grades.</p></a></li>
<li><a href='#unmatched'><p>Returns rows from <code>trips</code> that were not matched by <code>trimatch</code>.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Title:</td>
<td>Propensity Score Matching of Non-Binary Treatments</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Author:</td>
<td>Jason Bryer &lt;jason@bryer.org&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jason Bryer &lt;jason@bryer.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Propensity score matching for non-binary treatments.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.9</td>
</tr>
<tr>
<td>Date:</td>
<td>2017-12-05</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://jason.bryer.org/TriMatch">http://jason.bryer.org/TriMatch</a>, <a href="http://github.com/jbryer/TriMatch">http://github.com/jbryer/TriMatch</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jbryer/TriMatch/issues">https://github.com/jbryer/TriMatch/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>ggplot2, scales, reshape2, ez, R (&ge; 3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>psych, stats, PSAgraphics, compiler, grid, gridExtra,
randomForest</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MASS, xtable</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-12-05 22:58:33 UTC; jbryer</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-12-06 00:05:55 UTC</td>
</tr>
</table>
<hr>
<h2 id='TriMatch-package'>Propensity Score Analysis for Non-Binary Treatments</h2><span id='topic+TriMatch-package'></span><span id='topic+TriMatch'></span>

<h3>Description</h3>

<p>This packages provides functions to estimate and visualize propensity
score analyses including matching for non-binary treatments.
</p>


<h3>Author(s)</h3>

<p>Jason Bryer <a href="mailto:jason@bryer.org">jason@bryer.org</a>
</p>


<h3>See Also</h3>

<p><code>PSAgraphics</code> <code>multilevelPSA</code>
</p>

<hr>
<h2 id='as.data.frame.list'>Convert a list of vectors to a data frame.</h2><span id='topic+as.data.frame.list'></span>

<h3>Description</h3>

<p>This function will convert a list of vectors to a data frame. This function
will handle three different types of lists of vectors. First, if all the elements
in the list are named vectors, the resulting data frame will have have a number
of columns equal to the number of unique names across all vectors. In cases
where some vectors do not have names in other vectors, those values will be
filled with <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'list'
as.data.frame(x, row.names = NULL, optional = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.data.frame.list_+3A_x">x</code></td>
<td>
<p>a list to convert to a data frame.</p>
</td></tr>
<tr><td><code id="as.data.frame.list_+3A_row.names">row.names</code></td>
<td>
<p>a vector equal to <code>length(x)</code> corresponding to the row names.
If <code>NULL</code>, the row names will be set to <code>names(x)</code>.</p>
</td></tr>
<tr><td><code id="as.data.frame.list_+3A_optional">optional</code></td>
<td>
<p>not used.</p>
</td></tr>
<tr><td><code id="as.data.frame.list_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code><a href="base.html#topic+data.frame">data.frame</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The second case is when all the vectors are of the same length. In this case,
the resulting data frame is equivalent to applying <code>rbind</code> across all elements.
</p>
<p>The third case handled is when there are varying vector lengths and not all the
vectors are named. This condition should be avoided. However, the function will
attempt to convert this list to a data frame. The resulting data frame will have
a number of columns equal to the length of the longest vector. For vectors with
length less than this will fill the row with <code>NA</code>s. Note that this function
will print a warning if this condition occurs.
</p>


<h3>Value</h3>

<p>a data frame.
</p>


<h3>Author(s)</h3>

<p>Jason Bryer <a href="mailto:jason@bryer.org">jason@bryer.org</a>
</p>


<h3>References</h3>

<p><a href="http://stackoverflow.com/questions/4227223/r-list-to-data-frame">http://stackoverflow.com/questions/4227223/r-list-to-data-frame</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>    test1 &lt;- list( c(a='a',b='b',c='c'), c(a='d',b='e',c='f'))
    as.data.frame(test1)
    
    test2 &lt;- list( c('a','b','c'), c(a='d',b='e',c='f'))
    as.data.frame(test2)
    
    test3 &lt;- list('Row1'=c(a='a',b='b',c='c'), 'Row2'=c(var1='d',var2='e',var3='f'))
    as.data.frame(test3)
    
    ## Not run: 
    #This will print a warning.
    test4 &lt;- list('Row1'=letters[1:5], 'Row2'=letters[1:7], 'Row3'=letters[8:14])
    as.data.frame(test4)
    
## End(Not run)
    
    test5 &lt;- list(letters[1:10], letters[11:20])
    as.data.frame(test5)
    
    ## Not run: 
    #This will throw an error.
    test6 &lt;- list(list(letters), letters)
    as.data.frame(test6)
    
## End(Not run)
</code></pre>

<hr>
<h2 id='balance.plot'>Balance plot for the given covariate.</h2><span id='topic+balance.plot'></span>

<h3>Description</h3>

<p>If the covariate is numeric, boxplots will be drawn with red points for the mean
and green error bars for the standard error. For non-numeric covariates a barplot
will be drawn.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>balance.plot(x, covar, model, nstrata = attr(attr(tmatch, "triangle.psa"),
  "nstrata"), label = "Covariate", ylab = "", xlab = NULL, se.ratio = 2,
  print = TRUE, legend.position = "top", x.axis.labels,
  x.axis.angle = -45, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="balance.plot_+3A_x">x</code></td>
<td>
<p>results from <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_covar">covar</code></td>
<td>
<p>vector of the covariate to check balance of.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_model">model</code></td>
<td>
<p>an integer between 1 and 3 indicating from which model the 
propensity scores will be used.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_nstrata">nstrata</code></td>
<td>
<p>number of strata to use.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_label">label</code></td>
<td>
<p>label for the legend.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_ylab">ylab</code></td>
<td>
<p>label of the y-axis.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_xlab">xlab</code></td>
<td>
<p>label of the x-axis.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_se.ratio">se.ratio</code></td>
<td>
<p>a multiplier for how large standard error bars will be.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_print">print</code></td>
<td>
<p>print the output if the Freidman Rank Sum Test and repeated
measures ANOVA (for continuous variables).</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_legend.position">legend.position</code></td>
<td>
<p>the position of the legend. See <code><a href="ggplot2.html#topic+theme">theme</a></code>.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_x.axis.labels">x.axis.labels</code></td>
<td>
<p>labels for the x-axis.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_x.axis.angle">x.axis.angle</code></td>
<td>
<p>angle for x-axis labels.</p>
</td></tr>
<tr><td><code id="balance.plot_+3A_...">...</code></td>
<td>
<p>parameters passed to <code><a href="#topic+plot.balance.plots">plot.balance.plots</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A Friedman rank sum test will be performed for all covariate types, printed,
and stored as an attribute to the returned object named <code>friedman</code>. If
a continuous covariate a repeated measures ANOVA will also be performed, printed,
and returned as an attribute named <code>rmanova</code>.
</p>


<h3>Value</h3>

<p>a <code>ggplot2</code> figure or a list of <code>ggplot2</code> figures if <code>covar</code>
is a data frame.
</p>

<hr>
<h2 id='boxdiff.plot'>Returns a <code>ggplot2</code> box plot of the differences.</h2><span id='topic+boxdiff.plot'></span>

<h3>Description</h3>

<p>A boxplot of differences between each pair of treatments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boxdiff.plot(tmatch, out, plot.mean = TRUE, ordering = attr(tmatch,
  "match.order"), ci.width = 0.5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boxdiff.plot_+3A_tmatch">tmatch</code></td>
<td>
<p>the results from <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
<tr><td><code id="boxdiff.plot_+3A_out">out</code></td>
<td>
<p>a vector of the outcome measure of interest.</p>
</td></tr>
<tr><td><code id="boxdiff.plot_+3A_plot.mean">plot.mean</code></td>
<td>
<p>logical indicating whether the means should be plotted.</p>
</td></tr>
<tr><td><code id="boxdiff.plot_+3A_ordering">ordering</code></td>
<td>
<p>specify the order for doing the paired analysis, that is
analysis will be conducted as:
<code>ordering[1] - ordering[2]</code>, <code>ordering[1] - ordering[3]</code>,
and <code>ordering[2] - ordering[3]</code>.</p>
</td></tr>
<tr><td><code id="boxdiff.plot_+3A_ci.width">ci.width</code></td>
<td>
<p>the width for the confidence intervals.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>ggplot2</code> boxplot of the differences.
</p>

<hr>
<h2 id='covariateBalance'>Calculate covariate effect size differences before and after stratification.</h2><span id='topic+covariateBalance'></span>

<h3>Description</h3>

<p>This function is modified from the <code><a href="PSAgraphics.html#topic+cv.bal.psa">cv.bal.psa</a></code> function in the 
<code>PSAgrpahics</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>covariateBalance(covariates, treatment, propensity, strata = NULL,
  int = NULL, tree = FALSE, minsize = 2, universal.psd = TRUE,
  trM = 0, absolute.es = TRUE, trt.value = NULL, use.trt.var = FALSE,
  verbose = FALSE, xlim = NULL, plot.strata = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="covariateBalance_+3A_covariates">covariates</code></td>
<td>
<p>dataframe of interest</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_treatment">treatment</code></td>
<td>
<p>binary vector of 0s and 1s (necessarily? what if character, or 1, 2?)</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_propensity">propensity</code></td>
<td>
<p>PS scores from some method or other.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_strata">strata</code></td>
<td>
<p>either a vector of strata number for each row of covariate, or 
one number n in which case it is attempted to group rows by ps scores into 
n strata of size approximately 1/n.  This does not seem to work well in the 
case of few specific propensity values, as from a tree.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_int">int</code></td>
<td>
<p>either a number m used to divide [0,1] into m equal length subintervals, 
or a vector of cut points between 0 an    1 defining the subintervals (perhaps 
as suggested by loess.psa).  In either case these subintervals define strata, 
so strata can be of any size.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_tree">tree</code></td>
<td>
<p>logical, if unique ps scores are few, as from a recursively partitioned 
tree, then TRUE will force each ps value to define a stratum.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_minsize">minsize</code></td>
<td>
<p>smallest allowable stratum-treatment size.  If violated, strata is 
removed.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_universal.psd">universal.psd</code></td>
<td>
<p>If 'TRUE', forces standard deviations used to be unadjusted 
for stratification.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_trm">trM</code></td>
<td>
<p>trimming proportion for mean calculations.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_absolute.es">absolute.es</code></td>
<td>
<p>logical, if 'TRUE' routine uses absolute values of all effect sizes.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_trt.value">trt.value</code></td>
<td>
<p>allows user to specify which value is active treatment, if desired.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_use.trt.var">use.trt.var</code></td>
<td>
<p>logical, if true then Rubin-Stuart method using only treatment 
variance with be used in effect size calculations.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_verbose">verbose</code></td>
<td>
<p>logical, controls output that is visibly returned.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_xlim">xlim</code></td>
<td>
<p>limits for the x-axis.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_plot.strata">plot.strata</code></td>
<td>
<p>logical indicating whether to print strata.</p>
</td></tr>
<tr><td><code id="covariateBalance_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note: effect sizes are calculated as treatment 1 - treatment 0, or treatment B - treatment A.
</p>


<h3>Author(s)</h3>

<p>Robert M. Pruzek RMPruzek@yahoo.com
</p>
<p>James E. Helmreich James.Helmreich@Marist.edu
</p>
<p>KuangNan Xiong harryxkn@yahoo.com
</p>

<hr>
<h2 id='data.frame.to.list'>Convert a list of vectors to a data frame.</h2><span id='topic+data.frame.to.list'></span>

<h3>Description</h3>

<p>This function will convert a list of vectors to a data frame. This function
will handle three different types of lists of vectors. First, if all the elements
in the list are named vectors, the resulting data frame will have have a number
of columns equal to the number of unique names across all vectors. In cases
where some vectors do not have names in other vectors, those values will be
filled with <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data.frame.to.list(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data.frame.to.list_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code><a href="base.html#topic+data.frame">data.frame</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The second case is when all the vectors are of the same length. In this case,
the resulting data frame is equivalent to applying <code>rbind</code> across all elements.
</p>
<p>The third case handled is when there are varying vector lengths and not all the
vectors are named. This condition should be avoided. However, the function will
attempt to convert this list to a data frame. The resulting data frame will have
a number of columns equal to the length of the longest vector. For vectors with
length less than this will fill the row with <code>NA</code>s. Note that this function
will print a warning if this condition occurs.
</p>


<h3>Value</h3>

<p>a data frame.
</p>


<h3>References</h3>

<p><a href="http://stackoverflow.com/questions/4227223/r-list-to-data-frame">http://stackoverflow.com/questions/4227223/r-list-to-data-frame</a>
</p>

<hr>
<h2 id='distance.euclid'>Euclidean distance calculation.</h2><span id='topic+distance.euclid'></span>

<h3>Description</h3>

<p>This method uses a simple Euclidean distance calculation for determining the
distances between two matches. That is, |ps1 - ps2|.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distance.euclid(x, grouping, id, groups, caliper, nmatch = Inf)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="distance.euclid_+3A_x">x</code></td>
<td>
<p>vector of propensity scores.</p>
</td></tr>
<tr><td><code id="distance.euclid_+3A_grouping">grouping</code></td>
<td>
<p>vector or factor identifying group membership.</p>
</td></tr>
<tr><td><code id="distance.euclid_+3A_id">id</code></td>
<td>
<p>vector corresponding to unique identifer for each element in 
<code>x</code> and <code>grouping</code>.</p>
</td></tr>
<tr><td><code id="distance.euclid_+3A_groups">groups</code></td>
<td>
<p>vector of length two indicating the unique groups to calculate
the distance between. The first element will be the rows, the second columns.</p>
</td></tr>
<tr><td><code id="distance.euclid_+3A_caliper">caliper</code></td>
<td>
<p>a scaler indicating the caliper to use for matching within
each step.</p>
</td></tr>
<tr><td><code id="distance.euclid_+3A_nmatch">nmatch</code></td>
<td>
<p>number of smallest distances to retain.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of length equal to <code>x</code>. Each element of the list is a
named numeric vector where the values correspond to the distance and the
name to the <code>id</code>.
</p>

<hr>
<h2 id='distances.plot'>Barplot for the sum of distances.</h2><span id='topic+distances.plot'></span>

<h3>Description</h3>

<p>Barplot for the sum of distances.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distances.plot(tmatch, caliper = 0.25, label = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="distances.plot_+3A_tmatch">tmatch</code></td>
<td>
<p>the results of <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
<tr><td><code id="distances.plot_+3A_caliper">caliper</code></td>
<td>
<p>a vector indicating where vertical lines should be drawn as a
factor of the standard deviation. Rosenbaum and Rubin (1985) suggested
one quarter of one standard deviation.</p>
</td></tr>
<tr><td><code id="distances.plot_+3A_label">label</code></td>
<td>
<p>label the bars that exceed the minimum caliper.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>triangle.match
</p>

<hr>
<h2 id='loess3.plot'>Loess plot for matched triplets.</h2><span id='topic+loess3.plot'></span>

<h3>Description</h3>

<p>This function will create a <code>ggplot2</code> figure with propensity scores on the
x-axis and the outcome on the y-axis. Three Loess regression lines will be plotted
based upon the propensity scores from <code>model</code>. Since each model produces
propensity scores for two of the three groups, the propensity score for the third
group in each matched triplet will be the mean of the other two. If <code>model</code>
is not specified, the default will be to use the model that estimates the propensity
scores for the first two groups in the matching order.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loess3.plot(tmatch, outcome, model, ylab = "Outcome",
  plot.connections = FALSE, connections.color = "black",
  connections.alpha = 0.2, plot.points = geom_point, points.alpha = 0.1,
  points.palette = "Dark2", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loess3.plot_+3A_tmatch">tmatch</code></td>
<td>
<p>the results of <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_outcome">outcome</code></td>
<td>
<p>a vector representing the outcomes.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_model">model</code></td>
<td>
<p>an integer between 1 and 3 indicating from which model the propensity
scores will be used.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_ylab">ylab</code></td>
<td>
<p>the label for the y-axis.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_plot.connections">plot.connections</code></td>
<td>
<p>boolean indicating whether lines will be drawn connecting
each matched triplet.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_connections.color">connections.color</code></td>
<td>
<p>the line color of connections.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_connections.alpha">connections.alpha</code></td>
<td>
<p>number between 0 and 1 representing the alpha levels for 
connection lines.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_plot.points">plot.points</code></td>
<td>
<p>a <code>ggplot2</code> function for plotting points. Usually 
<code><a href="ggplot2.html#topic+geom_point">geom_point</a></code> or <code><a href="ggplot2.html#topic+geom_jitter">geom_jitter</a></code>. If <code>NULL</code> no points
will be drawn.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_points.alpha">points.alpha</code></td>
<td>
<p>number between 0 and 1 representing the alpha level for the points.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_points.palette">points.palette</code></td>
<td>
<p>the color palette to use. See <code><a href="ggplot2.html#topic+scale_colour_brewer">scale_colour_brewer</a></code>
and <a href="http://colorbrewer2.org/">http://colorbrewer2.org/</a> for more information.</p>
</td></tr>
<tr><td><code id="loess3.plot_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code><a href="ggplot2.html#topic+geom_smooth">geom_smooth</a></code> and 
<code><a href="ggplot2.html#topic+stat_smooth">stat_smooth</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>ggplot2</code> figure.
</p>

<hr>
<h2 id='maximumTreat'>This method will return at least one treatment from groups one and two within
the caliper.</h2><span id='topic+maximumTreat'></span>

<h3>Description</h3>

<p>This method will attempt to return enough rows to use each treatment (the first
two groups in the matching order) at least once. Assuming treat1 is the first
group in the match order and treat2 the second, all duplicate treat1 rows
are removed. Next, all treat2 units not in present in after removing duplicate
treat1 units are identified. For each of those treat2 units, the matched
triplet with the smallest overall distances where treat2 is one of the mathched
units is retained.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maximumTreat(tmatch, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maximumTreat_+3A_tmatch">tmatch</code></td>
<td>
<p>initial results from <code><a href="#topic+trimatch">trimatch</a></code> that contains all
possible matches within the specified caliper.</p>
</td></tr>
<tr><td><code id="maximumTreat_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>

<hr>
<h2 id='merge.triangle.matches'>Merges outcomes with the matched set.</h2><span id='topic+merge.triangle.matches'></span>

<h3>Description</h3>

<p>The <code>y</code> parameter should be a subset of the original data used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'triangle.matches'
merge(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge.triangle.matches_+3A_x">x</code></td>
<td>
<p>the result of <code><a href="#topic+trimatch">trimatch</a></code></p>
</td></tr>
<tr><td><code id="merge.triangle.matches_+3A_y">y</code></td>
<td>
<p>another data frame or vector to merge with.</p>
</td></tr>
<tr><td><code id="merge.triangle.matches_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the additional column(s) added.
</p>

<hr>
<h2 id='merge.triangle.psa'>Merges covariate(s) with the results of <code><a href="#topic+trips">trips</a></code>.</h2><span id='topic+merge.triangle.psa'></span>

<h3>Description</h3>

<p>The <code>y</code> parameter should be a subset of the original data used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'triangle.psa'
merge(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge.triangle.psa_+3A_x">x</code></td>
<td>
<p>the result of <code><a href="#topic+trips">trips</a></code></p>
</td></tr>
<tr><td><code id="merge.triangle.psa_+3A_y">y</code></td>
<td>
<p>another data frame or vector to merge with.</p>
</td></tr>
<tr><td><code id="merge.triangle.psa_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the additional column(s) added.
</p>

<hr>
<h2 id='multibalance.plot'>Multiple covariate balance assessment plot.</h2><span id='topic+multibalance.plot'></span>

<h3>Description</h3>

<p>A graphic based upon <code><a href="PSAgraphics.html#topic+cv.bal.psa">cv.bal.psa</a></code> function in the <code>PSAgraphics</code>
package. This graphic plots the effect sizes for multiple covariates before and
after propensity score adjustment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multibalance.plot(tpsa, tmatch, grid = TRUE, cols)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multibalance.plot_+3A_tpsa">tpsa</code></td>
<td>
<p>results of <code><a href="#topic+trips">trips</a></code>.</p>
</td></tr>
<tr><td><code id="multibalance.plot_+3A_tmatch">tmatch</code></td>
<td>
<p>results of <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
<tr><td><code id="multibalance.plot_+3A_grid">grid</code></td>
<td>
<p>if TRUE, then a grid of three plots for each model will be displayed.</p>
</td></tr>
<tr><td><code id="multibalance.plot_+3A_cols">cols</code></td>
<td>
<p>character vector of covariates (i.e. column names) from the original 
data to include in the plot. By default all covariates used in the
logistic regression model are used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>ggplot2</code> figure.
</p>

<hr>
<h2 id='nmes'>Results from the 1987 National Medical Expenditure Study</h2><span id='topic+nmes'></span>

<h3>Description</h3>

<p>This file was originally prepared by Anders Corr (corr@fas.harvard.edu) who
reports on December 8, 2007 that the resulting numbers closely
match with those reported in the published article. It was later modified by
Jason Bryer (jason@bryer.org) to an R data object to be included in this 
package. See <a href="http://imai.princeton.edu/research/pscore.html">http://imai.princeton.edu/research/pscore.html</a> for more
information
</p>


<h3>Format</h3>

<p>a data frame with 9,708 observations of 12 variables.</p>


<h3>Author(s)</h3>

<p>United States Department of Health and Human Services. 
Agency for Health Care Policy and Research
</p>


<h3>Source</h3>

<p>http://imai.princeton.edu/research/pscore.html
</p>


<h3>References</h3>

<p>National Center For Health Services Research, 1987. National 
Medical Expenditure Survey. Methods II. Questionnaires and data 
collection methods for the household survey and the Survey of 
American Indians and Alaska Natives. National Center for Health 
Services Research and Health Technology Assessment.
</p>
<p>Imai, K., &amp; van Dyk, D.A. (2004). Causal Inference With General 
Treatment Regimes: Generalizing the Propensity Score, Journal of the 
American Statistical Association, 99(467), pp. 854-866.
</p>
<p>Elizabeth Johnson, E., Dominici, F., Griswold, M., &amp; Zeger, S.L. (2003).
Disease cases and their medical costs attributable to smoking: An 
analysis of the national medical expenditure survey. Journal of 
Econometrics, 112.
</p>

<hr>
<h2 id='OneToN'>This method will use a M1-to-M2-to-1 matching.</h2><span id='topic+OneToN'></span>

<h3>Description</h3>

<p>In this method, <code>M2</code> corresponds to the number of times a treat1 unit can be
matched with a treat2 unit. The <code>M1</code> parameter corresponds to the number of
times a treat1 unit can be used in total.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OneToN(tmatch, M1 = 2, M2 = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="OneToN_+3A_tmatch">tmatch</code></td>
<td>
<p>initial results from <code><a href="#topic+trimatch">trimatch</a></code> that contains all
possible matches within the specified caliper.</p>
</td></tr>
<tr><td><code id="OneToN_+3A_m1">M1</code></td>
<td>
<p>a scaler indicating the number of unique subjects in group one to
retain. This applies only to the first group in the matching order.</p>
</td></tr>
<tr><td><code id="OneToN_+3A_m2">M2</code></td>
<td>
<p>a scaler indicating the number of unique matches to retain. This applies
to the first two groups in the matching order.</p>
</td></tr>
<tr><td><code id="OneToN_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>

<hr>
<h2 id='parallel.plot'>Parallel coordinate plot for the three groups and dependent variable.</h2><span id='topic+parallel.plot'></span>

<h3>Description</h3>

<p>Creates a <code>ggplot2</code> figure of a parallel coordinate plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parallel.plot(tmatch, outcome)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parallel.plot_+3A_tmatch">tmatch</code></td>
<td>
<p>results from <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
<tr><td><code id="parallel.plot_+3A_outcome">outcome</code></td>
<td>
<p>vector of the outcome</p>
</td></tr>
</table>

<hr>
<h2 id='perpPt'>Internal method for plotting.
Finds a point d distance from x, y</h2><span id='topic+perpPt'></span>

<h3>Description</h3>

<p>Internal method for plotting.
Finds a point d distance from x, y
</p>


<h3>Usage</h3>

<pre><code class='language-R'>perpPt(x, y, d = 0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="perpPt_+3A_x">x</code></td>
<td>
<p>x coordinate</p>
</td></tr>
<tr><td><code id="perpPt_+3A_y">y</code></td>
<td>
<p>y coordinate</p>
</td></tr>
<tr><td><code id="perpPt_+3A_d">d</code></td>
<td>
<p>the distance</p>
</td></tr>
</table>

<hr>
<h2 id='plot.balance.plots'>Prints a grid of balance plots.</h2><span id='topic+plot.balance.plots'></span>

<h3>Description</h3>

<p>Prints a grid of balance plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'balance.plots'
plot(x, rows, cols, byrow = TRUE,
  plot.sequence = seq_along(bplots), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.balance.plots_+3A_x">x</code></td>
<td>
<p>the results of <code><a href="#topic+balance.plot">balance.plot</a></code> when a data frame is specified.</p>
</td></tr>
<tr><td><code id="plot.balance.plots_+3A_rows">rows</code></td>
<td>
<p>if <code>covar</code> is a data frame of covariates, the number of
rows in the grid of figures.</p>
</td></tr>
<tr><td><code id="plot.balance.plots_+3A_cols">cols</code></td>
<td>
<p>if <code>covar</code> is a data frame of covariates, the number of
columns in the grid of figures.</p>
</td></tr>
<tr><td><code id="plot.balance.plots_+3A_byrow">byrow</code></td>
<td>
<p>if TRUE (default), plots will be drawn by rows, otherwise by columns.</p>
</td></tr>
<tr><td><code id="plot.balance.plots_+3A_plot.sequence">plot.sequence</code></td>
<td>
<p>the sequence (or subset) of plots to draw.</p>
</td></tr>
<tr><td><code id="plot.balance.plots_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>

<hr>
<h2 id='plot.triangle.matches'>Triangle plot drawing matched triplets.</h2><span id='topic+plot.triangle.matches'></span>

<h3>Description</h3>

<p>This plot function adds a layer to <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code> drawing 
matched triplets. If <code>p</code> is supplied, this function will simply draw on
top of the pre-existing plot, otherwise <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code> will
be called first.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'triangle.matches'
plot(x, sample = 0.05,
  rows = sample(nrow(tmatch), nrow(tmatch) * sample), line.color = "black",
  line.alpha = 0.5, point.color = "black", point.size = 3, p, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.triangle.matches_+3A_x">x</code></td>
<td>
<p>matched triplets from <code>link{triangle.match}</code>.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_sample">sample</code></td>
<td>
<p>an number between 0 and 1 representing the percentage of matched
triplets to draw.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_rows">rows</code></td>
<td>
<p>an integer vector corresponding to the rows in <code>tmatch</code> to draw.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_line.color">line.color</code></td>
<td>
<p>the line color.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_line.alpha">line.alpha</code></td>
<td>
<p>the alpha for the lines.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_point.color">point.color</code></td>
<td>
<p>color of matched triplet points.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_point.size">point.size</code></td>
<td>
<p>point size for matched triplets.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_p">p</code></td>
<td>
<p>a ggplot to add the match lines. If NULL, then <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code>.</p>
</td></tr>
<tr><td><code id="plot.triangle.matches_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If this function calls <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code>, it will only draw
line segments and points for those data rows that were used in the matching
procedure. That is, data elements not matched will be excluded from the
figure. To plot all segments and points regardless if used in matching, set
<code>p = plot(tpsa)</code>.
</p>


<h3>Value</h3>

<p>a <code>ggplot2</code> graphic.
</p>


<h3>See Also</h3>

<p>plot.triangle.psa
</p>
<p>triangle.match
</p>

<hr>
<h2 id='plot.triangle.psa'>Triangle plot.</h2><span id='topic+plot.triangle.psa'></span>

<h3>Description</h3>

<p>Triangle plot showing the fitted values (propensity scores) for three different
models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'triangle.psa'
plot(x, point.alpha = 0.3, point.size = 1.5,
  legend.title = "Treatment", text.size = 4, draw.edges = FALSE,
  draw.segments = TRUE, edge.alpha = 0.2, edge.color = "grey",
  edge.labels = c("Model 1", "Model 2", "Model 3"), sample = c(1), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.triangle.psa_+3A_x">x</code></td>
<td>
<p>the results from <code><a href="#topic+trips">trips</a></code>.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_point.alpha">point.alpha</code></td>
<td>
<p>alpha level for points.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_point.size">point.size</code></td>
<td>
<p>point size.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_legend.title">legend.title</code></td>
<td>
<p>title for the legend.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_text.size">text.size</code></td>
<td>
<p>text size.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_draw.edges">draw.edges</code></td>
<td>
<p>draw edges of the triangle.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_draw.segments">draw.segments</code></td>
<td>
<p>draw segments connecting points across two models.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_edge.alpha">edge.alpha</code></td>
<td>
<p>alpha level for edges if drawn.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_edge.color">edge.color</code></td>
<td>
<p>the color for edges if drawn.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_edge.labels">edge.labels</code></td>
<td>
<p>the labels to use for each edge of the triangle.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_sample">sample</code></td>
<td>
<p>a vector of length 1 or 3 representing the sample of points to plot.
The position of each element corresponds to the groups as returned
by <code>attr(tpsa,'groups')</code>. If equal to one, all points will be plotted.
Values less than one will plot a percentage of points. Values greater
than one exactly that number of points will be plotted.</p>
</td></tr>
<tr><td><code id="plot.triangle.psa_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot2 figure
</p>


<h3>See Also</h3>

<p>triangle.psa
</p>

<hr>
<h2 id='print.balance.plots'>Print the results of <code><a href="#topic+balance.plot">balance.plot</a></code> for a data frame of covariates.</h2><span id='topic+print.balance.plots'></span>

<h3>Description</h3>

<p>Print the results of <code><a href="#topic+balance.plot">balance.plot</a></code> for a data frame of covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'balance.plots'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.balance.plots_+3A_x">x</code></td>
<td>
<p>the results of <code><a href="#topic+balance.plot">balance.plot</a></code> when a data frame is specified.</p>
</td></tr>
<tr><td><code id="print.balance.plots_+3A_...">...</code></td>
<td>
<p>parameters passed to <code><a href="#topic+plot.balance.plots">plot.balance.plots</a></code> and
<code><a href="#topic+summary.balance.plots">summary.balance.plots</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='print.triangle.plot'>Print method for <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code>. The primary purpose is to 
suppress the &quot;Removed n rows containing missing values&quot; warning printed
by <code>ggplot2</code>.</h2><span id='topic+print.triangle.plot'></span>

<h3>Description</h3>

<p>Print method for <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code>. The primary purpose is to 
suppress the &quot;Removed n rows containing missing values&quot; warning printed
by <code>ggplot2</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'triangle.plot'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.triangle.plot_+3A_x">x</code></td>
<td>
<p>a plot from <code><a href="#topic+plot.triangle.psa">plot.triangle.psa</a></code>.</p>
</td></tr>
<tr><td><code id="print.triangle.plot_+3A_...">...</code></td>
<td>
<p>other parameters passed to ggplot2.</p>
</td></tr>
</table>

<hr>
<h2 id='print.trimatch.summary'>Prints the results of <code><a href="#topic+summary.triangle.matches">summary.triangle.matches</a></code>.</h2><span id='topic+print.trimatch.summary'></span>

<h3>Description</h3>

<p>This is an S3 generic function to print the results of 
<code><a href="#topic+summary.triangle.matches">summary.triangle.matches</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'trimatch.summary'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.trimatch.summary_+3A_x">x</code></td>
<td>
<p>results of <code><a href="#topic+summary.triangle.matches">summary.triangle.matches</a></code>.</p>
</td></tr>
<tr><td><code id="print.trimatch.summary_+3A_...">...</code></td>
<td>
<p>multiple results of <code><a href="#topic+summary.triangle.matches">summary.triangle.matches</a></code>. These
must be named. For example, <code>"Method 1" = summary(tmath, outcome)</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='segment1'>Internal method for plotting.
Position along the left side segment</h2><span id='topic+segment1'></span>

<h3>Description</h3>

<p>Internal method for plotting.
Position along the left side segment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>segment1(d)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="segment1_+3A_d">d</code></td>
<td>
<p>the distance</p>
</td></tr>
</table>

<hr>
<h2 id='segment2'>Internal method for plotting.
Position along the right side segment</h2><span id='topic+segment2'></span>

<h3>Description</h3>

<p>Internal method for plotting.
Position along the right side segment
</p>


<h3>Usage</h3>

<pre><code class='language-R'>segment2(d)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="segment2_+3A_d">d</code></td>
<td>
<p>the distance</p>
</td></tr>
</table>

<hr>
<h2 id='star'>Returns significance level.</h2><span id='topic+star'></span>

<h3>Description</h3>

<p>Returns the significance level as stars, or NA if a non-numeric value is
passed in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>star(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="star_+3A_x">x</code></td>
<td>
<p>p-value.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.balance.plots'>Prints a summary table of the test statistics of each balance plot.</h2><span id='topic+summary.balance.plots'></span>

<h3>Description</h3>

<p>The <code><a href="#topic+balance.plot">balance.plot</a></code> function will create a grid of balance plots
if a data frame is provided. The returned object is a list of <code>ggplot2</code>
figures with the statistical tests (i.e. Friedmen Rank Sum tests and if a
continuous variable, repeated measures ANOVA as well) saved as attributes.
This function will return a data frame combining all of those results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'balance.plots'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.balance.plots_+3A_object">object</code></td>
<td>
<p>the results of <code><a href="#topic+balance.plot">balance.plot</a></code> when a data frame is specified.</p>
</td></tr>
<tr><td><code id="summary.balance.plots_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>

<hr>
<h2 id='summary.triangle.matches'>Provides a summary of the matched triplets including analysis of outcome
measure if provided.</h2><span id='topic+summary.triangle.matches'></span>

<h3>Description</h3>

<p>If an outcome measure is provided this function will perform a Freidman
Rank Sum Test and repeated measures ANOVA. If either test has a statistically
significant difference (as determined by the value of the <code>p</code> parameter),
a Pairwise Wilcoxon Rank Sum Test will also be provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'triangle.matches'
summary(object, outcome, p = 0.05,
  ordering = attr(object, "match.order"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.triangle.matches_+3A_object">object</code></td>
<td>
<p>result of <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
<tr><td><code id="summary.triangle.matches_+3A_outcome">outcome</code></td>
<td>
<p>vector representing the outcome measure.</p>
</td></tr>
<tr><td><code id="summary.triangle.matches_+3A_p">p</code></td>
<td>
<p>threshold of the p value to perform a</p>
</td></tr>
<tr><td><code id="summary.triangle.matches_+3A_ordering">ordering</code></td>
<td>
<p>specify the order for doing the paired analysis, that is
analysis will be conducted as:
<code>ordering[1] - ordering[2]</code>, <code>ordering[1] - ordering[3]</code>,
and <code>ordering[2] - ordering[3]</code>.</p>
</td></tr>
<tr><td><code id="summary.triangle.matches_+3A_...">...</code></td>
<td>
<p>parameters passed to other statistical tests.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a trimatch.summary object.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+friedman.test">friedman.test</a></code>, <code><a href="ez.html#topic+ezANOVA">ezANOVA</a></code>, 
<code><a href="stats.html#topic+pairwise.wilcox.test">pairwise.wilcox.test</a></code>
</p>

<hr>
<h2 id='summary.triangle.psa'>Prints the summary results of the logistic regression models.</h2><span id='topic+summary.triangle.psa'></span>

<h3>Description</h3>

<p>The <code><a href="#topic+trips">trips</a></code> function estimates three separate logistic regression
models for each pair of groups. This function will print a combined table
of the three summaries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'triangle.psa'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.triangle.psa_+3A_object">object</code></td>
<td>
<p>the results of <code><a href="#topic+trips">trips</a></code>.</p>
</td></tr>
<tr><td><code id="summary.triangle.psa_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.unmatched'>Provides a summary of unmatched subjects.</h2><span id='topic+summary.unmatched'></span>

<h3>Description</h3>

<p>Will return as a list and print the percentage of total unmatched rows and
percent by treatment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'unmatched'
summary(object, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.unmatched_+3A_object">object</code></td>
<td>
<p>results of <code><a href="#topic+unmatched">unmatched</a></code></p>
</td></tr>
<tr><td><code id="summary.unmatched_+3A_digits">digits</code></td>
<td>
<p>number of digits to print.</p>
</td></tr>
<tr><td><code id="summary.unmatched_+3A_...">...</code></td>
<td>
<p>currently unused.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of summary results.
</p>

<hr>
<h2 id='trimatch'>Creates matched triplets.</h2><span id='topic+trimatch'></span>

<h3>Description</h3>

<p>Create matched triplets by minimizing the total distance between matched triplets
within a specified caliper.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trimatch(tpsa, caliper = 0.25, nmatch = c(15), match.order, exact,
  method = maximumTreat, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trimatch_+3A_tpsa">tpsa</code></td>
<td>
<p>the results from <code><a href="#topic+trips">trips</a></code></p>
</td></tr>
<tr><td><code id="trimatch_+3A_caliper">caliper</code></td>
<td>
<p>a vector of length one or three indicating the caliper to use 
for matching within each step. This is expressed in standardized units such 
that .25 means that matches must be within .25 of one standard deviation 
to be kept, otherwise the match is dropped.</p>
</td></tr>
<tr><td><code id="trimatch_+3A_nmatch">nmatch</code></td>
<td>
<p>number of closest matches to retain before moving to next edge. This can
be <code>Inf</code> in which case all matches within the caliper will be retained
through to the next step. For large datasets, evaluating all possible
matches within the caliper could be time consuming.</p>
</td></tr>
<tr><td><code id="trimatch_+3A_match.order">match.order</code></td>
<td>
<p>character vector of length three indicating the order in 
which the matching algorithm will processes. The default is to use start
with the group the middle number of subjects, followed by the smallest,
and then the largest.</p>
</td></tr>
<tr><td><code id="trimatch_+3A_exact">exact</code></td>
<td>
<p>a vector or data frame of representing covariates for exact matching.
That is, matched triplets will first be matched exactly on these covariates
before evaluating distances.</p>
</td></tr>
<tr><td><code id="trimatch_+3A_method">method</code></td>
<td>
<p>This is a function that specifies which matched triplets will be
retained. If <code>NULL</code>, all matched triplets within the specified
caliper will be returned (equivalent to caliper matching in two group
matching). The default is <code><a href="#topic+maximumTreat">maximumTreat</a></code> that
attempts include each treatment at least once. 
Another option is <code><a href="#topic+OneToN">OneToN</a></code> which mimicks the one-to-n 
matching where treatments are matched to multiple control units.</p>
</td></tr>
<tr><td><code id="trimatch_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code>method</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code><a href="#topic+trips">trips</a></code> function will estimate the propensity scores
for three models. This method will then find the best matched triplets based
upon minimizing the summed differences between propensity scores across the
three models. That is, the algorithm works as follows:
</p>

<ul>
<li><p> The first subject from model 1 is selected.
</p>
</li>
<li><p> The <code>nmatch[1]</code> smallest distances are selected using propensity scores from
model 1.
</p>
</li>
<li><p> For each of the matches identified, the subjects propensity score from model
2 is retrieved.
</p>
</li>
<li><p> The <code>nmatch[2]</code> smallest distances are selected using propensity score from
model 3.
</p>
</li>
<li><p> For each of those matches identified, the subjects propensity score from model
2 is retrieved.
</p>
</li>
<li><p> The distances is calculated from the first and last subjects propensity scores
from model 2.
</p>
</li>
<li><p> The three distances are summed.
</p>
</li>
<li><p> The triplet with the smallest overall distance is selected and returned.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(turoing)
formu &lt;- ~ Gender + Ethnicity + Military + ESL + EdMother + EdFather + Age +
     Employment + Income + Transfer + GPA
tpsa &lt;- trips(tutoring, tutoring$treat, formu)
tmatch &lt;- trimatch(tpsa, status=FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='trimatch.apply2'>Recursive function to find possible matched triplets using the apply functions.</h2><span id='topic+trimatch.apply2'></span>

<h3>Description</h3>

<p>Internal method. This version does not use the exact matching. Instead, this
function should be called separately for each grouping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trimatch.apply2(tpsa, caliper, nmatch, match.order, sd1, sd2, sd3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trimatch.apply2_+3A_tpsa">tpsa</code></td>
<td>
<p>the results from <code><a href="#topic+trips">trips</a></code></p>
</td></tr>
<tr><td><code id="trimatch.apply2_+3A_caliper">caliper</code></td>
<td>
<p>a vector of length one or three indicating the caliper to use 
for matching within each step. This is expressed in standardized units such 
that .25 means that matches must be within .25 of one standard deviation 
to be kept, otherwise the match is dropped.</p>
</td></tr>
<tr><td><code id="trimatch.apply2_+3A_nmatch">nmatch</code></td>
<td>
<p>number of closest matches to retain before moving to next edge. This can
be <code>Inf</code> in which case all matches within the caliper will be retained
through to the next step. For large datasets, evaluating all possible
matches within the caliper could be time consuming.</p>
</td></tr>
<tr><td><code id="trimatch.apply2_+3A_match.order">match.order</code></td>
<td>
<p>character vector of length three indicating the order in 
which the matching algorithm will processes. The default is to use start
with the group the middle number of subjects, followed by the smallest,
and then the largest.</p>
</td></tr>
<tr><td><code id="trimatch.apply2_+3A_sd1">sd1</code></td>
<td>
<p>standard deviation for propensity scores from model 1.</p>
</td></tr>
<tr><td><code id="trimatch.apply2_+3A_sd2">sd2</code></td>
<td>
<p>standard deviation for propensity scores from model 2.</p>
</td></tr>
<tr><td><code id="trimatch.apply2_+3A_sd3">sd3</code></td>
<td>
<p>standard deviation for propensity scores from model 3.</p>
</td></tr>
</table>

<hr>
<h2 id='trips'>Estimates propensity scores for three groups</h2><span id='topic+trips'></span>

<h3>Description</h3>

<p>The propensity score is </p>
<p style="text-align: center;"><code class="reqn">e(X)=P({ W }=1|X)</code>
</p>

<p>This function will estimate the propensity scores for each pair of groups
(e.g. two treatments and one control).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trips(thedata, treat, formu = ~., groups = unique(treat), nstrata = 5,
  method = "logistic", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trips_+3A_thedata">thedata</code></td>
<td>
<p>the data frame.</p>
</td></tr>
<tr><td><code id="trips_+3A_treat">treat</code></td>
<td>
<p>vector or factor indicating the treatment/control assignment for
<code>thedata</code>. Length must be equal to <code>nrow(thedata)</code>.</p>
</td></tr>
<tr><td><code id="trips_+3A_formu">formu</code></td>
<td>
<p>the logistic regression formula. Note that the dependent variable
should not be specified and will be modified.</p>
</td></tr>
<tr><td><code id="trips_+3A_groups">groups</code></td>
<td>
<p>a vector of exactly length three corresponding the values in
<code>treat</code> for each control/treatment.</p>
</td></tr>
<tr><td><code id="trips_+3A_nstrata">nstrata</code></td>
<td>
<p>the number of strata marks to plot on the edge.</p>
</td></tr>
<tr><td><code id="trips_+3A_method">method</code></td>
<td>
<p>the method to use to estimate the propensity scores. Current options are logistic
or randomForest.</p>
</td></tr>
<tr><td><code id="trips_+3A_...">...</code></td>
<td>
<p>other parameters passed to <code><a href="stats.html#topic+glm">glm</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p style="text-align: center;"><code class="reqn">{ PS }_{ 1 }=e({ X }_{ { T }_{ 1 }C })=Pr(z=1|{ X }_{ { T }_{ 1 }C })</code>
</p>

<p style="text-align: center;"><code class="reqn">{ PS }_{ 2 }=e({ X }_{ { T }_{ 2 }C })=Pr(z=1|{ X }_{ { T }_{ 2 }C })</code>
</p>

<p style="text-align: center;"><code class="reqn">{ PS }_{ 3 }=e({ X }_{ { T }_{ 2 }{ T }_{ 1 } })=Pr(z=1|{ X }_{ { T }_{ 2 }{ T }_{ 1 } })</code>
</p>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(tutoring)
formu &lt;- ~ Gender + Ethnicity + Military + ESL + EdMother + EdFather + Age +
     Employment + Income + Transfer + GPA
tpsa &lt;- trips(tutoring, tutoring$treat, formu)
head(tpsa)

## End(Not run)
</code></pre>

<hr>
<h2 id='tutoring'>Results from a study examining the effects of tutoring services on course grades.</h2><span id='topic+tutoring'></span>

<h3>Description</h3>


<ul>
<li> <p><code>treat</code> Treatment indicator.
</p>
</li>
<li> <p><code>Course</code> The course id the student was enrolled in.
</p>
</li>
<li> <p><code>Grade</code> The course grade the student earned (4=A, 3=B, 2=C, 1=D, 0=F or W).
</p>
</li>
<li> <p><code>Gender</code> Gender of the student.
</p>
</li>
<li> <p><code>Ethnicity</code> Ethnicity of the student, either White, Black, or Other.
</p>
</li>
<li> <p><code>Military</code> Is the student an active military student.
</p>
</li>
<li> <p><code>ESL</code> English second language student.
</p>
</li>
<li> <p><code>EdMother</code> Education level of the mother (1 = did not finish high school;
2 = high school grad; 3 = some college; 4 = earned associate degree;
5 = earned baccalaureate degree; 6 = Earned Master's degree; 7 = earned doctorate).
</p>
</li>
<li> <p><code>EdFather</code> Education level of the father (levels same as EdMother).
</p>
</li>
<li> <p><code>Age</code> Age at the start of the course.
</p>
</li>
<li> <p><code>Employment</code> Employment level at college enrollment (1 = No; 2 = part-time;
3 = full-time).
</p>
</li>
<li> <p><code>Income</code> Household income level at college enrollment (1 = &lt;25K; 2 = &lt;35K; 3 = &lt;45K;
4 = &lt;55K; 5 = &lt;70K; 6 = &lt;85K; 7 = &lt;100K; 8 = &lt;120K; 9 = &gt;120K).
</p>
</li>
<li> <p><code>Transfer</code> Number of transfer credits at the start of the course.
</p>
</li>
<li> <p><code>GPA</code> GPA as of the start of the course.
</p>
</li>
<li> <p><code>GradeCode</code> Letter grade.
</p>
</li>
<li> <p><code>Level</code> Level of the course, either Lower or Upper.
</p>
</li>
<li> <p><code>ID</code> Randomly assigned student ID.
</p>
</li></ul>



<h3>Format</h3>

<p>a data frame with 17 variables.</p>

<hr>
<h2 id='unmatched'>Returns rows from <code><a href="#topic+trips">trips</a></code> that were not matched by <code><a href="#topic+trimatch">trimatch</a></code>.</h2><span id='topic+unmatched'></span>

<h3>Description</h3>

<p>This function returns a subset of <code><a href="#topic+trips">trips</a></code> that were not matched by
<code><a href="#topic+trimatch">trimatch</a></code>. All data frame methods work with the returned object
but special <code>summary</code> function will provided relevant information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unmatched(tmatch)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unmatched_+3A_tmatch">tmatch</code></td>
<td>
<p>the results of <code><a href="#topic+trimatch">trimatch</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame of unmatched rows.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
