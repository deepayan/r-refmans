<!DOCTYPE html><html><head><title>Help for package ahpsurvey</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ahpsurvey}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ahp'><p>Canned routine for AHP</p></a></li>
<li><a href='#ahp.aggjudge'><p>Aggregate individual judgments</p></a></li>
<li><a href='#ahp.aggpref'><p>Aggregate priority weights</p></a></li>
<li><a href='#ahp.cr'><p>Calculates the consistency ratio of each decision-maker</p></a></li>
<li><a href='#ahp.error'><p>Matrix of the product between the pairwise comparison value and pj/pi</p></a></li>
<li><a href='#ahp.harker'><p>Replace inconsistent pairwise comparisons</p></a></li>
<li><a href='#ahp.indpref'><p>Computes priority weights of individual decision-makers</p></a></li>
<li><a href='#ahp.mat'><p>Generate AHP pairwise matrices from survey data</p></a></li>
<li><a href='#ahp.missing'><p>Impute missing observations using the method in Harker (1987)</p></a></li>
<li><a href='#ahp.pwerror'><p>Finds the pairwise comparisons with the maximum amount of inconsistency</p></a></li>
<li><a href='#ahp.ri'><p>Generate random indices</p></a></li>
<li><a href='#ahpsurvey'><p>AHP Survey package</p></a></li>
<li><a href='#city1'><p>Dataframe of one decision-maker based on Saaty (2004)</p></a></li>
<li><a href='#city200'><p>A dataframe of 200 simulated decision-makers based on Saaty (2004)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Analytic Hierarchy Process for Survey Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.1</td>
</tr>
<tr>
<td>Description:</td>
<td>The Analytic Hierarchy Process is a versatile multi-criteria decision-making tool introduced by Saaty (1987) &lt;<a href="https://doi.org/10.1016%2F0270-0255%2887%2990473-8">doi:10.1016/0270-0255(87)90473-8</a>&gt; that allows decision-makers to weigh attributes and evaluate alternatives presented to them.    This package provides a consistent methodology for researchers to reformat data and run analytic hierarchy process in R on data that are formatted using the survey data entry mode. It is optimized for performing the analytic hierarchy process with many decision-makers, and provides tools and options for researchers to aggregate individual preferences and test multiple options. It also allows researchers to quantify, visualize and correct for inconsistency in the decision-maker's comparisons.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rdpack, stats, magrittr, knitr, tidyr, dplyr, randomNames</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, scales</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>Collate:</td>
<td>'ahp_mat.R' 'ahp_indpref.R' 'ahp_pwerror.R' 'ahp_cr.R' 'ahp.R'
'ahp_RI.R' 'ahp_aggjudge.R' 'ahp_aggpref.R' 'ahp_bweight.R'
'ahp_error.R' 'ahp_harker.R' 'ahp_missing.R' 'ahpsurvey.R'
'data.R'</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-11-24 15:56:21 UTC; chohinting</td>
</tr>
<tr>
<td>Author:</td>
<td>Frankie Cho [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Frankie Cho &lt;htcho@connect.hku.hk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-11-24 16:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ahp'>Canned routine for AHP</h2><span id='topic+ahp'></span>

<h3>Description</h3>

<p><code>ahp</code> is a canned routine that returns a <code>data.frame</code> of individuals' priorities (based on ahp.indpref), number of missing values, consistency ratios, and top three pairs of inconsistent pairwise comparisons. An optional argument <code>agg</code> allows the user to generate a data.frame of aggregated priorities alongside individual priorities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp(
  df,
  atts,
  negconvert = FALSE,
  reciprocal = TRUE,
  method = "eigen",
  aggmethod = "geometric",
  qt = 0,
  censorcr = Inf,
  agg = FALSE,
  ID = NULL,
  col = NULL,
  suppress = "none"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp_+3A_df">df</code></td>
<td>
<p>a dataframe, each row corresponding to one decision-maker, with columns ordered according to  <code>atts</code>.</p>
</td></tr>
<tr><td><code id="ahp_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp_+3A_negconvert">negconvert</code></td>
<td>
<p>logical, whether to convert all positive values to
negative. In the pairwise comparison A_B, if -6 denotes A is more
important than B by 6 units, set <code>negconvert = TRUE</code>.</p>
</td></tr>
<tr><td><code id="ahp_+3A_reciprocal">reciprocal</code></td>
<td>
<p>logical, whether to convert negative values (after <code>negconvert</code>) to its reciprocal. If the comparison A_B where B is more important than A was already entered in its reciprocal (e.g. 1/6), choose <code>reciprocal = FALSE</code>. When <code>reciprocal = FALSE</code>, do not set <code>negconvert = TRUE</code>.</p>
</td></tr>
<tr><td><code id="ahp_+3A_method">method</code></td>
<td>
<p>if <code>method = "eigen"</code>, the individual priority weights are computed using the Dominant Eigenvalues method described in Saaty (2003). Otherwise, then the priorities are computed based on the averages of normalized values. Basically it normalizes the matrices so that all of the columns add up to 1, and then computes the averages of the row as the priority weights of each attribute. Three modes of finding the averages are available:  <code>arithmetic</code>: the arithmetic mean; <code>geometric</code>: the geometric mean (the default); <code>rootmean</code>: the square root of the sum of the squared value.</p>
</td></tr>
<tr><td><code id="ahp_+3A_aggmethod">aggmethod</code></td>
<td>
<p>how to aggregate the individual priorities. By default <code>aggmethod = method</code>. Apart from the methods offered in <code>method</code>, <code>aggmethod</code> also permits three other options: <code>tmean</code> computes the trimmed arithmetic mean, <code>tgmean</code> computes the trimmed geometric mean (both with quantiles trimmed based on <code>qt</code>), and <code>sd</code> computes the standard deviation from the arithmetic mean. If <code>method = "eigen"</code> and <code>aggmethod</code> is not specified, <code>aggmethod</code> defaults to <code>"geometric"</code>.</p>
</td></tr>
<tr><td><code id="ahp_+3A_qt">qt</code></td>
<td>
<p>specifies the quantile which the top <strong>and</strong> bottom priority weights are trimmed. Used only if <code>aggmethod = 'tmean'</code> or <code>aggmethod = 'tgmean'</code>. For example, <code>qt = 0.25</code> specifies that the aggregation is the arithmetic mean of the values from the 25 to 75 percentile. By default <code>qt = 0</code>.</p>
</td></tr>
<tr><td><code id="ahp_+3A_censorcr">censorcr</code></td>
<td>
<p>the threshold of censoring observations. All observations with a consistency ratio higher than the specified CR will be dropped from the routine. By default, <code>censorcr = Inf</code>, i.e. drops no observations.</p>
</td></tr>
<tr><td><code id="ahp_+3A_agg">agg</code></td>
<td>
<p>by default, <code>agg = FALSE</code>, which suppresses the output of Aggregated priorities. If <code>agg = TRUE</code>, the output will be a list where <code style="white-space: pre;">&#8288;$AggPref&#8288;</code> contains the Aggregated priorities and Standard Deviations.</p>
</td></tr>
<tr><td><code id="ahp_+3A_id">ID</code></td>
<td>
<p>the column name, or a vector of column names, of variables in <code>df</code>, which are used to indicate specific observations. For example, if a survey dataset comes with an identifier/ multiple identified for each observation, use this so that the output dataframe would contain this identifier.</p>
</td></tr>
<tr><td><code id="ahp_+3A_col">col</code></td>
<td>
<p>a list of column names which contains the columns for the pairwise comparison matrix in chronological order, as specified in <code>atts</code>. For example, if <code>atts</code> is <code>c("A","B","C")</code>, then <code>col</code> would be <code>c("A_B","A_C","B_C")</code>, with <code>"A_B"</code> being a pairwise comparison of attribute A and B. <code>col = NULL</code> by default, indicating that the dataframe specified already contained the pairwise comparisons in correct order and nothing else except of what is inside <code>ID</code>.</p>
</td></tr>
<tr><td><code id="ahp_+3A_suppress">suppress</code></td>
<td>
<p>Suppresses the supplementary indices. Can take the values of &quot;all&quot; (suppresses all indices), &quot;pwerror&quot; (suppresses pwerror), or &quot;cr&quot; (suppresses consistency ratio).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>agg = TRUE</code>, returns a list of the results with two elements, <code>indpref</code> and <code>aggpref</code>. <code style="white-space: pre;">&#8288;$indpref&#8288;</code> contains individual preference weight (same as <code>ahp.indpref</code>), consistency ratios, and the top three most inconsistent pairwise comparisons (same as <code>ahp.pwerror</code>). <code style="white-space: pre;">&#8288;$aggpref&#8288;</code> contains the Aggregated Priorities and Standard Deviations. Otherwise (i.e. default setting), outputs a <code>data.frame</code> with only <code style="white-space: pre;">&#8288;$indpref&#8288;</code>.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Saaty TL (2004).
&ldquo;Decision making &mdash; the Analytic Hierarchy and Network Processes (AHP/ANP).&rdquo;
<em>Journal of Systems Science and Systems Engineering</em>, <b>13</b>(1), 1&ndash;35.
ISSN 1861-9576, doi: <a href="https://doi.org/10.1007/s11518-006-0151-5">10.1007/s11518-006-0151-5</a>, <a href="https://doi.org/10.1007/s11518-006-0151-5">https://doi.org/10.1007/s11518-006-0151-5</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(city200)
ahp(df = city200, atts = c('cult', 'fam', 'house', 'jobs', 'trans'), negconvert = TRUE)

</code></pre>

<hr>
<h2 id='ahp.aggjudge'>Aggregate individual judgments</h2><span id='topic+ahp.aggjudge'></span>

<h3>Description</h3>

<p>Aggregate individual judgments from pairwise comparison matrices
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.aggjudge(ahpmat, atts, aggmethod = "geometric", qt = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.aggjudge_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.aggjudge_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.aggjudge_+3A_aggmethod">aggmethod</code></td>
<td>
<p>The method of aggregating the judgments by all decision-makers. Five modes aggregation are available:  <code>arithmetic</code>: the arithmetic mean; <code>geometric</code>: the geometric mean (the default); <code>rootmean</code>: the square root of the sum of the squared value, <code>tmean</code>: the trimmed mean, <code>tgmean</code>: trimmed geometric mean. The quantiles trimmed are based on <code>qt</code>. It can also be set to <code>sd</code>, where it reports the standard deviation from the arithmetic mean.</p>
</td></tr>
<tr><td><code id="ahp.aggjudge_+3A_qt">qt</code></td>
<td>
<p>specifies the quantile which the top <strong>and</strong> bottom priority weights are trimmed. Used only if <code>aggmethod = 'tmean'</code> or <code>aggmethod = 'tgmean'</code>. For example, <code>qt = 0.25</code> specifies that the aggregation is the arithmetic mean of the values from the 25 to 75 percentile. By default <code>qt = 0</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the aggregated pairwise judgments of all the decision-makers.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Computes individual judgments with geometric mean and aggregates them
## with a trimmed arithmetic mean

data(city200)
atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

cityahp &lt;- ahp.mat(df = city200, atts = atts, negconvert = TRUE)
ahp.aggjudge(cityahp, atts, aggmethod = 'tmean', qt = 0.1)


</code></pre>

<hr>
<h2 id='ahp.aggpref'>Aggregate priority weights</h2><span id='topic+ahp.aggpref'></span>

<h3>Description</h3>

<p>Compute and aggregate individual priority weights from pairwise comparison matrices
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.aggpref(ahpmat, atts, method = "geometric", aggmethod = method, qt = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.aggpref_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.aggpref_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.aggpref_+3A_method">method</code></td>
<td>
<p>if <code>method = "eigen"</code>, the individual priority weights are computed using the Dominant Eigenvalues method described in Saaty (2003). Otherwise, then the priorities are computed based on the averages of normalized values. Basically it normalizes the matrices so that all of the columns add up to 1, and then computes the averages of the row as the priority weights of each attribute. Three modes of finding the averages are available:  <code>arithmetic</code>: the arithmetic mean; <code>geometric</code>: the geometric mean (the default); <code>rootmean</code>: the square root of the sum of the squared value.</p>
</td></tr>
<tr><td><code id="ahp.aggpref_+3A_aggmethod">aggmethod</code></td>
<td>
<p>how to aggregate the individual priorities. By default <code>aggmethod = method</code>. Apart from the methods offered in <code>method</code>, <code>aggmethod</code> also permits three other options: <code>tmean</code> computes the trimmed arithmetic mean, <code>tgmean</code> computes the trimmed geometric mean (both with quantiles trimmed based on <code>qt</code>), and <code>sd</code> computes the standard deviation from the arithmetic mean. If <code>method = "eigen"</code> and <code>aggmethod</code> is not specified, <code>aggmethod</code> defaults to <code>"geometric"</code>.</p>
</td></tr>
<tr><td><code id="ahp.aggpref_+3A_qt">qt</code></td>
<td>
<p>specifies the quantile which the top <strong>and</strong> bottom priority weights are trimmed. Used only if <code>aggmethod = 'tmean'</code> or <code>aggmethod = 'tgmean'</code>. For example, <code>qt = 0.25</code> specifies that the aggregation is the arithmetic mean of the values from the 25 to 75 percentile. By default <code>qt = 0</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the aggregated priorities of all the decision-makers.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Saaty TL (2003).
&ldquo;Decision-making with the AHP: Why is the principal eigenvector necessary.&rdquo;
<em>European Journal of Operational Research</em>, <b>145</b>(1), 85 - 91.
ISSN 0377-2217, <a href="http://www.sciencedirect.com/science/article/pii/S0377221702002278">http://www.sciencedirect.com/science/article/pii/S0377221702002278</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Computes individual priorities with geometric mean and aggregates them
## with a trimmed arithmetic mean

library(magrittr)

data(city200)
atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

cityahp &lt;- ahp.mat(df = city200, atts = atts, negconvert = TRUE)
ahp.aggpref(cityahp, atts, method = 'geometric', aggmethod = 'tmean', qt = 0.1)

</code></pre>

<hr>
<h2 id='ahp.cr'>Calculates the consistency ratio of each decision-maker</h2><span id='topic+ahp.cr'></span>

<h3>Description</h3>

<p>The <code>ahp.cr</code> function calculates the consistency ratio of each decision-maker, defined by the following equation:
</p>
<p style="text-align: center;"><code class="reqn">CR = (\lambda-n)/((n-1)(RI))</code>
</p>

<p>Where <code class="reqn">\lambda</code> is the maximum eigenvalue of the pairwise comparison matrix, <code class="reqn">n</code> is the number of attributes, and RI is the random index. Following Saaty and Tran (2007), the RI is a function of <code class="reqn">n</code> and is the consistency ratio of randomly generated pairwise comparison matrices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.cr(ahpmat, atts, ri = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.cr_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.cr_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order. The RI is asymptotic as it approaches n=15, thus it is set to be equal to 1.6 if the number of attributes exceeds 16.</p>
</td></tr>
<tr><td><code id="ahp.cr_+3A_ri">ri</code></td>
<td>
<p>A user-supplied random index value, probably user generated using <code>ahp.ri</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> of consistency ratios of each decision-maker.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Saaty TL, Tran LT (2007).
&ldquo;On the invalidity of fuzzifying numerical judgments in the Analytic Hierarchy Process.&rdquo;
<em>Mathematical and Computer Modelling</em>, <b>46</b>(7), 962 - 975.
ISSN 0895-7177, Decision Making with the Analytic Hierarchy Process and the Analytic Network Process, <a href="http://www.sciencedirect.com/science/article/pii/S0895717707000787">http://www.sciencedirect.com/science/article/pii/S0895717707000787</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(city200)
atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

cityahp &lt;- ahp.mat(df = city200, atts = atts, negconvert = TRUE) 
ahp.cr(cityahp, atts)

</code></pre>

<hr>
<h2 id='ahp.error'>Matrix of the product between the pairwise comparison value and pj/pi</h2><span id='topic+ahp.error'></span>

<h3>Description</h3>

<p>Consider the comparison matrix where element <code class="reqn">a_{ij}</code> contains the pairwise comparison between the attributes i and j. The weights of the matrix was constructed as in <code>agg.indpref</code> using the Perron eigenvector where <code class="reqn">p_{i}</code> and <code class="reqn">p_{j}</code> are the weights of the <code class="reqn">i^{th}</code> and the <code class="reqn">j^{th}</code> element respectively. <code>ahp.error</code> constructs a matrix <code class="reqn">\epsilon_{ij} = a_{ij}p_{j}/p_{i}</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.error(ahpmat, atts, reciprocal = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.error_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.error_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.error_+3A_reciprocal">reciprocal</code></td>
<td>
<p>whether to remove all numbers lower than 1 and put all numbers above 1 in the upper triangular matrix. Useful for visualizing the inconsistency rapidly.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of matrices containing <code class="reqn">\epsilon_{ij} = a_{ij}p_{j}/p_{i}</code> for each decision-maker, with elements from the lower triangle set as NA automatically (since it is essentially equal to the element in the upper triangle).
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Saaty TL (2004).
&ldquo;Decision making &mdash; the Analytic Hierarchy and Network Processes (AHP/ANP).&rdquo;
<em>Journal of Systems Science and Systems Engineering</em>, <b>13</b>(1), 1&ndash;35.
ISSN 1861-9576, doi: <a href="https://doi.org/10.1007/s11518-006-0151-5">10.1007/s11518-006-0151-5</a>, <a href="https://doi.org/10.1007/s11518-006-0151-5">https://doi.org/10.1007/s11518-006-0151-5</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

data(city200)

cityahp &lt;-  ahp.mat(city200, atts, negconvert = TRUE)
ahp.error(cityahp, atts)


</code></pre>

<hr>
<h2 id='ahp.harker'>Replace inconsistent pairwise comparisons</h2><span id='topic+ahp.harker'></span>

<h3>Description</h3>

<p>Based on the matrix derived from <code>ahp.error</code>, replaces the top <code>n</code> number of inconsistent pairwise comparisons with a value calculated by from the method in Harker (1987). While there are strong arguments against replacing inconsistent values without the decision-maker's consent for the sake of satisfying the consistency ratio criterion of consistency ratio &lt; 0.1 (see Saaty and Tran (2007)), it is often not possible for enumerators to ask respondents to change their answers based on consistency, whereas truncating inconsistent decisions may make the dataset unrepresentative of the population. Researchers should think carefully and explain fully the methods used to process AHP data, and whenever possible, use a lower number of iterations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.harker(
  ahpmat,
  atts,
  round = FALSE,
  limit = FALSE,
  iterations = 1,
  stopcr = 0,
  printiter = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.harker_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.harker_+3A_atts">atts</code></td>
<td>
<p>A list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.harker_+3A_round">round</code></td>
<td>
<p>Rounds the imputation values of the matrix to the nearest integer if <code>TRUE</code>. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ahp.harker_+3A_limit">limit</code></td>
<td>
<p>If set to <code>TRUE</code>, if the imputation value is larger than 9 or smaller than 1/9, the value is converted to 9 and 1/9 respectively. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ahp.harker_+3A_iterations">iterations</code></td>
<td>
<p>The number of comparisons with the highest inconsistency to be changed. For example, if <code>iterations = 3</code>, <code>ahp.harker</code> changes the first, second, and third most inconsistent pairwise comparisons using that method. Defaults to <code>1</code>.</p>
</td></tr>
<tr><td><code id="ahp.harker_+3A_stopcr">stopcr</code></td>
<td>
<p>The stopping Consistency Ratio, which was calculated by <code>ahp.cr</code>. Complements <code>iter</code> by giving <code>iterations</code> a criteria to stop when a matrix is sufficiently consistent. The function will continue looping and replacing more elements of the pairwise comparison matrices until the consistency ratio of the new matrix is lower than <code>stopcr</code>, or the maximum number of iterations is reached, and will stop and move onto the next individual. When <code>stopcr</code> is set, the number of replaced elements will differ among each decision-maker. Defaults to <code>0</code> (i.e. the loop will not be stopped unless <code>iterations</code> is reached)</p>
</td></tr>
<tr><td><code id="ahp.harker_+3A_printiter">printiter</code></td>
<td>
<p>Whether the number of iterations taken for each pairwise matrix is reported or not. If <code>printiter = TRUE</code>, it prints out the final number of iterations that each individual decision-maker took to reach a value lower than <code>stopcr</code>. Generally it is not needed if <code>stopcr</code> is not specified. When <code>stopcr</code> is specified, this is a good way of identifying how many pairwise comparisons are actually replaced by the algorithm for each decision maker. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of matrices with values replaced with consistent values.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Harker P (1987).
&ldquo;Incomplete pairwise comparisons in the analytic hierarchy process.&rdquo;
<em>Mathematical Modelling</em>, <b>9</b>(11), 837 - 848.
ISSN 0270-0255, <a href="http://www.sciencedirect.com/science/article/pii/0270025587905033">http://www.sciencedirect.com/science/article/pii/0270025587905033</a>.<br /><br /> Saaty TL, Tran LT (2007).
&ldquo;On the invalidity of fuzzifying numerical judgments in the Analytic Hierarchy Process.&rdquo;
<em>Mathematical and Computer Modelling</em>, <b>46</b>(7), 962 - 975.
ISSN 0895-7177, Decision Making with the Analytic Hierarchy Process and the Analytic Network Process, <a href="http://www.sciencedirect.com/science/article/pii/S0895717707000787">http://www.sciencedirect.com/science/article/pii/S0895717707000787</a>.
</p>


<h3>See Also</h3>

<p>ahp.error ahp.cr
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

data(city200)

cityahp &lt;- ahp.mat(city200, atts, negconvert = TRUE)
ahp.harker(cityahp, atts)

</code></pre>

<hr>
<h2 id='ahp.indpref'>Computes priority weights of individual decision-makers</h2><span id='topic+ahp.indpref'></span>

<h3>Description</h3>

<p><code>ahp.indpref</code> computes the individual priorities of the decision-makers, and returns a <code>data.frame</code> containing the priority weights of the decision-makers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.indpref(ahpmat, atts, method = "geometric")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.indpref_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.indpref_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.indpref_+3A_method">method</code></td>
<td>
<p>if <code>method = "eigen"</code>, the individual priority weights are computed using the Dominant Eigenvalues method described in Saaty (2003). Otherwise, then the priorities are computed based on the averages of normalized values. Basically it normalizes the matrices so that all of the columns add up to 1, and then computes the averages of the row as the priority weights of each attribute. Three other modes of finding the averages are available:  <code>arithmetic</code>: the arithmetic mean; <code>geometric</code>: the geometric mean (the default); <code>rootmean</code>: the square root of the sum of the squared value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the individual priorities of all the decision-makers.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Saaty TL (2003).
&ldquo;Decision-making with the AHP: Why is the principal eigenvector necessary.&rdquo;
<em>European Journal of Operational Research</em>, <b>145</b>(1), 85 - 91.
ISSN 0377-2217, <a href="http://www.sciencedirect.com/science/article/pii/S0377221702002278">http://www.sciencedirect.com/science/article/pii/S0377221702002278</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(city200)
atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

cityahp &lt;- ahp.mat(df = city200, atts = atts, negconvert = TRUE) 
ahp.indpref(cityahp, atts, method = "eigen")

</code></pre>

<hr>
<h2 id='ahp.mat'>Generate AHP pairwise matrices from survey data</h2><span id='topic+ahp.mat'></span>

<h3>Description</h3>

<p><code>ahp.mat</code> takes in paired comparisons from survey data with questions using the
analytic hierarchy process and converts it into pairwise comparison matrices
for each individual decision-maker. Examples based on Saaty (2004).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.mat(df, atts, negconvert = FALSE, reciprocal = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.mat_+3A_df">df</code></td>
<td>
<p>a dataframe, each row corresponding to one decision-maker, with columns ordered according to  <code>atts</code>.</p>
</td></tr>
<tr><td><code id="ahp.mat_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.mat_+3A_negconvert">negconvert</code></td>
<td>
<p>logical, whether to convert all positive values to
negative. In the pairwise comparison A_B, if -6 denotes A is more
important than B by 6 units, set <code>negconvert = TRUE</code>.</p>
</td></tr>
<tr><td><code id="ahp.mat_+3A_reciprocal">reciprocal</code></td>
<td>
<p>logical, whether to convert negative values (after <code>negconvert</code>) to its reciprocal. If the comparison A_B where B is more important than A was already entered in its reciprocal (e.g. 1/6), choose <code>reciprocal = FALSE</code>. When <code>reciprocal = FALSE</code>, do not set <code>negconvert = TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of pairwise comparison matrices of each decision-maker.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Saaty TL (2004).
&ldquo;Decision making &mdash; the Analytic Hierarchy and Network Processes (AHP/ANP).&rdquo;
<em>Journal of Systems Science and Systems Engineering</em>, <b>13</b>(1), 1&ndash;35.
ISSN 1861-9576, doi: <a href="https://doi.org/10.1007/s11518-006-0151-5">10.1007/s11518-006-0151-5</a>, <a href="https://doi.org/10.1007/s11518-006-0151-5">https://doi.org/10.1007/s11518-006-0151-5</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

data(city200)
atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')
ahp.mat(df = city200, atts = atts, negconvert = TRUE)

</code></pre>

<hr>
<h2 id='ahp.missing'>Impute missing observations using the method in Harker (1987)</h2><span id='topic+ahp.missing'></span>

<h3>Description</h3>

<p>Imputes the missing values of a list of matrices produced by <code>ahp.mat</code> using the methods and assumptions made in Harker (1987). Missing values must be coded as <code>NA</code>. As suggested in Harker (1987), a minimum of n-1 comparisons must be made, where n is the number of attributes (assuming that the decision-maker is perfectly consistent). Note that the algorithm assumes that the NA values will be imputed under perfect consistency with the other pairwise comparisons made.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.missing(ahpmat, atts, round = FALSE, limit = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.missing_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.missing_+3A_atts">atts</code></td>
<td>
<p>A list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.missing_+3A_round">round</code></td>
<td>
<p>Rounds the imputation values of the matrix to the nearest integer if <code>TRUE</code>. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ahp.missing_+3A_limit">limit</code></td>
<td>
<p>If set to <code>TRUE</code>, if the imputation value is larger than 9 or smaller than 1/9, the value is converted to 9 and 1/9 respectively. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of matrices with all <code>NA</code> values imputed.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Harker P (1987).
&ldquo;Incomplete pairwise comparisons in the analytic hierarchy process.&rdquo;
<em>Mathematical Modelling</em>, <b>9</b>(11), 837 - 848.
ISSN 0270-0255, <a href="http://www.sciencedirect.com/science/article/pii/0270025587905033">http://www.sciencedirect.com/science/article/pii/0270025587905033</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(magrittr)

atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

data(city200)

set.seed(42)
## Make a dataframe that is missing at random
missing.df &lt;- city200[1:10,]
for (i in 1:10){
  missing.df[i, round(stats::runif(1,1,10))] &lt;- NA
}
missingahp &lt;- ahp.mat(missing.df, atts, negconvert = TRUE)
ahp.missing(missingahp, atts)

</code></pre>

<hr>
<h2 id='ahp.pwerror'>Finds the pairwise comparisons with the maximum amount of inconsistency</h2><span id='topic+ahp.pwerror'></span>

<h3>Description</h3>

<p>After constructing a list of matrices with <code class="reqn">\epsilon_{ij} = a_{ij}w_{j}/w_{i}</code> (following <code>ahp.error</code>), this algorithm extracts the top <code>n</code> numbers of pairwise comparison matrices with the highest <code class="reqn">\epsilon_{ij}</code> for each decision-maker.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.pwerror(ahpmat, atts, npw = 3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.pwerror_+3A_ahpmat">ahpmat</code></td>
<td>
<p>A list of pairwise comparison matrices of each decision maker generated by <code>ahp.mat</code>.</p>
</td></tr>
<tr><td><code id="ahp.pwerror_+3A_atts">atts</code></td>
<td>
<p>a list of attributes in the correct order</p>
</td></tr>
<tr><td><code id="ahp.pwerror_+3A_npw">npw</code></td>
<td>
<p>Number of pairwise comparisons</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of matrices containing <code class="reqn">\epsilon_{ij} = a_{ij}w_{j}/w_{i}</code> for each decision-maker, with elements from the lower triangle set as NA automatically (since it is essentially equal to the element in the upper triangle).
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>References</h3>

<p>Saaty TL (2004).
&ldquo;Decision making &mdash; the Analytic Hierarchy and Network Processes (AHP/ANP).&rdquo;
<em>Journal of Systems Science and Systems Engineering</em>, <b>13</b>(1), 1&ndash;35.
ISSN 1861-9576, doi: <a href="https://doi.org/10.1007/s11518-006-0151-5">10.1007/s11518-006-0151-5</a>, <a href="https://doi.org/10.1007/s11518-006-0151-5">https://doi.org/10.1007/s11518-006-0151-5</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(magrittr)

atts &lt;- c('cult', 'fam', 'house', 'jobs', 'trans')

data(city200)

cityahp &lt;- ahp.mat(city200, atts, negconvert = TRUE)
ahp.error(cityahp, atts)


</code></pre>

<hr>
<h2 id='ahp.ri'>Generate random indices</h2><span id='topic+ahp.ri'></span>

<h3>Description</h3>

<p>The <code>ahp.ri</code> function calculates the mean consistency indices of a specific numbers of random number pairwise comparison matrices.
</p>
<p>The random index of one pairwise comparison matrix is given as below, where <code class="reqn">lambda</code> is the maximum eigenvalue and <code class="reqn">n</code> is the number of attributes.
</p>
<p style="text-align: center;"><code class="reqn">RI = (\lambda-n)/((n-1)</code>
</p>

<p><code>ahp.ri</code> creates <code>nsims</code> number of pairwise comparison matrices with number of dimensions=<code>dim</code>, and returns its average.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ahp.ri(nsims, dim, seed = 42)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ahp.ri_+3A_nsims">nsims</code></td>
<td>
<p>Number of random pairwise comparison matrices to be generated. Processing time increases substantially with higher <code>nsims</code>.</p>
</td></tr>
<tr><td><code id="ahp.ri_+3A_dim">dim</code></td>
<td>
<p>Number of dimensions of the matrix.</p>
</td></tr>
<tr><td><code id="ahp.ri_+3A_seed">seed</code></td>
<td>
<p>The random number generator seed for reproducibility, which is same as <code>set.seed</code>. By default, <code>seed = 42</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The generated random index, which is numeric.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ahp.ri(nsims = 10000, dim = 5, seed = 42)


</code></pre>

<hr>
<h2 id='ahpsurvey'>AHP Survey package</h2><span id='topic+ahpsurvey'></span>

<h3>Description</h3>

<p>The <code>ahpsurvey</code> package provides a workflow for researchers to reformat data and run analytic hierarchy process on data that are originally formatted using the survey data entry mode. A diversified toolbox is available for researchers to explore ways to impute missing pairwise comparisons or to adjust comparisons based on consistency, and to conveniently customize the methods which weights derived from surveys are extracted and aggregated.
</p>


<h3>Author(s)</h3>

<p>Frankie Cho <a href="mailto:htcho@connnect.hku.hk">htcho@connnect.hku.hk</a>
</p>

<hr>
<h2 id='city1'>Dataframe of one decision-maker based on Saaty (2004)</h2><span id='topic+city1'></span>

<h3>Description</h3>

<p>A data.frame of one decision-maker with weights the same as Saaty (2004), with the pairwise comparisons of <code>atts</code>: <code>c('cult', 'fam', 'house', 'jobs', 'trans')</code>, about a choosing the best city to live in based on five attributes: Culture, Family, House, Jobs, and Transportation. Negative values in the data denote that the attribute on the left is more important than the right, thus if used with <code>ahp.mat</code>, <code>negconvert</code> must be set to <code>TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(city1)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1 row and 10 variables, which are pairwise comparisons of <code>atts</code>.</p>


<h3>Source</h3>

<p>Saaty (2004)
</p>

<hr>
<h2 id='city200'>A dataframe of 200 simulated decision-makers based on Saaty (2004)</h2><span id='topic+city200'></span>

<h3>Description</h3>

<p>A data.frame of one decision-maker with weights the same as Saaty (2004), with the pairwise comparisons of <code>atts</code>: <code>c('cult', 'fam', 'house', 'jobs', 'trans')</code>, about a choosing the best city to live in based on five attributes: Culture, Family, House, Jobs, and Transportation. The choices of 200 decision-makers are simulated based on the underlying weights and randomness generated by a normal random distribution. The true weights are stored in <code>data(city1)</code>. The normal random distribution was set with a mean at the true weight value and a standard deviation of <code style="white-space: pre;">&#8288;2,1,2,1.5,2,1.5,2.5,0.5,0.5,1&#8288;</code> in chronological order of the columns in <code>city200</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(city200)
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 200 row and 10 variables, which are pairwise comparisons of <code>atts</code>.</p>


<h3>Source</h3>

<p>Saaty TL (2004).
&ldquo;Decision making &mdash; the Analytic Hierarchy and Network Processes (AHP/ANP).&rdquo;
<em>Journal of Systems Science and Systems Engineering</em>, <b>13</b>(1), 1&ndash;35.
ISSN 1861-9576, doi: <a href="https://doi.org/10.1007/s11518-006-0151-5">10.1007/s11518-006-0151-5</a>, <a href="https://doi.org/10.1007/s11518-006-0151-5">https://doi.org/10.1007/s11518-006-0151-5</a>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
