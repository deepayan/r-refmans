<!DOCTYPE html><html><head><title>Help for package BayesGmed</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BayesGmed}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bayesgmed'><p>Estimate a causal mediation effects</p></a></li>
<li><a href='#bayesgmed_sens'><p>Conduct sensitivity analysis for unmeasured confounder</p></a></li>
<li><a href='#bayesgmed_summary'><p>Print a summary of the estimated causal mediation model</p></a></li>
<li><a href='#BayesGmed-package'><p>The 'BayesGmed' package.</p></a></li>
<li><a href='#example_data'><p>example_data: A simulated data set for illustrating mediation analysis in BayesGmed.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Bayesian Causal Mediation Analysis using 'Stan'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs parametric mediation analysis using the Bayesian g-formula approach for binary and continuous outcomes. The methodology is based on Comment (2018) &lt;<a href="https://doi.org/10.5281%2Fzenodo.1285275">doi:10.5281/zenodo.1285275</a>&gt; and a demonstration of its application can be found at Yimer et al. (2022) &lt;<a href="https://doi.org/10.48550%2FarXiv.2210.08499">doi:10.48550/arXiv.2210.08499</a>&gt;. </td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Biarch:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, Rcpp (&ge; 0.12.0), RcppParallel (&ge; 5.0.1), rstan (&ge;
2.18.1), rstantools (&ge; 2.1.1)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>BH (&ge; 1.66.0), Rcpp (&ge; 0.12.0), RcppEigen (&ge; 0.3.3.3.0),
RcppParallel (&ge; 5.0.1), rstan (&ge; 2.18.1), StanHeaders (&ge;
2.18.0)</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>GNU make</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-31 13:14:54 UTC; mbmhsby2</td>
</tr>
<tr>
<td>Author:</td>
<td>Belay Birlie Yimer
    <a href="https://orcid.org/0000-0001-8621-6539"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Mark Lunt [aut],
  Marcus Beasley [aut],
  Gary J Macfarlane [aut],
  John McBeth [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Belay Birlie Yimer &lt;belaybirlie.yimer@manchester.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-31 14:00:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='bayesgmed'>Estimate a causal mediation effects</h2><span id='topic+bayesgmed'></span>

<h3>Description</h3>

<p>Estimates various quantities for causal mediation analysis using 'Stan'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayesgmed(
  outcome,
  mediator,
  treat,
  covariates = NULL,
  dist.y = "continuous",
  dist.m = "continuous",
  link.y = "identity",
  link.m = "identity",
  data,
  priors = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bayesgmed_+3A_outcome">outcome</code></td>
<td>
<p>a character string indicating the name of the outcome variable.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_mediator">mediator</code></td>
<td>
<p>a character string indicating the name of the mediator variable.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_treat">treat</code></td>
<td>
<p>a character string indicating the name of the treatment variable. The treatment variable is considered binary and should be coded as 0 for control and 1 for treated.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_covariates">covariates</code></td>
<td>
<p>a character vector indicating the name of the confounding variables.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_dist.y">dist.y</code></td>
<td>
<p>a character string indicating the family distribution of the outcome.  E.g., dist.y = &quot;bernoulli&quot; will fit
a logistic regression for the outcome.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_dist.m">dist.m</code></td>
<td>
<p>a character string indicating the family distribution of the mediator, E.g., dist.m = &quot;bernoulli&quot; will fit
a logistic regression model for the mediator</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_link.y">link.y</code></td>
<td>
<p>a character string indicating the link function to be used for the outcome model.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_link.m">link.m</code></td>
<td>
<p>a character string indicating the link function to be used for the mediator model.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or a <code>tibble</code> object.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_priors">priors</code></td>
<td>
<p>A list of named values for the prior scale parameters. See details.</p>
</td></tr>
<tr><td><code id="bayesgmed_+3A_...">...</code></td>
<td>
<p>Other optional parameters passed to <code>rstan::stan()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is the main function for estimating causal mediation effects
from several types of data within the Bayesian framework. We followed the potential
outcome framework for effects definition and the package uses the 'rstan' utility functions
for exploring the posterior distribution.
</p>


<h4>priors</h4>

<p>Users may pass a list of named values for the priors argument. The values will be used to define
the scale parameter of the respective prior distributions. This list may specify some or all of the
following parameters:
priors &lt;- list(
scale_m = 2.5<em>diag(P_m) scale_y = 2.5</em>diag(P_y),
location_m = rep(0, P_m) location_y = rep(0, P_y),
scale_sd_y = 2.5, scale_sd_m = 2.5)
where P_m is the number of regression parameters (including the intercept) in the mediator model and
P_y is the number of regression parameters in the outcome model.
</p>



<h3>Value</h3>

<p>An object of 'S4' class 'stanfit',  with all its available methods.
</p>


<h3>Author(s)</h3>

<p>Belay Birlie Yimer <a href="mailto:belaybirlie.yimer@manchester.ac.uk">belaybirlie.yimer@manchester.ac.uk</a>
</p>


<h3>References</h3>


<ol>
<li><p> McCandless, L.C. and J.M. Somers, <em>Bayesian sensitivity analysis for unmeasured confounding in causal mediation analysis.</em> Statistical Methods in Medical Research, 2019. (28)(2): p. 515-531.
</p>
</li>
<li><p> Comment, L., Coull, B. A., Zigler, C., and Valeri, L. (2019). Bayesian data fusion for unmeasured confounding. arXiv preprint arXiv:1902.10613.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
## Run example using the example_data
data(example_data)
fit1 &lt;- bayesgmed(outcome = "Y", mediator =  "M", treat = "A", covariates = c("Z1", "Z2"),
 dist.y = "binary", dist.m = "binary", link.y = "logit", link.m = "logit", data = example_data)
bayesgmed_summary(fit1)

# With priors
P &lt;- 3 # number of covariates plus the intercept term 
priors &lt;- list(scale_m = 2.5*diag(P+1), scale_y = 2.5*diag(P+2), 
location_m = rep(0, P+1), location_y = rep(0, P+2))
fit1 &lt;- bayesgmed(outcome = "Y", mediator =  "M", treat = "A", covariates = c("Z1", "Z2"), 
dist.y = "binary", dist.m = "binary", link.y = "logit", link.m = "logit", priors = priors,  
data = example_data)
bayesgmed_summary(fit1)

</code></pre>

<hr>
<h2 id='bayesgmed_sens'>Conduct sensitivity analysis for unmeasured confounder</h2><span id='topic+bayesgmed_sens'></span>

<h3>Description</h3>

<p>'bayesgmed_sens' is used to conduct sensitivity analysis for unmeasured confounders in mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayesgmed_sens(
  outcome,
  mediator,
  treat,
  covariates = NULL,
  dist.y = "continuous",
  dist.m = "continuous",
  link.y = "identity",
  link.m = "identity",
  data,
  priors = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bayesgmed_sens_+3A_outcome">outcome</code></td>
<td>
<p>a character string indicating the name of the outcome variable.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_mediator">mediator</code></td>
<td>
<p>a character string indicating the name of the mediator variable.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_treat">treat</code></td>
<td>
<p>a character string indicating the name of the treatment variable. The treatment variable is considered binary and should be coded as 0 for control and 1 for treated.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_covariates">covariates</code></td>
<td>
<p>a character vector indicating the name of the confounding variables.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_dist.y">dist.y</code></td>
<td>
<p>a character string indicating the family distribution of the outcome.  E.g., dist.y = &quot;bernoulli&quot; will fit
a logistic regression the outcome.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_dist.m">dist.m</code></td>
<td>
<p>a character string indicating the family distribution of the mediator  E.g., dist.m = &quot;bernoulli&quot; will fit
a logistic regression the mediator</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_link.y">link.y</code></td>
<td>
<p>a character string indicating the link function to be used for the outcome model.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_link.m">link.m</code></td>
<td>
<p>a character string indicating the link function to be used for the mediator model.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or a <code>tibble</code> object.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_priors">priors</code></td>
<td>
<p>A list of named values for the prior scale parameters. See details.</p>
</td></tr>
<tr><td><code id="bayesgmed_sens_+3A_...">...</code></td>
<td>
<p>Other optional parameters passed to <code>rstan::stan()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Perform a sensitivity analysis for unmeasured confounding
following the approach proposed by McCandless LC and Somers JM (2019). This is done by incorporating
uncertainty about unmeasured confounding in the outcome and mediator model through a prior distribution.
One can control the size of unmeasured confounding by varying the location and scale parameters of the prior
distribution values for the bias parameter (i.e., gamma). See the Vignette for more details.
</p>


<h4>priors</h4>

<p>Users may pass a list of named values for the priors argument. The values will be used to define
the scale parameter of the respective prior distributions. This list may specify some or all of the
following parameters:
priors &lt;- list(
scale_m = 2.5<em>diag(P_m) scale_y = 2.5</em>diag(P_y),
llocation_m = rep(0, P_m) location_y = rep(0, P_y),
location_gamma = rep(0, 4), scale_gamma = 0.1*diag(4),
scale_sd_y = 2.5, scale_sd_m = 2.5)
where <code>P_m</code> is the number of regression parameters (including the intercept) in the mediator model and
<code>P_y</code> is the number of regression parameters in the outcome model. Note that there are 4 bias parameters
i.e., gamma).
</p>



<h3>Value</h3>

<p>An object of 'S4' class 'stanfit', with all its available methods.
</p>


<h3>Author(s)</h3>

<p>Belay Birlie Yimer <a href="mailto:belaybirlie.yimer@manchester.ac.uk">belaybirlie.yimer@manchester.ac.uk</a>
</p>


<h3>References</h3>


<ol>
<li><p> McCandless, L.C. and J.M. Somers, <em>Bayesian sensitivity analysis for unmeasured confounding in causal mediation analysis.</em> Statistical Methods in Medical Research, 2019. (28)(2): p. 515-531.
</p>
</li>
<li><p> Comment, L., Coull, B. A., Zigler, C., and Valeri, L. (2019). Bayesian data fusion for unmeasured confounding. arXiv preprint arXiv:1902.10613.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>
## Run example using the example_data
data(example_data)
# priors including for unmeasured single confounder 
P &lt;- 3 # number of covariates plus the intercept term 
priors &lt;- list(scale_m = 2.5*diag(P+1), scale_y = 2.5*diag(P+2), location_m = rep(0, P+1), 
location_y = rep(0, P+2), location_gamma = rep(0,4), scale_gamma = 0.5*diag(4))
fit1 &lt;- bayesgmed_sens(outcome = "Y", mediator =  "M", treat = "A", covariates = c("Z1", "Z2"), 
dist.y = "binary", dist.m = "binary", link.y = "logit", link.m = "logit", priors = priors,  
data = example_data)
bayesgmed_summary(fit1)

</code></pre>

<hr>
<h2 id='bayesgmed_summary'>Print a summary of the estimated causal mediation model</h2><span id='topic+bayesgmed_summary'></span>

<h3>Description</h3>

<p>Print a summary of the estimated causal mediation model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayesgmed_summary(
  model = NULL,
  level = 0.95,
  pars = c("NDE_control", "NDE_treated", "NIE_control", "NIE_treated", "ANDE", "ANIE",
    "TE"),
  digits = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bayesgmed_summary_+3A_model">model</code></td>
<td>
<p>A <code>stanfit</code> object obtained from <code>bayesgmed()</code>.</p>
</td></tr>
<tr><td><code id="bayesgmed_summary_+3A_level">level</code></td>
<td>
<p>The &quot;confidence&quot; level that defines the limits of the credible intervals (default is .95, i.e. 95% CIs).</p>
</td></tr>
<tr><td><code id="bayesgmed_summary_+3A_pars">pars</code></td>
<td>
<p>The parameters to summarize (defaults to main causal effect estimands similar to the <code>mediation</code> package; see Details).</p>
</td></tr>
<tr><td><code id="bayesgmed_summary_+3A_digits">digits</code></td>
<td>
<p>The number of decimal points to display in the output (default is 3).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>After estimating a model with <code>bayesgmed()</code>, use <code>bayesgmed_summary(fit)</code> to display the estimated results,
where <code>fit</code> is an object containing the fitted model. By default, <code>bayesgmed_summary()</code> only displays a subset of
the estimated parameters:
- <code>NDE_control</code>: direct effect estimate when the exposure level is set to the control value.
- <code>NDE_treated</code>: direct effect estimate when the exposure level is set to the treated value.
- <code>NIE_control</code>: mediated effect estimate when the exposure level is set to the control value.
- <code>NIE_treated</code>: mediated effect estimate when the exposure level is set to the treated value.
- <code>ANDE</code>: average direct effect of X on Y.
- <code>ANIE</code>: average indirect effect of X on Y.
- <code>TE</code>: the total effect of A on Y.
To display all estimated parameters where all chains merged, set <code>pars = NULL</code>. This will print all parameters defined
in the model definitions, including the most important ones:
- <code>alphaZ[]</code>: parameter estimate of the confounders (i.e., X -&gt; Y) relationship, listed in the order they are specified
in the <code>covariates</code> argument of <code>bayesgmed()</code>. <code>alpha[1]</code> is the intercept.
- <code>alphaM</code>: parameter estimate of the M -&gt; Y relationship.
- <code>alphaA</code>: parameter estimate of the A -&gt; Y relationship.
- <code>betaZ</code>: parameter estimate of the confounders (i.e., X -&gt; M) relationship, listed in the order they are specified
in the <code>covariates</code> argument of <code>bayesgmed()</code>. <code>beta[1]</code> is the intercept
</p>
<p>To learn more about the additional parameters, refer to the Stan code
(<code>cat(get_stancode(fit))</code>).
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> summarizing the estimated causal mediation model, including the following columns:
</p>

<ul>
<li> <p><code>Parameter</code>: the name of the parameter.
</p>
</li>
<li> <p><code>Mean</code>: the mean of the parameter's posterior distribution.
</p>
</li>
<li> <p><code>Median</code>: the median of the parameter's posterior distribution.
</p>
</li>
<li> <p><code>SE</code>: the standard deviation of the parameter's posterior distribution.
</p>
</li>
<li> <p><code>ci_lwr</code>: the lower limit of the credible interval.
</p>
</li>
<li> <p><code>ci_upr</code>: the upper limit of the credible interval.
</p>
</li>
<li> <p><code>n_eff</code>: the number of efficient samples.
</p>
</li>
<li> <p><code>Rhat</code>: a value of 1.00 suggests model convergence.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Belay B. Yimer <a href="mailto:belaybirlie.yimer@manchester.ac.uk">belaybirlie.yimer@manchester.ac.uk</a>
</p>

<hr>
<h2 id='BayesGmed-package'>The 'BayesGmed' package.</h2><span id='topic+BayesGmed-package'></span><span id='topic+BayesGmed'></span>

<h3>Description</h3>

<p>A DESCRIPTION OF THE PACKAGE
</p>


<h3>References</h3>

<p>Stan Development Team (2022). RStan: the R interface to Stan. R package version 2.21.5. https://mc-stan.org
</p>

<hr>
<h2 id='example_data'>example_data: A simulated data set for illustrating mediation analysis in BayesGmed.</h2><span id='topic+example_data'></span>

<h3>Description</h3>

<p>The data set contains a binary outcome variable Y, a binary exposure A,
a binary mediator M, and two confounding variables (Z1 and Z2) for
300 individuals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_data
</code></pre>


<h3>Format</h3>



<h4><code>example_data</code></h4>

<p>A data frame with 300 rows and 5 columns:
</p>

<dl>
<dt>Z1, Z2</dt><dd><p>confounders</p>
</dd>
<dt>A</dt><dd><p>binary exposure</p>
</dd>
<dt>M</dt><dd><p>binary mediator</p>
</dd>
<dt>Y</dt><dd><p>binary outcome</p>
</dd>
</dl>
<p>...

</p>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
