<!DOCTYPE html><html><head><title>Help for package showtext</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {showtext}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#showtext_auto'><p>Automatically Using 'showtext' for New Graphics Devices</p></a></li>
<li><a href='#showtext_begin'><p>Rendering Text for R Graphics Devices</p></a></li>
<li><a href='#showtext_end'><p>Turning Off 'showtext' Text Rendering</p></a></li>
<li><a href='#showtext_opts'><p>Setting Options for 'showtext' package</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Using Fonts More Easily in R Graphs</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9-7</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-02</td>
</tr>
<tr>
<td>Author:</td>
<td>Yixuan Qiu and authors/contributors of the
    included software. See file AUTHORS for details.</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yixuan Qiu &lt;yixuan.qiu@cos.name&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Making it easy to use various types of fonts ('TrueType',
    'OpenType', Type 1, web fonts, etc.) in R graphs, and supporting most output
    formats of R graphics including PNG, PDF and SVG. Text glyphs will be converted
    into polygons or raster images, hence after the plot has been created, it no
    longer relies on the font files. No external software such as 'Ghostscript' is
    needed to use this package.</td>
</tr>
<tr>
<td>Depends:</td>
<td>sysfonts (&ge; 0.7.1), showtextdb (&ge; 2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, prettydoc, curl, jsonlite</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>zlib, libpng, FreeType</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/yixuan/showtext">https://github.com/yixuan/showtext</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/yixuan/showtext/issues">https://github.com/yixuan/showtext/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2.0)</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>see file COPYRIGHTS</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-02 02:17:21 UTC; qyx</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-02 06:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='showtext_auto'>Automatically Using 'showtext' for New Graphics Devices</h2><span id='topic+showtext_auto'></span><span id='topic+showtext.auto'></span>

<h3>Description</h3>

<p>The two versions of this function are equivalent, but the
&quot;underscore&quot; naming is preferred.
</p>
<p>This function could turn on/off the automatic use of <span class="pkg">showtext</span>
functionality. If turned on, any newly opened graphics devices will use
<span class="pkg">showtext</span> to draw text. This helps to avoid the repeated calls of
<code><a href="#topic+showtext_begin">showtext_begin</a>()</code> and <code><a href="#topic+showtext_end">showtext_end</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showtext_auto(enable = TRUE, record = TRUE)

showtext.auto(enable = TRUE, record = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showtext_auto_+3A_enable">enable</code></td>
<td>
<p><code>TRUE</code> to turn on and <code>FALSE</code> to turn off.</p>
</td></tr>
<tr><td><code id="showtext_auto_+3A_record">record</code></td>
<td>
<p>If <code>TRUE</code>, then <code><a href="#topic+showtext_begin">showtext_begin</a>()</code> is added
to the display list of the current graphics device
(via <code><a href="grDevices.html#topic+recordGraphics">recordGraphics</a>()</code>),
so that it may be &quot;replayed&quot; at a later time point
(via <code><a href="grDevices.html#topic+recordPlot">replayPlot</a>()</code>).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yixuan Qiu &lt;<a href="https://statr.me/">https://statr.me/</a>&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+showtext_begin">showtext_begin</a>()</code>, <code><a href="#topic+showtext_end">showtext_end</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
pdf("test1.pdf")
plot(1, main = "\u6b22\u8fce")  ## may not render properly
dev.off()

## Automatically use showtext for future devices
showtext_auto()
plot(1, main = "\u6b22\u8fce", family = "wqy-microhei")

pdf("test2.pdf")
plot(1, main = "\u6b22\u8fce", family = "wqy-microhei")
dev.off()

## Turn off if needed
showtext_auto(FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='showtext_begin'>Rendering Text for R Graphics Devices</h2><span id='topic+showtext_begin'></span><span id='topic+showtext.begin'></span>

<h3>Description</h3>

<p>The two versions of this function are equivalent, but the
&quot;underscore&quot; naming is preferred.
</p>
<p>Calling this function will use <span class="pkg">showtext</span> to render text
for the current graphics device. The main advantage of
<span class="pkg">showtext</span> is that user can use any supported font file for
the text rendering, and text glyphs will be converted
into polygons (for vector graphics) or raster images
(for bitmap and on-screen graphics),
thus producing device independent output on all platforms.
This function would be useful if you want to use non-standard fonts
in the graphics device. The usage of this function is easy:
simply open the graphics device, and &quot;claim&quot; that you want to use
<span class="pkg">showtext</span> by calling this function.
See the <strong>Examples</strong> section for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showtext_begin()

showtext.begin()
</code></pre>


<h3>Details</h3>

<p>This package uses FreeType to load font files and render
text characters. The font loading part is done by function
<code><a href="sysfonts.html#topic+font_add">font_add</a>()</code> in the <span class="pkg">sysfonts</span>
package. Users could read the help page of
<code><a href="sysfonts.html#topic+font_paths">font_paths</a>()</code>,
<code><a href="sysfonts.html#topic+font_files">font_files</a>()</code> and
<code><a href="sysfonts.html#topic+font_add">font_add</a>()</code> to learn how to load
a font file into R. <span class="pkg">showtext</span> package
has a built-in font file of the WenQuanYi Micro Hei
family, and it will be loaded automatically, so users can
use this function directly without any extra settings.
</p>
<p>The mechanism of this function is that it can replace the
text rendering functions contained in the current device.
<span class="pkg">showtext</span> will first use FreeType to analyze the
outline of each character in the text, and then call some
low-level drawing functions in the current device to draw
the glyph. As a result, glyphs of the text will be finally
converted into polygons or raster images, which means that
the system where the graph is viewed does not need to install
the fonts that create the graph.
</p>
<p>Notice that this function is only effective to the current
<strong>ACTIVE</strong> device. So to use this function, the device
you want to work with must have already been opened (through
functions like <code><a href="grDevices.html#topic+png">png</a>()</code>,
<code><a href="grDevices.html#topic+pdf">pdf</a>()</code>, etc.).
</p>
<p>To switch back, users can call <code><a href="#topic+showtext_end">showtext_end</a>()</code>
to restore the original device functions. See examples
below for the usage of these functions.
</p>


<h3>Author(s)</h3>

<p>Yixuan Qiu &lt;<a href="https://statr.me/">https://statr.me/</a>&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+showtext_opts">showtext_opts</a>()</code>, <code><a href="#topic+showtext_auto">showtext_auto</a>()</code>,
<code><a href="#topic+showtext_end">showtext_end</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
old = setwd(tempdir())

###  Enable pdf() to draw Chinese characters nicely  ###
###  Requires the simkai.ttf font file, usually      ###
###  installed in Windows                            ###

## First, open the device
pdf("showtext-ex1.pdf")

## For now we are using the original device functions to draw axis labels
plot(1, type = "n")

## Then turn showtext on and draw some characters
showtext_begin()
text(1, 1.2, intToUtf8(c(21315, 31179, 19975, 36733)), cex = 5)

## Use another font
if("simkai.ttf" %in% font_files()) font_add("kaishu", "simkai.ttf")
text(1, 0.8, intToUtf8(c(19968, 32479, 27743, 28246)),
     cex = 5, family = "kaishu")
     
## Turn showtext off
showtext_end()

## Also turn off the device
dev.off()


###  Download font file from web  ###

download.file("http://fontpro.com/download-family.php?file=36289",
              "newrocker.ttf", mode="wb")
download.file("http://fontpro.com/download-family.php?file=35128",
              "cutetumblr.ttf", mode ="wb")

font_add("newrocker", "newrocker.ttf")
font_add("cutetumblr", "cutetumblr.ttf")

png("showtext-ex2.png", 800, 500)
plot(1, type = "n")
showtext_begin()
text(1, 1.2, "Let me tell you a story", cex = 4, family = "newrocker")
text(1, 0.8, "Long long ago...", cex = 4, family = "cutetumblr")
showtext_end()
dev.off()

setwd(old)


## End(Not run)
</code></pre>

<hr>
<h2 id='showtext_end'>Turning Off 'showtext' Text Rendering</h2><span id='topic+showtext_end'></span><span id='topic+showtext.end'></span>

<h3>Description</h3>

<p>The two versions of this function are equivalent, but the
&quot;underscore&quot; naming is preferred.
</p>
<p>This function will turn off the <span class="pkg">showtext</span> functionality
of rendering text. When you call this function, the current
active device should be the same as the one when you call
<code><a href="#topic+showtext_begin">showtext_begin</a>()</code>, or an error will be issued.
See the example in <code><a href="#topic+showtext_begin">showtext_begin</a>()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showtext_end()

showtext.end()
</code></pre>


<h3>Author(s)</h3>

<p>Yixuan Qiu &lt;<a href="https://statr.me/">https://statr.me/</a>&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+showtext_begin">showtext_begin</a>()</code>
</p>

<hr>
<h2 id='showtext_opts'>Setting Options for 'showtext' package</h2><span id='topic+showtext_opts'></span><span id='topic+showtext.opts'></span>

<h3>Description</h3>

<p>The two versions of this function are equivalent, but the
&quot;underscore&quot; naming is preferred.
</p>
<p>This function sets parameters that will affect the appearance of the
graphs created with <span class="pkg">showtext</span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showtext_opts(...)

showtext.opts(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showtext_opts_+3A_...">...</code></td>
<td>
<p>Options to be set, expressed in <code>name = value</code> pairs.
It can also be a list containing these pairs (for example,
the list returned by a previous call of <code>showtext_opts()</code>).
Currently accepted parameters are <code>nseg</code> and <code>dpi</code>.
See the <strong>Options Used</strong> section.</p>
</td></tr>
</table>


<h3>Options Used</h3>


<dl>
<dt><code>nseg</code></dt><dd><p>Parameter to control the smoothness of the outlines
of glyphs, typically used in vector graphics devices
such as <code>pdf()</code> and <code>svg()</code>.
It is the number of line segments to approximate
a piece of curve in the glyph. The larger <code>nseg</code> is,
the smoother text outlines would be, but also with
larger file size for vector graphics. Usually a value
between 5~20 would be enough.</p>
</dd>
<dt><code>dpi</code></dt><dd><p>An integer that gives the resolution
of the device. This parameter is only used in bitmap
and on-screen graphics devices such as <code>png()</code> and
<code>x11()</code>, to determine the pixel size of text from
point size. For example, if <code>dpi</code> is set to 96,
then a character with 12 point size will have a pixel
size of <code>12 * 96 / 72 = 16</code>.</p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Yixuan Qiu &lt;<a href="https://statr.me/">https://statr.me/</a>&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Set dpi to 200
op = showtext_opts(dpi = 200)

png("dpi_200.png", 800, 800, res = 200)
par(family = "sans")
showtext_begin()

set.seed(123)
plot(density(rnorm(100)))

showtext_end()
dev.off()

## Restore old options
showtext_opts(op)

png("dpi_96.png", 800, 800, res = 96)
par(family = "sans")
showtext_begin()

set.seed(123)
plot(density(rnorm(100)))

showtext_end()
dev.off()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
