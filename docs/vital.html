<!DOCTYPE html><html lang="en"><head><title>Help for package vital</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {vital}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#vital-package'><p>vital: Tidy Analysis Tools for Mortality, Fertility, Migration and Population Data</p></a></li>
<li><a href='#age_components'><p>Extract age components from a model</p></a></li>
<li><a href='#as_vital'><p>Coerce to a vital object</p></a></li>
<li><a href='#aus_fertility'><p>Australian fertility data</p></a></li>
<li><a href='#aus_mortality'><p>Australian mortality data</p></a></li>
<li><a href='#autoplot.fbl_vtl_ts'><p>Plot forecasts from a vital model</p></a></li>
<li><a href='#autoplot.mdl_vtl_df'><p>Plot output from a vital model</p></a></li>
<li><a href='#autoplot.vital'><p>Rainbow plot of demographic data against age</p></a></li>
<li><a href='#collapse_ages'><p>Collapse upper ages into a single age group. Counts are summed while</p>
rates are recomputed where possible.</a></li>
<li><a href='#FDM'><p>Functional data model</p></a></li>
<li><a href='#FMEAN'><p>Functional mean model</p></a></li>
<li><a href='#FNAIVE'><p>Functional naive model</p></a></li>
<li><a href='#forecast.FDM'><p>Produce forecasts from a vital model</p></a></li>
<li><a href='#generate.mdl_vtl_df'><p>Generate responses from a mable</p></a></li>
<li><a href='#interpolate.mdl_vtl_df'><p>Interpolate missing values using a vital model</p></a></li>
<li><a href='#LC'><p>Lee-Carter model</p></a></li>
<li><a href='#life_expectancy'><p>Compute life expectancy from age-specific mortality rates</p></a></li>
<li><a href='#life_table'><p>Compute period lifetables from age-specific mortality rates</p></a></li>
<li><a href='#make_pr'><p>Do a product/ratio transformation</p></a></li>
<li><a href='#make_sd'><p>Do a sum/difference transformation</p></a></li>
<li><a href='#model.vital'><p>Estimate models for vital data</p></a></li>
<li><a href='#net_migration'><p>Calculate net migration from a vital object</p></a></li>
<li><a href='#norway_births'><p>Norwegian mortality and births data</p></a></li>
<li><a href='#read_hfd'><p>Read data directly from HFD and construct a <code>vital</code> object for use in other functions</p></a></li>
<li><a href='#read_hfd_files'><p>Read data from files downloaded from HFD and construct a <code>vital</code> object for use in other functions</p></a></li>
<li><a href='#read_hmd'><p>Read data directly from HMD and construct a <code>vital</code> object for use in other functions</p></a></li>
<li><a href='#read_hmd_files'><p>Read data from files downloaded from HMD and construct a <code>vital</code> object for use in other functions</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#smooth_spline'><p>Functions to smooth demographic data</p></a></li>
<li><a href='#time_components'><p>Extract time components from a model</p></a></li>
<li><a href='#total_fertility_rate'><p>Compute total fertility rate from age-specific fertility rates</p></a></li>
<li><a href='#undo_pr'><p>Undo a product/ratio transformation</p></a></li>
<li><a href='#undo_sd'><p>Undo a mean/difference transformation</p></a></li>
<li><a href='#vital'><p>Create a vital object</p></a></li>
<li><a href='#vital_vars'><p>Return vital variables</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy Analysis Tools for Mortality, Fertility, Migration and
Population Data</td>
</tr>
<tr>
<td>Description:</td>
<td>Analysing vital statistics based on tools
    consistent with the tidyverse. Tools are provided for data visualization,
    lifetable calculations, computing net migration numbers, Lee-Carter
    modelling; functional data modelling and forecasting.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cobs, distributional, dplyr, fable, fabletools (&ge; 0.3.3),
future.apply, generics, ggplot2, HMDHFDplus (&ge; 2.0.3), mgcv,
patchwork, progressr, purrr, rlang, tibble, tidyr, tidyselect,
tsibble, vctrs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>demography, feasts, future, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pkg.robjhyndman.com/vital/">https://pkg.robjhyndman.com/vital/</a>,
<a href="https://github.com/robjhyndman/vital">https://github.com/robjhyndman/vital</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/robjhyndman/vital/issues">https://github.com/robjhyndman/vital/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-19 23:42:02 UTC; hyndman</td>
</tr>
<tr>
<td>Author:</td>
<td>Rob Hyndman <a href="https://orcid.org/0000-0002-2140-5352"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre, cph],
  Mitchell O'Hara-Wild
    <a href="https://orcid.org/0000-0001-6729-7695"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rob Hyndman &lt;Rob.Hyndman@monash.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-21 08:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='vital-package'>vital: Tidy Analysis Tools for Mortality, Fertility, Migration and Population Data</h2><span id='topic+vital-package'></span>

<h3>Description</h3>

<p>Analysing vital statistics based on tools consistent with the tidyverse. Tools are provided for data visualization, lifetable calculations, computing net migration numbers, Lee-Carter modelling; functional data modelling and forecasting.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Rob Hyndman <a href="mailto:Rob.Hyndman@monash.edu">Rob.Hyndman@monash.edu</a> (<a href="https://orcid.org/0000-0002-2140-5352">ORCID</a>) [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Mitchell O'Hara-Wild (<a href="https://orcid.org/0000-0001-6729-7695">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pkg.robjhyndman.com/vital/">https://pkg.robjhyndman.com/vital/</a>
</p>
</li>
<li> <p><a href="https://github.com/robjhyndman/vital">https://github.com/robjhyndman/vital</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/robjhyndman/vital/issues">https://github.com/robjhyndman/vital/issues</a>
</p>
</li></ul>


<hr>
<h2 id='age_components'>Extract age components from a model</h2><span id='topic+age_components'></span>

<h3>Description</h3>

<p>For a mable with a single model column, return the model components
that are indexed by age.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>age_components(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="age_components_+3A_object">object</code></td>
<td>
<p>A vital mable object with a single model column.</p>
</td></tr>
<tr><td><code id="age_components_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vital object containing the age components from the model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>aus_mortality |&gt;
  dplyr::filter(State == "Victoria", Sex == "female") |&gt;
  model(lee_carter = LC(log(Mortality))) |&gt;
  age_components()

</code></pre>

<hr>
<h2 id='as_vital'>Coerce to a vital object</h2><span id='topic+as_vital'></span><span id='topic+as_vital.demogdata'></span><span id='topic+as_vital.tbl_ts'></span><span id='topic+as_vital.data.frame'></span>

<h3>Description</h3>

<p>A vital object is a type of tsibble that contains vital statistics such as
births, deaths, and population counts, and mortality and fertility rates.
It is a tsibble with a special class that allows for special methods to be used.
The object has an attribute that stores variables names needed for some
functions, including age, sex, births, deaths and population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_vital(x, ...)

## S3 method for class 'demogdata'
as_vital(x, sex_groups = TRUE, ...)

## S3 method for class 'tbl_ts'
as_vital(
  x,
  .age = NULL,
  .sex = NULL,
  .deaths = NULL,
  .births = NULL,
  .population = NULL,
  reorder = FALSE,
  ...
)

## S3 method for class 'data.frame'
as_vital(
  x,
  key = NULL,
  index,
  .age = NULL,
  .sex = NULL,
  .deaths = NULL,
  .births = NULL,
  .population = NULL,
  reorder = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_vital_+3A_x">x</code></td>
<td>
<p>Object to be coerced to a vital format.</p>
</td></tr>
<tr><td><code id="as_vital_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="tsibble.html#topic+as-tsibble">tsibble::as_tsibble()</a></code></p>
</td></tr>
<tr><td><code id="as_vital_+3A_sex_groups">sex_groups</code></td>
<td>
<p>Logical variable indicating if the groups denote sexes</p>
</td></tr>
<tr><td><code id="as_vital_+3A_.age">.age</code></td>
<td>
<p>Character string with name of age variable</p>
</td></tr>
<tr><td><code id="as_vital_+3A_.sex">.sex</code></td>
<td>
<p>Character string with name of sex variable</p>
</td></tr>
<tr><td><code id="as_vital_+3A_.deaths">.deaths</code></td>
<td>
<p>Character string with name of deaths variable</p>
</td></tr>
<tr><td><code id="as_vital_+3A_.births">.births</code></td>
<td>
<p>Character string with name of births variable</p>
</td></tr>
<tr><td><code id="as_vital_+3A_.population">.population</code></td>
<td>
<p>Character string with name of population variable</p>
</td></tr>
<tr><td><code id="as_vital_+3A_reorder">reorder</code></td>
<td>
<p>Logical indicating if the variables should be reordered.</p>
</td></tr>
<tr><td><code id="as_vital_+3A_key">key</code></td>
<td>
<p>Variable(s) that uniquely determine time indices. NULL for empty key,
and <code><a href="base.html#topic+c">c()</a></code> for multiple variables. It works with tidy selector
(e.g. <code><a href="tidyselect.html#topic+starts_with">tidyselect::starts_with()</a></code>).</p>
</td></tr>
<tr><td><code id="as_vital_+3A_index">index</code></td>
<td>
<p>A variable to specify the time index variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tsibble with class <code>vital</code>.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>See Also</h3>

<p><code><a href="tsibble.html#topic+tsibble">tsibble::tsibble()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# coerce demogdata object to vital
as_vital(demography::fr.mort)

# create a vital with only age as a key
tibble::tibble(
  year = rep(2010:2015, 100),
  age = rep(0:99, each = 6),
  mx = runif(600, 0, 1)
) |&gt;
  as_vital(
    index = year,
    key = age,
    .age = "age"
  )
</code></pre>

<hr>
<h2 id='aus_fertility'>Australian fertility data</h2><span id='topic+aus_fertility'></span>

<h3>Description</h3>

<p><code>aus_fertility</code> is an annual <code>vital</code> object covering the years 1921-2002 with three values:
</p>

<table>
<tr>
 <td style="text-align: left;">
Fertility: </td><td style="text-align: left;"> Fertility rate per woman </td>
</tr>
<tr>
 <td style="text-align: left;">
Exposure:  </td><td style="text-align: left;"> Population of women at 30 June each year</td>
</tr>
<tr>
 <td style="text-align: left;">
Births:    </td><td style="text-align: left;"> Number of births </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Format</h3>

<p>Time series of class <code>vital</code>
</p>


<h3>Details</h3>

<p>The data is disaggregated using one key:
</p>

<table>
<tr>
 <td style="text-align: left;">
Age: </td><td style="text-align: left;"> Age of mother at time of birth</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The extreme age groups (15 and 49) also include a few younger and older mothers respectively.
</p>


<h3>Source</h3>

<p>Australian Human Mortality Database. <a href="https://aushd.org">https://aushd.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
aus_fertility
aus_fertility |&gt;
  autoplot(Fertility) +
  ylab("Fertility rate")

</code></pre>

<hr>
<h2 id='aus_mortality'>Australian mortality data</h2><span id='topic+aus_mortality'></span>

<h3>Description</h3>

<p><code>aus_mortality</code> is an annual <code>vital</code> with three values:
</p>

<table>
<tr>
 <td style="text-align: left;">
Mortality: </td><td style="text-align: left;"> Mortality rate </td>
</tr>
<tr>
 <td style="text-align: left;">
Exposure:  </td><td style="text-align: left;"> Population at 30 June each year</td>
</tr>
<tr>
 <td style="text-align: left;">
Deaths:    </td><td style="text-align: left;"> Number of deaths </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Format</h3>

<p>Time series of class <code>vital</code>
</p>


<h3>Details</h3>

<p>The data is disaggregated using four keys:
</p>

<table>
<tr>
 <td style="text-align: left;">
Age:   </td><td style="text-align: left;"> Age at death</td>
</tr>
<tr>
 <td style="text-align: left;">
Sex:   </td><td style="text-align: left;"> male or female </td>
</tr>
<tr>
 <td style="text-align: left;">
State: </td><td style="text-align: left;"> State of Australia</td>
</tr>
<tr>
 <td style="text-align: left;">
Code: </td><td style="text-align: left;"> Short code for state</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>The age group 100 also includes people who died aged older than 100.
The data up to 1970 were taken from the Australian Demographic Data Bank
(<a href="https://pkg.robjhyndman.com/addb/">https://pkg.robjhyndman.com/addb/</a>). From 1971, the data come from the
Australian Human Mortality Database (<a href="https://aushd.org">https://aushd.org</a>). There may be
some discontinuities introduced due to different methods being used to prepare
the data before and after 1971. Note that &quot;ACTOT&quot; includes both the ACT and overseas territories
and is only available up to 2003. The data exclusively from the ACT begins in 1971.
</p>


<h3>Source</h3>

<p>Australian Human Mortality Database
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
aus_mortality
aus_mortality |&gt;
  dplyr::filter(State=="Victoria", Sex != "total") |&gt;
  autoplot(Exposure) +
  ylab("Population at 30 June (thousands)")

</code></pre>

<hr>
<h2 id='autoplot.fbl_vtl_ts'>Plot forecasts from a vital model</h2><span id='topic+autoplot.fbl_vtl_ts'></span>

<h3>Description</h3>

<p>Produces a plot showing forecasts obtained from a model applied to a vital object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fbl_vtl_ts'
autoplot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autoplot.fbl_vtl_ts_+3A_object">object</code></td>
<td>
<p>A fable object obtained from a vital model.</p>
</td></tr>
<tr><td><code id="autoplot.fbl_vtl_ts_+3A_...">...</code></td>
<td>
<p>Further arguments ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
aus_mortality |&gt;
 dplyr::filter(State == "Victoria") |&gt;
 model(ave = FMEAN(Mortality)) |&gt;
 forecast(h = 10) |&gt;
 autoplot() + scale_y_log10()

</code></pre>

<hr>
<h2 id='autoplot.mdl_vtl_df'>Plot output from a vital model</h2><span id='topic+autoplot.mdl_vtl_df'></span>

<h3>Description</h3>

<p>Produces a plot showing a model applied to a vital object. This can be applied
to one type of model only. So use select() to choose the model column to plot.
If there are multiple keys, separate models will be identified by colour.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mdl_vtl_df'
autoplot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autoplot.mdl_vtl_df_+3A_object">object</code></td>
<td>
<p>A mable object obtained from a vital.</p>
</td></tr>
<tr><td><code id="autoplot.mdl_vtl_df_+3A_...">...</code></td>
<td>
<p>Further arguments ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
aus_mortality |&gt;
 dplyr::filter(State == "Victoria") |&gt;
 model(ave = FMEAN(Mortality)) |&gt;
 autoplot() + scale_y_log10()

</code></pre>

<hr>
<h2 id='autoplot.vital'>Rainbow plot of demographic data against age</h2><span id='topic+autoplot.vital'></span>

<h3>Description</h3>

<p>Produce rainbow plot (coloured by time index) of demographic variable against
against age.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'vital'
autoplot(object, .vars = NULL, age = age_var(object), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="autoplot.vital_+3A_object">object</code></td>
<td>
<p>A vital including an age variable and the variable you wish to plot.</p>
</td></tr>
<tr><td><code id="autoplot.vital_+3A_.vars">.vars</code></td>
<td>
<p>The name of the variable you wish to plot.</p>
</td></tr>
<tr><td><code id="autoplot.vital_+3A_age">age</code></td>
<td>
<p>The name of the age variable. If not supplied, the function will attempt to find it.</p>
</td></tr>
<tr><td><code id="autoplot.vital_+3A_...">...</code></td>
<td>
<p>Further arguments not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot2 object.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Hyndman, Rob J &amp; Shang, Han Lin (2010) Rainbow plots, bagplots,
and boxplots for functional data. <em>Journal of Computational and Graphical Statistics</em>,
19(1), 29-45. <a href="https://robjhyndman.com/publications/rainbow-fda/">https://robjhyndman.com/publications/rainbow-fda/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>autoplot(aus_fertility, Fertility)
</code></pre>

<hr>
<h2 id='collapse_ages'>Collapse upper ages into a single age group. Counts are summed while
rates are recomputed where possible.</h2><span id='topic+collapse_ages'></span>

<h3>Description</h3>

<p>Collapse upper ages into a single age group. Counts are summed while
rates are recomputed where possible.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>collapse_ages(.data, max_age = 100)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="collapse_ages_+3A_.data">.data</code></td>
<td>
<p>A vital object including an age variable</p>
</td></tr>
<tr><td><code id="collapse_ages_+3A_max_age">max_age</code></td>
<td>
<p>Maximum age to include in the collapsed age group.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the object includes deaths,
population and mortality rates, then deaths and population are summed and
mortality rates are recomputed as deaths/population. But if the object contains
mortality rates but not deaths and population, then the last rate remains
unchanged (and a warning is generated).
</p>


<h3>Value</h3>

<p>A vital object with the same variables as <code>.data</code>, but with the upper
ages collapsed into a single age group.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>aus_mortality |&gt;
 dplyr::filter(State == "Victoria", Sex == "female") |&gt;
 collapse_ages(max_age = 85)
</code></pre>

<hr>
<h2 id='FDM'>Functional data model</h2><span id='topic+FDM'></span><span id='topic+report.FDM'></span>

<h3>Description</h3>

<p>Functional data model of mortality or fertility rates as a function of age.
<code>FDM()</code> returns a functional data model applied to the formula's response
variable as a function of age.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FDM(formula, order = 6, ts_model_fn = fable::ARIMA, coherent = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FDM_+3A_formula">formula</code></td>
<td>
<p>Model specification.</p>
</td></tr>
<tr><td><code id="FDM_+3A_order">order</code></td>
<td>
<p>Number of principal components to fit.</p>
</td></tr>
<tr><td><code id="FDM_+3A_ts_model_fn">ts_model_fn</code></td>
<td>
<p>Univariate time series modelling function for the coefficients. Any
model that works with the fable package is ok. Default is <code><a href="fable.html#topic+ARIMA">fable::ARIMA()</a></code>.</p>
</td></tr>
<tr><td><code id="FDM_+3A_coherent">coherent</code></td>
<td>
<p>If TRUE, fitted models are stationary, other than for the case of
a key variable taking the value <code>geometric_mean</code>. This is designed to work with
vitals produced using <code><a href="#topic+make_pr">make_pr</a>()</code>. Default is FALSE. It only works
when <code>ts_model_fn</code> is <code><a href="fable.html#topic+ARIMA">ARIMA</a>()</code>.</p>
</td></tr>
<tr><td><code id="FDM_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A model specification.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Hyndman, R. J., and Ullah, S. (2007) Robust forecasting of
mortality and fertility rates: a functional data approach.
<em>Computational Statistics &amp; Data Analysis</em>, 5, 4942-4956.
<a href="https://robjhyndman.com/publications/funcfor/">https://robjhyndman.com/publications/funcfor/</a>
Hyndman, R. J., Booth, H., &amp; Yasmeen, F. (2013). Coherent mortality
forecasting: the product-ratio method with functional time series models.
<em>Demography</em>, 50(1), 261-283.
<a href="https://robjhyndman.com/publications/coherentfdm/">https://robjhyndman.com/publications/coherentfdm/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hu &lt;- norway_mortality |&gt;
  dplyr::filter(Sex == "Female", Year &gt; 2010) |&gt;
  smooth_mortality(Mortality) |&gt;
  model(hyndman_ullah = FDM(log(.smooth)))
report(hu)
autoplot(hu)
</code></pre>

<hr>
<h2 id='FMEAN'>Functional mean model</h2><span id='topic+FMEAN'></span><span id='topic+report.FMEAN'></span>

<h3>Description</h3>

<p><code>FMEAN()</code> returns an iid functional model applied to the formula's response variable as a function of age.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FMEAN(formula, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FMEAN_+3A_formula">formula</code></td>
<td>
<p>Model specification.</p>
</td></tr>
<tr><td><code id="FMEAN_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A model specification.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fmean &lt;- aus_mortality |&gt;
  dplyr::filter(State == "Victoria", Sex == "female") |&gt;
  model(mean = FMEAN(Mortality))
report(fmean)
autoplot(fmean) + ggplot2::scale_y_log10()
</code></pre>

<hr>
<h2 id='FNAIVE'>Functional naive model</h2><span id='topic+FNAIVE'></span><span id='topic+report.FNAIVE'></span>

<h3>Description</h3>

<p><code>FNAIVE()</code> returns an random walk functional model applied to the formula's response variable as a function of age.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FNAIVE(formula, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="FNAIVE_+3A_formula">formula</code></td>
<td>
<p>Model specification.</p>
</td></tr>
<tr><td><code id="FNAIVE_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A model specification.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fnaive &lt;- aus_mortality |&gt;
  dplyr::filter(State == "Victoria", Sex == "female") |&gt;
  model(fit = FNAIVE(Mortality))
report(fnaive)
autoplot(fnaive) + ggplot2::scale_y_log10()
</code></pre>

<hr>
<h2 id='forecast.FDM'>Produce forecasts from a vital model</h2><span id='topic+forecast.FDM'></span><span id='topic+forecast.LC'></span><span id='topic+forecast.FMEAN'></span><span id='topic+forecast.FNAIVE'></span><span id='topic+forecast.mdl_vtl_df'></span>

<h3>Description</h3>

<p>The forecast function allows you to produce future predictions of a vital
model, where the response is a function of age.
The forecasts returned contain both point forecasts and their distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'FDM'
forecast(
  object,
  new_data = NULL,
  h = NULL,
  point_forecast = list(.mean = mean),
  simulate = FALSE,
  bootstrap = FALSE,
  times = 5000,
  ...
)

## S3 method for class 'LC'
forecast(
  object,
  new_data = NULL,
  h = NULL,
  point_forecast = list(.mean = mean),
  simulate = FALSE,
  bootstrap = FALSE,
  times = 5000,
  ...
)

## S3 method for class 'FMEAN'
forecast(
  object,
  new_data = NULL,
  h = NULL,
  point_forecast = list(.mean = mean),
  simulate = FALSE,
  bootstrap = FALSE,
  times = 5000,
  ...
)

## S3 method for class 'FNAIVE'
forecast(
  object,
  new_data = NULL,
  h = NULL,
  point_forecast = list(.mean = mean),
  simulate = FALSE,
  bootstrap = FALSE,
  times = 5000,
  ...
)

## S3 method for class 'mdl_vtl_df'
forecast(
  object,
  new_data = NULL,
  h = NULL,
  point_forecast = list(.mean = mean),
  simulate = FALSE,
  bootstrap = FALSE,
  times = 5000,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="forecast.FDM_+3A_object">object</code></td>
<td>
<p>A mable containing one or more models.</p>
</td></tr>
<tr><td><code id="forecast.FDM_+3A_new_data">new_data</code></td>
<td>
<p>A <code>tsibble</code> containing future information used to forecast.</p>
</td></tr>
<tr><td><code id="forecast.FDM_+3A_h">h</code></td>
<td>
<p>Number of time steps ahead to forecast. This can be used instead of <code>new_data</code>
when there are no covariates in the model. It is ignored if <code>new_data</code> is provided.</p>
</td></tr>
<tr><td><code id="forecast.FDM_+3A_point_forecast">point_forecast</code></td>
<td>
<p>A list of functions used to compute point forecasts from the forecast distribution.</p>
</td></tr>
<tr><td><code id="forecast.FDM_+3A_simulate">simulate</code></td>
<td>
<p>If  <code>TRUE</code>, then forecast distributions are computed using simulation from a parametric model.</p>
</td></tr>
<tr><td><code id="forecast.FDM_+3A_bootstrap">bootstrap</code></td>
<td>
<p>If <code>TRUE</code>, then forecast distributions are computed using simulation with resampling.</p>
</td></tr>
<tr><td><code id="forecast.FDM_+3A_times">times</code></td>
<td>
<p>The number of sample paths to use in estimating the forecast distribution when <code>bootstrap = TRUE</code>.</p>
</td></tr>
<tr><td><code id="forecast.FDM_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the specific model method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A fable containing the following columns:
</p>

<ul>
<li> <p><code>.model</code>: The name of the model used to obtain the forecast. Taken from
the column names of models in the provided mable.
</p>
</li>
<li><p> The forecast distribution. The name of this column will be the same as the
dependent variable in the model(s). If multiple dependent variables exist,
it will be named <code>.distribution</code>.
</p>
</li>
<li><p> Point forecasts computed from the distribution using the functions in the
<code>point_forecast</code> argument.
</p>
</li>
<li><p> All columns in <code>new_data</code>, excluding those whose names conflict with the
above.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Rob J Hyndman and Mitchell O'Hara-Wild
</p>


<h3>Examples</h3>

<pre><code class='language-R'>aus_mortality |&gt;
 dplyr::filter(State == "Victoria", Sex == "female") |&gt;
 model(naive = FNAIVE(Mortality)) |&gt;
 forecast(h = 10)

</code></pre>

<hr>
<h2 id='generate.mdl_vtl_df'>Generate responses from a mable</h2><span id='topic+generate.mdl_vtl_df'></span>

<h3>Description</h3>

<p>Use a fitted model to simulate future data with similar
behaviour to the response.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mdl_vtl_df'
generate(x, new_data = NULL, h = NULL, bootstrap = FALSE, times = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate.mdl_vtl_df_+3A_x">x</code></td>
<td>
<p>A mable.</p>
</td></tr>
<tr><td><code id="generate.mdl_vtl_df_+3A_new_data">new_data</code></td>
<td>
<p>Future data needed for generation (should include the time index and exogenous regressors)</p>
</td></tr>
<tr><td><code id="generate.mdl_vtl_df_+3A_h">h</code></td>
<td>
<p>The simulation horizon (can be used instead of <code>new_data</code> for regular time series with no exogenous regressors).</p>
</td></tr>
<tr><td><code id="generate.mdl_vtl_df_+3A_bootstrap">bootstrap</code></td>
<td>
<p>If <code>TRUE</code>, then forecast distributions are computed using simulation with resampled errors.</p>
</td></tr>
<tr><td><code id="generate.mdl_vtl_df_+3A_times">times</code></td>
<td>
<p>The number of replications.</p>
</td></tr>
<tr><td><code id="generate.mdl_vtl_df_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Innovations are sampled by the model's assumed error distribution.
If <code>bootstrap</code> is <code>TRUE</code>, innovations will be sampled from the model's residuals.
</p>


<h3>Value</h3>

<p>A vital object with simulated values.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman and Mitchell O'Hara-Wild
</p>


<h3>Examples</h3>

<pre><code class='language-R'>aus_mortality |&gt;
  dplyr::filter(State == "Victoria") |&gt;
  model(lc = LC(Mortality)) |&gt;
  generate(times = 3, bootstrap = TRUE)

</code></pre>

<hr>
<h2 id='interpolate.mdl_vtl_df'>Interpolate missing values using a vital model</h2><span id='topic+interpolate.mdl_vtl_df'></span>

<h3>Description</h3>

<p>Uses a fitted vital model to interpolate missing values from a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mdl_vtl_df'
interpolate(object, new_data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interpolate.mdl_vtl_df_+3A_object">object</code></td>
<td>
<p>A mable containing a single model column.</p>
</td></tr>
<tr><td><code id="interpolate.mdl_vtl_df_+3A_new_data">new_data</code></td>
<td>
<p>A dataset with the same structure as the data used to fit the model.</p>
</td></tr>
<tr><td><code id="interpolate.mdl_vtl_df_+3A_...">...</code></td>
<td>
<p>Other arguments passed to interpolate methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vital object with missing values interpolated.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>act_female &lt;- aus_mortality |&gt;
 dplyr::filter(Code == "ACTOT", Sex == "female")
act_female |&gt;
 model(mean = FMEAN(Mortality)) |&gt;
 interpolate(act_female)
</code></pre>

<hr>
<h2 id='LC'>Lee-Carter model</h2><span id='topic+LC'></span><span id='topic+report.LC'></span>

<h3>Description</h3>

<p>Lee-Carter model of mortality or fertility rates.
<code>LC()</code> returns a Lee-Carter model applied to the formula's response
variable as a function of age. This produces a standard Lee-Carter model by
default, although many other options are available. Missing rates are set to
the geometric mean rate for the relevant age.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LC(
  formula,
  adjust = c("dt", "dxt", "e0", "none"),
  jump_choice = c("fit", "actual"),
  scale = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="LC_+3A_formula">formula</code></td>
<td>
<p>Model specification. It should include the log of the variable to be modelled.
See the examples.</p>
</td></tr>
<tr><td><code id="LC_+3A_adjust">adjust</code></td>
<td>
<p>method to use for adjustment of coefficients <code class="reqn">k_t</code>.
Possibilities are
<code>"dt"</code> (Lee-Carter method, the default),
<code>"dxt"</code> (BMS method),
<code>"e0"</code> (Lee-Miller method based on life expectancy) and
<code>"none"</code>.</p>
</td></tr>
<tr><td><code id="LC_+3A_jump_choice">jump_choice</code></td>
<td>
<p>Method used for computation of jump-off point for forecasts.
Possibilities: <code>"actual"</code> (use actual rates from final year) and
<code>"fit"</code> (use fitted rates).
The original Lee-Carter method used <code>"fit"</code> (the default), but Lee and Miller (2001)
and most other authors prefer <code>"actual"</code>.</p>
</td></tr>
<tr><td><code id="LC_+3A_scale">scale</code></td>
<td>
<p>If TRUE, <code>bx</code> and <code>kt</code> are rescaled so that <code>kt</code> has drift parameter = 1.</p>
</td></tr>
<tr><td><code id="LC_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A model specification.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Basellini, U, Camarda, C G, and Booth, H (2022) Thirty years on:
A review of the Lee-Carter method for forecasting mortality.
<em>International Journal of Forecasting</em>, 39(3), 1033-1049.
</p>
<p>Booth, H., Maindonald, J., and Smith, L. (2002) Applying Lee-Carter
under conditions of variable mortality decline. <em>Population Studies</em>,
<strong>56</strong>, 325-336.
</p>
<p>Lee, R D, and Carter, L R (1992) Modeling and forecasting US mortality.
<em>Journal of the American Statistical Association</em>, 87, 659-671.
</p>
<p>Lee R D, and Miller T (2001). Evaluating the performance of the Lee-Carter
method for forecasting mortality. <em>Demography</em>, 38(4), 537–549.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lc &lt;- aus_mortality |&gt;
  dplyr::filter(State == "Victoria", Sex == "female") |&gt;
  model(lee_carter = LC(log(Mortality)))
report(lc)
autoplot(lc)
</code></pre>

<hr>
<h2 id='life_expectancy'>Compute life expectancy from age-specific mortality rates</h2><span id='topic+life_expectancy'></span>

<h3>Description</h3>

<p>Returns remaining life expectancy at a given age (0 by default).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>life_expectancy(.data, from_age = 0, mortality)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="life_expectancy_+3A_.data">.data</code></td>
<td>
<p>A vital object including an age variable and a variable containing mortality rates.</p>
</td></tr>
<tr><td><code id="life_expectancy_+3A_from_age">from_age</code></td>
<td>
<p>Age at which life expectancy to be calculated. Either a scalar or a vector of ages.</p>
</td></tr>
<tr><td><code id="life_expectancy_+3A_mortality">mortality</code></td>
<td>
<p>Variable in <code>.data</code> containing Mortality rates (mx). If omitted, the variable with name  <code>mx</code>, <code>Mortality</code> or <code>Rate</code> will be used (not case sensitive).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>vital</code> object with life expectancy in column <code>ex</code>.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Chiang CL. (1984) <em>The life table and its applications</em>.
Robert E Krieger Publishing Company: Malabar.
</p>
<p>Keyfitz, N, and Caswell, H. (2005) <em>Applied Mathematical Demography</em>,
Springer-Verlag: New York.
</p>
<p>Preston, S.H., Heuveline, P., and Guillot, M. (2001)
<em>Demography: measuring and modeling population processes</em>. Blackwell
</p>


<h3>See Also</h3>

<p><code><a href="#topic+life_table">life_table()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute Victorian life expectancy for females over time
aus_mortality |&gt;
  dplyr::filter(Code == "VIC", Sex == "female") |&gt;
  life_expectancy()
</code></pre>

<hr>
<h2 id='life_table'>Compute period lifetables from age-specific mortality rates</h2><span id='topic+life_table'></span>

<h3>Description</h3>

<p>All available years and ages are included in the tables.
$qx = mx/(1 + ((1-ax) * mx))$ as per Chiang (1984).
Warning: the code has only been tested for data based on single-year age groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>life_table(.data, mortality)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="life_table_+3A_.data">.data</code></td>
<td>
<p>A <code>vital</code> including an age variable and a variable containing mortality rates.</p>
</td></tr>
<tr><td><code id="life_table_+3A_mortality">mortality</code></td>
<td>
<p>Variable in <code>.data</code> containing Mortality rates (mx). If omitted, the variable with name  <code>mx</code>, <code>Mortality</code> or <code>Rate</code> will be used (not case sensitive).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vital object containing the index, keys, and the new life table variables <code>mx</code>, <code>qx</code>, <code>lx</code>, <code>dx</code>, <code>Lx</code>, <code>Tx</code> and <code>ex</code>.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Chiang CL. (1984) <em>The life table and its applications</em>. Robert E Krieger Publishing Company: Malabar.
</p>
<p>Keyfitz, N, and Caswell, H. (2005) <em>Applied mathematical demography</em>, Springer-Verlag: New York.
</p>
<p>Preston, S.H., Heuveline, P., and Guillot, M. (2001) <em>Demography: measuring and modeling population processes</em>. Blackwell
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute Victorian life table for females in 2003
aus_mortality |&gt;
  dplyr::filter(Code == "VIC", Sex == "female", Year == 2003) |&gt;
  life_table()
</code></pre>

<hr>
<h2 id='make_pr'>Do a product/ratio transformation</h2><span id='topic+make_pr'></span>

<h3>Description</h3>

<p>Make a new vital containing products and ratios of a measured variable by a
key variable. The most common use case of this function is for mortality rates by sex.
That is, we want to compute the geometric mean of age-specific mortality rates, along
with the ratio of mortality to the geometric mean for each sex. The latter
are equal to the male/female and female/male ratios of mortality rates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_pr(.data, .var, key = Sex)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_pr_+3A_.data">.data</code></td>
<td>
<p>A vital object</p>
</td></tr>
<tr><td><code id="make_pr_+3A_.var">.var</code></td>
<td>
<p>A bare variable name of the measured variable to use.</p>
</td></tr>
<tr><td><code id="make_pr_+3A_key">key</code></td>
<td>
<p>A bare variable name specifying the key variable to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When a measured variable takes value 0, it is set to 10^-6 to avoid
infinite values in the ratio.
</p>


<h3>Value</h3>

<p>A vital object
</p>


<h3>References</h3>

<p>Hyndman, R.J., Booth, H., &amp; Yasmeen, F. (2013). Coherent
mortality forecasting: the product-ratio method with functional time series
models. <em>Demography</em>, 50(1), 261-283.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pr &lt;- aus_mortality |&gt;
  dplyr::filter(Year &gt; 2015, Sex != "total") |&gt;
  make_pr(Mortality)
pr |&gt;
  dplyr::filter(Sex == "geometric_mean", Code == "VIC") |&gt;
  autoplot(Mortality) +
  ggplot2::scale_y_log10()
</code></pre>

<hr>
<h2 id='make_sd'>Do a sum/difference transformation</h2><span id='topic+make_sd'></span>

<h3>Description</h3>

<p>Make a new vital containing means and differences of a measured variable by a
key variable. The most common use case of this function is for migration numbers by sex.
That is, we want to compute the age-specific mean migration, along
with the difference of migration to the mean for each sex. The latter
are equal to half the male/female and female/male differences of migration numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_sd(.data, .var, key = Sex)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_sd_+3A_.data">.data</code></td>
<td>
<p>A vital object</p>
</td></tr>
<tr><td><code id="make_sd_+3A_.var">.var</code></td>
<td>
<p>A bare variable name of the measured variable to use.</p>
</td></tr>
<tr><td><code id="make_sd_+3A_key">key</code></td>
<td>
<p>A bare variable name specifying the key variable to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vital object
</p>


<h3>References</h3>

<p>Hyndman, R.J., Booth, H., &amp; Yasmeen, F. (2013). Coherent
mortality forecasting: the product-ratio method with functional time series
models. <em>Demography</em>, 50(1), 261-283.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mig &lt;- net_migration(norway_mortality, norway_births) |&gt;
  dplyr::filter(Sex != "Total")
sd &lt;- mig |&gt;
  make_sd(NetMigration)
sd |&gt;
  autoplot(NetMigration)
</code></pre>

<hr>
<h2 id='model.vital'>Estimate models for vital data</h2><span id='topic+model.vital'></span>

<h3>Description</h3>

<p>Trains specified model definition(s) on a dataset. This function will
estimate the a set of model definitions (passed via <code>...</code>) to each series
within <code>.data</code> (as identified by the key structure). The result will be a
mable (a model table), which neatly stores the estimated models in a tabular
structure. Rows of the data identify different series within the data, and
each model column contains all models from that model definition. Each cell
in the mable identifies a single model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'vital'
model(.data, ..., .safely = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model.vital_+3A_.data">.data</code></td>
<td>
<p>A vital object including an age variable.</p>
</td></tr>
<tr><td><code id="model.vital_+3A_...">...</code></td>
<td>
<p>Definitions for the models to be used. All models must share the
same response variable.</p>
</td></tr>
<tr><td><code id="model.vital_+3A_.safely">.safely</code></td>
<td>
<p>If a model encounters an error, rather than aborting the process
a <a href="fabletools.html#topic+null_model">NULL model</a> will be returned instead. This allows for an error
to occur when computing many models, without losing the results of the successful models.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mable containing the fitted models.
</p>


<h3>Parallel</h3>

<p>It is possible to estimate models in parallel using the
<a href="https://cran.r-project.org/package=future">future</a> package. By specifying a
<code><a href="future.html#topic+plan">future::plan()</a></code> before estimating the models, they will be computed
according to that plan.
</p>


<h3>Progress</h3>

<p>Progress on model estimation can be obtained by wrapping the code with
<code>progressr::with_progress()</code>. Further customisation on how progress is
reported can be controlled using the <code>progressr</code> package.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman and Mitchell O'Hara-Wild
</p>


<h3>Examples</h3>

<pre><code class='language-R'>aus_mortality |&gt;
  dplyr::filter(State == "Victoria", Sex == "female") |&gt;
  model(
    naive = FNAIVE(Mortality),
    mean = FMEAN(Mortality)
  )
</code></pre>

<hr>
<h2 id='net_migration'>Calculate net migration from a vital object</h2><span id='topic+net_migration'></span>

<h3>Description</h3>

<p>Calculate net migration from a vital object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>net_migration(deaths, births)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="net_migration_+3A_deaths">deaths</code></td>
<td>
<p>A vital object containing at least a time index, age,
population at 1 January, and death rates.</p>
</td></tr>
<tr><td><code id="net_migration_+3A_births">births</code></td>
<td>
<p>A vital object containing at least a time index and number of births per time period.
It is assumed that
the population variable is the same as in the deaths object, and that the same keys other than age
are present in both objects.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vital object containing population, estimated deaths (not actual deaths) and net migration,
using the formula Net Migration = Population - lag(Population cohort) - Deaths + Births.
Births are returned as Population at Age -1, and deaths are estimated from the life table
</p>


<h3>References</h3>

<p>Hyndman and Booth (2008) Stochastic population forecasts using functional data
models for mortality, fertility and migration. <em>International Journal of Forecasting</em>, 24(3), 323-342.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>net_migration(norway_mortality, norway_births)
## Not run: 
# Files downloaded from the [Human Mortality Database](https://mortality.org)
deaths &lt;- read_hmd_files(c("Population.txt", "Mx_1x1.txt"))
births &lt;- read_hmd_file("Births.txt")
mig &lt;- net_migration(deaths, births)

## End(Not run)
</code></pre>

<hr>
<h2 id='norway_births'>Norwegian mortality and births data</h2><span id='topic+norway_births'></span><span id='topic+norway_fertility'></span><span id='topic+norway_mortality'></span>

<h3>Description</h3>

<p><code>norway_births</code> is an annual <code>vital</code> object covering the years 1900-2022, as provided
by the Human Mortality Database on 21 April 2024.
</p>
<p><code>norway_fertality</code> is an annual <code>vital</code> covering the years 1967-2022, as provided
by the Human Fertility Database on 21 April 2024.
</p>
<p><code>norway_mortality</code> is an annual <code>vital</code> covering the years 1900-2022, as provided
by the Human Mortality Database on 21 April 2024.
</p>


<h3>Format</h3>

<p>Time series of class <code>vital</code>
</p>


<h3>Source</h3>

<p>Human Mortality Database <a href="https://mortality.org">https://mortality.org</a>
</p>
<p>Human Fertility Database <a href="https://www.humanfertility.org">https://www.humanfertility.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
# Births
norway_births
norway_births |&gt;
  autoplot(Births)
# Deaths
norway_mortality
norway_mortality |&gt;
  dplyr::filter(Age &lt; 85, Year &lt; 1950, Sex != "Total") |&gt;
  autoplot(Mortality) +
  scale_y_log10()
# Fertility
norway_fertility
norway_fertility |&gt;
  autoplot(Fertility)

</code></pre>

<hr>
<h2 id='read_hfd'>Read data directly from HFD and construct a <code>vital</code> object for use in other functions</h2><span id='topic+read_hfd'></span>

<h3>Description</h3>

<p><code>read_hfd</code> reads single-year and single-age data from the Human Fertility Database (HFD
<a href="https://www.humanfertility.org">https://www.humanfertility.org</a>) and constructs a <code>vital</code> object suitable
for use in other functions. This function uses <code><a href="HMDHFDplus.html#topic+readHFDweb">HMDHFDplus::readHFDweb()</a></code>
to download the required data. It is designed to handle age-specific fertility rates.
It may be extended to handle other types of data in the future.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_hfd(country, username, password, variables = "asfrRR")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_hfd_+3A_country">country</code></td>
<td>
<p>Directory abbreviation from the HMD. For instance, Norway = &quot;NOR&quot;.</p>
</td></tr>
<tr><td><code id="read_hfd_+3A_username">username</code></td>
<td>
<p>HFD username (case-sensitive)</p>
</td></tr>
<tr><td><code id="read_hfd_+3A_password">password</code></td>
<td>
<p>HFD password (case-sensitive)</p>
</td></tr>
<tr><td><code id="read_hfd_+3A_variables">variables</code></td>
<td>
<p>List of variables to download from the HFD. By default, the
age-specific fertility rate (asfrRR) is downloaded.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to read the data, users are required to create an account with the
HFD website (<a href="https://www.humanfertility.org">https://www.humanfertility.org</a>), and obtain a valid username and password.
</p>


<h3>Value</h3>

<p><code>read_hfd</code> returns a <code>vital</code> object combining the downloaded data.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
norway &lt;- read_hfd(
  country = "NOR",
  username = "Nora.Weigh@mymail.com",
  password = "FF!5xeEFa6"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='read_hfd_files'>Read data from files downloaded from HFD and construct a <code>vital</code> object for use in other functions</h2><span id='topic+read_hfd_files'></span>

<h3>Description</h3>

<p><code>read_hfd_files</code> reads single-year and single-age data from files downloaded from the Human Mortality
Database (HFD <a href="https://www.humanfertility.org">https://www.humanfertility.org</a>) and constructs a <code>vital</code> object suitable
for use in other functions. This function uses <code><a href="HMDHFDplus.html#topic+readHFD">HMDHFDplus::readHFD()</a></code>
to parse the files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_hfd_files(files)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_hfd_files_+3A_files">files</code></td>
<td>
<p>Vector of file names containing data downloaded from the HFD.
The file names are used to determine what they contain. If the file names are
as per the HFD, then the function will automatically determine the contents.
If it is unclear what a file contains, the columns will be named according to the filename.
If the data contains a mixture of age-specific and non-age-specific variables,
then the non-age-specific data will be repeated for each age. If you have HMD files
for many countries, all with the same names, then you should put them in separate
folders to avoid confusion, and to save changing all the filenames.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>read_hfd_files</code> returns a <code>vital</code> object combining the downloaded data.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# File downloaded from the [Human Fertility Database](https://www.humanfertility.org)
fertility &lt;- read_hfd_files("NORasfrRR.txt")

## End(Not run)
</code></pre>

<hr>
<h2 id='read_hmd'>Read data directly from HMD and construct a <code>vital</code> object for use in other functions</h2><span id='topic+read_hmd'></span>

<h3>Description</h3>

<p><code>read_hmd</code> reads single-year and single-age data from the Human Mortality Database (HMD
<a href="https://www.mortality.org">https://www.mortality.org</a>) and constructs a <code>vital</code> object suitable
for use in other functions. This function uses <code><a href="HMDHFDplus.html#topic+readHMDweb">HMDHFDplus::readHMDweb()</a></code>
to download the required data. It is designed to handle Deaths, Population,
Exposure, Death Rates and Births. By default, Deaths, Population, Exposure
and Death Rates are downloaded. It is better to handle Births separately as
they are not age-specific.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_hmd(
  country,
  username,
  password,
  variables = c("Deaths", "Exposures", "Population", "Mx")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_hmd_+3A_country">country</code></td>
<td>
<p>Directory abbreviation from the HMD. For instance, Australia = &quot;AUS&quot;.</p>
</td></tr>
<tr><td><code id="read_hmd_+3A_username">username</code></td>
<td>
<p>HMD username (case-sensitive)</p>
</td></tr>
<tr><td><code id="read_hmd_+3A_password">password</code></td>
<td>
<p>HMD password (case-sensitive)</p>
</td></tr>
<tr><td><code id="read_hmd_+3A_variables">variables</code></td>
<td>
<p>List of variables to download from the HMD. If the data
contains a mixture of age-specific and non-age-specific variables, then
the non-age-specific data will be repeated for each age.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In order to read the data, users are required to create an account with the
HMD website (<a href="https://www.mortality.org">https://www.mortality.org</a>), and obtain a valid username and password.
</p>


<h3>Value</h3>

<p><code>read_hmd</code> returns a <code>vital</code> object combining the downloaded data.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
norway &lt;- read_hmd(
  country = "NOR",
  username = "Nora.Weigh@mymail.com",
  password = "FF!5xeEFa6"
)
norway_births &lt;- read_hmd(
  country = "NOR",
  username = "Nora.Weigh@mymail.com",
  password = "FF!5xeEFa6",
  variables = "Births"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='read_hmd_files'>Read data from files downloaded from HMD and construct a <code>vital</code> object for use in other functions</h2><span id='topic+read_hmd_files'></span>

<h3>Description</h3>

<p><code>read_hmd_files</code> reads single-year and single-age data from files downloaded from the Human Mortality
Database (HMD <a href="https://www.mortality.org">https://www.mortality.org</a>) and constructs a <code>vital</code> object suitable
for use in other functions. This function uses <code><a href="HMDHFDplus.html#topic+readHMD">HMDHFDplus::readHMD()</a></code>
to parse the files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_hmd_files(files)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_hmd_files_+3A_files">files</code></td>
<td>
<p>Vector of file names containing data downloaded from the HMD.
The file names are used to determine what they contain. If the file names are
as per the HMD, then the function will automatically determine the contents.
If it is unclear what a file contains, the columns will be named according to the filename.
If the data contains a mixture of age-specific and non-age-specific variables,
then the non-age-specific data will be repeated for each age. If you have HMD files
for many countries, all with the same names, then you should put them in separate
folders to avoid confusion, and to save changing all the filenames.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>read_hmd_files</code> returns a <code>vital</code> object combining the downloaded data.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Files downloaded from the [Human Mortality Database](https://mortality.org)
mortality &lt;- read_hmd_files(
  c("Deaths_1x1.txt", "Exposures_1x1.txt", "Population.txt", "Mx_1x1.txt")
)
births &lt;- read_hmd_files("Births.txt")

## End(Not run)
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+autoplot'></span><span id='topic+forecast'></span><span id='topic+generate'></span><span id='topic+model'></span><span id='topic+report'></span><span id='topic+interpolate'></span><span id='topic+tidy'></span><span id='topic+augment'></span><span id='topic+estimate'></span><span id='topic+glance'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>fabletools</dt><dd><p><code><a href="fabletools.html#topic+reexports">augment</a></code>, <code><a href="fabletools.html#topic+estimate">estimate</a></code>, <code><a href="fabletools.html#topic+reexports">glance</a></code>, <code><a href="fabletools.html#topic+reexports">interpolate</a></code>, <code><a href="fabletools.html#topic+model">model</a></code>, <code><a href="fabletools.html#topic+report">report</a></code>, <code><a href="fabletools.html#topic+reexports">tidy</a></code></p>
</dd>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+forecast">forecast</a></code>, <code><a href="generics.html#topic+generate">generate</a></code></p>
</dd>
<dt>ggplot2</dt><dd><p><code><a href="ggplot2.html#topic+autoplot">autoplot</a></code></p>
</dd>
</dl>

<hr>
<h2 id='smooth_spline'>Functions to smooth demographic data</h2><span id='topic+smooth_spline'></span><span id='topic+smooth_mortality'></span><span id='topic+smooth_fertility'></span><span id='topic+smooth_loess'></span>

<h3>Description</h3>

<p>These smoothing functions allow smoothing of a variable in a vital object.
The vital object is returned along with some additional columns containing
information about the smoothed variable: usually <code>.smooth</code> containing the
smoothed values, and <code>.smooth_se</code> containing the corresponding standard errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smooth_spline(.data, .var, age_spacing = 1, k = -1)

smooth_mortality(.data, .var, age_spacing = 1, b = 65, power = 0.4, k = 30)

smooth_fertility(.data, .var, age_spacing = 1, lambda = 1e-10)

smooth_loess(.data, .var, age_spacing = 1, span = 0.2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="smooth_spline_+3A_.data">.data</code></td>
<td>
<p>A vital object</p>
</td></tr>
<tr><td><code id="smooth_spline_+3A_.var">.var</code></td>
<td>
<p>name of variable to smooth</p>
</td></tr>
<tr><td><code id="smooth_spline_+3A_age_spacing">age_spacing</code></td>
<td>
<p>Spacing between ages for smoothed vital. Default is 1.</p>
</td></tr>
<tr><td><code id="smooth_spline_+3A_k">k</code></td>
<td>
<p>Number of knots to use for penalized regression spline estimate.</p>
</td></tr>
<tr><td><code id="smooth_spline_+3A_b">b</code></td>
<td>
<p>Lower age for monotonicity. Above this, the smooth curve is assumed to be monotonically increasing.</p>
</td></tr>
<tr><td><code id="smooth_spline_+3A_power">power</code></td>
<td>
<p>Power transformation for age variable before smoothing. Default is 0.4 (for mortality data).</p>
</td></tr>
<tr><td><code id="smooth_spline_+3A_lambda">lambda</code></td>
<td>
<p>Penalty for constrained regression spline.</p>
</td></tr>
<tr><td><code id="smooth_spline_+3A_span">span</code></td>
<td>
<p>Span for loess smooth.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>smooth_mortality()</code> use penalized regression splines applied to log mortality
with a monotonicity constraint above age <code>b</code>. The methodology is based on Wood (1994).
<code>smooth_fertility()</code> uses weighted regression B-splines with a concavity constraint,
based on He and Ng (1999). The function <code>smooth_loess()</code> uses locally quadratic
regression, while <code>smooth_spline()</code> uses penalized regression splines.
</p>


<h3>Value</h3>

<p>vital with added columns containing smoothed values and their standard errors
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Hyndman, R.J., and Ullah, S. (2007) Robust forecasting of
mortality and fertility rates: a functional data approach.
<em>Computational Statistics &amp; Data Analysis</em>, 51, 4942-4956.
<a href="https://robjhyndman.com/publications/funcfor/">https://robjhyndman.com/publications/funcfor/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
aus_mortality |&gt;
	filter(State == "Victoria", Sex == "female", Year &gt; 2000) |&gt;
	smooth_mortality(Mortality)
aus_fertility |&gt;
 filter(Year &gt; 2000) |&gt;
	smooth_fertility(Fertility)
</code></pre>

<hr>
<h2 id='time_components'>Extract time components from a model</h2><span id='topic+time_components'></span>

<h3>Description</h3>

<p>For a mable with a single model column, return the model components
that are indexed by time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_components(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_components_+3A_object">object</code></td>
<td>
<p>A vital mable object with a single model column.</p>
</td></tr>
<tr><td><code id="time_components_+3A_...">...</code></td>
<td>
<p>Not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tsibble object containing the time components from the model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>aus_mortality |&gt;
  dplyr::filter(State == "Victoria", Sex == "female") |&gt;
  model(lee_carter = LC(log(Mortality))) |&gt;
  time_components()

</code></pre>

<hr>
<h2 id='total_fertility_rate'>Compute total fertility rate from age-specific fertility rates</h2><span id='topic+total_fertility_rate'></span>

<h3>Description</h3>

<p>Total fertility rate is the expected number of babies per woman in a life-time
given the fertility rate at each age of a woman's life.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>total_fertility_rate(.data, fertility)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="total_fertility_rate_+3A_.data">.data</code></td>
<td>
<p>A vital object including an age variable and a variable containing fertility rates.</p>
</td></tr>
<tr><td><code id="total_fertility_rate_+3A_fertility">fertility</code></td>
<td>
<p>Variable in <code>.data</code> containing fertility rates. If omitted, the variable with name  <code>fx</code>, <code>Fertility</code> or <code>Rate</code> will be used (not case sensitive).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vital object with total fertility in column <code>tfr</code>.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute Australian total fertility rates over time
aus_fertility |&gt;
  total_fertility_rate()
</code></pre>

<hr>
<h2 id='undo_pr'>Undo a product/ratio transformation</h2><span id='topic+undo_pr'></span>

<h3>Description</h3>

<p>Make a new vital from products and ratios of a measured variable by a
key variable. The most common use case of this function is for computing mortality rates by
sex, from the sex ratios and geometric mean of the rates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>undo_pr(.data, .var, key = Sex, times = 2000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="undo_pr_+3A_.data">.data</code></td>
<td>
<p>A vital object</p>
</td></tr>
<tr><td><code id="undo_pr_+3A_.var">.var</code></td>
<td>
<p>A bare variable name of the measured variable to use.</p>
</td></tr>
<tr><td><code id="undo_pr_+3A_key">key</code></td>
<td>
<p>A bare variable name specifying the key variable to use. This key
variable must include the value <code>geometric_mean</code>.</p>
</td></tr>
<tr><td><code id="undo_pr_+3A_times">times</code></td>
<td>
<p>When the variable is a distribution, the product must be computed
by simulation. This argument specifies the number of simulations to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that when a measured variable takes value 0, the geometric mean
is set to 10^-6 to avoid infinite values in the ratio. Therefore, when the
transformation is undone, the results will not be identical to the original
in the case that the original data was 0.
</p>


<h3>Value</h3>

<p>A vital object
</p>


<h3>References</h3>

<p>Hyndman, R.J., Booth, H., &amp; Yasmeen, F. (2013). Coherent
mortality forecasting: the product-ratio method with functional time series
models. <em>Demography</em>, 50(1), 261-283.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Make products and ratios
orig_data &lt;- aus_mortality |&gt;
  dplyr::filter(Year &gt; 2015, Sex != "total", Code == "NSW")
pr &lt;- orig_data |&gt;
  make_pr(Mortality)
# Compare original data with product/ratio version
orig_data
pr
# Undo products and ratios
pr |&gt; undo_pr(Mortality)
</code></pre>

<hr>
<h2 id='undo_sd'>Undo a mean/difference transformation</h2><span id='topic+undo_sd'></span>

<h3>Description</h3>

<p>Make a new vital from means and differences of a measured variable by a
key variable. The most common use case of this function is for computing migration numbers by
sex, from the sex differences and mean of the numbers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>undo_sd(.data, .var, key = Sex, times = 2000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="undo_sd_+3A_.data">.data</code></td>
<td>
<p>A vital object</p>
</td></tr>
<tr><td><code id="undo_sd_+3A_.var">.var</code></td>
<td>
<p>A bare variable name of the measured variable to use.</p>
</td></tr>
<tr><td><code id="undo_sd_+3A_key">key</code></td>
<td>
<p>A bare variable name specifying the key variable to use. This key
variable must include the value <code>geometric_mean</code>.</p>
</td></tr>
<tr><td><code id="undo_sd_+3A_times">times</code></td>
<td>
<p>When the variable is a distribution, the product must be computed
by simulation. This argument specifies the number of simulations to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vital object
</p>


<h3>References</h3>

<p>Hyndman, R.J., Booth, H., &amp; Yasmeen, F. (2013). Coherent
mortality forecasting: the product-ratio method with functional time series
models. <em>Demography</em>, 50(1), 261-283.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Make sums and differences
mig &lt;- net_migration(norway_mortality, norway_births) |&gt;
  dplyr::filter(Sex != "Total")
sd &lt;- mig |&gt;
  make_sd(NetMigration)
# Undo products and ratios
sd |&gt; undo_sd(NetMigration)
</code></pre>

<hr>
<h2 id='vital'>Create a vital object</h2><span id='topic+vital'></span>

<h3>Description</h3>

<p>A vital object is a type of tsibble that contains vital statistics such as
births, deaths, and population counts, and mortality and fertility rates.
It is a tsibble with a special class that allows for special methods to be used.
The object has an attribute that stores variables names needed for some functions,
including age, sex, births, deaths and population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vital(
  ...,
  key = NULL,
  index,
  .age = NULL,
  .sex = NULL,
  .deaths = NULL,
  .births = NULL,
  .population = NULL,
  regular = TRUE,
  .drop = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vital_+3A_...">...</code></td>
<td>
<p>A set of name-value pairs</p>
</td></tr>
<tr><td><code id="vital_+3A_key">key</code></td>
<td>
<p>Variable(s) that uniquely determine time indices. NULL for empty key,
and <code><a href="base.html#topic+c">c()</a></code> for multiple variables. It works with tidy selector
(e.g. <code><a href="tidyselect.html#topic+starts_with">tidyselect::starts_with()</a></code>)</p>
</td></tr>
<tr><td><code id="vital_+3A_index">index</code></td>
<td>
<p>A variable to specify the time index variable.</p>
</td></tr>
<tr><td><code id="vital_+3A_.age">.age</code></td>
<td>
<p>Character string with name of age variable</p>
</td></tr>
<tr><td><code id="vital_+3A_.sex">.sex</code></td>
<td>
<p>Character string with name of sex variable</p>
</td></tr>
<tr><td><code id="vital_+3A_.deaths">.deaths</code></td>
<td>
<p>Character string with name of deaths variable</p>
</td></tr>
<tr><td><code id="vital_+3A_.births">.births</code></td>
<td>
<p>Character string with name of births variable</p>
</td></tr>
<tr><td><code id="vital_+3A_.population">.population</code></td>
<td>
<p>Character string with name of population variable</p>
</td></tr>
<tr><td><code id="vital_+3A_regular">regular</code></td>
<td>
<p>Regular time interval (<code>TRUE</code>) or irregular (<code>FALSE</code>). The interval
is determined by the greatest common divisor of index column, if <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="vital_+3A_.drop">.drop</code></td>
<td>
<p>If <code>TRUE</code>, empty key groups are dropped.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tsibble with class <code>vital</code>.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>See Also</h3>

<p><code><a href="tsibble.html#topic+tsibble">tsibble::tsibble()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a vital with only age as a key
vital(
  year = rep(2010:2015, 100),
  age = rep(0:99, each = 6),
  mx = runif(600, 0, 1),
  index = year,
  key = age,
  .age = "age"
)
</code></pre>

<hr>
<h2 id='vital_vars'>Return vital variables</h2><span id='topic+vital_vars'></span>

<h3>Description</h3>

<p>A vital object is a special case of a tsibble object with additional attributes
identifying the age, sex, deaths, births and population variables.
<code>vital_vars()</code> returns a character vector the names of the vital variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vital_vars(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vital_vars_+3A_x">x</code></td>
<td>
<p>A tsibble object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of the names of the vital variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vital_vars(aus_mortality)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
